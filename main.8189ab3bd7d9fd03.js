(self.webpackChunkmapview=self.webpackChunkmapview||[]).push([[179],{9285:function(lt){lt.exports=function(){"use strict";function Pe(ae){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(z){return typeof z}:function(z){return z&&"function"==typeof Symbol&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(ae)}function W(ae,z){if(!(ae instanceof z))throw new TypeError("Cannot call a class as a function")}function o(ae,z){for(var q=0;q<z.length;q++){var K=z[q];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(ae,K.key,K)}}function me(ae,z,q){return z&&o(ae.prototype,z),q&&o(ae,q),Object.defineProperty(ae,"prototype",{writable:!1}),ae}function Ae(ae,z){if("function"!=typeof z&&null!==z)throw new TypeError("Super expression must either be null or a function");ae.prototype=Object.create(z&&z.prototype,{constructor:{value:ae,writable:!0,configurable:!0}}),Object.defineProperty(ae,"prototype",{writable:!1}),z&&Se(ae,z)}function E(ae){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(q){return q.__proto__||Object.getPrototypeOf(q)})(ae)}function Se(ae,z){return(Se=Object.setPrototypeOf||function(K,te){return K.__proto__=te,K})(ae,z)}function he(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Oe(ae,z,q){return(Oe=he()?Reflect.construct:function(te,re,Ue){var pt=[null];pt.push.apply(pt,re);var tn=new(Function.bind.apply(te,pt));return Ue&&Se(tn,Ue.prototype),tn}).apply(null,arguments)}function xe(ae){var z="function"==typeof Map?new Map:void 0;return xe=function(K){if(null===K||!function Ne(ae){return-1!==Function.toString.call(ae).indexOf("[native code]")}(K))return K;if("function"!=typeof K)throw new TypeError("Super expression must either be null or a function");if(typeof z<"u"){if(z.has(K))return z.get(K);z.set(K,te)}function te(){return Oe(K,arguments,E(this).constructor)}return te.prototype=Object.create(K.prototype,{constructor:{value:te,enumerable:!1,writable:!0,configurable:!0}}),Se(te,K)},xe(ae)}function Ke(ae,z){if(z&&("object"==typeof z||"function"==typeof z))return z;if(void 0!==z)throw new TypeError("Derived constructors may only return object or undefined");return function ct(ae){if(void 0===ae)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ae}(ae)}function Te(ae){var z=he();return function(){var te,K=E(ae);if(z){var re=E(this).constructor;te=Reflect.construct(K,arguments,re)}else te=K.apply(this,arguments);return Ke(this,te)}}function at(ae,z){return function Ct(ae){if(Array.isArray(ae))return ae}(ae)||function ue(ae,z){var q=null==ae?null:typeof Symbol<"u"&&ae[Symbol.iterator]||ae["@@iterator"];if(null!=q){var Ue,pt,K=[],te=!0,re=!1;try{for(q=q.call(ae);!(te=(Ue=q.next()).done)&&(K.push(Ue.value),!z||K.length!==z);te=!0);}catch(Rt){re=!0,pt=Rt}finally{try{!te&&null!=q.return&&q.return()}finally{if(re)throw pt}}return K}}(ae,z)||De(ae,z)||function ye(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function De(ae,z){if(ae){if("string"==typeof ae)return oe(ae,z);var q=Object.prototype.toString.call(ae).slice(8,-1);if("Object"===q&&ae.constructor&&(q=ae.constructor.name),"Map"===q||"Set"===q)return Array.from(ae);if("Arguments"===q||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(q))return oe(ae,z)}}function oe(ae,z){(null==z||z>ae.length)&&(z=ae.length);for(var q=0,K=new Array(z);q<z;q++)K[q]=ae[q];return K}function ce(ae,z){var q=typeof Symbol<"u"&&ae[Symbol.iterator]||ae["@@iterator"];if(!q){if(Array.isArray(ae)||(q=De(ae))||z&&ae&&"number"==typeof ae.length){q&&(ae=q);var K=0,te=function(){};return{s:te,n:function(){return K>=ae.length?{done:!0}:{done:!1,value:ae[K++]}},e:function(Rt){throw Rt},f:te}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var pt,re=!0,Ue=!1;return{s:function(){q=q.call(ae)},n:function(){var Rt=q.next();return re=Rt.done,Rt},e:function(Rt){Ue=!0,pt=Rt},f:function(){try{!re&&null!=q.return&&q.return()}finally{if(Ue)throw pt}}}}var Re=function(){return Re=Object.assign||function(q){for(var K,te=1,re=arguments.length;te<re;te++)for(var Ue in K=arguments[te])Object.prototype.hasOwnProperty.call(K,Ue)&&(q[Ue]=K[Ue]);return q},Re.apply(this,arguments)};function ve(ae){var z="function"==typeof Symbol&&Symbol.iterator,q=z&&ae[z],K=0;if(q)return q.call(ae);if(ae&&"number"==typeof ae.length)return{next:function(){return ae&&K>=ae.length&&(ae=void 0),{value:ae&&ae[K++],done:!ae}}};throw new TypeError(z?"Object is not iterable.":"Symbol.iterator is not defined.")}function we(ae,z){var q="function"==typeof Symbol&&ae[Symbol.iterator];if(!q)return ae;var te,Ue,K=q.call(ae),re=[];try{for(;(void 0===z||z-- >0)&&!(te=K.next()).done;)re.push(te.value)}catch(pt){Ue={error:pt}}finally{try{te&&!te.done&&(q=K.return)&&q.call(K)}finally{if(Ue)throw Ue.error}}return re}function Fe(ae,z,q){if(q||2===arguments.length)for(var re,K=0,te=z.length;K<te;K++)(re||!(K in z))&&(re||(re=Array.prototype.slice.call(z,0,K)),re[K]=z[K]);return ae.concat(re||Array.prototype.slice.call(z))}var se=function(ae){Ae(q,ae);var z=Te(q);function q(K,te,re){var Ue;return W(this,q),(Ue=z.call(this,K)).token=te,Ue.type=re||"error",Ue}return me(q)}(xe(Error)),_t=function(z){return z<4?"short":4===z?"long":"narrow"},Xe=function(z){return z%2==0?"2-digit":"numeric"};function de(ae,z){switch(ae.width){case 1:return"numeric";case 2:return"2-digit";case 3:return"short";case 4:return"long";case 5:return"narrow";default:return void z("".concat(ae.desc," is not supported with width ").concat(ae.width))}}function Qe(ae,z){var K=ae.desc;if("d"===ae.char)return Xe(ae.width);z("".concat(K," is not supported"))}function dt(ae,z){var q=ae.char,te=ae.width;return("c"===q||"e"===q)&&te<3&&z("Numeric value is not supported for ".concat(ae.desc,"; falling back to weekday:short"),se.WARNING),_t(te)}function ut(ae,z){var K=ae.desc,te=ae.width;switch(ae.char){case"v":case"z":return 4===te?"long":"short";case"V":return 4===te?"long":void z("".concat(K," is not supported with width ").concat(te));case"X":return void z("".concat(K," is not supported"))}return"short"}function $e(ae,z){switch(ae.field){case"era":return{era:_t(ae.width)};case"year":return function st(ae,z){switch(ae.char){case"y":return{year:Xe(ae.width)};case"r":return{calendar:"gregory",year:"numeric"};default:return z("".concat(ae.desc," is not supported; falling back to year:numeric"),se.WARNING),{year:"numeric"}}}(ae,z);case"month":return{month:de(ae,z)};case"day":return{day:Qe(ae,z)};case"weekday":return{weekday:dt(ae,z)};case"period":return;case"hour":return function Me(ae){var q,z=Xe(ae.width);switch(ae.char){case"h":q="h12";break;case"H":q="h23";break;case"k":q="h24";break;case"K":q="h11"}return q?{hour:z,hourCycle:q}:{hour:z}}(ae);case"min":return{minute:Xe(ae.width)};case"sec":return{second:Xe(ae.width)};case"tz":return{timeZoneName:ut(ae,z)};case"quarter":case"week":case"sec-frac":case"ms":z("".concat(ae.desc," is not supported"))}}function gt(ae){var re,z=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(pt){throw pt},q={},K=[],te=ce(ae);try{var Ue=function(){var Rt=re.value,tn=Rt.error,Mn=Rt.field,Ni=Rt.str;if(tn){var Cr=new se(tn.message,Rt);Cr.stack=tn.stack,z(Cr)}if(Ni){var ai="Ignoring string part: ".concat(Ni);z(new se(ai,Rt,se.WARNING))}Mn&&(-1===K.indexOf(Mn)?K.push(Mn):z(new se("Duplicate ".concat(Mn," token"),Rt)));var zr=$e(Rt,function(ga,Es){return z(new se(ga,Rt,Es))});zr&&Object.assign(q,zr)};for(te.s();!(re=te.n()).done;)Ue()}catch(pt){te.e(pt)}finally{te.f()}return q}var Mt={G:{field:"era",desc:"Era"},y:{field:"year",desc:"Year"},Y:{field:"year",desc:'Year of "Week of Year"'},u:{field:"year",desc:"Extended year"},U:{field:"year",desc:"Cyclic year name"},r:{field:"year",desc:"Related Gregorian year"},Q:{field:"quarter",desc:"Quarter"},q:{field:"quarter",desc:"Stand-alone quarter"},M:{field:"month",desc:"Month in year"},L:{field:"month",desc:"Stand-alone month in year"},w:{field:"week",desc:"Week of year"},W:{field:"week",desc:"Week of month"},d:{field:"day",desc:"Day in month"},D:{field:"day",desc:"Day of year"},F:{field:"day",desc:"Day of week in month"},g:{field:"day",desc:"Modified julian day"},E:{field:"weekday",desc:"Day of week"},e:{field:"weekday",desc:"Local day of week"},c:{field:"weekday",desc:"Stand-alone local day of week"},a:{field:"period",desc:"AM/PM marker"},b:{field:"period",desc:"AM/PM/noon/midnight marker"},B:{field:"period",desc:"Flexible day period"},h:{field:"hour",desc:"Hour in AM/PM (1~12)"},H:{field:"hour",desc:"Hour in day (0~23)"},k:{field:"hour",desc:"Hour in day (1~24)"},K:{field:"hour",desc:"Hour in AM/PM (0~11)"},j:{field:"hour",desc:"Hour in preferred cycle"},J:{field:"hour",desc:"Hour in preferred cycle without marker"},C:{field:"hour",desc:"Hour in preferred cycle with flexible marker"},m:{field:"min",desc:"Minute in hour"},s:{field:"sec",desc:"Second in minute"},S:{field:"sec-frac",desc:"Fractional second"},A:{field:"ms",desc:"Milliseconds in day"},z:{field:"tz",desc:"Time Zone: specific non-location"},Z:{field:"tz",desc:"Time Zone"},O:{field:"tz",desc:"Time Zone: localized"},v:{field:"tz",desc:"Time Zone: generic non-location"},V:{field:"tz",desc:"Time Zone: ID"},X:{field:"tz",desc:"Time Zone: ISO8601 with Z"},x:{field:"tz",desc:"Time Zone: ISO8601"}},tt=function(z){return z>="A"&&z<="Z"||z>="a"&&z<="z"};function rn(ae,z){var q=ae[z];if(!q)return null;if(tt(q))return function Bt(ae,z){for(var q=ae[z],K=1;ae[++z]===q;)++K;var te=Mt[q];if(!te){var re="The letter ".concat(q," is not a valid field identifier");return{char:q,error:new Error(re),width:K}}return{char:q,field:te.field,desc:te.desc,width:K}}(ae,z);if("'"===q)return function Vt(ae,z){var q=ae[++z],K=2;if("'"===q)return{char:"'",str:q,width:K};for(;;){var te=ae[++z];if(++K,void 0===te){var re="Unterminated quoted literal in pattern: ".concat(q||ae);return{char:"'",error:new Error(re),str:q,width:K}}if("'"===te){if("'"!==ae[++z])return{char:"'",str:q,width:K};++K}q+=te}}(ae,z);for(var K=q,te=1;;){var re=ae[++z];if(!re||tt(re)||"'"===re)return{char:q,str:K,width:te};K+=re,te+=1}}function Gt(ae){for(var z=[],q=0;;){var K=rn(ae,q);if(!K)return z;z.push(K),q+=K.width}}var Sn=function(ae){Ae(q,ae);var z=Te(q);function q(K,te){var re;return W(this,q),(re=z.call(this,te)).code=K,re}return me(q)}(xe(Error)),si=function(ae){Ae(q,ae);var z=Te(q);function q(K,te){var re;return W(this,q),(re=z.call(this,"BAD_OPTION","Unknown ".concat(K," option: ").concat(te))).stem=K,re.option=te,re}return me(q)}(Sn),$n=function(ae){Ae(q,ae);var z=Te(q);function q(K){var te;return W(this,q),(te=z.call(this,"BAD_STEM","Unknown stem: ".concat(K))).stem=K,te}return me(q)}(Sn),hn=function(ae){Ae(q,ae);var z=Te(q);function q(K,te){var re;return W(this,q),(re=z.call(this,"MASKED_VALUE","Value for ".concat(K," is set multiple times"))).type=K,re.prev=te,re}return me(q)}(Sn),jr=function(ae){Ae(q,ae);var z=Te(q);function q(K){var te;return W(this,q),(te=z.call(this,"MISSING_OPTION","Required option missing for ".concat(K))).stem=K,te}return me(q)}(Sn),sr=function(ae){Ae(q,ae);var z=Te(q);function q(K,te){var re;return W(this,q),(re=z.call(this,"BAD_PATTERN",te)).char=K,re}return me(q)}(Sn),Fr=function(ae){Ae(q,ae);var z=Te(q);function q(K,te,re){var Ue;W(this,q);var pt=re>1?"".concat(re," options"):"one option";return(Ue=z.call(this,"TOO_MANY_OPTIONS","Token ".concat(K," only supports ").concat(pt," (got ").concat(te.length,")"))).stem=K,Ue.options=te,Ue}return me(q)}(Sn),yi=function(ae){Ae(q,ae);var z=Te(q);function q(K,te){var re;return W(this,q),(re=z.call(this,"UNSUPPORTED","The stem ".concat(K," is not supported"))).stem=K,te&&(re.message+=" with value ".concat(te),re.source=te),re}return me(q)}(Sn);function Ri(ae,z){var q=z.numberingSystem;return Array.isArray(ae)||(ae=[ae]),q?ae.map(function(K){var te=-1===K.indexOf("-u-")?"u-nu":"nu";return"".concat(K,"-").concat(te,"-").concat(q)}).concat(ae):ae}function je(ae){var z=ae.scale,q=ae.unit,K="number"==typeof z&&z>=0?z:1;return q&&"percent"===q.style&&(K*=.01),K}function Je(ae,z){var q=ae.decimal,K=ae.group,te=ae.integerWidth,re=ae.notation,Ue=ae.precision,pt=ae.roundingMode,Rt=ae.sign,tn=ae.unit,Mn=ae.unitPer,Ni=ae.unitWidth,Cr=function(xr,Qr){z&&z(new yi(xr,Qr))},ai={};if(tn)switch(tn.style){case"base-unit":ai.style="decimal";break;case"currency":ai.style="currency",ai.currency=tn.currency;break;case"measure-unit":ai.style="unit",ai.unit=tn.unit.replace(/.*-/,""),Mn&&(ai.unit+="-per-"+Mn.replace(/.*-/,""));break;case"percent":ai.style="percent";break;case"permille":Cr("permille")}switch(Ni){case"unit-width-full-name":ai.currencyDisplay="name",ai.unitDisplay="long";break;case"unit-width-hidden":Cr(Ni);break;case"unit-width-iso-code":ai.currencyDisplay="code";break;case"unit-width-narrow":ai.currencyDisplay="narrowSymbol",ai.unitDisplay="narrow";break;case"unit-width-short":ai.currencyDisplay="symbol",ai.unitDisplay="short"}switch(K){case"group-off":ai.useGrouping=!1;break;case"group-auto":ai.useGrouping=!0;break;case"group-min2":case"group-on-aligned":case"group-thousands":Cr(K),ai.useGrouping=!0}if(Ue)switch(Ue.style){case"precision-fraction":var zr=Ue.minFraction,ga=Ue.maxFraction,Es=Ue.minSignificant,qs=Ue.maxSignificant,od=Ue.source;"number"==typeof zr&&(ai.minimumFractionDigits=zr,"number"==typeof Es&&Cr("precision-fraction",od)),"number"==typeof ga&&(ai.maximumFractionDigits=ga),"number"==typeof Es&&(ai.minimumSignificantDigits=Es),"number"==typeof qs&&(ai.maximumSignificantDigits=qs);break;case"precision-integer":ai.maximumFractionDigits=0;break;case"precision-unlimited":ai.maximumFractionDigits=20;break;case"precision-increment":case"precision-currency-standard":break;case"precision-currency-cash":Cr(Ue.style)}if(re)switch(re.style){case"compact-short":ai.notation="compact",ai.compactDisplay="short";break;case"compact-long":ai.notation="compact",ai.compactDisplay="long";break;case"notation-simple":ai.notation="standard";break;case"scientific":case"engineering":var sd=re.expDigits,ad=re.expSign,_a=re.source,Pd=re.style;ai.notation=Pd,(sd&&sd>1||ad&&"sign-auto"!==ad)&&Cr(Pd,_a)}if(te){var ld=te.min,yu=te.max,fn=te.source;ld>0&&(ai.minimumIntegerDigits=ld),Number(yu)>0&&(3!==yu||"engineering"!==ai.notation&&"scientific"!==ai.notation?Cr("integer-width",fn):ai.notation="engineering")}switch(Rt){case"sign-auto":ai.signDisplay="auto";break;case"sign-always":ai.signDisplay="always";break;case"sign-except-zero":ai.signDisplay="exceptZero";break;case"sign-never":ai.signDisplay="never";break;case"sign-accounting":ai.currencySign="accounting";break;case"sign-accounting-always":ai.currencySign="accounting",ai.signDisplay="always";break;case"sign-accounting-except-zero":ai.currencySign="accounting",ai.signDisplay="exceptZero"}return"decimal-always"===q&&Cr(q),pt&&Cr(pt),ai}function Tt(ae,z,q){var K=ae[z];switch(K){case"%":return{char:"%",style:"percent",width:1};case"\u2030":return{char:"%",style:"permille",width:1};case"\xa4":for(var te=1;"\xa4"===ae[++z];)++te;switch(te){case 1:return{char:K,currency:"default",width:te};case 2:return{char:K,currency:"iso-code",width:te};case 3:return{char:K,currency:"full-name",width:te};case 5:return{char:K,currency:"narrow",width:te};default:var re="Invalid number (".concat(te,") of \xa4 chars in pattern");return q(new sr("\xa4",re)),null}case"*":var Ue=ae[z+1];if(Ue)return{char:K,pad:Ue,width:2};break;case"+":case"-":return{char:K,width:1};case"'":var pt=ae[++z],Rt=2;if("'"===pt)return{char:K,str:pt,width:Rt};for(;;){var tn=ae[++z];if(++Rt,void 0===tn){var Mn="Unterminated quoted literal in pattern: ".concat(pt);return q(new sr("'",Mn)),{char:K,str:pt,width:Rt}}if("'"===tn){if("'"!==ae[++z])return{char:K,str:pt,width:Rt};++Rt}pt+=tn}}return null}var Yt=function(z){return z>="0"&&z<="9"};function ln(ae,z){var q=ae[z];if(Yt(q))for(var K=q;;){var te=ae[++z];if(!Yt(te))return{char:"0",digits:K,width:K.length};K+=te}switch(q){case"#":for(var re=1;"#"===ae[++z];)++re;return{char:q,width:re};case"@":for(var Ue=1;"@"===ae[++z];)++Ue;var pt=Ue;for(z-=1;"#"===ae[++z];)++pt;return{char:q,min:Ue,width:pt};case"E":var Rt="+"===ae[z+1];Rt&&++z;for(var tn=0;"0"===ae[++z];)++tn;if(tn)return{char:q,expDigits:tn,plus:Rt,width:(Rt?2:1)+tn};break;case".":case",":return{char:q,width:1}}return null}function un(ae,z,q){for(var K=(()=>{return(zr=K||(K={}))[zr.Prefix=0]="Prefix",zr[zr.Number=1]="Number",zr[zr.Suffix=2]="Suffix",K;var zr})(),te=[],re=[],Ue=[],pt=K.Prefix,Rt="";z<ae.length;){var tn=ae[z];if(";"===tn){z+=1;break}switch(pt){case K.Prefix:var Mn=Tt(ae,z,q);if(Mn)Rt&&(te.push({char:"'",str:Rt,width:Rt.length}),Rt=""),te.push(Mn),z+=Mn.width;else{var Ni=ln(ae,z);Ni?(Rt&&(te.push({char:"'",str:Rt,width:Rt.length}),Rt=""),pt=K.Number,re.push(Ni),z+=Ni.width):(Rt+=tn,z+=1)}break;case K.Number:var Cr=ln(ae,z);Cr?(re.push(Cr),z+=Cr.width):pt=K.Suffix;break;case K.Suffix:var ai=Tt(ae,z,q);ai?(Rt&&(Ue.push({char:"'",str:Rt,width:Rt.length}),Rt=""),Ue.push(ai),z+=ai.width):(Rt+=tn,z+=1)}}return Rt&&Ue.push({char:"'",str:Rt,width:Rt.length}),{pattern:{prefix:te,number:re,suffix:Ue},pos:z}}function mt(ae,z){var q=un(ae,0,z),K=q.pattern,te=q.pos;return te<ae.length?{tokens:K,negative:un(ae,te,z).pattern}:{tokens:K}}function jt(ae,z){for(var q={},K=!1,te=!1,re=0,Ue="",pt=-1,Rt="",tn=0,Mn=0;Mn<ae.length;++Mn){var Ni=ae[Mn];switch(Ni.char){case"#":-1===pt?(Ue&&z(new sr("#","Pattern has # after integer digits")),re+=Ni.width):tn+=Ni.width;break;case"0":-1===pt?Ue+=Ni.digits:(tn&&z(new sr("0","Pattern has digits after # in fraction")),Rt+=Ni.digits);break;case"@":q.precision&&z(new hn("precision",q.precision)),q.precision={style:"precision-fraction",minSignificant:Ni.min,maxSignificant:Ni.width};break;case",":K=!0;break;case".":1===pt&&z(new sr(".","Pattern has more than one decimal separator")),pt=Mn;break;case"E":te&&z(new hn("exponent",q.notation)),K&&z(new sr("E","Exponential patterns may not contain grouping separators")),q.notation={style:"scientific"},Ni.expDigits>1&&(q.notation.expDigits=Ni.expDigits),Ni.plus&&(q.notation.expSign="sign-always"),te=!0}}K?q.group="group-auto":re+Ue.length>3&&(q.group="group-off");var Es=Number("".concat(Ue||"0",".").concat(Rt));if(Es&&(q.precision={style:"precision-increment",increment:Es}),te)if((!q.precision||Es)&&(q.integerWidth=re?{min:1,max:re+Ue.length}:{min:Math.max(1,Ue.length)}),q.precision)Es||(q.integerWidth={min:1,max:1});else{var qs=Ue.length+Rt.length;-1===pt?qs>0&&(q.precision={style:"precision-fraction",maxSignificant:qs}):(q.precision={style:"precision-fraction",maxSignificant:Math.max(1,qs)+tn},qs>1&&(q.precision.minSignificant=qs))}else Ue.length>1&&(q.integerWidth={min:Ue.length}),!q.precision&&(Rt.length||tn)&&(q.precision={style:"precision-fraction",minFraction:Rt.length,maxFraction:Rt.length+tn});return q}function In(ae,z,q,K,te){var Rt,re=!1,Ue="",pt=ce(ae);try{for(pt.s();!(Rt=pt.n()).done;){var tn=Rt.value;switch(tn.char){case"%":z.unit={style:tn.style},te?re=!0:Ue="";break;case"\xa4":if(!q){K(new sr("\xa4","The \xa4 pattern requires a currency"));break}switch(z.unit={style:"currency",currency:q},tn.currency){case"iso-code":z.unitWidth="unit-width-iso-code";break;case"full-name":z.unitWidth="unit-width-full-name";break;case"narrow":z.unitWidth="unit-width-narrow"}te?re=!0:Ue="";break;case"*":break;case"+":re||(Ue+="+");break;case"'":re||(Ue+=tn.str)}}}catch(Ni){pt.e(Ni)}finally{pt.f()}return Ue}function sn(ae,z){var re,q=!1,K="",te=ce(ae);try{for(te.s();!(re=te.n()).done;){var Ue=re.value;switch(Ue.char){case"%":case"\xa4":z?q=!0:K="";break;case"-":q||(K+="-");break;case"'":q||(K+=Ue.str)}}}catch(pt){te.e(pt)}finally{te.f()}return K}function Fn(ae,z){var q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(Ni){throw Ni},K=mt(ae,q),te=K.tokens,re=K.negative,Ue=jt(te.number,q),pt=In(te.prefix,Ue,z,q,!0),Rt=In(te.suffix,Ue,z,q,!1);if(re){var tn=sn(re.prefix,!0),Mn=sn(re.suffix,!1);Ue.affix={pos:[pt,Rt],neg:[tn,Mn]},Ue.sign="sign-never"}else(pt||Rt)&&(Ue.affix={pos:[pt,Rt]});return Ue}function Ti(ae){var K=at(ae.split("-",1),1);return-1!==["acceleration","angle","area","concentr","consumption","digital","duration","electric","energy","force","frequency","graphics","length","light","mass","power","pressure","speed","temperature","torque","volume"].indexOf(K[0])}var Bi={"compact-short":0,"compact-long":0,"notation-simple":0,scientific:2,engineering:2,percent:0,permille:0,"base-unit":0,currency:1,"measure-unit":1,"per-measure-unit":1,"unit-width-narrow":0,"unit-width-short":0,"unit-width-full-name":0,"unit-width-iso-code":0,"unit-width-hidden":0,"precision-integer":0,"precision-unlimited":0,"precision-currency-standard":0,"precision-currency-cash":0,"precision-increment":1,"rounding-mode-ceiling":0,"rounding-mode-floor":0,"rounding-mode-down":0,"rounding-mode-up":0,"rounding-mode-half-even":0,"rounding-mode-half-down":0,"rounding-mode-half-up":0,"rounding-mode-unnecessary":0,"integer-width":1,scale:1,"group-off":0,"group-min2":0,"group-auto":0,"group-on-aligned":0,"group-thousands":0,latin:0,"numbering-system":1,"sign-auto":0,"sign-always":0,"sign-never":0,"sign-accounting":0,"sign-accounting-always":0,"sign-except-zero":0,"sign-accounting-except-zero":0,"decimal-auto":0,"decimal-always":0},fr={currency:1,"integer-width":1,"measure-unit":1,"numbering-system":1,"per-measure-unit":1,"precision-increment":1,scale:1};function hi(ae,z,q){if(function Cn(ae){return ae in Bi}(ae)){var K=Bi[ae];if(z.length>K){if(0===K){var re,te=ce(z);try{for(te.s();!(re=te.n()).done;)q(new si(ae,re.value))}catch(pt){te.e(pt)}finally{te.f()}}else q(new Fr(ae,z,K));return!1}if(function qn(ae){return ae in fr}(ae)&&z.length<fr[ae])return q(new jr(ae)),!1}return!0}function Di(ae,z){var K=ae&&ae.match("fraction"===z?/^\.(0*)(\+|#*)$/:/^(@+)(\+|#*)$/);if(K){var te=K[1].length;switch(K[2].charAt(0)){case"":return{min:te,max:te};case"+":return{min:te,max:null};case"#":return{min:te,max:te+K[2].length}}}return null}var wi=function(){function ae(z){W(this,ae),this.skeleton={},this.onError=z}return me(ae,[{key:"badOption",value:function(q,K){this.onError(new si(q,K))}},{key:"assertEmpty",value:function(q){var K=this.skeleton[q];K&&this.onError(new hn(q,K))}},{key:"parseToken",value:function(q,K){if(hi(q,K,this.onError)){var te=K[0],re=this.skeleton;switch(q){case"compact-short":case"compact-long":case"notation-simple":this.assertEmpty("notation"),re.notation={style:q};break;case"scientific":case"engineering":var tn,Ue=null,pt=void 0,Rt=ce(K);try{for(Rt.s();!(tn=Rt.n()).done;){var Mn=tn.value;switch(Mn){case"sign-auto":case"sign-always":case"sign-never":case"sign-accounting":case"sign-accounting-always":case"sign-except-zero":case"sign-accounting-except-zero":pt=Mn;break;default:/^\+e+$/.test(Mn)?Ue=Mn.length-1:this.badOption(q,Mn)}}}catch(Es){Rt.e(Es)}finally{Rt.f()}this.assertEmpty("notation");var Ni=K.join("/");re.notation=Ue&&pt?{style:q,source:Ni,expDigits:Ue,expSign:pt}:Ue?{style:q,source:Ni,expDigits:Ue}:pt?{style:q,source:Ni,expSign:pt}:{style:q,source:Ni};break;case"percent":case"permille":case"base-unit":this.assertEmpty("unit"),re.unit={style:q};break;case"currency":/^[A-Z]{3}$/.test(te)?(this.assertEmpty("unit"),re.unit={style:q,currency:te}):this.badOption(q,te);break;case"measure-unit":Ti(te)?(this.assertEmpty("unit"),re.unit={style:q,unit:te}):this.badOption(q,te);break;case"per-measure-unit":Ti(te)?(this.assertEmpty("unitPer"),re.unitPer=te):this.badOption(q,te);break;case"unit-width-narrow":case"unit-width-short":case"unit-width-full-name":case"unit-width-iso-code":case"unit-width-hidden":this.assertEmpty("unitWidth"),re.unitWidth=q;break;case"precision-integer":case"precision-unlimited":case"precision-currency-standard":case"precision-currency-cash":this.assertEmpty("precision"),re.precision={style:q};break;case"precision-increment":var Cr=Number(te);Cr>0?(this.assertEmpty("precision"),re.precision={style:q,increment:Cr}):this.badOption(q,te);break;case"rounding-mode-ceiling":case"rounding-mode-floor":case"rounding-mode-down":case"rounding-mode-up":case"rounding-mode-half-even":case"rounding-mode-half-down":case"rounding-mode-half-up":case"rounding-mode-unnecessary":this.assertEmpty("roundingMode"),re.roundingMode=q;break;case"integer-width":if(/^\+0*$/.test(te))this.assertEmpty("integerWidth"),re.integerWidth={source:te,min:te.length-1};else{var ai=te.match(/^#*(0*)$/);ai?(this.assertEmpty("integerWidth"),re.integerWidth={source:te,min:ai[1].length,max:ai[0].length}):this.badOption(q,te)}break;case"scale":var zr=Number(te);zr>0?(this.assertEmpty("scale"),re.scale=zr):this.badOption(q,te);break;case"group-off":case"group-min2":case"group-auto":case"group-on-aligned":case"group-thousands":this.assertEmpty("group"),re.group=q;break;case"latin":this.assertEmpty("numberingSystem"),re.numberingSystem="latn";break;case"numbering-system":!function hr(ae){return-1!==["arab","arabext","bali","beng","deva","fullwide","gujr","guru","hanidec","khmr","knda","laoo","latn","limb","mlym","mong","mymr","orya","tamldec","telu","thai","tibt"].indexOf(ae)}(te)?this.badOption(q,te):(this.assertEmpty("numberingSystem"),re.numberingSystem=te);break;case"sign-auto":case"sign-always":case"sign-never":case"sign-accounting":case"sign-accounting-always":case"sign-except-zero":case"sign-accounting-except-zero":this.assertEmpty("sign"),re.sign=q;break;case"decimal-auto":case"decimal-always":this.assertEmpty("decimal"),re.decimal=q;break;default:var ga=function Mr(ae,z,q){var K=Di(ae,"fraction");if(K){z.length>1&&q(new Fr(ae,z,1));var te={style:"precision-fraction",source:ae,minFraction:K.min};null!=K.max&&(te.maxFraction=K.max);var re=z[0],Ue=Di(re,"significant");return Ue?(te.source="".concat(ae,"/").concat(re),te.minSignificant=Ue.min,null!=Ue.max&&(te.maxSignificant=Ue.max)):re&&q(new si(ae,re)),te}var pt=Di(ae,"significant");if(pt){var tn,Rt=ce(z);try{for(Rt.s();!(tn=Rt.n()).done;)q(new si(ae,tn.value))}catch(Cr){Rt.e(Cr)}finally{Rt.f()}var Ni={style:"precision-fraction",source:ae,minSignificant:pt.min};return null!=pt.max&&(Ni.maxSignificant=pt.max),Ni}return null}(q,K,this.onError);ga?(this.assertEmpty("precision"),re.precision=ga):this.onError(new $n(q))}}}}]),ae}();function nr(ae){var te,z=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(zr){throw zr},q=[],K=ce(ae.split(" "));try{for(K.s();!(te=K.n()).done;){var re=te.value;if(re){var Ue=re.split("/"),pt=Ue.shift()||"";q.push({stem:pt,options:Ue})}}}catch(zr){K.e(zr)}finally{K.f()}for(var Rt=new wi(z),tn=0,Mn=q;tn<Mn.length;tn++){var Ni=Mn[tn];Rt.parseToken(Ni.stem,Ni.options)}return Rt.skeleton}function dn(ae,z,q,K){"string"==typeof z&&(z=0===z.indexOf("::")?nr(z.slice(2),K):Fn(z,q,K));var te=Ri(ae,z),re=Je(z,K),Ue=function Le(ae){var z=je(ae),q=ae.precision;return q&&"precision-increment"===q.style?function(K){return function It(ae,z){var q=+ae+z/2;return q-q%+z}(K,q.increment)*z}:function(K){return K*z}}(z),pt=new Intl.NumberFormat(te,re);if(z.affix){var Rt=at(z.affix.pos,2),tn=Rt[0],Mn=Rt[1],Cr=at(z.affix.neg||["",""],2),ai=Cr[0],zr=Cr[1];return function(ga){var Es=pt.format(Ue(ga));return ga<0?"".concat(ai).concat(Es).concat(zr):"".concat(tn).concat(Es).concat(Mn)}}return function(ga){return pt.format(Ue(ga))}}function wa(ae,z,q,K){"string"==typeof z&&(z=0===z.indexOf("::")?nr(z.slice(2),K):Fn(z,q,K));var te=Ri(ae,z),re=Je(z,K),Ue=function ke(ae){var z=je(ae),q=ae.precision;if(q&&"precision-increment"===q.style){var K="+n + ".concat(q.increment/2),te="x - (x % +".concat(q.increment,")");return 1!==z&&(te="(".concat(te,") * ").concat(z)),"function(n) { var x = ".concat(K,"; return ").concat(te,"; }")}return 1!==z?"function(n) { return n * ".concat(z,"; }"):null}(z),pt=["(function() {","var opt = ".concat(JSON.stringify(re),";"),"var nf = new Intl.NumberFormat(".concat(JSON.stringify(te),", opt);")],Rt="nf.format(value)";if(Ue&&(pt.push("var mod = ".concat(Ue,";")),Rt="nf.format(mod(value))"),z.affix){var Mn=at(z.affix.pos.map(function(qs){return JSON.stringify(qs)}),2),Ni=Mn[0],Cr=Mn[1];if(z.affix.neg){var zr=at(z.affix.neg.map(function(qs){return JSON.stringify(qs)}),2),Es=zr[1];Rt="value < 0 ? ".concat(zr[0]," + ").concat(Rt," + ").concat(Es," : ").concat(Ni," + ").concat(Rt," + ").concat(Cr)}else Rt="".concat(Ni," + ").concat(Rt," + ").concat(Cr)}return pt.push("return function(value) { return ".concat(Rt,"; }")),pt.join("\n  ")+"\n})()"}var ae,z,q,Lr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fi={},ar={},Zs={exports:{}};z=Lr,q=function(){var z=Object.prototype.hasOwnProperty,q=Object.prototype.toString,K="boolean"==typeof(new RegExp).sticky;function te(fn){return fn&&"[object RegExp]"===q.call(fn)}function re(fn){return fn&&"object"===Pe(fn)&&!te(fn)&&!Array.isArray(fn)}function pt(fn){return new RegExp("|"+fn).exec("").length-1}function Rt(fn){return"("+fn+")"}function tn(fn){return fn.length?"(?:"+fn.map(function(Gi){return"(?:"+Gi+")"}).join("|")+")":"(?!)"}function Mn(fn){if("string"==typeof fn)return"(?:"+function Ue(fn){return fn.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}(fn)+")";if(te(fn)){if(fn.ignoreCase)throw new Error("RegExp /i flag not allowed");if(fn.global)throw new Error("RegExp /g flag is implied");if(fn.sticky)throw new Error("RegExp /y flag is implied");if(fn.multiline)throw new Error("RegExp /m flag is implied");return fn.source}throw new Error("Not a pattern: "+fn)}function ai(fn,Kn){if(re(Kn)||(Kn={match:Kn}),Kn.include)throw new Error("Matching rules cannot also include states");var Gi={defaultType:fn,lineBreaks:!!Kn.error||!!Kn.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var xr in Kn)z.call(Kn,xr)&&(Gi[xr]=Kn[xr]);if("string"==typeof Gi.type&&fn!==Gi.type)throw new Error("Type transform cannot be a string (type '"+Gi.type+"' for token '"+fn+"')");var Qr=Gi.match;return Gi.match=Array.isArray(Qr)?Qr:Qr?[Qr]:[],Gi.match.sort(function(Ur,ho){return te(Ur)&&te(ho)?0:te(ho)?-1:te(Ur)?1:ho.length-Ur.length}),Gi}function zr(fn){return Array.isArray(fn)?function Cr(fn){for(var Kn=[],Gi=0;Gi<fn.length;Gi++){var xr=fn[Gi];if(xr.include)for(var Qr=[].concat(xr.include),Ur=0;Ur<Qr.length;Ur++)Kn.push({include:Qr[Ur]});else{if(!xr.type)throw new Error("Rule has no type: "+JSON.stringify(xr));Kn.push(ai(xr.type,xr))}}return Kn}(fn):function Ni(fn){for(var Kn=Object.getOwnPropertyNames(fn),Gi=[],xr=0;xr<Kn.length;xr++){var Qr=Kn[xr],ho=[].concat(fn[Qr]);if("include"!==Qr){var Za=[];ho.forEach(function(Ar){re(Ar)?(Za.length&&Gi.push(ai(Qr,Za)),Gi.push(ai(Qr,Ar)),Za=[]):Za.push(Ar)}),Za.length&&Gi.push(ai(Qr,Za))}else for(var ya=0;ya<ho.length;ya++)Gi.push({include:ho[ya]})}return Gi}(fn)}var ga=ai("error",{lineBreaks:!0,shouldThrow:!0});function Es(fn,Kn){for(var Gi=null,xr=Object.create(null),Qr=!0,Ur=null,ho=[],ya=[],Za=0;Za<fn.length;Za++)fn[Za].fallback&&(Qr=!1);for(Za=0;Za<fn.length;Za++){var Ar=fn[Za];if(Ar.include)throw new Error("Inheritance is not allowed in stateless lexers");if(Ar.error||Ar.fallback){if(Gi)throw!Ar.fallback==!Gi.fallback?new Error("Multiple "+(Ar.fallback?"fallback":"error")+" rules not allowed (for token '"+Ar.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+Ar.defaultType+"')");Gi=Ar}var cl=Ar.match.slice();if(Qr)for(;cl.length&&"string"==typeof cl[0]&&1===cl[0].length;)xr[cl.shift().charCodeAt(0)]=Ar;if(Ar.pop||Ar.push||Ar.next){if(!Kn)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+Ar.defaultType+"')");if(Ar.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+Ar.defaultType+"')")}if(0!==cl.length){Qr=!1,ho.push(Ar);for(var Fs=0;Fs<cl.length;Fs++){var cd=cl[Fs];if(te(cd))if(null===Ur)Ur=cd.unicode;else if(Ur!==cd.unicode&&!1===Ar.fallback)throw new Error("If one rule is /u then all must be")}var bp=tn(cl.map(Mn)),ud=new RegExp(bp);if(ud.test(""))throw new Error("RegExp matches empty string: "+ud);if(pt(bp)>0)throw new Error("RegExp has capture groups: "+ud+"\nUse (?: \u2026 ) instead");if(!Ar.lineBreaks&&ud.test("\n"))throw new Error("Rule should declare lineBreaks: "+ud);ya.push(Rt(bp))}}var Of=Gi&&Gi.fallback,$h=K&&!Of?"ym":"gm",dh=K||Of?"":"|";return!0===Ur&&($h+="u"),{regexp:new RegExp(tn(ya)+dh,$h),groups:ho,fast:xr,error:Gi||ga}}function od(fn,Kn,Gi){var xr=fn&&(fn.push||fn.next);if(xr&&!Gi[xr])throw new Error("Missing state '"+xr+"' (in token '"+fn.defaultType+"' of state '"+Kn+"')");if(fn&&fn.pop&&1!=+fn.pop)throw new Error("pop must be 1 (in token '"+fn.defaultType+"' of state '"+Kn+"')")}var _a=function(Kn,Gi){this.startState=Gi,this.states=Kn,this.buffer="",this.stack=[],this.reset()};_a.prototype.reset=function(fn,Kn){return this.buffer=fn||"",this.index=0,this.line=Kn?Kn.line:1,this.col=Kn?Kn.col:1,this.queuedToken=Kn?Kn.queuedToken:null,this.queuedThrow=Kn?Kn.queuedThrow:null,this.setState(Kn?Kn.state:this.startState),this.stack=Kn&&Kn.stack?Kn.stack.slice():[],this},_a.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedThrow:this.queuedThrow}},_a.prototype.setState=function(fn){if(fn&&this.state!==fn){this.state=fn;var Kn=this.states[fn];this.groups=Kn.groups,this.error=Kn.error,this.re=Kn.regexp,this.fast=Kn.fast}},_a.prototype.popState=function(){this.setState(this.stack.pop())},_a.prototype.pushState=function(fn){this.stack.push(this.state),this.setState(fn)};var Pd=K?function(fn,Kn){return fn.exec(Kn)}:function(fn,Kn){var Gi=fn.exec(Kn);return 0===Gi[0].length?null:Gi};function ld(){return this.value}if(_a.prototype._getGroup=function(fn){for(var Kn=this.groups.length,Gi=0;Gi<Kn;Gi++)if(void 0!==fn[Gi+1])return this.groups[Gi];throw new Error("Cannot find token type for matched text")},_a.prototype.next=function(){var fn=this.index;if(this.queuedGroup){var Kn=this._token(this.queuedGroup,this.queuedText,fn);return this.queuedGroup=null,this.queuedText="",Kn}var Gi=this.buffer;if(fn!==Gi.length){if(ho=this.fast[Gi.charCodeAt(fn)])return this._token(ho,Gi.charAt(fn),fn);var xr=this.re;xr.lastIndex=fn;var Qr=Pd(xr,Gi),Ur=this.error;if(null==Qr)return this._token(Ur,Gi.slice(fn,Gi.length),fn);var ho=this._getGroup(Qr),ya=Qr[0];return Ur.fallback&&Qr.index!==fn?(this.queuedGroup=ho,this.queuedText=ya,this._token(Ur,Gi.slice(fn,Qr.index),fn)):this._token(ho,ya,fn)}},_a.prototype._token=function(fn,Kn,Gi){var xr=0;if(fn.lineBreaks){var Qr=/\n/g,Ur=1;if("\n"===Kn)xr=1;else for(;Qr.exec(Kn);)xr++,Ur=Qr.lastIndex}var ho={type:"function"==typeof fn.type&&fn.type(Kn)||fn.defaultType,value:"function"==typeof fn.value?fn.value(Kn):Kn,text:Kn,toString:ld,offset:Gi,lineBreaks:xr,line:this.line,col:this.col},ya=Kn.length;if(this.index+=ya,this.line+=xr,0!==xr?this.col=ya-Ur+1:this.col+=ya,fn.shouldThrow)throw new Error(this.formatError(ho,"invalid syntax"));return fn.pop?this.popState():fn.push?this.pushState(fn.push):fn.next&&this.setState(fn.next),ho},typeof Symbol<"u"&&Symbol.iterator){var yu=function(Kn){this.lexer=Kn};yu.prototype.next=function(){var fn=this.lexer.next();return{value:fn,done:!fn}},yu.prototype[Symbol.iterator]=function(){return this},_a.prototype[Symbol.iterator]=function(){return new yu(this)}}return _a.prototype.formatError=function(fn,Kn){if(null==fn){var Gi=this.buffer.slice(this.index);fn={text:Gi,offset:this.index,lineBreaks:-1===Gi.indexOf("\n")?0:1,line:this.line,col:this.col}}var xr=Math.max(0,fn.offset-fn.col+1),Qr=fn.lineBreaks?fn.text.indexOf("\n"):fn.text.length,Ur=this.buffer.substring(xr,fn.offset+Qr);return Kn+=" at line "+fn.line+" col "+fn.col+":\n\n",(Kn+="  "+Ur+"\n")+"  "+Array(fn.col).join(" ")+"^"},_a.prototype.clone=function(){return new _a(this.states,this.state)},_a.prototype.has=function(fn){return!0},{compile:function qs(fn){var Kn=Es(zr(fn));return new _a({start:Kn},"start")},states:function sd(fn,Kn){var Gi=fn.$all?zr(fn.$all):[];delete fn.$all;var xr=Object.getOwnPropertyNames(fn);Kn||(Kn=xr[0]);for(var Qr=Object.create(null),Ur=0;Ur<xr.length;Ur++)Qr[ho=xr[Ur]]=zr(fn[ho]).concat(Gi);for(Ur=0;Ur<xr.length;Ur++)for(var ya=Qr[ho=xr[Ur]],Za=Object.create(null),Ar=0;Ar<ya.length;Ar++){var cl=ya[Ar];if(cl.include){var vl=[Ar,1];if(cl.include!==ho&&!Za[cl.include]){Za[cl.include]=!0;var Fs=Qr[cl.include];if(!Fs)throw new Error("Cannot include nonexistent state '"+cl.include+"' (in state '"+ho+"')");for(var cd=0;cd<Fs.length;cd++){var bp=Fs[cd];-1===ya.indexOf(bp)&&vl.push(bp)}}ya.splice.apply(ya,vl),Ar--}}var ud=Object.create(null);for(Ur=0;Ur<xr.length;Ur++){var ho;ud[ho=xr[Ur]]=Es(Qr[ho],!0)}for(Ur=0;Ur<xr.length;Ur++){var uh=xr[Ur],Of=ud[uh],$h=Of.groups;for(Ar=0;Ar<$h.length;Ar++)od($h[Ar],uh,ud);var dh=Object.getOwnPropertyNames(Of.fast);for(Ar=0;Ar<dh.length;Ar++)od(Of.fast[dh[Ar]],uh,ud)}return new _a(ud,Kn)},error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:function ad(fn){for(var Kn=Object.create(null),Gi=Object.create(null),xr=Object.getOwnPropertyNames(fn),Qr=0;Qr<xr.length;Qr++){var Ur=xr[Qr],ho=fn[Ur];(Array.isArray(ho)?ho:[ho]).forEach(function(Fs){if((Gi[Fs.length]=Gi[Fs.length]||[]).push(Fs),"string"!=typeof Fs)throw new Error("keyword must be string (in keyword '"+Ur+"')");Kn[Fs]=Ur})}function Za(Fs){return JSON.stringify(Fs)}var Ar="";for(var cl in Ar+="switch (value.length) {\n",Gi)Ar+="case "+cl+":\n",Ar+="switch (value) {\n",Gi[cl].forEach(function(Fs){var cd=Kn[Fs];Ar+="case "+Za(Fs)+": return "+Za(cd)+"\n"}),Ar+="}\n";return Ar+="}\n",Function("value",Ar)}}},(ae=Zs).exports?ae.exports=q():z.moo=q(),function(ae){var z=Lr&&Lr.__importDefault||function(K){return K&&K.__esModule?K:{default:K}};Object.defineProperty(ae,"__esModule",{value:!0}),ae.lexer=ae.states=void 0;var q=z(Zs.exports);ae.states={body:{doubleapos:{match:"''",value:function(){return"'"}},quoted:{lineBreaks:!0,match:/'[#\{\}](?:(?:(?![])[\s\S])*?(?:(?!')[\s\S]))?'(?!')/,value:function(te){return te.slice(1,-1).replace(/''/g,"'")}},argument:{lineBreaks:!0,match:/\{[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r -\/:-@\[-\^`\{-~\x85\xA1-\xA7\xA9\xAB\xAC\xAE\xB0\xB1\xB6\xBB\xBF\xD7\xF7\u200E-\u2029\u2030-\u203E\u2041-\u2053\u2055-\u205E\u2190-\u245F\u2500-\u2775\u2794-\u2BFF\u2E00-\u2E7F\u3001-\u3003\u3008-\u3020\u3030\uFD3E\uFD3F\uFE45\uFE46])[\s\S])+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*/,push:"arg",value:function(te){return te.substring(1).trim()}},octothorpe:"#",end:{match:"}",pop:1},content:{lineBreaks:!0,match:/(?:(?![])[\s\S])(?:(?![#'\{\}])[\s\S])*/}},arg:{select:{lineBreaks:!0,match:/,[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:plural|select|selectordinal)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*/,next:"select",value:function(te){return te.split(",")[1].trim()}},"func-args":{lineBreaks:!0,match:/,[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r -\/:-@\[-\^`\{-~\x85\xA1-\xA7\xA9\xAB\xAC\xAE\xB0\xB1\xB6\xBB\xBF\xD7\xF7\u200E-\u2029\u2030-\u203E\u2041-\u2053\u2055-\u205E\u2190-\u245F\u2500-\u2775\u2794-\u2BFF\u2E00-\u2E7F\u3001-\u3003\u3008-\u3020\u3030\uFD3E\uFD3F\uFE45\uFE46])[\s\S])+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,/,next:"body",value:function(te){return te.split(",")[1].trim()}},"func-simple":{lineBreaks:!0,match:/,[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r -\/:-@\[-\^`\{-~\x85\xA1-\xA7\xA9\xAB\xAC\xAE\xB0\xB1\xB6\xBB\xBF\xD7\xF7\u200E-\u2029\u2030-\u203E\u2041-\u2053\u2055-\u205E\u2190-\u245F\u2500-\u2775\u2794-\u2BFF\u2E00-\u2E7F\u3001-\u3003\u3008-\u3020\u3030\uFD3E\uFD3F\uFE45\uFE46])[\s\S])+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*/,value:function(te){return te.substring(1).trim()}},end:{match:"}",pop:1}},select:{offset:{lineBreaks:!0,match:/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*offset[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*[0-9]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*/,value:function(te){return te.split(":")[1].trim()}},case:{lineBreaks:!0,match:/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:=[0-9]+|(?:(?![\t-\r -\/:-@\[-\^`\{-~\x85\xA1-\xA7\xA9\xAB\xAC\xAE\xB0\xB1\xB6\xBB\xBF\xD7\xF7\u200E-\u2029\u2030-\u203E\u2041-\u2053\u2055-\u205E\u2190-\u245F\u2500-\u2775\u2794-\u2BFF\u2E00-\u2E7F\u3001-\u3003\u3008-\u3020\u3030\uFD3E\uFD3F\uFE45\uFE46])[\s\S])+)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\{/,push:"body",value:function(te){return te.substring(0,te.indexOf("{")).trim()}},end:{match:/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\}/,pop:1}}},ae.lexer=q.default.states(ae.states)}(ar),Object.defineProperty(fi,"__esModule",{value:!0});var Os=fi.parse=fi.ParseError=void 0,na=ar,ia=function(z){return{offset:z.offset,line:z.line,col:z.col,text:z.text,lineBreaks:z.lineBreaks}},zs=function(z){return"plural"===z||"select"===z||"selectordinal"===z};var rt=["number","date","time","spellout","ordinal","duration"],le=["zero","one","two","few","many","other"],Ee=function(ae){Ae(q,ae);var z=Te(q);function q(K,te){return W(this,q),z.call(this,na.lexer.formatError(K,te))}return me(q)}(xe(Error));fi.ParseError=Ee;var Ge=function(){function ae(z,q){W(this,ae),this.lexer=na.lexer.reset(z),this.cardinalKeys=q&&q.cardinal||le,this.ordinalKeys=q&&q.ordinal||le,this.strict=q&&q.strict||!1}return me(ae,[{key:"parse",value:function(){return this.parseBody(!1,!0)}},{key:"checkSelectKey",value:function(q,K,te){if("="===te[0]){if("select"===K)throw new Ee(q,"The case ".concat(te," is not valid with select"))}else if("select"!==K){var re="plural"===K?this.cardinalKeys:this.ordinalKeys;if(re.length>0&&!re.includes(te)){var Ue="The ".concat(K," case ").concat(te," is not valid in this locale");throw new Ee(q,Ue)}}}},{key:"parseSelect",value:function(q,K,te,re){var pt={type:re,arg:q.value,cases:[],ctx:te};"plural"===re||"selectordinal"===re?K=!0:this.strict&&(K=!1);var tn,Rt=ce(this.lexer);try{for(Rt.s();!(tn=Rt.n()).done;){var Mn=tn.value;switch(Mn.type){case"offset":if("select"===re)throw new Ee(Mn,"Unexpected plural offset for select");if(pt.cases.length>0)throw new Ee(Mn,"Plural offset must be set before cases");pt.pluralOffset=Number(Mn.value),te.text+=Mn.text,te.lineBreaks+=Mn.lineBreaks;break;case"case":this.checkSelectKey(Mn,re,Mn.value),pt.cases.push({key:Mn.value,tokens:this.parseBody(K),ctx:ia(Mn)});break;case"end":return pt;default:throw new Ee(Mn,"Unexpected lexer token: ".concat(Mn.type))}}}catch(Ni){Rt.e(Ni)}finally{Rt.f()}throw new Ee(null,"Unexpected message end")}},{key:"parseArgToken",value:function(q,K){var te=ia(q),re=this.lexer.next();if(!re)throw new Ee(null,"Unexpected message end");if(te.text+=re.text,te.lineBreaks+=re.lineBreaks,this.strict&&("func-simple"===re.type||"func-args"===re.type)&&!rt.includes(re.value)){var Ue="Invalid strict mode function arg type: ".concat(re.value);throw new Ee(q,Ue)}switch(re.type){case"end":return{type:"argument",arg:q.value,ctx:te};case"func-simple":var pt=this.lexer.next();if(!pt)throw new Ee(null,"Unexpected message end");if("end"!==pt.type)throw new Ee(pt,"Unexpected lexer token: ".concat(pt.type));if(te.text+=pt.text,zs(re.value.toLowerCase()))throw new Ee(re,"Invalid type identifier: ".concat(re.value));return{type:"function",arg:q.value,key:re.value,ctx:te};case"func-args":if(zs(re.value.toLowerCase())){var Rt="Invalid type identifier: ".concat(re.value);throw new Ee(re,Rt)}var tn=this.parseBody(!this.strict&&K);return this.strict&&tn.length>0&&(tn=function dc(ae,z){var re,q="",K="",te=ce(z);try{for(te.s();!(re=te.n()).done;){var Ue=re.value,pt=Ue.ctx.text;switch(K+=pt,Ue.type){case"content":q+=Ue.value;break;case"argument":case"function":case"octothorpe":q+=pt;break;default:throw new Ee(ae,"Unsupported part in strict mode function arg style: ".concat(pt))}}}catch(tn){te.e(tn)}finally{te.f()}return[{type:"content",value:q.trim(),ctx:Object.assign({},z[0].ctx,{text:K})}]}(q,tn)),{type:"function",arg:q.value,key:re.value,param:tn,ctx:te};case"select":if(zs(re.value))return this.parseSelect(q,K,te,re.value);throw new Ee(re,"Unexpected select type ".concat(re.value));default:throw new Ee(re,"Unexpected lexer token: ".concat(re.type))}}},{key:"parseBody",value:function(q,K){var pt,te=[],re=null,Ue=ce(this.lexer);try{for(Ue.s();!(pt=Ue.n()).done;){var Rt=pt.value;if("argument"===Rt.type)re&&(re=null),te.push(this.parseArgToken(Rt,q));else if("octothorpe"===Rt.type&&q)re&&(re=null),te.push({type:"octothorpe",ctx:ia(Rt)});else{if("end"===Rt.type&&!K)return te;var tn=Rt.value;if(!q&&"quoted"===Rt.type&&"#"===tn[0]){if(tn.includes("{")){var Mn="Unsupported escape pattern: ".concat(tn);throw new Ee(Rt,Mn)}tn=Rt.text}re?(re.value+=tn,re.ctx.text+=Rt.text,re.ctx.lineBreaks+=Rt.lineBreaks):(re={type:"content",value:tn,ctx:ia(Rt)},te.push(re))}}}catch(Ni){Ue.e(Ni)}finally{Ue.f()}if(K)return te;throw new Ee(null,"Unexpected message end")}}]),ae}();function bt(ae){return bt[ae]||(bt[ae]=new Intl.NumberFormat(ae))}Os=fi.parse=function qe(ae){return new Ge(ae,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).parse()};var mn=Object.freeze({__proto__:null,_nf:bt,number:function Ot(ae,z,q){return bt(ae).format(z-q)},strictNumber:function Dt(ae,z,q,K){var te=z-q;if(isNaN(te))throw new Error("`"+K+"` or its offset is not a number");return bt(ae).format(te)},plural:function vt(ae,z,q,K,te){if({}.hasOwnProperty.call(K,ae))return K[ae];z&&(ae-=z);var re=q(ae,te);return re in K?K[re]:K.other},select:function Lt(ae,z){return{}.hasOwnProperty.call(z,ae)?z[ae]:z.other},reqArgs:function Qt(ae,z){for(var q=0;q<ae.length;++q)if(!z||void 0===z[ae[q]])throw new Error("Message requires argument '".concat(ae[q],"'"))}});var Pn={};function xn(ae,z){var q=String(ae)+JSON.stringify(z);return Pn[q]||(Pn[q]=new Intl.NumberFormat(ae,z)),Pn[q]}var Mi=Object.freeze({__proto__:null,date:function Wt(ae,z,q){var K={day:"numeric",month:"short",year:"numeric"};switch(q){case"full":K.weekday="long";case"long":K.month="long";break;case"short":K.month="numeric"}return new Date(ae).toLocaleDateString(z,K)},duration:function li(ae){if("number"!=typeof ae&&(ae=Number(ae)),!isFinite(ae))return String(ae);var z="";ae<0?(z="-",ae=Math.abs(ae)):ae=Number(ae);var q=ae%60,K=[Math.round(q)===q?q:q.toFixed(3)];return ae<60?K.unshift(0):(ae=Math.round((ae-Number(K[0]))/60),K.unshift(ae%60),ae>=60&&(ae=Math.round((ae-Number(K[0]))/60),K.unshift(ae))),z+K.shift()+":"+K.map(function(re){return re<10?"0"+String(re):String(re)}).join(":")},numberCurrency:function(z,q,K){return xn(q,{style:"currency",currency:K,minimumFractionDigits:2,maximumFractionDigits:2}).format(z)},numberFmt:function Ii(ae,z,q,K){var te=q&&q.split(":")||[],re=te[0],Ue=te[1];return xn(z,{integer:{maximumFractionDigits:0},percent:{style:"percent"},currency:{style:"currency",currency:Ue&&Ue.trim()||K,minimumFractionDigits:2,maximumFractionDigits:2}}[re]||{}).format(ae)},numberInteger:function(z,q){return xn(q,{maximumFractionDigits:0}).format(z)},numberPercent:function(z,q){return xn(q,{style:"percent"}).format(z)},time:function Xn(ae,z,q){var K={second:"numeric",minute:"numeric",hour:"numeric"};switch(q){case"full":case"long":K.timeZoneName="short";break;case"short":delete K.second}return new Date(ae).toLocaleTimeString(z,K)}}),eo_ES3={break:!0,continue:!0,delete:!0,else:!0,for:!0,function:!0,if:!0,in:!0,new:!0,return:!0,this:!0,typeof:!0,var:!0,void:!0,while:!0,with:!0,case:!0,catch:!0,default:!0,do:!0,finally:!0,instanceof:!0,switch:!0,throw:!0,try:!0},eo_ESnext={await:!0,debugger:!0,class:!0,enum:!0,extends:!0,super:!0,const:!0,export:!0,import:!0,null:!0,true:!0,false:!0,implements:!0,let:!0,private:!0,public:!0,yield:!0,interface:!0,package:!0,protected:!0,static:!0};function zi(ae,z){z&&(ae+=" "+function Qn(ae){for(var z=0,q=0;q<ae.length;++q)z=(z<<5)-z+ae.charCodeAt(q),z|=0;return z}(ae).toString(36));var q=ae.trim().replace(/\W+/g,"_");return eo_ES3[q]||eo_ESnext[q]||/^\d/.test(q)?"_"+q:q}function ei(ae,z){if(/^[A-Z_$][0-9A-Z_$]*$/i.test(z)&&!eo_ES3[z])return ae?ae+"."+z:z;var q=JSON.stringify(z);return ae?ae+"["+q+"]":q}var rs=new RegExp("^"+["ar","ckb","fa","he","ks($|[^bfh])","lrc","mzn","pa-Arab","ps","ug","ur","uz-Arab","yi"].join("|^"));var Vc="@messageformat/runtime/lib/plurals",dr=function(){function ae(z){this.arguments=[],this.runtime={},this.options=z}return ae.prototype.compile=function(z,q,K){var te,re,Ue=this;if("object"==typeof z){var pt={};try{for(var Rt=ve(Object.keys(z)),tn=Rt.next();!tn.done;tn=Rt.next()){var Mn=tn.value;pt[Mn]=this.compile(z[Mn],K&&K[Mn]||q,K)}}catch(qs){te={error:qs}}finally{try{tn&&!tn.done&&(re=Rt.return)&&re.call(Rt)}finally{if(te)throw te.error}}return pt}this.plural=q;var Cr={cardinal:q.cardinals,ordinal:q.ordinals,strict:this.options.strict};this.arguments=[];var ai=Os(z,Cr).map(function(qs){return Ue.token(qs,null)}),zr=this.arguments.length>0,ga=this.concatenate(ai,!0);if(this.options.requireAllArguments&&zr){this.setRuntimeFn("reqArgs");var Es=JSON.stringify(this.arguments);return"(d) => { reqArgs(".concat(Es,", d); return ").concat(ga,"; }")}return"(".concat(zr?"d":"",") => ").concat(ga)},ae.prototype.cases=function(z,q){var K=this,te=!0,re=z.cases.map(function(Mn){var Ni=Mn.key;"other"===Ni&&(te=!1);var ai=Mn.tokens.map(function(zr){return K.token(zr,q)});return"".concat(ei(null,Ni.replace(/^=/,"")),": ").concat(K.concatenate(ai,!1))});if(te){var Ue=z.type,pt=this.plural,tn=pt.ordinals;if("select"===Ue||"plural"===Ue&&pt.cardinals.includes("other")||"selectordinal"===Ue&&tn.includes("other"))throw new Error("No 'other' form found in ".concat(JSON.stringify(z)))}return"{ ".concat(re.join(", ")," }")},ae.prototype.concatenate=function(z,q){return"values"===this.options.returnType&&(q||z.length>1)?"["+z.join(", ")+"]":z.join(" + ")||'""'},ae.prototype.token=function(z,q){if("content"===z.type)return JSON.stringify(z.value);var Ue,pt,K=this.plural,te=K.id,re=K.lc;switch("arg"in z?(this.arguments.push(z.arg),Ue=[ei("d",z.arg)]):Ue=[],z.type){case"argument":return this.options.biDiSupport?function Cs(ae,z){var q=rs.test(z),K=JSON.stringify(q?"\u200f":"\u200e");return"".concat(K," + ").concat(ae," + ").concat(K)}(String(Ue[0]),re):String(Ue[0]);case"select":pt="select",q&&this.options.strict&&(q=null),Ue.push(this.cases(z,q)),this.setRuntimeFn("select");break;case"selectordinal":pt="plural",Ue.push(z.pluralOffset||0,te,this.cases(z,z),1),this.setLocale(te,!0),this.setRuntimeFn("plural");break;case"plural":pt="plural",Ue.push(z.pluralOffset||0,te,this.cases(z,z)),this.setLocale(te,!1),this.setRuntimeFn("plural");break;case"function":if(!this.options.customFormatters[z.key]){if("date"===z.key){pt=this.setDateFormatter(z,Ue,q);break}if("number"===z.key){pt=this.setNumberFormatter(z,Ue,q);break}}if(Ue.push(JSON.stringify(this.plural.locale)),z.param){q&&this.options.strict&&(q=null);var Rt=this.getFormatterArg(z,q);Rt&&Ue.push(Rt)}this.setFormatter(pt=z.key);break;case"octothorpe":if(!q)return'"#"';Ue=[JSON.stringify(this.plural.locale),ei("d",q.arg),q.pluralOffset||0],this.options.strict?(pt="strictNumber",Ue.push(JSON.stringify(q.arg)),this.setRuntimeFn("strictNumber")):(pt="number",this.setRuntimeFn("number"))}if(!pt)throw new Error("Parser error for token "+JSON.stringify(z));return"".concat(pt,"(").concat(Ue.join(", "),")")},ae.prototype.runtimeIncludes=function(z,q){if(zi(z)!==z)throw new SyntaxError("Reserved word used as ".concat(q," identifier: ").concat(z));var K=this.runtime[z];if(!K||K.type===q)return K;throw new TypeError("Cannot override ".concat(K.type," runtime function as ").concat(q,": ").concat(z))},ae.prototype.setLocale=function(z,q){var Rt,tn,Mn,K=this.runtimeIncludes(z,"locale"),te=this.plural,re=te.getCardinal,Ue=te.getPlural,pt=te.isDefault;if(!q&&pt&&re){if(K)return;Rt=function(Ni){return re(Ni)},tn="@messageformat/runtime/lib/cardinals",Mn=function(){return String(re)}}else{if(K&&(!pt||K.module===Vc))return;Rt=function(Ni,Cr){return Ue(Ni,Cr)},tn=pt?Vc:Ue.module||null,Mn=function(){return String(Ue)}}this.runtime[z]=Object.assign(Rt,{id:z,module:tn,toString:Mn,type:"locale"})},ae.prototype.setRuntimeFn=function(z){this.runtimeIncludes(z,"runtime")||(this.runtime[z]=Object.assign(mn[z],{id:z,module:"@messageformat/runtime",type:"runtime"}))},ae.prototype.getFormatterArg=function(z,q){var K,te,re,Ue,pt=this,Rt=z.key,tn=z.param,Mn=this.options.customFormatters[Rt]||Xi(Rt)&&Mi[Rt];if(!Mn||!tn)return null;var Ni="arg"in Mn&&Mn.arg||"string";if("options"===Ni){var Cr="";try{for(var ai=ve(tn),zr=ai.next();!zr.done;zr=ai.next()){var ga=zr.value;if("content"!==ga.type)throw new SyntaxError("Expected literal options for ".concat(Rt," formatter"));Cr+=ga.value}}catch(Kn){K={error:Kn}}finally{try{zr&&!zr.done&&(te=ai.return)&&te.call(ai)}finally{if(K)throw K.error}}var Es={};try{for(var qs=ve(Cr.split(",")),od=qs.next();!od.done;od=qs.next()){var sd=od.value,ad=sd.indexOf(":");if(-1===ad)Es[sd.trim()]=null;else{var _a=sd.substring(0,ad).trim(),Pd=sd.substring(ad+1).trim();if("true"===Pd)Es[_a]=!0;else if("false"===Pd)Es[_a]=!1;else if("null"===Pd)Es[_a]=null;else{var ld=Number(Pd);Es[_a]=Number.isFinite(ld)?ld:Pd}}}}catch(Kn){re={error:Kn}}finally{try{od&&!od.done&&(Ue=qs.return)&&Ue.call(qs)}finally{if(re)throw re.error}}return JSON.stringify(Es)}var yu=tn.map(function(Kn){return pt.token(Kn,q)});if("raw"===Ni)return"[".concat(yu.join(", "),"]");var fn=yu.join(" + ");return fn?"(".concat(fn,").trim()"):'""'},ae.prototype.setFormatter=function(z){if(!this.runtimeIncludes(z,"formatter")){var q=this.options.customFormatters[z];if(q)"function"==typeof q&&(q={formatter:q}),this.runtime[z]=Object.assign(q.formatter,{type:"formatter"},"module"in q&&q.module&&q.id?{id:zi(q.id),module:q.module}:{id:null,module:null});else{if(!Xi(z))throw new Error("Formatting function not found: ".concat(z));this.runtime[z]=Object.assign(Mi[z],{type:"formatter"},{id:z,module:"@messageformat/runtime/lib/formatters"})}}},ae.prototype.setDateFormatter=function(z,q,K){var te=this,re=z.param,Ue=this.plural.locale,pt=re&&1===re.length&&re[0];if(pt&&"content"===pt.type&&/^\s*::/.test(pt.value)){var Rt=pt.value.trim().substr(2),tn=zi("date_".concat(Ue,"_").concat(Rt),!0);if(!this.runtimeIncludes(tn,"formatter")){var Mn=function Vn(ae,z,q){"string"==typeof z&&(z=Gt(z));var K=gt(z,q),te=new Intl.DateTimeFormat(ae,K);return function(re){return te.format(re)}}(Ue,Rt);this.runtime[tn]=Object.assign(Mn,{id:tn,module:null,toString:function(){return function Bn(ae,z,q){"string"==typeof z&&(z=Gt(z));var K=gt(z,q);return["(function() {","var opt = ".concat(JSON.stringify(K),";"),"var dtf = new Intl.DateTimeFormat(".concat(JSON.stringify(ae),", opt);"),"return function(value) { return dtf.format(value); }"].join("\n  ")+"\n})()"}(Ue,Rt)},type:"formatter"})}return tn}if(q.push(JSON.stringify(Ue)),re&&re.length>0){K&&this.options.strict&&(K=null);var Ni=re.map(function(Cr){return te.token(Cr,K)});q.push("("+(Ni.join(" + ")||'""')+").trim()")}return this.setFormatter("date"),"date"},ae.prototype.setNumberFormatter=function(z,q,K){var te=this,re=z.param,Ue=this.plural.locale;if(!re||0===re.length)return q.unshift(JSON.stringify(Ue)),q.push("0"),this.setRuntimeFn("number"),"number";if(q.push(JSON.stringify(Ue)),1===re.length&&"content"===re[0].type){var pt=re[0].value.trim();switch(pt){case"currency":return q.push(JSON.stringify(this.options.currency)),this.setFormatter("numberCurrency"),"numberCurrency";case"integer":return this.setFormatter("numberInteger"),"numberInteger";case"percent":return this.setFormatter("numberPercent"),"numberPercent"}var Rt=pt.match(/^currency:([A-Z]+)$/);if(Rt)return q.push(JSON.stringify(Rt[1])),this.setFormatter("numberCurrency"),"numberCurrency";var tn=zi("number_".concat(Ue,"_").concat(pt),!0);if(!this.runtimeIncludes(tn,"formatter")){var Mn=this.options.currency,Ni=dn(Ue,pt,Mn);this.runtime[tn]=Object.assign(Ni,{id:null,module:null,toString:function(){return wa(Ue,pt,Mn)},type:"formatter"})}return tn}K&&this.options.strict&&(K=null);var Cr=re.map(function(ai){return te.token(ai,K)});return q.push("("+(Cr.join(" + ")||'""')+").trim()"),q.push(JSON.stringify(this.options.currency)),this.setFormatter("numberFmt"),"numberFmt"},ae}();function Xi(ae){return ae in Mi}var An=function(z){return 1==z?"one":"other"},Xa=function(z){return 0==z||1==z?"one":"other"},ms=function(z){return z>=0&&z<=1?"one":"other"},ir=function(z){var q=String(z).split(".");return 1!=z||q[1]?"other":"one"},Ji=function(z){return"other"},ht=function(z){return 1==z?"one":2==z?"two":"other"},Jt=An,ft=Xa,on=ms,gn=An,vr=ms,Hi=An,tr=ir,qi=An,fo=An,po=An,Ea=An,ka=An,Nr=Xa,fc=Ji,so=ms,Xr=Ji,os=An,pc=ir,El=An,mc=An,tc=An,ss=An,Ss=ir,Uu=ms,Gc=An,bd=Ji,Vu=An,Ka=An,ou=ir,Ds=An,Sl=ir,au=An,as=ms,Su=ir,Ms=An,Sc=An,ra=ir,ji=ir,Vr=An,mo=ms,Ki=Xa,bo=An,vi=An,to=ms,cu=Ji,Ud=An,Yn=ir,oa=Ji,Dc=Ji,Ml=Ji,Fa=ir,go=ht,Mc=Ji,_n=Ji,Pr=An,$s=An,Na=Ji,ao=Ji,Ic=An,xo=An,xd=An,nc=Ji,Xs=Ji,ic=An,sa=An,gs=An,Qo=Ji,Vd=ms,Qa=Ji,za=An,wh=An,$l=An,_s=An,_o=An,Ua=An,aa=ir,$d=Ji,el=Xa,_c=Ji,Va=An,la=Xa,Eh=An,bs=An,io=An,Tl=An,ca=Ji,$c=Ji,Un=An,ua=ht,Hc=An,wo=An,jc=An,ba=ir,Ts=An,fl=An,pl=An,Al=Ji,ml=An,qc=Xa,xs=An,ds=An,ro=An,wd=An,vc=An,Ks=Ji,Sa=Xa,uu=An,Js=ms,Ls=An,Ac=An,lo=An,Jn=An,Ui=Ji,oc=An,Pl=ht,Yc=ir,yo=ir,tl=An,Ma=An,Du=ht,nl=An,Eo=Ji,ls=Ji,D=ht,A=ht,F=ht,$=ht,Z=ht,ee=An,ie=An,s=An,m=An,v=An,C=An,k=Ji,G=ir,J=ir,fe=An,pe=An,ot=An,nt=An,wt=Ji,Pt=Xa,$t=An,Ft=An,Dn=An,Ln=Ji,Zi=Ji,Qi=An,ki=An,mr=An,$r=Ji,us=ir,fs=An,Rl=An,Pc=Ji,bc=An,Rc=An,jl=Xa,sc=An,Wc=Ji,zf=An,Ei=An,Fi=ir,Jr=Ji,da=Ji,Wr=Ji,wr=ms,Oc=Object.freeze({__proto__:null,af:Jt,ak:ft,am:on,an:gn,ar:function(z){var q=String(z).split("."),te=Number(q[0])==z&&q[0].slice(-2);return 0==z?"zero":1==z?"one":2==z?"two":te>=3&&te<=10?"few":te>=11&&te<=99?"many":"other"},ars:function(z){var q=String(z).split("."),te=Number(q[0])==z&&q[0].slice(-2);return 0==z?"zero":1==z?"one":2==z?"two":te>=3&&te<=10?"few":te>=11&&te<=99?"many":"other"},as:vr,asa:Hi,ast:tr,az:qi,bal:fo,be:function(z){var q=String(z).split("."),K=Number(q[0])==z,te=K&&q[0].slice(-1),re=K&&q[0].slice(-2);return 1==te&&11!=re?"one":te>=2&&te<=4&&(re<12||re>14)?"few":K&&0==te||te>=5&&te<=9||re>=11&&re<=14?"many":"other"},bem:po,bez:Ea,bg:ka,bho:Nr,bm:fc,bn:so,bo:Xr,br:function(z){var q=String(z).split("."),K=Number(q[0])==z,te=K&&q[0].slice(-1),re=K&&q[0].slice(-2),Ue=K&&q[0].slice(-6);return 1==te&&11!=re&&71!=re&&91!=re?"one":2==te&&12!=re&&72!=re&&92!=re?"two":(3==te||4==te||9==te)&&(re<10||re>19)&&(re<70||re>79)&&(re<90||re>99)?"few":0!=z&&K&&0==Ue?"many":"other"},brx:os,bs:function(z){var q=String(z).split("."),K=q[0],te=q[1]||"",re=!q[1],Ue=K.slice(-1),pt=K.slice(-2),Rt=te.slice(-1),tn=te.slice(-2);return re&&1==Ue&&11!=pt||1==Rt&&11!=tn?"one":re&&Ue>=2&&Ue<=4&&(pt<12||pt>14)||Rt>=2&&Rt<=4&&(tn<12||tn>14)?"few":"other"},ca:pc,ce:El,ceb:function(z){var q=String(z).split("."),K=q[0],te=q[1]||"",re=!q[1],Ue=K.slice(-1),pt=te.slice(-1);return re&&(1==K||2==K||3==K)||re&&4!=Ue&&6!=Ue&&9!=Ue||!re&&4!=pt&&6!=pt&&9!=pt?"one":"other"},cgg:mc,chr:tc,ckb:ss,cs:function(z){var q=String(z).split("."),K=q[0],te=!q[1];return 1==z&&te?"one":K>=2&&K<=4&&te?"few":te?"other":"many"},cy:function(z){return 0==z?"zero":1==z?"one":2==z?"two":3==z?"few":6==z?"many":"other"},da:function(z){var q=String(z).split("."),K=q[0],te=Number(q[0])==z;return 1!=z&&(te||0!=K&&1!=K)?"other":"one"},de:Ss,doi:Uu,dsb:function(z){var q=String(z).split("."),te=q[1]||"",re=!q[1],Ue=q[0].slice(-2),pt=te.slice(-2);return re&&1==Ue||1==pt?"one":re&&2==Ue||2==pt?"two":re&&(3==Ue||4==Ue)||3==pt||4==pt?"few":"other"},dv:Gc,dz:bd,ee:Vu,el:Ka,en:ou,eo:Ds,es:function(z){var q=String(z).split("."),K=q[0],te=!q[1],re=K.slice(-6);return 1==z?"one":0!=K&&0==re&&te?"many":"other"},et:Sl,eu:au,fa:as,ff:function(z){return z>=0&&z<2?"one":"other"},fi:Su,fil:function(z){var q=String(z).split("."),K=q[0],te=q[1]||"",re=!q[1],Ue=K.slice(-1),pt=te.slice(-1);return re&&(1==K||2==K||3==K)||re&&4!=Ue&&6!=Ue&&9!=Ue||!re&&4!=pt&&6!=pt&&9!=pt?"one":"other"},fo:Ms,fr:function(z){var q=String(z).split("."),K=q[0],te=!q[1],re=K.slice(-6);return z>=0&&z<2?"one":0!=K&&0==re&&te?"many":"other"},fur:Sc,fy:ra,ga:function(z){var q=String(z).split("."),K=Number(q[0])==z;return 1==z?"one":2==z?"two":K&&z>=3&&z<=6?"few":K&&z>=7&&z<=10?"many":"other"},gd:function(z){var q=String(z).split("."),K=Number(q[0])==z;return 1==z||11==z?"one":2==z||12==z?"two":K&&z>=3&&z<=10||K&&z>=13&&z<=19?"few":"other"},gl:ji,gsw:Vr,gu:mo,guw:Ki,gv:function(z){var q=String(z).split("."),K=q[0],te=!q[1],re=K.slice(-1),Ue=K.slice(-2);return te&&1==re?"one":te&&2==re?"two":!te||0!=Ue&&20!=Ue&&40!=Ue&&60!=Ue&&80!=Ue?te?"other":"many":"few"},ha:bo,haw:vi,he:function(z){var q=String(z).split("."),K=q[0],te=!q[1],re=Number(q[0])==z,Ue=re&&q[0].slice(-1);return 1==z&&te?"one":2==K&&te?"two":te&&(z<0||z>10)&&re&&0==Ue?"many":"other"},hi:to,hnj:cu,hr:function(z){var q=String(z).split("."),K=q[0],te=q[1]||"",re=!q[1],Ue=K.slice(-1),pt=K.slice(-2),Rt=te.slice(-1),tn=te.slice(-2);return re&&1==Ue&&11!=pt||1==Rt&&11!=tn?"one":re&&Ue>=2&&Ue<=4&&(pt<12||pt>14)||Rt>=2&&Rt<=4&&(tn<12||tn>14)?"few":"other"},hsb:function(z){var q=String(z).split("."),te=q[1]||"",re=!q[1],Ue=q[0].slice(-2),pt=te.slice(-2);return re&&1==Ue||1==pt?"one":re&&2==Ue||2==pt?"two":re&&(3==Ue||4==Ue)||3==pt||4==pt?"few":"other"},hu:Ud,hy:function(z){return z>=0&&z<2?"one":"other"},ia:Yn,id:oa,ig:Dc,ii:Ml,io:Fa,is:function(z){var q=String(z).split("."),K=q[0],te=Number(q[0])==z,re=K.slice(-1),Ue=K.slice(-2);return te&&1==re&&11!=Ue||!te?"one":"other"},it:function(z){var q=String(z).split("."),K=q[0],te=!q[1],re=K.slice(-6);return 1==z&&te?"one":0!=K&&0==re&&te?"many":"other"},iu:go,ja:Mc,jbo:_n,jgo:Pr,jmc:$s,jv:Na,jw:ao,ka:Ic,kab:function(z){return z>=0&&z<2?"one":"other"},kaj:xo,kcg:xd,kde:nc,kea:Xs,kk:ic,kkj:sa,kl:gs,km:Qo,kn:Vd,ko:Qa,ks:za,ksb:wh,ksh:function(z){return 0==z?"zero":1==z?"one":"other"},ku:$l,kw:function(z){var q=String(z).split("."),K=Number(q[0])==z,te=K&&q[0].slice(-2),re=K&&q[0].slice(-3),Ue=K&&q[0].slice(-5),pt=K&&q[0].slice(-6);return 0==z?"zero":1==z?"one":2==te||22==te||42==te||62==te||82==te||K&&0==re&&(Ue>=1e3&&Ue<=2e4||4e4==Ue||6e4==Ue||8e4==Ue)||0!=z&&1e5==pt?"two":3==te||23==te||43==te||63==te||83==te?"few":1==z||1!=te&&21!=te&&41!=te&&61!=te&&81!=te?"other":"many"},ky:_s,lag:function(z){var K=String(z).split(".")[0];return 0==z?"zero":0!=K&&1!=K||0==z?"other":"one"},lb:_o,lg:Ua,lij:aa,lkt:$d,ln:el,lo:_c,lt:function(z){var q=String(z).split("."),K=q[1]||"",te=Number(q[0])==z,re=te&&q[0].slice(-1),Ue=te&&q[0].slice(-2);return 1==re&&(Ue<11||Ue>19)?"one":re>=2&&re<=9&&(Ue<11||Ue>19)?"few":0!=K?"many":"other"},lv:function(z){var q=String(z).split("."),K=q[1]||"",te=K.length,re=Number(q[0])==z,Ue=re&&q[0].slice(-1),pt=re&&q[0].slice(-2),Rt=K.slice(-2),tn=K.slice(-1);return re&&0==Ue||pt>=11&&pt<=19||2==te&&Rt>=11&&Rt<=19?"zero":1==Ue&&11!=pt||2==te&&1==tn&&11!=Rt||2!=te&&1==tn?"one":"other"},mas:Va,mg:la,mgo:Eh,mk:function(z){var q=String(z).split("."),K=q[0],te=q[1]||"",re=!q[1],Ue=K.slice(-1),pt=K.slice(-2),Rt=te.slice(-1),tn=te.slice(-2);return re&&1==Ue&&11!=pt||1==Rt&&11!=tn?"one":"other"},ml:bs,mn:io,mo:function(z){var q=String(z).split("."),K=!q[1],re=Number(q[0])==z&&q[0].slice(-2);return 1==z&&K?"one":!K||0==z||re>=2&&re<=19?"few":"other"},mr:Tl,ms:ca,mt:function(z){var q=String(z).split("."),te=Number(q[0])==z&&q[0].slice(-2);return 1==z?"one":0==z||te>=2&&te<=10?"few":te>=11&&te<=19?"many":"other"},my:$c,nah:Un,naq:ua,nb:Hc,nd:wo,ne:jc,nl:ba,nn:Ts,nnh:fl,no:pl,nqo:Al,nr:ml,nso:qc,ny:xs,nyn:ds,om:ro,or:wd,os:vc,osa:Ks,pa:Sa,pap:uu,pcm:Js,pl:function(z){var q=String(z).split("."),K=q[0],te=!q[1],re=K.slice(-1),Ue=K.slice(-2);return 1==z&&te?"one":te&&re>=2&&re<=4&&(Ue<12||Ue>14)?"few":te&&1!=K&&(0==re||1==re)||te&&re>=5&&re<=9||te&&Ue>=12&&Ue<=14?"many":"other"},prg:function(z){var q=String(z).split("."),K=q[1]||"",te=K.length,re=Number(q[0])==z,Ue=re&&q[0].slice(-1),pt=re&&q[0].slice(-2),Rt=K.slice(-2),tn=K.slice(-1);return re&&0==Ue||pt>=11&&pt<=19||2==te&&Rt>=11&&Rt<=19?"zero":1==Ue&&11!=pt||2==te&&1==tn&&11!=Rt||2!=te&&1==tn?"one":"other"},ps:Ls,pt:function(z){var q=String(z).split("."),K=q[0],te=!q[1],re=K.slice(-6);return 0==K||1==K?"one":0!=K&&0==re&&te?"many":"other"},pt_PT:function(z){var q=String(z).split("."),K=q[0],te=!q[1],re=K.slice(-6);return 1==z&&te?"one":0!=K&&0==re&&te?"many":"other"},rm:Ac,ro:function(z){var q=String(z).split("."),K=!q[1],re=Number(q[0])==z&&q[0].slice(-2);return 1==z&&K?"one":!K||0==z||re>=2&&re<=19?"few":"other"},rof:lo,ru:function(z){var q=String(z).split("."),K=q[0],te=!q[1],re=K.slice(-1),Ue=K.slice(-2);return te&&1==re&&11!=Ue?"one":te&&re>=2&&re<=4&&(Ue<12||Ue>14)?"few":te&&0==re||te&&re>=5&&re<=9||te&&Ue>=11&&Ue<=14?"many":"other"},rwk:Jn,sah:Ui,saq:oc,sat:Pl,sc:Yc,scn:yo,sd:tl,sdh:Ma,se:Du,seh:nl,ses:Eo,sg:ls,sh:function(z){var q=String(z).split("."),K=q[0],te=q[1]||"",re=!q[1],Ue=K.slice(-1),pt=K.slice(-2),Rt=te.slice(-1),tn=te.slice(-2);return re&&1==Ue&&11!=pt||1==Rt&&11!=tn?"one":re&&Ue>=2&&Ue<=4&&(pt<12||pt>14)||Rt>=2&&Rt<=4&&(tn<12||tn>14)?"few":"other"},shi:function(z){var q=String(z).split("."),K=Number(q[0])==z;return z>=0&&z<=1?"one":K&&z>=2&&z<=10?"few":"other"},si:function(z){var q=String(z).split(".");return 0==z||1==z||0==q[0]&&1==(q[1]||"")?"one":"other"},sk:function(z){var q=String(z).split("."),K=q[0],te=!q[1];return 1==z&&te?"one":K>=2&&K<=4&&te?"few":te?"other":"many"},sl:function(z){var q=String(z).split("."),te=!q[1],re=q[0].slice(-2);return te&&1==re?"one":te&&2==re?"two":te&&(3==re||4==re)||!te?"few":"other"},sma:D,smi:A,smj:F,smn:$,sms:Z,sn:ee,so:ie,sq:s,sr:function(z){var q=String(z).split("."),K=q[0],te=q[1]||"",re=!q[1],Ue=K.slice(-1),pt=K.slice(-2),Rt=te.slice(-1),tn=te.slice(-2);return re&&1==Ue&&11!=pt||1==Rt&&11!=tn?"one":re&&Ue>=2&&Ue<=4&&(pt<12||pt>14)||Rt>=2&&Rt<=4&&(tn<12||tn>14)?"few":"other"},ss:m,ssy:v,st:C,su:k,sv:G,sw:J,syr:fe,ta:pe,te:ot,teo:nt,th:wt,ti:Pt,tig:$t,tk:Ft,tl:function(z){var q=String(z).split("."),K=q[0],te=q[1]||"",re=!q[1],Ue=K.slice(-1),pt=te.slice(-1);return re&&(1==K||2==K||3==K)||re&&4!=Ue&&6!=Ue&&9!=Ue||!re&&4!=pt&&6!=pt&&9!=pt?"one":"other"},tn:Dn,to:Ln,tpi:Zi,tr:Qi,ts:ki,tzm:function(z){var q=String(z).split("."),K=Number(q[0])==z;return 0==z||1==z||K&&z>=11&&z<=99?"one":"other"},ug:mr,uk:function(z){var q=String(z).split("."),K=q[0],te=!q[1],re=K.slice(-1),Ue=K.slice(-2);return te&&1==re&&11!=Ue?"one":te&&re>=2&&re<=4&&(Ue<12||Ue>14)?"few":te&&0==re||te&&re>=5&&re<=9||te&&Ue>=11&&Ue<=14?"many":"other"},und:$r,ur:us,uz:fs,ve:Rl,vi:Pc,vo:bc,vun:Rc,wa:jl,wae:sc,wo:Wc,xh:zf,xog:Ei,yi:Fi,yo:Jr,yue:da,zh:Wr,zu:wr}),Nn="zero",an="one",gr="two",Rr="few",rr="many",vn="other",cn={cardinal:[an,vn],ordinal:[vn]},kn={cardinal:[an,vn],ordinal:[an,vn]},oo={cardinal:[vn],ordinal:[vn]},fu={cardinal:[an,Rr,rr,vn],ordinal:[vn]},pu={cardinal:[an,gr,vn],ordinal:[vn]},Uf=cn,Hu=cn,ju=cn,ac=cn,Xc={cardinal:[Nn,an,gr,Rr,rr,vn],ordinal:[vn]},Ed={cardinal:[Nn,an,gr,Rr,rr,vn],ordinal:[vn]},Hd={cardinal:[an,vn],ordinal:[an,gr,Rr,rr,vn]},mu=cn,Gm=cn,Ia={cardinal:[an,vn],ordinal:[an,Rr,rr,vn]},ks=kn,Rp={cardinal:[an,Rr,rr,vn],ordinal:[Rr,vn]},$m=cn,jd=cn,Cd=cn,Op=cn,Ch=oo,Qh={cardinal:[an,vn],ordinal:[an,gr,Rr,rr,vn]},Vf=oo,Gf={cardinal:[an,gr,Rr,rr,vn],ordinal:[vn]},zy=cn,Lp={cardinal:[an,Rr,vn],ordinal:[vn]},Uy={cardinal:[an,vn],ordinal:[an,gr,Rr,vn]},kp=cn,ef=cn,$f=cn,tf=cn,Vy=cn,Sh=fu,nf={cardinal:[Nn,an,gr,Rr,rr,vn],ordinal:[Nn,an,gr,Rr,rr,vn]},_l=cn,il=cn,Gy=cn,lc={cardinal:[an,gr,Rr,vn],ordinal:[vn]},ql=cn,qd=oo,Yd=cn,co=cn,Co={cardinal:[an,vn],ordinal:[an,gr,Rr,vn]},no=Object.freeze({__proto__:null,af:Uf,ak:Hu,am:ju,an:ac,ar:Xc,ars:Ed,as:Hd,asa:mu,ast:Gm,az:Ia,bal:ks,be:Rp,bem:$m,bez:jd,bg:Cd,bho:Op,bm:Ch,bn:Qh,bo:Vf,br:Gf,brx:zy,bs:Lp,ca:Uy,ce:kp,ceb:ef,cgg:$f,chr:tf,ckb:Vy,cs:Sh,cy:nf,da:_l,de:il,doi:Gy,dsb:lc,dv:ql,dz:qd,ee:Yd,el:co,en:Co,eo:cn,es:{cardinal:[an,rr,vn],ordinal:[vn]},et:cn,eu:cn,fa:cn,ff:cn,fi:cn,fil:kn,fo:cn,fr:{cardinal:[an,rr,vn],ordinal:[an,vn]},fur:cn,fy:cn,ga:{cardinal:[an,gr,Rr,rr,vn],ordinal:[an,vn]},gd:{cardinal:[an,gr,Rr,vn],ordinal:[an,gr,Rr,vn]},gl:cn,gsw:cn,gu:{cardinal:[an,vn],ordinal:[an,gr,Rr,rr,vn]},guw:cn,gv:{cardinal:[an,gr,Rr,rr,vn],ordinal:[vn]},ha:cn,haw:cn,he:{cardinal:[an,gr,rr,vn],ordinal:[vn]},hi:{cardinal:[an,vn],ordinal:[an,gr,Rr,rr,vn]},hnj:oo,hr:{cardinal:[an,Rr,vn],ordinal:[vn]},hsb:{cardinal:[an,gr,Rr,vn],ordinal:[vn]},hu:kn,hy:kn,ia:cn,id:oo,ig:oo,ii:oo,io:cn,is:cn,it:{cardinal:[an,rr,vn],ordinal:[rr,vn]},iu:pu,ja:oo,jbo:oo,jgo:cn,jmc:cn,jv:oo,jw:oo,ka:{cardinal:[an,vn],ordinal:[an,rr,vn]},kab:cn,kaj:cn,kcg:cn,kde:oo,kea:oo,kk:{cardinal:[an,vn],ordinal:[rr,vn]},kkj:cn,kl:cn,km:oo,kn:cn,ko:oo,ks:cn,ksb:cn,ksh:{cardinal:[Nn,an,vn],ordinal:[vn]},ku:cn,kw:{cardinal:[Nn,an,gr,Rr,rr,vn],ordinal:[an,rr,vn]},ky:cn,lag:{cardinal:[Nn,an,vn],ordinal:[vn]},lb:cn,lg:cn,lij:{cardinal:[an,vn],ordinal:[rr,vn]},lkt:oo,ln:cn,lo:{cardinal:[vn],ordinal:[an,vn]},lt:fu,lv:{cardinal:[Nn,an,vn],ordinal:[vn]},mas:cn,mg:cn,mgo:cn,mk:{cardinal:[an,vn],ordinal:[an,gr,rr,vn]},ml:cn,mn:cn,mo:{cardinal:[an,Rr,vn],ordinal:[an,vn]},mr:{cardinal:[an,vn],ordinal:[an,gr,Rr,vn]},ms:{cardinal:[vn],ordinal:[an,vn]},mt:fu,my:oo,nah:cn,naq:pu,nb:cn,nd:cn,ne:kn,nl:cn,nn:cn,nnh:cn,no:cn,nqo:oo,nr:cn,nso:cn,ny:cn,nyn:cn,om:cn,or:{cardinal:[an,vn],ordinal:[an,gr,Rr,rr,vn]},os:cn,osa:oo,pa:cn,pap:cn,pcm:cn,pl:fu,prg:{cardinal:[Nn,an,vn],ordinal:[vn]},ps:cn,pt:{cardinal:[an,rr,vn],ordinal:[vn]},pt_PT:{cardinal:[an,rr,vn],ordinal:[vn]},rm:cn,ro:{cardinal:[an,Rr,vn],ordinal:[an,vn]},rof:cn,ru:fu,rwk:cn,sah:oo,saq:cn,sat:pu,sc:{cardinal:[an,vn],ordinal:[rr,vn]},scn:{cardinal:[an,vn],ordinal:[rr,vn]},sd:cn,sdh:cn,se:pu,seh:cn,ses:oo,sg:oo,sh:{cardinal:[an,Rr,vn],ordinal:[vn]},shi:{cardinal:[an,Rr,vn],ordinal:[vn]},si:cn,sk:fu,sl:{cardinal:[an,gr,Rr,vn],ordinal:[vn]},sma:pu,smi:pu,smj:pu,smn:pu,sms:pu,sn:cn,so:cn,sq:{cardinal:[an,vn],ordinal:[an,rr,vn]},sr:{cardinal:[an,Rr,vn],ordinal:[vn]},ss:cn,ssy:cn,st:cn,su:oo,sv:kn,sw:cn,syr:cn,ta:cn,te:cn,teo:cn,th:oo,ti:cn,tig:cn,tk:{cardinal:[an,vn],ordinal:[Rr,vn]},tl:kn,tn:cn,to:oo,tpi:oo,tr:cn,ts:cn,tzm:cn,ug:cn,uk:{cardinal:[an,Rr,rr,vn],ordinal:[Rr,vn]},und:oo,ur:cn,uz:cn,ve:cn,vi:{cardinal:[vn],ordinal:[an,vn]},vo:cn,vun:cn,wa:cn,wae:cn,wo:oo,xh:cn,xog:cn,yi:cn,yo:oo,yue:oo,zh:oo,zu:cn}),Wn=function(z,q){return q?"other":1==z?"one":"other"},uo=function(z,q){return q?"other":0==z||1==z?"one":"other"},ed=function(z,q){return q?"other":z>=0&&z<=1?"one":"other"},fa=function(z,q){var K=String(z).split(".");return q||1!=z||K[1]?"other":"one"},Hr=function(z,q){return"other"},td=function(z,q){return q?"other":1==z?"one":2==z?"two":"other"},rd=Object.freeze({__proto__:null,af:Wn,ak:uo,am:ed,an:Wn,ar:function(z,q){var K=String(z).split("."),re=Number(K[0])==z&&K[0].slice(-2);return q?"other":0==z?"zero":1==z?"one":2==z?"two":re>=3&&re<=10?"few":re>=11&&re<=99?"many":"other"},ars:function(z,q){var K=String(z).split("."),re=Number(K[0])==z&&K[0].slice(-2);return q?"other":0==z?"zero":1==z?"one":2==z?"two":re>=3&&re<=10?"few":re>=11&&re<=99?"many":"other"},as:function(z,q){return q?1==z||5==z||7==z||8==z||9==z||10==z?"one":2==z||3==z?"two":4==z?"few":6==z?"many":"other":z>=0&&z<=1?"one":"other"},asa:Wn,ast:fa,az:function(z,q){var te=String(z).split(".")[0],re=te.slice(-1),Ue=te.slice(-2),pt=te.slice(-3);return q?1==re||2==re||5==re||7==re||8==re||20==Ue||50==Ue||70==Ue||80==Ue?"one":3==re||4==re||100==pt||200==pt||300==pt||400==pt||500==pt||600==pt||700==pt||800==pt||900==pt?"few":0==te||6==re||40==Ue||60==Ue||90==Ue?"many":"other":1==z?"one":"other"},bal:function(z,q){return 1==z?"one":"other"},be:function(z,q){var K=String(z).split("."),te=Number(K[0])==z,re=te&&K[0].slice(-1),Ue=te&&K[0].slice(-2);return q?2!=re&&3!=re||12==Ue||13==Ue?"other":"few":1==re&&11!=Ue?"one":re>=2&&re<=4&&(Ue<12||Ue>14)?"few":te&&0==re||re>=5&&re<=9||Ue>=11&&Ue<=14?"many":"other"},bem:Wn,bez:Wn,bg:Wn,bho:uo,bm:Hr,bn:function(z,q){return q?1==z||5==z||7==z||8==z||9==z||10==z?"one":2==z||3==z?"two":4==z?"few":6==z?"many":"other":z>=0&&z<=1?"one":"other"},bo:Hr,br:function(z,q){var K=String(z).split("."),te=Number(K[0])==z,re=te&&K[0].slice(-1),Ue=te&&K[0].slice(-2),pt=te&&K[0].slice(-6);return q?"other":1==re&&11!=Ue&&71!=Ue&&91!=Ue?"one":2==re&&12!=Ue&&72!=Ue&&92!=Ue?"two":(3==re||4==re||9==re)&&(Ue<10||Ue>19)&&(Ue<70||Ue>79)&&(Ue<90||Ue>99)?"few":0!=z&&te&&0==pt?"many":"other"},brx:Wn,bs:function(z,q){var K=String(z).split("."),te=K[0],re=K[1]||"",Ue=!K[1],pt=te.slice(-1),Rt=te.slice(-2),tn=re.slice(-1),Mn=re.slice(-2);return q?"other":Ue&&1==pt&&11!=Rt||1==tn&&11!=Mn?"one":Ue&&pt>=2&&pt<=4&&(Rt<12||Rt>14)||tn>=2&&tn<=4&&(Mn<12||Mn>14)?"few":"other"},ca:function(z,q){var K=String(z).split(".");return q?1==z||3==z?"one":2==z?"two":4==z?"few":"other":1!=z||K[1]?"other":"one"},ce:Wn,ceb:function(z,q){var K=String(z).split("."),te=K[0],re=K[1]||"",Ue=!K[1],pt=te.slice(-1),Rt=re.slice(-1);return q?"other":Ue&&(1==te||2==te||3==te)||Ue&&4!=pt&&6!=pt&&9!=pt||!Ue&&4!=Rt&&6!=Rt&&9!=Rt?"one":"other"},cgg:Wn,chr:Wn,ckb:Wn,cs:function(z,q){var K=String(z).split("."),te=K[0],re=!K[1];return q?"other":1==z&&re?"one":te>=2&&te<=4&&re?"few":re?"other":"many"},cy:function(z,q){return q?0==z||7==z||8==z||9==z?"zero":1==z?"one":2==z?"two":3==z||4==z?"few":5==z||6==z?"many":"other":0==z?"zero":1==z?"one":2==z?"two":3==z?"few":6==z?"many":"other"},da:function(z,q){var K=String(z).split("."),te=K[0],re=Number(K[0])==z;return q||1!=z&&(re||0!=te&&1!=te)?"other":"one"},de:fa,doi:ed,dsb:function(z,q){var K=String(z).split("."),re=K[1]||"",Ue=!K[1],pt=K[0].slice(-2),Rt=re.slice(-2);return q?"other":Ue&&1==pt||1==Rt?"one":Ue&&2==pt||2==Rt?"two":Ue&&(3==pt||4==pt)||3==Rt||4==Rt?"few":"other"},dv:Wn,dz:Hr,ee:Wn,el:Wn,en:function(z,q){var K=String(z).split("."),te=!K[1],re=Number(K[0])==z,Ue=re&&K[0].slice(-1),pt=re&&K[0].slice(-2);return q?1==Ue&&11!=pt?"one":2==Ue&&12!=pt?"two":3==Ue&&13!=pt?"few":"other":1==z&&te?"one":"other"},eo:Wn,es:function(z,q){var K=String(z).split("."),te=K[0],re=!K[1],Ue=te.slice(-6);return q?"other":1==z?"one":0!=te&&0==Ue&&re?"many":"other"},et:fa,eu:Wn,fa:ed,ff:function(z,q){return q?"other":z>=0&&z<2?"one":"other"},fi:fa,fil:function(z,q){var K=String(z).split("."),te=K[0],re=K[1]||"",Ue=!K[1],pt=te.slice(-1),Rt=re.slice(-1);return q?1==z?"one":"other":Ue&&(1==te||2==te||3==te)||Ue&&4!=pt&&6!=pt&&9!=pt||!Ue&&4!=Rt&&6!=Rt&&9!=Rt?"one":"other"},fo:Wn,fr:function(z,q){var K=String(z).split("."),te=K[0],re=!K[1],Ue=te.slice(-6);return q?1==z?"one":"other":z>=0&&z<2?"one":0!=te&&0==Ue&&re?"many":"other"},fur:Wn,fy:fa,ga:function(z,q){var K=String(z).split("."),te=Number(K[0])==z;return q?1==z?"one":"other":1==z?"one":2==z?"two":te&&z>=3&&z<=6?"few":te&&z>=7&&z<=10?"many":"other"},gd:function(z,q){var K=String(z).split("."),te=Number(K[0])==z;return q?1==z||11==z?"one":2==z||12==z?"two":3==z||13==z?"few":"other":1==z||11==z?"one":2==z||12==z?"two":te&&z>=3&&z<=10||te&&z>=13&&z<=19?"few":"other"},gl:fa,gsw:Wn,gu:function(z,q){return q?1==z?"one":2==z||3==z?"two":4==z?"few":6==z?"many":"other":z>=0&&z<=1?"one":"other"},guw:uo,gv:function(z,q){var K=String(z).split("."),te=K[0],re=!K[1],Ue=te.slice(-1),pt=te.slice(-2);return q?"other":re&&1==Ue?"one":re&&2==Ue?"two":!re||0!=pt&&20!=pt&&40!=pt&&60!=pt&&80!=pt?re?"other":"many":"few"},ha:Wn,haw:Wn,he:function(z,q){var K=String(z).split("."),te=K[0],re=!K[1],Ue=Number(K[0])==z,pt=Ue&&K[0].slice(-1);return q?"other":1==z&&re?"one":2==te&&re?"two":re&&(z<0||z>10)&&Ue&&0==pt?"many":"other"},hi:function(z,q){return q?1==z?"one":2==z||3==z?"two":4==z?"few":6==z?"many":"other":z>=0&&z<=1?"one":"other"},hnj:Hr,hr:function(z,q){var K=String(z).split("."),te=K[0],re=K[1]||"",Ue=!K[1],pt=te.slice(-1),Rt=te.slice(-2),tn=re.slice(-1),Mn=re.slice(-2);return q?"other":Ue&&1==pt&&11!=Rt||1==tn&&11!=Mn?"one":Ue&&pt>=2&&pt<=4&&(Rt<12||Rt>14)||tn>=2&&tn<=4&&(Mn<12||Mn>14)?"few":"other"},hsb:function(z,q){var K=String(z).split("."),re=K[1]||"",Ue=!K[1],pt=K[0].slice(-2),Rt=re.slice(-2);return q?"other":Ue&&1==pt||1==Rt?"one":Ue&&2==pt||2==Rt?"two":Ue&&(3==pt||4==pt)||3==Rt||4==Rt?"few":"other"},hu:function(z,q){return q?1==z||5==z?"one":"other":1==z?"one":"other"},hy:function(z,q){return q?1==z?"one":"other":z>=0&&z<2?"one":"other"},ia:fa,id:Hr,ig:Hr,ii:Hr,io:fa,is:function(z,q){var K=String(z).split("."),te=K[0],re=Number(K[0])==z,Ue=te.slice(-1),pt=te.slice(-2);return q?"other":re&&1==Ue&&11!=pt||!re?"one":"other"},it:function(z,q){var K=String(z).split("."),te=K[0],re=!K[1],Ue=te.slice(-6);return q?11==z||8==z||80==z||800==z?"many":"other":1==z&&re?"one":0!=te&&0==Ue&&re?"many":"other"},iu:td,ja:Hr,jbo:Hr,jgo:Wn,jmc:Wn,jv:Hr,jw:Hr,ka:function(z,q){var te=String(z).split(".")[0],re=te.slice(-2);return q?1==te?"one":0==te||re>=2&&re<=20||40==re||60==re||80==re?"many":"other":1==z?"one":"other"},kab:function(z,q){return q?"other":z>=0&&z<2?"one":"other"},kaj:Wn,kcg:Wn,kde:Hr,kea:Hr,kk:function(z,q){var K=String(z).split("."),te=Number(K[0])==z,re=te&&K[0].slice(-1);return q?6==re||9==re||te&&0==re&&0!=z?"many":"other":1==z?"one":"other"},kkj:Wn,kl:Wn,km:Hr,kn:ed,ko:Hr,ks:Wn,ksb:Wn,ksh:function(z,q){return q?"other":0==z?"zero":1==z?"one":"other"},ku:Wn,kw:function(z,q){var K=String(z).split("."),te=Number(K[0])==z,re=te&&K[0].slice(-2),Ue=te&&K[0].slice(-3),pt=te&&K[0].slice(-5),Rt=te&&K[0].slice(-6);return q?te&&z>=1&&z<=4||re>=1&&re<=4||re>=21&&re<=24||re>=41&&re<=44||re>=61&&re<=64||re>=81&&re<=84?"one":5==z||5==re?"many":"other":0==z?"zero":1==z?"one":2==re||22==re||42==re||62==re||82==re||te&&0==Ue&&(pt>=1e3&&pt<=2e4||4e4==pt||6e4==pt||8e4==pt)||0!=z&&1e5==Rt?"two":3==re||23==re||43==re||63==re||83==re?"few":1==z||1!=re&&21!=re&&41!=re&&61!=re&&81!=re?"other":"many"},ky:Wn,lag:function(z,q){var te=String(z).split(".")[0];return q?"other":0==z?"zero":0!=te&&1!=te||0==z?"other":"one"},lb:Wn,lg:Wn,lij:function(z,q){var K=String(z).split("."),te=!K[1],re=Number(K[0])==z;return q?11==z||8==z||re&&z>=80&&z<=89||re&&z>=800&&z<=899?"many":"other":1==z&&te?"one":"other"},lkt:Hr,ln:uo,lo:function(z,q){return q&&1==z?"one":"other"},lt:function(z,q){var K=String(z).split("."),te=K[1]||"",re=Number(K[0])==z,Ue=re&&K[0].slice(-1),pt=re&&K[0].slice(-2);return q?"other":1==Ue&&(pt<11||pt>19)?"one":Ue>=2&&Ue<=9&&(pt<11||pt>19)?"few":0!=te?"many":"other"},lv:function(z,q){var K=String(z).split("."),te=K[1]||"",re=te.length,Ue=Number(K[0])==z,pt=Ue&&K[0].slice(-1),Rt=Ue&&K[0].slice(-2),tn=te.slice(-2),Mn=te.slice(-1);return q?"other":Ue&&0==pt||Rt>=11&&Rt<=19||2==re&&tn>=11&&tn<=19?"zero":1==pt&&11!=Rt||2==re&&1==Mn&&11!=tn||2!=re&&1==Mn?"one":"other"},mas:Wn,mg:uo,mgo:Wn,mk:function(z,q){var K=String(z).split("."),te=K[0],re=K[1]||"",Ue=!K[1],pt=te.slice(-1),Rt=te.slice(-2),tn=re.slice(-1),Mn=re.slice(-2);return q?1==pt&&11!=Rt?"one":2==pt&&12!=Rt?"two":7!=pt&&8!=pt||17==Rt||18==Rt?"other":"many":Ue&&1==pt&&11!=Rt||1==tn&&11!=Mn?"one":"other"},ml:Wn,mn:Wn,mo:function(z,q){var K=String(z).split("."),te=!K[1],Ue=Number(K[0])==z&&K[0].slice(-2);return q?1==z?"one":"other":1==z&&te?"one":!te||0==z||Ue>=2&&Ue<=19?"few":"other"},mr:function(z,q){return q?1==z?"one":2==z||3==z?"two":4==z?"few":"other":1==z?"one":"other"},ms:function(z,q){return q&&1==z?"one":"other"},mt:function(z,q){var K=String(z).split("."),re=Number(K[0])==z&&K[0].slice(-2);return q?"other":1==z?"one":0==z||re>=2&&re<=10?"few":re>=11&&re<=19?"many":"other"},my:Hr,nah:Wn,naq:td,nb:Wn,nd:Wn,ne:function(z,q){var K=String(z).split("."),te=Number(K[0])==z;return q?te&&z>=1&&z<=4?"one":"other":1==z?"one":"other"},nl:fa,nn:Wn,nnh:Wn,no:Wn,nqo:Hr,nr:Wn,nso:uo,ny:Wn,nyn:Wn,om:Wn,or:function(z,q){var K=String(z).split("."),te=Number(K[0])==z;return q?1==z||5==z||te&&z>=7&&z<=9?"one":2==z||3==z?"two":4==z?"few":6==z?"many":"other":1==z?"one":"other"},os:Wn,osa:Hr,pa:uo,pap:Wn,pcm:ed,pl:function(z,q){var K=String(z).split("."),te=K[0],re=!K[1],Ue=te.slice(-1),pt=te.slice(-2);return q?"other":1==z&&re?"one":re&&Ue>=2&&Ue<=4&&(pt<12||pt>14)?"few":re&&1!=te&&(0==Ue||1==Ue)||re&&Ue>=5&&Ue<=9||re&&pt>=12&&pt<=14?"many":"other"},prg:function(z,q){var K=String(z).split("."),te=K[1]||"",re=te.length,Ue=Number(K[0])==z,pt=Ue&&K[0].slice(-1),Rt=Ue&&K[0].slice(-2),tn=te.slice(-2),Mn=te.slice(-1);return q?"other":Ue&&0==pt||Rt>=11&&Rt<=19||2==re&&tn>=11&&tn<=19?"zero":1==pt&&11!=Rt||2==re&&1==Mn&&11!=tn||2!=re&&1==Mn?"one":"other"},ps:Wn,pt:function(z,q){var K=String(z).split("."),te=K[0],re=!K[1],Ue=te.slice(-6);return q?"other":0==te||1==te?"one":0!=te&&0==Ue&&re?"many":"other"},pt_PT:function(z,q){var K=String(z).split("."),te=K[0],re=!K[1],Ue=te.slice(-6);return q?"other":1==z&&re?"one":0!=te&&0==Ue&&re?"many":"other"},rm:Wn,ro:function(z,q){var K=String(z).split("."),te=!K[1],Ue=Number(K[0])==z&&K[0].slice(-2);return q?1==z?"one":"other":1==z&&te?"one":!te||0==z||Ue>=2&&Ue<=19?"few":"other"},rof:Wn,ru:function(z,q){var K=String(z).split("."),te=K[0],re=!K[1],Ue=te.slice(-1),pt=te.slice(-2);return q?"other":re&&1==Ue&&11!=pt?"one":re&&Ue>=2&&Ue<=4&&(pt<12||pt>14)?"few":re&&0==Ue||re&&Ue>=5&&Ue<=9||re&&pt>=11&&pt<=14?"many":"other"},rwk:Wn,sah:Hr,saq:Wn,sat:td,sc:function(z,q){var K=String(z).split(".");return q?11==z||8==z||80==z||800==z?"many":"other":1!=z||K[1]?"other":"one"},scn:function(z,q){var K=String(z).split(".");return q?11==z||8==z||80==z||800==z?"many":"other":1!=z||K[1]?"other":"one"},sd:Wn,sdh:Wn,se:td,seh:Wn,ses:Hr,sg:Hr,sh:function(z,q){var K=String(z).split("."),te=K[0],re=K[1]||"",Ue=!K[1],pt=te.slice(-1),Rt=te.slice(-2),tn=re.slice(-1),Mn=re.slice(-2);return q?"other":Ue&&1==pt&&11!=Rt||1==tn&&11!=Mn?"one":Ue&&pt>=2&&pt<=4&&(Rt<12||Rt>14)||tn>=2&&tn<=4&&(Mn<12||Mn>14)?"few":"other"},shi:function(z,q){var K=String(z).split("."),te=Number(K[0])==z;return q?"other":z>=0&&z<=1?"one":te&&z>=2&&z<=10?"few":"other"},si:function(z,q){var K=String(z).split(".");return q?"other":0==z||1==z||0==K[0]&&1==(K[1]||"")?"one":"other"},sk:function(z,q){var K=String(z).split("."),te=K[0],re=!K[1];return q?"other":1==z&&re?"one":te>=2&&te<=4&&re?"few":re?"other":"many"},sl:function(z,q){var K=String(z).split("."),re=!K[1],Ue=K[0].slice(-2);return q?"other":re&&1==Ue?"one":re&&2==Ue?"two":re&&(3==Ue||4==Ue)||!re?"few":"other"},sma:td,smi:td,smj:td,smn:td,sms:td,sn:Wn,so:Wn,sq:function(z,q){var K=String(z).split("."),te=Number(K[0])==z,re=te&&K[0].slice(-1),Ue=te&&K[0].slice(-2);return q?1==z?"one":4==re&&14!=Ue?"many":"other":1==z?"one":"other"},sr:function(z,q){var K=String(z).split("."),te=K[0],re=K[1]||"",Ue=!K[1],pt=te.slice(-1),Rt=te.slice(-2),tn=re.slice(-1),Mn=re.slice(-2);return q?"other":Ue&&1==pt&&11!=Rt||1==tn&&11!=Mn?"one":Ue&&pt>=2&&pt<=4&&(Rt<12||Rt>14)||tn>=2&&tn<=4&&(Mn<12||Mn>14)?"few":"other"},ss:Wn,ssy:Wn,st:Wn,su:Hr,sv:function(z,q){var K=String(z).split("."),te=!K[1],re=Number(K[0])==z,Ue=re&&K[0].slice(-1),pt=re&&K[0].slice(-2);return q?1!=Ue&&2!=Ue||11==pt||12==pt?"other":"one":1==z&&te?"one":"other"},sw:fa,syr:Wn,ta:Wn,te:Wn,teo:Wn,th:Hr,ti:uo,tig:Wn,tk:function(z,q){var K=String(z).split("."),re=Number(K[0])==z&&K[0].slice(-1);return q?6==re||9==re||10==z?"few":"other":1==z?"one":"other"},tl:function(z,q){var K=String(z).split("."),te=K[0],re=K[1]||"",Ue=!K[1],pt=te.slice(-1),Rt=re.slice(-1);return q?1==z?"one":"other":Ue&&(1==te||2==te||3==te)||Ue&&4!=pt&&6!=pt&&9!=pt||!Ue&&4!=Rt&&6!=Rt&&9!=Rt?"one":"other"},tn:Wn,to:Hr,tpi:Hr,tr:Wn,ts:Wn,tzm:function(z,q){var K=String(z).split("."),te=Number(K[0])==z;return q?"other":0==z||1==z||te&&z>=11&&z<=99?"one":"other"},ug:Wn,uk:function(z,q){var K=String(z).split("."),te=K[0],re=!K[1],Ue=Number(K[0])==z,pt=Ue&&K[0].slice(-1),Rt=Ue&&K[0].slice(-2),tn=te.slice(-1),Mn=te.slice(-2);return q?3==pt&&13!=Rt?"few":"other":re&&1==tn&&11!=Mn?"one":re&&tn>=2&&tn<=4&&(Mn<12||Mn>14)?"few":re&&0==tn||re&&tn>=5&&tn<=9||re&&Mn>=11&&Mn<=14?"many":"other"},und:Hr,ur:fa,uz:Wn,ve:Wn,vi:function(z,q){return q&&1==z?"one":"other"},vo:Wn,vun:Wn,wa:uo,wae:Wn,wo:Hr,xh:Wn,xog:Wn,yi:fa,yo:Hr,yue:Hr,zh:Hr,zu:ed});function Fu(ae){if("string"!=typeof ae||ae.length<2)throw new RangeError("Invalid language tag: ".concat(ae));if(ae.startsWith("pt-PT"))return"pt-PT";var z=ae.match(/.+?(?=[-_])/);return z?z[0]:ae}function js(ae){if("function"==typeof ae){var z=Fu(ae.name);return{isDefault:!1,id:zi(z),lc:z,locale:ae.name,getPlural:ae,cardinals:ae.cardinals||[],ordinals:ae.ordinals||[]}}var q=Fu(ae),K=zi(q);return function yp(ae){return ae in rd}(K)?{isDefault:!0,id:K,lc:q,locale:ae,getCardinal:Oc[K],getPlural:rd[K],cardinals:no[K].cardinal,ordinals:no[K].ordinal}:null}function Rf(ae){return zi(Fu(ae))in rd}return function(){function ae(z,q){if(this.plurals=[],this.options=Object.assign({biDiSupport:!1,currency:"USD",customFormatters:{},requireAllArguments:!1,returnType:"string",strict:q&&q.strictNumberSign||!1},q),"*"===z?this.plurals=function H_(ae){var z=Object.keys(rd).filter(function(q){return q!==ae});return z.unshift(ae),z.map(js)}(ae.defaultLocale):Array.isArray(z)?this.plurals=z.map(js).filter(Boolean):z&&(K=js(z))&&(this.plurals=[K]),0===this.plurals.length){var K=js(ae.defaultLocale);this.plurals=[K]}}return ae.escape=function(z,q){var K=q?/[#{}]/g:/[{}]/g;return String(z).replace(K,"'$&'")},ae.supportedLocalesOf=function(z){return(Array.isArray(z)?z:[z]).filter(Rf)},ae.prototype.resolvedOptions=function(){return Re(Re({},this.options),{locale:this.plurals[0].locale,plurals:this.plurals})},ae.prototype.compile=function(z){var q,K,te=new dr(this.options),re="return "+te.compile(z,this.plurals[0]),Ue=[],pt=[];try{for(var Rt=ve(Object.entries(te.runtime)),tn=Rt.next();!tn.done;tn=Rt.next()){var Mn=we(tn.value,2),Cr=Mn[1];Ue.push(Mn[0]),pt.push(Cr)}}catch(zr){q={error:zr}}finally{try{tn&&!tn.done&&(K=Rt.return)&&K.call(Rt)}finally{if(q)throw q.error}}return(new(Function.bind.apply(Function,Fe(Fe([void 0],we(Ue),!1),[re],!1)))).apply(void 0,Fe([],we(pt),!1))},ae.defaultLocale="en",ae}()}()},2089:(lt,Pe,W)=>{"use strict";var o=W(4650);let me=null;function Ae(){return me}class Se{}const he=new o.OlP("DocumentToken");let Oe=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return function Ne(){return(0,o.LFG)(ct)}()},providedIn:"platform"}),n})();const xe=new o.OlP("Location Initialized");let ct=(()=>{class n extends Oe{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ae().getBaseHref(this._doc)}onPopState(e){const i=Ae().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=Ae().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,i,r){Ke()?this._history.pushState(e,i,r):this.location.hash=r}replaceState(e,i,r){Ke()?this._history.replaceState(e,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(he))},n.\u0275prov=o.Yz7({token:n,factory:function(){return function Te(){return new ct((0,o.LFG)(he))}()},providedIn:"platform"}),n})();function Ke(){return!!window.history.pushState}function at(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function Ct(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function ue(n){return n&&"?"!==n[0]?"?"+n:n}let De=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return(0,o.f3M)(ye)},providedIn:"root"}),n})();const oe=new o.OlP("appBaseHref");let ye=(()=>{class n extends De{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,o.f3M)(he).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return at(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+ue(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,a){const f=this.prepareExternalUrl(r+ue(a));this._platformLocation.pushState(e,i,f)}replaceState(e,i,r,a){const f=this.prepareExternalUrl(r+ue(a));this._platformLocation.replaceState(e,i,f)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Oe),o.LFG(oe,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ce=(()=>{class n extends De{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=at(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,a){let f=this.prepareExternalUrl(r+ue(a));0==f.length&&(f=this._platformLocation.pathname),this._platformLocation.pushState(e,i,f)}replaceState(e,i,r,a){let f=this.prepareExternalUrl(r+ue(a));0==f.length&&(f=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,f)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Oe),o.LFG(oe,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),Re=(()=>{class n{constructor(e){this._subject=new o.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._basePath=function se(n){if(new RegExp("^(https?:)?//").test(n)){const[,e]=n.split(/\/\/[^\/]+/);return e}return n}(Ct(Fe(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+ue(i))}normalize(e){return n.stripTrailingSlash(function we(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._basePath,Fe(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ue(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ue(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}}return n.normalizeQueryParams=ue,n.joinWithSlash=at,n.stripTrailingSlash=Ct,n.\u0275fac=function(e){return new(e||n)(o.LFG(De))},n.\u0275prov=o.Yz7({token:n,factory:function(){return function ve(){return new Re((0,o.LFG)(De))}()},providedIn:"root"}),n})();function Fe(n){return n.replace(/\/index.html$/,"")}function yr(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const i=e.indexOf("="),[r,a]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(a)}return null}let eo=(()=>{class n{constructor(e,i,r,a){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=r,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,o.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,o.AaK)(i.item)}`);this._toggleClass(i.item,!0)}),e.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!0)):Object.keys(e).forEach(i=>this._toggleClass(i,!!e[i])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!1)):Object.keys(e).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(e,i){(e=e.trim())&&e.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.ZZ4),o.Y36(o.aQg),o.Y36(o.SBq),o.Y36(o.Qsj))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class La{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let rs=(()=>{class n{constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,a,f)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new La(r.item,this._ngForOf,-1,-1),null===f?void 0:f);else if(null==f)i.remove(null===a?void 0:a);else if(null!==a){const b=i.get(a);i.move(b,f),Cs(b,r)}});for(let r=0,a=i.length;r<a;r++){const b=i.get(r).context;b.index=r,b.count=a,b.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{Cs(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.Rgc),o.Y36(o.ZZ4))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Cs(n,t){n.context.$implicit=t.item}let ci=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new Vc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Us("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Us("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Vc{constructor(){this.$implicit=null,this.ngIf=null}}function Us(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,o.AaK)(t)}'.`)}class dr{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let Xi=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const i=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(e)}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),An=(()=>{class n{constructor(e,i,r){this.ngSwitch=r,r._addCase(),this._view=new dr(e,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.Rgc),o.Y36(Xi,9))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),Xa=(()=>{class n{constructor(e,i,r){r._addDefault(new dr(e,i))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.Rgc),o.Y36(Xi,9))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngSwitchDefault",""]],standalone:!0}),n})(),Jt=(()=>{class n{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:a,ngTemplateOutletInjector:f}=this;this._viewRef=i.createEmbeddedView(r,a,f?{injector:f}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[o.TTD]}),n})();class gn{createSubscription(t,e){return t.subscribe({next:e,error:i=>{throw i}})}dispose(t){t.unsubscribe()}}class zn{createSubscription(t,e){return t.then(e,i=>{throw i})}dispose(t){}}const Ai=new zn,vr=new gn;let Hi=(()=>{class n{constructor(e){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,i=>this._updateLatestValue(e,i))}_selectStrategy(e){if((0,o.QGY)(e))return Ai;if((0,o.F4k)(e))return vr;throw function on(n,t){return new o.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,i){e===this._obj&&(this._latestValue=i,this._ref.markForCheck())}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.sBO,16))},n.\u0275pipe=o.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})(),Kr=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const Ss="browser";let su=(()=>{class n{}return n.\u0275prov=(0,o.Yz7)({token:n,providedIn:"root",factory:()=>new Sl((0,o.LFG)(he),window)}),n})();class Sl{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function as(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const a=r.shadowRoot;if(a){const f=a.getElementById(t)||a.querySelector(`[name="${t}"]`);if(f)return f}r=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(i-a[0],r-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=au(this.window.history)||au(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function au(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Su{}class ua extends Se{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Hc extends ua{static makeCurrent(){!function E(n){me||(me=n)}(new Hc)}onAndCancel(t,e,i){return t.addEventListener(e,i,!1),()=>{t.removeEventListener(e,i,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function jc(){return wo=wo||document.querySelector("base"),wo?wo.getAttribute("href"):null}();return null==e?null:function Ts(n){ba=ba||document.createElement("a"),ba.setAttribute("href",n);const t=ba.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){wo=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return yr(document.cookie,t)}}let ba,wo=null;const fl=new o.OlP("TRANSITION_ID"),Al=[{provide:o.ip1,useFactory:function pl(n,t,e){return()=>{e.get(o.CZH).donePromise.then(()=>{const i=Ae(),r=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<r.length;a++)i.remove(r[a])})}},deps:[fl,he,o.zs3],multi:!0}];let qc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const xs=new o.OlP("EventManagerPlugins");let ds=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}addGlobalEventListener(e,i,r){return this._findPluginFor(i).addGlobalEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const r=this._plugins;for(let a=0;a<r.length;a++){const f=r[a];if(f.supports(e))return this._eventNameToPlugin.set(e,f),f}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(xs),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class ro{constructor(t){this._doc=t}addGlobalEventListener(t,e,i){const r=Ae().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,i)}}let wd=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const i=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),vc=(()=>{class n extends wd{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,i,r){e.forEach(a=>{const f=this._doc.createElement("style");f.textContent=a,r.push(i.appendChild(f))})}addHost(e){const i=[];this._addStylesToHost(this._stylesSet,e,i),this._hostNodes.set(e,i)}removeHost(e){const i=this._hostNodes.get(e);i&&i.forEach(Ks),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(e,r,i)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(Ks))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(he))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function Ks(n){Ae().remove(n)}const Sa={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},uu=/%COMP%/g;function Ac(n,t){return t.flat(100).map(e=>e.replace(uu,n))}function du(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let hu=(()=>{class n{constructor(e,i,r){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Jn(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;switch(i.encapsulation){case o.ifc.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new Yc(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(e),r}case 1:case o.ifc.ShadowDom:return new yo(this.eventManager,this.sharedStylesHost,e,i);default:if(!this.rendererByCompId.has(i.id)){const r=Ac(i.id,i.styles);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(ds),o.LFG(vc),o.LFG(o.AFp))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class Jn{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(Sa[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(Pl(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(Pl(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;const a=Sa[r];a?t.setAttributeNS(a,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const r=Sa[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(o.JOm.DashCase|o.JOm.Important)?t.style.setProperty(e,i,r&o.JOm.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&o.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,du(i)):this.eventManager.addEventListener(t,e,du(i))}}function Pl(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Yc extends Jn{constructor(t,e,i,r){super(t),this.component=i;const a=Ac(r+"-"+i.id,i.styles);e.addStyles(a),this.contentAttr=function Tc(n){return"_ngcontent-%COMP%".replace(uu,n)}(r+"-"+i.id),this.hostAttr=function Da(n){return"_nghost-%COMP%".replace(uu,n)}(r+"-"+i.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}class yo extends Jn{constructor(t,e,i,r){super(t),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Ac(r.id,r.styles);for(let f=0;f<a.length;f++){const b=document.createElement("style");b.textContent=a[f],this.shadowRoot.appendChild(b)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let tl=(()=>{class n extends ro{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(he))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Ma=["alt","control","meta","shift"],Du={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},nl={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Eo=(()=>{class n extends ro{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,i,r){const a=n.parseEventName(i),f=n.eventCallback(a.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ae().onAndCancel(e,a.domEventName,f))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const a=n._normalizeKey(i.pop());let f="",b=i.indexOf("code");if(b>-1&&(i.splice(b,1),f="code."),Ma.forEach(M=>{const O=i.indexOf(M);O>-1&&(i.splice(O,1),f+=M+".")}),f+=a,0!=i.length||0===a.length)return null;const S={};return S.domEventName=r,S.fullKey=f,S}static matchEventFullKeyCode(e,i){let r=Du[e.key]||e.key,a="";return i.indexOf("code.")>-1&&(r=e.code,a="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),Ma.forEach(f=>{f!==r&&(0,nl[f])(e)&&(a+=f+".")}),a+=r,a===i)}static eventCallback(e,i,r){return a=>{n.matchEventFullKeyCode(a,e)&&r.runGuarded(()=>i(a))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(he))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const $=(0,o.eFA)(o._c5,"browser",[{provide:o.Lbi,useValue:Ss},{provide:o.g9A,useValue:function y(){Hc.makeCurrent()},multi:!0},{provide:he,useFactory:function A(){return(0,o.RDi)(document),document},deps:[]}]),Z=new o.OlP(""),ee=[{provide:o.rWj,useClass:class ml{addToWindow(t){o.dqk.getAngularTestability=(i,r=!0)=>{const a=t.findTestabilityInTree(i,r);if(null==a)throw new Error("Could not find testability for element.");return a},o.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),o.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),o.dqk.frameworkStabilizers||(o.dqk.frameworkStabilizers=[]),o.dqk.frameworkStabilizers.push(i=>{const r=o.dqk.getAllAngularTestabilities();let a=r.length,f=!1;const b=function(S){f=f||S,a--,0==a&&i(f)};r.forEach(function(S){S.whenStable(b)})})}findTestabilityInTree(t,e,i){return null==e?null:t.getTestability(e)??(i?Ae().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:o.lri,useClass:o.dDg,deps:[o.R0b,o.eoX,o.rWj]},{provide:o.dDg,useClass:o.dDg,deps:[o.R0b,o.eoX,o.rWj]}],ie=[{provide:o.zSh,useValue:"root"},{provide:o.qLn,useFactory:function D(){return new o.qLn},deps:[]},{provide:xs,useClass:tl,multi:!0,deps:[he,o.R0b,o.Lbi]},{provide:xs,useClass:Eo,multi:!0,deps:[he]},{provide:hu,useClass:hu,deps:[ds,vc,o.AFp]},{provide:o.FYo,useExisting:hu},{provide:wd,useExisting:vc},{provide:vc,useClass:vc,deps:[he]},{provide:ds,useClass:ds,deps:[xs,o.R0b]},{provide:Su,useClass:qc,deps:[]},[]];let s=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:o.AFp,useValue:e.appId},{provide:fl,useExisting:o.AFp},Al]}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Z,12))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[...ie,...ee],imports:[Kr,o.hGG]}),n})(),k=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(he))},n.\u0275prov=o.Yz7({token:n,factory:function(e){let i=null;return i=e?new e:function C(){return new k((0,o.LFG)(he))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;let jl=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(e){let i=null;return i=e?new(e||n):o.LFG(Wc),i},providedIn:"root"}),n})(),Wc=(()=>{class n extends jl{constructor(e){super(),this._doc=e}sanitize(e,i){if(null==i)return null;switch(e){case o.q3G.NONE:return i;case o.q3G.HTML:return(0,o.qzn)(i,"HTML")?(0,o.z3N)(i):(0,o.EiD)(this._doc,String(i)).toString();case o.q3G.STYLE:return(0,o.qzn)(i,"Style")?(0,o.z3N)(i):i;case o.q3G.SCRIPT:if((0,o.qzn)(i,"Script"))return(0,o.z3N)(i);throw new Error("unsafe value used in a script context");case o.q3G.URL:return(0,o.qzn)(i,"URL")?(0,o.z3N)(i):(0,o.mCW)(String(i));case o.q3G.RESOURCE_URL:if((0,o.qzn)(i,"ResourceURL"))return(0,o.z3N)(i);throw new Error(`unsafe value used in a resource URL context (see ${o.JZr})`);default:throw new Error(`Unexpected SecurityContext ${e} (see ${o.JZr})`)}}bypassSecurityTrustHtml(e){return(0,o.JVY)(e)}bypassSecurityTrustStyle(e){return(0,o.L6k)(e)}bypassSecurityTrustScript(e){return(0,o.eBb)(e)}bypassSecurityTrustUrl(e){return(0,o.LAX)(e)}bypassSecurityTrustResourceUrl(e){return(0,o.pB0)(e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(he))},n.\u0275prov=o.Yz7({token:n,factory:function(e){let i=null;return i=e?new e:function sc(n){return new Wc(n.get(he))}(o.LFG(o.zs3)),i},providedIn:"root"}),n})();function Ei(n){return null!=n&&"false"!=`${n}`}function Fi(n,t=0){return function Jr(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):t}function da(n){return Array.isArray(n)?n:[n]}function Wr(n){return null==n?"":"string"==typeof n?n:`${n}px`}function wr(n){return n instanceof o.SBq?n.nativeElement:n}var Nn=W(7579),an=W(9646),gr=W(9751),Rr=W(8421),rr=W(5577),vn=W(1144),cn=W(576),kn=W(4004);const{isArray:oo}=Array;function pu(n){return(0,kn.U)(t=>function fu(n,t){return oo(t)?n(...t):n(t)}(n,t))}const Uf=["addListener","removeListener"],Hu=["addEventListener","removeEventListener"],ju=["on","off"];function ac(n,t,e,i){if((0,cn.m)(e)&&(i=e,e=void 0),i)return ac(n,t,e).pipe(pu(i));const[r,a]=function mu(n){return(0,cn.m)(n.addEventListener)&&(0,cn.m)(n.removeEventListener)}(n)?Hu.map(f=>b=>n[f](t,b,e)):function Ed(n){return(0,cn.m)(n.addListener)&&(0,cn.m)(n.removeListener)}(n)?Uf.map(Xc(n,t)):function Hd(n){return(0,cn.m)(n.on)&&(0,cn.m)(n.off)}(n)?ju.map(Xc(n,t)):[];if(!r&&(0,vn.z)(n))return(0,rr.z)(f=>ac(f,t,e))((0,Rr.Xf)(n));if(!r)throw new TypeError("Invalid event target");return new gr.y(f=>{const b=(...S)=>f.next(1<S.length?S:S[0]);return r(b),()=>a(b)})}function Xc(n,t){return e=>i=>n[e](t,i)}var Gm=W(4408),Ia=W(727);const ks={schedule(n){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:i}=ks;i&&(t=i.requestAnimationFrame,e=i.cancelAnimationFrame);const r=t(a=>{e=void 0,n(a)});return new Ia.w0(()=>e?.(r))},requestAnimationFrame(...n){const{delegate:t}=ks;return(t?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:t}=ks;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var $m=W(7565);const Cd=new class jd extends $m.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class Rp extends Gm.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=ks.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(t,e,i);const{actions:a}=t;null!=e&&(null===(r=a[a.length-1])||void 0===r?void 0:r.id)!==e&&(ks.cancelAnimationFrame(e),t._scheduled=void 0)}});let Qh,Ch=1;const Vf={};function Gf(n){return n in Vf&&(delete Vf[n],!0)}const zy={setImmediate(n){const t=Ch++;return Vf[t]=!0,Qh||(Qh=Promise.resolve()),Qh.then(()=>Gf(t)&&n()),t},clearImmediate(n){Gf(n)}},{setImmediate:Uy,clearImmediate:kp}=zy,ef={setImmediate(...n){const{delegate:t}=ef;return(t?.setImmediate||Uy)(...n)},clearImmediate(n){const{delegate:t}=ef;return(t?.clearImmediate||kp)(n)},delegate:void 0},Vy=new class tf extends $m.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class $f extends Gm.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=ef.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(t,e,i);const{actions:a}=t;null!=e&&(null===(r=a[a.length-1])||void 0===r?void 0:r.id)!==e&&(ef.clearImmediate(e),t._scheduled=void 0)}});var nf=W(4986),_l=W(4482),il=W(5403),lc=W(3532),ql=W(1165);function qd(n=0,t,e=nf.P){let i=-1;return null!=t&&((0,lc.K)(t)?e=t:i=t),new gr.y(r=>{let a=(0,ql.q)(n)?+n-e.now():n;a<0&&(a=0);let f=0;return e.schedule(function(){r.closed||(r.next(f++),0<=i?this.schedule(void 0,i):r.complete())},a)})}function Yd(n,t=nf.z){return function Gy(n){return(0,_l.e)((t,e)=>{let i=!1,r=null,a=null,f=!1;const b=()=>{if(a?.unsubscribe(),a=null,i){i=!1;const M=r;r=null,e.next(M)}f&&e.complete()},S=()=>{a=null,f&&e.complete()};t.subscribe((0,il.x)(e,M=>{i=!0,r=M,a||(0,Rr.Xf)(n(M)).subscribe(a=(0,il.x)(e,b,S))},()=>{f=!0,(!i||!a||a.closed)&&e.complete()}))})}(()=>qd(n,t))}var co=W(9300),Co=W(2722),Dh=W(8189),Mh=W(3269),Hs=W(457);function rf(...n){return function gu(){return(0,Dh.J)(1)}()((0,Hs.D)(n,(0,Mh.yG)(n)))}function Yl(...n){const t=(0,Mh.yG)(n);return(0,_l.e)((e,i)=>{(t?rf(n,e,t):rf(n,e)).subscribe(i)})}let Ih;try{Ih=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Ih=!1}let Zd,Ga=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function bd(n){return n===Ss}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Ih)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.Lbi))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const sf=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function Th(){if(Zd)return Zd;if("object"!=typeof document||!document)return Zd=new Set(sf),Zd;let n=document.createElement("input");return Zd=new Set(sf.filter(t=>(n.setAttribute("type",t),n.type===t))),Zd}let Ol,af,qu,lf;function _u(n){return function Zl(){if(null==Ol&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ol=!0}))}finally{Ol=Ol||!1}return Ol}()?n:!!n.capture}function $a(){if(null==qu){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return qu=!1,qu;if("scrollBehavior"in document.documentElement.style)qu=!0;else{const n=Element.prototype.scrollTo;qu=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return qu}function Kc(){if("object"!=typeof document||!document)return 0;if(null==af){const n=document.createElement("div"),t=n.style;n.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";const e=document.createElement("div"),i=e.style;i.width="2px",i.height="1px",n.appendChild(e),document.body.appendChild(n),af=0,0===n.scrollLeft&&(n.scrollLeft=1,af=0===n.scrollLeft?1:2),n.remove()}return af}function Wd(n){if(function Sd(){if(null==lf){const n=typeof document<"u"?document.head:null;lf=!(!n||!n.createShadowRoot&&!n.attachShadow)}return lf}()){const t=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function Hf(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const t=n.shadowRoot.activeElement;if(t===n)break;n=t}return n}function Jc(n){return n.composedPath?n.composedPath()[0]:n.target}function jf(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const r_=new o.OlP("cdk-dir-doc",{providedIn:"root",factory:function jm(){return(0,o.f3M)(he)}}),o_=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Ll=(()=>{class n{constructor(e){if(this.value="ltr",this.change=new o.vpe,e){const r=e.documentElement?e.documentElement.dir:null;this.value=function s_(n){const t=n?.toLowerCase()||"";return"auto"===t&&typeof navigator<"u"&&navigator?.language?o_.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(r_,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Mu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const cf=["contentWrapper"],ha=["*"],qf=new o.OlP("VIRTUAL_SCROLL_STRATEGY");let Yu=(()=>{class n{constructor(e,i,r){this._ngZone=e,this._platform=i,this._scrolled=new Nn.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new gr.y(i=>{this._globalSubscription||this._addGlobalListener();const r=e>0?this._scrolled.pipe(Yd(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,an.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){const r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe((0,co.h)(a=>!a||r.indexOf(a)>-1))}getAncestorScrollContainers(e){const i=[];return this.scrollContainers.forEach((r,a)=>{this._scrollableContainsElement(a,e)&&i.push(a)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let r=wr(i),a=e.getElementRef().nativeElement;do{if(r==a)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>ac(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.R0b),o.LFG(Ga),o.LFG(he,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Zf=(()=>{class n{constructor(e,i,r,a){this.elementRef=e,this.scrollDispatcher=i,this.ngZone=r,this.dir=a,this._destroyed=new Nn.x,this._elementScrolled=new gr.y(f=>this.ngZone.runOutsideAngular(()=>ac(this.elementRef.nativeElement,"scroll").pipe((0,Co.R)(this._destroyed)).subscribe(f)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){const i=this.elementRef.nativeElement,r=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=r?e.end:e.start),null==e.right&&(e.right=r?e.start:e.end),null!=e.bottom&&(e.top=i.scrollHeight-i.clientHeight-e.bottom),r&&0!=Kc()?(null!=e.left&&(e.right=i.scrollWidth-i.clientWidth-e.left),2==Kc()?e.left=e.right:1==Kc()&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=i.scrollWidth-i.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){const i=this.elementRef.nativeElement;$a()?i.scrollTo(e):(null!=e.top&&(i.scrollTop=e.top),null!=e.left&&(i.scrollLeft=e.left))}measureScrollOffset(e){const i="left",r="right",a=this.elementRef.nativeElement;if("top"==e)return a.scrollTop;if("bottom"==e)return a.scrollHeight-a.clientHeight-a.scrollTop;const f=this.dir&&"rtl"==this.dir.value;return"start"==e?e=f?r:i:"end"==e&&(e=f?i:r),f&&2==Kc()?e==i?a.scrollWidth-a.clientWidth-a.scrollLeft:a.scrollLeft:f&&1==Kc()?e==i?a.scrollLeft+a.scrollWidth-a.clientWidth:-a.scrollLeft:e==i?a.scrollLeft:a.scrollWidth-a.clientWidth-a.scrollLeft}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(Yu),o.Y36(o.R0b),o.Y36(Ll,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0}),n})(),Zu=(()=>{class n{constructor(e,i,r){this._platform=e,this._change=new Nn.x,this._changeListener=a=>{this._change.next(a)},this._document=r,i.runOutsideAngular(()=>{if(e.isBrowser){const a=this._getWindow();a.addEventListener("resize",this._changeListener),a.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,i=this._getWindow(),r=e.documentElement,a=r.getBoundingClientRect();return{top:-a.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,left:-a.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(Yd(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Ga),o.LFG(o.R0b),o.LFG(he,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Wf=new o.OlP("VIRTUAL_SCROLLABLE");let a_=(()=>{class n extends Zf{constructor(e,i,r,a){super(e,i,r,a)}measureViewportSize(e){const i=this.elementRef.nativeElement;return"horizontal"===e?i.clientWidth:i.clientHeight}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(Yu),o.Y36(o.R0b),o.Y36(Ll,8))},n.\u0275dir=o.lG2({type:n,features:[o.qOj]}),n})();const hf=typeof requestAnimationFrame<"u"?Cd:Vy;let l_=(()=>{class n extends a_{constructor(e,i,r,a,f,b,S,M){super(e,b,r,f),this.elementRef=e,this._changeDetectorRef=i,this._scrollStrategy=a,this.scrollable=M,this._platform=(0,o.f3M)(Ga),this._detachedSubject=new Nn.x,this._renderedRangeSubject=new Nn.x,this._orientation="vertical",this._appendOnly=!1,this.scrolledIndexChange=new gr.y(O=>this._scrollStrategy.scrolledIndexChange.subscribe(N=>Promise.resolve().then(()=>this.ngZone.run(()=>O.next(N))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=Ia.w0.EMPTY,this._viewportChanges=S.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}get orientation(){return this._orientation}set orientation(e){this._orientation!==e&&(this._orientation=e,this._calculateSpacerSize())}get appendOnly(){return this._appendOnly}set appendOnly(e){this._appendOnly=Ei(e)}ngOnInit(){!this._platform.isBrowser||(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe(Yl(null),Yd(0,hf)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(e){this.ngZone.runOutsideAngular(()=>{this._forOf=e,this._forOf.dataStream.pipe((0,Co.R)(this._detachedSubject)).subscribe(i=>{const r=i.length;r!==this._dataLength&&(this._dataLength=r,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(e){return this.getElementRef().nativeElement.getBoundingClientRect()[e]}setTotalContentSize(e){this._totalContentSize!==e&&(this._totalContentSize=e,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(e){(function Ym(n,t){return n.start==t.start&&n.end==t.end})(this._renderedRange,e)||(this.appendOnly&&(e={start:0,end:Math.max(this._renderedRange.end,e.end)}),this._renderedRangeSubject.next(this._renderedRange=e),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(e,i="to-start"){e=this.appendOnly&&"to-start"===i?0:e;const a="horizontal"==this.orientation,f=a?"X":"Y";let S=`translate${f}(${Number((a&&this.dir&&"rtl"==this.dir.value?-1:1)*e)}px)`;this._renderedContentOffset=e,"to-end"===i&&(S+=` translate${f}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=S&&(this._renderedContentTransform=S,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(e,i="auto"){const r={behavior:i};"horizontal"===this.orientation?r.start=e:r.top=e,this.scrollable.scrollTo(r)}scrollToIndex(e,i="auto"){this._scrollStrategy.scrollToIndex(e,i)}measureScrollOffset(e){let i;return i=this.scrollable==this?r=>super.measureScrollOffset(r):r=>this.scrollable.measureScrollOffset(r),Math.max(0,i(e??("horizontal"===this.orientation?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(e){let i;const r="left",a="right",f="rtl"==this.dir?.value;i="start"==e?f?a:r:"end"==e?f?r:a:e||("horizontal"===this.orientation?"left":"top");const b=this.scrollable.measureBoundingClientRectWithScrollOffset(i);return this.elementRef.nativeElement.getBoundingClientRect()[i]-b}measureRenderedContentSize(){const e=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?e.offsetWidth:e.offsetHeight}measureRangeSize(e){return this._forOf?this._forOf.measureRangeSize(e,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(e){e&&this._runAfterChangeDetection.push(e),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const e=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const i of e)i()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.sBO),o.Y36(o.R0b),o.Y36(qf,8),o.Y36(Ll,8),o.Y36(Yu),o.Y36(Zu),o.Y36(Wf,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(e,i){if(1&e&&o.Gf(cf,7),2&e){let r;o.iGM(r=o.CRH())&&(i._contentWrapper=r.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(e,i){2&e&&o.ekj("cdk-virtual-scroll-orientation-horizontal","horizontal"===i.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==i.orientation)},inputs:{orientation:"orientation",appendOnly:"appendOnly"},outputs:{scrolledIndexChange:"scrolledIndexChange"},standalone:!0,features:[o._Bn([{provide:Zf,useFactory:(t,e)=>t||e,deps:[[new o.FiY,new o.tBr(Wf)],n]}]),o.qOj,o.jDz],ngContentSelectors:ha,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(e,i){1&e&&(o.F$t(),o.TgZ(0,"div",0,1),o.Hsn(2),o.qZA(),o._UZ(3,"div",2)),2&e&&(o.xp6(3),o.Udp("width",i._totalContentWidth)("height",i._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}"],encapsulation:2,changeDetection:0}),n})(),Wu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),Wm=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Mu,Wu,l_,Mu,Wu]}),n})();var rl=W(1135);function Qc(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}var eu=W(4671);function no(n,t,e){const i=(0,cn.m)(n)||t||e?{next:n,error:t,complete:e}:n;return i?(0,_l.e)((r,a)=>{var f;null===(f=i.subscribe)||void 0===f||f.call(i);let b=!0;r.subscribe((0,il.x)(a,S=>{var M;null===(M=i.next)||void 0===M||M.call(i,S),a.next(S)},()=>{var S;b=!1,null===(S=i.complete)||void 0===S||S.call(i),a.complete()},S=>{var M;b=!1,null===(M=i.error)||void 0===M||M.call(i,S),a.error(S)},()=>{var S,M;b&&(null===(S=i.unsubscribe)||void 0===S||S.call(i)),null===(M=i.finalize)||void 0===M||M.call(i)}))}):eu.y}var Wn=W(8372),uo=W(5698),ed=W(5684),fa=W(1884);let Hr=(()=>{class n{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),td=(()=>{class n{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,i)=>this._cleanupObserver(i))}observe(e){const i=wr(e);return new gr.y(r=>{const f=this._observeElement(i).subscribe(r);return()=>{f.unsubscribe(),this._unobserveElement(i)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const i=new Nn.x,r=this._mutationObserverFactory.create(a=>i.next(a));r&&r.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:r,stream:i,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:i,stream:r}=this._observedElements.get(e);i&&i.disconnect(),r.complete(),this._observedElements.delete(e)}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Hr))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),em=(()=>{class n{constructor(e,i,r){this._contentObserver=e,this._elementRef=i,this._ngZone=r,this.event=new o.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=Ei(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=Fi(e),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe((0,Wn.b)(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(td),o.Y36(o.SBq),o.Y36(o.R0b))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),tm=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[Hr]}),n})();const{isArray:Fh}=Array,{getPrototypeOf:nm,prototype:hg,keys:k_}=Object;function im(n){if(1===n.length){const t=n[0];if(Fh(t))return{args:t,keys:null};if(function sv(n){return n&&"object"==typeof n&&nm(n)===hg}(t)){const e=k_(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}function fg(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}var Nh=W(9672);function So(...n){const t=(0,Mh.yG)(n),e=(0,Mh.jO)(n),{args:i,keys:r}=im(n);if(0===i.length)return(0,Hs.D)([],t);const a=new gr.y(function tu(n,t,e=eu.y){return i=>{th(t,()=>{const{length:r}=n,a=new Array(r);let f=r,b=r;for(let S=0;S<r;S++)th(t,()=>{const M=(0,Hs.D)(n[S],t);let O=!1;M.subscribe((0,il.x)(i,N=>{a[S]=N,O||(O=!0,b--),b||i.next(e(a.slice()))},()=>{--f||i.complete()}))},i)},i)}}(i,t,r?f=>fg(r,f):eu.y));return e?a.pipe(pu(e)):a}function th(n,t,e){n?(0,Nh.f)(e,n,t):t()}const ap=new Set;let nh,pg=(()=>{class n{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):xf}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function rm(n){if(!ap.has(n))try{nh||(nh=document.createElement("style"),nh.setAttribute("type","text/css"),document.head.appendChild(nh)),nh.sheet&&(nh.sheet.insertRule(`@media ${n} {body{ }}`,0),ap.add(n))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Ga))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function xf(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let lp=(()=>{class n{constructor(e,i){this._mediaMatcher=e,this._zone=i,this._queries=new Map,this._destroySubject=new Nn.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return Bh(da(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let a=So(Bh(da(e)).map(f=>this._registerQuery(f).observable));return a=rf(a.pipe((0,uo.q)(1)),a.pipe((0,ed.T)(1),(0,Wn.b)(0))),a.pipe((0,kn.U)(f=>{const b={matches:!1,breakpoints:{}};return f.forEach(({matches:S,query:M})=>{b.matches=b.matches||S,b.breakpoints[M]=S}),b}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const i=this._mediaMatcher.matchMedia(e),a={observable:new gr.y(f=>{const b=S=>this._zone.run(()=>f.next(S));return i.addListener(b),()=>{i.removeListener(b)}}).pipe(Yl(i),(0,kn.U)(({matches:f})=>({query:e,matches:f})),(0,Co.R)(this._destroySubject)),mql:i};return this._queries.set(e,a),a}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(pg),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Bh(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}function wf(n,t){return(n.getAttribute(t)||"").match(/\S+/g)||[]}const om="cdk-describedby-message",Ef="cdk-describedby-host";let up=0,B_=(()=>{class n{constructor(e,i){this._platform=i,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+up++,this._document=e,this._id=(0,o.f3M)(o.AFp)+"-"+up++}describe(e,i,r){if(!this._canBeDescribed(e,i))return;const a=Cf(i,r);"string"!=typeof i?(Au(i,this._id),this._messageRegistry.set(a,{messageElement:i,referenceCount:0})):this._messageRegistry.has(a)||this._createMessageElement(i,r),this._isElementDescribedByMessage(e,a)||this._addMessageReference(e,a)}removeDescription(e,i,r){if(!i||!this._isElementNode(e))return;const a=Cf(i,r);if(this._isElementDescribedByMessage(e,a)&&this._removeMessageReference(e,a),"string"==typeof i){const f=this._messageRegistry.get(a);f&&0===f.referenceCount&&this._deleteMessageElement(a)}0===this._messagesContainer?.childNodes.length&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){const e=this._document.querySelectorAll(`[${Ef}="${this._id}"]`);for(let i=0;i<e.length;i++)this._removeCdkDescribedByReferenceIds(e[i]),e[i].removeAttribute(Ef);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(e,i){const r=this._document.createElement("div");Au(r,this._id),r.textContent=e,i&&r.setAttribute("role",i),this._createMessagesContainer(),this._messagesContainer.appendChild(r),this._messageRegistry.set(Cf(e,i),{messageElement:r,referenceCount:0})}_deleteMessageElement(e){this._messageRegistry.get(e)?.messageElement?.remove(),this._messageRegistry.delete(e)}_createMessagesContainer(){if(this._messagesContainer)return;const e="cdk-describedby-message-container",i=this._document.querySelectorAll(`.${e}[platform="server"]`);for(let a=0;a<i.length;a++)i[a].remove();const r=this._document.createElement("div");r.style.visibility="hidden",r.classList.add(e),r.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&r.setAttribute("platform","server"),this._document.body.appendChild(r),this._messagesContainer=r}_removeCdkDescribedByReferenceIds(e){const i=wf(e,"aria-describedby").filter(r=>0!=r.indexOf(om));e.setAttribute("aria-describedby",i.join(" "))}_addMessageReference(e,i){const r=this._messageRegistry.get(i);(function ih(n,t,e){const i=wf(n,t);i.some(r=>r.trim()==e.trim())||(i.push(e.trim()),n.setAttribute(t,i.join(" ")))})(e,"aria-describedby",r.messageElement.id),e.setAttribute(Ef,this._id),r.referenceCount++}_removeMessageReference(e,i){const r=this._messageRegistry.get(i);r.referenceCount--,function zh(n,t,e){const r=wf(n,t).filter(a=>a!=e.trim());r.length?n.setAttribute(t,r.join(" ")):n.removeAttribute(t)}(e,"aria-describedby",r.messageElement.id),e.removeAttribute(Ef)}_isElementDescribedByMessage(e,i){const r=wf(e,"aria-describedby"),a=this._messageRegistry.get(i),f=a&&a.messageElement.id;return!!f&&-1!=r.indexOf(f)}_canBeDescribed(e,i){if(!this._isElementNode(e))return!1;if(i&&"object"==typeof i)return!0;const r=null==i?"":`${i}`.trim(),a=e.getAttribute("aria-label");return!(!r||a&&a.trim()===r)}_isElementNode(e){return e.nodeType===this._document.ELEMENT_NODE}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(he),o.LFG(Ga))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Cf(n,t){return"string"==typeof n?`${t||""}/${n}`:n}function Au(n,t){n.id||(n.id=`${om}-${t}-${up++}`)}class wc{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Nn.x,this._typeaheadSubscription=Ia.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new Nn.x,this.change=new Nn.x,t instanceof o.n_E&&(this._itemChangesSubscription=t.changes.subscribe(e=>{if(this._activeItem){const r=e.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}}))}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(no(e=>this._pressedLetters.push(e)),(0,Wn.b)(t),(0,co.h)(()=>this._pressedLetters.length>0),(0,kn.U)(()=>this._pressedLetters.join(""))).subscribe(e=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const a=(this._activeItemIndex+r)%i.length,f=i[a];if(!this._skipPredicateFn(f)&&0===f.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(a);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}withPageUpDown(t=!0,e=10){return this._pageUpAndDown={enabled:t,delta:e},this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(a=>!t[a]||this._allowedModifierKeys.indexOf(a)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&r){const a=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(a>0?a:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&r){const a=this._activeItemIndex+this._pageUpAndDown.delta,f=this._getItemsArray().length;this._setActiveItemByIndex(a<f?a:f-1,-1);break}return;default:return void((r||Qc(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),i="number"==typeof t?t:e.indexOf(t);this._activeItem=e[i]??null,this._activeItemIndex=i}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let i=1;i<=e.length;i++){const r=(this._activeItemIndex+t*i+e.length)%e.length;if(!this._skipPredicateFn(e[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const i=this._getItemsArray();if(i[t]){for(;this._skipPredicateFn(i[t]);)if(!i[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof o.n_E?this._items.toArray():this._items}}class sm extends wc{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}}class z_ extends wc{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}let c=(()=>{class n{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function w(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const i=function _(n){try{return n.frameElement}catch{return null}}(function Ze(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(e));if(i&&(-1===ge(i)||!this.isVisible(i)))return!1;let r=e.nodeName.toLowerCase(),a=ge(e);return e.hasAttribute("contenteditable")?-1!==a:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function Ie(n){let t=n.nodeName.toLowerCase(),e="input"===t&&n.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===r?!!e.hasAttribute("controls")&&-1!==a:"video"===r?-1!==a&&(null!==a||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,i){return function ze(n){return!function L(n){return function H(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function P(n){let t=n.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(n)||function B(n){return function X(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||ne(n))}(e)&&!this.isDisabled(e)&&(i?.ignoreVisibility||this.isVisible(e))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Ga))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ne(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let t=n.getAttribute("tabindex");return!(!t||isNaN(parseInt(t,10)))}function ge(n){if(!ne(n))return null;const t=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class We{constructor(t,e,i,r,a=!1){this._element=t,this._checker=e,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,a||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){const e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const i=this._getFirstTabbableElement(e);return i?.focus(t),!!i}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let i=0;i<e.length;i++){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let i=e.length-1;i>=0;i--){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(r)return r}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe((0,uo.q)(1)).subscribe(t)}}let St=(()=>{class n{constructor(e,i,r){this._checker=e,this._ngZone=i,this._document=r}create(e,i=!1){return new We(e,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(c),o.LFG(o.R0b),o.LFG(he))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function pn(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function oi(n){const t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const bi=new o.OlP("cdk-input-modality-detector-options"),ti={ignoreKeys:[18,17,224,91,16]},On=_u({passive:!0,capture:!0});let ni=(()=>{class n{constructor(e,i,r,a){this._platform=e,this._mostRecentTarget=null,this._modality=new rl.X(null),this._lastTouchMs=0,this._onKeydown=f=>{this._options?.ignoreKeys?.some(b=>b===f.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Jc(f))},this._onMousedown=f=>{Date.now()-this._lastTouchMs<650||(this._modality.next(pn(f)?"keyboard":"mouse"),this._mostRecentTarget=Jc(f))},this._onTouchstart=f=>{oi(f)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Jc(f))},this._options={...ti,...a},this.modalityDetected=this._modality.pipe((0,ed.T)(1)),this.modalityChanged=this.modalityDetected.pipe((0,fa.x)()),e.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,On),r.addEventListener("mousedown",this._onMousedown,On),r.addEventListener("touchstart",this._onTouchstart,On)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,On),document.removeEventListener("mousedown",this._onMousedown,On),document.removeEventListener("touchstart",this._onTouchstart,On))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Ga),o.LFG(o.R0b),o.LFG(he),o.LFG(bi,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Zn=new o.OlP("liveAnnouncerElement",{providedIn:"root",factory:function Tn(){return null}}),Vi=new o.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let Oi=0,Er=(()=>{class n{constructor(e,i,r,a){this._ngZone=i,this._defaultOptions=a,this._document=r,this._liveElement=e||this._createLiveElement()}announce(e,...i){const r=this._defaultOptions;let a,f;return 1===i.length&&"number"==typeof i[0]?f=i[0]:[a,f]=i,this.clear(),clearTimeout(this._previousTimeout),a||(a=r&&r.politeness?r.politeness:"polite"),null==f&&r&&(f=r.duration),this._liveElement.setAttribute("aria-live",a),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(b=>this._currentResolve=b)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,"number"==typeof f&&(this._previousTimeout=setTimeout(()=>this.clear(),f)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const e="cdk-live-announcer-element",i=this._document.getElementsByClassName(e),r=this._document.createElement("div");for(let a=0;a<i.length;a++)i[a].remove();return r.classList.add(e),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),r.id="cdk-live-announcer-"+Oi++,this._document.body.appendChild(r),r}_exposeAnnouncerToModals(e){const i=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<i.length;r++){const a=i[r],f=a.getAttribute("aria-owns");f?-1===f.indexOf(e)&&a.setAttribute("aria-owns",f+" "+e):a.setAttribute("aria-owns",e)}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Zn,8),o.LFG(o.R0b),o.LFG(he),o.LFG(Vi,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Do=new o.OlP("cdk-focus-monitor-default-options"),ea=_u({passive:!0,capture:!0});let Ta=(()=>{class n{constructor(e,i,r,a,f){this._ngZone=e,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Nn.x,this._rootNodeFocusAndBlurListener=b=>{for(let M=Jc(b);M;M=M.parentElement)"focus"===b.type?this._onFocus(b,M):this._onBlur(b,M)},this._document=a,this._detectionMode=f?.detectionMode||0}monitor(e,i=!1){const r=wr(e);if(!this._platform.isBrowser||1!==r.nodeType)return(0,an.of)(null);const a=Wd(r)||this._getDocument(),f=this._elementInfo.get(r);if(f)return i&&(f.checkChildren=!0),f.subject;const b={checkChildren:i,subject:new Nn.x,rootNode:a};return this._elementInfo.set(r,b),this._registerGlobalListeners(b),b.subject}stopMonitoring(e){const i=wr(e),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(e,i,r){const a=wr(e);a===this._getDocument().activeElement?this._getClosestElementsInfo(a).forEach(([b,S])=>this._originChanged(b,i,S)):(this._setOrigin(i),"function"==typeof a.focus&&a.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,i){e.classList.toggle("cdk-focused",!!i),e.classList.toggle("cdk-touch-focused","touch"===i),e.classList.toggle("cdk-keyboard-focused","keyboard"===i),e.classList.toggle("cdk-mouse-focused","mouse"===i),e.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,i){const r=this._elementInfo.get(i),a=Jc(e);!r||!r.checkChildren&&i!==a||this._originChanged(i,this._getFocusOrigin(a),r)}_onBlur(e,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(e,i){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const i=e.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,ea),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,ea)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe((0,Co.R)(this._stopInputModalityDetector)).subscribe(a=>{this._setOrigin(a,!0)}))}_removeGlobalListeners(e){const i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,ea),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,ea),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,r){this._setClasses(e,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){const i=[];return this._elementInfo.forEach((r,a)=>{(a===e||r.checkChildren&&a.contains(e))&&i.push([a,r])}),i}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const a=e.labels;if(a)for(let f=0;f<a.length;f++)if(a[f].contains(i))return!0;return!1}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.R0b),o.LFG(Ga),o.LFG(ni),o.LFG(he,8),o.LFG(Do,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const pa="cdk-high-contrast-black-on-white",Ha="cdk-high-contrast-white-on-black",sl="cdk-high-contrast-active";let kl=(()=>{class n{constructor(e,i){this._platform=e,this._document=i,this._breakpointSubscription=(0,o.f3M)(lp).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(e):null,a=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),a){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(sl,pa,Ha),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?e.add(sl,pa):2===i&&e.add(sl,Ha)}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Ga),o.LFG(he))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Wl=(()=>{class n{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(kl))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[tm]}),n})();function ta(n=0,t=nf.z){return n<0&&(n=0),qd(n,n,t)}var As=W(6451),br=W(3900);function ma(n,t,e){for(let i in t)if(t.hasOwnProperty(i)){const r=t[i];r?n.setProperty(i,r,e?.has(i)?"important":""):n.removeProperty(i)}return n}function ja(n,t){const e=t?"":"none";ma(n.style,{"touch-action":t?"":"none","-webkit-user-drag":t?"":"none","-webkit-tap-highlight-color":t?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function Fl(n,t,e){ma(n.style,{position:t?"":"fixed",top:t?"":"0",opacity:t?"":"0",left:t?"":"-999em"},e)}function es(n,t){return t&&"none"!=t?n+" "+t:n}function Aa(n){const t=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*t}function Xl(n,t){return n.getPropertyValue(t).split(",").map(i=>i.trim())}function qa(n){const t=n.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}function al(n,t,e){const{top:i,bottom:r,left:a,right:f}=n;return e>=i&&e<=r&&t>=a&&t<=f}function Kl(n,t,e){n.top+=t,n.bottom=n.top+n.height,n.left+=e,n.right=n.left+n.width}function nu(n,t,e,i){const{top:r,right:a,bottom:f,left:b,width:S,height:M}=n,O=S*t,N=M*t;return i>r-N&&i<f+N&&e>b-O&&e<a+O}class Lc{constructor(t){this._document=t,this.positions=new Map}clear(){this.positions.clear()}cache(t){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),t.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:qa(e)})})}handleScroll(t){const e=Jc(t),i=this.positions.get(e);if(!i)return null;const r=i.scrollPosition;let a,f;if(e===this._document){const M=this.getViewportScrollPosition();a=M.top,f=M.left}else a=e.scrollTop,f=e.scrollLeft;const b=r.top-a,S=r.left-f;return this.positions.forEach((M,O)=>{M.clientRect&&e!==O&&e.contains(O)&&Kl(M.clientRect,b,S)}),r.top=a,r.left=f,{top:b,left:S}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function Pu(n){const t=n.cloneNode(!0),e=t.querySelectorAll("[id]"),i=n.nodeName.toLowerCase();t.removeAttribute("id");for(let r=0;r<e.length;r++)e[r].removeAttribute("id");return"canvas"===i?nd(n,t):("input"===i||"select"===i||"textarea"===i)&&yl(n,t),Ec("canvas",n,t,nd),Ec("input, textarea, select",n,t,yl),t}function Ec(n,t,e,i){const r=t.querySelectorAll(n);if(r.length){const a=e.querySelectorAll(n);for(let f=0;f<r.length;f++)i(r[f],a[f])}}let Cc=0;function yl(n,t){"file"!==t.type&&(t.value=n.value),"radio"===t.type&&t.name&&(t.name=`mat-clone-${t.name}-${Cc++}`)}function nd(n,t){const e=t.getContext("2d");if(e)try{e.drawImage(n,0,0)}catch{}}const Ad=_u({passive:!0}),Sf=_u({passive:!1}),Ru=new Set(["position"]);class Ou{constructor(t,e,i,r,a,f){this._config=e,this._document=i,this._ngZone=r,this._viewportRuler=a,this._dragDropRegistry=f,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new Nn.x,this._pointerMoveSubscription=Ia.w0.EMPTY,this._pointerUpSubscription=Ia.w0.EMPTY,this._scrollSubscription=Ia.w0.EMPTY,this._resizeSubscription=Ia.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new Nn.x,this.started=new Nn.x,this.released=new Nn.x,this.ended=new Nn.x,this.entered=new Nn.x,this.exited=new Nn.x,this.dropped=new Nn.x,this.moved=this._moveEvents,this._pointerDown=b=>{if(this.beforeStarted.next(),this._handles.length){const S=this._getTargetHandle(b);S&&!this._disabledHandles.has(S)&&!this.disabled&&this._initializeDragSequence(S,b)}else this.disabled||this._initializeDragSequence(this._rootElement,b)},this._pointerMove=b=>{const S=this._getPointerPositionOnPage(b);if(!this._hasStartedDragging){if(Math.abs(S.x-this._pickupPositionOnPage.x)+Math.abs(S.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const j=Date.now()>=this._dragStartTime+this._getDragStartDelay(b),be=this._dropContainer;if(!j)return void this._endDragSequence(b);(!be||!be.isDragging()&&!be.isReceiving())&&(b.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(b)))}return}b.preventDefault();const M=this._getConstrainedPointerPosition(S);if(this._hasMoved=!0,this._lastKnownPointerPosition=S,this._updatePointerDirectionDelta(M),this._dropContainer)this._updateActiveDropContainer(M,S);else{const O=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,N=this._activeTransform;N.x=M.x-O.x+this._passiveTransform.x,N.y=M.y-O.y+this._passiveTransform.y,this._applyRootElementTransform(N.x,N.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:M,event:b,distance:this._getDragDistance(M),delta:this._pointerDirectionDelta})})},this._pointerUp=b=>{this._endDragSequence(b)},this._nativeDragStart=b=>{if(this._handles.length){const S=this._getTargetHandle(b);S&&!this._disabledHandles.has(S)&&!this.disabled&&b.preventDefault()}else this.disabled||b.preventDefault()},this.withRootElement(t).withParent(e.parentDragRef||null),this._parentPositions=new Lc(i),f.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(t){const e=Ei(t);e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(i=>ja(i,e)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(t){this._handles=t.map(i=>wr(i)),this._handles.forEach(i=>ja(i,this.disabled)),this._toggleNativeDragInteractions();const e=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&e.add(i)}),this._disabledHandles=e,this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){const e=wr(t);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{e.addEventListener("mousedown",this._pointerDown,Sf),e.addEventListener("touchstart",this._pointerDown,Ad),e.addEventListener("dragstart",this._nativeDragStart,Sf)}),this._initialTransform=void 0,this._rootElement=e),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(t){return this._boundaryElement=t?wr(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(t){return this._parentDragRef=t,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(t){!this._disabledHandles.has(t)&&this._handles.indexOf(t)>-1&&(this._disabledHandles.add(t),ja(t,!0))}enableHandle(t){this._disabledHandles.has(t)&&(this._disabledHandles.delete(t),ja(t,this.disabled))}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){const t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}withPreviewContainer(t){return this._previewContainer=t,this}_sortFromLastPointerPosition(){const t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(t){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:t}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const e=this._getPointerPositionOnPage(t);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:t})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(t){rh(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const e=this._dropContainer;if(e){const i=this._rootElement,r=i.parentNode,a=this._placeholder=this._createPlaceholderElement(),f=this._anchor=this._anchor||this._document.createComment(""),b=this._getShadowRoot();r.insertBefore(f,i),this._initialTransform=i.style.transform||"",this._preview=this._createPreviewElement(),Fl(i,!1,Ru),this._document.body.appendChild(r.replaceChild(a,i)),this._getPreviewInsertionPoint(r,b).appendChild(this._preview),this.started.next({source:this,event:t}),e.start(),this._initialContainer=e,this._initialIndex=e.getItemIndex(this)}else this.started.next({source:this,event:t}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(e?e.getScrollableParents():[])}_initializeDragSequence(t,e){this._parentDragRef&&e.stopPropagation();const i=this.isDragging(),r=rh(e),a=!r&&0!==e.button,f=this._rootElement,b=Jc(e),S=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),M=r?oi(e):pn(e);if(b&&b.draggable&&"mousedown"===e.type&&e.preventDefault(),i||a||S||M)return;if(this._handles.length){const U=f.style;this._rootElementTapHighlight=U.webkitTapHighlightColor||"",U.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(U=>this._updateOnScroll(U)),this._boundaryElement&&(this._boundaryRect=qa(this._boundaryElement));const O=this._previewTemplate;this._pickupPositionInElement=O&&O.template&&!O.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,t,e);const N=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:N.x,y:N.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(t){Fl(this._rootElement,!0,Ru),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const e=this._dropContainer,i=e.getItemIndex(this),r=this._getPointerPositionOnPage(t),a=this._getDragDistance(r),f=e._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:a,dropPoint:r,event:t}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:f,distance:a,dropPoint:r,event:t}),e.drop(this,i,this._initialIndex,this._initialContainer,f,a,r,t),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:e},{x:i,y:r}){let a=this._initialContainer._getSiblingContainerFromPosition(this,t,e);!a&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,e)&&(a=this._initialContainer),a&&a!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=a,this._dropContainer.enter(this,t,e,a===this._initialContainer&&a.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:a,currentIndex:a.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,r),this._dropContainer._sortItem(this,t,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(t,e):this._applyPreviewTransform(t-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_createPreviewElement(){const t=this._previewTemplate,e=this.previewClass,i=t?t.template:null;let r;if(i&&t){const a=t.matchSize?this._initialClientRect:null,f=t.viewContainer.createEmbeddedView(i,t.context);f.detectChanges(),r=am(f,this._document),this._previewRef=f,t.matchSize?If(r,a):r.style.transform=Df(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else r=Pu(this._rootElement),If(r,this._initialClientRect),this._initialTransform&&(r.style.transform=this._initialTransform);return ma(r.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},Ru),ja(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(a=>r.classList.add(a)):r.classList.add(e)),r}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const t=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(t.left,t.top);const e=function Br(n){const t=getComputedStyle(n),e=Xl(t,"transition-property"),i=e.find(b=>"transform"===b||"all"===b);if(!i)return 0;const r=e.indexOf(i),a=Xl(t,"transition-duration"),f=Xl(t,"transition-delay");return Aa(a[r])+Aa(f[r])}(this._preview);return 0===e?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{const r=f=>{(!f||Jc(f)===this._preview&&"transform"===f.propertyName)&&(this._preview?.removeEventListener("transitionend",r),i(),clearTimeout(a))},a=setTimeout(r,1.5*e);this._preview.addEventListener("transitionend",r)}))}_createPlaceholderElement(){const t=this._placeholderTemplate,e=t?t.template:null;let i;return e?(this._placeholderRef=t.viewContainer.createEmbeddedView(e,t.context),this._placeholderRef.detectChanges(),i=am(this._placeholderRef,this._document)):i=Pu(this._rootElement),i.style.pointerEvents="none",i.classList.add("cdk-drag-placeholder"),i}_getPointerPositionInElement(t,e,i){const r=e===this._rootElement?null:e,a=r?r.getBoundingClientRect():t,f=rh(i)?i.targetTouches[0]:i,b=this._getViewportScrollPosition();return{x:a.left-t.left+(f.pageX-a.left-b.left),y:a.top-t.top+(f.pageY-a.top-b.top)}}_getPointerPositionOnPage(t){const e=this._getViewportScrollPosition(),i=rh(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,r=i.pageX-e.left,a=i.pageY-e.top;if(this._ownerSVGElement){const f=this._ownerSVGElement.getScreenCTM();if(f){const b=this._ownerSVGElement.createSVGPoint();return b.x=r,b.y=a,b.matrixTransform(f.inverse())}}return{x:r,y:a}}_getConstrainedPointerPosition(t){const e=this._dropContainer?this._dropContainer.lockAxis:null;let{x:i,y:r}=this.constrainPosition?this.constrainPosition(t,this,this._initialClientRect,this._pickupPositionInElement):t;if("x"===this.lockAxis||"x"===e?r=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===e)&&(i=this._pickupPositionOnPage.x),this._boundaryRect){const{x:a,y:f}=this._pickupPositionInElement,b=this._boundaryRect,{width:S,height:M}=this._getPreviewRect(),O=b.top+f,N=b.bottom-(M-f);i=Mf(i,b.left+a,b.right-(S-a)),r=Mf(r,O,N)}return{x:i,y:r}}_updatePointerDirectionDelta(t){const{x:e,y:i}=t,r=this._pointerDirectionDelta,a=this._pointerPositionAtLastDirectionChange,f=Math.abs(e-a.x),b=Math.abs(i-a.y);return f>this._config.pointerDirectionChangeThreshold&&(r.x=e>a.x?1:-1,a.x=e),b>this._config.pointerDirectionChangeThreshold&&(r.y=i>a.y?1:-1,a.y=i),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,ja(this._rootElement,t))}_removeRootElementListeners(t){t.removeEventListener("mousedown",this._pointerDown,Sf),t.removeEventListener("touchstart",this._pointerDown,Ad),t.removeEventListener("dragstart",this._nativeDragStart,Sf)}_applyRootElementTransform(t,e){const i=Df(t,e),r=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=r.transform&&"none"!=r.transform?r.transform:""),r.transform=es(i,this._initialTransform)}_applyPreviewTransform(t,e){const i=this._previewTemplate?.template?void 0:this._initialTransform,r=Df(t,e);this._preview.style.transform=es(r,i)}_getDragDistance(t){const e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:t,y:e}=this._passiveTransform;if(0===t&&0===e||this.isDragging()||!this._boundaryElement)return;const i=this._rootElement.getBoundingClientRect(),r=this._boundaryElement.getBoundingClientRect();if(0===r.width&&0===r.height||0===i.width&&0===i.height)return;const a=r.left-i.left,f=i.right-r.right,b=r.top-i.top,S=i.bottom-r.bottom;r.width>i.width?(a>0&&(t+=a),f>0&&(t-=f)):t=0,r.height>i.height?(b>0&&(e+=b),S>0&&(e-=S)):e=0,(t!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:t})}_getDragStartDelay(t){const e=this.dragStartDelay;return"number"==typeof e?e:rh(t)?e.touch:e?e.mouse:0}_updateOnScroll(t){const e=this._parentPositions.handleScroll(t);if(e){const i=Jc(t);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&Kl(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=Wd(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(t,e){const i=this._previewContainer||"global";if("parent"===i)return t;if("global"===i){const r=this._document;return e||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return wr(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(t){return this._handles.find(e=>t.target&&(t.target===e||e.contains(t.target)))}}function Df(n,t){return`translate3d(${Math.round(n)}px, ${Math.round(t)}px, 0)`}function Mf(n,t,e){return Math.max(t,Math.min(e,n))}function rh(n){return"t"===n.type[0]}function am(n,t){const e=n.rootNodes;if(1===e.length&&e[0].nodeType===t.ELEMENT_NODE)return e[0];const i=t.createElement("div");return e.forEach(r=>i.appendChild(r)),i}function If(n,t){n.style.width=`${t.width}px`,n.style.height=`${t.height}px`,n.style.transform=Df(t.left,t.top)}function oh(n,t){return Math.max(0,Math.min(t,n))}class hp{constructor(t,e){this._element=t,this._dragDropRegistry=e,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(t){this.withItems(t)}sort(t,e,i,r){const a=this._itemPositions,f=this._getItemIndexFromPointerPosition(t,e,i,r);if(-1===f&&a.length>0)return null;const b="horizontal"===this.orientation,S=a.findIndex(et=>et.drag===t),M=a[f],N=M.clientRect,U=S>f?1:-1,j=this._getItemOffsetPx(a[S].clientRect,N,U),be=this._getSiblingOffsetPx(S,a,U),Ce=a.slice();return function Uh(n,t,e){const i=oh(t,n.length-1),r=oh(e,n.length-1);if(i===r)return;const a=n[i],f=r<i?-1:1;for(let b=i;b!==r;b+=f)n[b]=n[b+f];n[r]=a}(a,S,f),a.forEach((et,Ye)=>{if(Ce[Ye]===et)return;const Be=et.drag===t,it=Be?j:be,At=Be?t.getPlaceholderElement():et.drag.getRootElement();et.offset+=it,b?(At.style.transform=es(`translate3d(${Math.round(et.offset)}px, 0, 0)`,et.initialTransform),Kl(et.clientRect,0,it)):(At.style.transform=es(`translate3d(0, ${Math.round(et.offset)}px, 0)`,et.initialTransform),Kl(et.clientRect,it,0))}),this._previousSwap.overlaps=al(N,e,i),this._previousSwap.drag=M.drag,this._previousSwap.delta=b?r.x:r.y,{previousIndex:S,currentIndex:f}}enter(t,e,i,r){const a=null==r||r<0?this._getItemIndexFromPointerPosition(t,e,i):r,f=this._activeDraggables,b=f.indexOf(t),S=t.getPlaceholderElement();let M=f[a];if(M===t&&(M=f[a+1]),!M&&(null==a||-1===a||a<f.length-1)&&this._shouldEnterAsFirstChild(e,i)&&(M=f[0]),b>-1&&f.splice(b,1),M&&!this._dragDropRegistry.isDragging(M)){const O=M.getRootElement();O.parentElement.insertBefore(S,O),f.splice(a,0,t)}else wr(this._element).appendChild(S),f.push(t);S.style.transform="",this._cacheItemPositions()}withItems(t){this._activeDraggables=t.slice(),this._cacheItemPositions()}withSortPredicate(t){this._sortPredicate=t}reset(){this._activeDraggables.forEach(t=>{const e=t.getRootElement();if(e){const i=this._itemPositions.find(r=>r.drag===t)?.initialTransform;e.style.transform=i||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(t){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(i=>i.drag===t)}updateOnScroll(t,e){this._itemPositions.forEach(({clientRect:i})=>{Kl(i,t,e)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}_cacheItemPositions(){const t="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(e=>{const i=e.getVisibleElement();return{drag:e,offset:0,initialTransform:i.style.transform||"",clientRect:qa(i)}}).sort((e,i)=>t?e.clientRect.left-i.clientRect.left:e.clientRect.top-i.clientRect.top)}_getItemOffsetPx(t,e,i){const r="horizontal"===this.orientation;let a=r?e.left-t.left:e.top-t.top;return-1===i&&(a+=r?e.width-t.width:e.height-t.height),a}_getSiblingOffsetPx(t,e,i){const r="horizontal"===this.orientation,a=e[t].clientRect,f=e[t+-1*i];let b=a[r?"width":"height"]*i;if(f){const S=r?"left":"top",M=r?"right":"bottom";-1===i?b-=f.clientRect[S]-a[M]:b+=a[S]-f.clientRect[M]}return b}_shouldEnterAsFirstChild(t,e){if(!this._activeDraggables.length)return!1;const i=this._itemPositions,r="horizontal"===this.orientation;if(i[0].drag!==this._activeDraggables[0]){const f=i[i.length-1].clientRect;return r?t>=f.right:e>=f.bottom}{const f=i[0].clientRect;return r?t<=f.left:e<=f.top}}_getItemIndexFromPointerPosition(t,e,i,r){const a="horizontal"===this.orientation,f=this._itemPositions.findIndex(({drag:b,clientRect:S})=>{if(b===t)return!1;if(r){const M=a?r.x:r.y;if(b===this._previousSwap.drag&&this._previousSwap.overlaps&&M===this._previousSwap.delta)return!1}return a?e>=Math.floor(S.left)&&e<Math.floor(S.right):i>=Math.floor(S.top)&&i<Math.floor(S.bottom)});return-1!==f&&this._sortPredicate(f,t)?f:-1}}class kc{constructor(t,e,i,r,a){this._dragDropRegistry=e,this._ngZone=r,this._viewportRuler=a,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new Nn.x,this.entered=new Nn.x,this.exited=new Nn.x,this.dropped=new Nn.x,this.sorted=new Nn.x,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=Ia.w0.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new Nn.x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),ta(0,Cd).pipe((0,Co.R)(this._stopScrollTimers)).subscribe(()=>{const f=this._scrollNode,b=this.autoScrollStep;1===this._verticalScrollDirection?f.scrollBy(0,-b):2===this._verticalScrollDirection&&f.scrollBy(0,b),1===this._horizontalScrollDirection?f.scrollBy(-b,0):2===this._horizontalScrollDirection&&f.scrollBy(b,0)})},this.element=wr(t),this._document=i,this.withScrollableParents([this.element]),e.registerDropContainer(this),this._parentPositions=new Lc(i),this._sortStrategy=new hp(this.element,e),this._sortStrategy.withSortPredicate((f,b)=>this.sortPredicate(f,b,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(t,e,i,r){this._draggingStarted(),null==r&&this.sortingDisabled&&(r=this._draggables.indexOf(t)),this._sortStrategy.enter(t,e,i,r),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,e,i,r,a,f,b,S={}){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:i,container:this,previousContainer:r,isPointerOverContainer:a,distance:f,dropPoint:b,event:S})}withItems(t){const e=this._draggables;return this._draggables=t,t.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(e.filter(r=>r.isDragging()).every(r=>-1===t.indexOf(r))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(t){return this._sortStrategy.direction=t,this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){return this._sortStrategy.orientation=t,this}withScrollableParents(t){const e=wr(this.element);return this._scrollableElements=-1===t.indexOf(e)?[e,...t]:t.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(t){return this._isDragging?this._sortStrategy.getItemIndex(t):this._draggables.indexOf(t)}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,e,i,r){if(this.sortingDisabled||!this._clientRect||!nu(this._clientRect,.05,e,i))return;const a=this._sortStrategy.sort(t,e,i,r);a&&this.sorted.next({previousIndex:a.previousIndex,currentIndex:a.currentIndex,container:this,item:t})}_startScrollingIfNecessary(t,e){if(this.autoScrollDisabled)return;let i,r=0,a=0;if(this._parentPositions.positions.forEach((f,b)=>{b===this._document||!f.clientRect||i||nu(f.clientRect,.05,t,e)&&([r,a]=function Nl(n,t,e,i){const r=sh(t,i),a=pp(t,e);let f=0,b=0;if(r){const S=n.scrollTop;1===r?S>0&&(f=1):n.scrollHeight-S>n.clientHeight&&(f=2)}if(a){const S=n.scrollLeft;1===a?S>0&&(b=1):n.scrollWidth-S>n.clientWidth&&(b=2)}return[f,b]}(b,f.clientRect,t,e),(r||a)&&(i=b))}),!r&&!a){const{width:f,height:b}=this._viewportRuler.getViewportSize(),S={width:f,height:b,top:0,right:f,bottom:b,left:0};r=sh(S,e),a=pp(S,t),i=window}i&&(r!==this._verticalScrollDirection||a!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=a,this._scrollNode=i,(r||a)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const t=wr(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const t=wr(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(t).clientRect}_reset(){this._isDragging=!1;const t=wr(this.element).style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(t,e){return null!=this._clientRect&&al(this._clientRect,t,e)}_getSiblingContainerFromPosition(t,e,i){return this._siblings.find(r=>r._canReceive(t,e,i))}_canReceive(t,e,i){if(!this._clientRect||!al(this._clientRect,e,i)||!this.enterPredicate(t,this))return!1;const r=this._getShadowRoot().elementFromPoint(e,i);if(!r)return!1;const a=wr(this.element);return r===a||a.contains(r)}_startReceiving(t,e){const i=this._activeSiblings;!i.has(t)&&e.every(r=>this.enterPredicate(r,this)||this._draggables.indexOf(r)>-1)&&(i.add(t),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(t=>{if(this.isDragging()){const e=this._parentPositions.handleScroll(t);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const t=Wd(wr(this.element));this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const t=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,t))}}function sh(n,t){const{top:e,bottom:i,height:r}=n,a=.05*r;return t>=e-a&&t<=e+a?1:t>=i-a&&t<=i+a?2:0}function pp(n,t){const{left:e,right:i,width:r}=n,a=.05*r;return t>=e-a&&t<=e+a?1:t>=i-a&&t<=i+a?2:0}const Fc=_u({passive:!1,capture:!0});let Tf=(()=>{class n{constructor(e,i){this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=r=>r.isDragging(),this.pointerMove=new Nn.x,this.pointerUp=new Nn.x,this.scroll=new Nn.x,this._preventDefaultWhileDragging=r=>{this._activeDragInstances.length>0&&r.preventDefault()},this._persistentTouchmoveListener=r=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&r.preventDefault(),this.pointerMove.next(r))},this._document=i}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,Fc)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,Fc)}startDragging(e,i){if(!(this._activeDragInstances.indexOf(e)>-1)&&(this._activeDragInstances.push(e),1===this._activeDragInstances.length)){const r=i.type.startsWith("touch");this._globalListeners.set(r?"touchend":"mouseup",{handler:a=>this.pointerUp.next(a),options:!0}).set("scroll",{handler:a=>this.scroll.next(a),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:Fc}),r||this._globalListeners.set("mousemove",{handler:a=>this.pointerMove.next(a),options:Fc}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((a,f)=>{this._document.addEventListener(f,a.handler,a.options)})})}}stopDragging(e){const i=this._activeDragInstances.indexOf(e);i>-1&&(this._activeDragInstances.splice(i,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(e){return this._activeDragInstances.indexOf(e)>-1}scrolled(e){const i=[this.scroll];return e&&e!==this._document&&i.push(new gr.y(r=>this._ngZone.runOutsideAngular(()=>{const f=b=>{this._activeDragInstances.length&&r.next(b)};return e.addEventListener("scroll",f,!0),()=>{e.removeEventListener("scroll",f,!0)}}))),(0,As.T)(...i)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,i)=>{this._document.removeEventListener(i,e.handler,e.options)}),this._globalListeners.clear()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.R0b),o.LFG(he))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Vh={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let mp=(()=>{class n{constructor(e,i,r,a){this._document=e,this._ngZone=i,this._viewportRuler=r,this._dragDropRegistry=a}createDrag(e,i=Vh){return new Ou(e,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new kc(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(he),o.LFG(o.R0b),o.LFG(Zu),o.LFG(Tf))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Lu=new o.OlP("CDK_DRAG_PARENT"),av=new o.OlP("CDK_DRAG_CONFIG"),cv=new o.OlP("CdkDropList"),cm=new o.OlP("CdkDragHandle"),dv=new o.OlP("CdkDragPlaceholder"),hv=new o.OlP("CdkDragPreview");let pv=(()=>{class n{constructor(e,i,r,a,f,b,S,M,O,N,U){this.element=e,this.dropContainer=i,this._ngZone=a,this._viewContainerRef=f,this._dir=S,this._changeDetectorRef=O,this._selfHandle=N,this._parentDrag=U,this._destroyed=new Nn.x,this.started=new o.vpe,this.released=new o.vpe,this.ended=new o.vpe,this.entered=new o.vpe,this.exited=new o.vpe,this.dropped=new o.vpe,this.moved=new gr.y(j=>{const be=this._dragRef.moved.pipe((0,kn.U)(Ce=>({source:this,pointerPosition:Ce.pointerPosition,event:Ce.event,delta:Ce.delta,distance:Ce.distance}))).subscribe(j);return()=>{be.unsubscribe()}}),this._dragRef=M.createDrag(e,{dragStartThreshold:b&&null!=b.dragStartThreshold?b.dragStartThreshold:5,pointerDirectionChangeThreshold:b&&null!=b.pointerDirectionChangeThreshold?b.pointerDirectionChangeThreshold:5,zIndex:b?.zIndex}),this._dragRef.data=this,n._dragInstances.push(this),b&&this._assignDefaults(b),i&&(this._dragRef._withDropContainer(i._dropListRef),i.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(e){this._disabled=Ei(e),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(e){this._dragRef.setFreeDragPosition(e)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,uo.q)(1),(0,Co.R)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(e){const i=e.rootElementSelector,r=e.freeDragPosition;i&&!i.firstChange&&this._updateRootElement(),r&&!r.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const e=n._dragInstances.indexOf(this);e>-1&&n._dragInstances.splice(e,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const e=this.element.nativeElement;let i=e;this.rootElementSelector&&(i=void 0!==e.closest?e.closest(this.rootElementSelector):e.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(i||e)}_getBoundaryElement(){const e=this.boundaryElement;return e?"string"==typeof e?this.element.nativeElement.closest(e):wr(e):null}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){const i=this._dir,r=this.dragStartDelay,a=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,f=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.dragStartDelay="object"==typeof r&&r?r:Fi(r),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(a).withPreviewTemplate(f).withPreviewContainer(this.previewContainer||"global"),i&&e.withDirection(i.value)}}),e.beforeStarted.pipe((0,uo.q)(1)).subscribe(()=>{if(this._parentDrag)return void e.withParent(this._parentDrag._dragRef);let i=this.element.nativeElement.parentElement;for(;i;){if(i.classList.contains("cdk-drag")){e.withParent(n._dragInstances.find(r=>r.element.nativeElement===i)?._dragRef||null);break}i=i.parentElement}})}_handleEvents(e){e.started.subscribe(i=>{this.started.emit({source:this,event:i.event}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(i=>{this.released.emit({source:this,event:i.event})}),e.ended.subscribe(i=>{this.ended.emit({source:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(i=>{this.entered.emit({container:i.container.data,item:this,currentIndex:i.currentIndex})}),e.exited.subscribe(i=>{this.exited.emit({container:i.container.data,item:this})}),e.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,isPointerOverContainer:i.isPointerOverContainer,item:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event})})}_assignDefaults(e){const{lockAxis:i,dragStartDelay:r,constrainPosition:a,previewClass:f,boundaryElement:b,draggingDisabled:S,rootElementSelector:M,previewContainer:O}=e;this.disabled=S??!1,this.dragStartDelay=r||0,i&&(this.lockAxis=i),a&&(this.constrainPosition=a),f&&(this.previewClass=f),b&&(this.boundaryElement=b),M&&(this.rootElementSelector=M),O&&(this.previewContainer=O)}_setupHandlesListener(){this._handles.changes.pipe(Yl(this._handles),no(e=>{const i=e.filter(r=>r._parentDrag===this).map(r=>r.element);this._selfHandle&&this.rootElementSelector&&i.push(this.element),this._dragRef.withHandles(i)}),(0,br.w)(e=>(0,As.T)(...e.map(i=>i._stateChanges.pipe(Yl(i))))),(0,Co.R)(this._destroyed)).subscribe(e=>{const i=this._dragRef,r=e.element.nativeElement;e.disabled?i.disableHandle(r):i.enableHandle(r)})}}return n._dragInstances=[],n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(cv,12),o.Y36(he),o.Y36(o.R0b),o.Y36(o.s_b),o.Y36(av,8),o.Y36(Ll,8),o.Y36(mp),o.Y36(o.sBO),o.Y36(cm,10),o.Y36(Lu,12))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkDrag",""]],contentQueries:function(e,i,r){if(1&e&&(o.Suo(r,hv,5),o.Suo(r,dv,5),o.Suo(r,cm,5)),2&e){let a;o.iGM(a=o.CRH())&&(i._previewTemplate=a.first),o.iGM(a=o.CRH())&&(i._placeholderTemplate=a.first),o.iGM(a=o.CRH())&&(i._handles=a)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(e,i){2&e&&o.ekj("cdk-drag-disabled",i.disabled)("cdk-drag-dragging",i._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],standalone:!0,features:[o._Bn([{provide:Lu,useExisting:n}]),o.TTD]}),n})(),db=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[mp],imports:[Wu]}),n})();var ah=W(4351);class yg{}class U_{}class id{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const r=e.slice(0,i),a=r.toLowerCase(),f=e.slice(i+1).trim();this.maybeSetNormalizedName(r,a),this.headers.has(a)?this.headers.get(a).push(f):this.headers.set(a,[f])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let i=t[e];const r=e.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof id?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new id;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof id?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":const a=t.value;if(a){let f=this.headers.get(e);if(!f)return;f=f.filter(b=>-1===a.indexOf(b)),0===f.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,f)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class V_{encodeKey(t){return _v(t)}encodeValue(t){return _v(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const fb=/%(\d[a-f0-9])/gi,gv={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function _v(n){return encodeURIComponent(n).replace(fb,(t,e)=>gv[e]??t)}function vg(n){return`${n}`}class Gh{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new V_,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function hb(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const a=r.indexOf("="),[f,b]=-1==a?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,a)),t.decodeValue(r.slice(a+1))],S=e.get(f)||[];S.push(b),e.set(f,S)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const i=t.fromObject[e],r=Array.isArray(i)?i.map(vg):[vg(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(i=>{const r=t[i];Array.isArray(r)?r.forEach(a=>{e.push({param:i,value:a,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Gh({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(vg(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let i=this.map.get(t.param)||[];const r=i.indexOf(vg(t.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class pb{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function um(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function bg(n){return typeof Blob<"u"&&n instanceof Blob}function dm(n){return typeof FormData<"u"&&n instanceof FormData}class Af{constructor(t,e,i,r){let a;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function mb(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,a=r):a=i,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new id),this.context||(this.context=new pb),this.params){const f=this.params.toString();if(0===f.length)this.urlWithParams=e;else{const b=e.indexOf("?");this.urlWithParams=e+(-1===b?"?":b<e.length-1?"&":"")+f}}else this.params=new Gh,this.urlWithParams=e}serializeBody(){return null===this.body?null:um(this.body)||bg(this.body)||dm(this.body)||function N1(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Gh?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||dm(this.body)?null:bg(this.body)?this.body.type||null:um(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Gh?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,a=void 0!==t.body?t.body:this.body,f=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,b=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let S=t.headers||this.headers,M=t.params||this.params;const O=t.context??this.context;return void 0!==t.setHeaders&&(S=Object.keys(t.setHeaders).reduce((N,U)=>N.set(U,t.setHeaders[U]),S)),t.setParams&&(M=Object.keys(t.setParams).reduce((N,U)=>N.set(U,t.setParams[U]),M)),new Af(e,i,a,{params:M,headers:S,context:O,reportProgress:b,responseType:r,withCredentials:f})}}var Bl=(()=>((Bl=Bl||{})[Bl.Sent=0]="Sent",Bl[Bl.UploadProgress=1]="UploadProgress",Bl[Bl.ResponseHeader=2]="ResponseHeader",Bl[Bl.DownloadProgress=3]="DownloadProgress",Bl[Bl.Response=4]="Response",Bl[Bl.User=5]="User",Bl))();class xg{constructor(t,e=200,i="OK"){this.headers=t.headers||new id,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class wg extends xg{constructor(t={}){super(t),this.type=Bl.ResponseHeader}clone(t={}){return new wg({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class hm extends xg{constructor(t={}){super(t),this.type=Bl.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new hm({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class G_ extends xg{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function fm(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Nc=(()=>{class n{constructor(e){this.handler=e}request(e,i,r={}){let a;if(e instanceof Af)a=e;else{let S,M;S=r.headers instanceof id?r.headers:new id(r.headers),r.params&&(M=r.params instanceof Gh?r.params:new Gh({fromObject:r.params})),a=new Af(e,i,void 0!==r.body?r.body:null,{headers:S,context:r.context,params:M,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const f=(0,an.of)(a).pipe((0,ah.b)(S=>this.handler.handle(S)));if(e instanceof Af||"events"===r.observe)return f;const b=f.pipe((0,co.h)(S=>S instanceof hm));switch(r.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return b.pipe((0,kn.U)(S=>{if(null!==S.body&&!(S.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return S.body}));case"blob":return b.pipe((0,kn.U)(S=>{if(null!==S.body&&!(S.body instanceof Blob))throw new Error("Response is not a Blob.");return S.body}));case"text":return b.pipe((0,kn.U)(S=>{if(null!==S.body&&"string"!=typeof S.body)throw new Error("Response is not a string.");return S.body}));default:return b.pipe((0,kn.U)(S=>S.body))}case"response":return b;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new Gh).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,fm(r,i))}post(e,i,r={}){return this.request("POST",e,fm(r,i))}put(e,i,r={}){return this.request("PUT",e,fm(r,i))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(yg))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function pm(n,t){return t(n)}function Eg(n,t){return(e,i)=>t.intercept(e,{handle:r=>n(r,i)})}const gb=new o.OlP("HTTP_INTERCEPTORS"),gp=new o.OlP("HTTP_INTERCEPTOR_FNS");function vv(){let n=null;return(t,e)=>(null===n&&(n=((0,o.f3M)(gb,{optional:!0})??[]).reduceRight(Eg,pm)),n(t,e))}let bv=(()=>{class n extends yg{constructor(e,i){super(),this.backend=e,this.injector=i,this.chain=null}handle(e){if(null===this.chain){const i=Array.from(new Set(this.injector.get(gp)));this.chain=i.reduceRight((r,a)=>function mm(n,t,e){return(i,r)=>e.runInContext(()=>t(i,a=>n(a,r)))}(r,a,this.injector),pm)}return this.chain(e,i=>this.backend.handle(i))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(U_),o.LFG(o.lqb))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const wv=/^\)\]\}',?\n/;let Ev=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new gr.y(i=>{const r=this.xhrFactory.build();if(r.open(e.method,e.urlWithParams),e.withCredentials&&(r.withCredentials=!0),e.headers.forEach((j,be)=>r.setRequestHeader(j,be.join(","))),e.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const j=e.detectContentTypeHeader();null!==j&&r.setRequestHeader("Content-Type",j)}if(e.responseType){const j=e.responseType.toLowerCase();r.responseType="json"!==j?j:"text"}const a=e.serializeBody();let f=null;const b=()=>{if(null!==f)return f;const j=r.statusText||"OK",be=new id(r.getAllResponseHeaders()),Ce=function $_(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(r)||e.url;return f=new wg({headers:be,status:r.status,statusText:j,url:Ce}),f},S=()=>{let{headers:j,status:be,statusText:Ce,url:et}=b(),Ye=null;204!==be&&(Ye=typeof r.response>"u"?r.responseText:r.response),0===be&&(be=Ye?200:0);let Be=be>=200&&be<300;if("json"===e.responseType&&"string"==typeof Ye){const it=Ye;Ye=Ye.replace(wv,"");try{Ye=""!==Ye?JSON.parse(Ye):null}catch(At){Ye=it,Be&&(Be=!1,Ye={error:At,text:Ye})}}Be?(i.next(new hm({body:Ye,headers:j,status:be,statusText:Ce,url:et||void 0})),i.complete()):i.error(new G_({error:Ye,headers:j,status:be,statusText:Ce,url:et||void 0}))},M=j=>{const{url:be}=b(),Ce=new G_({error:j,status:r.status||0,statusText:r.statusText||"Unknown Error",url:be||void 0});i.error(Ce)};let O=!1;const N=j=>{O||(i.next(b()),O=!0);let be={type:Bl.DownloadProgress,loaded:j.loaded};j.lengthComputable&&(be.total=j.total),"text"===e.responseType&&!!r.responseText&&(be.partialText=r.responseText),i.next(be)},U=j=>{let be={type:Bl.UploadProgress,loaded:j.loaded};j.lengthComputable&&(be.total=j.total),i.next(be)};return r.addEventListener("load",S),r.addEventListener("error",M),r.addEventListener("timeout",M),r.addEventListener("abort",M),e.reportProgress&&(r.addEventListener("progress",N),null!==a&&r.upload&&r.upload.addEventListener("progress",U)),r.send(a),i.next({type:Bl.Sent}),()=>{r.removeEventListener("error",M),r.removeEventListener("abort",M),r.removeEventListener("load",S),r.removeEventListener("timeout",M),e.reportProgress&&(r.removeEventListener("progress",N),null!==a&&r.upload&&r.upload.removeEventListener("progress",U)),r.readyState!==r.DONE&&r.abort()}})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Su))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const gm=new o.OlP("XSRF_ENABLED"),Cv="XSRF-TOKEN",Sv=new o.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>Cv}),Dv="X-XSRF-TOKEN",Mv=new o.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>Dv});class Iv{}let bb=(()=>{class n{constructor(e,i,r){this.doc=e,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=yr(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(he),o.LFG(o.Lbi),o.LFG(Sv))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function xb(n,t){const e=n.url.toLowerCase();if(!(0,o.f3M)(gm)||"GET"===n.method||"HEAD"===n.method||e.startsWith("http://")||e.startsWith("https://"))return t(n);const i=(0,o.f3M)(Iv).getToken(),r=(0,o.f3M)(Mv);return null!=i&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),t(n)}var Ya=(()=>((Ya=Ya||{})[Ya.Interceptors=0]="Interceptors",Ya[Ya.LegacyInterceptors=1]="LegacyInterceptors",Ya[Ya.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Ya[Ya.NoXsrfProtection=3]="NoXsrfProtection",Ya[Ya.JsonpSupport=4]="JsonpSupport",Ya[Ya.RequestsMadeViaParent=5]="RequestsMadeViaParent",Ya))();function _p(n,t){return{\u0275kind:n,\u0275providers:t}}function $1(...n){const t=[Nc,Ev,bv,{provide:yg,useExisting:bv},{provide:U_,useExisting:Ev},{provide:gp,useValue:xb,multi:!0},{provide:gm,useValue:!0},{provide:Iv,useClass:bb}];for(const e of n)t.push(...e.\u0275providers);return(0,o.MR2)(t)}const _m=new o.OlP("LEGACY_INTERCEPTOR_FN");function H1({cookieName:n,headerName:t}){const e=[];return void 0!==n&&e.push({provide:Sv,useValue:n}),void 0!==t&&e.push({provide:Mv,useValue:t}),_p(Ya.CustomXsrfConfiguration,e)}let Cb=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[$1(_p(Ya.LegacyInterceptors,[{provide:_m,useFactory:vv},{provide:gp,useExisting:_m,multi:!0}]),H1({cookieName:Cv,headerName:Dv}))]}),n})();function ll(...n){const t=(0,Mh.jO)(n),{args:e,keys:i}=im(n),r=new gr.y(a=>{const{length:f}=e;if(!f)return void a.complete();const b=new Array(f);let S=f,M=f;for(let O=0;O<f;O++){let N=!1;(0,Rr.Xf)(e[O]).subscribe((0,il.x)(a,U=>{N||(N=!0,M--),b[O]=U},()=>S--,void 0,()=>{(!S||!N)&&(M||a.next(i?fg(i,b):b),a.complete())}))}});return t?r.pipe(pu(t)):r}let rd=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Qsj),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n}),n})(),Fu=(()=>{class n extends rd{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,features:[o.qOj]}),n})();const js=new o.OlP("NgValueAccessor"),yp={provide:js,useExisting:(0,o.Gpc)(()=>z),multi:!0},ae=new o.OlP("CompositionEventMode");let z=(()=>{class n extends rd{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function vp(){const n=Ae()?Ae().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Qsj),o.Y36(o.SBq),o.Y36(ae,8))},n.\u0275dir=o.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&o.NdJ("input",function(a){return i._handleInput(a.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(a){return i._compositionEnd(a.target.value)})},features:[o._Bn([yp]),o.qOj]}),n})();function K(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function te(n){return null!=n&&"number"==typeof n.length}const re=new o.OlP("NgValidators"),Ue=new o.OlP("NgAsyncValidators"),pt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Rt{static min(t){return tn(t)}static max(t){return Mn(t)}static required(t){return function Ni(n){return K(n.value)?{required:!0}:null}(t)}static requiredTrue(t){return function Cr(n){return!0===n.value?null:{required:!0}}(t)}static email(t){return function ai(n){return K(n.value)||pt.test(n.value)?null:{email:!0}}(t)}static minLength(t){return function zr(n){return t=>K(t.value)||!te(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function ga(n){return t=>te(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static pattern(t){return function Es(n){if(!n)return qs;let t,e;return"string"==typeof n?(e="","^"!==n.charAt(0)&&(e+="^"),e+=n,"$"!==n.charAt(n.length-1)&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(K(i.value))return null;const r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return yu(t)}static composeAsync(t){return Kn(t)}}function tn(n){return t=>{if(K(t.value)||K(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function Mn(n){return t=>{if(K(t.value)||K(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function qs(n){return null}function od(n){return null!=n}function sd(n){return(0,o.QGY)(n)?(0,Hs.D)(n):n}function ad(n){let t={};return n.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function _a(n,t){return t.map(e=>e(n))}function ld(n){return n.map(t=>function Pd(n){return!n.validate}(t)?t:e=>t.validate(e))}function yu(n){if(!n)return null;const t=n.filter(od);return 0==t.length?null:function(e){return ad(_a(e,t))}}function fn(n){return null!=n?yu(ld(n)):null}function Kn(n){if(!n)return null;const t=n.filter(od);return 0==t.length?null:function(e){return ll(_a(e,t).map(sd)).pipe((0,kn.U)(ad))}}function Gi(n){return null!=n?Kn(ld(n)):null}function xr(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function Qr(n){return n._rawValidators}function Ur(n){return n._rawAsyncValidators}function ho(n){return n?Array.isArray(n)?n:[n]:[]}function ya(n,t){return Array.isArray(n)?n.includes(t):n===t}function Za(n,t){const e=ho(t);return ho(n).forEach(r=>{ya(e,r)||e.push(r)}),e}function Ar(n,t){return ho(t).filter(e=>!ya(n,e))}class cl{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=fn(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Gi(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class vl extends cl{get formDirective(){return null}get path(){return null}}class Fs extends cl{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class cd{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let uh=(()=>{class n extends cd{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Fs,2))},n.\u0275dir=o.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&o.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[o.qOj]}),n})();const Z_="VALID",Mg="INVALID",W_="PENDING",Av="DISABLED";function Mb(n){return(bl(n)?n.validators:n)||null}function Pv(n,t){return(bl(t)?t.asyncValidators:n)||null}function bl(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class X1{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Z_}get invalid(){return this.status===Mg}get pending(){return this.status==W_}get disabled(){return this.status===Av}get enabled(){return this.status!==Av}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Za(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Za(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Ar(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Ar(t,this._rawAsyncValidators))}hasValidator(t){return ya(this._rawValidators,t)}hasAsyncValidator(t){return ya(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=W_,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Av,this.errors=null,this._forEachChild(i=>{i.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Z_,this._forEachChild(i=>{i.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Z_||this.status===W_)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Av:Z_}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=W_,this._hasOwnPendingAsyncValidator=!0;const e=sd(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new o.vpe,this.statusChanges=new o.vpe}_calculateStatus(){return this._allControlsDisabled()?Av:this.errors?Mg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(W_)?W_:this._anyControlsHaveStatus(Mg)?Mg:Z_}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){bl(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function CS(n){return Array.isArray(n)?fn(n):n||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function SS(n){return Array.isArray(n)?Gi(n):n||null}(this._rawAsyncValidators)}}class Rv extends X1{constructor(t,e,i){super(Mb(e),Pv(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){(function W1(n,t,e){n._forEachChild((i,r)=>{if(void 0===e[r])throw new o.vHH(1002,"")})})(this,0,t),Object.keys(t).forEach(i=>{(function Ib(n,t,e){const i=n.controls;if(!(t?Object.keys(i):i).length)throw new o.vHH(1e3,"");if(!i[e])throw new o.vHH(1001,"")})(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(i=>{const r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,a)=>{i=e(i,r,a)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}const Ig=new o.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Ov}),Ov="always";function J_(n,t,e=Ov){ey(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||"always"===e)&&t.valueAccessor.setDisabledState?.(n.disabled),function MS(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&hh(n,t)})}(n,t),function fh(n,t){const e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function J1(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&hh(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function Ab(n,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function Q_(n,t,e=!0){const i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),dd(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Tb(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function ey(n,t){const e=Qr(n);null!==t.validator?n.setValidators(xr(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const i=Ur(n);null!==t.asyncValidator?n.setAsyncValidators(xr(i,t.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();Tb(t._rawValidators,r),Tb(t._rawAsyncValidators,r)}function dd(n,t){let e=!1;if(null!==n){if(null!==t.validator){const r=Qr(n);if(Array.isArray(r)&&r.length>0){const a=r.filter(f=>f!==t.validator);a.length!==r.length&&(e=!0,n.setValidators(a))}}if(null!==t.asyncValidator){const r=Ur(n);if(Array.isArray(r)&&r.length>0){const a=r.filter(f=>f!==t.asyncValidator);a.length!==r.length&&(e=!0,n.setAsyncValidators(a))}}}const i=()=>{};return Tb(t._rawValidators,i),Tb(t._rawAsyncValidators,i),e}function hh(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Rd(n,t){ey(n,t)}function ew(n,t){n._syncPendingControls(),t.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}const tw={provide:vl,useExisting:(0,o.Gpc)(()=>iy)},wp=(()=>Promise.resolve())();let iy=(()=>{class n extends vl{constructor(e,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new o.vpe,this.form=new Rv({},fn(e),Gi(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){wp.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),J_(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){wp.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){wp.then(()=>{const i=this._findContainer(e.path),r=new Rv({});Rd(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){wp.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){wp.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,ew(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(re,10),o.Y36(Ue,10),o.Y36(Ig,8))},n.\u0275dir=o.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,i){1&e&&o.NdJ("submit",function(a){return i.onSubmit(a)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[o._Bn([tw]),o.qOj]}),n})();function Rb(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function Ob(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const kv=class extends X1{constructor(t=null,e,i){super(Mb(e),Pv(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),bl(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=Ob(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Rb(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Rb(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){Ob(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},iw={provide:Fs,useExisting:(0,o.Gpc)(()=>Tg)},rw=(()=>Promise.resolve())();let Tg=(()=>{class n extends Fs{constructor(e,i,r,a,f,b){super(),this._changeDetectorRef=f,this.callSetDisabledState=b,this.control=new kv,this._registered=!1,this.update=new o.vpe,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function Lv(n,t){if(!t)return null;let e,i,r;return Array.isArray(t),t.forEach(a=>{a.constructor===z?e=a:function ny(n){return Object.getPrototypeOf(n.constructor)===Fu}(a)?i=a:r=a}),r||i||e||null}(0,a)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function ty(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){J_(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){rw.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,r=0!==i&&(0,o.D6c)(i);rw.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function K_(n,t){return[...t.path,n]}(e,this._parent):[e]}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(vl,9),o.Y36(re,10),o.Y36(Ue,10),o.Y36(js,10),o.Y36(o.sBO,8),o.Y36(Ig,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[o._Bn([iw]),o.qOj,o.TTD]}),n})();const NS={provide:js,useExisting:(0,o.Gpc)(()=>Nv),multi:!0};let Nv=(()=>{class n extends Fu{writeValue(e){this.setProperty("value",e??"")}registerOnChange(e){this.onChange=i=>{e(""==i?null:parseFloat(i))}}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,i){1&e&&o.NdJ("input",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},features:[o._Bn([NS]),o.qOj]}),n})(),ow=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const Nb=new o.OlP("NgModelWithFormControlWarning"),GS={provide:vl,useExisting:(0,o.Gpc)(()=>ry)};let ry=(()=>{class n extends vl{constructor(e,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new o.vpe,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(dd(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return J_(i,e,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){Q_(e.control||null,e,!1),function AS(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,ew(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,r=this.form.get(e.path);i!==r&&(Q_(i||null,e),(n=>n instanceof kv)(r)&&(J_(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);Rd(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function Q1(n,t){return dd(n,t)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ey(this.form,this),this._oldForm&&dd(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(re,10),o.Y36(Ue,10),o.Y36(Ig,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(e,i){1&e&&o.NdJ("submit",function(a){return i.onSubmit(a)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[o._Bn([GS]),o.qOj,o.TTD]}),n})();function $b(n){return"number"==typeof n?n:parseFloat(n)}let Pg=(()=>{class n{constructor(){this._validator=qs}ngOnChanges(e){if(this.inputName in e){const i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):qs,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,features:[o.TTD]}),n})();const Sr={provide:re,useExisting:(0,o.Gpc)(()=>Uv),multi:!0};let Uv=(()=>{class n extends Pg{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=e=>$b(e),this.createValidator=e=>Mn(e)}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(e,i){2&e&&o.uIk("max",i._enabled?i.max:null)},inputs:{max:"max"},features:[o._Bn([Sr]),o.qOj]}),n})();const HS={provide:re,useExisting:(0,o.Gpc)(()=>Vv),multi:!0};let Vv=(()=>{class n extends Pg{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=e=>$b(e),this.createValidator=e=>tn(e)}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(e,i){2&e&&o.uIk("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[o._Bn([HS]),o.qOj]}),n})(),gw=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[ow]}),n})(),ay=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Ig,useValue:e.callSetDisabledState??Ov}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[gw]}),n})(),WS=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Nb,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Ig,useValue:e.callSetDisabledState??Ov}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[gw]}),n})();const eD=["text"];function _w(n,t){if(1&n&&o._UZ(0,"mat-pseudo-checkbox",5),2&n){const e=o.oxw();o.Q6J("state",e.selected?"checked":"unchecked")("disabled",e.disabled)}}function yw(n,t){if(1&n&&(o.TgZ(0,"span",6),o._uU(1),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.hij("(",e.group.label,")")}}const vw=[[["mat-icon"]],"*"],tD=["mat-icon","*"],OA=new o.OlP("mat-sanity-checks",{providedIn:"root",factory:function RA(){return!0}});let Pa=(()=>{class n{constructor(e,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!jf()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(kl),o.LFG(OA,8),o.LFG(he))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Mu,Mu]}),n})();function $v(n){return class extends n{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=Ei(t)}}}function bm(n,t){return class extends n{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const i=e||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function Hv(n){return class extends n{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Ei(t)}}}function Wb(n,t=0){return class extends n{constructor(...e){super(...e),this._tabIndex=t,this.defaultTabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?Fi(e):this.defaultTabIndex}}}function Xb(n){return class extends n{constructor(...t){super(...t),this.errorState=!1}updateErrorState(){const t=this.errorState,a=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);a!==t&&(this.errorState=a,this.stateChanges.next())}}}let bw=(()=>{class n{isErrorState(e,i){return!!(e&&e.invalid&&(e.touched||i&&i.submitted))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Kb{constructor(t,e,i,r=!1){this._renderer=t,this.element=e,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const xw=_u({passive:!0,capture:!0});class ww{constructor(){this._events=new Map,this._delegateEventHandler=t=>{const e=Jc(t);e&&this._events.get(t.type)?.forEach((i,r)=>{(r===e||r.contains(e))&&i.forEach(a=>a.handleEvent(t))})}}addHandler(t,e,i,r){const a=this._events.get(e);if(a){const f=a.get(i);f?f.add(r):a.set(i,new Set([r]))}else this._events.set(e,new Map([[i,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,xw)})}removeHandler(t,e,i){const r=this._events.get(t);if(!r)return;const a=r.get(e);!a||(a.delete(i),0===a.size&&r.delete(e),0===r.size&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,xw)))}}const Jb={enterDuration:225,exitDuration:150},Ew=_u({passive:!0,capture:!0}),Cw=["mousedown","touchstart"],Yv=["mouseup","mouseleave","touchend","touchcancel"];class ly{constructor(t,e,i,r){this._target=t,this._ngZone=e,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=wr(i))}fadeInRipple(t,e,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),a={...Jb,...i.animation};i.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const f=i.radius||function Sw(n,t,e){const i=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(i*i+r*r)}(t,e,r),b=t-r.left,S=e-r.top,M=a.enterDuration,O=document.createElement("div");O.classList.add("mat-ripple-element"),O.style.left=b-f+"px",O.style.top=S-f+"px",O.style.height=2*f+"px",O.style.width=2*f+"px",null!=i.color&&(O.style.backgroundColor=i.color),O.style.transitionDuration=`${M}ms`,this._containerElement.appendChild(O);const N=window.getComputedStyle(O),j=N.transitionDuration,be="none"===N.transitionProperty||"0s"===j||"0s, 0s"===j||0===r.width&&0===r.height,Ce=new Kb(this,O,i,be);O.style.transform="scale3d(1, 1, 1)",Ce.state=0,i.persistent||(this._mostRecentTransientRipple=Ce);let et=null;return!be&&(M||a.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Ye=()=>this._finishRippleTransition(Ce),Be=()=>this._destroyRipple(Ce);O.addEventListener("transitionend",Ye),O.addEventListener("transitioncancel",Be),et={onTransitionEnd:Ye,onTransitionCancel:Be}}),this._activeRipples.set(Ce,et),(be||!M)&&this._finishRippleTransition(Ce),Ce}fadeOutRipple(t){if(2===t.state||3===t.state)return;const e=t.element,i={...Jb,...t.config.animation};e.style.transitionDuration=`${i.exitDuration}ms`,e.style.opacity="0",t.state=2,(t._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=wr(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,Cw.forEach(i=>{ly._eventManager.addHandler(this._ngZone,i,e,this)}))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Yv.forEach(e=>{this._triggerElement.addEventListener(e,this,Ew)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){0===t.state?this._startFadeOutTransition(t):2===t.state&&this._destroyRipple(t)}_startFadeOutTransition(t){const e=t===this._mostRecentTransientRipple,{persistent:i}=t.config;t.state=1,!i&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){const e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=3,null!==e&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){const e=pn(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!oi(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const t=this._triggerElement;t&&(Cw.forEach(e=>ly._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&Yv.forEach(e=>t.removeEventListener(e,this,Ew)))}}ly._eventManager=new ww;const Dw=new o.OlP("mat-ripple-global-options");let Ng=(()=>{class n{constructor(e,i,r,a,f){this._elementRef=e,this._animationMode=f,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=a||{},this._rippleRenderer=new ly(this,i,e,r)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,i=0,r){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...e})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.R0b),o.Y36(Ga),o.Y36(Dw,8),o.Y36(o.QbO,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,i){2&e&&o.ekj("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),Zv=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Pa,Pa]}),n})(),aD=(()=>{class n{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.QbO,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(e,i){2&e&&o.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===i.state)("mat-pseudo-checkbox-checked","checked"===i.state)("mat-pseudo-checkbox-disabled",i.disabled)("_mat-animation-noopable","NoopAnimations"===i._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(e,i){},styles:['.mat-pseudo-checkbox{border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}.mat-pseudo-checkbox-checked::after{top:2.7px;width:10px;height:4px}'],encapsulation:2,changeDetection:0}),n})(),lD=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Pa]}),n})();const Mw=new o.OlP("MAT_OPTION_PARENT_COMPONENT"),Qb=new o.OlP("MatOptgroup");let uD=0;class Iw{constructor(t,e=!1){this.source=t,this.isUserInput=e}}let dD=(()=>{class n{constructor(e,i,r,a){this._element=e,this._changeDetectorRef=i,this._parent=r,this.group=a,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+uD++,this.onSelectionChange=new o.vpe,this._stateChanges=new Nn.x}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=Ei(e)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(e,i){const r=this._getHostElement();"function"==typeof r.focus&&r.focus(i)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(13===e.keyCode||32===e.keyCode)&&!Qc(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=e)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new Iw(this,e))}}return n.\u0275fac=function(e){o.$Z()},n.\u0275dir=o.lG2({type:n,viewQuery:function(e,i){if(1&e&&o.Gf(eD,7),2&e){let r;o.iGM(r=o.CRH())&&(i._text=r.first)}},inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),n})(),Tw=(()=>{class n extends dD{constructor(e,i,r,a){super(e,i,r,a)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.sBO),o.Y36(Mw,8),o.Y36(Qb,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-mdc-option","mat-mdc-focus-indicator","mdc-list-item"],hostVars:12,hostBindings:function(e,i){1&e&&o.NdJ("click",function(){return i._selectViaInteraction()})("keydown",function(a){return i._handleKeydown(a)}),2&e&&(o.Ikx("id",i.id),o.uIk("tabindex",i._getTabIndex())("aria-selected",i._getAriaSelected())("aria-disabled",i.disabled.toString()),o.ekj("mdc-list-item--selected",i.selected)("mat-mdc-option-multiple",i.multiple)("mat-mdc-option-active",i.active)("mdc-list-item--disabled",i.disabled))},exportAs:["matOption"],features:[o.qOj],ngContentSelectors:tD,decls:7,vars:4,consts:[["class","mat-mdc-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mdc-list-item__primary-text"],["text",""],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-mdc-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-mdc-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(e,i){1&e&&(o.F$t(vw),o.YNc(0,_w,1,2,"mat-pseudo-checkbox",0),o.Hsn(1),o.TgZ(2,"span",1,2),o.Hsn(4,1),o.qZA(),o.YNc(5,yw,2,1,"span",3),o._UZ(6,"div",4)),2&e&&(o.Q6J("ngIf",i.multiple),o.xp6(5),o.Q6J("ngIf",i.group&&i.group._inert),o.xp6(1),o.Q6J("matRippleTrigger",i._getHostElement())("matRippleDisabled",i.disabled||i.disableRipple))},dependencies:[Ng,ci,aD],styles:['.mat-mdc-option{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);min-height:48px}.mat-mdc-option:focus{outline:none}[dir=rtl] .mat-mdc-option,.mat-mdc-option[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-option.mdc-list-item{align-items:center}.mat-mdc-option.mdc-list-item--disabled{opacity:.38;cursor:default}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox{margin-right:0;margin-left:16px}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-active::before{content:""}'],encapsulation:2,changeDetection:0}),n})(),Wv=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Zv,Kr,Pa,lD]}),n})();const Aw=["mat-button",""],tx=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],fD=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],_D=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],nx=bm($v(Hv(class{constructor(n){this._elementRef=n}})));let yD=(()=>{class n extends nx{constructor(e,i,r,a){super(e),this._platform=i,this._ngZone=r,this._animationMode=a,this._focusMonitor=(0,o.f3M)(Ta),this._isFab=!1;const f=e.nativeElement.classList;for(const b of _D)this._hasHostAttributes(b.selector)&&b.mdcClasses.forEach(S=>{f.add(S)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e="program",i){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,i):this._elementRef.nativeElement.focus(i)}_hasHostAttributes(...e){return e.some(i=>this._elementRef.nativeElement.hasAttribute(i))}_isRippleDisabled(){return this.disableRipple||this.disabled}}return n.\u0275fac=function(e){o.$Z()},n.\u0275dir=o.lG2({type:n,viewQuery:function(e,i){if(1&e&&o.Gf(Ng,5),2&e){let r;o.iGM(r=o.CRH())&&(i.ripple=r.first)}},features:[o.qOj]}),n})(),Bg=(()=>{class n extends yD{constructor(e,i,r,a){super(e,i,r,a)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(Ga),o.Y36(o.R0b),o.Y36(o.QbO,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(e,i){2&e&&(o.uIk("disabled",i.disabled||null),o.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-unthemed",!i.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[o.qOj],attrs:Aw,ngContentSelectors:fD,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(e,i){1&e&&(o.F$t(tx),o._UZ(0,"span",0),o.Hsn(1),o.TgZ(2,"span",1),o.Hsn(3,1),o.qZA(),o.Hsn(4,2),o._UZ(5,"span",2)(6,"span",3)(7,"span",4)),2&e&&(o.ekj("mdc-button__ripple",!i._isFab)("mdc-fab__ripple",i._isFab),o.xp6(6),o.Q6J("matRippleDisabled",i._isRippleDisabled())("matRippleTrigger",i._elementRef.nativeElement))},dependencies:[Ng],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),SD=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Pa,Zv,Pa]}),n})();const DD=["*"],AD=new o.OlP("MAT_CARD_CONFIG");let Fw=(()=>{class n{constructor(e){this.appearance=e?.appearance||"raised"}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(AD,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(e,i){2&e&&o.ekj("mat-mdc-card-outlined","outlined"===i.appearance)("mdc-card--outlined","outlined"===i.appearance)},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:DD,decls:1,vars:0,template:function(e,i){1&e&&(o.F$t(),o.Hsn(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mat-mdc-card{position:relative;border-radius:var(--mdc-elevated-card-container-shape, var(--mdc-shape-medium, 4px));background-color:var(--mdc-elevated-card-container-color, transparent);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color, transparent)}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape, var(--mdc-shape-medium, 4px))}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width, 1px);border-style:solid;border-color:var(--mdc-outlined-card-outline-color, transparent)}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0}),n})(),$w=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Pa,Kr,Pa]}),n})();class dy{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class vu extends dy{constructor(t,e,i,r,a){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=a}}class hy extends dy{constructor(t,e,i,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class Kv extends dy{constructor(t){super(),this.element=t instanceof o.SBq?t.nativeElement:t}}class Ep{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof vu?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof hy?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof Kv?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class BD extends Ep{constructor(t,e,i,r,a){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=f=>{const b=f.element,S=this._document.createComment("dom-portal");b.parentNode.insertBefore(S,b),this.outletElement.appendChild(b),this._attachedPortal=f,super.setDisposeFn(()=>{S.parentNode&&S.parentNode.replaceChild(b,S)})},this._document=a}attachComponentPortal(t){const i=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(i,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(t.injector||this._defaultInjector||o.zs3.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(i);-1!==r&&e.remove(r)}),this._attachedPortal=t,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let zg=(()=>{class n extends Ep{constructor(e,i,r){super(),this._componentFactoryResolver=e,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new o.vpe,this.attachDomPortal=a=>{const f=a.element,b=this._document.createComment("dom-portal");a.setAttachedHost(this),f.parentNode.insertBefore(b,f),this._getRootNode().appendChild(f),this._attachedPortal=a,super.setDisposeFn(()=>{b.parentNode&&b.parentNode.replaceChild(f,b)})},this._document=r}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);const i=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,a=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),f=i.createComponent(a,i.length,e.injector||i.injector,e.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(f.hostView.rootNodes[0]),super.setDisposeFn(()=>f.destroy()),this._attachedPortal=e,this._attachedRef=f,this.attached.emit(f),f}attachTemplatePortal(e){e.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o._Vd),o.Y36(o.s_b),o.Y36(he))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[o.qOj]}),n})(),xm=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();function Jv(n,t=!1){return(0,_l.e)((e,i)=>{let r=0;e.subscribe((0,il.x)(i,a=>{const f=n(a,r++);(f||t)&&i.next(a),!f&&i.complete()}))})}const ox=$a();class sx{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Wr(-this._previousScrollPosition.left),t.style.top=Wr(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,i=t.style,r=this._document.body.style,a=i.scrollBehavior||"",f=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),ox&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),ox&&(i.scrollBehavior=a,r.scrollBehavior=f)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}}class jw{constructor(t,e,i,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Qv{enable(){}disable(){}attach(){}}function fy(n,t){return t.some(e=>n.bottom<e.top||n.top>e.bottom||n.right<e.left||n.left>e.right)}function qw(n,t){return t.some(e=>n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)}class UD{constructor(t,e,i,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();fy(e,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let VD=(()=>{class n{constructor(e,i,r,a){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new Qv,this.close=f=>new jw(this._scrollDispatcher,this._ngZone,this._viewportRuler,f),this.block=()=>new sx(this._viewportRuler,this._document),this.reposition=f=>new UD(this._scrollDispatcher,this._viewportRuler,this._ngZone,f),this._document=a}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Yu),o.LFG(Zu),o.LFG(o.R0b),o.LFG(he))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class e0{constructor(t){if(this.scrollStrategy=new Qv,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const i of e)void 0!==t[i]&&(this[i]=t[i])}}}class Zw{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let ax=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(he))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),jD=(()=>{class n extends ax{constructor(e,i){super(e),this._ngZone=i,this._keydownListener=r=>{const a=this._attachedOverlays;for(let f=a.length-1;f>-1;f--)if(a[f]._keydownEvents.observers.length>0){const b=a[f]._keydownEvents;this._ngZone?this._ngZone.run(()=>b.next(r)):b.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(he),o.LFG(o.R0b,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ww=(()=>{class n extends ax{constructor(e,i,r){super(e),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=a=>{this._pointerDownEventTarget=Jc(a)},this._clickListener=a=>{const f=Jc(a),b="click"===a.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:f;this._pointerDownEventTarget=null;const S=this._attachedOverlays.slice();for(let M=S.length-1;M>-1;M--){const O=S[M];if(O._outsidePointerEvents.observers.length<1||!O.hasAttached())continue;if(O.overlayElement.contains(f)||O.overlayElement.contains(b))break;const N=O._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>N.next(a)):N.next(a)}}}add(e){if(super.add(e),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(he),o.LFG(Ga),o.LFG(o.R0b,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),py=(()=>{class n{constructor(e,i){this._platform=i,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||jf()){const r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let a=0;a<r.length;a++)r[a].remove()}const i=this._document.createElement("div");i.classList.add(e),jf()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(he),o.LFG(Ga))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class my{constructor(t,e,i,r,a,f,b,S,M,O=!1){this._portalOutlet=t,this._host=e,this._pane=i,this._config=r,this._ngZone=a,this._keyboardDispatcher=f,this._document=b,this._location=S,this._outsideClickDispatcher=M,this._animationsDisabled=O,this._backdropElement=null,this._backdropClick=new Nn.x,this._attachments=new Nn.x,this._detachments=new Nn.x,this._locationChanges=Ia.w0.EMPTY,this._backdropClickHandler=N=>this._backdropClick.next(N),this._backdropTransitionendHandler=N=>{this._disposeBackdrop(N.target)},this._keydownEvents=new Nn.x,this._outsidePointerEvents=new Nn.x,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,uo.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config={...this._config,...t},this._updateElementSize()}setDirection(t){this._config={...this._config,direction:t},this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=Wr(this._config.width),t.height=Wr(this._config.height),t.minWidth=Wr(this._config.minWidth),t.minHeight=Wr(this._config.minHeight),t.maxWidth=Wr(this._config.maxWidth),t.maxHeight=Wr(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(t){if(this._animationsDisabled)return void this._disposeBackdrop(t);t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,i){const r=da(e||[]).filter(a=>!!a);r.length&&(i?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe((0,Co.R)((0,As.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const lx="cdk-overlay-connected-position-bounding-box",Xw=/([A-Za-z%]+)$/;class bu{constructor(t,e,i,r,a){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=a,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Nn.x,this._resizeSubscription=Ia.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(lx),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,i=this._viewportRect,r=this._containerRect,a=[];let f;for(let b of this._preferredPositions){let S=this._getOriginPoint(t,r,b),M=this._getOverlayPoint(S,e,b),O=this._getOverlayFit(M,e,i,b);if(O.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(b,S);this._canFitWithFlexibleDimensions(O,M,i)?a.push({position:b,origin:S,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(S,b)}):(!f||f.overlayFit.visibleArea<O.visibleArea)&&(f={overlayFit:O,overlayPoint:M,originPoint:S,position:b,overlayRect:e})}if(a.length){let b=null,S=-1;for(const M of a){const O=M.boundingBoxRect.width*M.boundingBoxRect.height*(M.position.weight||1);O>S&&(S=O,b=M)}return this._isPushed=!1,void this._applyPosition(b.position,b.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(f.position,f.originPoint);this._applyPosition(f.position,f.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Od(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(lx),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,i){let r,a;if("center"==i.originX)r=t.left+t.width/2;else{const f=this._isRtl()?t.right:t.left,b=this._isRtl()?t.left:t.right;r="start"==i.originX?f:b}return e.left<0&&(r-=e.left),a="center"==i.originY?t.top+t.height/2:"top"==i.originY?t.top:t.bottom,e.top<0&&(a-=e.top),{x:r,y:a}}_getOverlayPoint(t,e,i){let r,a;return r="center"==i.overlayX?-e.width/2:"start"===i.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,a="center"==i.overlayY?-e.height/2:"top"==i.overlayY?0:-e.height,{x:t.x+r,y:t.y+a}}_getOverlayFit(t,e,i,r){const a=Jw(e);let{x:f,y:b}=t,S=this._getOffset(r,"x"),M=this._getOffset(r,"y");S&&(f+=S),M&&(b+=M);let U=0-b,j=b+a.height-i.height,be=this._subtractOverflows(a.width,0-f,f+a.width-i.width),Ce=this._subtractOverflows(a.height,U,j),et=be*Ce;return{visibleArea:et,isCompletelyWithinViewport:a.width*a.height===et,fitsInViewportVertically:Ce===a.height,fitsInViewportHorizontally:be==a.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){const r=i.bottom-e.y,a=i.right-e.x,f=Kw(this._overlayRef.getConfig().minHeight),b=Kw(this._overlayRef.getConfig().minWidth),M=t.fitsInViewportHorizontally||null!=b&&b<=a;return(t.fitsInViewportVertically||null!=f&&f<=r)&&M}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=Jw(e),a=this._viewportRect,f=Math.max(t.x+r.width-a.width,0),b=Math.max(t.y+r.height-a.height,0),S=Math.max(a.top-i.top-t.y,0),M=Math.max(a.left-i.left-t.x,0);let O=0,N=0;return O=r.width<=a.width?M||-f:t.x<this._viewportMargin?a.left-i.left-t.x:0,N=r.height<=a.height?S||-b:t.y<this._viewportMargin?a.top-i.top-t.y:0,this._previousPushAmount={x:O,y:N},{x:t.x+O,y:t.y+N}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new Zw(t,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=t.overlayY;i="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let a=0;a<e.length;a++)e[a].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(t,e){const i=this._viewportRect,r=this._isRtl();let a,f,b,O,N,U;if("top"===e.overlayY)f=t.y,a=i.height-f+this._viewportMargin;else if("bottom"===e.overlayY)b=i.height-t.y+2*this._viewportMargin,a=i.height-b+this._viewportMargin;else{const j=Math.min(i.bottom-t.y+i.top,t.y),be=this._lastBoundingBoxSize.height;a=2*j,f=t.y-j,a>be&&!this._isInitialRender&&!this._growAfterOpen&&(f=t.y-be/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)U=i.width-t.x+this._viewportMargin,O=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)N=t.x,O=i.right-t.x;else{const j=Math.min(i.right-t.x+i.left,t.x),be=this._lastBoundingBoxSize.width;O=2*j,N=t.x-j,O>be&&!this._isInitialRender&&!this._growAfterOpen&&(N=t.x-be/2)}return{top:f,left:N,bottom:b,right:U,width:O,height:a}}_setBoundingBoxStyles(t,e){const i=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const a=this._overlayRef.getConfig().maxHeight,f=this._overlayRef.getConfig().maxWidth;r.height=Wr(i.height),r.top=Wr(i.top),r.bottom=Wr(i.bottom),r.width=Wr(i.width),r.left=Wr(i.left),r.right=Wr(i.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",a&&(r.maxHeight=Wr(a)),f&&(r.maxWidth=Wr(f))}this._lastBoundingBoxSize=i,Od(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Od(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Od(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const i={},r=this._hasExactPosition(),a=this._hasFlexibleDimensions,f=this._overlayRef.getConfig();if(r){const O=this._viewportRuler.getViewportScrollPosition();Od(i,this._getExactOverlayY(e,t,O)),Od(i,this._getExactOverlayX(e,t,O))}else i.position="static";let b="",S=this._getOffset(e,"x"),M=this._getOffset(e,"y");S&&(b+=`translateX(${S}px) `),M&&(b+=`translateY(${M}px)`),i.transform=b.trim(),f.maxHeight&&(r?i.maxHeight=Wr(f.maxHeight):a&&(i.maxHeight="")),f.maxWidth&&(r?i.maxWidth=Wr(f.maxWidth):a&&(i.maxWidth="")),Od(this._pane.style,i)}_getExactOverlayY(t,e,i){let r={top:"",bottom:""},a=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(a=this._pushOverlayOnScreen(a,this._overlayRect,i)),"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(a.y+this._overlayRect.height)+"px":r.top=Wr(a.y),r}_getExactOverlayX(t,e,i){let f,r={left:"",right:""},a=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(a=this._pushOverlayOnScreen(a,this._overlayRect,i)),f=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===f?r.right=this._document.documentElement.clientWidth-(a.x+this._overlayRect.width)+"px":r.left=Wr(a.x),r}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:qw(t,i),isOriginOutsideView:fy(t,i),isOverlayClipped:qw(e,i),isOverlayOutsideView:fy(e,i)}}_subtractOverflows(t,...e){return e.reduce((i,r)=>i-Math.max(r,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&da(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof o.SBq)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}}function Od(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function Kw(n){if("number"!=typeof n&&null!=n){const[t,e]=n.split(Xw);return e&&"px"!==e?null:parseFloat(t)}return n||null}function Jw(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const cx="cdk-global-overlay-wrapper";class Qw{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(cx),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:a,maxWidth:f,maxHeight:b}=i,S=!("100%"!==r&&"100vw"!==r||f&&"100%"!==f&&"100vw"!==f),M=!("100%"!==a&&"100vh"!==a||b&&"100%"!==b&&"100vh"!==b),O=this._xPosition,N=this._xOffset,U="rtl"===this._overlayRef.getConfig().direction;let j="",be="",Ce="";S?Ce="flex-start":"center"===O?(Ce="center",U?be=N:j=N):U?"left"===O||"end"===O?(Ce="flex-end",j=N):("right"===O||"start"===O)&&(Ce="flex-start",be=N):"left"===O||"start"===O?(Ce="flex-start",j=N):("right"===O||"end"===O)&&(Ce="flex-end",be=N),t.position=this._cssPosition,t.marginLeft=S?"0":j,t.marginTop=M?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=S?"0":be,e.justifyContent=Ce,e.alignItems=M?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(cx),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let gy=(()=>{class n{constructor(e,i,r,a){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=a}global(){return new Qw}flexibleConnectedTo(e){return new bu(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Zu),o.LFG(he),o.LFG(Ga),o.LFG(py))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qD=0,Nu=(()=>{class n{constructor(e,i,r,a,f,b,S,M,O,N,U,j){this.scrollStrategies=e,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=a,this._keyboardDispatcher=f,this._injector=b,this._ngZone=S,this._document=M,this._directionality=O,this._location=N,this._outsideClickDispatcher=U,this._animationsModuleType=j}create(e){const i=this._createHostElement(),r=this._createPaneElement(i),a=this._createPortalOutlet(r),f=new e0(e);return f.direction=f.direction||this._directionality.value,new my(a,i,r,f,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(e){const i=this._document.createElement("div");return i.id="cdk-overlay-"+qD++,i.classList.add("cdk-overlay-pane"),e.appendChild(i),i}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(o.z2F)),new BD(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(VD),o.LFG(py),o.LFG(o._Vd),o.LFG(gy),o.LFG(jD),o.LFG(o.zs3),o.LFG(o.R0b),o.LFG(he),o.LFG(Ll),o.LFG(Re),o.LFG(Ww),o.LFG(o.QbO,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const YD=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],ux=new o.OlP("cdk-connected-overlay-scroll-strategy");let dx=(()=>{class n{constructor(e){this.elementRef=e}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),n})(),eE=(()=>{class n{constructor(e,i,r,a,f){this._overlay=e,this._dir=f,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=Ia.w0.EMPTY,this._attachSubscription=Ia.w0.EMPTY,this._detachSubscription=Ia.w0.EMPTY,this._positionSubscription=Ia.w0.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new o.vpe,this.positionChange=new o.vpe,this.attach=new o.vpe,this.detach=new o.vpe,this.overlayKeydown=new o.vpe,this.overlayOutsideClick=new o.vpe,this._templatePortal=new hy(i,r),this._scrollStrategyFactory=a,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=Ei(e)}get lockPosition(){return this._lockPosition}set lockPosition(e){this._lockPosition=Ei(e)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(e){this._flexibleDimensions=Ei(e)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(e){this._growAfterOpen=Ei(e)}get push(){return this._push}set push(e){this._push=Ei(e)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=YD);const e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(i=>{this.overlayKeydown.next(i),27===i.keyCode&&!this.disableClose&&!Qc(i)&&(i.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(i=>{this.overlayOutsideClick.next(i)})}_buildConfig(){const e=this._position=this.positionStrategy||this._createPositionStrategy(),i=new e0({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(i.width=this.width),(this.height||0===this.height)&&(i.height=this.height),(this.minWidth||0===this.minWidth)&&(i.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(i.minHeight=this.minHeight),this.backdropClass&&(i.backdropClass=this.backdropClass),this.panelClass&&(i.panelClass=this.panelClass),i}_updatePositionStrategy(e){const i=this.positions.map(r=>({originX:r.originX,originY:r.originY,overlayX:r.overlayX,overlayY:r.overlayY,offsetX:r.offsetX||this.offsetX,offsetY:r.offsetY||this.offsetY,panelClass:r.panelClass||void 0}));return e.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(i).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const e=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(e),e}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof dx?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(Jv(()=>this.positionChange.observers.length>0)).subscribe(e=>{this.positionChange.emit(e),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Nu),o.Y36(o.Rgc),o.Y36(o.s_b),o.Y36(ux),o.Y36(Ll,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[o.TTD]}),n})();const hx={provide:ux,deps:[Nu],useFactory:function ZD(n){return()=>n.scrollStrategies.reposition()}};let Ug=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[Nu,hx],imports:[Mu,xm,Wm,Wm]}),n})();var Hh_OPEN="mdc-dialog--open",XD_DIALOG_ANIMATION_CLOSE_TIME_MS=(["textarea",".mdc-menu .mdc-list-item",".mdc-menu .mdc-deprecated-list-item"].join(", "),75);function wm(n){return new gr.y(t=>{(0,Rr.Xf)(n()).subscribe(t)})}function KD(n,t){}class _y{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0}}let nE=(()=>{class n extends Ep{constructor(e,i,r,a,f,b,S,M){super(),this._elementRef=e,this._focusTrapFactory=i,this._config=a,this._interactivityChecker=f,this._ngZone=b,this._overlayRef=S,this._focusMonitor=M,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=O=>{this._portalOutlet.hasAttached();const N=this._portalOutlet.attachDomPortal(O);return this._contentAttached(),N},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=r}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),i}attachTemplatePortal(e){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,i){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{e.removeEventListener("blur",r),e.removeEventListener("mousedown",r),e.removeAttribute("tabindex")};e.addEventListener("blur",r),e.addEventListener("mousedown",r)})),e.focus(i)}_focusByCssSelector(e,i){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,i)}_trapFocus(){const e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const e=this._config.restoreFocus;let i=null;if("string"==typeof e?i=this._document.querySelector(e):"boolean"==typeof e?i=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(i=e),this._config.restoreFocus&&i&&"function"==typeof i.focus){const r=Hf(),a=this._elementRef.nativeElement;(!r||r===this._document.body||r===a||a.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,i=Hf();return e===i||e.contains(i)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Hf())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(St),o.Y36(he,8),o.Y36(_y),o.Y36(c),o.Y36(o.R0b),o.Y36(my),o.Y36(Ta))},n.\u0275cmp=o.Xpm({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(e,i){if(1&e&&o.Gf(zg,7),2&e){let r;o.iGM(r=o.CRH())&&(i._portalOutlet=r.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(e,i){2&e&&o.uIk("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},features:[o.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,i){1&e&&o.YNc(0,KD,0,0,"ng-template",0)},dependencies:[zg],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),n})();class t0{constructor(t,e){this.overlayRef=t,this.config=e,this.closed=new Nn.x,this.disableClose=e.disableClose,this.backdropClick=t.backdropClick(),this.keydownEvents=t.keydownEvents(),this.outsidePointerEvents=t.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!Qc(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})})}close(t,e){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this.overlayRef.dispose(),i.next(t),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(t="",e=""){return this.overlayRef.updateSize({width:t,height:e}),this}addPanelClass(t){return this.overlayRef.addPanelClass(t),this}removePanelClass(t){return this.overlayRef.removePanelClass(t),this}}const n0=new o.OlP("DialogScrollStrategy"),aP=new o.OlP("DialogData"),JD=new o.OlP("DefaultDialogConfig"),QD={provide:n0,deps:[Nu],useFactory:function lP(n){return()=>n.scrollStrategies.block()}};let eM=0,iE=(()=>{class n{constructor(e,i,r,a,f,b){this._overlay=e,this._injector=i,this._defaultOptions=r,this._parentDialog=a,this._overlayContainer=f,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Nn.x,this._afterOpenedAtThisLevel=new Nn.x,this._ariaHiddenElements=new Map,this.afterAllClosed=wm(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Yl(void 0))),this._scrollStrategy=b}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}open(e,i){(i={...this._defaultOptions||new _y,...i}).id=i.id||"cdk-dialog-"+eM++,i.id&&this.getDialogById(i.id);const a=this._getOverlayConfig(i),f=this._overlay.create(a),b=new t0(f,i),S=this._attachContainer(f,b,i);return b.containerInstance=S,this._attachDialogContent(e,b,S,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(b),b.closed.subscribe(()=>this._removeOpenDialog(b,!0)),this.afterOpened.next(b),b}closeAll(){r0(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){r0(this._openDialogsAtThisLevel,e=>{!1===e.config.closeOnDestroy&&this._removeOpenDialog(e,!1)}),r0(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){const i=new e0({positionStrategy:e.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(i.backdropClass=e.backdropClass),i}_attachContainer(e,i,r){const a=r.injector||r.viewContainerRef?.injector,f=[{provide:_y,useValue:r},{provide:t0,useValue:i},{provide:my,useValue:e}];let b;r.container?"function"==typeof r.container?b=r.container:(b=r.container.type,f.push(...r.container.providers(r))):b=nE;const S=new vu(b,r.viewContainerRef,o.zs3.create({parent:a||this._injector,providers:f}),r.componentFactoryResolver);return e.attach(S).instance}_attachDialogContent(e,i,r,a){if(e instanceof o.Rgc){const f=this._createInjector(a,i,r,void 0);let b={$implicit:a.data,dialogRef:i};a.templateContext&&(b={...b,..."function"==typeof a.templateContext?a.templateContext():a.templateContext}),r.attachTemplatePortal(new hy(e,null,b,f))}else{const f=this._createInjector(a,i,r,this._injector),b=r.attachComponentPortal(new vu(e,a.viewContainerRef,f,a.componentFactoryResolver));i.componentInstance=b.instance}}_createInjector(e,i,r,a){const f=e.injector||e.viewContainerRef?.injector,b=[{provide:aP,useValue:e.data},{provide:t0,useValue:i}];return e.providers&&("function"==typeof e.providers?b.push(...e.providers(i,e,r)):b.push(...e.providers)),e.direction&&(!f||!f.get(Ll,null,{optional:!0}))&&b.push({provide:Ll,useValue:{value:e.direction,change:(0,an.of)()}}),o.zs3.create({parent:f||a,providers:b})}_removeOpenDialog(e,i){const r=this.openDialogs.indexOf(e);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((a,f)=>{a?f.setAttribute("aria-hidden",a):f.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const i=e.parentElement.children;for(let r=i.length-1;r>-1;r--){const a=i[r];a!==e&&"SCRIPT"!==a.nodeName&&"STYLE"!==a.nodeName&&!a.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(a,a.getAttribute("aria-hidden")),a.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Nu),o.LFG(o.zs3),o.LFG(JD,8),o.LFG(n,12),o.LFG(py),o.LFG(n0))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function r0(n,t){let e=n.length;for(;e--;)t(n[e])}let rE=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[iE,QD],imports:[Ug,xm,Wl,xm]}),n})();class oE{}class sE{}const jh="*";function Cp(n,t){return{type:7,name:n,definitions:t,options:{}}}function ph(n,t=null){return{type:4,styles:t,timings:n}}function aE(n,t=null){return{type:2,steps:n,options:t}}function zl(n){return{type:6,styles:n,offset:null}}function hd(n,t,e){return{type:0,name:n,styles:t,options:e}}function fd(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function px(n=null){return{type:9,options:n}}function o0(n,t,e=null){return{type:11,selector:n,animation:t,options:e}}function nM(n){Promise.resolve().then(n)}class s0{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){nM(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class iM{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,i=0,r=0;const a=this.players.length;0==a?nM(()=>this._onFinish()):this.players.forEach(f=>{f.onDone(()=>{++e==a&&this._onFinish()}),f.onDestroy(()=>{++i==a&&this._onDestroy()}),f.onStart(()=>{++r==a&&this._onStart()})}),this.totalTime=this.players.reduce((f,b)=>Math.max(f,b.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){const t=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}function uP(n,t){}class mx{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}let dP=(()=>{class n extends nE{constructor(e,i,r,a,f,b,S,M){super(e,i,r,a,f,b,S,M),this._animationStateChanged=new o.vpe}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(St),o.Y36(he,8),o.Y36(mx),o.Y36(c),o.Y36(o.R0b),o.Y36(my),o.Y36(Ta))},n.\u0275cmp=o.Xpm({type:n,selectors:[["ng-component"]],features:[o.qOj],decls:0,vars:0,template:function(e,i){},encapsulation:2}),n})();const vy="--mat-dialog-transition-duration";function rM(n){return null==n?null:"number"==typeof n?n:n.endsWith("ms")?Fi(n.substring(0,n.length-2)):n.endsWith("s")?1e3*Fi(n.substring(0,n.length-1)):"0"===n?0:null}let cE=(()=>{class n extends dP{constructor(e,i,r,a,f,b,S,M,O){super(e,i,r,a,f,b,S,O),this._animationMode=M,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._openAnimationDuration=this._animationsEnabled?rM(this._config.enterAnimationDuration)??150:0,this._closeAnimationDuration=this._animationsEnabled?rM(this._config.exitAnimationDuration)??XD_DIALOG_ANIMATION_CLOSE_TIME_MS:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._openAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._closeAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._openAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(vy,`${this._openAnimationDuration}ms`),this._hostElement.classList.add("mdc-dialog--opening"),this._hostElement.classList.add(Hh_OPEN),this._waitForAnimationToComplete(this._openAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(Hh_OPEN),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._closeAnimationDuration}),this._hostElement.classList.remove(Hh_OPEN),this._animationsEnabled?(this._hostElement.style.setProperty(vy,`${this._openAnimationDuration}ms`),this._hostElement.classList.add("mdc-dialog--closing"),this._waitForAnimationToComplete(this._closeAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove("mdc-dialog--opening"),this._hostElement.classList.remove("mdc-dialog--closing")}_waitForAnimationToComplete(e,i){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(St),o.Y36(he,8),o.Y36(mx),o.Y36(c),o.Y36(o.R0b),o.Y36(my),o.Y36(o.QbO,8),o.Y36(Ta))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(e,i){2&e&&(o.Ikx("id",i._config.id),o.uIk("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),o.ekj("_mat-animation-noopable",!i._animationsEnabled))},features:[o.qOj],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"div",1),o.YNc(2,uP,0,0,"ng-template",2),o.qZA()())},dependencies:[zg],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, var(--mdc-shape-medium, 4px))}.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__title,.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__actions,.mat-mdc-dialog-container.mdc-dialog--scrollable.mdc-dialog-scroll-divider-footer .mdc-dialog__actions{border-color:var(--mdc-dialog-with-divider-divider-color, black)}.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__title{border-bottom-color:var(--mdc-dialog-with-divider-divider-color, black)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, "Arial");line-height:var(--mdc-dialog-subhead-line-height, 14px);font-size:var(--mdc-dialog-subhead-size, 14px);font-weight:var(--mdc-dialog-subhead-weight, 500);letter-spacing:var(--mdc-dialog-subhead-tracking, 1px)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, black)}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, "Arial");line-height:var(--mdc-dialog-supporting-text-line-height, 14px);font-size:var(--mdc-dialog-supporting-text-size, 14px);font-weight:var(--mdc-dialog-supporting-text-weight, 500);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 1px)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, black)}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2}),n})();class qh{constructor(t,e,i){this._ref=t,this._containerInstance=i,this._afterOpened=new Nn.x,this._beforeClosed=new Nn.x,this._state=0,this.disableClose=e.disableClose,this.id=t.id,i._animationStateChanged.pipe((0,co.h)(r=>"opened"===r.state),(0,uo.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe((0,co.h)(r=>"closed"===r.state),(0,uo.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),(0,As.T)(this.backdropClick(),this.keydownEvents().pipe((0,co.h)(r=>27===r.keyCode&&!this.disableClose&&!Qc(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),gx(this,"keydown"===r.type?"keyboard":"mouse"))})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe((0,co.h)(e=>"closing"===e.state),(0,uo.q)(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(t){let e=this._ref.config.positionStrategy;return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(t="",e=""){return this._ref.updateSize(t,e),this}addPanelClass(t){return this._ref.addPanelClass(t),this}removePanelClass(t){return this._ref.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}function gx(n,t,e){return n._closeInteractionType=t,n.close(e)}const by=new o.OlP("MatMdcDialogData"),hP=new o.OlP("mat-mdc-dialog-default-options"),a0=new o.OlP("mat-mdc-dialog-scroll-strategy"),oM={provide:a0,deps:[Nu],useFactory:function uE(n){return()=>n.scrollStrategies.block()}};let fP=0,aM=(()=>{class n{constructor(e,i,r,a,f,b,S,M,O,N){this._overlay=e,this._defaultOptions=r,this._parentDialog=a,this._dialogRefConstructor=S,this._dialogContainerType=M,this._dialogDataToken=O,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Nn.x,this._afterOpenedAtThisLevel=new Nn.x,this._idPrefix="mat-dialog-",this.dialogConfigClass=mx,this.afterAllClosed=wm(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Yl(void 0))),this._scrollStrategy=b,this._dialog=i.get(iE)}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,i){let r;(i={...this._defaultOptions||new mx,...i}).id=i.id||`${this._idPrefix}${fP++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const a=this._dialog.open(e,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:_y,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(f,b,S)=>(r=new this._dialogRefConstructor(f,i,S),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:S},{provide:this._dialogDataToken,useValue:b.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentInstance=a.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const f=this.openDialogs.indexOf(r);f>-1&&(this.openDialogs.splice(f,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let i=e.length;for(;i--;)e[i].close()}}return n.\u0275fac=function(e){o.$Z()},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),Em=(()=>{class n extends aM{constructor(e,i,r,a,f,b,S,M){super(e,i,a,b,S,f,qh,cE,by,M),this._idPrefix="mat-mdc-dialog-"}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Nu),o.LFG(o.zs3),o.LFG(Re,8),o.LFG(hP,8),o.LFG(a0),o.LFG(n,12),o.LFG(py),o.LFG(o.QbO,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),lM=0,Cm=(()=>{class n{constructor(e,i,r){this.dialogRef=e,this._elementRef=i,this._dialog=r,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=cM(this._elementRef,this._dialog.openDialogs))}ngOnChanges(e){const i=e._matDialogClose||e._matDialogCloseResult;i&&(this.dialogResult=i.currentValue)}_onButtonClick(e){gx(this.dialogRef,0===e.screenX&&0===e.screenY?"keyboard":"mouse",this.dialogResult)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(qh,8),o.Y36(o.SBq),o.Y36(Em))},n.\u0275dir=o.lG2({type:n,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(e,i){1&e&&o.NdJ("click",function(a){return i._onButtonClick(a)}),2&e&&o.uIk("aria-label",i.ariaLabel||null)("type",i.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[o.TTD]}),n})(),l0=(()=>{class n{constructor(e,i,r){this._dialogRef=e,this._elementRef=i,this._dialog=r,this.id="mat-mdc-dialog-title-"+lM++}ngOnInit(){this._dialogRef||(this._dialogRef=cM(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const e=this._dialogRef._containerInstance;e&&!e._ariaLabelledBy&&(e._ariaLabelledBy=this.id)})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(qh,8),o.Y36(o.SBq),o.Y36(Em))},n.\u0275dir=o.lG2({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(e,i){2&e&&o.Ikx("id",i.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),n})(),_x=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"]}),n})(),yx=(()=>{class n{constructor(){this.align="start"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:4,hostBindings:function(e,i){2&e&&o.ekj("mat-mdc-dialog-actions-align-center","center"===i.align)("mat-mdc-dialog-actions-align-end","end"===i.align)},inputs:{align:"align"}}),n})();function cM(n,t){let e=n.nativeElement.parentElement;for(;e&&!e.classList.contains("mat-mdc-dialog-container");)e=e.parentElement;return e?t.find(i=>i.id===e.id):null}let uM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[Em,oM],imports:[rE,Ug,xm,Pa,Pa]}),n})();class mh{constructor(t=!1,e,i=!0,r){this._multiple=t,this._emitChanges=i,this.compareWith=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Nn.x,e&&e.length&&(t?e.forEach(a=>this._markSelected(a)):this._markSelected(e[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...t){this._verifyValueAssignment(t),t.forEach(i=>this._markSelected(i));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...t){this._verifyValueAssignment(t),t.forEach(i=>this._unmarkSelected(i));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...t){this._verifyValueAssignment(t);const e=this.selected,i=new Set(t);t.forEach(a=>this._markSelected(a)),e.filter(a=>!i.has(a)).forEach(a=>this._unmarkSelected(a));const r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(t){return this.isSelected(t)?this.deselect(t):this.select(t)}clear(t=!0){this._unmarkAll();const e=this._hasQueuedChanges();return t&&this._emitChangeEvent(),e}isSelected(t){if(this.compareWith){for(const e of this._selection)if(this.compareWith(e,t))return!0;return!1}return this._selection.has(t)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){this.isSelected(t)||(this._multiple||this._unmarkAll(),this.isSelected(t)||this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}}let c0=(()=>{class n{constructor(){this._listeners=[]}notify(e,i){for(let r of this._listeners)r(e,i)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(i=>e!==i)}}ngOnDestroy(){this._listeners=[]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yP=0;const Bu=new o.OlP("CdkAccordion");let fM=(()=>{class n{constructor(){this._stateChanges=new Nn.x,this._openCloseAllActions=new Nn.x,this.id="cdk-accordion-"+yP++,this._multi=!1}get multi(){return this._multi}set multi(e){this._multi=Ei(e)}openAll(){this._multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(e){this._stateChanges.next(e)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[o._Bn([{provide:Bu,useExisting:n}]),o.TTD]}),n})(),vx=0,pM=(()=>{class n{constructor(e,i,r){this.accordion=e,this._changeDetectorRef=i,this._expansionDispatcher=r,this._openCloseAllSubscription=Ia.w0.EMPTY,this.closed=new o.vpe,this.opened=new o.vpe,this.destroyed=new o.vpe,this.expandedChange=new o.vpe,this.id="cdk-accordion-child-"+vx++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=r.listen((a,f)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===f&&this.id!==a&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(e){e=Ei(e),this._expanded!==e&&(this._expanded=e,this.expandedChange.emit(e),e?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){this._disabled=Ei(e)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(e=>{this.disabled||(this.expanded=e)})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Bu,12),o.Y36(o.sBO),o.Y36(c0))},n.\u0275dir=o.lG2({type:n,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[o._Bn([{provide:Bu,useValue:void 0}])]}),n})(),mM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();var pd=W(515);const hE=["body"];function fE(n,t){}const gM=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],pE=["mat-expansion-panel-header","*","mat-action-row"];function mE(n,t){if(1&n&&o._UZ(0,"span",2),2&n){const e=o.oxw();o.Q6J("@indicatorRotate",e._getExpandedState())}}const _M=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],gE=["mat-panel-title","mat-panel-description","*"],bx=new o.OlP("MAT_ACCORDION"),u0="225ms cubic-bezier(0.4,0.0,0.2,1)",Lf={indicatorRotate:Cp("indicatorRotate",[hd("collapsed, void",zl({transform:"rotate(0deg)"})),hd("expanded",zl({transform:"rotate(180deg)"})),fd("expanded <=> collapsed, void => collapsed",ph(u0))]),bodyExpansion:Cp("bodyExpansion",[hd("collapsed, void",zl({height:"0px",visibility:"hidden"})),hd("expanded",zl({height:"*",visibility:"visible"})),fd("expanded <=> collapsed, void => collapsed",ph(u0))])},xx=new o.OlP("MAT_EXPANSION_PANEL");let wx=(()=>{class n{constructor(e,i){this._template=e,this._expansionPanel=i}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc),o.Y36(xx,8))},n.\u0275dir=o.lG2({type:n,selectors:[["ng-template","matExpansionPanelContent",""]]}),n})(),kf=0;const _E=new o.OlP("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let Sm=(()=>{class n extends pM{constructor(e,i,r,a,f,b,S){super(e,i,r),this._viewContainerRef=a,this._animationMode=b,this._hideToggle=!1,this.afterExpand=new o.vpe,this.afterCollapse=new o.vpe,this._inputChanges=new Nn.x,this._headerId="mat-expansion-panel-header-"+kf++,this._bodyAnimationDone=new Nn.x,this.accordion=e,this._document=f,this._bodyAnimationDone.pipe((0,fa.x)((M,O)=>M.fromState===O.fromState&&M.toState===O.toState)).subscribe(M=>{"void"!==M.fromState&&("expanded"===M.toState?this.afterExpand.emit():"collapsed"===M.toState&&this.afterCollapse.emit())}),S&&(this.hideToggle=S.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(e){this._hideToggle=Ei(e)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(e){this._togglePosition=e}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(Yl(null),(0,co.h)(()=>this.expanded&&!this._portal),(0,uo.q)(1)).subscribe(()=>{this._portal=new hy(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(e){this._inputChanges.next(e)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const e=this._document.activeElement,i=this._body.nativeElement;return e===i||i.contains(e)}return!1}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(bx,12),o.Y36(o.sBO),o.Y36(c0),o.Y36(o.s_b),o.Y36(he),o.Y36(o.QbO,8),o.Y36(_E,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-expansion-panel"]],contentQueries:function(e,i,r){if(1&e&&o.Suo(r,wx,5),2&e){let a;o.iGM(a=o.CRH())&&(i._lazyContent=a.first)}},viewQuery:function(e,i){if(1&e&&o.Gf(hE,5),2&e){let r;o.iGM(r=o.CRH())&&(i._body=r.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(e,i){2&e&&o.ekj("mat-expanded",i.expanded)("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-expansion-panel-spacing",i._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[o._Bn([{provide:bx,useValue:void 0},{provide:xx,useExisting:n}]),o.qOj,o.TTD],ngContentSelectors:pE,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(e,i){1&e&&(o.F$t(gM),o.Hsn(0),o.TgZ(1,"div",0,1),o.NdJ("@bodyExpansion.done",function(a){return i._bodyAnimationDone.next(a)}),o.TgZ(3,"div",2),o.Hsn(4,1),o.YNc(5,fE,0,0,"ng-template",3),o.qZA(),o.Hsn(6,2),o.qZA()),2&e&&(o.xp6(1),o.Q6J("@bodyExpansion",i._getExpandedState())("id",i.id),o.uIk("aria-labelledby",i._headerId),o.xp6(4),o.Q6J("cdkPortalOutlet",i._portal))},dependencies:[zg],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[Lf.bodyExpansion]},changeDetection:0}),n})();class yM{}const vM=Wb(yM);let Sp=(()=>{class n extends vM{constructor(e,i,r,a,f,b,S){super(),this.panel=e,this._element=i,this._focusMonitor=r,this._changeDetectorRef=a,this._animationMode=b,this._parentChangeSubscription=Ia.w0.EMPTY;const M=e.accordion?e.accordion._stateChanges.pipe((0,co.h)(O=>!(!O.hideToggle&&!O.togglePosition))):pd.E;this.tabIndex=parseInt(S||"")||0,this._parentChangeSubscription=(0,As.T)(e.opened,e.closed,M,e._inputChanges.pipe((0,co.h)(O=>!!(O.hideToggle||O.disabled||O.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),e.closed.pipe((0,co.h)(()=>e._containsFocus())).subscribe(()=>r.focusVia(i,"program")),f&&(this.expandedHeight=f.expandedHeight,this.collapsedHeight=f.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const e=this._isExpanded();return e&&this.expandedHeight?this.expandedHeight:!e&&this.collapsedHeight?this.collapsedHeight:null}_keydown(e){switch(e.keyCode){case 32:case 13:Qc(e)||(e.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(e))}}focus(e,i){e?this._focusMonitor.focusVia(this._element,e,i):this._element.nativeElement.focus(i)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(e=>{e&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Sm,1),o.Y36(o.SBq),o.Y36(Ta),o.Y36(o.sBO),o.Y36(_E,8),o.Y36(o.QbO,8),o.$8M("tabindex"))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(e,i){1&e&&o.NdJ("click",function(){return i._toggle()})("keydown",function(a){return i._keydown(a)}),2&e&&(o.uIk("id",i.panel._headerId)("tabindex",i.tabIndex)("aria-controls",i._getPanelId())("aria-expanded",i._isExpanded())("aria-disabled",i.panel.disabled),o.Udp("height",i._getHeaderHeight()),o.ekj("mat-expanded",i._isExpanded())("mat-expansion-toggle-indicator-after","after"===i._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===i._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===i._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[o.qOj],ngContentSelectors:gE,decls:5,vars:3,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(e,i){1&e&&(o.F$t(_M),o.TgZ(0,"span",0),o.Hsn(1),o.Hsn(2,1),o.Hsn(3,2),o.qZA(),o.YNc(4,mE,1,1,"span",1)),2&e&&(o.ekj("mat-content-hide-toggle",!i._showToggle()),o.xp6(4),o.Q6J("ngIf",i._showToggle()))},dependencies:[ci],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[Lf.indicatorRotate]},changeDetection:0}),n})(),Dm=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["mat-panel-description"]],hostAttrs:[1,"mat-expansion-panel-header-description"]}),n})(),Vg=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),n})(),Mm=(()=>{class n extends fM{constructor(){super(...arguments),this._ownHeaders=new o.n_E,this._hideToggle=!1,this.displayMode="default",this.togglePosition="after"}get hideToggle(){return this._hideToggle}set hideToggle(e){this._hideToggle=Ei(e)}ngAfterContentInit(){this._headers.changes.pipe(Yl(this._headers)).subscribe(e=>{this._ownHeaders.reset(e.filter(i=>i.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new z_(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(e){this._keyManager.onKeydown(e)}_handleHeaderFocus(e){this._keyManager.updateActiveItem(e)}ngOnDestroy(){super.ngOnDestroy(),this._keyManager?.destroy(),this._ownHeaders.destroy()}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["mat-accordion"]],contentQueries:function(e,i,r){if(1&e&&o.Suo(r,Sp,5),2&e){let a;o.iGM(a=o.CRH())&&(i._headers=a)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(e,i){2&e&&o.ekj("mat-accordion-multi",i.multi)},inputs:{multi:"multi",hideToggle:"hideToggle",displayMode:"displayMode",togglePosition:"togglePosition"},exportAs:["matAccordion"],features:[o._Bn([{provide:bx,useExisting:n}]),o.qOj]}),n})(),bM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Kr,Pa,mM,xm]}),n})();const yE=["matFormFieldNotchedOutline",""],bP=["*"],Ex=["textField"],vE=["iconPrefixContainer"],bE=["textPrefixContainer"];function xE(n,t){1&n&&o._UZ(0,"span",19)}function wE(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"label",17),o.NdJ("cdkObserveContent",function(){o.CHM(e);const r=o.oxw(2);return o.KtG(r._refreshOutlineNotchWidth())}),o.Hsn(1,1),o.YNc(2,xE,1,0,"span",18),o.qZA()}if(2&n){const e=o.oxw(2);o.Q6J("floating",e._shouldLabelFloat())("cdkObserveContentDisabled",!e._hasOutline())("id",e._labelId),o.uIk("for",e._control.id)("aria-owns",e._control.id),o.xp6(2),o.Q6J("ngIf",!e.hideRequiredMarker&&e._control.required)}}function EE(n,t){if(1&n&&o.YNc(0,wE,3,6,"label",16),2&n){const e=o.oxw();o.Q6J("ngIf",e._hasFloatingLabel())}}function d0(n,t){1&n&&o._UZ(0,"div",20)}function h0(n,t){}function CE(n,t){if(1&n&&o.YNc(0,h0,0,0,"ng-template",22),2&n){o.oxw(2);const e=o.MAs(1);o.Q6J("ngTemplateOutlet",e)}}function xM(n,t){if(1&n&&(o.TgZ(0,"div",21),o.YNc(1,CE,1,1,"ng-template",9),o.qZA()),2&n){const e=o.oxw();o.Q6J("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat())("matFormFieldNotchedOutlineLabelWidth",e._labelWidth),o.xp6(1),o.Q6J("ngIf",!e._forceDisplayInfixLabel())}}function wM(n,t){1&n&&(o.TgZ(0,"div",23,24),o.Hsn(2,2),o.qZA())}function EM(n,t){1&n&&(o.TgZ(0,"div",25,26),o.Hsn(2,3),o.qZA())}function xP(n,t){}function wP(n,t){if(1&n&&o.YNc(0,xP,0,0,"ng-template",22),2&n){o.oxw();const e=o.MAs(1);o.Q6J("ngTemplateOutlet",e)}}function SE(n,t){1&n&&(o.TgZ(0,"div",27),o.Hsn(1,4),o.qZA())}function CM(n,t){1&n&&(o.TgZ(0,"div",28),o.Hsn(1,5),o.qZA())}function SM(n,t){1&n&&o._UZ(0,"div",29)}function DM(n,t){if(1&n&&(o.TgZ(0,"div",30),o.Hsn(1,6),o.qZA()),2&n){const e=o.oxw();o.Q6J("@transitionMessages",e._subscriptAnimationState)}}function EP(n,t){if(1&n&&(o.TgZ(0,"mat-hint",34),o._uU(1),o.qZA()),2&n){const e=o.oxw(2);o.Q6J("id",e._hintLabelId),o.xp6(1),o.Oqu(e.hintLabel)}}function CP(n,t){if(1&n&&(o.TgZ(0,"div",31),o.YNc(1,EP,2,2,"mat-hint",32),o.Hsn(2,7),o._UZ(3,"div",33),o.Hsn(4,8),o.qZA()),2&n){const e=o.oxw();o.Q6J("@transitionMessages",e._subscriptAnimationState),o.xp6(1),o.Q6J("ngIf",e.hintLabel)}}const SP=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],DP=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let f0=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["mat-label"]]}),n})();const p0=new o.OlP("MatError");let MM=0,Cx=(()=>{class n{constructor(){this.align="start",this.id="mat-mdc-hint-"+MM++}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(e,i){2&e&&(o.Ikx("id",i.id),o.uIk("align",null),o.ekj("mat-mdc-form-field-hint-end","end"===i.align))},inputs:{align:"align",id:"id"}}),n})();const Im=new o.OlP("MatPrefix"),Sx=new o.OlP("MatSuffix");let ME=(()=>{class n{constructor(e){this._elementRef=e,this.floating=!1}getWidth(){return function Dx(n){if(null!==n.offsetParent)return n.scrollWidth;const e=n.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);const i=e.scrollWidth;return e.remove(),i}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(e,i){2&e&&o.ekj("mdc-floating-label--float-above",i.floating)},inputs:{floating:"floating"}}),n})();const m0="mdc-line-ripple--active",Tm="mdc-line-ripple--deactivating";let TM=(()=>{class n{constructor(e,i){this._elementRef=e,this._handleTransitionEnd=r=>{const a=this._elementRef.nativeElement.classList,f=a.contains(Tm);"opacity"===r.propertyName&&f&&a.remove(m0,Tm)},i.runOutsideAngular(()=>{e.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const e=this._elementRef.nativeElement.classList;e.remove(Tm),e.add(m0)}deactivate(){this._elementRef.nativeElement.classList.add(Tm)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.R0b))},n.\u0275dir=o.lG2({type:n,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]}),n})(),AM=(()=>{class n{constructor(e,i){this._elementRef=e,this._ngZone=i,this.labelWidth=0,this.open=!1}ngAfterViewInit(){const e=this._elementRef.nativeElement.querySelector(".mdc-floating-label");e?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(e.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>e.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_getNotchWidth(){return this.open?this.labelWidth>0?`calc(${this.labelWidth}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:"0px":null}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.R0b))},n.\u0275cmp=o.Xpm({type:n,selectors:[["div","matFormFieldNotchedOutline",""]],hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(e,i){2&e&&o.ekj("mdc-notched-outline--notched",i.open)},inputs:{labelWidth:["matFormFieldNotchedOutlineLabelWidth","labelWidth"],open:["matFormFieldNotchedOutlineOpen","open"]},attrs:yE,ngContentSelectors:bP,decls:4,vars:2,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],[1,"mdc-notched-outline__trailing"]],template:function(e,i){1&e&&(o.F$t(),o._UZ(0,"div",0),o.TgZ(1,"div",1),o.Hsn(2),o.qZA(),o._UZ(3,"div",2)),2&e&&(o.xp6(1),o.Udp("width",i._getNotchWidth()))},encapsulation:2,changeDetection:0}),n})();const TP={transitionMessages:Cp("transitionMessages",[hd("enter",zl({opacity:1,transform:"translateY(0%)"})),fd("void => enter",[zl({opacity:0,transform:"translateY(-5px)"}),ph("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let IE=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n}),n})();const Mx=new o.OlP("MatFormField"),RM=new o.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS");let Ix=0,g0=(()=>{class n{constructor(e,i,r,a,f,b,S,M){this._elementRef=e,this._changeDetectorRef=i,this._ngZone=r,this._dir=a,this._platform=f,this._defaults=b,this._animationMode=S,this._document=M,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+Ix++,this._hintLabelId="mat-mdc-hint-"+Ix++,this._subscriptAnimationState="",this._labelWidth=0,this._destroyed=new Nn.x,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,b&&(b.appearance&&(this.appearance=b.appearance),this._hideRequiredMarker=Boolean(b?.hideRequiredMarker),b.color&&(this.color=b.color))}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=Ei(e)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(e){const i=this._appearance;this._appearance=e||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==i&&(this._refreshOutlineNotchWidth(),this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}ngAfterViewInit(){this._updateFocusState(),this._refreshOutlineNotchWidth(),this._document?.fonts?.ready?this._document.fonts.ready.then(()=>{this._refreshOutlineNotchWidth(),this._changeDetectorRef.markForCheck()}):setTimeout(()=>this._refreshOutlineNotchWidth(),100),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${e.controlType}`),e.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe((0,Co.R)(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),(0,As.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,Co.R)(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe((0,Co.R)(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(e){const i=this._control?this._control.ngControl:null;return i&&i[e]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||(this._labelWidth=this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(a=>"start"===a.align):null,r=this._hintChildren?this._hintChildren.find(a=>"end"===a.align):null;i?e.push(i.id):this._hintLabel&&e.push(this._hintLabelId),r&&e.push(r.id)}else this._errorChildren&&e.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(e)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const e=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(e.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const i=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,a=i?.getBoundingClientRect().width??0,f=r?.getBoundingClientRect().width??0;e.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${a+f}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const e=this._elementRef.nativeElement;if(e.getRootNode){const i=e.getRootNode();return i&&i!==e}return document.documentElement.contains(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.sBO),o.Y36(o.R0b),o.Y36(Ll),o.Y36(Ga),o.Y36(RM,8),o.Y36(o.QbO,8),o.Y36(he))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(e,i,r){if(1&e&&(o.Suo(r,f0,5),o.Suo(r,f0,7),o.Suo(r,IE,5),o.Suo(r,Im,5),o.Suo(r,Sx,5),o.Suo(r,p0,5),o.Suo(r,Cx,5)),2&e){let a;o.iGM(a=o.CRH())&&(i._labelChildNonStatic=a.first),o.iGM(a=o.CRH())&&(i._labelChildStatic=a.first),o.iGM(a=o.CRH())&&(i._formFieldControl=a.first),o.iGM(a=o.CRH())&&(i._prefixChildren=a),o.iGM(a=o.CRH())&&(i._suffixChildren=a),o.iGM(a=o.CRH())&&(i._errorChildren=a),o.iGM(a=o.CRH())&&(i._hintChildren=a)}},viewQuery:function(e,i){if(1&e&&(o.Gf(Ex,5),o.Gf(vE,5),o.Gf(bE,5),o.Gf(ME,5),o.Gf(AM,5),o.Gf(TM,5)),2&e){let r;o.iGM(r=o.CRH())&&(i._textField=r.first),o.iGM(r=o.CRH())&&(i._iconPrefixContainer=r.first),o.iGM(r=o.CRH())&&(i._textPrefixContainer=r.first),o.iGM(r=o.CRH())&&(i._floatingLabel=r.first),o.iGM(r=o.CRH())&&(i._notchedOutline=r.first),o.iGM(r=o.CRH())&&(i._lineRipple=r.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(e,i){2&e&&o.ekj("mat-mdc-form-field-label-always-float",i._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",i._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",i._hasIconSuffix)("mat-form-field-invalid",i._control.errorState)("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===i._animationMode)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-hide-placeholder",i._hasFloatingLabel()&&!i._shouldLabelFloat())("mat-focused",i._control.focused)("mat-primary","accent"!==i.color&&"warn"!==i.color)("mat-accent","accent"===i.color)("mat-warn","warn"===i.color)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[o._Bn([{provide:Mx,useExisting:n}])],ngContentSelectors:DP,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(e,i){1&e&&(o.F$t(SP),o.YNc(0,EE,1,1,"ng-template",null,0,o.W1O),o.TgZ(2,"div",1,2),o.NdJ("click",function(a){return i._control.onContainerClick&&i._control.onContainerClick(a)}),o.YNc(4,d0,1,0,"div",3),o.TgZ(5,"div",4),o.YNc(6,xM,2,3,"div",5),o.YNc(7,wM,3,0,"div",6),o.YNc(8,EM,3,0,"div",7),o.TgZ(9,"div",8),o.YNc(10,wP,1,1,"ng-template",9),o.Hsn(11),o.qZA(),o.YNc(12,SE,2,0,"div",10),o.YNc(13,CM,2,0,"div",11),o.qZA(),o.YNc(14,SM,1,0,"div",12),o.qZA(),o.TgZ(15,"div",13),o.YNc(16,DM,2,1,"div",14),o.YNc(17,CP,5,2,"div",15),o.qZA()),2&e&&(o.xp6(2),o.ekj("mdc-text-field--filled",!i._hasOutline())("mdc-text-field--outlined",i._hasOutline())("mdc-text-field--no-label",!i._hasFloatingLabel())("mdc-text-field--disabled",i._control.disabled)("mdc-text-field--invalid",i._control.errorState),o.xp6(2),o.Q6J("ngIf",!i._hasOutline()&&!i._control.disabled),o.xp6(2),o.Q6J("ngIf",i._hasOutline()),o.xp6(1),o.Q6J("ngIf",i._hasIconPrefix),o.xp6(1),o.Q6J("ngIf",i._hasTextPrefix),o.xp6(2),o.Q6J("ngIf",!i._hasOutline()||i._forceDisplayInfixLabel()),o.xp6(2),o.Q6J("ngIf",i._hasTextSuffix),o.xp6(1),o.Q6J("ngIf",i._hasIconSuffix),o.xp6(1),o.Q6J("ngIf",!i._hasOutline()),o.xp6(1),o.ekj("mat-mdc-form-field-subscript-dynamic-size","dynamic"===i.subscriptSizing),o.Q6J("ngSwitch",i._getDisplayedMessages()),o.xp6(1),o.Q6J("ngSwitchCase","error"),o.xp6(1),o.Q6J("ngSwitchCase","hint"))},dependencies:[ci,Jt,Xi,An,em,Cx,ME,AM,TM],styles:['.mdc-text-field{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required::after,.mdc-floating-label--required[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;border-top:1px solid;border-bottom:1px solid;pointer-events:none}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid;flex-grow:1}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{flex:0 0 auto;width:auto;max-width:calc(100% - 12px * 2)}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{line-height:normal;pointer-events:all}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-10.25px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-10.25px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-24.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-24.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-106%) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-106%) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}'],encapsulation:2,data:{animation:[TP.transitionMessages]},changeDetection:0}),n})(),Gg=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Pa,Kr,tm,Pa]}),n})();function $g(n,t){const e=(0,cn.m)(n)?n:()=>n,i=r=>r.error(e());return new gr.y(t?r=>t.schedule(i,0,r):i)}var gh=W(262);function Hg(n){return(0,_l.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}var Ax=W(3099);const LM=["*"];let Px;function xy(n){return function RP(){if(void 0===Px&&(Px=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(Px=n.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return Px}()?.createHTML(n)||n}function PE(n){return Error(`Unable to find icon with the name "${n}"`)}function FM(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function NM(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class jg{constructor(t,e,i){this.url=t,this.svgText=e,this.options=i}}let Rx=(()=>{class n{constructor(e,i,r,a){this._httpClient=e,this._sanitizer=i,this._errorHandler=a,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(e,i,r){return this.addSvgIconInNamespace("",e,i,r)}addSvgIconLiteral(e,i,r){return this.addSvgIconLiteralInNamespace("",e,i,r)}addSvgIconInNamespace(e,i,r,a){return this._addSvgIconConfig(e,i,new jg(r,null,a))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,i,r,a){const f=this._sanitizer.sanitize(o.q3G.HTML,r);if(!f)throw NM(r);const b=xy(f);return this._addSvgIconConfig(e,i,new jg("",b,a))}addSvgIconSet(e,i){return this.addSvgIconSetInNamespace("",e,i)}addSvgIconSetLiteral(e,i){return this.addSvgIconSetLiteralInNamespace("",e,i)}addSvgIconSetInNamespace(e,i,r){return this._addSvgIconSetConfig(e,new jg(i,null,r))}addSvgIconSetLiteralInNamespace(e,i,r){const a=this._sanitizer.sanitize(o.q3G.HTML,i);if(!a)throw NM(i);const f=xy(a);return this._addSvgIconSetConfig(e,new jg("",f,r))}registerFontClassAlias(e,i=e){return this._fontCssClassesByAlias.set(e,i),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const i=this._sanitizer.sanitize(o.q3G.RESOURCE_URL,e);if(!i)throw FM(e);const r=this._cachedIconsByUrl.get(i);return r?(0,an.of)(Ox(r)):this._loadSvgIconFromConfig(new jg(e,null)).pipe(no(a=>this._cachedIconsByUrl.set(i,a)),(0,kn.U)(a=>Ox(a)))}getNamedSvgIcon(e,i=""){const r=BM(i,e);let a=this._svgIconConfigs.get(r);if(a)return this._getSvgFromConfig(a);if(a=this._getIconConfigFromResolvers(i,e),a)return this._svgIconConfigs.set(r,a),this._getSvgFromConfig(a);const f=this._iconSetConfigs.get(i);return f?this._getSvgFromIconSetConfigs(e,f):$g(PE(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?(0,an.of)(Ox(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe((0,kn.U)(i=>Ox(i)))}_getSvgFromIconSetConfigs(e,i){const r=this._extractIconWithNameFromAnySet(e,i);return r?(0,an.of)(r):ll(i.filter(f=>!f.svgText).map(f=>this._loadSvgIconSetFromConfig(f).pipe((0,gh.K)(b=>{const M=`Loading icon set URL: ${this._sanitizer.sanitize(o.q3G.RESOURCE_URL,f.url)} failed: ${b.message}`;return this._errorHandler.handleError(new Error(M)),(0,an.of)(null)})))).pipe((0,kn.U)(()=>{const f=this._extractIconWithNameFromAnySet(e,i);if(!f)throw PE(e);return f}))}_extractIconWithNameFromAnySet(e,i){for(let r=i.length-1;r>=0;r--){const a=i[r];if(a.svgText&&a.svgText.toString().indexOf(e)>-1){const f=this._svgElementFromConfig(a),b=this._extractSvgIconFromSet(f,e,a.options);if(b)return b}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(no(i=>e.svgText=i),(0,kn.U)(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?(0,an.of)(null):this._fetchIcon(e).pipe(no(i=>e.svgText=i))}_extractSvgIconFromSet(e,i,r){const a=e.querySelector(`[id="${i}"]`);if(!a)return null;const f=a.cloneNode(!0);if(f.removeAttribute("id"),"svg"===f.nodeName.toLowerCase())return this._setSvgAttributes(f,r);if("symbol"===f.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(f),r);const b=this._svgElementFromString(xy("<svg></svg>"));return b.appendChild(f),this._setSvgAttributes(b,r)}_svgElementFromString(e){const i=this._document.createElement("DIV");i.innerHTML=e;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(e){const i=this._svgElementFromString(xy("<svg></svg>")),r=e.attributes;for(let a=0;a<r.length;a++){const{name:f,value:b}=r[a];"id"!==f&&i.setAttribute(f,b)}for(let a=0;a<e.childNodes.length;a++)e.childNodes[a].nodeType===this._document.ELEMENT_NODE&&i.appendChild(e.childNodes[a].cloneNode(!0));return i}_setSvgAttributes(e,i){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),i&&i.viewBox&&e.setAttribute("viewBox",i.viewBox),e}_fetchIcon(e){const{url:i,options:r}=e,a=r?.withCredentials??!1;if(!this._httpClient)throw function kM(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const f=this._sanitizer.sanitize(o.q3G.RESOURCE_URL,i);if(!f)throw FM(i);const b=this._inProgressUrlFetches.get(f);if(b)return b;const S=this._httpClient.get(f,{responseType:"text",withCredentials:a}).pipe((0,kn.U)(M=>xy(M)),Hg(()=>this._inProgressUrlFetches.delete(f)),(0,Ax.B)());return this._inProgressUrlFetches.set(f,S),S}_addSvgIconConfig(e,i,r){return this._svgIconConfigs.set(BM(e,i),r),this}_addSvgIconSetConfig(e,i){const r=this._iconSetConfigs.get(e);return r?r.push(i):this._iconSetConfigs.set(e,[i]),this}_svgElementFromConfig(e){if(!e.svgElement){const i=this._svgElementFromString(e.svgText);this._setSvgAttributes(i,e.options),e.svgElement=i}return e.svgElement}_getIconConfigFromResolvers(e,i){for(let r=0;r<this._resolvers.length;r++){const a=this._resolvers[r](i,e);if(a)return kP(a)?new jg(a.url,null,a.options):new jg(a,null)}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Nc,8),o.LFG(jl),o.LFG(he,8),o.LFG(o.qLn))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ox(n){return n.cloneNode(!0)}function BM(n,t){return n+":"+t}function kP(n){return!(!n.url||!n.options)}const FP=bm(class{constructor(n){this._elementRef=n}}),NP=new o.OlP("MAT_ICON_DEFAULT_OPTIONS"),BP=new o.OlP("mat-icon-location",{providedIn:"root",factory:function d(){const n=(0,o.f3M)(he),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),h=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],g=h.map(n=>`[${n}]`).join(", "),x=/^url\(['"]?#(.*?)['"]?\)$/;let I=(()=>{class n extends FP{constructor(e,i,r,a,f,b){super(e),this._iconRegistry=i,this._location=a,this._errorHandler=f,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Ia.w0.EMPTY,b&&(b.color&&(this.color=this.defaultColor=b.color),b.fontSet&&(this.fontSet=b.fontSet)),r||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=Ei(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const i=this._cleanupFontValue(e);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const i=this._cleanupFontValue(e);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const i=e.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let i=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=e.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>e.classList.remove(r)),i.forEach(r=>e.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const i=this._elementsWithExternalReferences;i&&i.forEach((r,a)=>{r.forEach(f=>{a.setAttribute(f.name,`url('${e}#${f.value}')`)})})}_cacheChildrenWithExternalReferences(e){const i=e.querySelectorAll(g),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let a=0;a<i.length;a++)h.forEach(f=>{const b=i[a],S=b.getAttribute(f),M=S?S.match(x):null;if(M){let O=r.get(b);O||(O=[],r.set(b,O)),O.push({name:f,value:M[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[i,r]=this._splitIconName(e);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe((0,uo.q)(1)).subscribe(a=>this._setSvgElement(a),a=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${a.message}`))})}}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(Rx),o.$8M("aria-hidden"),o.Y36(BP),o.Y36(o.qLn),o.Y36(NP,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(e,i){2&e&&(o.uIk("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet)("fontIcon",i._usingFontIcon()?i.fontIcon:null),o.ekj("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[o.qOj],ngContentSelectors:LM,decls:1,vars:0,template:function(e,i){1&e&&(o.F$t(),o.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),R=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Pa,Pa]}),n})();const V=_u({passive:!0});let Y=(()=>{class n{constructor(e,i){this._platform=e,this._ngZone=i,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return pd.E;const i=wr(e),r=this._monitoredElements.get(i);if(r)return r.subject;const a=new Nn.x,f="cdk-text-field-autofilled",b=S=>{"cdk-text-field-autofill-start"!==S.animationName||i.classList.contains(f)?"cdk-text-field-autofill-end"===S.animationName&&i.classList.contains(f)&&(i.classList.remove(f),this._ngZone.run(()=>a.next({target:S.target,isAutofilled:!1}))):(i.classList.add(f),this._ngZone.run(()=>a.next({target:S.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",b,V),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:a,unlisten:()=>{i.removeEventListener("animationstart",b,V)}}),a}stopMonitoring(e){const i=wr(e),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((e,i)=>this.stopMonitoring(i))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Ga),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),He=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const Nt=new o.OlP("MAT_INPUT_VALUE_ACCESSOR"),en=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let bn=0;const jn=Xb(class{constructor(n,t,e,i){this._defaultErrorStateMatcher=n,this._parentForm=t,this._parentFormGroup=e,this.ngControl=i,this.stateChanges=new Nn.x}});let gi=(()=>{class n extends jn{constructor(e,i,r,a,f,b,S,M,O,N){super(b,a,f,r),this._elementRef=e,this._platform=i,this._autofillMonitor=M,this._formField=N,this._uid="mat-input-"+bn++,this.focused=!1,this.stateChanges=new Nn.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(be=>Th().has(be)),this._iOSKeyupListener=be=>{const Ce=be.target;!Ce.value&&0===Ce.selectionStart&&0===Ce.selectionEnd&&(Ce.setSelectionRange(1,1),Ce.setSelectionRange(0,0))};const U=this._elementRef.nativeElement,j=U.nodeName.toLowerCase();this._inputValueAccessor=S||U,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&O.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===j,this._isTextarea="textarea"===j,this._isInFormField=!!N,this._isNativeSelect&&(this.controlType=U.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this._disabled}set disabled(e){this._disabled=Ei(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(Rt.required)??!1}set required(e){this._required=Ei(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&Th().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=Ei(e)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){const e=this._getPlaceholder();if(e!==this._previousPlaceholder){const i=this._elementRef.nativeElement;this._previousPlaceholder=e,e?i.setAttribute("placeholder",e):i.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){en.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,i=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(Ga),o.Y36(Fs,10),o.Y36(iy,8),o.Y36(ry,8),o.Y36(bw),o.Y36(Nt,10),o.Y36(Y),o.Y36(o.R0b),o.Y36(Mx,8))},n.\u0275dir=o.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(e,i){1&e&&o.NdJ("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),2&e&&(o.Ikx("id",i.id)("disabled",i.disabled)("required",i.required),o.uIk("name",i.name||null)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required)("id",i.id),o.ekj("mat-input-server",i._isServer)("mat-mdc-form-field-textarea-control",i._isInFormField&&i._isTextarea)("mat-mdc-form-field-input-control",i._isInFormField)("mdc-text-field__input",i._isInFormField)("mat-mdc-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[o._Bn([{provide:IE,useExisting:n}]),o.qOj,o.TTD]}),n})(),Yi=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Pa,Gg,Gg,He,Pa]}),n})();const Ir=["trigger"],Rn=["panel"];function Yr(n,t){if(1&n&&(o.TgZ(0,"span",10),o._uU(1),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Oqu(e.placeholder)}}function Wa(n,t){if(1&n&&(o.TgZ(0,"span",14),o._uU(1),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Oqu(e.triggerValue)}}function Ul(n,t){1&n&&o.Hsn(0,0,["*ngSwitchCase","true"])}function zP(n,t){if(1&n&&(o.TgZ(0,"span",11),o.YNc(1,Wa,2,1,"span",12),o.YNc(2,Ul,1,0,"ng-content",13),o.qZA()),2&n){const e=o.oxw();o.Q6J("ngSwitch",!!e.customTrigger),o.xp6(2),o.Q6J("ngSwitchCase",!0)}}function iN(n,t){if(1&n){const e=o.EpF();o.O4$(),o.kcU(),o.TgZ(0,"div",15,16),o.NdJ("@transformPanel.done",function(r){o.CHM(e);const a=o.oxw();return o.KtG(a._panelDoneAnimatingStream.next(r.toState))})("keydown",function(r){o.CHM(e);const a=o.oxw();return o.KtG(a._handleKeydown(r))}),o.Hsn(2,1),o.qZA()}if(2&n){const e=o.oxw();o.Gre("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",e._getPanelTheme(),""),o.Q6J("ngClass",e.panelClass)("@transformPanel","showing"),o.uIk("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}const rN=[[["mat-select-trigger"]],"*"],oN=["mat-select-trigger","*"],sN={transformPanelWrap:Cp("transformPanelWrap",[fd("* => void",o0("@transformPanel",[px()],{optional:!0}))]),transformPanel:Cp("transformPanel",[hd("void",zl({opacity:0,transform:"scale(1, 0.8)"})),fd("void => showing",ph("120ms cubic-bezier(0, 0, 0.2, 1)",zl({opacity:1,transform:"scale(1, 1)"}))),fd("* => void",ph("100ms linear",zl({opacity:0})))])};let UP=0;const VP=new o.OlP("mat-select-scroll-strategy"),lN=new o.OlP("MAT_SELECT_CONFIG"),cN={provide:VP,deps:[Nu],useFactory:function aN(n){return()=>n.scrollStrategies.reposition()}},uN=new o.OlP("MatSelectTrigger");class dN{constructor(t,e){this.source=t,this.value=e}}const hN=Hv(Wb($v(Xb(class{constructor(n,t,e,i,r){this._elementRef=n,this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=i,this.ngControl=r,this.stateChanges=new Nn.x}}))));let fN=(()=>{class n extends hN{constructor(e,i,r,a,f,b,S,M,O,N,U,j,be,Ce){super(f,a,S,M,N),this._viewportRuler=e,this._changeDetectorRef=i,this._ngZone=r,this._dir=b,this._parentFormField=O,this._liveAnnouncer=be,this._defaultOptions=Ce,this._panelOpen=!1,this._compareWith=(et,Ye)=>et===Ye,this._uid="mat-select-"+UP++,this._triggerAriaLabelledBy=null,this._destroy=new Nn.x,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+UP++,this._panelDoneAnimatingStream=new Nn.x,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=wm(()=>{const et=this.options;return et?et.changes.pipe(Yl(et),(0,br.w)(()=>(0,As.T)(...et.map(Ye=>Ye.onSelectionChange)))):this._ngZone.onStable.pipe((0,uo.q)(1),(0,br.w)(()=>this.optionSelectionChanges))}),this.openedChange=new o.vpe,this._openedStream=this.openedChange.pipe((0,co.h)(et=>et),(0,kn.U)(()=>{})),this._closedStream=this.openedChange.pipe((0,co.h)(et=>!et),(0,kn.U)(()=>{})),this.selectionChange=new o.vpe,this.valueChange=new o.vpe,this.ngControl&&(this.ngControl.valueAccessor=this),null!=Ce?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=Ce.typeaheadDebounceInterval),this._scrollStrategyFactory=j,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(U)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(Rt.required)??!1}set required(e){this._required=Ei(e),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._multiple=Ei(e)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(e){this._disableOptionCentering=Ei(e)}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(e){this._typeaheadDebounceInterval=Fi(e)}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new mh(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe((0,fa.x)(),(0,Co.R)(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe((0,Co.R)(this._destroy)).subscribe(e=>{e.added.forEach(i=>i.select()),e.removed.forEach(i=>i.deselect())}),this.options.changes.pipe(Yl(null),(0,Co.R)(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const e=this._getTriggerAriaLabelledby(),i=this.ngControl;if(e!==this._triggerAriaLabelledBy){const r=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?r.setAttribute("aria-labelledby",e):r.removeAttribute("aria-labelledby")}i&&(this._previousControl!==i.control&&(void 0!==this._previousControl&&null!==i.disabled&&i.disabled!==this.disabled&&(this.disabled=i.disabled),this._previousControl=i.control),this.updateErrorState())}ngOnChanges(e){(e.disabled||e.userAriaDescribedBy)&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const e=this._selectionModel.selected.map(i=>i.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){const i=e.keyCode,r=40===i||38===i||37===i||39===i,a=13===i||32===i,f=this._keyManager;if(!f.isTyping()&&a&&!Qc(e)||(this.multiple||e.altKey)&&r)e.preventDefault(),this.open();else if(!this.multiple){const b=this.selected;f.onKeydown(e);const S=this.selected;S&&b!==S&&this._liveAnnouncer.announce(S.viewValue,1e4)}}_handleOpenKeydown(e){const i=this._keyManager,r=e.keyCode,a=40===r||38===r,f=i.isTyping();if(a&&e.altKey)e.preventDefault(),this.close();else if(f||13!==r&&32!==r||!i.activeItem||Qc(e))if(!f&&this._multiple&&65===r&&e.ctrlKey){e.preventDefault();const b=this.options.some(S=>!S.disabled&&!S.selected);this.options.forEach(S=>{S.disabled||(b?S.select():S.deselect())})}else{const b=i.activeItemIndex;i.onKeydown(e),this._multiple&&a&&e.shiftKey&&i.activeItem&&i.activeItemIndex!==b&&i.activeItem._selectViaInteraction()}else e.preventDefault(),i.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe((0,uo.q)(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this._selectionModel.selected.forEach(i=>i.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(i=>this._selectOptionByValue(i)),this._sortValues();else{const i=this._selectOptionByValue(e);i?this._keyManager.updateActiveItem(i):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){const i=this.options.find(r=>{if(this._selectionModel.isSelected(r))return!1;try{return null!=r.value&&this._compareWith(r.value,e)}catch{return!1}});return i&&this._selectionModel.select(i),i}_assignValue(e){return!!(e!==this._value||this._multiple&&Array.isArray(e))&&(this.options&&this._setSelectionByValue(e),this._value=e,!0)}_initKeyManager(){this._keyManager=new sm(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const e=(0,As.T)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe((0,Co.R)(e)).subscribe(i=>{this._onSelect(i.source,i.isUserInput),i.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),(0,As.T)(...this.options.map(i=>i._stateChanges)).pipe((0,Co.R)(e)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(e,i){const r=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(r!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),i&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),i&&this.focus())):(e.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(e.value)),r!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const e=this.options.toArray();this._selectionModel.sort((i,r)=>this.sortComparator?this.sortComparator(i,r,e):e.indexOf(i)-e.indexOf(r)),this.stateChanges.next()}}_propagateChanges(e){let i=null;i=this.multiple?this.selected.map(r=>r.value):this.selected?this.selected.value:e,this._value=i,this.valueChange.emit(i),this._onChange(i),this.selectionChange.emit(this._getChangeEvent(i)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();return this.ariaLabelledby?(e?e+" ":"")+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();let i=(e?e+" ":"")+this._valueId;return this.ariaLabelledby&&(i+=" "+this.ariaLabelledby),i}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Zu),o.Y36(o.sBO),o.Y36(o.R0b),o.Y36(bw),o.Y36(o.SBq),o.Y36(Ll,8),o.Y36(iy,8),o.Y36(ry,8),o.Y36(Mx,8),o.Y36(Fs,10),o.$8M("tabindex"),o.Y36(VP),o.Y36(Er),o.Y36(lN,8))},n.\u0275dir=o.lG2({type:n,viewQuery:function(e,i){if(1&e&&(o.Gf(Ir,5),o.Gf(Rn,5),o.Gf(eE,5)),2&e){let r;o.iGM(r=o.CRH())&&(i.trigger=r.first),o.iGM(r=o.CRH())&&(i.panel=r.first),o.iGM(r=o.CRH())&&(i._overlayDir=r.first)}},inputs:{userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[o.qOj,o.TTD]}),n})(),pN=(()=>{class n extends fN{constructor(){super(...arguments),this._positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}]}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe((0,Co.R)(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(),this._changeDetectorRef.detectChanges())})}ngAfterViewInit(){this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin())}open(){this._overlayWidth=this._getOverlayWidth(),super.open(),this.stateChanges.next()}close(){super.close(),this.stateChanges.next()}_scrollOptionIntoView(e){const i=this.options.toArray()[e];if(i){const r=this.panel.nativeElement,a=function hD(n,t,e){if(e.length){let i=t.toArray(),r=e.toArray(),a=0;for(let f=0;f<n+1;f++)i[f].group&&i[f].group===r[a]&&a++;return a}return 0}(e,this.options,this.optionGroups),f=i._getHostElement();r.scrollTop=0===e&&1===a?0:function ex(n,t,e,i){return n<e?n:n+t>e+i?Math.max(0,n-i+t):e}(f.offsetTop,f.offsetHeight,r.scrollTop,r.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(e){return new dN(this,e)}_getOverlayWidth(){return(this._preferredOverlayOrigin instanceof dx?this._preferredOverlayOrigin.elementRef:this._preferredOverlayOrigin||this._elementRef).nativeElement.getBoundingClientRect().width}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-select"]],contentQueries:function(e,i,r){if(1&e&&(o.Suo(r,uN,5),o.Suo(r,Tw,5),o.Suo(r,Qb,5)),2&e){let a;o.iGM(a=o.CRH())&&(i.customTrigger=a.first),o.iGM(a=o.CRH())&&(i.options=a),o.iGM(a=o.CRH())&&(i.optionGroups=a)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(e,i){1&e&&o.NdJ("keydown",function(a){return i._handleKeydown(a)})("focus",function(){return i._onFocus()})("blur",function(){return i._onBlur()}),2&e&&(o.uIk("id",i.id)("tabindex",i.tabIndex)("aria-controls",i.panelOpen?i.id+"-panel":null)("aria-expanded",i.panelOpen)("aria-label",i.ariaLabel||null)("aria-required",i.required.toString())("aria-disabled",i.disabled.toString())("aria-invalid",i.errorState)("aria-activedescendant",i._getAriaActiveDescendant()),o.ekj("mat-mdc-select-disabled",i.disabled)("mat-mdc-select-invalid",i.errorState)("mat-mdc-select-required",i.required)("mat-mdc-select-empty",i.empty)("mat-mdc-select-multiple",i.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[o._Bn([{provide:IE,useExisting:n},{provide:Mw,useExisting:n}]),o.qOj],ngContentSelectors:oN,decls:11,vars:11,consts:[["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],[1,"mat-mdc-select-value",3,"ngSwitch"],["class","mat-mdc-select-placeholder mat-mdc-select-min-line",4,"ngSwitchCase"],["class","mat-mdc-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth","backdropClick","attach","detach"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text",3,"ngSwitch"],["class","mat-mdc-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(e,i){if(1&e&&(o.F$t(rN),o.TgZ(0,"div",0,1),o.NdJ("click",function(){return i.toggle()}),o.TgZ(3,"div",2),o.YNc(4,Yr,2,1,"span",3),o.YNc(5,zP,3,2,"span",4),o.qZA(),o.TgZ(6,"div",5)(7,"div",6),o.O4$(),o.TgZ(8,"svg",7),o._UZ(9,"path",8),o.qZA()()()(),o.YNc(10,iN,3,9,"ng-template",9),o.NdJ("backdropClick",function(){return i.close()})("attach",function(){return i._onAttached()})("detach",function(){return i.close()})),2&e){const r=o.MAs(1);o.uIk("aria-owns",i.panelOpen?i.id+"-panel":null),o.xp6(3),o.Q6J("ngSwitch",i.empty),o.uIk("id",i._valueId),o.xp6(1),o.Q6J("ngSwitchCase",!0),o.xp6(1),o.Q6J("ngSwitchCase",!1),o.xp6(5),o.Q6J("cdkConnectedOverlayPanelClass",i._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",i._scrollStrategy)("cdkConnectedOverlayOrigin",i._preferredOverlayOrigin||r)("cdkConnectedOverlayOpen",i.panelOpen)("cdkConnectedOverlayPositions",i._positions)("cdkConnectedOverlayWidth",i._overlayWidth)}},dependencies:[eo,Xi,An,Xa,eE,dx],styles:['.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;max-width:calc(100vw - 32px);max-width:var(--mdc-menu-max-width, calc(100vw - 32px));max-height:calc(100vh - 32px);max-height:var(--mdc-menu-max-height, calc(100vh - 32px));margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;z-index:8;border-radius:4px;border-radius:var(--mdc-shape-medium, 4px);transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(0.8);opacity:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}.mat-mdc-select{display:inline-block;width:100%;outline:none}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:translateY(-8px)}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-select-arrow{width:10px;height:5px;position:relative}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:GrayText}.mdc-menu-surface.mat-mdc-select-panel{width:100%;max-height:275px;position:static;outline:0;margin:0;padding:8px 0;list-style-type:none}.mdc-menu-surface.mat-mdc-select-panel:focus{outline:none}.cdk-high-contrast-active .mdc-menu-surface.mat-mdc-select-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) .mdc-menu-surface.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above .mdc-menu-surface.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[sN.transformPanel]},changeDetection:0}),n})(),mN=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[cN],imports:[Kr,Ug,Wv,Pa,Wu,Gg,Wv,Pa]}),n})();const gN=["switch"],_N=["*"],yN=new o.OlP("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})}),vN={provide:js,useExisting:(0,o.Gpc)(()=>RE),multi:!0};class GP{constructor(t,e){this.source=t,this.checked=e}}let bN=0;const xN=Wb(bm(Hv($v(class{constructor(n){this._elementRef=n}}))));let wN=(()=>{class n extends xN{constructor(e,i,r,a,f,b,S){super(e),this._focusMonitor=i,this._changeDetectorRef=r,this.defaults=f,this._onChange=M=>{},this._onTouched=()=>{},this._required=!1,this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new o.vpe,this.toggleChange=new o.vpe,this.tabIndex=parseInt(a)||0,this.color=this.defaultColor=f.color||"accent",this._noopAnimations="NoopAnimations"===b,this.id=this._uniqueId=`${S}${++bN}`}get required(){return this._required}set required(e){this._required=Ei(e)}get checked(){return this._checked}set checked(e){this._checked=Ei(e),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{"keyboard"===e||"program"===e?(this._focused=!0,this._changeDetectorRef.markForCheck()):e||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(e){this.checked=!!e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}}return n.\u0275fac=function(e){o.$Z()},n.\u0275dir=o.lG2({type:n,inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},features:[o.qOj]}),n})(),RE=(()=>{class n extends wN{constructor(e,i,r,a,f,b){super(e,i,r,a,f,b,"mat-mdc-slide-toggle-"),this._labelId=this._uniqueId+"-label"}get buttonId(){return`${this.id||this._uniqueId}-button`}_handleClick(){this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new GP(this,this.checked)))}focus(){this._switchElement.nativeElement.focus()}_createChangeEvent(e){return new GP(this,e)}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(Ta),o.Y36(o.sBO),o.$8M("tabindex"),o.Y36(yN),o.Y36(o.QbO,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-slide-toggle"]],viewQuery:function(e,i){if(1&e&&o.Gf(gN,5),2&e){let r;o.iGM(r=o.CRH())&&(i._switchElement=r.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:11,hostBindings:function(e,i){2&e&&(o.Ikx("id",i.id),o.uIk("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),o.ekj("mat-mdc-slide-toggle-focused",i._focused)("mat-mdc-slide-toggle-checked",i.checked)("_mat-animation-noopable",i._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matSlideToggle"],features:[o._Bn([vN]),o.qOj],ngContentSelectors:_N,decls:17,vars:24,consts:[[1,"mdc-form-field"],["role","switch","type","button",1,"mdc-switch",3,"tabIndex","disabled","click"],["switch",""],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-switch__icons"],["viewBox","0 0 24 24",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"],[3,"for","click"]],template:function(e,i){if(1&e&&(o.F$t(),o.TgZ(0,"div",0)(1,"button",1,2),o.NdJ("click",function(){return i._handleClick()}),o._UZ(3,"div",3),o.TgZ(4,"div",4)(5,"div",5)(6,"div",6),o._UZ(7,"div",7),o.qZA(),o.TgZ(8,"div",8),o._UZ(9,"div",9),o.qZA(),o.TgZ(10,"div",10),o.O4$(),o.TgZ(11,"svg",11),o._UZ(12,"path",12),o.qZA(),o.TgZ(13,"svg",13),o._UZ(14,"path",14),o.qZA()()()()(),o.kcU(),o.TgZ(15,"label",15),o.NdJ("click",function(a){return a.stopPropagation()}),o.Hsn(16),o.qZA()()),2&e){const r=o.MAs(2);o.ekj("mdc-form-field--align-end","before"==i.labelPosition),o.xp6(1),o.ekj("mdc-switch--selected",i.checked)("mdc-switch--unselected",!i.checked)("mdc-switch--checked",i.checked)("mdc-switch--disabled",i.disabled),o.Q6J("tabIndex",i.tabIndex)("disabled",i.disabled),o.uIk("id",i.buttonId)("name",i.name)("aria-label",i.ariaLabel)("aria-labelledby",i._getAriaLabelledBy())("aria-describedby",i.ariaDescribedby)("aria-required",i.required||null)("aria-checked",i.checked),o.xp6(8),o.Q6J("matRippleTrigger",r)("matRippleDisabled",i.disableRipple||i.disabled)("matRippleCentered",!0),o.xp6(6),o.Q6J("for",i.buttonId),o.uIk("id",i._labelId)}},dependencies:[Ng],styles:['.mdc-form-field{display:inline-flex;align-items:center;vertical-align:middle}.mdc-form-field[hidden]{display:none}.mdc-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{margin-left:auto;margin-right:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{padding-left:0;padding-right:4px}.mdc-form-field--nowrap>label{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{margin-left:0;margin-right:auto}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{padding-left:4px;padding-right:0}.mdc-form-field--space-between{justify-content:space-between}.mdc-form-field--space-between>label{margin:0}[dir=rtl] .mdc-form-field--space-between>label,.mdc-form-field--space-between>label[dir=rtl]{margin:0}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1);background-color:var(--mdc-elevation-overlay-color, #fff)}.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative}.mdc-switch[hidden]{display:none}.mdc-switch:disabled{cursor:default;pointer-events:none}.mdc-switch__track{overflow:hidden;position:relative;width:100%}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%}@media screen and (forced-colors: active){.mdc-switch__track::before,.mdc-switch__track::after{border-color:currentColor}}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(-100%)}[dir=rtl] .mdc-switch__track::after,.mdc-switch__track[dir=rtl]::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track[dir=rtl]::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0)}[dir=rtl] .mdc-switch__handle-track,.mdc-switch__handle-track[dir=rtl]{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track,.mdc-switch--selected .mdc-switch__handle-track[dir=rtl]{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto}[dir=rtl] .mdc-switch__handle,.mdc-switch__handle[dir=rtl]{left:auto;right:0}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}@media screen and (forced-colors: active){.mdc-switch__handle::before,.mdc-switch__handle::after{border-color:currentColor}}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-elevation-overlay{bottom:0;left:0;right:0;top:0}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1}.mdc-switch:disabled .mdc-switch__ripple{display:none}.mdc-switch__icons{height:100%;position:relative;width:100%;z-index:1}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle{display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mdc-switch{width:var(--mdc-switch-track-width, 36px)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-selected-handle-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-hover-handle-color, #310077)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-focus-handle-color, #310077)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-selected-pressed-handle-color, #310077)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-selected-handle-color, #424242)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-unselected-handle-color, #616161)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-hover-handle-color, #212121)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-focus-handle-color, #212121)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-unselected-pressed-handle-color, #212121)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-unselected-handle-color, #424242)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle::before{background:var(--mdc-switch-handle-surface-color, var(--mdc-theme-surface, #fff))}.mat-mdc-slide-toggle .mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation, 0px 2px 1px -1px rgba(0, 0, 0, 0.2), 0px 1px 1px 0px rgba(0, 0, 0, 0.14), 0px 1px 3px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__focus-ring-wrapper,.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle{height:var(--mdc-switch-handle-height, 20px)}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__handle::after{opacity:var(--mdc-switch-disabled-handle-opacity, 0.38)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle{border-radius:var(--mdc-switch-handle-shape, 10px)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle{width:var(--mdc-switch-handle-width, 20px)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle-track{width:calc(100% - var(--mdc-switch-handle-width, 20px))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled .mdc-switch__icon{fill:var(--mdc-switch-selected-icon-color, var(--mdc-theme-on-primary, #fff))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-selected-icon-color, var(--mdc-theme-on-primary, #fff))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled .mdc-switch__icon{fill:var(--mdc-switch-unselected-icon-color, var(--mdc-theme-on-primary, #fff))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-unselected-icon-color, var(--mdc-theme-on-primary, #fff))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-selected-icon-opacity, 0.38)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected .mdc-switch__icon{width:var(--mdc-switch-selected-icon-size, 18px);height:var(--mdc-switch-selected-icon-size, 18px)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected .mdc-switch__icon{width:var(--mdc-switch-unselected-icon-size, 18px);height:var(--mdc-switch-unselected-icon-size, 18px)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-hover-state-layer-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-focus-state-layer-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-pressed-state-layer-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-hover-state-layer-color, #424242)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-focus-state-layer-color, #424242)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-pressed-state-layer-color, #424242)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-selected-hover-state-layer-opacity, 0.04)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-selected-focus-state-layer-opacity, 0.12)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-selected-pressed-state-layer-opacity, 0.1)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-selected-pressed-state-layer-opacity, 0.1)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-unselected-hover-state-layer-opacity, 0.04)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-unselected-focus-state-layer-opacity, 0.12)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity, 0.1)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity, 0.1)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__ripple{height:var(--mdc-switch-state-layer-size, 48px);width:var(--mdc-switch-state-layer-size, 48px)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__track{height:var(--mdc-switch-track-height, 14px)}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__track{opacity:var(--mdc-switch-disabled-track-opacity, 0.12)}.mat-mdc-slide-toggle .mdc-switch:enabled .mdc-switch__track::after{background:var(--mdc-switch-selected-track-color, #d7bbff)}.mat-mdc-slide-toggle .mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-hover-track-color, #d7bbff)}.mat-mdc-slide-toggle .mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-focus-track-color, #d7bbff)}.mat-mdc-slide-toggle .mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mdc-switch-selected-pressed-track-color, #d7bbff)}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__track::after{background:var(--mdc-switch-disabled-selected-track-color, #424242)}.mat-mdc-slide-toggle .mdc-switch:enabled .mdc-switch__track::before{background:var(--mdc-switch-unselected-track-color, #e0e0e0)}.mat-mdc-slide-toggle .mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-hover-track-color, #e0e0e0)}.mat-mdc-slide-toggle .mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-focus-track-color, #e0e0e0)}.mat-mdc-slide-toggle .mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mdc-switch-unselected-pressed-track-color, #e0e0e0)}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__track::before{background:var(--mdc-switch-disabled-unselected-track-color, #424242)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__track{border-radius:var(--mdc-switch-track-shape, 7px)}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle .mdc-switch__ripple::after{content:"";opacity:0}.mat-mdc-slide-toggle .mdc-switch:hover .mdc-switch__ripple::after{opacity:.04;transition:opacity 75ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mdc-switch .mdc-switch__ripple::after{opacity:.12}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-mdc-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-mdc-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-elevation-overlay,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}'],encapsulation:2,changeDetection:0}),n})(),$P=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),SN=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[$P,Pa,Zv,Kr,$P,Pa]}),n})();const DN=["knob"],MN=["valueIndicatorContainer"];function IN(n,t){if(1&n&&(o.TgZ(0,"div",4,5)(2,"div",6)(3,"span",7),o._uU(4),o.qZA()()()),2&n){const e=o.oxw();o.xp6(4),o.Oqu(e.valueIndicatorText)}}const TN=["trackActive"];function AN(n,t){if(1&n&&o._UZ(0,"div"),2&n){const e=t.$implicit,i=t.index,r=o.oxw(3);o.Tol(0===e?"mdc-slider__tick-mark--active":"mdc-slider__tick-mark--inactive"),o.Udp("transform",r._calcTickMarkTransform(i))}}function PN(n,t){if(1&n&&(o.ynx(0),o.YNc(1,AN,1,4,"div",11),o.BQk()),2&n){const e=o.oxw(2);o.xp6(1),o.Q6J("ngForOf",e._tickMarks)}}function RN(n,t){if(1&n&&(o.TgZ(0,"div",8,9),o.YNc(2,PN,2,1,"ng-container",10),o.qZA()),2&n){const e=o.oxw();o.xp6(2),o.Q6J("ngIf",e._cachedWidth)}}function ON(n,t){if(1&n&&o._UZ(0,"mat-slider-visual-thumb",7),2&n){const e=o.oxw();o.Q6J("discrete",e.discrete)("thumbPosition",1)("valueIndicatorText",e.startValueIndicatorText)}}const LN=["*"],OE=new o.OlP("_MatSlider"),HP=new o.OlP("_MatSliderThumb"),jP=new o.OlP("_MatSliderRangeThumb"),qP=new o.OlP("_MatSliderVisualThumb");let kN=(()=>{class n{constructor(e,i,r,a){this._cdr=e,this._ngZone=i,this._slider=a,this._isHovered=!1,this._isActive=!1,this._isValueIndicatorVisible=!1,this._onPointerMove=f=>{if(this._sliderInput._isFocused)return;const b=this._hostElement.getBoundingClientRect(),S=this._isSliderThumbHovered(f,b);this._isHovered=S,S?this._showHoverRipple():this._hideRipple(this._hoverRippleRef)},this._onMouseLeave=()=>{this._isHovered=!1,this._hideRipple(this._hoverRippleRef)},this._onFocus=()=>{this._hideRipple(this._hoverRippleRef),this._showFocusRipple(),this._hostElement.classList.add("mdc-slider__thumb--focused")},this._onBlur=()=>{this._isActive||this._hideRipple(this._focusRippleRef),this._isHovered&&this._showHoverRipple(),this._hostElement.classList.remove("mdc-slider__thumb--focused")},this._onDragStart=()=>{this._isActive=!0,this._showActiveRipple()},this._onDragEnd=()=>{this._isActive=!1,this._hideRipple(this._activeRippleRef),this._sliderInput._isFocused||this._hideRipple(this._focusRippleRef)},this._hostElement=r.nativeElement}ngAfterViewInit(){this._ripple.radius=24,this._sliderInput=this._slider._getInput(this.thumbPosition),this._sliderInputEl=this._sliderInput._hostElement;const e=this._sliderInputEl;this._ngZone.runOutsideAngular(()=>{e.addEventListener("pointermove",this._onPointerMove),e.addEventListener("pointerdown",this._onDragStart),e.addEventListener("pointerup",this._onDragEnd),e.addEventListener("pointerleave",this._onMouseLeave),e.addEventListener("focus",this._onFocus),e.addEventListener("blur",this._onBlur)})}ngOnDestroy(){const e=this._sliderInputEl;e.removeEventListener("pointermove",this._onPointerMove),e.removeEventListener("pointerdown",this._onDragStart),e.removeEventListener("pointerup",this._onDragEnd),e.removeEventListener("pointerleave",this._onMouseLeave),e.removeEventListener("focus",this._onFocus),e.removeEventListener("blur",this._onBlur)}_showHoverRipple(){this._isShowingRipple(this._hoverRippleRef)||(this._hoverRippleRef=this._showRipple({enterDuration:0,exitDuration:0}),this._hoverRippleRef?.element.classList.add("mat-mdc-slider-hover-ripple"))}_showFocusRipple(){this._isShowingRipple(this._focusRippleRef)||(this._focusRippleRef=this._showRipple({enterDuration:0,exitDuration:0},!0),this._focusRippleRef?.element.classList.add("mat-mdc-slider-focus-ripple"))}_showActiveRipple(){this._isShowingRipple(this._activeRippleRef)||(this._activeRippleRef=this._showRipple({enterDuration:225,exitDuration:400}),this._activeRippleRef?.element.classList.add("mat-mdc-slider-active-ripple"))}_isShowingRipple(e){return 0===e?.state||1===e?.state}_showRipple(e,i){if(!this._slider.disabled&&(this._showValueIndicator(),this._slider._isRange&&this._slider._getThumb(1===this.thumbPosition?2:1)._showValueIndicator(),!this._slider._globalRippleOptions?.disabled||i))return this._ripple.launch({animation:this._slider._noopAnimations?{enterDuration:0,exitDuration:0}:e,centered:!0,persistent:!0})}_hideRipple(e){if(e?.fadeOut(),this._isShowingAnyRipple())return;this._slider._isRange||this._hideValueIndicator();const i=this._getSibling();i._isShowingAnyRipple()||(this._hideValueIndicator(),i._hideValueIndicator())}_showValueIndicator(){this._hostElement.classList.add("mdc-slider__thumb--with-indicator")}_hideValueIndicator(){this._hostElement.classList.remove("mdc-slider__thumb--with-indicator")}_getSibling(){return this._slider._getThumb(1===this.thumbPosition?2:1)}_getValueIndicatorContainer(){return this._valueIndicatorContainer?.nativeElement}_getKnob(){return this._knob.nativeElement}_isShowingAnyRipple(){return this._isShowingRipple(this._hoverRippleRef)||this._isShowingRipple(this._focusRippleRef)||this._isShowingRipple(this._activeRippleRef)}_isSliderThumbHovered(e,i){const r=i.width/2,S=e.clientY-(i.y+r);return Math.pow(e.clientX-(i.x+r),2)+Math.pow(S,2)<Math.pow(r,2)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.sBO),o.Y36(o.R0b),o.Y36(o.SBq),o.Y36(OE))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-slider-visual-thumb"]],viewQuery:function(e,i){if(1&e&&(o.Gf(Ng,5),o.Gf(DN,5),o.Gf(MN,5)),2&e){let r;o.iGM(r=o.CRH())&&(i._ripple=r.first),o.iGM(r=o.CRH())&&(i._knob=r.first),o.iGM(r=o.CRH())&&(i._valueIndicatorContainer=r.first)}},hostAttrs:[1,"mdc-slider__thumb","mat-mdc-slider-visual-thumb"],inputs:{discrete:"discrete",thumbPosition:"thumbPosition",valueIndicatorText:"valueIndicatorText"},features:[o._Bn([{provide:qP,useExisting:n}])],decls:4,vars:2,consts:[["class","mdc-slider__value-indicator-container",4,"ngIf"],[1,"mdc-slider__thumb-knob"],["knob",""],["matRipple","",1,"mat-mdc-focus-indicator",3,"matRippleDisabled"],[1,"mdc-slider__value-indicator-container"],["valueIndicatorContainer",""],[1,"mdc-slider__value-indicator"],[1,"mdc-slider__value-indicator-text"]],template:function(e,i){1&e&&(o.YNc(0,IN,5,1,"div",0),o._UZ(1,"div",1,2)(3,"div",3)),2&e&&(o.Q6J("ngIf",i.discrete),o.xp6(3),o.Q6J("matRippleDisabled",!0))},dependencies:[ci,Ng],styles:[".mat-mdc-slider-visual-thumb .mat-ripple{height:100%;width:100%}.mat-mdc-slider .mdc-slider__tick-marks{justify-content:start}.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--active,.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--inactive{position:absolute;left:2px}"],encapsulation:2,changeDetection:0}),n})();const FN=bm(Hv(class{constructor(n){this._elementRef=n}}),"primary");let YP=(()=>{class n extends FN{constructor(e,i,r,a,f,b,S){super(a),this._ngZone=e,this._cdr=i,this._platform=r,this._dir=f,this._globalRippleOptions=b,this._disabled=!1,this._discrete=!1,this._showTickMarks=!1,this._min=0,this._max=100,this._step=0,this.displayWith=M=>`${M}`,this._rippleRadius=24,this.startValueIndicatorText="",this.endValueIndicatorText="",this._isRange=!1,this._isRtl=!1,this._hasViewInitialized=!1,this._tickMarkTrackWidth=0,this._hasAnimation=!1,this._resizeTimer=null,this._knobRadius=8,this._thumbsOverlap=!1,this._noopAnimations="NoopAnimations"===S,this._dirChangeSubscription=this._dir.change.subscribe(()=>this._onDirChange()),this._isRtl="rtl"===this._dir.value}get disabled(){return this._disabled}set disabled(e){this._disabled=Ei(e);const i=this._getInput(2),r=this._getInput(1);i&&(i.disabled=this._disabled),r&&(r.disabled=this._disabled)}get discrete(){return this._discrete}set discrete(e){this._discrete=Ei(e),this._updateValueIndicatorUIs()}get showTickMarks(){return this._showTickMarks}set showTickMarks(e){this._showTickMarks=Ei(e)}get min(){return this._min}set min(e){const i=Fi(e,this._min);this._min!==i&&this._updateMin(i)}_updateMin(e){const i=this._min;this._min=e,this._isRange?this._updateMinRange({old:i,new:e}):this._updateMinNonRange(e),this._onMinMaxOrStepChange()}_updateMinRange(e){const i=this._getInput(2),r=this._getInput(1),a=i.value,f=r.value;r.min=e.new,i.min=Math.max(e.new,r.value),r.max=Math.min(i.max,i.value),r._updateWidthInactive(),i._updateWidthInactive(),e.new<e.old?this._onTranslateXChangeBySideEffect(i,r):this._onTranslateXChangeBySideEffect(r,i),a!==i.value&&this._onValueChange(i),f!==r.value&&this._onValueChange(r)}_updateMinNonRange(e){const i=this._getInput(2);if(i){const r=i.value;i.min=e,i._updateThumbUIByValue(),this._updateTrackUI(i),r!==i.value&&this._onValueChange(i)}}get max(){return this._max}set max(e){const i=Fi(e,this._max);this._max!==i&&this._updateMax(i)}_updateMax(e){const i=this._max;this._max=e,this._isRange?this._updateMaxRange({old:i,new:e}):this._updateMaxNonRange(e),this._onMinMaxOrStepChange()}_updateMaxRange(e){const i=this._getInput(2),r=this._getInput(1),a=i.value,f=r.value;i.max=e.new,r.max=Math.min(e.new,i.value),i.min=r.value,i._updateWidthInactive(),r._updateWidthInactive(),e.new>e.old?this._onTranslateXChangeBySideEffect(r,i):this._onTranslateXChangeBySideEffect(i,r),a!==i.value&&this._onValueChange(i),f!==r.value&&this._onValueChange(r)}_updateMaxNonRange(e){const i=this._getInput(2);if(i){const r=i.value;i.max=e,i._updateThumbUIByValue(),this._updateTrackUI(i),r!==i.value&&this._onValueChange(i)}}get step(){return this._step}set step(e){const i=Fi(e,this._step);this._step!==i&&this._updateStep(i)}_updateStep(e){this._step=e,this._isRange?this._updateStepRange():this._updateStepNonRange(),this._onMinMaxOrStepChange()}_updateStepRange(){const e=this._getInput(2),i=this._getInput(1),r=e.value,a=i.value,f=i.value;e.min=this._min,i.max=this._max,e.step=this._step,i.step=this._step,this._platform.SAFARI&&(e.value=e.value,i.value=i.value),e.min=Math.max(this._min,i.value),i.max=Math.min(this._max,e.value),i._updateWidthInactive(),e._updateWidthInactive(),e.value<f?this._onTranslateXChangeBySideEffect(i,e):this._onTranslateXChangeBySideEffect(e,i),r!==e.value&&this._onValueChange(e),a!==i.value&&this._onValueChange(i)}_updateStepNonRange(){const e=this._getInput(2);if(e){const i=e.value;e.step=this._step,this._platform.SAFARI&&(e.value=e.value),e._updateThumbUIByValue(),i!==e.value&&this._onValueChange(e)}}ngAfterViewInit(){this._platform.isBrowser&&this._updateDimensions();const e=this._getInput(2),i=this._getInput(1);this._isRange=!!e&&!!i,this._cdr.detectChanges();const r=this._getThumb(2);this._rippleRadius=r._ripple.radius,this._inputPadding=this._rippleRadius-this._knobRadius,this._inputOffset=this._knobRadius,this._isRange?this._initUIRange(e,i):this._initUINonRange(e),this._updateTrackUI(e),this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._observeHostResize(),this._cdr.detectChanges()}_initUINonRange(e){e.initProps(),e.initUI(),this._updateValueIndicatorUI(e),this._hasViewInitialized=!0,e._updateThumbUIByValue()}_initUIRange(e,i){e.initProps(),e.initUI(),i.initProps(),i.initUI(),e._updateMinMax(),i._updateMinMax(),e._updateStaticStyles(),i._updateStaticStyles(),this._updateValueIndicatorUIs(),this._hasViewInitialized=!0,e._updateThumbUIByValue(),i._updateThumbUIByValue()}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._resizeObserver?.disconnect(),this._resizeObserver=null}_onDirChange(){this._isRtl="rtl"===this._dir.value,this._isRange?this._onDirChangeRange():this._onDirChangeNonRange(),this._updateTickMarkUI()}_onDirChangeRange(){const e=this._getInput(2),i=this._getInput(1);e._setIsLeftThumb(),i._setIsLeftThumb(),e.translateX=e._calcTranslateXByValue(),i.translateX=i._calcTranslateXByValue(),e._updateStaticStyles(),i._updateStaticStyles(),e._updateWidthInactive(),i._updateWidthInactive(),e._updateThumbUIByValue(),i._updateThumbUIByValue()}_onDirChangeNonRange(){this._getInput(2)._updateThumbUIByValue()}_observeHostResize(){typeof ResizeObserver>"u"||!ResizeObserver||this._ngZone.runOutsideAngular(()=>{this._resizeObserver=new ResizeObserver(()=>{this._isActive()||(this._resizeTimer&&clearTimeout(this._resizeTimer),this._onResize())}),this._resizeObserver.observe(this._elementRef.nativeElement)})}_isActive(){return this._getThumb(1)._isActive||this._getThumb(2)._isActive}_getValue(e=2){const i=this._getInput(e);return i?i.value:this.min}_skipUpdate(){return!(!this._getInput(1)?._skipUIUpdate&&!this._getInput(2)?._skipUIUpdate)}_updateDimensions(){this._cachedWidth=this._elementRef.nativeElement.offsetWidth,this._cachedLeft=this._elementRef.nativeElement.getBoundingClientRect().left}_setTrackActiveStyles(e){const i=this._trackActive.nativeElement.style,r=e.left!==i.left&&e.right!==i.right;i.left=e.left,i.right=e.right,i.transformOrigin=e.transformOrigin,r?(this._elementRef.nativeElement.classList.add("mat-mdc-slider-disable-track-animation"),this._ngZone.onStable.pipe((0,uo.q)(1)).subscribe(()=>{this._elementRef.nativeElement.classList.remove("mat-mdc-slider-disable-track-animation"),i.transform=e.transform})):i.transform=e.transform}_calcTickMarkTransform(e){return`translateX(${e*(this._tickMarkTrackWidth/(this._tickMarks.length-1))}px`}_onTranslateXChange(e){!this._hasViewInitialized||(this._updateThumbUI(e),this._updateTrackUI(e),this._updateOverlappingThumbUI(e))}_onTranslateXChangeBySideEffect(e,i){!this._hasViewInitialized||(e._updateThumbUIByValue(),i._updateThumbUIByValue())}_onValueChange(e){!this._hasViewInitialized||(this._updateValueIndicatorUI(e),this._updateTickMarkUI(),this._cdr.detectChanges())}_onMinMaxOrStepChange(){!this._hasViewInitialized||(this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.markForCheck())}_onResize(){if(this._hasViewInitialized){if(this._updateDimensions(),this._isRange){const e=this._getInput(2),i=this._getInput(1);e._updateThumbUIByValue(),i._updateThumbUIByValue(),e._updateStaticStyles(),i._updateStaticStyles(),e._updateMinMax(),i._updateMinMax(),e._updateWidthInactive(),i._updateWidthInactive()}else{const e=this._getInput(2);e&&e._updateThumbUIByValue()}this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.detectChanges()}}_areThumbsOverlapping(){const e=this._getInput(1),i=this._getInput(2);return!(!e||!i)&&i.translateX-e.translateX<20}_updateOverlappingThumbClassNames(e){const i=e.getSibling(),r=this._getThumb(e.thumbPosition);this._getThumb(i.thumbPosition)._hostElement.classList.remove("mdc-slider__thumb--top"),r._hostElement.classList.toggle("mdc-slider__thumb--top",this._thumbsOverlap)}_updateOverlappingThumbUI(e){!this._isRange||this._skipUpdate()||this._thumbsOverlap!==this._areThumbsOverlapping()&&(this._thumbsOverlap=!this._thumbsOverlap,this._updateOverlappingThumbClassNames(e))}_updateThumbUI(e){this._skipUpdate()||(this._getThumb(2===e.thumbPosition?2:1)._hostElement.style.transform=`translateX(${e.translateX}px)`)}_updateValueIndicatorUI(e){if(this._skipUpdate())return;const i=this.displayWith(e.value);if(this._hasViewInitialized?e._valuetext=i:e._hostElement.setAttribute("aria-valuetext",i),this.discrete){1===e.thumbPosition?this.startValueIndicatorText=i:this.endValueIndicatorText=i;const r=this._getThumb(e.thumbPosition);i.length<3?r._hostElement.classList.add("mdc-slider__thumb--short-value"):r._hostElement.classList.remove("mdc-slider__thumb--short-value")}}_updateValueIndicatorUIs(){const e=this._getInput(2),i=this._getInput(1);e&&this._updateValueIndicatorUI(e),i&&this._updateValueIndicatorUI(i)}_updateTickMarkTrackUI(){if(this._skipUpdate())return;const e=this._step&&this._step>0?this._step:1,r=(Math.floor(this.max/e)*e-this.min)/(this.max-this.min);this._tickMarkTrackWidth=this._cachedWidth*r-6}_updateTrackUI(e){this._skipUpdate()||(this._isRange?this._updateTrackUIRange(e):this._updateTrackUINonRange(e))}_updateTrackUIRange(e){const i=e.getSibling();if(!i||!this._cachedWidth)return;const r=Math.abs(i.translateX-e.translateX)/this._cachedWidth;this._setTrackActiveStyles(e._isLeftThumb&&this._cachedWidth?{left:"auto",right:this._cachedWidth-i.translateX+"px",transformOrigin:"right",transform:`scaleX(${r})`}:{left:`${i.translateX}px`,right:"auto",transformOrigin:"left",transform:`scaleX(${r})`})}_updateTrackUINonRange(e){this._setTrackActiveStyles(this._isRtl?{left:"auto",right:"0px",transformOrigin:"right",transform:`scaleX(${1-e.fillPercentage})`}:{left:"0px",right:"auto",transformOrigin:"left",transform:`scaleX(${e.fillPercentage})`})}_updateTickMarkUI(){if(void 0===this.step||void 0===this.min||void 0===this.max)return;const e=this.step>0?this.step:1;this._isRange?this._updateTickMarkUIRange(e):this._updateTickMarkUINonRange(e),this._isRtl&&this._tickMarks.reverse()}_updateTickMarkUINonRange(e){const i=this._getValue();let r=Math.max(Math.round((i-this.min)/e),0),a=Math.max(Math.round((this.max-i)/e),0);this._isRtl?r++:a++,this._tickMarks=Array(r).fill(0).concat(Array(a).fill(1))}_updateTickMarkUIRange(e){const i=this._getValue(),r=this._getValue(1),a=Math.max(Math.floor((r-this.min)/e),0),f=Math.max(Math.floor((i-r)/e)+1,0),b=Math.max(Math.floor((this.max-i)/e),0);this._tickMarks=Array(a).fill(1).concat(Array(f).fill(0),Array(b).fill(1))}_getInput(e){return 2===e&&this._input?this._input:this._inputs?.length?1===e?this._inputs.first:this._inputs.last:void 0}_getThumb(e){return 2===e?this._thumbs?.last:this._thumbs?.first}_setTransition(e){this._hasAnimation=e&&!this._noopAnimations,this._elementRef.nativeElement.classList.toggle("mat-mdc-slider-with-animation",this._hasAnimation)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.R0b),o.Y36(o.sBO),o.Y36(Ga),o.Y36(o.SBq),o.Y36(Ll,8),o.Y36(Dw,8),o.Y36(o.QbO,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-slider"]],contentQueries:function(e,i,r){if(1&e&&(o.Suo(r,HP,5),o.Suo(r,jP,4)),2&e){let a;o.iGM(a=o.CRH())&&(i._input=a.first),o.iGM(a=o.CRH())&&(i._inputs=a)}},viewQuery:function(e,i){if(1&e&&(o.Gf(TN,5),o.Gf(qP,5)),2&e){let r;o.iGM(r=o.CRH())&&(i._trackActive=r.first),o.iGM(r=o.CRH())&&(i._thumbs=r)}},hostAttrs:[1,"mat-mdc-slider","mdc-slider"],hostVars:10,hostBindings:function(e,i){2&e&&o.ekj("mdc-slider--range",i._isRange)("mdc-slider--disabled",i.disabled)("mdc-slider--discrete",i.discrete)("mdc-slider--tick-marks",i.showTickMarks)("_mat-animation-noopable",i._noopAnimations)},inputs:{color:"color",disableRipple:"disableRipple",disabled:"disabled",discrete:"discrete",showTickMarks:"showTickMarks",min:"min",max:"max",step:"step",displayWith:"displayWith"},exportAs:["matSlider"],features:[o._Bn([{provide:OE,useExisting:n}]),o.qOj],ngContentSelectors:LN,decls:9,vars:5,consts:[[1,"mdc-slider__track"],[1,"mdc-slider__track--inactive"],[1,"mdc-slider__track--active"],[1,"mdc-slider__track--active_fill"],["trackActive",""],["class","mdc-slider__tick-marks",4,"ngIf"],[3,"discrete","thumbPosition","valueIndicatorText",4,"ngIf"],[3,"discrete","thumbPosition","valueIndicatorText"],[1,"mdc-slider__tick-marks"],["tickMarkContainer",""],[4,"ngIf"],[3,"class","transform",4,"ngFor","ngForOf"]],template:function(e,i){1&e&&(o.F$t(),o.Hsn(0),o.TgZ(1,"div",0),o._UZ(2,"div",1),o.TgZ(3,"div",2),o._UZ(4,"div",3,4),o.qZA(),o.YNc(6,RN,3,1,"div",5),o.qZA(),o.YNc(7,ON,1,3,"mat-slider-visual-thumb",6),o._UZ(8,"mat-slider-visual-thumb",7)),2&e&&(o.xp6(6),o.Q6J("ngIf",i.showTickMarks),o.xp6(1),o.Q6J("ngIf",i._isRange),o.xp6(1),o.Q6J("discrete",i.discrete)("thumbPosition",2)("valueIndicatorText",i.endValueIndicatorText))},dependencies:[rs,ci,kN],styles:['.mdc-slider{cursor:pointer;height:48px;margin:0 24px;position:relative;touch-action:pan-y}.mdc-slider .mdc-slider__track{position:absolute;top:50%;transform:translateY(-50%);width:100%}.mdc-slider .mdc-slider__track--active,.mdc-slider .mdc-slider__track--inactive{display:flex;height:100%;position:absolute;width:100%}.mdc-slider .mdc-slider__track--active{overflow:hidden;top:-1px}.mdc-slider .mdc-slider__track--active_fill{border-top:6px solid;box-sizing:border-box;height:100%;width:100%;position:relative;-webkit-transform-origin:left;transform-origin:left}[dir=rtl] .mdc-slider .mdc-slider__track--active_fill,.mdc-slider .mdc-slider__track--active_fill[dir=rtl]{-webkit-transform-origin:right;transform-origin:right}.mdc-slider .mdc-slider__track--inactive{left:0;top:0}.mdc-slider .mdc-slider__track--inactive::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-slider .mdc-slider__track--inactive::before{border-color:CanvasText}}.mdc-slider .mdc-slider__value-indicator-container{bottom:44px;left:var(--slider-value-indicator-container-left, 50%);pointer-events:none;position:absolute;right:var(--slider-value-indicator-container-right);transform:var(--slider-value-indicator-container-transform, translateX(-50%))}.mdc-slider .mdc-slider__value-indicator{transition:transform 100ms 0ms cubic-bezier(0.4, 0, 1, 1);align-items:center;border-radius:4px;display:flex;height:32px;padding:0 12px;transform:scale(0);transform-origin:bottom}.mdc-slider .mdc-slider__value-indicator::before{border-left:6px solid rgba(0,0,0,0);border-right:6px solid rgba(0,0,0,0);border-top:6px solid;bottom:-5px;content:"";height:0;left:var(--slider-value-indicator-caret-left, 50%);position:absolute;right:var(--slider-value-indicator-caret-right);transform:var(--slider-value-indicator-caret-transform, translateX(-50%));width:0}.mdc-slider .mdc-slider__value-indicator::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-slider .mdc-slider__value-indicator::after{border-color:CanvasText}}.mdc-slider .mdc-slider__thumb--with-indicator .mdc-slider__value-indicator-container{pointer-events:auto}.mdc-slider .mdc-slider__thumb--with-indicator .mdc-slider__value-indicator{transition:transform 100ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale(1)}@media(prefers-reduced-motion){.mdc-slider .mdc-slider__value-indicator,.mdc-slider .mdc-slider__thumb--with-indicator .mdc-slider__value-indicator{transition:none}}.mdc-slider .mdc-slider__thumb{display:flex;left:-24px;outline:none;position:absolute;user-select:none;height:48px;width:48px}.mdc-slider .mdc-slider__thumb--top{z-index:1}.mdc-slider .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-style:solid;border-width:1px;box-sizing:content-box}.mdc-slider .mdc-slider__thumb-knob{box-sizing:border-box;left:50%;position:absolute;top:50%;transform:translate(-50%, -50%)}.mdc-slider .mdc-slider__tick-marks{align-items:center;box-sizing:border-box;display:flex;height:100%;justify-content:space-between;padding:0 1px;position:absolute;width:100%}.mdc-slider--discrete .mdc-slider__thumb,.mdc-slider--discrete .mdc-slider__track--active_fill{transition:transform 80ms ease}@media(prefers-reduced-motion){.mdc-slider--discrete .mdc-slider__thumb,.mdc-slider--discrete .mdc-slider__track--active_fill{transition:none}}.mdc-slider--disabled{cursor:auto}.mdc-slider--disabled .mdc-slider__thumb{pointer-events:none}.mdc-slider__input{cursor:pointer;left:0;margin:0;height:100%;opacity:0;pointer-events:none;position:absolute;top:0;width:100%}.mat-mdc-slider{display:inline-block;box-sizing:border-box;outline:none;vertical-align:middle;margin-left:8px;margin-right:8px;width:auto;min-width:112px;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-slider .mdc-slider__thumb-knob{background-color:var(--mdc-slider-handle-color, var(--mdc-theme-primary, #6200ee));border-color:var(--mdc-slider-handle-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slider .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__thumb-knob{background-color:var(--mdc-slider-disabled-handle-color, var(--mdc-theme-on-surface, #000));border-color:var(--mdc-slider-disabled-handle-color, var(--mdc-theme-on-surface, #000))}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider.mdc-slider--disabled .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider.mdc-slider--disabled .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider .mdc-slider__thumb::before,.mat-mdc-slider .mdc-slider__thumb::after{background-color:var(--mdc-slider-handle-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slider .mdc-slider__thumb:hover::before,.mat-mdc-slider .mdc-slider__thumb.mdc-ripple-surface--hover::before{opacity:var(--mdc-ripple-hover-opacity, 0.04)}.mat-mdc-slider .mdc-slider__thumb.mdc-ripple-upgraded--background-focused::before,.mat-mdc-slider .mdc-slider__thumb:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:var(--mdc-ripple-focus-opacity, 0.12)}.mat-mdc-slider .mdc-slider__thumb:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mat-mdc-slider .mdc-slider__thumb:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:var(--mdc-ripple-press-opacity, 0.12)}.mat-mdc-slider .mdc-slider__thumb.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.12)}.mat-mdc-slider .mdc-slider__track--active_fill{border-color:var(--mdc-slider-active-track-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__track--active_fill{border-color:var(--mdc-slider-disabled-active-track-color, var(--mdc-theme-on-surface, #000))}.mat-mdc-slider .mdc-slider__track--inactive{background-color:var(--mdc-slider-inactive-track-color, var(--mdc-theme-primary, #6200ee));opacity:.24}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__track--inactive{background-color:var(--mdc-slider-disabled-inactive-track-color, var(--mdc-theme-on-surface, #000));opacity:.24}.mat-mdc-slider .mdc-slider__tick-mark--active{background-color:var(--mdc-slider-with-tick-marks-active-container-color, var(--mdc-theme-on-primary, #fff));opacity:var(--mdc-slider-with-tick-marks-active-container-opacity, 0.6)}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__tick-mark--active{background-color:var(--mdc-slider-with-tick-marks-active-container-color, var(--mdc-theme-on-primary, #fff));opacity:var(--mdc-slider-with-tick-marks-active-container-opacity, 0.6)}.mat-mdc-slider .mdc-slider__tick-mark--inactive{background-color:var(--mdc-slider-with-tick-marks-inactive-container-color, var(--mdc-theme-primary, #6200ee));opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity, 0.6)}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__tick-mark--inactive{background-color:var(--mdc-slider-with-tick-marks-disabled-container-color, var(--mdc-theme-on-surface, #000));opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity, 0.6)}.mat-mdc-slider .mdc-slider__value-indicator{background-color:var(--mdc-slider-label-container-color, #666666);opacity:1}.mat-mdc-slider .mdc-slider__value-indicator::before{border-top-color:var(--mdc-slider-label-container-color, #666666)}.mat-mdc-slider .mdc-slider__value-indicator{color:var(--mdc-slider-label-label-text-color, var(--mdc-theme-on-primary, #fff))}.mat-mdc-slider .mdc-slider__track{height:var(--mdc-slider-inactive-track-height, 4px)}.mat-mdc-slider .mdc-slider__track--active{height:var(--mdc-slider-active-track-height, 6px)}.mat-mdc-slider .mdc-slider__track--inactive{height:var(--mdc-slider-inactive-track-height, 4px)}.mat-mdc-slider .mdc-slider__tick-mark--active,.mat-mdc-slider .mdc-slider__tick-mark--inactive{height:var(--mdc-slider-with-tick-marks-container-size, 2px);width:var(--mdc-slider-with-tick-marks-container-size, 2px)}.mat-mdc-slider.mdc-slider--disabled{opacity:0.38}.mat-mdc-slider .mdc-slider__value-indicator-text{letter-spacing:var(--mdc-slider-label-label-text-tracking, 0.0071428571em);font-size:var(--mdc-slider-label-label-text-font-size, 0.875rem);font-family:var(--mdc-slider-label-label-text-font, Roboto, sans-serif);font-weight:var(--mdc-slider-label-label-text-weight, 500);line-height:var(--mdc-slider-label-label-text-line-height, 1.375rem)}.mat-mdc-slider .mdc-slider__track--active{border-radius:var(--mdc-slider-active-track-shape, 9999px)}.mat-mdc-slider .mdc-slider__track--inactive{border-radius:var(--mdc-slider-inactive-track-shape, 9999px)}.mat-mdc-slider .mdc-slider__thumb-knob{border-radius:var(--mdc-slider-handle-shape, 50%);width:var(--mdc-slider-handle-width, 20px);height:var(--mdc-slider-handle-height, 20px);border-style:solid;border-width:calc(var(--mdc-slider-handle-height, 20px) / 2) calc(var(--mdc-slider-handle-width, 20px) / 2)}.mat-mdc-slider .mdc-slider__tick-mark--active,.mat-mdc-slider .mdc-slider__tick-mark--inactive{border-radius:var(--mdc-slider-with-tick-marks-container-shape, 50%)}.mat-mdc-slider .mdc-slider__thumb-knob{box-shadow:var(--mdc-slider-handle-elevation, 0px 2px 1px -1px rgba(0, 0, 0, 0.2), 0px 1px 1px 0px rgba(0, 0, 0, 0.14), 0px 1px 3px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-slider .mdc-slider__thumb:hover .mdc-slider__thumb-knob{background-color:var(--mdc-slider-hover-handle-color, var(--mdc-theme-primary, #6200ee));border-color:var(--mdc-slider-hover-handle-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slider .mdc-slider__thumb:hover .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb:hover .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb:hover .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider .mdc-slider__thumb--focused .mdc-slider__thumb-knob{background-color:var(--mdc-slider-focus-handle-color, var(--mdc-theme-primary, #6200ee));border-color:var(--mdc-slider-focus-handle-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slider .mdc-slider__thumb--focused .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--focused .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--focused .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider .mdc-slider__thumb:not(:disabled):active .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb:not(:disabled):active .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb:not(:disabled):active .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:var(--mdc-slider-with-overlap-handle-outline-color, #fff);border-width:var(--mdc-slider-with-overlap-handle-outline-width, 1px)}.mat-mdc-slider .mdc-slider__input{pointer-events:auto}.mat-mdc-slider .mdc-slider__input.mat-mdc-slider-input-no-pointer-events{pointer-events:none}.mat-mdc-slider .mdc-slider__input.mat-slider__right-input{left:auto;right:0}.mat-mdc-slider .mdc-slider__thumb,.mat-mdc-slider .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider.mat-mdc-slider-with-animation.mat-mdc-slider-disable-track-animation .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider.mdc-slider--discrete .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider.mat-mdc-slider-with-animation.mat-mdc-slider-disable-track-animation .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider .mdc-slider__track,.mat-mdc-slider .mdc-slider__thumb{pointer-events:none}.mat-mdc-slider .mdc-slider__value-indicator{opacity:var(--mat-mdc-slider-value-indicator-opacity, 1)}.mat-mdc-slider .mat-ripple .mat-ripple-element{background-color:var(--mat-mdc-slider-ripple-color, transparent)}.mat-mdc-slider .mat-ripple .mat-mdc-slider-hover-ripple{background-color:var(--mat-mdc-slider-hover-ripple-color, transparent)}.mat-mdc-slider .mat-ripple .mat-mdc-slider-focus-ripple,.mat-mdc-slider .mat-ripple .mat-mdc-slider-active-ripple{background-color:var(--mat-mdc-slider-focus-ripple-color, transparent)}.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__track--active_fill,.mat-mdc-slider._mat-animation-noopable .mdc-slider__value-indicator{transition:none}.mat-mdc-slider .mat-mdc-focus-indicator::before{border-radius:50%}.mdc-slider__thumb--focused .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0}),n})();const BN={provide:js,useExisting:(0,o.Gpc)(()=>LE),multi:!0};let LE=(()=>{class n{constructor(e,i,r,a){this._ngZone=e,this._elementRef=i,this._cdr=r,this._slider=a,this.valueChange=new o.vpe,this.dragStart=new o.vpe,this.dragEnd=new o.vpe,this.thumbPosition=2,this._knobRadius=8,this._isActive=!1,this._isFocused=!1,this._hasSetInitialValue=!1,this._destroyed=new Nn.x,this._skipUIUpdate=!1,this._onChangeFn=()=>{},this._onTouchedFn=()=>{},this._hostElement=i.nativeElement,this._ngZone.runOutsideAngular(()=>{this._hostElement.addEventListener("pointerdown",this._onPointerDown.bind(this)),this._hostElement.addEventListener("pointermove",this._onPointerMove.bind(this)),this._hostElement.addEventListener("pointerup",this._onPointerUp.bind(this))})}get value(){return Fi(this._hostElement.value)}set value(e){const i=Fi(e).toString();this._hasSetInitialValue?this._isActive||(this._hostElement.value=i,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges()):this._initialValue=i}get translateX(){return this._slider.min>=this._slider.max?(this._translateX=0,this._translateX):(void 0===this._translateX&&(this._translateX=this._calcTranslateXByValue()),this._translateX)}set translateX(e){this._translateX=e}get min(){return Fi(this._hostElement.min)}set min(e){this._hostElement.min=Fi(e).toString(),this._cdr.detectChanges()}get max(){return Fi(this._hostElement.max)}set max(e){this._hostElement.max=Fi(e).toString(),this._cdr.detectChanges()}get step(){return Fi(this._hostElement.step)}set step(e){this._hostElement.step=Fi(e).toString(),this._cdr.detectChanges()}get disabled(){return Ei(this._hostElement.disabled)}set disabled(e){this._hostElement.disabled=Ei(e),this._cdr.detectChanges(),this._slider.disabled!==this.disabled&&(this._slider.disabled=this.disabled)}get percentage(){return this._slider.min>=this._slider.max?this._slider._isRtl?1:0:(this.value-this._slider.min)/(this._slider.max-this._slider.min)}get fillPercentage(){return this._slider._cachedWidth?0===this._translateX?0:this.translateX/this._slider._cachedWidth:this._slider._isRtl?1:0}_setIsFocused(e){this._isFocused=e}ngOnDestroy(){this._hostElement.removeEventListener("pointerdown",this._onPointerDown),this._hostElement.removeEventListener("pointermove",this._onPointerMove),this._hostElement.removeEventListener("pointerup",this._onPointerUp),this._destroyed.next(),this._destroyed.complete(),this.dragStart.complete(),this.dragEnd.complete()}initProps(){this._updateWidthInactive(),this.disabled!==this._slider.disabled&&(this._slider.disabled=!0),this.step=this._slider.step,this.min=this._slider.min,this.max=this._slider.max,this._initValue()}initUI(){this._updateThumbUIByValue()}_initValue(){this._hasSetInitialValue=!0,void 0===this._initialValue?this.value=this._getDefaultValue():(this._hostElement.value=this._initialValue,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges())}_getDefaultValue(){return this.min}_onBlur(){this._setIsFocused(!1),this._onTouchedFn()}_onFocus(){this._setIsFocused(!0)}_onChange(){this._isActive&&this._updateThumbUIByValue({withAnimation:!0})}_onInput(){this.valueChange.emit(this.value),this._onChangeFn(this.value),(this._slider.step||!this._isActive)&&this._updateThumbUIByValue({withAnimation:!0}),this._slider._onValueChange(this)}_onNgControlValueChange(){(!this._isActive||!this._isFocused)&&(this._slider._onValueChange(this),this._updateThumbUIByValue()),this._slider.disabled=this._formControl.disabled}_onPointerDown(e){this.disabled||0!==e.button||(this._isActive=!0,this._setIsFocused(!0),this._updateWidthActive(),this._slider._updateDimensions(),this._slider.step||this._updateThumbUIByPointerEvent(e,{withAnimation:!0}),this.disabled||this._handleValueCorrection(e))}_handleValueCorrection(e){this._skipUIUpdate=!0,setTimeout(()=>{this._skipUIUpdate=!1,this._fixValue(e)},0)}_fixValue(e){const i=e.clientX-this._slider._cachedLeft,r=this._slider._cachedWidth,a=0===this._slider.step?1:this._slider.step,f=Math.floor((this._slider.max-this._slider.min)/a),M=Math.round((this._slider._isRtl?1-i/r:i/r)*f)/f*(this._slider.max-this._slider.min)+this._slider.min,O=Math.round(M/a)*a,N=this.value,U={source:this,parent:this._slider,value:O};if(this._isActive?this.dragStart.emit(U):this.dragEnd.emit(U),O===N)return this._slider._onValueChange(this),void(this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(e,{withAnimation:this._slider._hasAnimation}));this.value=O,this.valueChange.emit(this.value),this._onChangeFn(this.value),this._slider._onValueChange(this),this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(e,{withAnimation:this._slider._hasAnimation})}_onPointerMove(e){!this._slider.step&&this._isActive&&this._updateThumbUIByPointerEvent(e)}_onPointerUp(){this._isActive=!1,setTimeout(()=>{this._updateWidthInactive()})}_clamp(e){return Math.max(Math.min(e,this._slider._cachedWidth),0)}_calcTranslateXByValue(){return this._slider._isRtl?(1-this.percentage)*this._slider._cachedWidth:this.percentage*this._slider._cachedWidth}_calcTranslateXByPointerEvent(e){return e.clientX-this._slider._cachedLeft}_updateWidthActive(){this._hostElement.style.padding=`0 ${this._slider._inputPadding}px`,this._hostElement.style.width=`calc(100% + ${this._slider._inputPadding}px)`}_updateWidthInactive(){this._hostElement.style.padding="0px",this._hostElement.style.width="calc(100% + 48px)",this._hostElement.style.left="-24px"}_updateThumbUIByValue(e){this.translateX=this._clamp(this._calcTranslateXByValue()),this._updateThumbUI(e)}_updateThumbUIByPointerEvent(e,i){this.translateX=this._clamp(this._calcTranslateXByPointerEvent(e)),this._updateThumbUI(i)}_updateThumbUI(e){this._slider._setTransition(!!e?.withAnimation),this._slider._onTranslateXChange(this)}writeValue(e){this.value=e}registerOnChange(e){this._onChangeFn=e}registerOnTouched(e){this._onTouchedFn=e}setDisabledState(e){this.disabled=e}focus(){this._hostElement.focus()}blur(){this._hostElement.blur()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.R0b),o.Y36(o.SBq),o.Y36(o.sBO),o.Y36(OE))},n.\u0275dir=o.lG2({type:n,selectors:[["input","matSliderThumb",""]],hostAttrs:["type","range",1,"mdc-slider__input"],hostVars:1,hostBindings:function(e,i){1&e&&o.NdJ("change",function(){return i._onChange()})("input",function(){return i._onInput()})("blur",function(){return i._onBlur()})("focus",function(){return i._onFocus()}),2&e&&o.uIk("aria-valuetext",i._valuetext)},inputs:{value:"value"},outputs:{valueChange:"valueChange",dragStart:"dragStart",dragEnd:"dragEnd"},exportAs:["matSliderThumb"],features:[o._Bn([BN,{provide:HP,useExisting:n}])]}),n})(),VN=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Pa,Kr,Zv]}),n})();function GN(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",2)(1,"button",3),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.action())}),o._uU(2),o.qZA()()}if(2&n){const e=o.oxw();o.xp6(2),o.hij(" ",e.data.action," ")}}const $N=["label"];function HN(n,t){}const jN=Math.pow(2,31)-1;class zM{constructor(t,e){this._overlayRef=e,this._afterDismissed=new Nn.x,this._afterOpened=new Nn.x,this._onAction=new Nn.x,this._dismissedByAction=!1,this.containerInstance=t,t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,jN))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}const ZP=new o.OlP("MatSnackBarData");class kE{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}let qN=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]}),n})(),YN=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]}),n})(),ZN=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]}),n})(),WN=(()=>{class n{constructor(e,i){this.snackBarRef=e,this.data=i}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(zM),o.Y36(ZP))},n.\u0275cmp=o.Xpm({type:n,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions","",4,"ngIf"],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o._uU(1),o.qZA(),o.YNc(2,GN,3,1,"div",1)),2&e&&(o.xp6(1),o.hij(" ",i.data.message,"\n"),o.xp6(1),o.Q6J("ngIf",i.hasAction))},dependencies:[ci,Bg,qN,YN,ZN],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0}),n})();const XN={snackBarState:Cp("state",[hd("void, hidden",zl({transform:"scale(0.8)",opacity:0})),hd("visible",zl({transform:"scale(1)",opacity:1})),fd("* => visible",ph("150ms cubic-bezier(0, 0, 0.2, 1)")),fd("* => void, * => hidden",ph("75ms cubic-bezier(0.4, 0.0, 1, 1)",zl({opacity:0})))])};let KN=(()=>{class n extends Ep{constructor(e,i,r,a,f){super(),this._ngZone=e,this._elementRef=i,this._changeDetectorRef=r,this._platform=a,this.snackBarConfig=f,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new Nn.x,this._onExit=new Nn.x,this._onEnter=new Nn.x,this._animationState="void",this.attachDomPortal=b=>{this._assertNotAttached();const S=this._portalOutlet.attachDomPortal(b);return this._afterPortalAttached(),S},this._live="assertive"!==f.politeness||f.announcementMessage?"off"===f.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(e){this._assertNotAttached();const i=this._portalOutlet.attachComponentPortal(e);return this._afterPortalAttached(),i}attachTemplatePortal(e){this._assertNotAttached();const i=this._portalOutlet.attachTemplatePortal(e);return this._afterPortalAttached(),i}onAnimationEnd(e){const{fromState:i,toState:r}=e;if(("void"===r&&"void"!==i||"hidden"===r)&&this._completeExit(),"visible"===r){const a=this._onEnter;this._ngZone.run(()=>{a.next(),a.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe((0,uo.q)(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_afterPortalAttached(){const e=this._elementRef.nativeElement,i=this.snackBarConfig.panelClass;i&&(Array.isArray(i)?i.forEach(r=>e.classList.add(r)):e.classList.add(i))}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const e=this._elementRef.nativeElement.querySelector("[aria-hidden]"),i=this._elementRef.nativeElement.querySelector("[aria-live]");if(e&&i){let r=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&e.contains(document.activeElement)&&(r=document.activeElement),e.removeAttribute("aria-hidden"),i.appendChild(e),r?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.R0b),o.Y36(o.SBq),o.Y36(o.sBO),o.Y36(Ga),o.Y36(kE))},n.\u0275dir=o.lG2({type:n,viewQuery:function(e,i){if(1&e&&o.Gf(zg,7),2&e){let r;o.iGM(r=o.CRH())&&(i._portalOutlet=r.first)}},features:[o.qOj]}),n})(),JN=(()=>{class n extends KN{_afterPortalAttached(){super._afterPortalAttached();const e=this._label.nativeElement,i="mdc-snackbar__label";e.classList.toggle(i,!e.querySelector(`.${i}`))}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-snack-bar-container"]],viewQuery:function(e,i){if(1&e&&o.Gf($N,7),2&e){let r;o.iGM(r=o.CRH())&&(i._label=r.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container","mdc-snackbar--open"],hostVars:1,hostBindings:function(e,i){1&e&&o.WFA("@state.done",function(a){return i.onAnimationEnd(a)}),2&e&&o.d8E("@state",i._animationState)},features:[o.qOj],decls:6,vars:2,consts:[[1,"mdc-snackbar__surface"],[1,"mat-mdc-snack-bar-label"],["label",""],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"div",1,2)(3,"div",3),o.YNc(4,HN,0,0,"ng-template",4),o.qZA(),o._UZ(5,"div"),o.qZA()()),2&e&&(o.xp6(5),o.uIk("aria-live",i._live)("role",i._role))},dependencies:[zg],styles:['.mdc-snackbar{display:none;position:fixed;right:0;bottom:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;pointer-events:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-snackbar--opening,.mdc-snackbar--open,.mdc-snackbar--closing{display:flex}.mdc-snackbar--open .mdc-snackbar__label,.mdc-snackbar--open .mdc-snackbar__actions{visibility:visible}.mdc-snackbar__surface{padding-left:0;padding-right:8px;display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;transform:scale(0.8);opacity:0}.mdc-snackbar__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-snackbar__surface::before{border-color:CanvasText}}[dir=rtl] .mdc-snackbar__surface,.mdc-snackbar__surface[dir=rtl]{padding-left:8px;padding-right:0}.mdc-snackbar--open .mdc-snackbar__surface{transform:scale(1);opacity:1;pointer-events:auto}.mdc-snackbar--closing .mdc-snackbar__surface{transform:scale(1)}.mdc-snackbar__label{padding-left:16px;padding-right:8px;width:100%;flex-grow:1;box-sizing:border-box;margin:0;visibility:hidden;padding-top:14px;padding-bottom:14px}[dir=rtl] .mdc-snackbar__label,.mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar__label::before{display:inline;content:attr(data-mdc-snackbar-label-text)}.mdc-snackbar__actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box;visibility:hidden}.mdc-snackbar__action+.mdc-snackbar__dismiss{margin-left:8px;margin-right:0}[dir=rtl] .mdc-snackbar__action+.mdc-snackbar__dismiss,.mdc-snackbar__action+.mdc-snackbar__dismiss[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-snack-bar-container{margin:8px;position:static}.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:344px}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:100%}}.mat-mdc-snack-bar-container .mdc-snackbar__surface{max-width:672px}.mat-mdc-snack-bar-container .mdc-snackbar__surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-snack-bar-container .mdc-snackbar__dismiss .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-snack-bar-container .mdc-snackbar__dismiss svg,.mat-mdc-snack-bar-container .mdc-snackbar__dismiss img{width:var(--mdc-icon-button-icon-size, 24px);height:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{background-color:var(--mdc-snackbar-container-color, inherit)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{border-radius:var(--mdc-snackbar-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-snack-bar-container .mdc-snackbar__label{color:var(--mdc-snackbar-supporting-text-color, inherit)}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-size:var(--mdc-snackbar-supporting-text-size, inherit);font-family:var(--mdc-snackbar-supporting-text-font, inherit);font-weight:var(--mdc-snackbar-supporting-text-weight, inherit);line-height:var(--mdc-snackbar-supporting-text-line-height, inherit)}.cdk-high-contrast-active .mat-mdc-snack-bar-container{border:solid 1px}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-mdc-snack-bar-button-color, transparent);--mat-mdc-button-persistent-ripple-color: currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{background-color:currentColor;opacity:.1}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-handset .mdc-snackbar__surface{width:100%}'],encapsulation:2,data:{animation:[XN.snackBarState]}}),n})(),WP=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Ug,xm,Kr,SD,Pa,Pa]}),n})();const XP=new o.OlP("mat-snack-bar-default-options",{providedIn:"root",factory:function QN(){return new kE}});let eB=(()=>{class n{constructor(e,i,r,a,f,b){this._overlay=e,this._live=i,this._injector=r,this._breakpointObserver=a,this._parentSnackBar=f,this._defaultConfig=b,this._snackBarRefAtThisLevel=null}get _openedSnackBarRef(){const e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}openFromComponent(e,i){return this._attach(e,i)}openFromTemplate(e,i){return this._attach(e,i)}open(e,i="",r){const a={...this._defaultConfig,...r};return a.data={message:e,action:i},a.announcementMessage===e&&(a.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,a)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,i){const a=o.zs3.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:kE,useValue:i}]}),f=new vu(this.snackBarContainerComponent,i.viewContainerRef,a),b=e.attach(f);return b.instance.snackBarConfig=i,b.instance}_attach(e,i){const r={...new kE,...this._defaultConfig,...i},a=this._createOverlay(r),f=this._attachSnackBarContainer(a,r),b=new zM(f,a);if(e instanceof o.Rgc){const S=new hy(e,null,{$implicit:r.data,snackBarRef:b});b.instance=f.attachTemplatePortal(S)}else{const S=this._createInjector(r,b),M=new vu(e,void 0,S),O=f.attachComponentPortal(M);b.instance=O.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe((0,Co.R)(a.detachments())).subscribe(S=>{a.overlayElement.classList.toggle(this.handsetCssClass,S.matches)}),r.announcementMessage&&f._onAnnounce.subscribe(()=>{this._live.announce(r.announcementMessage,r.politeness)}),this._animateSnackBar(b,r),this._openedSnackBarRef=b,this._openedSnackBarRef}_animateSnackBar(e,i){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),i.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter(),i.duration&&i.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(i.duration))}_createOverlay(e){const i=new e0;i.direction=e.direction;let r=this._overlay.position().global();const a="rtl"===e.direction,f="left"===e.horizontalPosition||"start"===e.horizontalPosition&&!a||"end"===e.horizontalPosition&&a,b=!f&&"center"!==e.horizontalPosition;return f?r.left("0"):b?r.right("0"):r.centerHorizontally(),"top"===e.verticalPosition?r.top("0"):r.bottom("0"),i.positionStrategy=r,this._overlay.create(i)}_createInjector(e,i){return o.zs3.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:zM,useValue:i},{provide:ZP,useValue:e.data}]})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Nu),o.LFG(Er),o.LFG(o.zs3),o.LFG(lp),o.LFG(n,12),o.LFG(XP))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),KP=(()=>{class n extends eB{constructor(e,i,r,a,f,b){super(e,i,r,a,f,b),this.simpleSnackBarComponent=WN,this.snackBarContainerComponent=JN,this.handsetCssClass="mat-mdc-snack-bar-handset"}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Nu),o.LFG(Er),o.LFG(o.zs3),o.LFG(lp),o.LFG(n,12),o.LFG(XP))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:WP}),n})();const tB=["tooltip"],JP=new o.OlP("mat-tooltip-scroll-strategy"),rB={provide:JP,deps:[Nu],useFactory:function iB(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}},sB=new o.OlP("mat-tooltip-default-options",{providedIn:"root",factory:function oB(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}}),QP="tooltip-panel",eR=_u({passive:!0});let hB=(()=>{class n{constructor(e,i,r,a,f,b,S,M,O,N,U,j){this._overlay=e,this._elementRef=i,this._scrollDispatcher=r,this._viewContainerRef=a,this._ngZone=f,this._platform=b,this._ariaDescriber=S,this._focusMonitor=M,this._dir=N,this._defaultOptions=U,this._position="below",this._positionAtOrigin=!1,this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this._showDelay=this._defaultOptions.showDelay,this._hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new Nn.x,this._scrollStrategy=O,this._document=j,U&&(U.position&&(this.position=U.position),U.positionAtOrigin&&(this.positionAtOrigin=U.positionAtOrigin),U.touchGestures&&(this.touchGestures=U.touchGestures)),N.change.pipe((0,Co.R)(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})}get position(){return this._position}set position(e){e!==this._position&&(this._position=e,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(e){this._positionAtOrigin=Ei(e),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(e){this._disabled=Ei(e),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(e){this._showDelay=Fi(e)}get hideDelay(){return this._hideDelay}set hideDelay(e){this._hideDelay=Fi(e),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=e?String(e).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(e){this._tooltipClass=e,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe((0,Co.R)(this._destroyed)).subscribe(e=>{e?"keyboard"===e&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const e=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([i,r])=>{e.removeEventListener(i,r,eR)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(e,this.message,"tooltip"),this._focusMonitor.stopMonitoring(e)}show(e=this.showDelay,i){if(this.disabled||!this.message||this._isTooltipVisible())return void this._tooltipInstance?._cancelPendingAnimations();const r=this._createOverlay(i);this._detach(),this._portal=this._portal||new vu(this._tooltipComponent,this._viewContainerRef);const a=this._tooltipInstance=r.attach(this._portal).instance;a._triggerElement=this._elementRef.nativeElement,a._mouseLeaveHideDelay=this._hideDelay,a.afterHidden().pipe((0,Co.R)(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),a.show(e)}hide(e=this.hideDelay){const i=this._tooltipInstance;i&&(i.isVisible()?i.hide(e):(i._cancelPendingAnimations(),this._detach()))}toggle(e){this._isTooltipVisible()?this.hide():this.show(void 0,e)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(e){if(this._overlayRef){const a=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!e)&&a._origin instanceof o.SBq)return this._overlayRef;this._detach()}const i=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),r=this._overlay.position().flexibleConnectedTo(this.positionAtOrigin&&e||this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(i);return r.positionChanges.pipe((0,Co.R)(this._destroyed)).subscribe(a=>{this._updateCurrentPositionClass(a.connectionPair),this._tooltipInstance&&a.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:r,panelClass:`${this._cssClassPrefix}-${QP}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe((0,Co.R)(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe((0,Co.R)(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe((0,Co.R)(this._destroyed)).subscribe(a=>{this._isTooltipVisible()&&27===a.keyCode&&!Qc(a)&&(a.preventDefault(),a.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(e){const i=e.getConfig().positionStrategy,r=this._getOrigin(),a=this._getOverlayPosition();i.withPositions([this._addOffset({...r.main,...a.main}),this._addOffset({...r.fallback,...a.fallback})])}_addOffset(e){return e}_getOrigin(){const e=!this._dir||"ltr"==this._dir.value,i=this.position;let r;"above"==i||"below"==i?r={originX:"center",originY:"above"==i?"top":"bottom"}:"before"==i||"left"==i&&e||"right"==i&&!e?r={originX:"start",originY:"center"}:("after"==i||"right"==i&&e||"left"==i&&!e)&&(r={originX:"end",originY:"center"});const{x:a,y:f}=this._invertPosition(r.originX,r.originY);return{main:r,fallback:{originX:a,originY:f}}}_getOverlayPosition(){const e=!this._dir||"ltr"==this._dir.value,i=this.position;let r;"above"==i?r={overlayX:"center",overlayY:"bottom"}:"below"==i?r={overlayX:"center",overlayY:"top"}:"before"==i||"left"==i&&e||"right"==i&&!e?r={overlayX:"end",overlayY:"center"}:("after"==i||"right"==i&&e||"left"==i&&!e)&&(r={overlayX:"start",overlayY:"center"});const{x:a,y:f}=this._invertPosition(r.overlayX,r.overlayY);return{main:r,fallback:{overlayX:a,overlayY:f}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe((0,uo.q)(1),(0,Co.R)(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(e){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=e,this._tooltipInstance._markForCheck())}_invertPosition(e,i){return"above"===this.position||"below"===this.position?"top"===i?i="bottom":"bottom"===i&&(i="top"):"end"===e?e="start":"start"===e&&(e="end"),{x:e,y:i}}_updateCurrentPositionClass(e){const{overlayY:i,originX:r,originY:a}=e;let f;if(f="center"===i?this._dir&&"rtl"===this._dir.value?"end"===r?"left":"right":"start"===r?"left":"right":"bottom"===i&&"top"===a?"above":"below",f!==this._currentPosition){const b=this._overlayRef;if(b){const S=`${this._cssClassPrefix}-${QP}-`;b.removePanelClass(S+this._currentPosition),b.addPanelClass(S+f)}this._currentPosition=f}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",e=>{let i;this._setupPointerExitEventsIfNeeded(),void 0!==e.x&&void 0!==e.y&&(i=e),this.show(void 0,i)}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",e=>{const i=e.targetTouches?.[0],r=i?{x:i.clientX,y:i.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(void 0,r),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const e=[];if(this._platformSupportsMouseEvents())e.push(["mouseleave",i=>{const r=i.relatedTarget;(!r||!this._overlayRef?.overlayElement.contains(r))&&this.hide()}],["wheel",i=>this._wheelListener(i)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const i=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};e.push(["touchend",i],["touchcancel",i])}this._addListeners(e),this._passiveListeners.push(...e)}_addListeners(e){e.forEach(([i,r])=>{this._elementRef.nativeElement.addEventListener(i,r,eR)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(e){if(this._isTooltipVisible()){const i=this._document.elementFromPoint(e.clientX,e.clientY),r=this._elementRef.nativeElement;i!==r&&!r.contains(i)&&this.hide()}}_disableNativeGesturesIfNecessary(){const e=this.touchGestures;if("off"!==e){const i=this._elementRef.nativeElement,r=i.style;("on"===e||"INPUT"!==i.nodeName&&"TEXTAREA"!==i.nodeName)&&(r.userSelect=r.msUserSelect=r.webkitUserSelect=r.MozUserSelect="none"),("on"===e||!i.draggable)&&(r.webkitUserDrag="none"),r.touchAction="none",r.webkitTapHighlightColor="transparent"}}}return n.\u0275fac=function(e){o.$Z()},n.\u0275dir=o.lG2({type:n,inputs:{position:["matTooltipPosition","position"],positionAtOrigin:["matTooltipPositionAtOrigin","positionAtOrigin"],disabled:["matTooltipDisabled","disabled"],showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}}),n})(),tR=(()=>{class n extends hB{constructor(e,i,r,a,f,b,S,M,O,N,U,j){super(e,i,r,a,f,b,S,M,O,N,U,j),this._tooltipComponent=pB,this._cssClassPrefix="mat-mdc",this._viewportMargin=8}_addOffset(e){const r=!this._dir||"ltr"==this._dir.value;return"top"===e.originY?e.offsetY=-8:"bottom"===e.originY?e.offsetY=8:"start"===e.originX?e.offsetX=r?-8:8:"end"===e.originX&&(e.offsetX=r?8:-8),e}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Nu),o.Y36(o.SBq),o.Y36(Yu),o.Y36(o.s_b),o.Y36(o.R0b),o.Y36(Ga),o.Y36(B_),o.Y36(Ta),o.Y36(JP),o.Y36(Ll,8),o.Y36(sB,8),o.Y36(he))},n.\u0275dir=o.lG2({type:n,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],exportAs:["matTooltip"],features:[o.qOj]}),n})(),fB=(()=>{class n{constructor(e,i){this._changeDetectorRef=e,this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new Nn.x,this._animationsDisabled="NoopAnimations"===i}show(e){clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},e)}hide(e){clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},e)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:e}){(!e||!this._triggerElement.contains(e))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){}_handleAnimationEnd({animationName:e}){(e===this._showAnimation||e===this._hideAnimation)&&this._finalizeAnimation(e===this._showAnimation)}_cancelPendingAnimations(){clearTimeout(this._showTimeoutId),clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(e){e?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(e){const i=this._tooltip.nativeElement,r=this._showAnimation,a=this._hideAnimation;if(i.classList.remove(e?a:r),i.classList.add(e?r:a),this._isVisible=e,e&&!this._animationsDisabled&&"function"==typeof getComputedStyle){const f=getComputedStyle(i);("0s"===f.getPropertyValue("animation-duration")||"none"===f.getPropertyValue("animation-name"))&&(this._animationsDisabled=!0)}e&&this._onShow(),this._animationsDisabled&&(i.classList.add("_mat-animation-noopable"),this._finalizeAnimation(e))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.sBO),o.Y36(o.QbO,8))},n.\u0275dir=o.lG2({type:n}),n})(),pB=(()=>{class n extends fB{constructor(e,i,r){super(e,r),this._elementRef=i,this._isMultiline=!1,this._showAnimation="mat-mdc-tooltip-show",this._hideAnimation="mat-mdc-tooltip-hide"}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){const e=this._elementRef.nativeElement.getBoundingClientRect();return e.height>24&&e.width>=200}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.sBO),o.Y36(o.SBq),o.Y36(o.QbO,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-tooltip-component"]],viewQuery:function(e,i){if(1&e&&o.Gf(tB,7),2&e){let r;o.iGM(r=o.CRH())&&(i._tooltip=r.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(e,i){1&e&&o.NdJ("mouseleave",function(a){return i._handleMouseLeave(a)}),2&e&&o.Udp("zoom",i.isVisible()?1:null)},features:[o.qOj],decls:4,vars:4,consts:[[1,"mdc-tooltip","mdc-tooltip--shown","mat-mdc-tooltip",3,"ngClass","animationend"],["tooltip",""],[1,"mdc-tooltip__surface","mdc-tooltip__surface-animation"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0,1),o.NdJ("animationend",function(a){return i._handleAnimationEnd(a)}),o.TgZ(2,"div",2),o._uU(3),o.qZA()()),2&e&&(o.ekj("mdc-tooltip--multiline",i._isMultiline),o.Q6J("ngClass",i.tooltipClass),o.xp6(3),o.Oqu(i.message))},dependencies:[eo],styles:['.mdc-tooltip__surface{word-break:var(--mdc-tooltip-word-break, normal);overflow-wrap:anywhere}.mdc-tooltip{position:fixed;display:none;z-index:9}.mdc-tooltip-wrapper--rich{position:relative}.mdc-tooltip--shown,.mdc-tooltip--showing,.mdc-tooltip--hide{display:inline-flex}.mdc-tooltip--shown.mdc-tooltip--rich,.mdc-tooltip--showing.mdc-tooltip--rich,.mdc-tooltip--hide.mdc-tooltip--rich{display:inline-block;left:-320px;position:absolute}.mdc-tooltip__surface{line-height:16px;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center}.mdc-tooltip__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-tooltip__surface::before{border-color:CanvasText}}.mdc-tooltip--rich .mdc-tooltip__surface{align-items:flex-start;display:flex;flex-direction:column;min-height:24px;min-width:40px;max-width:320px;position:relative}.mdc-tooltip--multiline .mdc-tooltip__surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mdc-tooltip__surface,.mdc-tooltip--multiline .mdc-tooltip__surface[dir=rtl]{text-align:right}.mdc-tooltip__surface .mdc-tooltip__title{margin:0 8px}.mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(200px - (2 * 8px));margin:8px;text-align:left}[dir=rtl] .mdc-tooltip__surface .mdc-tooltip__content,.mdc-tooltip__surface .mdc-tooltip__content[dir=rtl]{text-align:right}.mdc-tooltip--rich .mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(320px - (2 * 8px));align-self:stretch}.mdc-tooltip__surface .mdc-tooltip__content-link{text-decoration:none}.mdc-tooltip--rich-actions,.mdc-tooltip__content,.mdc-tooltip__title{z-index:1}.mdc-tooltip__surface-animation{opacity:0;transform:scale(0.8);will-change:transform,opacity}.mdc-tooltip--shown .mdc-tooltip__surface-animation{transform:scale(1);opacity:1}.mdc-tooltip--hide .mdc-tooltip__surface-animation{transform:scale(1)}.mdc-tooltip__caret-surface-top,.mdc-tooltip__caret-surface-bottom{position:absolute;height:24px;width:24px;transform:rotate(35deg) skewY(20deg) scaleX(0.9396926208)}.mdc-tooltip__caret-surface-top .mdc-elevation-overlay,.mdc-tooltip__caret-surface-bottom .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-tooltip__caret-surface-bottom{outline:1px solid rgba(0,0,0,0);z-index:-1}@media screen and (forced-colors: active){.mdc-tooltip__caret-surface-bottom{outline-color:CanvasText}}.mdc-tooltip__surface{background-color:var(--mdc-plain-tooltip-container-color, #fff)}.mdc-tooltip__surface{border-radius:var(--mdc-plain-tooltip-container-shape, var(--mdc-shape-small, 4px))}.mdc-tooltip__caret-surface-top,.mdc-tooltip__caret-surface-bottom{border-radius:var(--mdc-plain-tooltip-container-shape, var(--mdc-shape-small, 4px))}.mdc-tooltip__surface{color:var(--mdc-plain-tooltip-supporting-text-color, #000)}.mdc-tooltip__surface{font-family:var(--mdc-plain-tooltip-supporting-text-font, inherit);font-size:var(--mdc-plain-tooltip-supporting-text-size, inherit);font-weight:var(--mdc-plain-tooltip-supporting-text-weight, inherit);letter-spacing:var(--mdc-plain-tooltip-supporting-text-tracking, inherit)}.mat-mdc-tooltip{position:relative;transform:scale(0)}.mat-mdc-tooltip::before{content:"";top:-8px;right:-8px;bottom:-8px;left:-8px;z-index:-1;position:absolute}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}'],encapsulation:2,changeDetection:0}),n})(),mB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[rB],imports:[Wl,Kr,Ug,Pa,Pa,Wu]}),n})();function nR(n){return new o.vHH(3e3,!1)}function XB(){return typeof window<"u"&&typeof window.document<"u"}function UM(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function qg(n){switch(n.length){case 0:return new s0;case 1:return n[0];default:return new iM(n)}}function iR(n,t,e,i,r=new Map,a=new Map){const f=[],b=[];let S=-1,M=null;if(i.forEach(O=>{const N=O.get("offset"),U=N==S,j=U&&M||new Map;O.forEach((be,Ce)=>{let et=Ce,Ye=be;if("offset"!==Ce)switch(et=t.normalizePropertyName(et,f),Ye){case"!":Ye=r.get(Ce);break;case jh:Ye=a.get(Ce);break;default:Ye=t.normalizeStyleValue(Ce,et,Ye,f)}j.set(et,Ye)}),U||b.push(j),M=j,S=N}),f.length)throw function BB(n){return new o.vHH(3502,!1)}();return b}function VM(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&GM(e,"start",n)));break;case"done":n.onDone(()=>i(e&&GM(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&GM(e,"destroy",n)))}}function GM(n,t,e){const a=$M(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,e.totalTime??n.totalTime,!!e.disabled),f=n._data;return null!=f&&(a._data=f),a}function $M(n,t,e,i,r="",a=0,f){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:r,totalTime:a,disabled:!!f}}function _h(n,t,e){let i=n.get(t);return i||n.set(t,i=e),i}function rR(n){const t=n.indexOf(":");return[n.substring(1,t),n.slice(t+1)]}let HM=(n,t)=>!1,oR=(n,t,e)=>[],sR=null;function jM(n){const t=n.parentNode||n.host;return t===sR?null:t}(UM()||typeof Element<"u")&&(XB()?(sR=(()=>document.documentElement)(),HM=(n,t)=>{for(;t;){if(t===n)return!0;t=jM(t)}return!1}):HM=(n,t)=>n.contains(t),oR=(n,t,e)=>{if(e)return Array.from(n.querySelectorAll(t));const i=n.querySelector(t);return i?[i]:[]});let wy=null,aR=!1;const lR=HM,cR=oR;let uR=(()=>{class n{validateStyleProperty(e){return function JB(n){wy||(wy=function QB(){return typeof document<"u"?document.body:null}()||{},aR=!!wy.style&&"WebkitAppearance"in wy.style);let t=!0;return wy.style&&!function KB(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in wy.style,!t&&aR&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in wy.style)),t}(e)}matchesElement(e,i){return!1}containsElement(e,i){return lR(e,i)}getParentElement(e){return jM(e)}query(e,i,r){return cR(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,a,f,b=[],S){return new s0(r,a)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),qM=(()=>{class n{}return n.NOOP=new uR,n})();const YM="ng-enter",FE="ng-leave",NE="ng-trigger",BE=".ng-trigger",hR="ng-animating",ZM=".ng-animating";function Am(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:WM(parseFloat(t[1]),t[2])}function WM(n,t){return"s"===t?1e3*n:n}function zE(n,t,e){return n.hasOwnProperty("duration")?n:function n3(n,t,e){let r,a=0,f="";if("string"==typeof n){const b=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===b)return t.push(nR()),{duration:0,delay:0,easing:""};r=WM(parseFloat(b[1]),b[2]);const S=b[3];null!=S&&(a=WM(parseFloat(S),b[4]));const M=b[5];M&&(f=M)}else r=n;if(!e){let b=!1,S=t.length;r<0&&(t.push(function gB(){return new o.vHH(3100,!1)}()),b=!0),a<0&&(t.push(function _B(){return new o.vHH(3101,!1)}()),b=!0),b&&t.splice(S,0,nR())}return{duration:r,delay:a,easing:f}}(n,t,e)}function Lx(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function fR(n){const t=new Map;return Object.keys(n).forEach(e=>{t.set(e,n[e])}),t}function Yg(n,t=new Map,e){if(e)for(let[i,r]of e)t.set(i,r);for(let[i,r]of n)t.set(i,r);return t}function mR(n,t,e){return e?t+":"+e+";":""}function gR(n){let t="";for(let e=0;e<n.style.length;e++){const i=n.style.item(e);t+=mR(0,i,n.style.getPropertyValue(i))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=mR(0,s3(e),n.style[e]));n.setAttribute("style",t)}function Dp(n,t,e){n.style&&(t.forEach((i,r)=>{const a=KM(r);e&&!e.has(r)&&e.set(r,n.style[a]),n.style[a]=i}),UM()&&gR(n))}function Ey(n,t){n.style&&(t.forEach((e,i)=>{const r=KM(i);n.style[r]=""}),UM()&&gR(n))}function kx(n){return Array.isArray(n)?1==n.length?n[0]:aE(n):n}const XM=new RegExp("{{\\s*(.+?)\\s*}}","g");function _R(n){let t=[];if("string"==typeof n){let e;for(;e=XM.exec(n);)t.push(e[1]);XM.lastIndex=0}return t}function Fx(n,t,e){const i=n.toString(),r=i.replace(XM,(a,f)=>{let b=t[f];return null==b&&(e.push(function vB(n){return new o.vHH(3003,!1)}()),b=""),b.toString()});return r==i?n:r}function UE(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const o3=/-+([a-z0-9])/g;function KM(n){return n.replace(o3,(...t)=>t[1].toUpperCase())}function s3(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function yh(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function bB(n){return new o.vHH(3004,!1)}()}}function yR(n,t){return window.getComputedStyle(n)[t]}function h3(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function f3(n,t,e){if(":"==n[0]){const S=function p3(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(function LB(n){return new o.vHH(3016,!1)}()),"* => *"}}(n,e);if("function"==typeof S)return void t.push(S);n=S}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(function OB(n){return new o.vHH(3015,!1)}()),t;const r=i[1],a=i[2],f=i[3];t.push(vR(r,f));"<"==a[0]&&!("*"==r&&"*"==f)&&t.push(vR(f,r))}(i,e,t)):e.push(n),e}const HE=new Set(["true","1"]),jE=new Set(["false","0"]);function vR(n,t){const e=HE.has(n)||jE.has(n),i=HE.has(t)||jE.has(t);return(r,a)=>{let f="*"==n||n==r,b="*"==t||t==a;return!f&&e&&"boolean"==typeof r&&(f=r?HE.has(n):jE.has(n)),!b&&i&&"boolean"==typeof a&&(b=a?HE.has(t):jE.has(t)),f&&b}}const m3=new RegExp("s*:selfs*,?","g");function JM(n,t,e,i){return new g3(n).build(t,e,i)}class g3{constructor(t){this._driver=t}build(t,e,i){const r=new v3(e);return this._resetContextStyleTimingState(r),yh(this,kx(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,r=e.depCount=0;const a=[],f=[];return"@"==t.name.charAt(0)&&e.errors.push(function wB(){return new o.vHH(3006,!1)}()),t.definitions.forEach(b=>{if(this._resetContextStyleTimingState(e),0==b.type){const S=b,M=S.name;M.toString().split(/\s*,\s*/).forEach(O=>{S.name=O,a.push(this.visitState(S,e))}),S.name=M}else if(1==b.type){const S=this.visitTransition(b,e);i+=S.queryCount,r+=S.depCount,f.push(S)}else e.errors.push(function EB(){return new o.vHH(3007,!1)}())}),{type:7,name:t.name,states:a,transitions:f,queryCount:i,depCount:r,options:null}}visitState(t,e){const i=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){const a=new Set,f=r||{};i.styles.forEach(b=>{b instanceof Map&&b.forEach(S=>{_R(S).forEach(M=>{f.hasOwnProperty(M)||a.add(M)})})}),a.size&&(UE(a.values()),e.errors.push(function CB(n,t){return new o.vHH(3008,!1)}()))}return{type:0,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const i=yh(this,kx(t.animation),e);return{type:1,matchers:h3(t.expr,e.errors),animation:i,queryCount:e.queryCount,depCount:e.depCount,options:Cy(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(i=>yh(this,i,e)),options:Cy(t.options)}}visitGroup(t,e){const i=e.currentTime;let r=0;const a=t.steps.map(f=>{e.currentTime=i;const b=yh(this,f,e);return r=Math.max(r,e.currentTime),b});return e.currentTime=r,{type:3,steps:a,options:Cy(t.options)}}visitAnimate(t,e){const i=function x3(n,t){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return QM(zE(n,t).duration,0,"");const e=n;if(e.split(/\s+/).some(a=>"{"==a.charAt(0)&&"{"==a.charAt(1))){const a=QM(0,0,"");return a.dynamic=!0,a.strValue=e,a}const r=zE(e,t);return QM(r.duration,r.delay,r.easing)}(t.timings,e.errors);e.currentAnimateTimings=i;let r,a=t.styles?t.styles:zl({});if(5==a.type)r=this.visitKeyframes(a,e);else{let f=t.styles,b=!1;if(!f){b=!0;const M={};i.easing&&(M.easing=i.easing),f=zl(M)}e.currentTime+=i.duration+i.delay;const S=this.visitStyle(f,e);S.isEmptyStep=b,r=S}return e.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(t,e){const i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){const i=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let b of r)"string"==typeof b?b===jh?i.push(b):e.errors.push(new o.vHH(3002,!1)):i.push(fR(b));let a=!1,f=null;return i.forEach(b=>{if(b instanceof Map&&(b.has("easing")&&(f=b.get("easing"),b.delete("easing")),!a))for(let S of b.values())if(S.toString().indexOf("{{")>=0){a=!0;break}}),{type:6,styles:i,easing:f,offset:t.offset,containsDynamicStyles:a,options:null}}_validateStyleAst(t,e){const i=e.currentAnimateTimings;let r=e.currentTime,a=e.currentTime;i&&a>0&&(a-=i.duration+i.delay),t.styles.forEach(f=>{"string"!=typeof f&&f.forEach((b,S)=>{const M=e.collectedStyles.get(e.currentQuerySelector),O=M.get(S);let N=!0;O&&(a!=r&&a>=O.startTime&&r<=O.endTime&&(e.errors.push(function DB(n,t,e,i,r){return new o.vHH(3010,!1)}()),N=!1),a=O.startTime),N&&M.set(S,{startTime:a,endTime:r}),e.options&&function r3(n,t,e){const i=t.params||{},r=_R(n);r.length&&r.forEach(a=>{i.hasOwnProperty(a)||e.push(function yB(n){return new o.vHH(3001,!1)}())})}(b,e.options,e.errors)})})}visitKeyframes(t,e){const i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function MB(){return new o.vHH(3011,!1)}()),i;let a=0;const f=[];let b=!1,S=!1,M=0;const O=t.steps.map(Ye=>{const Be=this._makeStyleAst(Ye,e);let it=null!=Be.offset?Be.offset:function b3(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){const i=e;t=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(Be.styles),At=0;return null!=it&&(a++,At=Be.offset=it),S=S||At<0||At>1,b=b||At<M,M=At,f.push(At),Be});S&&e.errors.push(function IB(){return new o.vHH(3012,!1)}()),b&&e.errors.push(function TB(){return new o.vHH(3200,!1)}());const N=t.steps.length;let U=0;a>0&&a<N?e.errors.push(function AB(){return new o.vHH(3202,!1)}()):0==a&&(U=1/(N-1));const j=N-1,be=e.currentTime,Ce=e.currentAnimateTimings,et=Ce.duration;return O.forEach((Ye,Be)=>{const it=U>0?Be==j?1:U*Be:f[Be],At=it*et;e.currentTime=be+Ce.delay+At,Ce.duration=At,this._validateStyleAst(Ye,e),Ye.offset=it,i.styles.push(Ye)}),i}visitReference(t,e){return{type:8,animation:yh(this,kx(t.animation),e),options:Cy(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Cy(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Cy(t.options)}}visitQuery(t,e){const i=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[a,f]=function _3(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(m3,"")),n=n.replace(/@\*/g,BE).replace(/@\w+/g,e=>BE+"-"+e.slice(1)).replace(/:animating/g,ZM),[n,t]}(t.selector);e.currentQuerySelector=i.length?i+" "+a:a,_h(e.collectedStyles,e.currentQuerySelector,new Map);const b=yh(this,kx(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:11,selector:a,limit:r.limit||0,optional:!!r.optional,includeSelf:f,animation:b,originalSelector:t.selector,options:Cy(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function PB(){return new o.vHH(3013,!1)}());const i="full"===t.timings?{duration:0,delay:0,easing:"full"}:zE(t.timings,e.errors,!0);return{type:12,animation:yh(this,kx(t.animation),e),timings:i,options:null}}}class v3{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Cy(n){return n?(n=Lx(n)).params&&(n.params=function y3(n){return n?Lx(n):null}(n.params)):n={},n}function QM(n,t,e){return{duration:n,delay:t,easing:e}}function eI(n,t,e,i,r,a,f=null,b=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:r,delay:a,totalTime:r+a,easing:f,subTimeline:b}}class qE{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const C3=new RegExp(":enter","g"),D3=new RegExp(":leave","g");function tI(n,t,e,i,r,a=new Map,f=new Map,b,S,M=[]){return(new M3).buildKeyframes(n,t,e,i,r,a,f,b,S,M)}class M3{buildKeyframes(t,e,i,r,a,f,b,S,M,O=[]){M=M||new qE;const N=new nI(t,e,M,r,a,O,[]);N.options=S;const U=S.delay?Am(S.delay):0;N.currentTimeline.delayNextStep(U),N.currentTimeline.setStyles([f],null,N.errors,S),yh(this,i,N);const j=N.timelines.filter(be=>be.containsAnimation());if(j.length&&b.size){let be;for(let Ce=j.length-1;Ce>=0;Ce--){const et=j[Ce];if(et.element===e){be=et;break}}be&&!be.allowOnlyTimelineStyles()&&be.setStyles([b],null,N.errors,S)}return j.length?j.map(be=>be.buildKeyframes()):[eI(e,[],[],[],0,U,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const i=e.subInstructions.get(e.element);if(i){const r=e.createSubContext(t.options),a=e.currentTimeline.currentTime,f=this._visitSubInstructions(i,r,r.options);a!=f&&e.transformIntoNewTimeline(f)}e.previousNode=t}visitAnimateRef(t,e){const i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,i),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,i){for(const r of t){const a=r?.delay;if(a){const f="number"==typeof a?a:Am(Fx(a,r?.params??{},e.errors));i.delayNextStep(f)}}}_visitSubInstructions(t,e,i){let a=e.currentTimeline.currentTime;const f=null!=i.duration?Am(i.duration):null,b=null!=i.delay?Am(i.delay):null;return 0!==f&&t.forEach(S=>{const M=e.appendInstructionToTimeline(S,f,b);a=Math.max(a,M.duration+M.delay)}),a}visitReference(t,e){e.updateOptions(t.options,!0),yh(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const i=e.subContextCount;let r=e;const a=t.options;if(a&&(a.params||a.delay)&&(r=e.createSubContext(a),r.transformIntoNewTimeline(),null!=a.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=YE);const f=Am(a.delay);r.delayNextStep(f)}t.steps.length&&(t.steps.forEach(f=>yh(this,f,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const i=[];let r=e.currentTimeline.currentTime;const a=t.options&&t.options.delay?Am(t.options.delay):0;t.steps.forEach(f=>{const b=e.createSubContext(t.options);a&&b.delayNextStep(a),yh(this,f,b),r=Math.max(r,b.currentTimeline.currentTime),i.push(b.currentTimeline)}),i.forEach(f=>e.currentTimeline.mergeTimelineCollectedStyles(f)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const i=t.strValue;return zE(e.params?Fx(i,e.params,e.errors):i,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const i=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());const a=t.style;5==a.type?this.visitKeyframes(a,e):(e.incrementTime(i.duration),this.visitStyle(a,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const a=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(a):i.setStyles(t.styles,a,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const i=e.currentAnimateTimings,r=e.currentTimeline.duration,a=i.duration,b=e.createSubContext().currentTimeline;b.easing=i.easing,t.styles.forEach(S=>{b.forwardTime((S.offset||0)*a),b.setStyles(S.styles,S.easing,e.errors,e.options),b.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(b),e.transformIntoNewTimeline(r+a),e.previousNode=t}visitQuery(t,e){const i=e.currentTimeline.currentTime,r=t.options||{},a=r.delay?Am(r.delay):0;a&&(6===e.previousNode.type||0==i&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=YE);let f=i;const b=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=b.length;let S=null;b.forEach((M,O)=>{e.currentQueryIndex=O;const N=e.createSubContext(t.options,M);a&&N.delayNextStep(a),M===e.element&&(S=N.currentTimeline),yh(this,t.animation,N),N.currentTimeline.applyStylesToKeyframe(),f=Math.max(f,N.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(f),S&&(e.currentTimeline.mergeTimelineCollectedStyles(S),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const i=e.parentContext,r=e.currentTimeline,a=t.timings,f=Math.abs(a.duration),b=f*(e.currentQueryTotal-1);let S=f*e.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":S=b-S;break;case"full":S=i.currentStaggerTime}const O=e.currentTimeline;S&&O.delayNextStep(S);const N=O.currentTime;yh(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=r.currentTime-N+(r.startTime-i.currentTimeline.startTime)}}const YE={};class nI{constructor(t,e,i,r,a,f,b,S){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=a,this.errors=f,this.timelines=b,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=YE,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=S||new ZE(this._driver,e,0),b.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const i=t;let r=this.options;null!=i.duration&&(r.duration=Am(i.duration)),null!=i.delay&&(r.delay=Am(i.delay));const a=i.params;if(a){let f=r.params;f||(f=this.options.params={}),Object.keys(a).forEach(b=>{(!e||!f.hasOwnProperty(b))&&(f[b]=Fx(a[b],f,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const i=t.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return t}createSubContext(t=null,e,i){const r=e||this.element,a=new nI(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(t),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(t){return this.previousNode=YE,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){const r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(i??0)+t.delay,easing:""},a=new I3(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(a),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,r,a,f){let b=[];if(r&&b.push(this.element),t.length>0){t=(t=t.replace(C3,"."+this._enterClassName)).replace(D3,"."+this._leaveClassName);let M=this._driver.query(this.element,t,1!=i);0!==i&&(M=i<0?M.slice(M.length+i,M.length):M.slice(0,i)),b.push(...M)}return!a&&0==b.length&&f.push(function RB(n){return new o.vHH(3014,!1)}()),b}}class ZE{constructor(t,e,i,r){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new ZE(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||jh),this._currentKeyframe.set(e,jh);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,r){e&&this._previousKeyframe.set("easing",e);const a=r&&r.params||{},f=function T3(n,t){const e=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||t.keys();for(let a of i)e.set(a,jh)}else Yg(r,e)}),e}(t,this._globalTimelineStyles);for(let[b,S]of f){const M=Fx(S,a,i);this._pendingStyles.set(b,M),this._localTimelineStyles.has(b)||this._backFill.set(b,this._globalTimelineStyles.get(b)??jh),this._updateStyle(b,M)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,i)=>{const r=this._styleSummary.get(i);(!r||e.time>r.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((b,S)=>{const M=Yg(b,new Map,this._backFill);M.forEach((O,N)=>{"!"===O?t.add(N):O===jh&&e.add(N)}),i||M.set("offset",S/this.duration),r.push(M)});const a=t.size?UE(t.values()):[],f=e.size?UE(e.values()):[];if(i){const b=r[0],S=new Map(b);b.set("offset",0),S.set("offset",1),r=[b,S]}return eI(this.element,r,a,f,this.duration,this.startTime,this.easing,!1)}}class I3 extends ZE{constructor(t,e,i,r,a,f,b=!1){super(t,e,f.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=a,this._stretchStartingKeyframe=b,this.timings={duration:f.duration,delay:f.delay,easing:f.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const a=[],f=i+e,b=e/f,S=Yg(t[0]);S.set("offset",0),a.push(S);const M=Yg(t[0]);M.set("offset",wR(b)),a.push(M);const O=t.length-1;for(let N=1;N<=O;N++){let U=Yg(t[N]);const j=U.get("offset");U.set("offset",wR((e+j*i)/f)),a.push(U)}i=f,e=0,r="",t=a}return eI(this.element,t,this.preStyleProps,this.postStyleProps,i,e,r,!0)}}function wR(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class iI{}const A3=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class P3 extends iI{normalizePropertyName(t,e){return KM(t)}normalizeStyleValue(t,e,i,r){let a="";const f=i.toString().trim();if(A3.has(e)&&0!==i&&"0"!==i)if("number"==typeof i)a="px";else{const b=i.match(/^[+-]?[\d\.]+([a-z]*)$/);b&&0==b[1].length&&r.push(function xB(n,t){return new o.vHH(3005,!1)}())}return f+a}}function ER(n,t,e,i,r,a,f,b,S,M,O,N,U){return{type:0,element:n,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:a,toState:i,toStyles:f,timelines:b,queriedElements:S,preStyleProps:M,postStyleProps:O,totalTime:N,errors:U}}const rI={};class CR{constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,r){return function R3(n,t,e,i,r){return n.some(a=>a(t,e,i,r))}(this.ast.matchers,t,e,i,r)}buildStyles(t,e,i){let r=this._stateStyles.get("*");return void 0!==t&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,i):new Map}build(t,e,i,r,a,f,b,S,M,O){const N=[],U=this.ast.options&&this.ast.options.params||rI,be=this.buildStyles(i,b&&b.params||rI,N),Ce=S&&S.params||rI,et=this.buildStyles(r,Ce,N),Ye=new Set,Be=new Map,it=new Map,At="void"===r,kt={params:O3(Ce,U),delay:this.ast.options?.delay},qt=O?[]:tI(t,e,this.ast.animation,a,f,be,et,kt,M,N);let zt=0;if(qt.forEach(xt=>{zt=Math.max(xt.duration+xt.delay,zt)}),N.length)return ER(e,this._triggerName,i,r,At,be,et,[],[],Be,it,zt,N);qt.forEach(xt=>{const $i=xt.element,di=_h(Be,$i,new Set);xt.preStyleProps.forEach(_r=>di.add(_r));const ur=_h(it,$i,new Set);xt.postStyleProps.forEach(_r=>ur.add(_r)),$i!==e&&Ye.add($i)});const Kt=UE(Ye.values());return ER(e,this._triggerName,i,r,At,be,et,qt,Kt,Be,it,zt)}}function O3(n,t){const e=Lx(t);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(e[i]=n[i]);return e}class L3{constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){const i=new Map,r=Lx(this.defaultParams);return Object.keys(t).forEach(a=>{const f=t[a];null!==f&&(r[a]=f)}),this.styles.styles.forEach(a=>{"string"!=typeof a&&a.forEach((f,b)=>{f&&(f=Fx(f,r,e));const S=this.normalizer.normalizePropertyName(b,e);f=this.normalizer.normalizeStyleValue(b,S,f,e),i.set(b,f)})}),i}}class F3{constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{this.states.set(r.name,new L3(r.style,r.options&&r.options.params||{},i))}),SR(this.states,"true","1"),SR(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new CR(t,r,this.states))}),this.fallbackTransition=function N3(n,t,e){return new CR(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(f,b)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,r){return this.transitionFactories.find(f=>f.match(t,e,i,r))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}}function SR(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}const B3=new qE;class z3{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const i=[],a=JM(this._driver,e,i,[]);if(i.length)throw function zB(n){return new o.vHH(3503,!1)}();this._animations.set(t,a)}_buildPlayer(t,e,i){const r=t.element,a=iR(0,this._normalizer,0,t.keyframes,e,i);return this._driver.animate(r,a,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){const r=[],a=this._animations.get(t);let f;const b=new Map;if(a?(f=tI(this._driver,e,a,YM,FE,new Map,new Map,i,B3,r),f.forEach(O=>{const N=_h(b,O.element,new Map);O.postStyleProps.forEach(U=>N.set(U,null))})):(r.push(function UB(){return new o.vHH(3300,!1)}()),f=[]),r.length)throw function VB(n){return new o.vHH(3504,!1)}();b.forEach((O,N)=>{O.forEach((U,j)=>{O.set(j,this._driver.computeStyle(N,j,jh))})});const M=qg(f.map(O=>{const N=b.get(O.element);return this._buildPlayer(O,new Map,N)}));return this._playersById.set(t,M),M.onDestroy(()=>this.destroy(t)),this.players.push(M),M}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function GB(n){return new o.vHH(3301,!1)}();return e}listen(t,e,i,r){const a=$M(e,"","","");return VM(this._getPlayer(t),i,a,r),()=>{}}command(t,e,i,r){if("register"==i)return void this.register(t,r[0]);if("create"==i)return void this.create(t,e,r[0]||{});const a=this._getPlayer(t);switch(i){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const DR="ng-animate-queued",oI="ng-animate-disabled",H3=[],MR={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},j3={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Yh="__ng_removed";class sI{constructor(t,e=""){this.namespaceId=e;const i=t&&t.hasOwnProperty("value");if(this.value=function W3(n){return n??null}(i?t.value:t),i){const a=Lx(t);delete a.value,this.options=a}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const i=this.options.params;Object.keys(e).forEach(r=>{null==i[r]&&(i[r]=e[r])})}}}const Nx="void",aI=new sI(Nx);class q3{constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Zh(e,this._hostClassName)}listen(t,e,i,r){if(!this._triggers.has(e))throw function $B(n,t){return new o.vHH(3302,!1)}();if(null==i||0==i.length)throw function HB(n){return new o.vHH(3303,!1)}();if(!function X3(n){return"start"==n||"done"==n}(i))throw function jB(n,t){return new o.vHH(3400,!1)}();const a=_h(this._elementListeners,t,[]),f={name:e,phase:i,callback:r};a.push(f);const b=_h(this._engine.statesByElement,t,new Map);return b.has(e)||(Zh(t,NE),Zh(t,NE+"-"+e),b.set(e,aI)),()=>{this._engine.afterFlush(()=>{const S=a.indexOf(f);S>=0&&a.splice(S,1),this._triggers.has(e)||b.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function qB(n){return new o.vHH(3401,!1)}();return e}trigger(t,e,i,r=!0){const a=this._getTrigger(e),f=new lI(this.id,e,t);let b=this._engine.statesByElement.get(t);b||(Zh(t,NE),Zh(t,NE+"-"+e),this._engine.statesByElement.set(t,b=new Map));let S=b.get(e);const M=new sI(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&S&&M.absorbOptions(S.options),b.set(e,M),S||(S=aI),M.value!==Nx&&S.value===M.value){if(!function Q3(n,t){const e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){const a=e[r];if(!t.hasOwnProperty(a)||n[a]!==t[a])return!1}return!0}(S.params,M.params)){const Ce=[],et=a.matchStyles(S.value,S.params,Ce),Ye=a.matchStyles(M.value,M.params,Ce);Ce.length?this._engine.reportError(Ce):this._engine.afterFlush(()=>{Ey(t,et),Dp(t,Ye)})}return}const U=_h(this._engine.playersByElement,t,[]);U.forEach(Ce=>{Ce.namespaceId==this.id&&Ce.triggerName==e&&Ce.queued&&Ce.destroy()});let j=a.matchTransition(S.value,M.value,t,M.params),be=!1;if(!j){if(!r)return;j=a.fallbackTransition,be=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:j,fromState:S,toState:M,player:f,isFallbackTransition:be}),be||(Zh(t,DR),f.onStart(()=>{_0(t,DR)})),f.onDone(()=>{let Ce=this.players.indexOf(f);Ce>=0&&this.players.splice(Ce,1);const et=this._engine.playersByElement.get(t);if(et){let Ye=et.indexOf(f);Ye>=0&&et.splice(Ye,1)}}),this.players.push(f),U.push(f),f}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const i=this._engine.driver.query(t,BE,!0);i.forEach(r=>{if(r[Yh])return;const a=this._engine.fetchNamespacesByElement(r);a.size?a.forEach(f=>f.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,i,r){const a=this._engine.statesByElement.get(t),f=new Map;if(a){const b=[];if(a.forEach((S,M)=>{if(f.set(M,S.value),this._triggers.has(M)){const O=this.trigger(t,M,Nx,r);O&&b.push(O)}}),b.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,f),i&&qg(b).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){const r=new Set;e.forEach(a=>{const f=a.name;if(r.has(f))return;r.add(f);const S=this._triggers.get(f).fallbackTransition,M=i.get(f)||aI,O=new sI(Nx),N=new lI(this.id,f,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:f,transition:S,fromState:M,toState:O,player:N,isFallbackTransition:!0})})}}removeNode(t,e){const i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(i.totalAnimations){const a=i.players.length?i.playersByQueriedElement.get(t):[];if(a&&a.length)r=!0;else{let f=t;for(;f=f.parentNode;)if(i.statesByElement.get(f)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,e);else{const a=t[Yh];(!a||a===MR)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){Zh(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const a=i.element,f=this._elementListeners.get(a);f&&f.forEach(b=>{if(b.name==i.triggerName){const S=$M(a,i.triggerName,i.fromState.value,i.toState.value);S._data=t,VM(i.player,b.phase,S,b.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{const a=i.transition.ast.depCount,f=r.transition.ast.depCount;return 0==a||0==f?a-f:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(i=>i.element===t)||e,e}}class Y3{constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,a)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){const i=new q3(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let f=!1,b=this.driver.getParentElement(e);for(;b;){const S=r.get(b);if(S){const M=i.indexOf(S);i.splice(M+1,0,t),f=!0;break}b=this.driver.getParentElement(b)}f||i.unshift(t)}else i.push(t);return r.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let r=this._namespaceLookup[t];r&&r.register(e,i)&&this.totalAnimations++}destroy(t,e){if(!t)return;const i=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,i=this.statesByElement.get(t);if(i)for(let r of i.values())if(r.namespaceId){const a=this._fetchNamespace(r.namespaceId);a&&e.add(a)}return e}trigger(t,e,i,r){if(WE(e)){const a=this._fetchNamespace(t);if(a)return a.trigger(e,i,r),!0}return!1}insertNode(t,e,i,r){if(!WE(e))return;const a=e[Yh];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const f=this.collectedLeaveElements.indexOf(e);f>=0&&this.collectedLeaveElements.splice(f,1)}if(t){const f=this._fetchNamespace(t);f&&f.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Zh(t,oI)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),_0(t,oI))}removeNode(t,e,i,r){if(WE(e)){const a=t?this._fetchNamespace(t):null;if(a?a.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),i){const f=this.namespacesByHostElement.get(e);f&&f.id!==t&&f.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,i,r,a){this.collectedLeaveElements.push(e),e[Yh]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:a}}listen(t,e,i,r,a){return WE(e)?this._fetchNamespace(t).listen(e,i,r,a):()=>{}}_buildInstruction(t,e,i,r,a){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,e,a)}destroyInnerAnimations(t){let e=this.driver.query(t,BE,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,ZM,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return qg(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[Yh];if(e&&e.setForRemoval){if(t[Yh]=MR,e.namespaceId){this.destroyInnerAnimations(t);const i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(oI)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Zh(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?qg(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw function YB(n){return new o.vHH(3402,!1)}()}_flushAnimations(t,e){const i=new qE,r=[],a=new Map,f=[],b=new Map,S=new Map,M=new Map,O=new Set;this.disabledNodes.forEach(yn=>{O.add(yn);const ri=this.driver.query(yn,".ng-animate-queued",!0);for(let ui=0;ui<ri.length;ui++)O.add(ri[ui])});const N=this.bodyNode,U=Array.from(this.statesByElement.keys()),j=AR(U,this.collectedEnterElements),be=new Map;let Ce=0;j.forEach((yn,ri)=>{const ui=YM+Ce++;be.set(ri,ui),yn.forEach(Si=>Zh(Si,ui))});const et=[],Ye=new Set,Be=new Set;for(let yn=0;yn<this.collectedLeaveElements.length;yn++){const ri=this.collectedLeaveElements[yn],ui=ri[Yh];ui&&ui.setForRemoval&&(et.push(ri),Ye.add(ri),ui.hasAnimation?this.driver.query(ri,".ng-star-inserted",!0).forEach(Si=>Ye.add(Si)):Be.add(ri))}const it=new Map,At=AR(U,Array.from(Ye));At.forEach((yn,ri)=>{const ui=FE+Ce++;it.set(ri,ui),yn.forEach(Si=>Zh(Si,ui))}),t.push(()=>{j.forEach((yn,ri)=>{const ui=be.get(ri);yn.forEach(Si=>_0(Si,ui))}),At.forEach((yn,ri)=>{const ui=it.get(ri);yn.forEach(Si=>_0(Si,ui))}),et.forEach(yn=>{this.processLeaveNode(yn)})});const kt=[],qt=[];for(let yn=this._namespaceList.length-1;yn>=0;yn--)this._namespaceList[yn].drainQueuedTransitions(e).forEach(ui=>{const Si=ui.player,ys=ui.element;if(kt.push(Si),this.collectedEnterElements.length){const Oa=ys[Yh];if(Oa&&Oa.setForMove){if(Oa.previousTriggersValues&&Oa.previousTriggersValues.has(ui.triggerName)){const Bf=Oa.previousTriggersValues.get(ui.triggerName),ru=this.statesByElement.get(ui.element);if(ru&&ru.has(ui.triggerName)){const Vm=ru.get(ui.triggerName);Vm.value=Bf,ru.set(ui.triggerName,Vm)}}return void Si.destroy()}}const Ys=!N||!this.driver.containsElement(N,ys),Bs=it.get(ys),vo=be.get(ys),Or=this._buildInstruction(ui,i,vo,Bs,Ys);if(Or.errors&&Or.errors.length)return void qt.push(Or);if(Ys)return Si.onStart(()=>Ey(ys,Or.fromStyles)),Si.onDestroy(()=>Dp(ys,Or.toStyles)),void r.push(Si);if(ui.isFallbackTransition)return Si.onStart(()=>Ey(ys,Or.fromStyles)),Si.onDestroy(()=>Dp(ys,Or.toStyles)),void r.push(Si);const Ra=[];Or.timelines.forEach(Oa=>{Oa.stretchStartingKeyframe=!0,this.disabledNodes.has(Oa.element)||Ra.push(Oa)}),Or.timelines=Ra,i.append(ys,Or.timelines),f.push({instruction:Or,player:Si,element:ys}),Or.queriedElements.forEach(Oa=>_h(b,Oa,[]).push(Si)),Or.preStyleProps.forEach((Oa,Bf)=>{if(Oa.size){let ru=S.get(Bf);ru||S.set(Bf,ru=new Set),Oa.forEach((Vm,i_)=>ru.add(i_))}}),Or.postStyleProps.forEach((Oa,Bf)=>{let ru=M.get(Bf);ru||M.set(Bf,ru=new Set),Oa.forEach((Vm,i_)=>ru.add(i_))})});if(qt.length){const yn=[];qt.forEach(ri=>{yn.push(function ZB(n,t){return new o.vHH(3505,!1)}())}),kt.forEach(ri=>ri.destroy()),this.reportError(yn)}const zt=new Map,Kt=new Map;f.forEach(yn=>{const ri=yn.element;i.has(ri)&&(Kt.set(ri,ri),this._beforeAnimationBuild(yn.player.namespaceId,yn.instruction,zt))}),r.forEach(yn=>{const ri=yn.element;this._getPreviousPlayers(ri,!1,yn.namespaceId,yn.triggerName,null).forEach(Si=>{_h(zt,ri,[]).push(Si),Si.destroy()})});const xt=et.filter(yn=>RR(yn,S,M)),$i=new Map;TR($i,this.driver,Be,M,jh).forEach(yn=>{RR(yn,S,M)&&xt.push(yn)});const ur=new Map;j.forEach((yn,ri)=>{TR(ur,this.driver,new Set(yn),S,"!")}),xt.forEach(yn=>{const ri=$i.get(yn),ui=ur.get(yn);$i.set(yn,new Map([...Array.from(ri?.entries()??[]),...Array.from(ui?.entries()??[])]))});const _r=[],Gn=[],or={};f.forEach(yn=>{const{element:ri,player:ui,instruction:Si}=yn;if(i.has(ri)){if(O.has(ri))return ui.onDestroy(()=>Dp(ri,Si.toStyles)),ui.disabled=!0,ui.overrideTotalTime(Si.totalTime),void r.push(ui);let ys=or;if(Kt.size>1){let Bs=ri;const vo=[];for(;Bs=Bs.parentNode;){const Or=Kt.get(Bs);if(Or){ys=Or;break}vo.push(Bs)}vo.forEach(Or=>Kt.set(Or,ys))}const Ys=this._buildAnimation(ui.namespaceId,Si,zt,a,ur,$i);if(ui.setRealPlayer(Ys),ys===or)_r.push(ui);else{const Bs=this.playersByElement.get(ys);Bs&&Bs.length&&(ui.parentPlayer=qg(Bs)),r.push(ui)}}else Ey(ri,Si.fromStyles),ui.onDestroy(()=>Dp(ri,Si.toStyles)),Gn.push(ui),O.has(ri)&&r.push(ui)}),Gn.forEach(yn=>{const ri=a.get(yn.element);if(ri&&ri.length){const ui=qg(ri);yn.setRealPlayer(ui)}}),r.forEach(yn=>{yn.parentPlayer?yn.syncPlayerEvents(yn.parentPlayer):yn.destroy()});for(let yn=0;yn<et.length;yn++){const ri=et[yn],ui=ri[Yh];if(_0(ri,FE),ui&&ui.hasAnimation)continue;let Si=[];if(b.size){let Ys=b.get(ri);Ys&&Ys.length&&Si.push(...Ys);let Bs=this.driver.query(ri,ZM,!0);for(let vo=0;vo<Bs.length;vo++){let Or=b.get(Bs[vo]);Or&&Or.length&&Si.push(...Or)}}const ys=Si.filter(Ys=>!Ys.destroyed);ys.length?K3(this,ri,ys):this.processLeaveNode(ri)}return et.length=0,_r.forEach(yn=>{this.players.push(yn),yn.onDone(()=>{yn.destroy();const ri=this.players.indexOf(yn);this.players.splice(ri,1)}),yn.play()}),_r}elementContainsData(t,e){let i=!1;const r=e[Yh];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(e)&&(i=!0),this.playersByQueriedElement.has(e)&&(i=!0),this.statesByElement.has(e)&&(i=!0),this._fetchNamespace(t).elementContainsData(e)||i}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,r,a){let f=[];if(e){const b=this.playersByQueriedElement.get(t);b&&(f=b)}else{const b=this.playersByElement.get(t);if(b){const S=!a||a==Nx;b.forEach(M=>{M.queued||!S&&M.triggerName!=r||f.push(M)})}}return(i||r)&&(f=f.filter(b=>!(i&&i!=b.namespaceId||r&&r!=b.triggerName))),f}_beforeAnimationBuild(t,e,i){const a=e.element,f=e.isRemovalTransition?void 0:t,b=e.isRemovalTransition?void 0:e.triggerName;for(const S of e.timelines){const M=S.element,O=M!==a,N=_h(i,M,[]);this._getPreviousPlayers(M,O,f,b,e.toState).forEach(j=>{const be=j.getRealPlayer();be.beforeDestroy&&be.beforeDestroy(),j.destroy(),N.push(j)})}Ey(a,e.fromStyles)}_buildAnimation(t,e,i,r,a,f){const b=e.triggerName,S=e.element,M=[],O=new Set,N=new Set,U=e.timelines.map(be=>{const Ce=be.element;O.add(Ce);const et=Ce[Yh];if(et&&et.removedBeforeQueried)return new s0(be.duration,be.delay);const Ye=Ce!==S,Be=function J3(n){const t=[];return PR(n,t),t}((i.get(Ce)||H3).map(zt=>zt.getRealPlayer())).filter(zt=>!!zt.element&&zt.element===Ce),it=a.get(Ce),At=f.get(Ce),kt=iR(0,this._normalizer,0,be.keyframes,it,At),qt=this._buildPlayer(be,kt,Be);if(be.subTimeline&&r&&N.add(Ce),Ye){const zt=new lI(t,b,Ce);zt.setRealPlayer(qt),M.push(zt)}return qt});M.forEach(be=>{_h(this.playersByQueriedElement,be.element,[]).push(be),be.onDone(()=>function Z3(n,t,e){let i=n.get(t);if(i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&n.delete(t)}return i}(this.playersByQueriedElement,be.element,be))}),O.forEach(be=>Zh(be,hR));const j=qg(U);return j.onDestroy(()=>{O.forEach(be=>_0(be,hR)),Dp(S,e.toStyles)}),N.forEach(be=>{_h(r,be,[]).push(j)}),j}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new s0(t.duration,t.delay)}}class lI{constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i,this._player=new s0,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,i)=>{e.forEach(r=>VM(t,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){_h(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function WE(n){return n&&1===n.nodeType}function IR(n,t){const e=n.style.display;return n.style.display=t??"none",e}function TR(n,t,e,i,r){const a=[];e.forEach(S=>a.push(IR(S)));const f=[];i.forEach((S,M)=>{const O=new Map;S.forEach(N=>{const U=t.computeStyle(M,N,r);O.set(N,U),(!U||0==U.length)&&(M[Yh]=j3,f.push(M))}),n.set(M,O)});let b=0;return e.forEach(S=>IR(S,a[b++])),f}function AR(n,t){const e=new Map;if(n.forEach(b=>e.set(b,[])),0==t.length)return e;const r=new Set(t),a=new Map;function f(b){if(!b)return 1;let S=a.get(b);if(S)return S;const M=b.parentNode;return S=e.has(M)?M:r.has(M)?1:f(M),a.set(b,S),S}return t.forEach(b=>{const S=f(b);1!==S&&e.get(S).push(b)}),e}function Zh(n,t){n.classList?.add(t)}function _0(n,t){n.classList?.remove(t)}function K3(n,t,e){qg(e).onDone(()=>n.processLeaveNode(t))}function PR(n,t){for(let e=0;e<n.length;e++){const i=n[e];i instanceof iM?PR(i.players,t):t.push(i)}}function RR(n,t,e){const i=e.get(n);if(!i)return!1;let r=t.get(n);return r?i.forEach(a=>r.add(a)):t.set(n,i),e.delete(n),!0}class XE{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,a)=>{},this._transitionEngine=new Y3(t,e,i),this._timelineEngine=new z3(t,e,i),this._transitionEngine.onRemovalComplete=(r,a)=>this.onRemovalComplete(r,a)}registerTrigger(t,e,i,r,a){const f=t+"-"+r;let b=this._triggerCache[f];if(!b){const S=[],O=JM(this._driver,a,S,[]);if(S.length)throw function NB(n,t){return new o.vHH(3404,!1)}();b=function k3(n,t,e){return new F3(n,t,e)}(r,O,this._normalizer),this._triggerCache[f]=b}this._transitionEngine.registerTrigger(e,r,b)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,r){this._transitionEngine.insertNode(t,e,i,r)}onRemove(t,e,i,r){this._transitionEngine.removeNode(t,e,r||!1,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,r){if("@"==i.charAt(0)){const[a,f]=rR(i);this._timelineEngine.command(a,e,f,r)}else this._transitionEngine.trigger(t,e,i,r)}listen(t,e,i,r,a){if("@"==i.charAt(0)){const[f,b]=rR(i);return this._timelineEngine.listen(f,e,b,a)}return this._transitionEngine.listen(t,e,i,r,a)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let tz=(()=>{class n{constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r,this._state=0;let a=n.initialStylesByElement.get(e);a||n.initialStylesByElement.set(e,a=new Map),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&Dp(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Dp(this._element,this._initialStyles),this._endStyles&&(Dp(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Ey(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ey(this._element,this._endStyles),this._endStyles=null),Dp(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function cI(n){let t=null;return n.forEach((e,i)=>{(function nz(n){return"display"===n||"position"===n})(i)&&(t=t||new Map,t.set(i,e))}),t}class OR{constructor(t,e,i,r){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(t,e,i){return t.animate(this._convertKeyframesToObject(e),i)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&t.set(r,this._finished?i:yR(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class iz{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return lR(t,e)}getParentElement(t){return jM(t)}query(t,e,i){return cR(t,e,i)}computeStyle(t,e,i){return window.getComputedStyle(t)[e]}animate(t,e,i,r,a,f=[]){const S={duration:i,delay:r,fill:0==r?"both":"forwards"};a&&(S.easing=a);const M=new Map,O=f.filter(j=>j instanceof OR);(function a3(n,t){return 0===n||0===t})(i,r)&&O.forEach(j=>{j.currentSnapshot.forEach((be,Ce)=>M.set(Ce,be))});let N=function i3(n){return n.length?n[0]instanceof Map?n:n.map(t=>fR(t)):[]}(e).map(j=>Yg(j));N=function l3(n,t,e){if(e.size&&t.length){let i=t[0],r=[];if(e.forEach((a,f)=>{i.has(f)||r.push(f),i.set(f,a)}),r.length)for(let a=1;a<t.length;a++){let f=t[a];r.forEach(b=>f.set(b,yR(n,b)))}}return t}(t,N,M);const U=function ez(n,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=cI(t[0]),t.length>1&&(i=cI(t[t.length-1]))):t instanceof Map&&(e=cI(t)),e||i?new tz(n,e,i):null}(t,N);return new OR(t,N,S,U)}}let rz=(()=>{class n extends oE{constructor(e,i){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(i.body,{id:"0",encapsulation:o.ifc.None,styles:[],data:{animation:[]}})}build(e){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?aE(e):e;return LR(this._renderer,null,i,"register",[r]),new oz(i,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.FYo),o.LFG(he))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class oz extends sE{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new sz(this._id,t,e||{},this._renderer)}}class sz{constructor(t,e,i,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return LR(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function LR(n,t,e,i,r){return n.setProperty(t,`@@${e}:${i}`,r)}const kR="@.disabled";let az=(()=>{class n{constructor(e,i,r){this.delegate=e,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(a,f)=>{const b=f?.parentNode(a);b&&f.removeChild(b,a)}}createRenderer(e,i){const a=this.delegate.createRenderer(e,i);if(!(e&&i&&i.data&&i.data.animation)){let O=this._rendererCache.get(a);return O||(O=new FR("",a,this.engine,()=>this._rendererCache.delete(a)),this._rendererCache.set(a,O)),O}const f=i.id,b=i.id+"-"+this._currentId;this._currentId++,this.engine.register(b,e);const S=O=>{Array.isArray(O)?O.forEach(S):this.engine.registerTrigger(f,b,e,O.name,O)};return i.data.animation.forEach(S),new lz(this,b,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,r){e>=0&&e<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(a=>{const[f,b]=a;f(b)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.FYo),o.LFG(XE),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class FR{constructor(t,e,i,r){this.namespaceId=t,this.delegate=e,this.engine=i,this._onDestroy=r,this.destroyNode=this.delegate.destroyNode?a=>e.destroyNode(a):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,r=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate,i)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){"@"==e.charAt(0)&&e==kR?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.delegate.listen(t,e,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class lz extends FR{constructor(t,e,i,r,a){super(e,i,r,a),this.factory=t,this.namespaceId=e}setProperty(t,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==kR?this.disableAnimations(t,i=void 0===i||!!i):this.engine.process(this.namespaceId,t,e.slice(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i){if("@"==e.charAt(0)){const r=function cz(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let a=e.slice(1),f="";return"@"!=a.charAt(0)&&([a,f]=function uz(n){const t=n.indexOf(".");return[n.substring(0,t),n.slice(t+1)]}(a)),this.engine.listen(this.namespaceId,r,a,f,b=>{this.factory.scheduleListenerCallback(b._data||-1,i,b)})}return this.delegate.listen(t,e,i)}}const NR=[{provide:oE,useClass:rz},{provide:iI,useFactory:function hz(){return new P3}},{provide:XE,useClass:(()=>{class n extends XE{constructor(e,i,r,a){super(e.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(he),o.LFG(qM),o.LFG(iI),o.LFG(o.z2F))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})()},{provide:o.FYo,useFactory:function fz(n,t,e){return new az(n,t,e)},deps:[hu,XE,o.R0b]}],uI=[{provide:qM,useFactory:()=>new iz},{provide:o.QbO,useValue:"BrowserAnimations"},...NR],BR=[{provide:qM,useClass:uR},{provide:o.QbO,useValue:"NoopAnimations"},...NR];let pz=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?BR:uI}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:uI,imports:[s]}),n})();const JE=(0,W(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var dI=W(9635);function hI(){return(0,_l.e)((n,t)=>{let e=null;n._refCount++;const i=(0,il.x)(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const r=n._connection,a=e;e=null,r&&(!a||r===a)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}class zR extends gr.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,_l.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Ia.w0;const e=this.getSubject();t.add(this.source.subscribe((0,il.x)(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Ia.w0.EMPTY)}return t}refCount(){return hI()(this)}}function QE(n){return(0,_l.e)((t,e)=>{let i=!1;t.subscribe((0,il.x)(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function UR(n=gz){return(0,_l.e)((t,e)=>{let i=!1;t.subscribe((0,il.x)(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function gz(){return new JE}function Zg(n,t){const e=arguments.length>=2;return i=>i.pipe(n?(0,co.h)((r,a)=>n(r,a,i)):eu.y,(0,uo.q)(1),e?QE(t):UR(()=>new JE))}var VR=W(5026);function fI(n){return n<=0?()=>pd.E:(0,_l.e)((t,e)=>{let i=[];t.subscribe((0,il.x)(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function GR(n,t){const e=arguments.length>=2;return i=>i.pipe(n?(0,co.h)((r,a)=>n(r,a,i)):eu.y,fI(1),e?QE(t):UR(()=>new JE))}const Mo="primary",Bx=Symbol("RouteTitle");class yz{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function y0(n){return new yz(n)}function vz(n,t,e){const i=e.path.split("/");if(i.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<n.length))return null;const r={};for(let a=0;a<i.length;a++){const f=i[a],b=n[a];if(f.startsWith(":"))r[f.substring(1)]=b;else if(f!==b.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Mp(n,t){const e=n?Object.keys(n):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let a=0;a<e.length;a++)if(r=e[a],!$R(n[r],t[r]))return!1;return!0}function $R(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),i=[...t].sort();return e.every((r,a)=>i[a]===r)}return n===t}function HR(n){return Array.prototype.concat.apply([],n)}function jR(n){return n.length>0?n[n.length-1]:null}function xu(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function Wg(n){return(0,o.CqO)(n)?n:(0,o.QGY)(n)?(0,Hs.D)(Promise.resolve(n)):(0,an.of)(n)}const eC=!1,xz={exact:function ZR(n,t,e){if(!Dy(n.segments,t.segments)||!tC(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!n.children[i]||!ZR(n.children[i],t.children[i],e))return!1;return!0},subset:WR},qR={exact:function wz(n,t){return Mp(n,t)},subset:function Ez(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>$R(n[e],t[e]))},ignored:()=>!0};function YR(n,t,e){return xz[e.paths](n.root,t.root,e.matrixParams)&&qR[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function WR(n,t,e){return XR(n,t,t.segments,e)}function XR(n,t,e,i){if(n.segments.length>e.length){const r=n.segments.slice(0,e.length);return!(!Dy(r,e)||t.hasChildren()||!tC(r,e,i))}if(n.segments.length===e.length){if(!Dy(n.segments,e)||!tC(n.segments,e,i))return!1;for(const r in t.children)if(!n.children[r]||!WR(n.children[r],t.children[r],i))return!1;return!0}{const r=e.slice(0,n.segments.length),a=e.slice(n.segments.length);return!!(Dy(n.segments,r)&&tC(n.segments,r,i)&&n.children[Mo])&&XR(n.children[Mo],t,a,i)}}function tC(n,t,e){return t.every((i,r)=>qR[e](n[r].parameters,i.parameters))}class Sy{constructor(t=new ts([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=y0(this.queryParams)),this._queryParamMap}toString(){return Dz.serialize(this)}}class ts{constructor(t,e){this.segments=t,this.children=e,this.parent=null,xu(e,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return nC(this)}}class zx{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=y0(this.parameters)),this._parameterMap}toString(){return QR(this)}}function Dy(n,t){return n.length===t.length&&n.every((e,i)=>e.path===t[i].path)}let Ux=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return new pI},providedIn:"root"}),n})();class pI{parse(t){const e=new kz(t);return new Sy(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${Vx(t.root,!0)}`,i=function Tz(n){const t=Object.keys(n).map(e=>{const i=n[e];return Array.isArray(i)?i.map(r=>`${iC(e)}=${iC(r)}`).join("&"):`${iC(e)}=${iC(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${i}${"string"==typeof t.fragment?`#${function Mz(n){return encodeURI(n)}(t.fragment)}`:""}`}}const Dz=new pI;function nC(n){return n.segments.map(t=>QR(t)).join("/")}function Vx(n,t){if(!n.hasChildren())return nC(n);if(t){const e=n.children[Mo]?Vx(n.children[Mo],!1):"",i=[];return xu(n.children,(r,a)=>{a!==Mo&&i.push(`${a}:${Vx(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function Sz(n,t){let e=[];return xu(n.children,(i,r)=>{r===Mo&&(e=e.concat(t(i,r)))}),xu(n.children,(i,r)=>{r!==Mo&&(e=e.concat(t(i,r)))}),e}(n,(i,r)=>r===Mo?[Vx(n.children[Mo],!1)]:[`${r}:${Vx(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Mo]?`${nC(n)}/${e[0]}`:`${nC(n)}/(${e.join("//")})`}}function KR(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function iC(n){return KR(n).replace(/%3B/gi,";")}function mI(n){return KR(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function rC(n){return decodeURIComponent(n)}function JR(n){return rC(n.replace(/\+/g,"%20"))}function QR(n){return`${mI(n.path)}${function Iz(n){return Object.keys(n).map(t=>`;${mI(t)}=${mI(n[t])}`).join("")}(n.parameters)}`}const Az=/^[^\/()?;=#]+/;function oC(n){const t=n.match(Az);return t?t[0]:""}const Pz=/^[^=?&#]+/,Oz=/^[^&#]+/;class kz{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ts([],{}):new ts([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[Mo]=new ts(t,e)),i}parseSegment(){const t=oC(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new o.vHH(4009,eC);return this.capture(t),new zx(rC(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=oC(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=oC(this.remaining);r&&(i=r,this.capture(i))}t[rC(e)]=rC(i)}parseQueryParam(t){const e=function Rz(n){const t=n.match(Pz);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const f=function Lz(n){const t=n.match(Oz);return t?t[0]:""}(this.remaining);f&&(i=f,this.capture(i))}const r=JR(e),a=JR(i);if(t.hasOwnProperty(r)){let f=t[r];Array.isArray(f)||(f=[f],t[r]=f),f.push(a)}else t[r]=a}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=oC(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new o.vHH(4010,eC);let a;i.indexOf(":")>-1?(a=i.slice(0,i.indexOf(":")),this.capture(a),this.capture(":")):t&&(a=Mo);const f=this.parseChildren();e[a]=1===Object.keys(f).length?f[Mo]:new ts([],f),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new o.vHH(4011,eC)}}function gI(n){return n.segments.length>0?new ts([],{[Mo]:n}):n}function sC(n){const t={};for(const i of Object.keys(n.children)){const a=sC(n.children[i]);(a.segments.length>0||a.hasChildren())&&(t[i]=a)}return function Fz(n){if(1===n.numberOfChildren&&n.children[Mo]){const t=n.children[Mo];return new ts(n.segments.concat(t.segments),t.children)}return n}(new ts(n.segments,t))}function My(n){return n instanceof Sy}function zz(n,t,e,i,r){if(0===e.length)return v0(t.root,t.root,t.root,i,r);const a=function n2(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new t2(!0,0,n);let t=0,e=!1;const i=n.reduce((r,a,f)=>{if("object"==typeof a&&null!=a){if(a.outlets){const b={};return xu(a.outlets,(S,M)=>{b[M]="string"==typeof S?S.split("/"):S}),[...r,{outlets:b}]}if(a.segmentPath)return[...r,a.segmentPath]}return"string"!=typeof a?[...r,a]:0===f?(a.split("/").forEach((b,S)=>{0==S&&"."===b||(0==S&&""===b?e=!0:".."===b?t++:""!=b&&r.push(b))}),r):[...r,a]},[]);return new t2(e,t,i)}(e);return a.toRoot()?v0(t.root,t.root,new ts([],{}),i,r):function f(S){const M=function Vz(n,t,e,i){if(n.isAbsolute)return new b0(t.root,!0,0);if(-1===i)return new b0(e,e===t.root,0);return function r2(n,t,e){let i=n,r=t,a=e;for(;a>r;){if(a-=r,i=i.parent,!i)throw new o.vHH(4005,!1);r=i.segments.length}return new b0(i,!1,r-a)}(e,i+(Gx(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,t,n.snapshot?._urlSegment,S),O=M.processChildren?Hx(M.segmentGroup,M.index,a.commands):yI(M.segmentGroup,M.index,a.commands);return v0(t.root,M.segmentGroup,O,i,r)}(n.snapshot?._lastPathIndex)}function Gx(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function $x(n){return"object"==typeof n&&null!=n&&n.outlets}function v0(n,t,e,i,r){let f,a={};i&&xu(i,(S,M)=>{a[M]=Array.isArray(S)?S.map(O=>`${O}`):`${S}`}),f=n===t?e:e2(n,t,e);const b=gI(sC(f));return new Sy(b,a,r)}function e2(n,t,e){const i={};return xu(n.children,(r,a)=>{i[a]=r===t?e:e2(r,t,e)}),new ts(n.segments,i)}class t2{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&Gx(i[0]))throw new o.vHH(4003,!1);const r=i.find($x);if(r&&r!==jR(i))throw new o.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class b0{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function yI(n,t,e){if(n||(n=new ts([],{})),0===n.segments.length&&n.hasChildren())return Hx(n,t,e);const i=function $z(n,t,e){let i=0,r=t;const a={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return a;const f=n.segments[r],b=e[i];if($x(b))break;const S=`${b}`,M=i<e.length-1?e[i+1]:null;if(r>0&&void 0===S)break;if(S&&M&&"object"==typeof M&&void 0===M.outlets){if(!s2(S,M,f))return a;i+=2}else{if(!s2(S,{},f))return a;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const a=new ts(n.segments.slice(0,i.pathIndex),{});return a.children[Mo]=new ts(n.segments.slice(i.pathIndex),n.children),Hx(a,0,r)}return i.match&&0===r.length?new ts(n.segments,{}):i.match&&!n.hasChildren()?vI(n,t,e):i.match?Hx(n,0,r):vI(n,t,e)}function Hx(n,t,e){if(0===e.length)return new ts(n.segments,{});{const i=function Gz(n){return $x(n[0])?n[0].outlets:{[Mo]:n}}(e),r={};return xu(i,(a,f)=>{"string"==typeof a&&(a=[a]),null!==a&&(r[f]=yI(n.children[f],t,a))}),xu(n.children,(a,f)=>{void 0===i[f]&&(r[f]=a)}),new ts(n.segments,r)}}function vI(n,t,e){const i=n.segments.slice(0,t);let r=0;for(;r<e.length;){const a=e[r];if($x(a)){const S=Hz(a.outlets);return new ts(i,S)}if(0===r&&Gx(e[0])){i.push(new zx(n.segments[t].path,o2(e[0]))),r++;continue}const f=$x(a)?a.outlets[Mo]:`${a}`,b=r<e.length-1?e[r+1]:null;f&&b&&Gx(b)?(i.push(new zx(f,o2(b))),r+=2):(i.push(new zx(f,{})),r++)}return new ts(i,{})}function Hz(n){const t={};return xu(n,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[i]=vI(new ts([],{}),0,e))}),t}function o2(n){const t={};return xu(n,(e,i)=>t[i]=`${e}`),t}function s2(n,t,e){return n==e.path&&Mp(t,e.parameters)}class Pm{constructor(t,e){this.id=t,this.url=e}}class bI extends Pm{constructor(t,e,i="imperative",r=null){super(t,e),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Iy extends Pm{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class aC extends Pm{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class a2 extends Pm{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class jz extends Pm{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qz extends Pm{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yz extends Pm{constructor(t,e,i,r,a){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Zz extends Pm{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wz extends Pm{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xz{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Kz{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Jz{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qz{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class e6{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class t6{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class l2{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let i6=(()=>{class n{createUrlTree(e,i,r,a,f,b){return zz(e||i.root,r,a,f,b)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),r6=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(t){return i6.\u0275fac(t)},providedIn:"root"}),n})();class c2{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=xI(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=xI(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=wI(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return wI(t,this._root).map(e=>e.value)}}function xI(n,t){if(n===t.value)return t;for(const e of t.children){const i=xI(n,e);if(i)return i}return null}function wI(n,t){if(n===t.value)return[t];for(const e of t.children){const i=wI(n,e);if(i.length)return i.unshift(t),i}return[]}class Rm{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function x0(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class u2 extends c2{constructor(t,e){super(t),this.snapshot=e,EI(this,t)}toString(){return this.snapshot.toString()}}function d2(n,t){const e=function o6(n,t){const f=new lC([],{},{},"",{},Mo,t,null,n.root,-1,{});return new f2("",new Rm(f,[]))}(n,t),i=new rl.X([new zx("",{})]),r=new rl.X({}),a=new rl.X({}),f=new rl.X({}),b=new rl.X(""),S=new Xg(i,r,f,b,a,Mo,t,e.root);return S.snapshot=e.root,new u2(new Rm(S,[]),e)}class Xg{constructor(t,e,i,r,a,f,b,S){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=a,this.outlet=f,this.component=b,this.title=this.data?.pipe((0,kn.U)(M=>M[Bx]))??(0,an.of)(void 0),this._futureSnapshot=S}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,kn.U)(t=>y0(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,kn.U)(t=>y0(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function h2(n,t="emptyOnly"){const e=n.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const r=e[i],a=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(a.component)break;i--}}return function s6(n){return n.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(i))}class lC{constructor(t,e,i,r,a,f,b,S,M,O,N){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=a,this.outlet=f,this.component=b,this.routeConfig=S,this._urlSegment=M,this._lastPathIndex=O,this._resolve=N}get title(){return this.data?.[Bx]}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=y0(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=y0(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class f2 extends c2{constructor(t,e){super(e),this.url=t,EI(this,e)}toString(){return p2(this._root)}}function EI(n,t){t.value._routerState=n,t.children.forEach(e=>EI(n,e))}function p2(n){const t=n.children.length>0?` { ${n.children.map(p2).join(", ")} } `:"";return`${n.value}${t}`}function CI(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Mp(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),Mp(t.params,e.params)||n.params.next(e.params),function bz(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!Mp(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),Mp(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function SI(n,t){const e=Mp(n.params,t.params)&&function Cz(n,t){return Dy(n,t)&&n.every((e,i)=>Mp(e.parameters,t[i].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||SI(n.parent,t.parent))}function jx(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const r=function l6(n,t,e){return t.children.map(i=>{for(const r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return jx(n,i,r);return jx(n,i)})}(n,t,e);return new Rm(i,r)}{if(n.shouldAttach(t.value)){const a=n.retrieve(t.value);if(null!==a){const f=a.route;return f.value._futureSnapshot=t.value,f.children=t.children.map(b=>jx(n,b)),f}}const i=function c6(n){return new Xg(new rl.X(n.url),new rl.X(n.params),new rl.X(n.queryParams),new rl.X(n.fragment),new rl.X(n.data),n.outlet,n.component,n)}(t.value),r=t.children.map(a=>jx(n,a));return new Rm(i,r)}}const DI="ngNavigationCancelingError";function m2(n,t){const{redirectTo:e,navigationBehaviorOptions:i}=My(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=g2(!1,0,t);return r.url=e,r.navigationBehaviorOptions=i,r}function g2(n,t,e){const i=new Error("NavigationCancelingError: "+(n||""));return i[DI]=!0,i.cancellationCode=t,e&&(i.url=e),i}function _2(n){return y2(n)&&My(n.url)}function y2(n){return n&&n[DI]}class u6{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new qx,this.attachRef=null}}let qx=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new u6,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const cC=!1;let v2=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Mo,this.activateEvents=new o.vpe,this.deactivateEvents=new o.vpe,this.attachEvents=new o.vpe,this.detachEvents=new o.vpe,this.parentContexts=(0,o.f3M)(qx),this.location=(0,o.f3M)(o.s_b),this.changeDetector=(0,o.f3M)(o.sBO),this.environmentInjector=(0,o.f3M)(o.lqb)}ngOnChanges(e){if(e.name){const{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new o.vHH(4012,cC);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new o.vHH(4012,cC);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new o.vHH(4012,cC);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new o.vHH(4013,cC);this._activatedRoute=e;const r=this.location,f=e.snapshot.component,b=this.parentContexts.getOrCreateContext(this.name).children,S=new d6(e,b,r.injector);if(i&&function h6(n){return!!n.resolveComponentFactory}(i)){const M=i.resolveComponentFactory(f);this.activated=r.createComponent(M,r.length,S)}else this.activated=r.createComponent(f,{index:r.length,injector:S,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[o.TTD]}),n})();class d6{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===Xg?this.route:t===qx?this.childContexts:this.parent.get(t,e)}}let MI=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[o.jDz],decls:1,vars:0,template:function(e,i){1&e&&o._UZ(0,"router-outlet")},dependencies:[v2],encapsulation:2}),n})();function b2(n,t){return n.providers&&!n._injector&&(n._injector=(0,o.MMx)(n.providers,t,`Route: ${n.path}`)),n._injector??t}function TI(n){const t=n.children&&n.children.map(TI),e=t?{...n,children:t}:{...n};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Mo&&(e.component=MI),e}function Wh(n){return n.outlet||Mo}function x2(n,t){const e=n.filter(i=>Wh(i)===t);return e.push(...n.filter(i=>Wh(i)!==t)),e}function Yx(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class _6{constructor(t,e,i,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),CI(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const r=x0(e);t.children.forEach(a=>{const f=a.value.outlet;this.deactivateRoutes(a,r[f],i),delete r[f]}),xu(r,(a,f)=>{this.deactivateRouteAndItsChildren(a,i)})}deactivateRoutes(t,e,i){const r=t.value,a=e?e.value:null;if(r===a)if(r.component){const f=i.getContext(r.outlet);f&&this.deactivateChildRoutes(t,e,f.children)}else this.deactivateChildRoutes(t,e,i);else a&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,a=x0(t);for(const f of Object.keys(a))this.deactivateRouteAndItsChildren(a[f],r);if(i&&i.outlet){const f=i.outlet.detach(),b=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:f,route:t,contexts:b})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,a=x0(t);for(const f of Object.keys(a))this.deactivateRouteAndItsChildren(a[f],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(t,e,i){const r=x0(e);t.children.forEach(a=>{this.activateRoutes(a,r[a.value.outlet],i),this.forwardEvent(new t6(a.value.snapshot))}),t.children.length&&this.forwardEvent(new Qz(t.value.snapshot))}activateRoutes(t,e,i){const r=t.value,a=e?e.value:null;if(CI(r),r===a)if(r.component){const f=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,f.children)}else this.activateChildRoutes(t,e,i);else if(r.component){const f=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const b=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),f.children.onOutletReAttached(b.contexts),f.attachRef=b.componentRef,f.route=b.route.value,f.outlet&&f.outlet.attach(b.componentRef,b.route.value),CI(b.route.value),this.activateChildRoutes(t,null,f.children)}else{const b=Yx(r.snapshot),S=b?.get(o._Vd)??null;f.attachRef=null,f.route=r,f.resolver=S,f.injector=b,f.outlet&&f.outlet.activateWith(r,f.injector),this.activateChildRoutes(t,null,f.children)}}else this.activateChildRoutes(t,null,i)}}class w2{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class uC{constructor(t,e){this.component=t,this.route=e}}function y6(n,t,e){const i=n._root;return Zx(i,t?t._root:null,e,[i.value])}function w0(n,t){const e=Symbol(),i=t.get(n,e);return i===e?"function"!=typeof n||(0,o.Z0I)(n)?t.get(n):n:i}function Zx(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const a=x0(t);return n.children.forEach(f=>{(function b6(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,f=t?t.value:null,b=e?e.getContext(n.value.outlet):null;if(f&&a.routeConfig===f.routeConfig){const S=function x6(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!Dy(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Dy(n.url,t.url)||!Mp(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!SI(n,t)||!Mp(n.queryParams,t.queryParams);default:return!SI(n,t)}}(f,a,a.routeConfig.runGuardsAndResolvers);S?r.canActivateChecks.push(new w2(i)):(a.data=f.data,a._resolvedData=f._resolvedData),Zx(n,t,a.component?b?b.children:null:e,i,r),S&&b&&b.outlet&&b.outlet.isActivated&&r.canDeactivateChecks.push(new uC(b.outlet.component,f))}else f&&Wx(t,b,r),r.canActivateChecks.push(new w2(i)),Zx(n,null,a.component?b?b.children:null:e,i,r)})(f,a[f.value.outlet],e,i.concat([f.value]),r),delete a[f.value.outlet]}),xu(a,(f,b)=>Wx(f,e.getContext(b),r)),r}function Wx(n,t,e){const i=x0(n),r=n.value;xu(i,(a,f)=>{Wx(a,r.component?t?t.children.getContext(f):null:t,e)}),e.canDeactivateChecks.push(new uC(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function Xx(n){return"function"==typeof n}function AI(n){return n instanceof JE||"EmptyError"===n?.name}const dC=Symbol("INITIAL_VALUE");function E0(){return(0,br.w)(n=>So(n.map(t=>t.pipe((0,uo.q)(1),Yl(dC)))).pipe((0,kn.U)(t=>{for(const e of t)if(!0!==e){if(e===dC)return dC;if(!1===e||e instanceof Sy)return e}return!0}),(0,co.h)(t=>t!==dC),(0,uo.q)(1)))}function E2(n){return(0,dI.z)(no(t=>{if(My(t))throw m2(0,t)}),(0,kn.U)(t=>!0===t))}const PI={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function C2(n,t,e,i,r){const a=RI(n,t,e);return a.matched?function B6(n,t,e,i){const r=t.canMatch;if(!r||0===r.length)return(0,an.of)(!0);const a=r.map(f=>{const b=w0(f,n);return Wg(function M6(n){return n&&Xx(n.canMatch)}(b)?b.canMatch(t,e):n.runInContext(()=>b(t,e)))});return(0,an.of)(a).pipe(E0(),E2())}(i=b2(t,i),t,e).pipe((0,kn.U)(f=>!0===f?a:{...PI})):(0,an.of)(a)}function RI(n,t,e){if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?{...PI}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(t.matcher||vz)(e,n,t);if(!r)return{...PI};const a={};xu(r.posParams,(b,S)=>{a[S]=b.path});const f=r.consumed.length>0?{...a,...r.consumed[r.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:f,positionalParamSegments:r.posParams??{}}}function hC(n,t,e,i){if(e.length>0&&function V6(n,t,e){return e.some(i=>fC(n,t,i)&&Wh(i)!==Mo)}(n,e,i)){const a=new ts(t,function U6(n,t,e,i){const r={};r[Mo]=i,i._sourceSegment=n,i._segmentIndexShift=t.length;for(const a of e)if(""===a.path&&Wh(a)!==Mo){const f=new ts([],{});f._sourceSegment=n,f._segmentIndexShift=t.length,r[Wh(a)]=f}return r}(n,t,i,new ts(e,n.children)));return a._sourceSegment=n,a._segmentIndexShift=t.length,{segmentGroup:a,slicedSegments:[]}}if(0===e.length&&function G6(n,t,e){return e.some(i=>fC(n,t,i))}(n,e,i)){const a=new ts(n.segments,function z6(n,t,e,i,r){const a={};for(const f of i)if(fC(n,e,f)&&!r[Wh(f)]){const b=new ts([],{});b._sourceSegment=n,b._segmentIndexShift=t.length,a[Wh(f)]=b}return{...r,...a}}(n,t,e,i,n.children));return a._sourceSegment=n,a._segmentIndexShift=t.length,{segmentGroup:a,slicedSegments:e}}const r=new ts(n.segments,n.children);return r._sourceSegment=n,r._segmentIndexShift=t.length,{segmentGroup:r,slicedSegments:e}}function fC(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function S2(n,t,e,i){return!!(Wh(n)===i||i!==Mo&&fC(t,e,n))&&("**"===n.path||RI(t,n,e).matched)}function D2(n,t,e){return 0===t.length&&!n.children[e]}const pC=!1;class mC{constructor(t){this.segmentGroup=t||null}}class M2{constructor(t){this.urlTree=t}}function Kx(n){return $g(new mC(n))}function I2(n){return $g(new M2(n))}class q6{constructor(t,e,i,r,a){this.injector=t,this.configLoader=e,this.urlSerializer=i,this.urlTree=r,this.config=a,this.allowRedirects=!0}apply(){const t=hC(this.urlTree.root,[],[],this.config).segmentGroup,e=new ts(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,Mo).pipe((0,kn.U)(a=>this.createUrlTree(sC(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,gh.K)(a=>{if(a instanceof M2)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof mC?this.noMatchError(a):a}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,Mo).pipe((0,kn.U)(r=>this.createUrlTree(sC(r),t.queryParams,t.fragment))).pipe((0,gh.K)(r=>{throw r instanceof mC?this.noMatchError(r):r}))}noMatchError(t){return new o.vHH(4002,pC)}createUrlTree(t,e,i){const r=gI(t);return new Sy(r,e,i)}expandSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,e,i).pipe((0,kn.U)(a=>new ts([],a))):this.expandSegment(t,i,e,i.segments,r,!0)}expandChildren(t,e,i){const r=[];for(const a of Object.keys(i.children))"primary"===a?r.unshift(a):r.push(a);return(0,Hs.D)(r).pipe((0,ah.b)(a=>{const f=i.children[a],b=x2(e,a);return this.expandSegmentGroup(t,b,f,a).pipe((0,kn.U)(S=>({segment:S,outlet:a})))}),(0,VR.R)((a,f)=>(a[f.outlet]=f.segment,a),{}),GR())}expandSegment(t,e,i,r,a,f){return(0,Hs.D)(i).pipe((0,ah.b)(b=>this.expandSegmentAgainstRoute(t,e,i,b,r,a,f).pipe((0,gh.K)(M=>{if(M instanceof mC)return(0,an.of)(null);throw M}))),Zg(b=>!!b),(0,gh.K)((b,S)=>{if(AI(b))return D2(e,r,a)?(0,an.of)(new ts([],{})):Kx(e);throw b}))}expandSegmentAgainstRoute(t,e,i,r,a,f,b){return S2(r,e,a,f)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,a,f):b&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,i,r,a,f):Kx(e):Kx(e)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,a,f){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,f):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,a,f)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,r){const a=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?I2(a):this.lineralizeSegments(i,a).pipe((0,rr.z)(f=>{const b=new ts(f,{});return this.expandSegment(t,b,e,f,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,a,f){const{matched:b,consumedSegments:S,remainingSegments:M,positionalParamSegments:O}=RI(e,r,a);if(!b)return Kx(e);const N=this.applyRedirectCommands(S,r.redirectTo,O);return r.redirectTo.startsWith("/")?I2(N):this.lineralizeSegments(r,N).pipe((0,rr.z)(U=>this.expandSegment(t,e,i,U.concat(M),f,!1)))}matchSegmentAgainstRoute(t,e,i,r,a){return"**"===i.path?(t=b2(i,t),i.loadChildren?(i._loadedRoutes?(0,an.of)({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(t,i)).pipe((0,kn.U)(b=>(i._loadedRoutes=b.routes,i._loadedInjector=b.injector,new ts(r,{})))):(0,an.of)(new ts(r,{}))):C2(e,i,r,t).pipe((0,br.w)(({matched:f,consumedSegments:b,remainingSegments:S})=>f?this.getChildConfig(t=i._injector??t,i,r).pipe((0,rr.z)(O=>{const N=O.injector??t,U=O.routes,{segmentGroup:j,slicedSegments:be}=hC(e,b,S,U),Ce=new ts(j.segments,j.children);if(0===be.length&&Ce.hasChildren())return this.expandChildren(N,U,Ce).pipe((0,kn.U)(it=>new ts(b,it)));if(0===U.length&&0===be.length)return(0,an.of)(new ts(b,{}));const et=Wh(i)===a;return this.expandSegment(N,Ce,U,be,et?Mo:a,!0).pipe((0,kn.U)(Be=>new ts(b.concat(Be.segments),Be.children)))})):Kx(e)))}getChildConfig(t,e,i){return e.children?(0,an.of)({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?(0,an.of)({routes:e._loadedRoutes,injector:e._loadedInjector}):function N6(n,t,e,i){const r=t.canLoad;if(void 0===r||0===r.length)return(0,an.of)(!0);const a=r.map(f=>{const b=w0(f,n);return Wg(function E6(n){return n&&Xx(n.canLoad)}(b)?b.canLoad(t,e):n.runInContext(()=>b(t,e)))});return(0,an.of)(a).pipe(E0(),E2())}(t,e,i).pipe((0,rr.z)(r=>r?this.configLoader.loadChildren(t,e).pipe(no(a=>{e._loadedRoutes=a.routes,e._loadedInjector=a.injector})):function H6(n){return $g(g2(pC,3))}())):(0,an.of)({routes:[],injector:t})}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return(0,an.of)(i);if(r.numberOfChildren>1||!r.children[Mo])return $g(new o.vHH(4e3,pC));r=r.children[Mo]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreateUrlTree(t,e,i,r){const a=this.createSegmentGroup(t,e.root,i,r);return new Sy(a,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return xu(t,(r,a)=>{if("string"==typeof r&&r.startsWith(":")){const b=r.substring(1);i[a]=e[b]}else i[a]=r}),i}createSegmentGroup(t,e,i,r){const a=this.createSegments(t,e.segments,i,r);let f={};return xu(e.children,(b,S)=>{f[S]=this.createSegmentGroup(t,b,i,r)}),new ts(a,f)}createSegments(t,e,i,r){return e.map(a=>a.path.startsWith(":")?this.findPosParam(t,a,r):this.findOrReturn(a,i))}findPosParam(t,e,i){const r=i[e.path.substring(1)];if(!r)throw new o.vHH(4001,pC);return r}findOrReturn(t,e){let i=0;for(const r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}}class Z6{}class K6{constructor(t,e,i,r,a,f,b){this.injector=t,this.rootComponentType=e,this.config=i,this.urlTree=r,this.url=a,this.paramsInheritanceStrategy=f,this.urlSerializer=b}recognize(){const t=hC(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,Mo).pipe((0,kn.U)(e=>{if(null===e)return null;const i=new lC([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Mo,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Rm(i,e),a=new f2(this.url,r);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(t){const e=t.value,i=h2(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(t,e,i):this.processSegment(t,e,i,i.segments,r)}processChildren(t,e,i){return(0,Hs.D)(Object.keys(i.children)).pipe((0,ah.b)(r=>{const a=i.children[r],f=x2(e,r);return this.processSegmentGroup(t,f,a,r)}),(0,VR.R)((r,a)=>r&&a?(r.push(...a),r):null),Jv(r=>null!==r),QE(null),GR(),(0,kn.U)(r=>{if(null===r)return null;const a=A2(r);return function J6(n){n.sort((t,e)=>t.value.outlet===Mo?-1:e.value.outlet===Mo?1:t.value.outlet.localeCompare(e.value.outlet))}(a),a}))}processSegment(t,e,i,r,a){return(0,Hs.D)(e).pipe((0,ah.b)(f=>this.processSegmentAgainstRoute(f._injector??t,f,i,r,a)),Zg(f=>!!f),(0,gh.K)(f=>{if(AI(f))return D2(i,r,a)?(0,an.of)([]):(0,an.of)(null);throw f}))}processSegmentAgainstRoute(t,e,i,r,a){if(e.redirectTo||!S2(e,i,r,a))return(0,an.of)(null);let f;if("**"===e.path){const b=r.length>0?jR(r).parameters:{},S=R2(i)+r.length,M=new lC(r,b,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,O2(e),Wh(e),e.component??e._loadedComponent??null,e,P2(i),S,L2(e));f=(0,an.of)({snapshot:M,consumedSegments:[],remainingSegments:[]})}else f=C2(i,e,r,t).pipe((0,kn.U)(({matched:b,consumedSegments:S,remainingSegments:M,parameters:O})=>{if(!b)return null;const N=R2(i)+S.length;return{snapshot:new lC(S,O,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,O2(e),Wh(e),e.component??e._loadedComponent??null,e,P2(i),N,L2(e)),consumedSegments:S,remainingSegments:M}}));return f.pipe((0,br.w)(b=>{if(null===b)return(0,an.of)(null);const{snapshot:S,consumedSegments:M,remainingSegments:O}=b;t=e._injector??t;const N=e._loadedInjector??t,U=function Q6(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(e),{segmentGroup:j,slicedSegments:be}=hC(i,M,O,U.filter(et=>void 0===et.redirectTo));if(0===be.length&&j.hasChildren())return this.processChildren(N,U,j).pipe((0,kn.U)(et=>null===et?null:[new Rm(S,et)]));if(0===U.length&&0===be.length)return(0,an.of)([new Rm(S,[])]);const Ce=Wh(e)===a;return this.processSegment(N,U,j,be,Ce?Mo:a).pipe((0,kn.U)(et=>null===et?null:[new Rm(S,et)]))}))}}function eU(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function A2(n){const t=[],e=new Set;for(const i of n){if(!eU(i)){t.push(i);continue}const r=t.find(a=>i.value.routeConfig===a.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):t.push(i)}for(const i of e){const r=A2(i.children);t.push(new Rm(i.value,r))}return t.filter(i=>!e.has(i))}function P2(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function R2(n){let t=n,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function O2(n){return n.data||{}}function L2(n){return n.resolve||{}}function k2(n){return"string"==typeof n.title||null===n.title}function OI(n){return(0,br.w)(t=>{const e=n(t);return e?(0,Hs.D)(e).pipe((0,kn.U)(()=>t)):(0,an.of)(t)})}const C0=new o.OlP("ROUTES");let LI=(()=>{class n{constructor(e,i){this.injector=e,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return(0,an.of)(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=Wg(e.loadComponent()).pipe((0,kn.U)(N2),no(a=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=a}),Hg(()=>{this.componentLoaders.delete(e)})),r=new zR(i,()=>new Nn.x).pipe(hI());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return(0,an.of)({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const a=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe((0,kn.U)(b=>{this.onLoadEndListener&&this.onLoadEndListener(i);let S,M,O=!1;Array.isArray(b)?M=b:(S=b.create(e).injector,M=HR(S.get(C0,[],o.XFs.Self|o.XFs.Optional)));return{routes:M.map(TI),injector:S}}),Hg(()=>{this.childrenLoaders.delete(i)})),f=new zR(a,()=>new Nn.x).pipe(hI());return this.childrenLoaders.set(i,f),f}loadModuleFactoryOrRoutes(e){return Wg(e()).pipe((0,kn.U)(N2),(0,rr.z)(r=>r instanceof o.YKP||Array.isArray(r)?(0,an.of)(r):(0,Hs.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.zs3),o.LFG(o.Sil))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function N2(n){return function cU(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let kI=(()=>{class n{constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Nn.x,this.configLoader=(0,o.f3M)(LI),this.environmentInjector=(0,o.f3M)(o.lqb),this.urlSerializer=(0,o.f3M)(Ux),this.rootContexts=(0,o.f3M)(qx),this.navigationId=0,this.configLoader.onLoadEndListener=r=>this.events.next(new Kz(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new Xz(r))}get hasRequestedNavigation(){return 0!==this.navigationId}complete(){this.transitions?.complete()}handleNavigationRequest(e){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:i})}setupNavigations(e){return this.transitions=new rl.X({id:0,targetPageId:0,currentUrlTree:e.currentUrlTree,currentRawUrl:e.currentUrlTree,extractedUrl:e.urlHandlingStrategy.extract(e.currentUrlTree),urlAfterRedirects:e.urlHandlingStrategy.extract(e.currentUrlTree),rawUrl:e.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:e.routerState.snapshot,targetSnapshot:null,currentRouterState:e.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,co.h)(i=>0!==i.id),(0,kn.U)(i=>({...i,extractedUrl:e.urlHandlingStrategy.extract(i.rawUrl)})),(0,br.w)(i=>{let r=!1,a=!1;return(0,an.of)(i).pipe(no(f=>{this.currentNavigation={id:f.id,initialUrl:f.rawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,br.w)(f=>{const b=e.browserUrlTree.toString(),S=!e.navigated||f.extractedUrl.toString()!==b||b!==e.currentUrlTree.toString();if(("reload"===e.onSameUrlNavigation||S)&&e.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return z2(f.source)&&(e.browserUrlTree=f.extractedUrl),(0,an.of)(f).pipe((0,br.w)(O=>{const N=this.transitions?.getValue();return this.events.next(new bI(O.id,this.urlSerializer.serialize(O.extractedUrl),O.source,O.restoredState)),N!==this.transitions?.getValue()?pd.E:Promise.resolve(O)}),function Y6(n,t,e,i){return(0,br.w)(r=>function j6(n,t,e,i,r){return new q6(n,t,e,i,r).apply()}(n,t,e,r.extractedUrl,i).pipe((0,kn.U)(a=>({...r,urlAfterRedirects:a}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,e.config),no(O=>{this.currentNavigation={...this.currentNavigation,finalUrl:O.urlAfterRedirects},i.urlAfterRedirects=O.urlAfterRedirects}),function nU(n,t,e,i,r){return(0,rr.z)(a=>function X6(n,t,e,i,r,a,f="emptyOnly"){return new K6(n,t,e,i,r,f,a).recognize().pipe((0,br.w)(b=>null===b?function W6(n){return new gr.y(t=>t.error(n))}(new Z6):(0,an.of)(b)))}(n,t,e,a.urlAfterRedirects,i.serialize(a.urlAfterRedirects),i,r).pipe((0,kn.U)(f=>({...a,targetSnapshot:f}))))}(this.environmentInjector,e.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),no(O=>{if(i.targetSnapshot=O.targetSnapshot,"eager"===e.urlUpdateStrategy){if(!O.extras.skipLocationChange){const U=e.urlHandlingStrategy.merge(O.urlAfterRedirects,O.rawUrl);e.setBrowserUrl(U,O)}e.browserUrlTree=O.urlAfterRedirects}const N=new jz(O.id,this.urlSerializer.serialize(O.extractedUrl),this.urlSerializer.serialize(O.urlAfterRedirects),O.targetSnapshot);this.events.next(N)}));if(S&&e.rawUrlTree&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){const{id:N,extractedUrl:U,source:j,restoredState:be,extras:Ce}=f,et=new bI(N,this.urlSerializer.serialize(U),j,be);this.events.next(et);const Ye=d2(U,e.rootComponentType).snapshot;return i={...f,targetSnapshot:Ye,urlAfterRedirects:U,extras:{...Ce,skipLocationChange:!1,replaceUrl:!1}},(0,an.of)(i)}return e.rawUrlTree=f.rawUrl,f.resolve(null),pd.E}),no(f=>{const b=new qz(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(b)}),(0,kn.U)(f=>i={...f,guards:y6(f.targetSnapshot,f.currentSnapshot,this.rootContexts)}),function T6(n,t){return(0,rr.z)(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:a,canDeactivateChecks:f}}=e;return 0===f.length&&0===a.length?(0,an.of)({...e,guardsResult:!0}):function A6(n,t,e,i){return(0,Hs.D)(n).pipe((0,rr.z)(r=>function F6(n,t,e,i,r){const a=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!a||0===a.length)return(0,an.of)(!0);const f=a.map(b=>{const S=Yx(t)??r,M=w0(b,S);return Wg(function D6(n){return n&&Xx(n.canDeactivate)}(M)?M.canDeactivate(n,t,e,i):S.runInContext(()=>M(n,t,e,i))).pipe(Zg())});return(0,an.of)(f).pipe(E0())}(r.component,r.route,e,t,i)),Zg(r=>!0!==r,!0))}(f,i,r,n).pipe((0,rr.z)(b=>b&&function w6(n){return"boolean"==typeof n}(b)?function P6(n,t,e,i){return(0,Hs.D)(t).pipe((0,ah.b)(r=>rf(function O6(n,t){return null!==n&&t&&t(new Jz(n)),(0,an.of)(!0)}(r.route.parent,i),function R6(n,t){return null!==n&&t&&t(new e6(n)),(0,an.of)(!0)}(r.route,i),function k6(n,t,e){const i=t[t.length-1],a=t.slice(0,t.length-1).reverse().map(f=>function v6(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(f)).filter(f=>null!==f).map(f=>wm(()=>{const b=f.guards.map(S=>{const M=Yx(f.node)??e,O=w0(S,M);return Wg(function S6(n){return n&&Xx(n.canActivateChild)}(O)?O.canActivateChild(i,n):M.runInContext(()=>O(i,n))).pipe(Zg())});return(0,an.of)(b).pipe(E0())}));return(0,an.of)(a).pipe(E0())}(n,r.path,e),function L6(n,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return(0,an.of)(!0);const r=i.map(a=>wm(()=>{const f=Yx(t)??e,b=w0(a,f);return Wg(function C6(n){return n&&Xx(n.canActivate)}(b)?b.canActivate(t,n):f.runInContext(()=>b(t,n))).pipe(Zg())}));return(0,an.of)(r).pipe(E0())}(n,r.route,e))),Zg(r=>!0!==r,!0))}(i,a,n,t):(0,an.of)(b)),(0,kn.U)(b=>({...e,guardsResult:b})))})}(this.environmentInjector,f=>this.events.next(f)),no(f=>{if(i.guardsResult=f.guardsResult,My(f.guardsResult))throw m2(0,f.guardsResult);const b=new Yz(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.events.next(b)}),(0,co.h)(f=>!!f.guardsResult||(e.restoreHistory(f),this.cancelNavigationTransition(f,"",3,e),!1)),OI(f=>{if(f.guards.canActivateChecks.length)return(0,an.of)(f).pipe(no(b=>{const S=new Zz(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(S)}),(0,br.w)(b=>{let S=!1;return(0,an.of)(b).pipe(function iU(n,t){return(0,rr.z)(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return(0,an.of)(e);let a=0;return(0,Hs.D)(r).pipe((0,ah.b)(f=>function rU(n,t,e,i){const r=n.routeConfig,a=n._resolve;return void 0!==r?.title&&!k2(r)&&(a[Bx]=r.title),function oU(n,t,e,i){const r=function sU(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return(0,an.of)({});const a={};return(0,Hs.D)(r).pipe((0,rr.z)(f=>function aU(n,t,e,i){const r=Yx(t)??i,a=w0(n,r);return Wg(a.resolve?a.resolve(t,e):r.runInContext(()=>a(t,e)))}(n[f],t,e,i).pipe(Zg(),no(b=>{a[f]=b}))),fI(1),function _z(n){return(0,kn.U)(()=>n)}(a),(0,gh.K)(f=>AI(f)?pd.E:$g(f)))}(a,n,t,i).pipe((0,kn.U)(f=>(n._resolvedData=f,n.data=h2(n,e).resolve,r&&k2(r)&&(n.data[Bx]=r.title),null)))}(f.route,i,n,t)),no(()=>a++),fI(1),(0,rr.z)(f=>a===r.length?(0,an.of)(e):pd.E))})}(e.paramsInheritanceStrategy,this.environmentInjector),no({next:()=>S=!0,complete:()=>{S||(e.restoreHistory(b),this.cancelNavigationTransition(b,"",2,e))}}))}),no(b=>{const S=new Wz(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(S)}))}),OI(f=>{const b=S=>{const M=[];S.routeConfig?.loadComponent&&!S.routeConfig._loadedComponent&&M.push(this.configLoader.loadComponent(S.routeConfig).pipe(no(O=>{S.component=O}),(0,kn.U)(()=>{})));for(const O of S.children)M.push(...b(O));return M};return So(b(f.targetSnapshot.root)).pipe(QE(),(0,uo.q)(1))}),OI(()=>e.afterPreactivation()),(0,kn.U)(f=>{const b=function a6(n,t,e){const i=jx(n,t._root,e?e._root:void 0);return new u2(i,t)}(e.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return i={...f,targetRouterState:b}}),no(f=>{e.currentUrlTree=f.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),e.routerState=f.targetRouterState,"deferred"===e.urlUpdateStrategy&&(f.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,f),e.browserUrlTree=f.urlAfterRedirects)}),((n,t,e)=>(0,kn.U)(i=>(new _6(t,i.targetRouterState,i.currentRouterState,e).activate(n),i)))(this.rootContexts,e.routeReuseStrategy,f=>this.events.next(f)),no({next:f=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,e.navigated=!0,this.events.next(new Iy(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(e.currentUrlTree))),e.titleStrategy?.updateTitle(f.targetRouterState.snapshot),f.resolve(!0)},complete:()=>{r=!0}}),Hg(()=>{r||a||this.cancelNavigationTransition(i,"",1,e),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),(0,gh.K)(f=>{if(a=!0,y2(f)){_2(f)||(e.navigated=!0,e.restoreHistory(i,!0));const b=new aC(i.id,this.urlSerializer.serialize(i.extractedUrl),f.message,f.cancellationCode);if(this.events.next(b),_2(f)){const S=e.urlHandlingStrategy.merge(f.url,e.rawUrlTree),M={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===e.urlUpdateStrategy||z2(i.source)};e.scheduleNavigation(S,"imperative",null,M,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{e.restoreHistory(i,!0);const b=new a2(i.id,this.urlSerializer.serialize(i.extractedUrl),f,i.targetSnapshot??void 0);this.events.next(b);try{i.resolve(e.errorHandler(f))}catch(S){i.reject(S)}}return pd.E}))}))}cancelNavigationTransition(e,i,r,a){const f=new aC(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(f),e.resolve(!1)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function z2(n){return"imperative"!==n}let U2=(()=>{class n{buildTitle(e){let i,r=e.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(a=>a.outlet===Mo);return i}getResolvedTitleForRoute(e){return e.data[Bx]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return(0,o.f3M)(uU)},providedIn:"root"}),n})(),uU=(()=>{class n extends U2{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(k))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),dU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return(0,o.f3M)(fU)},providedIn:"root"}),n})();class hU{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let fU=(()=>{class n extends hU{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const gC=new o.OlP("",{providedIn:"root",factory:()=>({})});let mU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return(0,o.f3M)(gU)},providedIn:"root"}),n})(),gU=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function _U(n){throw n}function yU(n,t,e){return t.parse("/")}const vU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},bU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let md=(()=>{class n{constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,o.f3M)(o.c2e),this.isNgZoneEnabled=!1,this.options=(0,o.f3M)(gC,{optional:!0})||{},this.errorHandler=this.options.errorHandler||_U,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||yU,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,an.of)(void 0),this.urlHandlingStrategy=(0,o.f3M)(mU),this.routeReuseStrategy=(0,o.f3M)(dU),this.urlCreationStrategy=(0,o.f3M)(r6),this.titleStrategy=(0,o.f3M)(U2),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=HR((0,o.f3M)(C0,{optional:!0})??[]),this.navigationTransitions=(0,o.f3M)(kI),this.urlSerializer=(0,o.f3M)(Ux),this.location=(0,o.f3M)(Re),this.rootComponentType=null,this.isNgZoneEnabled=(0,o.f3M)(o.R0b)instanceof o.R0b&&o.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Sy,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=d2(this.currentUrlTree,this.rootComponentType),this.navigationTransitions.setupNavigations(this).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{const r={replaceUrl:!0},a=e.state?.navigationId?e.state:null;if(e.state){const b={...e.state};delete b.navigationId,delete b.\u0275routerPageId,0!==Object.keys(b).length&&(r.state=b)}const f=this.parseUrl(e.url);this.scheduleNavigation(f,i,a,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(e){this.config=e.map(TI),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:r,queryParams:a,fragment:f,queryParamsHandling:b,preserveFragment:S}=i,M=S?this.currentUrlTree.fragment:f;let O=null;switch(b){case"merge":O={...this.currentUrlTree.queryParams,...a};break;case"preserve":O=this.currentUrlTree.queryParams;break;default:O=a||null}return null!==O&&(O=this.removeEmptyProps(O)),this.urlCreationStrategy.createUrlTree(r,this.routerState,this.currentUrlTree,e,O,M??null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=My(e)?e:this.parseUrl(e),a=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,i)}navigate(e,i={skipLocationChange:!1}){return function xU(n){for(let t=0;t<n.length;t++){if(null==n[t])throw new o.vHH(4008,!1)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?{...vU}:!1===i?{...bU}:i,My(e))return YR(this.currentUrlTree,e,r);const a=this.parseUrl(e);return YR(this.currentUrlTree,a,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const a=e[r];return null!=a&&(i[r]=a),i},{})}scheduleNavigation(e,i,r,a,f){if(this.disposed)return Promise.resolve(!1);let b,S,M,O;return f?(b=f.resolve,S=f.reject,M=f.promise):M=new Promise((N,U)=>{b=N,S=U}),"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),O=r&&r.\u0275routerPageId?r.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):O=0,this.navigationTransitions.handleNavigationRequest({targetPageId:O,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:a,resolve:b,reject:S,promise:M,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),M.catch(N=>Promise.reject(N))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e),a={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",a):this.location.go(r,"",a)}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===r?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===r&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class G2{}let CU=(()=>{class n{constructor(e,i,r,a,f){this.router=e,this.injector=r,this.preloadingStrategy=a,this.loader=f}setUpPreloading(){this.subscription=this.router.events.pipe((0,co.h)(e=>e instanceof Iy),(0,ah.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const a of i){a.providers&&!a._injector&&(a._injector=(0,o.MMx)(a.providers,e,`Route: ${a.path}`));const f=a._injector??e,b=a._loadedInjector??f;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?r.push(this.preloadConfig(f,a)):(a.children||a._loadedRoutes)&&r.push(this.processRoutes(b,a.children??a._loadedRoutes))}return(0,Hs.D)(r).pipe((0,Dh.J)())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):(0,an.of)(null);const a=r.pipe((0,rr.z)(f=>null===f?(0,an.of)(void 0):(i._loadedRoutes=f.routes,i._loadedInjector=f.injector,this.processRoutes(f.injector??e,f.routes))));if(i.loadComponent&&!i._loadedComponent){const f=this.loader.loadComponent(i);return(0,Hs.D)([a,f]).pipe((0,Dh.J)())}return a})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(md),o.LFG(o.Sil),o.LFG(o.lqb),o.LFG(G2),o.LFG(LI))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const NI=new o.OlP("");let $2=(()=>{class n{constructor(e,i,r,a,f={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=r,this.zone=a,this.options=f,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},f.scrollPositionRestoration=f.scrollPositionRestoration||"disabled",f.anchorScrolling=f.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof bI?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Iy&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof l2&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new l2(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(e){o.$Z()},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function D0(n,t){return{\u0275kind:n,\u0275providers:t}}function j2(){const n=(0,o.f3M)(o.zs3);return t=>{const e=n.get(o.z2F);if(t!==e.components[0])return;const i=n.get(md),r=n.get(q2);1===n.get(zI)&&i.initialNavigation(),n.get(Y2,null,o.XFs.Optional)?.setUpPreloading(),n.get(NI,null,o.XFs.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.unsubscribe())}}const q2=new o.OlP("",{factory:()=>new Nn.x}),zI=new o.OlP("",{providedIn:"root",factory:()=>1});const Y2=new o.OlP("");function TU(n){return D0(0,[{provide:Y2,useExisting:CU},{provide:G2,useExisting:n}])}const Z2=new o.OlP("ROUTER_FORROOT_GUARD"),AU=[Re,{provide:Ux,useClass:pI},md,qx,{provide:Xg,useFactory:function H2(n){return n.routerState.root},deps:[md]},LI,[]];function PU(){return new o.PXZ("Router",md)}let RU=(()=>{class n{constructor(e){}static forRoot(e,i){return{ngModule:n,providers:[AU,[],{provide:C0,multi:!0,useValue:e},{provide:Z2,useFactory:FU,deps:[[md,new o.FiY,new o.tp0]]},{provide:gC,useValue:i||{}},i?.useHash?{provide:De,useClass:ce}:{provide:De,useClass:ye},{provide:NI,useFactory:()=>{const n=(0,o.f3M)(su),t=(0,o.f3M)(o.R0b),e=(0,o.f3M)(gC),i=(0,o.f3M)(kI),r=(0,o.f3M)(Ux);return e.scrollOffset&&n.setOffset(e.scrollOffset),new $2(r,i,n,t,e)}},i?.preloadingStrategy?TU(i.preloadingStrategy).\u0275providers:[],{provide:o.PXZ,multi:!0,useFactory:PU},i?.initialNavigation?NU(i):[],[{provide:W2,useFactory:j2},{provide:o.tb,multi:!0,useExisting:W2}]]}}static forChild(e){return{ngModule:n,providers:[{provide:C0,multi:!0,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Z2,8))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[MI]}),n})();function FU(n){return"guarded"}function NU(n){return["disabled"===n.initialNavigation?D0(3,[{provide:o.ip1,multi:!0,useFactory:()=>{const t=(0,o.f3M)(md);return()=>{t.setUpLocationChangeListener()}}},{provide:zI,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?D0(2,[{provide:zI,useValue:0},{provide:o.ip1,multi:!0,deps:[o.zs3],useFactory:t=>{const e=t.get(xe,Promise.resolve());return()=>e.then(()=>new Promise(r=>{const a=t.get(md),f=t.get(q2);(function i(r){t.get(md).events.pipe((0,co.h)(f=>f instanceof Iy||f instanceof aC||f instanceof a2),(0,kn.U)(f=>f instanceof Iy||f instanceof aC&&(0===f.code||1===f.code)&&null),(0,co.h)(f=>null!==f),(0,uo.q)(1)).subscribe(()=>{r()})})(()=>{r(!0)}),a.afterPreactivation=()=>(r(!0),f.closed?(0,an.of)(void 0):f),a.initialNavigation()}))}}]).\u0275providers:[]]}const W2=new o.OlP("");var X2=W(4707),K2=W(6100);class VU{constructor(t){this.translations=t}getTranslation(t){return(0,an.of)(this.translations.get(t)||{})}}const J2=new o.OlP("TRANSLOCO_LOADER");function _C(n,t){return n&&(Object.prototype.hasOwnProperty.call(n,t)?n[t]:t.split(".").reduce((e,i)=>e?.[i],n))}function Q2(n,t,e){n={...n};const i=t.split("."),r=i.length-1;return i.reduce((a,f,b)=>(a[f]=b===r?e:Array.isArray(a[f])?a[f].slice():{...a[f]},a&&a[f]),n),n}function eO(n){return n?Array.isArray(n)?n.length:yC(n)?Object.keys(n).length:n?n.length:0:0}function Ty(n){return"string"==typeof n}function yC(n){return!!n&&"object"==typeof n&&!Array.isArray(n)}function tO(n){return n.replace(/(?:^\w|[A-Z]|\b\w)/g,(t,e)=>0==e?t.toLowerCase():t.toUpperCase()).replace(/\s+|_|-|\//g,"")}function Ay(n){return null==n}function iO(n){return!1===Ay(n)}function rO(n){return n&&"string"==typeof n.scope}function oO(n){return(0,K2.flatten)(n,{safe:!0})}const Py=new o.OlP("TRANSLOCO_CONFIG",{providedIn:"root",factory:()=>({defaultLang:"en"})}),vC={defaultLang:"en",reRenderOnLangChange:!1,prodMode:!1,failedRetries:2,availableLangs:[],missingHandler:{logMissingKey:!0,useFallbackTranslation:!1,allowEmpty:!1},flatten:{aot:!1},interpolation:["{{","}}"]},UI=new o.OlP("TRANSLOCO_TRANSPILER");let sO=(()=>{class n{constructor(e){this.interpolationMatcher=function WU(n){const[t,e]=n&&n.interpolation?n.interpolation:vC.interpolation;return new RegExp(`${t}(.*?)${e}`,"g")}(e)}transpile(e,i={},r,a){return Ty(e)?e.replace(this.interpolationMatcher,(f,b)=>(b=b.trim(),iO(i[b])?i[b]:iO(r[b])?this.transpile(r[b],i,r,a):"")):(i&&(yC(e)?e=this.handleObject(e,i,r,a):Array.isArray(e)&&(e=this.handleArray(e,i,r,a))),e)}handleObject(e,i={},r,a){let f=e;return Object.keys(i).forEach(b=>{const S=_C(f,b),M=_C(i,b),O=this.transpile(S,M,r,a);f=Q2(f,b,O)}),f}handleArray(e,i={},r,a){return e.map(f=>this.transpile(f,i,r,a))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Py,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const aO=new o.OlP("TRANSLOCO_MISSING_HANDLER");let XU=(()=>{class n{handle(e,i){return i.missingHandler.logMissingKey&&!i.prodMode&&console.warn(`%c Missing translation for '${e}'`,"font-size: 12px; color: red"),e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const lO=new o.OlP("TRANSLOCO_INTERCEPTOR");let KU=(()=>{class n{preSaveTranslation(e){return e}preSaveTranslationKey(e,i){return i}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const cO=new o.OlP("TRANSLOCO_FALLBACK_STRATEGY");let $I,JU=(()=>{class n{constructor(e){this.userConfig=e}getNextLangs(){const e=this.userConfig.fallbackLang;if(!e)throw new Error("When using the default fallback, a fallback language must be provided in the config!");return Array.isArray(e)?e:[e]}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Py))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function Qx(n){if(!n)return"";const t=n.split("/");return t.pop(),t.join("/")}function Kg(n){return n?n.split("/").pop():""}function VI(n,t,e="|"){if(Ty(n)){const i=n.split(e),r=i.pop();return r===t?[!0,i.toString()]:[!1,r]}return[!1,""]}function uO(n,t){return function qU(n){return n&&yC(n.loader)}(n)?function n4(n,t){return Object.keys(n).reduce((e,i)=>(e[`${t}/${i}`]=n[i],e),{})}(n.loader,t):void 0}function GI(n){return{scope:Qx(n)||null,langName:Kg(n)}}function dO(n){const{path:t,inlineLoader:e,mainLoader:i,data:r}=n;if(e){if(!1===function $U(n){return"function"==typeof n}(e[t]))throw`You're using an inline loader but didn't provide a loader for ${t}`;return e[t]().then(f=>f.default?f.default:f)}return i.getTranslation(t,r)}let Ry=(()=>{class n{constructor(e,i,r,a,f,b){this.loader=e,this.parser=i,this.missingHandler=r,this.interceptor=a,this.userConfig=f,this.fallbackStrategy=b,this.subscription=null,this.translations=new Map,this.cache=new Map,this.defaultLang="",this.availableLangs=[],this.isResolvedMissingOnce=!1,this.failedLangs=new Set,this.events=new Nn.x,this.events$=this.events.asObservable(),this.loader||(this.loader=new VU(this.translations)),$I=this,this.mergedConfig=function QU(n,t){return{...n,...t,missingHandler:{...n.missingHandler,...t.missingHandler},flatten:{...n.flatten,...t.flatten}}}(vC,this.userConfig),this.setAvailableLangs(this.mergedConfig.availableLangs||[]),this.setFallbackLangForMissingTranslation(this.mergedConfig),this.setDefaultLang(this.mergedConfig.defaultLang),this.lang=new rl.X(this.getDefaultLang()),this.langChanges$=this.lang.asObservable(),this.subscription=this.events$.subscribe(S=>{"translationLoadSuccess"===S.type&&S.wasFailure&&this.setActiveLang(S.payload.langName)})}get config(){return this.mergedConfig}getDefaultLang(){return this.defaultLang}setDefaultLang(e){this.defaultLang=e}getActiveLang(){return this.lang.getValue()}setActiveLang(e){return this.lang.next(e),this.parser.onLangChanged?.(e),this.events.next({type:"langChanged",payload:GI(e)}),this}setAvailableLangs(e){this.availableLangs=e}getAvailableLangs(){return this.availableLangs}load(e,i={}){const r=this.cache.get(e);if(r)return r;let a;const f=this._isLangScoped(e);let b;f&&(b=Qx(e));const S={path:e,mainLoader:this.loader,inlineLoader:i.inlineLoader,data:f?{scope:b}:void 0};if(this.useFallbackTranslation(e)){const O=f?`${b}/${this.firstFallbackLang}`:this.firstFallbackLang,N=function i4({mainLoader:n,path:t,data:e,fallbackPath:i,inlineLoader:r}){return(i?[t,i]:[t]).map(f=>{const b=dO({path:f,mainLoader:n,inlineLoader:r,data:e});return(0,Hs.D)(b).pipe((0,kn.U)(S=>({translation:S,lang:f})))})}({...S,fallbackPath:O});a=ll(N)}else{const O=dO(S);a=(0,Hs.D)(O)}const M=a.pipe(function zU(n=1/0){let t;t=n&&"object"==typeof n?n:{count:n};const{count:e=1/0,delay:i,resetOnSuccess:r=!1}=t;return e<=0?eu.y:(0,_l.e)((a,f)=>{let S,b=0;const M=()=>{let O=!1;S=a.subscribe((0,il.x)(f,N=>{r&&(b=0),f.next(N)},void 0,N=>{if(b++<e){const U=()=>{S?(S.unsubscribe(),S=null,M()):O=!0};if(null!=i){const j="number"==typeof i?qd(i):(0,Rr.Xf)(i(N,b)),be=(0,il.x)(f,()=>{be.unsubscribe(),U()},()=>{f.complete()});j.subscribe(be)}else U()}else f.error(N)})),O&&(S.unsubscribe(),S=null,M())};M()})}(this.config.failedRetries),no(O=>{Array.isArray(O)?O.forEach(N=>{this.handleSuccess(N.lang,N.translation),N.lang!==e&&this.cache.set(N.lang,(0,an.of)({}))}):this.handleSuccess(e,O)}),(0,gh.K)(O=>(this.mergedConfig.prodMode||console.error(`Error while trying to load "${e}"`,O),this.handleFailure(e,i))),function UU(n,t,e){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=n):i=n??1/0,(0,Ax.B)({connector:()=>new X2.t(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}(1));return this.cache.set(e,M),M}translate(e,i={},r=this.getActiveLang()){if(!e)return e;const{scope:a,resolveLang:f}=this.resolveLangAndScope(r);if(Array.isArray(e))return e.map(M=>this.translate(a?`${a}.${M}`:M,i,f));e=a?`${a}.${e}`:e;const b=this.getTranslation(f),S=b[e];return S?this.parser.transpile(S,i,b,e):this._handleMissingKey(e,S,i)}selectTranslate(e,i,r,a=!1){let f;const b=(M,O)=>this.load(M,O).pipe((0,kn.U)(()=>a?this.translateObject(e,i,M):this.translate(e,i,M)));if(Ay(r))return this.langChanges$.pipe((0,br.w)(M=>b(M)));if(rO(r)){const M=r;r=M.scope,f=uO(M,M.scope)}if(this.isLang(r)||this.isScopeWithLang(r))return b(r);const S=r;return this.langChanges$.pipe((0,br.w)(M=>b(`${S}/${M}`,{inlineLoader:f})))}isScopeWithLang(e){return this.isLang(Kg(e))}translateObject(e,i={},r=this.getActiveLang()){if(Ty(e)||Array.isArray(e)){const{resolveLang:f,scope:b}=this.resolveLangAndScope(r);if(Array.isArray(e))return e.map(O=>this.translateObject(b?`${b}.${O}`:O,i,f));const S=this.getTranslation(f),M=function YU(n){return(0,K2.unflatten)(n)}(this.getObjectByKey(S,e=b?`${b}.${e}`:e));return function GU(n){return 0===eO(n)}(M)?this.translate(e,i,r):this.parser.transpile(M,i,S,e)}const a=[];for(const[f,b]of this.getEntries(e))a.push(this.translateObject(f,b,r));return a}selectTranslateObject(e,i,r){if(Ty(e)||Array.isArray(e))return this.selectTranslate(e,i,r,!0);const[[a,f],...b]=this.getEntries(e);return this.selectTranslateObject(a,f,r).pipe((0,kn.U)(S=>{const M=[S];for(const[O,N]of b)M.push(this.translateObject(O,N,r));return M}))}getTranslation(e){if(e){if(this.isLang(e))return this.translations.get(e)||{};{const{scope:i,resolveLang:r}=this.resolveLangAndScope(e),a=this.translations.get(r)||{};return this.getObjectByKey(a,i)}}return this.translations}selectTranslation(e){let i=this.langChanges$;if(e){const r=Kg(e)!==e;i=this.isLang(e)||r?(0,an.of)(e):this.langChanges$.pipe((0,kn.U)(a=>`${e}/${a}`))}return i.pipe((0,br.w)(r=>this.load(r).pipe((0,kn.U)(()=>this.getTranslation(r)))))}setTranslation(e,i=this.getActiveLang(),r={}){const f={merge:!0,emitChange:!0,...r},b=Qx(i);let S=e;b&&(S=oO({[this.getMappedScope(b)]:e}));const M=b?Kg(i):i,O={...f.merge&&this.getTranslation(M),...S},N=this.mergedConfig.flatten.aot?O:oO(O),U=this.interceptor.preSaveTranslation(N,M);this.translations.set(M,U),f.emitChange&&this.setActiveLang(this.getActiveLang())}setTranslationKey(e,i,r=this.getActiveLang(),a={}){const f=this.interceptor.preSaveTranslationKey(e,i,r);this.setTranslation({[e]:f},r,{...a,merge:!0})}setFallbackLangForMissingTranslation({fallbackLang:e}){const i=Array.isArray(e)?e[0]:e;e&&this.useFallbackTranslation(i)&&(this.firstFallbackLang=i)}_handleMissingKey(e,i,r){if(this.config.missingHandler.allowEmpty&&""===i)return"";if(!this.isResolvedMissingOnce&&this.useFallbackTranslation()){this.isResolvedMissingOnce=!0;const a=this.translate(e,r,this.firstFallbackLang);return this.isResolvedMissingOnce=!1,a}return this.missingHandler.handle(e,this.getMissingHandlerData(),r)}_isLangScoped(e){return-1===this.getAvailableLangsIds().indexOf(e)}isLang(e){return-1!==this.getAvailableLangsIds().indexOf(e)}_loadDependencies(e,i){const r=Kg(e);return this._isLangScoped(e)&&!this.isLoadedTranslation(r)?So(this.load(r),this.load(e,{inlineLoader:i})):this.load(e,{inlineLoader:i})}_completeScopeWithLang(e){return this._isLangScoped(e)&&!this.isLang(Kg(e))?`${e}/${this.getActiveLang()}`:e}_setScopeAlias(e,i){this.mergedConfig.scopeMapping||(this.mergedConfig.scopeMapping={}),this.mergedConfig.scopeMapping[e]=i}ngOnDestroy(){this.subscription&&(this.subscription.unsubscribe(),this.subscription=null),this.cache.clear()}isLoadedTranslation(e){return eO(this.getTranslation(e))}getAvailableLangsIds(){return Ty(this.getAvailableLangs()[0])?this.getAvailableLangs():this.getAvailableLangs().map(i=>i.id)}getMissingHandlerData(){return{...this.config,activeLang:this.getActiveLang(),availableLangs:this.availableLangs,defaultLang:this.defaultLang}}useFallbackTranslation(e){return this.config.missingHandler.useFallbackTranslation&&e!==this.firstFallbackLang}handleSuccess(e,i){this.setTranslation(i,e,{emitChange:!1}),this.events.next({wasFailure:!!this.failedLangs.size,type:"translationLoadSuccess",payload:GI(e)}),this.failedLangs.forEach(r=>this.cache.delete(r)),this.failedLangs.clear()}handleFailure(e,i){Ay(i.failedCounter)&&(i.failedCounter=0,i.fallbackLangs||(i.fallbackLangs=this.fallbackStrategy.getNextLangs(e)));const r=e.split("/"),f=i.fallbackLangs[i.failedCounter];if(this.failedLangs.add(e),this.cache.has(f))return this.handleSuccess(f,this.getTranslation(f)),pd.E;if(!f||f===r[r.length-1]){let M="Unable to load translation and all the fallback languages";throw r.length>1&&(M+=", did you misspelled the scope name?"),new Error(M)}let S=f;return r.length>1&&(r[r.length-1]=f,S=r.join("/")),i.failedCounter++,this.events.next({type:"translationLoadFailure",payload:GI(e)}),this.load(S,i)}getMappedScope(e){const{scopeMapping:i={}}=this.config;return i[e]||tO(e)}resolveLangAndScope(e){let r,i=e;if(this._isLangScoped(e)){const a=Kg(e),f=this.isLang(a);i=f?a:this.getActiveLang(),r=this.getMappedScope(f?Qx(e):e)}return{scope:r,resolveLang:i}}getObjectByKey(e,i){const r={},a=`${i}.`;for(const f in e)f.startsWith(a)&&(r[f.replace(a,"")]=e[f]);return r}getEntries(e){return e instanceof Map?e.entries():Object.entries(e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(J2,8),o.LFG(UI),o.LFG(aO),o.LFG(lO),o.LFG(Py),o.LFG(cO))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),r4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["ng-component"]],inputs:{html:"html"},decls:1,vars:1,consts:[[1,"transloco-loader-template",3,"innerHTML"]],template:function(e,i){1&e&&o._UZ(0,"div",0),2&e&&o.Q6J("innerHTML",i.html,o.oJD)},encapsulation:2}),n})();class o4{constructor(t,e){this.view=t,this.vcr=e,this.injector=this.vcr.injector}attachView(){if(this.view instanceof o.Rgc)this.vcr.createEmbeddedView(this.view);else if(Ty(this.view)){const t=this.createComponent(r4);t.instance.html=this.view,t.hostView.detectChanges()}else this.createComponent(this.view)}detachView(){this.vcr.clear()}createComponent(t){const i=this.injector.get(o._Vd).resolveComponentFactory(t);return this.vcr.createComponent(i)}}const s4=new o.OlP("TRANSLOCO_LANG"),a4=new o.OlP("TRANSLOCO_LOADING_TEMPLATE"),l4=new o.OlP("TRANSLOCO_SCOPE");class c4{constructor(){this.initialized=!1}resolve({inline:t,provider:e,active:i}){let r=i;if(this.initialized)return r=i,r;if(e){const[,a]=VI(e,"static");r=a}if(t){const[,a]=VI(t,"static");r=a}return this.initialized=!0,r}resolveLangBasedOnScope(t){return Qx(t)?Kg(t):t}resolveLangPath(t,e){return e?`${e}/${t}`:t}}class u4{constructor(t){this.translocoService=t}resolve({inline:t,provider:e}={inline:void 0,provider:void 0}){if(t)return t;if(e){if(rO(e)){const{scope:i,alias:r=tO(i)}=e;return this.translocoService._setScopeAlias(i,r),i}return e}}}let Om=(()=>{class n{constructor(e,i,r,a,f,b,S,M,O){this.translocoService=e,this.tpl=i,this.providerScope=r,this.providerLang=a,this.providedLoadingTpl=f,this.vcr=b,this.cdr=S,this.host=M,this.renderer=O,this.subscription=null,this.translationMemo={},this.params={},this.initialized=!1,this.langResolver=new c4,this.scopeResolver=new u4(this.translocoService),this.strategy=null===this.tpl?"attribute":"structural"}static ngTemplateContextGuard(e,i){return!0}ngOnInit(){const e=function e4(n,t){const[e]=VI(t,"static");return!e&&!!n.config.reRenderOnLangChange}(this.translocoService,this.providerLang||this.inlineLang);this.subscription=this.translocoService.langChanges$.pipe((0,br.w)(r=>{const a=this.langResolver.resolve({inline:this.inlineLang,provider:this.providerLang,active:r});return Array.isArray(this.providerScope)?ll(this.providerScope.map(f=>this.resolveScope(a,f))):this.resolveScope(a,this.providerScope)}),function t4(n){return n?t=>t:(0,uo.q)(1)}(e)).subscribe(()=>{this.currentLang=this.langResolver.resolveLangBasedOnScope(this.path),"attribute"===this.strategy?this.attributeStrategy():this.structuralStrategy(this.currentLang,this.inlineRead),this.cdr.markForCheck(),this.initialized=!0});const i=this.getLoadingTpl();!this.initialized&&i&&(this.loaderTplHandler=new o4(i,this.vcr),this.loaderTplHandler.attachView())}ngOnChanges(e){"attribute"===this.strategy&&Object.keys(e).some(r=>!e[r].firstChange)&&this.attributeStrategy()}attributeStrategy(){this.detachLoader(),this.renderer.setProperty(this.host.nativeElement,"innerText",this.translocoService.translate(this.key,this.params,this.currentLang))}structuralStrategy(e,i){this.translationMemo={},this.view?(this.view.context.$implicit=this.getTranslateFn(e,i),this.view.context.currentLang=this.currentLang):(this.detachLoader(),this.view=this.vcr.createEmbeddedView(this.tpl,{$implicit:this.getTranslateFn(e,i),currentLang:this.currentLang}))}getTranslateFn(e,i){return(r,a)=>{const f=i?`${i}.${r}`:r,b=a?`${f}${JSON.stringify(a)}`:f;return Object.prototype.hasOwnProperty.call(this.translationMemo,b)||(this.translationMemo[b]={params:a,value:this.translocoService.translate(f,a,e)}),this.translationMemo[b].value}}getLoadingTpl(){return this.inlineTpl||this.providedLoadingTpl}ngOnDestroy(){this.subscription&&(this.subscription.unsubscribe(),this.subscription=null)}detachLoader(){this.loaderTplHandler?.detachView()}resolveScope(e,i){const r=this.scopeResolver.resolve({inline:this.inlineScope,provider:i});this.path=this.langResolver.resolveLangPath(e,r);const a=uO(i,r);return this.translocoService._loadDependencies(this.path,a)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Ry),o.Y36(o.Rgc,8),o.Y36(l4,8),o.Y36(s4,8),o.Y36(a4,8),o.Y36(o.s_b),o.Y36(o.sBO),o.Y36(o.SBq),o.Y36(o.Qsj))},n.\u0275dir=o.lG2({type:n,selectors:[["","transloco",""]],inputs:{key:["transloco","key"],params:["translocoParams","params"],inlineScope:["translocoScope","inlineScope"],inlineRead:["translocoRead","inlineRead"],inlineLang:["translocoLang","inlineLang"],inlineTpl:["translocoLoadingTpl","inlineTpl"]},features:[o.TTD]}),n})();const d4=[{provide:UI,useClass:sO,deps:[Py]},{provide:aO,useClass:XU},{provide:lO,useClass:KU},{provide:cO,useClass:JU,deps:[Py]}];let h4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[d4]}),n})();new o.OlP("TRANSLOCO_TEST_LANGS - Available testing languages"),new o.OlP("TRANSLOCO_TEST_OPTIONS - Testing options");const p4=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;function hO(n){return"string"==typeof n&&!!n.match(RegExp("(en-GB-oed|i-ami|i-bnn|i-default|i-enochian|i-hak|i-klingon|i-lux|i-mingo|i-navajo|i-pwn|i-tao|i-tay|i-tsu|sgn-BE-FR|sgn-BE-NL|sgn-CH-DE|art-lojban|cel-gaulish|no-bok|no-nyn|zh-guoyu|zh-hakka|zh-min|zh-min-nan|zh-xiang|zh-Hans|zh-hant)|([a-z]{2}-[A-Z]{2})"))}function fO(n){return n instanceof Date&&!isNaN(n)}function M0(n,t,e){const i=e.global?e.global[t]:{},r=e.localeBased?e.localeBased[n]:{};return r?.[t]?{...i,...r[t]}:i}const e1={localeConfig:{global:{},localeBased:{}},defaultLocale:"en-US",defaultCurrency:"USD",localeToCurrencyMapping:{"aa-DJ":"DJF","aa-ER":"ERN","aa-ET":"ETB","ab-GE":"ETB","ab-TR":"ETB","af-BW":"ETB","af-NA":"ETB","af-ZA":"ZAR","ak-GH":"ZAR","am-ET":"ETB","am-IL":"ETB","ar-AE":"AED","ar-AR":"AED","ar-BH":"BHD","ar-CM":"BHD","ar-CY":"BHD","ar-DJ":"BHD","ar-DZ":"DZD","ar-EG":"EGP","ar-EH":"EGP","ar-ER":"EGP","ar-IL":"EGP","ar-IQ":"IQD","ar-IR":"IQD","ar-JO":"JOD","ar-KE":"JOD","ar-KM":"JOD","ar-KW":"KWD","ar-LB":"LBP","ar-LY":"LYD","ar-MA":"MAD","ar-ML":"MAD","ar-MR":"MAD","ar-NE":"MAD","ar-NG":"MAD","ar-OM":"OMR","ar-PS":"OMR","ar-QA":"QAR","ar-SA":"SAR","ar-SD":"SDD","ar-SS":"SDD","ar-SY":"SYP","ar-TD":"SYP","ar-TJ":"SYP","ar-TN":"TND","ar-TR":"TND","ar-YE":"YER","as-IN":"INR","av-RU":"INR","ay-BO":"INR","ay-PE":"INR","az-AZ":"AZM","ba-RU":"AZM","be-BY":"BYR","be-PL":"BYR","be-UA":"BYR","bg-BG":"BGN","bg-GR":"BGN","bg-MD":"BGN","bg-RO":"BGN","bg-TR":"BGN","bg-UA":"BGN","bi-VU":"BGN","bm-ML":"BGN","bn-BD":"BDT","bn-GB":"BDT","bn-IN":"INR","bn-NP":"INR","bo-CN":"CNY","bo-IN":"INR","bo-NP":"INR","br-FR":"EUR","bs-BA":"BAM","ca-AD":"EUR","ca-ES":"EUR","ca-FR":"EUR","ca-IT":"EUR","ce-RU":"EUR","ch-GU":"EUR","ch-MP":"EUR","co-FR":"EUR","cs-CZ":"CZK","cv-RU":"RUB","cy-AR":"RUB","cy-GB":"GBP","da-DE":"GBP","da-DK":"DKK","da-GL":"DKK","da-IS":"DKK","de-AT":"EUR","de-BE":"EUR","de-BR":"EUR","de-CA":"EUR","de-CH":"CHF","de-CZ":"CHF","de-DE":"EUR","de-DK":"EUR","de-HU":"EUR","de-IT":"EUR","de-KZ":"EUR","de-LI":"EUR","de-LU":"EUR","de-NA":"EUR","de-PL":"EUR","de-PY":"EUR","de-RO":"EUR","de-SK":"EUR","de-US":"EUR","dv-IN":"EUR","dv-MV":"MVR","dz-BT":"BTN","dz-IN":"BTN","ee-GH":"BTN","ee-TG":"BTN","el-AL":"BTN","el-CY":"EUR","el-DE":"EUR","el-EG":"EUR","el-GB":"EUR","el-GR":"EUR","el-IT":"EUR","el-RO":"EUR","el-TR":"EUR","el-UA":"EUR","en-AC":"EUR","en-AG":"XCD","en-AI":"XCD","en-AS":"XCD","en-AU":"AUD","en-AW":"AUD","en-BB":"AUD","en-BE":"AUD","en-BM":"AUD","en-BN":"AUD","en-BS":"AUD","en-BW":"BWP","en-BZ":"BWP","en-CA":"CAD","en-CC":"CAD","en-CK":"CAD","en-CM":"CAD","en-CN":"CAD","en-CX":"CAD","en-DE":"CAD","en-DG":"CAD","en-DM":"CAD","en-DO":"CAD","en-ES":"CAD","en-ET":"CAD","en-FI":"CAD","en-FJ":"CAD","en-FK":"CAD","en-FM":"CAD","en-FR":"CAD","en-GB":"GBP","en-GD":"GBP","en-GG":"GBP","en-GH":"GBP","en-GI":"GBP","en-GM":"GBP","en-GU":"GBP","en-GY":"GBP","en-HK":"HKD","en-HN":"HKD","en-IE":"EUR","en-IL":"EUR","en-IM":"EUR","en-IN":"INR","en-IO":"INR","en-IT":"INR","en-JE":"INR","en-JM":"INR","en-KE":"INR","en-KI":"INR","en-KN":"INR","en-KY":"INR","en-LB":"INR","en-LC":"INR","en-LK":"INR","en-LR":"INR","en-LS":"INR","en-MG":"INR","en-MH":"INR","en-MP":"INR","en-MS":"INR","en-MT":"INR","en-MU":"INR","en-MW":"INR","en-MY":"INR","en-NA":"INR","en-NF":"INR","en-NG":"NGN","en-NL":"NGN","en-NR":"NGN","en-NU":"NGN","en-NZ":"NZD","en-PA":"NZD","en-PG":"NZD","en-PH":"PHP","en-PI":"PHP","en-PK":"PHP","en-PM":"PHP","en-PN":"PHP","en-PR":"PHP","en-PW":"PHP","en-RW":"PHP","en-SB":"PHP","en-SC":"PHP","en-SG":"SGD","en-SH":"SGD","en-SL":"SGD","en-SS":"SGD","en-SZ":"SGD","en-TA":"SGD","en-TC":"SGD","en-TK":"SGD","en-TO":"SGD","en-TT":"SGD","en-TV":"SGD","en-TZ":"SGD","en-UD":"SGD","en-UG":"SGD","en-UM":"SGD","en-US":"USD","en-VC":"USD","en-VG":"USD","en-VI":"USD","en-VU":"USD","en-WS":"USD","en-ZA":"ZAR","en-ZM":"ZAR","en-ZW":"ZWD","eo-EO":"ZWD","eo-SM":"ZWD","es-AD":"ZWD","es-AR":"ARS","es-BO":"BOB","es-BZ":"BOB","es-CL":"CLP","es-CO":"COP","es-CR":"CRC","es-CU":"CRC","es-DE":"CRC","es-DO":"DOP","es-EA":"DOP","es-EC":"USD","es-ES":"EUR","es-GQ":"EUR","es-GT":"GTQ","es-HN":"HNL","es-IC":"HNL","es-LA":"HNL","es-MA":"HNL","es-MX":"MXN","es-NI":"NIO","es-PA":"PAB","es-PE":"PEN","es-PH":"PEN","es-PR":"USD","es-PY":"PYG","es-SV":"SVC","es-TT":"SVC","es-US":"USD","es-UY":"UYU","es-VE":"VEB","et-EE":"EEK","et-FI":"EEK","eu-ES":"EUR","eu-FR":"EUR","fa-AE":"EUR","fa-AF":"EUR","fa-IQ":"EUR","fa-IR":"IRR","fa-OM":"IRR","fa-PK":"IRR","fa-QA":"IRR","fa-TJ":"IRR","fb-LT":"IRR","ff-GN":"IRR","ff-MR":"IRR","ff-SN":"IRR","fi-FI":"EUR","fi-RU":"EUR","fi-SE":"EUR","fj-FJ":"EUR","fo-FO":"DKK","fr-AD":"DKK","fr-BE":"EUR","fr-BF":"EUR","fr-BI":"EUR","fr-BJ":"EUR","fr-BL":"EUR","fr-CA":"CAD","fr-CD":"CAD","fr-CF":"CAD","fr-CG":"CAD","fr-CH":"CHF","fr-CI":"CHF","fr-CM":"CHF","fr-CP":"CHF","fr-DJ":"CHF","fr-DZ":"CHF","fr-FR":"EUR","fr-GA":"EUR","fr-GB":"EUR","fr-GF":"EUR","fr-GN":"EUR","fr-GP":"EUR","fr-GQ":"EUR","fr-HT":"EUR","fr-IT":"EUR","fr-KM":"EUR","fr-LB":"EUR","fr-LU":"EUR","fr-MA":"EUR","fr-MC":"EUR","fr-MF":"EUR","fr-MG":"EUR","fr-ML":"EUR","fr-MQ":"EUR","fr-MR":"EUR","fr-MU":"EUR","fr-NC":"EUR","fr-NE":"EUR","fr-PF":"EUR","fr-PM":"EUR","fr-RE":"EUR","fr-RW":"EUR","fr-SC":"EUR","fr-SN":"EUR","fr-SY":"EUR","fr-TD":"EUR","fr-TF":"EUR","fr-TG":"EUR","fr-TN":"EUR","fr-US":"EUR","fr-VU":"EUR","fr-WF":"EUR","fr-YT":"EUR","fy-NL":"EUR","ga-GB":"EUR","ga-IE":"EUR","gd-GB":"GBP","gl-ES":"EUR","gl-PT":"EUR","gn-AR":"EUR","gn-BO":"EUR","gn-PY":"EUR","gu-IN":"INR","gu-KE":"INR","gv-IM":"INR","he-IL":"ILS","hi-FJ":"ILS","hi-IN":"INR","hi-NP":"INR","hi-UG":"INR","hi-ZA":"INR","ho-PG":"INR","hr-AT":"INR","hr-BA":"INR","hr-DE":"INR","hr-HR":"HRK","hr-HU":"HRK","hr-IT":"HRK","ht-HT":"HTG","hu-AT":"HTG","hu-HU":"HUF","hu-IL":"HUF","hu-RO":"HUF","hu-RS":"HUF","hu-SI":"HUF","hu-SK":"HUF","hu-UA":"HUF","hy-AM":"AMD","hy-CY":"AMD","hy-GE":"AMD","hy-IR":"AMD","hy-LB":"AMD","hy-SY":"AMD","hy-TR":"AMD","ia-SE":"AMD","id-ID":"IDR","id-NL":"IDR","ig-NG":"NGN","ii-CN":"NGN","ik-US":"NGN","is-IS":"ISK","it-AU":"ISK","it-BR":"ISK","it-CA":"ISK","it-CH":"CHF","it-DE":"CHF","it-FR":"CHF","it-GB":"CHF","it-HR":"CHF","it-IT":"EUR","it-SI":"EUR","it-SM":"EUR","it-US":"EUR","it-VA":"EUR","iu-GL":"EUR","ja-BR":"EUR","ja-JP":"JPY","jv-ID":"JPY","jv-MY":"JPY","ka-GE":"GEL","ka-IR":"GEL","ka-TR":"GEL","kg-CD":"GEL","ki-KE":"GEL","kj-NA":"GEL","kl-DK":"GEL","kl-GL":"DKK","km-KH":"KHR","kn-IN":"INR","ko-BR":"INR","ko-CN":"INR","ko-JP":"INR","ko-KP":"INR","ko-KR":"KRW","ko-US":"KRW","ks-GB":"KRW","ks-IN":"INR","ks-PK":"INR","ku-TR":"TRY","kw-GB":"GBP","la-VA":"GBP","lb-LU":"GBP","lg-UG":"UGX","li-NL":"EUR","ln-CD":"EUR","ln-CG":"EUR","lo-LA":"LAK","lt-LT":"LTL","lu-CD":"LTL","lv-LV":"LVL","mg-MG":"MGA","mh-MH":"MGA","mi-NZ":"NZD","mk-AL":"NZD","mk-GR":"NZD","mk-MK":"MKD","ml-AE":"MKD","ml-BH":"MKD","ml-GB":"MKD","ml-IL":"MKD","ml-IN":"INR","ml-MY":"INR","ml-QA":"INR","ml-SG":"INR","mr-IN":"INR","ms-BN":"INR","ms-CC":"INR","ms-ID":"INR","ms-MY":"MYR","ms-SG":"MYR","mt-MT":"EUR","my-BD":"EUR","my-MM":"MMK","na-NR":"MMK","nb-NO":"NOK","nb-SJ":"NOK","nd-ZW":"NOK","ne-BT":"NOK","ne-IN":"NOK","ne-NP":"INR","ng-NA":"INR","nl-AW":"AWG","nl-BE":"EUR","nl-DE":"EUR","nl-FR":"EUR","nl-NL":"EUR","nl-SR":"EUR","nn-NO":"NOK","nr-ZA":"ZAR","nv-US":"ZAR","ny-MW":"ZAR","ny-MZ":"ZAR","ny-ZM":"ZAR","ny-ZW":"ZAR","oc-FR":"EUR","om-ET":"ETB","om-KE":"KES","om-SO":"KES","or-IN":"INR","os-GE":"INR","pa-IN":"INR","pl-CZ":"INR","pl-DE":"INR","pl-IL":"INR","pl-PL":"PLN","pl-RO":"PLN","pl-SK":"PLN","pl-UA":"PLN","ps-AE":"PLN","ps-AF":"AFN","ps-IR":"AFN","ps-PK":"AFN","pt-AG":"AFN","pt-AO":"AFN","pt-BR":"BRL","pt-CV":"BRL","pt-FR":"BRL","pt-GW":"BRL","pt-MO":"BRL","pt-MZ":"BRL","pt-PT":"EUR","pt-ST":"EUR","pt-TL":"EUR","qu-BO":"EUR","qu-PE":"EUR","rm-CH":"EUR","rn-BI":"EUR","ro-HU":"EUR","ro-IL":"EUR","ro-MD":"EUR","ro-RO":"RON","ro-RS":"RON","ro-UA":"RON","ru-BY":"RON","ru-CN":"RON","ru-DE":"RON","ru-EE":"RON","ru-FI":"RON","ru-GE":"RON","ru-IL":"RON","ru-KG":"RON","ru-KZ":"RON","ru-LT":"RON","ru-LV":"RON","ru-MD":"RON","ru-MN":"RON","ru-RU":"RUB","ru-SJ":"RUB","ru-TM":"RUB","ru-UA":"UAH","ru-US":"UAH","ru-UZ":"UAH","rw-CD":"UAH","rw-RW":"RWF","rw-UG":"RWF","sa-IN":"INR","se-FI":"INR","se-NO":"NOK","se-SE":"NOK","sg-CF":"NOK","si-LK":"LKR","sk-HU":"LKR","sk-RS":"LKR","sk-SK":"EUR","sl-AT":"EUR","sl-HU":"EUR","sl-IT":"EUR","sl-SI":"EUR","sm-AS":"EUR","sm-WS":"EUR","sn-ZW":"EUR","so-DJ":"DJF","so-ET":"ETB","so-KE":"ETB","so-SO":"SOS","sq-AL":"ALL","sq-GR":"ALL","sq-ME":"ALL","sq-MK":"MKD","sq-RS":"MKD","sq-TR":"MKD","sr-RS":"RSD","ss-LS":"RSD","ss-SZ":"RSD","ss-ZA":"ZAR","st-LS":"ZAR","st-ZA":"ZAR","su-ID":"ZAR","sv-AX":"ZAR","sv-FI":"EUR","sv-SE":"SEK","sw-BI":"SEK","sw-CD":"SEK","sw-KE":"SEK","sw-MZ":"SEK","sw-SO":"SEK","sw-TZ":"SEK","sw-UG":"SEK","sw-YT":"SEK","sw-ZA":"SEK","ta-IN":"INR","ta-LK":"INR","ta-MU":"INR","ta-MY":"INR","ta-RE":"INR","ta-SG":"INR","te-IN":"INR","th-TH":"THB","ti-ER":"ERN","ti-ET":"ETB","ti-IL":"ETB","tk-AF":"ETB","tk-IR":"ETB","tk-TM":"TMM","tl-PH":"PHP","tl-US":"PHP","tn-BW":"PHP","tn-NA":"PHP","tn-ZA":"ZAR","tn-ZW":"ZAR","to-TO":"ZAR","tr-BG":"ZAR","tr-CY":"TRY","tr-DE":"TRY","tr-GR":"TRY","tr-MK":"TRY","tr-NL":"TRY","tr-RO":"TRY","tr-TR":"TRY","tr-UA":"TRY","tr-UZ":"TRY","ts-MZ":"TRY","ts-SZ":"TRY","ts-ZA":"ZAR","tt-RU":"RUB","ty-PF":"RUB","uk-PL":"RUB","uk-SK":"RUB","uk-UA":"UAH","ur-IN":"UAH","ur-MU":"UAH","ur-PK":"PKR","ve-ZA":"ZAR","ve-ZW":"ZAR","vi-CN":"ZAR","vi-US":"ZAR","vi-VN":"VND","wa-BE":"EUR","xh-LS":"EUR","xh-ZA":"ZAR","yi-UA":"ZAR","yo-BJ":"ZAR","yo-NG":"NGN","za-CN":"NGN","zh-CN":"CNY","zh-HK":"HKD","zh-TW":"TWD","zu-LS":"TWD","zu-MW":"TWD","zu-MZ":"TWD","zu-SZ":"TWD","zu-ZA":"ZAR"},langToLocaleMapping:{}},pO=new o.OlP("DEFAULT_LOCALE"),mO=new o.OlP("DEFAULT_LOCALE_CURRENCY"),gO=new o.OlP("LOCALE_LANG_MAPPING"),I0=new o.OlP("LOCALE_CONFIG"),_O=new o.OlP("LOCALE_CURRENCY_MAPPING"),yO=new o.OlP("TRANSLOCO_DATE_TRANSFORMER"),vO=new o.OlP("TRANSLOCO_NUMBER_TRANSFORMER");class b4{transform(t,e,i){return function g4(n,t,e){return fO(n)?new Intl.DateTimeFormat(t,e).format(n):""}(t,e,i)}}class x4{transform(t,e,i,r){return function m4(n,t,e){const i=function jU(n){return function HU(n){return"number"==typeof n}(n)?n:Ty(n)&&!isNaN(Number(n)-parseFloat(n))?Number(n):null}(n);return null!==i?new Intl.NumberFormat(t,e).format(i):""}(t,i,{...r,style:e})}}let bC=(()=>{class n{constructor(e,i,r,a,f,b,S,M){this.translocoService=e,this.langLocaleMapping=i,this.defaultLocale=r,this.defaultCurrency=a,this.localeConfig=f,this.localeCurrencyMapping=b,this.numberTransformer=S,this.dateTransformer=M,this._locale=this.defaultLocale||this.toLocale(this.translocoService.getActiveLang()),this.locale=new rl.X(this._locale),this.subscription=this.translocoService.langChanges$.pipe((0,kn.U)(this.toLocale.bind(this)),(0,co.h)(O=>!!O)).subscribe({next:O=>this.setLocale(O)}),this.localeChanges$=this.locale.asObservable().pipe((0,fa.x)())}getLocale(){return this._locale}setLocale(e){hO(e)?(this.locale.next(e),this._locale=e):console.error(`${e} isn't a valid locale format`)}getCurrencySymbol(e=this.getLocale()){return new Intl.NumberFormat(e,{style:"currency",currencyDisplay:"symbol",currency:this.localeCurrencyMapping[e],minimumFractionDigits:0,maximumFractionDigits:0}).format(0).split((0).toString()).map(f=>f.trim()).find(f=>!!f)}localizeDate(e,i=this.getLocale(),r={}){return r=r||M0(i,"date",this.localeConfig),this.dateTransformer.transform(function _4(n){let t;if("string"==typeof n&&(n=n.trim()),fO(n))return n;if(!isNaN(n-parseFloat(n)))return new Date(parseFloat(n));if("string"==typeof n&&/^(\d{4}-\d{1,2}-\d{1,2})$/.test(n)){const[e,i,r]=n.split("-").map(a=>parseInt(a,10));return new Date(e,i-1,r)}return"string"==typeof n&&(t=n.match(p4))?function y4(n){const t=new Date(0);let e=0,i=0;const a=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=+(n[9]+n[10]),i=+(n[9]+n[11])),(n[8]?t.setUTCFullYear:t.setFullYear).call(t,+n[1],+n[2]-1,+n[3]);const f=+(n[4]||"0")-e,b=+(n[5]||"0")-i,S=+(n[6]||"0"),M=Math.round(1e3*parseFloat("0."+(n[7]||0)));return a.call(t,f,b,S,M),t}(t):new Date(n)}(e),i,r)}localizeNumber(e,i,r=this.getLocale(),a){let f=a??M0(r,i,this.localeConfig);return"currency"===i&&(f={...f,currency:f.currency||this._resolveCurrencyCode(r)}),this.numberTransformer.transform(e,i,r,f)}_resolveCurrencyCode(e=this.getLocale()){return this.localeCurrencyMapping[e]||this.defaultCurrency}ngOnDestroy(){this.subscription.unsubscribe(),this.subscription=null}toLocale(e){return this.langLocaleMapping[e]?this.langLocaleMapping[e]:hO(e)?e:""}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Ry),o.LFG(gO),o.LFG(pO),o.LFG(mO),o.LFG(I0),o.LFG(_O),o.LFG(vO),o.LFG(yO))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class xC{constructor(t,e){this.translocoLocaleService=t,this.cdr=e,this.subscription=this.translocoLocaleService.localeChanges$.subscribe({next:()=>this.cdr.markForCheck()})}getLocale(t){return t||this.translocoLocaleService.getLocale()}onDestroy(){this.subscription.unsubscribe(),this.subscription=null}}let HI=(()=>{class n extends xC{constructor(e,i,r){super(e,i),this.translocoLocaleService=e,this.cdr=i,this.localeConfig=r}transform(e,i={},r){return Ay(e)?"":(r=this.getLocale(r),this.translocoLocaleService.localizeDate(e,r,{...M0(r,"date",this.localeConfig),...i}))}ngOnDestroy(){super.onDestroy()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(bC,16),o.Y36(o.sBO,16),o.Y36(I0,16))},n.\u0275pipe=o.Yjl({name:"translocoDate",type:n,pure:!1}),n})(),E4=(()=>{class n{static forRoot(e={}){return{ngModule:n,providers:[{provide:gO,useValue:e.langToLocaleMapping||e1.langToLocaleMapping},{provide:I0,useValue:e.localeConfig||e1.localeConfig},{provide:_O,useValue:e.localeToCurrencyMapping||e1.localeToCurrencyMapping},{provide:pO,useValue:e.defaultLocale||e1.defaultLocale},{provide:mO,useValue:e.defaultCurrency||e1.defaultCurrency},{provide:yO,useClass:b4},{provide:vO,useClass:x4}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();var bO=W(9285);const xO=new o.OlP("TRANSLOCO_MESSAGE_FORMAT_CONFIG");function wO(n,t){return new bO(n,t)}function C4(n,t){const e=wO(n,t),i=e.compile,r=new Map,a=`__${n?.toString()||bO.defaultLocale}__`;return e.compile=function(f){const b=`${a}${f}`,S=r.get(b);if(S)return S;const M=i.call(this,f);return r.set(b,M),M},e}let S4=(()=>{class n extends sO{constructor(e,i){super(i);const{locales:r,enableCache:a=!0,...f}={locales:null,...e};this.messageConfig=f,this.mfFactory=a?C4:wO,this.messageFormat=this.mfFactory(r,f)}transpile(e,i={},r,a){if(!e)return e;if(yC(e)&&i)Object.keys(i).forEach(f=>{const b=_C(e,f),S=_C(i,f),M=super.transpile(b,S,r,a),O=this.messageFormat.compile(M);e=Q2(e,f,O(i[f]))});else if(!Array.isArray(e)){const f=super.transpile(e,i,r,a);return this.messageFormat.compile(f)(i)}return e}onLangChanged(e){this.setLocale(e)}setLocale(e){this.messageFormat=this.mfFactory(e,this.messageConfig)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(xO,8),o.LFG(Py,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),D4=(()=>{class n{static forRoot(e){return{ngModule:n,providers:[{provide:xO,useValue:e},{provide:UI,useClass:S4}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();function EO(n){return!!n&&(n instanceof gr.y||(0,cn.m)(n.lift)&&(0,cn.m)(n.subscribe))}let wC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return function M4(n){return n instanceof o.R0b}((0,o.f3M)(o.R0b))?new T4:(0,o.f3M)(I4)},providedIn:"root"}),n})(),I4=(()=>{class n extends wC{constructor(e){super(),this.appRef=e,this.isScheduled=!1}schedule(){this.isScheduled||(this.isScheduled=!0,requestAnimationFrame(()=>{this.appRef.tick(),this.isScheduled=!1}))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.z2F))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class T4 extends wC{schedule(){}}let jI=(()=>{class n{constructor(e,i){this.cdRef=e,this.tickScheduler=i}schedule(){this.cdRef.markForCheck(),this.tickScheduler.schedule()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.sBO),o.LFG(wC))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function CO(n){const t=function P4(n){return t=>n[t.type]?.(t)}(n),e=new X2.t(1);return{nextPotentialObservable(i){e.next(i)},handlePotentialObservableChanges:()=>e.pipe((0,fa.x)(),function N4(){return(0,dI.z)((0,br.w)(n=>{const t=function R4(n){return EO(n)?n:function L4(n){return function k4(n){return!!n&&"object"==typeof n&&!Array.isArray(n)}(n)&&Object.keys(n).length>0&&Object.values(n).every(EO)}(n)?So(function F4(n){return Object.keys(n).reduce((t,e)=>({...t,[e]:n[e].pipe((0,fa.x)())}),{})}(n)):function O4(n){return"function"==typeof n?.then}(n)?(0,Hs.D)(n):new gr.y(t=>{t.next(n)})}(n);let e=!0,i=!0;return new gr.y(r=>{const a=t.subscribe({next(f){r.next({type:"next",value:f,reset:e,synchronous:i}),e=!1},error(f){r.next({type:"error",error:f,reset:e,synchronous:i}),e=!1},complete(){r.next({type:"complete",reset:e,synchronous:i}),e=!1}});return e&&(r.next({type:"suspense",reset:e,synchronous:!0}),e=!1),i=!1,a})}))}(),(0,fa.x)(B4),no(t))}}function B4(n,t){return n.type===t.type&&n.reset===t.reset&&("next"===t.type?n.value===t.value:"error"!==t.type||n.error===t.error)}let qI=(()=>{class n{constructor(e,i,r,a){this.mainTemplateRef=e,this.viewContainerRef=i,this.errorHandler=r,this.renderScheduler=a,this.isMainViewCreated=!1,this.isSuspenseViewCreated=!1,this.viewContext={$implicit:void 0,ngrxLet:void 0,error:void 0,complete:!1},this.renderEventManager=CO({suspense:()=>{this.viewContext.$implicit=void 0,this.viewContext.ngrxLet=void 0,this.viewContext.error=void 0,this.viewContext.complete=!1,this.renderSuspenseView()},next:f=>{this.viewContext.$implicit=f.value,this.viewContext.ngrxLet=f.value,f.reset&&(this.viewContext.error=void 0,this.viewContext.complete=!1),this.renderMainView(f.synchronous)},error:f=>{this.viewContext.error=f.error,f.reset&&(this.viewContext.$implicit=void 0,this.viewContext.ngrxLet=void 0,this.viewContext.complete=!1),this.renderMainView(f.synchronous),this.errorHandler.handleError(f.error)},complete:f=>{this.viewContext.complete=!0,f.reset&&(this.viewContext.$implicit=void 0,this.viewContext.ngrxLet=void 0,this.viewContext.error=void 0),this.renderMainView(f.synchronous)}}),this.subscription=new Ia.w0}set ngrxLet(e){this.renderEventManager.nextPotentialObservable(e)}static ngTemplateContextGuard(e,i){return!0}ngOnInit(){this.subscription.add(this.renderEventManager.handlePotentialObservableChanges().subscribe())}ngOnDestroy(){this.subscription.unsubscribe()}renderMainView(e){this.isSuspenseViewCreated&&(this.isSuspenseViewCreated=!1,this.viewContainerRef.clear()),this.isMainViewCreated||(this.isMainViewCreated=!0,this.viewContainerRef.createEmbeddedView(this.mainTemplateRef,this.viewContext)),e||this.renderScheduler.schedule()}renderSuspenseView(){this.isMainViewCreated&&(this.isMainViewCreated=!1,this.viewContainerRef.clear()),this.suspenseTemplateRef&&!this.isSuspenseViewCreated&&(this.isSuspenseViewCreated=!0,this.viewContainerRef.createEmbeddedView(this.suspenseTemplateRef))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc),o.Y36(o.s_b),o.Y36(o.qLn),o.Y36(jI))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngrxLet",""]],inputs:{ngrxLet:"ngrxLet",suspenseTemplateRef:["ngrxLetSuspenseTpl","suspenseTemplateRef"]},features:[o._Bn([jI])]}),n})(),z4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),EC=(()=>{class n{constructor(e){this.errorHandler=e,this.renderScheduler=function A4(){return new jI((0,o.f3M)(o.sBO),(0,o.f3M)(wC))}(),this.renderEventManager=CO({suspense:i=>this.setRenderedValue(void 0,i.synchronous),next:i=>this.setRenderedValue(i.value,i.synchronous),error:i=>{i.reset&&this.setRenderedValue(void 0,i.synchronous),this.errorHandler.handleError(i.error)},complete:i=>{i.reset&&this.setRenderedValue(void 0,i.synchronous)}}),this.subscription=this.renderEventManager.handlePotentialObservableChanges().subscribe()}transform(e){return this.renderEventManager.nextPotentialObservable(e),this.renderedValue}ngOnDestroy(){this.subscription.unsubscribe()}setRenderedValue(e,i){e!==this.renderedValue&&(this.renderedValue=e,i||this.renderScheduler.schedule())}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.qLn,16))},n.\u0275pipe=o.Yjl({name:"ngrxPush",type:n,pure:!1}),n})(),U4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();var V4=W(5032);class Lm{constructor(t,e,i){this.kind=t,this.value=e,this.error=i,this.hasValue="N"===t}observe(t){return SO(this,t)}do(t,e,i){const{kind:r,value:a,error:f}=this;return"N"===r?t?.(a):"E"===r?e?.(f):i?.()}accept(t,e,i){var r;return(0,cn.m)(null===(r=t)||void 0===r?void 0:r.next)?this.observe(t):this.do(t,e,i)}toObservable(){const{kind:t,value:e,error:i}=this,r="N"===t?(0,an.of)(e):"E"===t?$g(()=>i):"C"===t?pd.E:0;if(!r)throw new TypeError(`Unexpected notification kind ${t}`);return r}static createNext(t){return new Lm("N",t)}static createError(t){return new Lm("E",void 0,t)}static createComplete(){return Lm.completeNotification}}function SO(n,t){var e,i,r;const{kind:a,value:f,error:b}=n;if("string"!=typeof a)throw new TypeError('Invalid notification, missing "kind"');"N"===a?null===(e=t.next)||void 0===e||e.call(t,f):"E"===a?null===(i=t.error)||void 0===i||i.call(t,b):null===(r=t.complete)||void 0===r||r.call(t)}function DO(n,t,e,i){return(0,_l.e)((r,a)=>{let f;t&&"function"!=typeof t?({duration:e,element:f,connector:i}=t):f=t;const b=new Map,S=be=>{b.forEach(be),be(a)},M=be=>S(Ce=>Ce.error(be));let O=0,N=!1;const U=new il.Q(a,be=>{try{const Ce=n(be);let et=b.get(Ce);if(!et){b.set(Ce,et=i?i():new Nn.x);const Ye=function j(be,Ce){const et=new gr.y(Ye=>{O++;const Be=Ce.subscribe(Ye);return()=>{Be.unsubscribe(),0==--O&&N&&U.unsubscribe()}});return et.key=be,et}(Ce,et);if(a.next(Ye),e){const Be=(0,il.x)(et,()=>{et.complete(),Be?.unsubscribe()},void 0,void 0,()=>b.delete(Ce));U.add((0,Rr.Xf)(e(Ye)).subscribe(Be))}}et.next(f?f(be):be)}catch(Ce){M(Ce)}},()=>S(be=>be.complete()),M,()=>b.clear(),()=>(N=!0,0===O));r.subscribe(U)})}function MO(n,t){return t?e=>e.pipe(MO((i,r)=>(0,Rr.Xf)(n(i,r)).pipe((0,kn.U)((a,f)=>t(i,a,r,f))))):(0,_l.e)((e,i)=>{let r=0,a=null,f=!1;e.subscribe((0,il.x)(i,b=>{a||(a=(0,il.x)(i,void 0,()=>{a=null,f&&i.complete()}),(0,Rr.Xf)(n(b,r++)).subscribe(a))},()=>{f=!0,!a&&i.complete()}))})}Lm.completeNotification=new Lm("C");var j4=W(1365),xi=W(9653);const q4={dispatch:!0,useEffectsErrorHandler:!0},CC="__@ngrx/effects_create__";function Oy(n,t){const e=n(),i={...q4,...t};return Object.defineProperty(e,CC,{value:i}),e}function TO(n){return Object.getPrototypeOf(n)}function Z4(n,t,e){const i=TO(n).constructor.name,r=function IO(n){return function Y4(n){return Object.getOwnPropertyNames(n).filter(i=>!(!n[i]||!n[i].hasOwnProperty(CC))&&n[i][CC].hasOwnProperty("dispatch")).map(i=>({propertyName:i,...n[i][CC]}))}(n)}(n).map(({propertyName:a,dispatch:f,useEffectsErrorHandler:b})=>{const S="function"==typeof n[a]?n[a]():n[a],M=b?e(S,t):S;return!1===f?M.pipe(function G4(){return(0,_l.e)((n,t)=>{n.subscribe((0,il.x)(t,V4.Z))})}()):M.pipe(function $4(){return(0,_l.e)((n,t)=>{n.subscribe((0,il.x)(t,e=>{t.next(Lm.createNext(e))},()=>{t.next(Lm.createComplete()),t.complete()},e=>{t.next(Lm.createError(e)),t.complete()}))})}()).pipe((0,kn.U)(N=>({effect:n[a],notification:N,propertyName:a,sourceName:i,sourceInstance:n})))});return(0,As.T)(...r)}function AO(n,t,e=10){return n.pipe((0,gh.K)(i=>(t&&t.handleError(i),e<=1?n:AO(n,t,e-1))))}const PO=new o.OlP("@ngrx/effects Internal Root Guard"),SC=new o.OlP("@ngrx/effects User Provided Effects"),YI=new o.OlP("@ngrx/effects Internal Root Effects"),RO=new o.OlP("@ngrx/effects Root Effects"),OO=new o.OlP("@ngrx/effects Internal Feature Effects"),LO=new o.OlP("@ngrx/effects Feature Effects"),X4=new o.OlP("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>AO}),kO="@ngrx/effects/init";function a5(n){return ZI(n,"ngrxOnInitEffects")}function ZI(n,t){return n&&t in n&&"function"==typeof n[t]}(0,xi.PH)(kO);let WI=(()=>{class n extends Nn.x{constructor(e,i){super(),this.errorHandler=e,this.effectsErrorHandler=i}addEffects(e){this.next(e)}toActions(){return this.pipe(DO(TO),(0,rr.z)(e=>e.pipe(DO(l5))),(0,rr.z)(e=>{const i=e.pipe(MO(a=>function c5(n,t){return e=>{const i=Z4(e,n,t);return function o5(n){return ZI(n,"ngrxOnRunEffects")}(e)?e.ngrxOnRunEffects(i):i}}(this.errorHandler,this.effectsErrorHandler)(a)),(0,kn.U)(a=>(function J4(n,t){if("N"===n.notification.kind){const e=n.notification.value;!function Q4(n){return"function"!=typeof n&&n&&n.type&&"string"==typeof n.type}(e)&&t.handleError(new Error(`Effect ${function e5({propertyName:n,sourceInstance:t,sourceName:e}){const i="function"==typeof t[n];return`"${e}.${String(n)}${i?"()":""}"`}(n)} dispatched an invalid action: ${function t5(n){try{return JSON.stringify(n)}catch{return n}}(e)}`))}}(a,this.errorHandler),a.notification)),(0,co.h)(a=>"N"===a.kind&&null!=a.value),function H4(){return(0,_l.e)((n,t)=>{n.subscribe((0,il.x)(t,e=>SO(e,t)))})}()),r=e.pipe((0,uo.q)(1),(0,co.h)(a5),(0,kn.U)(a=>a.ngrxOnInitEffects()));return(0,As.T)(i,r)}))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.qLn),o.LFG(X4))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function l5(n){return function i5(n){return ZI(n,"ngrxOnIdentifyEffects")}(n)?n.ngrxOnIdentifyEffects():""}let XI=(()=>{class n{constructor(e,i){this.effectSources=e,this.store=i,this.effectsSubscription=null}get isStarted(){return!!this.effectsSubscription}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(WI),o.LFG(xi.yh))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),FO=(()=>{class n{constructor(e,i,r,a,f,b,S){this.sources=e,i.start(),a.forEach(M=>e.addEffects(M)),r.dispatch({type:kO})}addEffects(e){this.sources.addEffects(e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(WI),o.LFG(XI),o.LFG(xi.yh),o.LFG(RO),o.LFG(xi.cr,8),o.LFG(xi.CK,8),o.LFG(PO,8))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),u5=(()=>{class n{constructor(e,i,r,a){i.forEach(f=>f.forEach(b=>e.addEffects(b)))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(FO),o.LFG(LO),o.LFG(xi.cr,8),o.LFG(xi.CK,8))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),d5=(()=>{class n{static forFeature(...e){const i=e.flat();return{ngModule:u5,providers:[i,{provide:OO,multi:!0,useValue:i},{provide:SC,multi:!0,useValue:[]},{provide:LO,multi:!0,useFactory:NO,deps:[OO,SC]}]}}static forRoot(...e){const i=e.flat();return{ngModule:FO,providers:[i,{provide:YI,useValue:[i]},{provide:PO,useFactory:f5},{provide:SC,multi:!0,useValue:[]},{provide:RO,useFactory:NO,deps:[YI,SC]}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();function NO(n,t){const e=[];for(const i of n)e.push(...i);for(const i of t)e.push(...i);return function h5(n){return n.map(t=>(0,o.f3M)(t))}(e)}function f5(){const n=(0,o.f3M)(XI,{optional:!0,skipSelf:!0}),t=(0,o.f3M)(YI,{self:!0});if((1!==t.length||0!==t[0].length)&&n)throw new TypeError("EffectsModule.forRoot() called twice. Feature modules should use EffectsModule.forFeature() instead.");return"guarded"}function KI(n){return(0,dI.z)((0,ah.b)(t=>{const e=n(t),i=Array.isArray(e)?e:[e];return(0,an.of)(t).pipe((0,j4.M)(...i))}))}var p5=W(825),Jg=function(){return Jg=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var a in e=arguments[i])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},Jg.apply(this,arguments)},g5={mode:"lg-slide",easing:"ease",speed:400,licenseKey:"0000-0000-000-0000",height:"100%",width:"100%",addClass:"",startClass:"lg-start-zoom",backdropDuration:300,container:"",startAnimationDuration:400,zoomFromOrigin:!0,hideBarsDelay:0,showBarsAfter:1e4,slideDelay:0,supportLegacyBrowser:!0,allowMediaOverlap:!1,videoMaxSize:"1280-720",loadYouTubePoster:!0,defaultCaptionHeight:0,ariaLabelledby:"",ariaDescribedby:"",resetScrollPosition:!0,hideScrollbar:!1,closable:!0,swipeToClose:!0,closeOnTap:!0,showCloseIcon:!0,showMaximizeIcon:!1,loop:!0,escKey:!0,keyPress:!0,trapFocus:!0,controls:!0,slideEndAnimation:!0,hideControlOnEnd:!1,mousewheel:!1,getCaptionFromTitleOrAlt:!0,appendSubHtmlTo:".lg-sub-html",subHtmlSelectorRelative:!1,preload:2,numberOfSlideItemsInDom:10,selector:"",selectWithin:"",nextHtml:"",prevHtml:"",index:0,iframeWidth:"100%",iframeHeight:"100%",iframeMaxWidth:"100%",iframeMaxHeight:"100%",download:!0,counter:!0,appendCounterTo:".lg-toolbar",swipeThreshold:50,enableSwipe:!0,enableDrag:!0,dynamic:!1,dynamicEl:[],extraProps:[],exThumbImage:"",isMobile:void 0,mobileSettings:{controls:!1,showCloseIcon:!1,download:!1},plugins:[],strings:{closeGallery:"Close gallery",toggleMaximize:"Toggle maximize",previousSlide:"Previous slide",nextSlide:"Next slide",download:"Download",playVideo:"Play video"}},BO=function(){function n(t){return this.cssVenderPrefixes=["TransitionDuration","TransitionTimingFunction","Transform","Transition"],this.selector=this._getSelector(t),this.firstElement=this._getFirstEl(),this}return n.generateUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})},n.prototype._getSelector=function(t,e){return void 0===e&&(e=document),"string"!=typeof t?t:(e=e||document,"#"===t.substring(0,1)?e.querySelector(t):e.querySelectorAll(t))},n.prototype._each=function(t){return this.selector?(void 0!==this.selector.length?[].forEach.call(this.selector,t):t(this.selector,0),this):this},n.prototype._setCssVendorPrefix=function(t,e,i){var r=e.replace(/-([a-z])/gi,function(a,f){return f.toUpperCase()});-1!==this.cssVenderPrefixes.indexOf(r)?(t.style[r.charAt(0).toLowerCase()+r.slice(1)]=i,t.style["webkit"+r]=i,t.style["moz"+r]=i,t.style["ms"+r]=i,t.style["o"+r]=i):t.style[r]=i},n.prototype._getFirstEl=function(){return this.selector&&void 0!==this.selector.length?this.selector[0]:this.selector},n.prototype.isEventMatched=function(t,e){var i=e.split(".");return t.split(".").filter(function(r){return r}).every(function(r){return-1!==i.indexOf(r)})},n.prototype.attr=function(t,e){return void 0===e?this.firstElement?this.firstElement.getAttribute(t):"":(this._each(function(i){i.setAttribute(t,e)}),this)},n.prototype.find=function(t){return kr(this._getSelector(t,this.selector))},n.prototype.first=function(){return kr(this.selector&&void 0!==this.selector.length?this.selector[0]:this.selector)},n.prototype.eq=function(t){return kr(this.selector[t])},n.prototype.parent=function(){return kr(this.selector.parentElement)},n.prototype.get=function(){return this._getFirstEl()},n.prototype.removeAttr=function(t){var e=t.split(" ");return this._each(function(i){e.forEach(function(r){return i.removeAttribute(r)})}),this},n.prototype.wrap=function(t){if(!this.firstElement)return this;var e=document.createElement("div");return e.className=t,this.firstElement.parentNode.insertBefore(e,this.firstElement),this.firstElement.parentNode.removeChild(this.firstElement),e.appendChild(this.firstElement),this},n.prototype.addClass=function(t){return void 0===t&&(t=""),this._each(function(e){t.split(" ").forEach(function(i){i&&e.classList.add(i)})}),this},n.prototype.removeClass=function(t){return this._each(function(e){t.split(" ").forEach(function(i){i&&e.classList.remove(i)})}),this},n.prototype.hasClass=function(t){return!!this.firstElement&&this.firstElement.classList.contains(t)},n.prototype.hasAttribute=function(t){return!!this.firstElement&&this.firstElement.hasAttribute(t)},n.prototype.toggleClass=function(t){return this.firstElement?(this.hasClass(t)?this.removeClass(t):this.addClass(t),this):this},n.prototype.css=function(t,e){var i=this;return this._each(function(r){i._setCssVendorPrefix(r,t,e)}),this},n.prototype.on=function(t,e){var i=this;return this.selector?(t.split(" ").forEach(function(r){Array.isArray(n.eventListeners[r])||(n.eventListeners[r]=[]),n.eventListeners[r].push(e),i.selector.addEventListener(r.split(".")[0],e)}),this):this},n.prototype.once=function(t,e){var i=this;return this.on(t,function(){i.off(t),e(t)}),this},n.prototype.off=function(t){var e=this;return this.selector?(Object.keys(n.eventListeners).forEach(function(i){e.isEventMatched(t,i)&&(n.eventListeners[i].forEach(function(r){e.selector.removeEventListener(i.split(".")[0],r)}),n.eventListeners[i]=[])}),this):this},n.prototype.trigger=function(t,e){if(!this.firstElement)return this;var i=new CustomEvent(t.split(".")[0],{detail:e||null});return this.firstElement.dispatchEvent(i),this},n.prototype.load=function(t){var e=this;return fetch(t).then(function(i){return i.text()}).then(function(i){e.selector.innerHTML=i}),this},n.prototype.html=function(t){return void 0===t?this.firstElement?this.firstElement.innerHTML:"":(this._each(function(e){e.innerHTML=t}),this)},n.prototype.append=function(t){return this._each(function(e){"string"==typeof t?e.insertAdjacentHTML("beforeend",t):e.appendChild(t)}),this},n.prototype.prepend=function(t){return this._each(function(e){e.insertAdjacentHTML("afterbegin",t)}),this},n.prototype.remove=function(){return this._each(function(t){t.parentNode.removeChild(t)}),this},n.prototype.empty=function(){return this._each(function(t){t.innerHTML=""}),this},n.prototype.scrollTop=function(t){return void 0!==t?(document.body.scrollTop=t,document.documentElement.scrollTop=t,this):window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},n.prototype.scrollLeft=function(t){return void 0!==t?(document.body.scrollLeft=t,document.documentElement.scrollLeft=t,this):window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0},n.prototype.offset=function(){if(!this.firstElement)return{left:0,top:0};var t=this.firstElement.getBoundingClientRect(),e=kr("body").style().marginLeft;return{left:t.left-parseFloat(e)+this.scrollLeft(),top:t.top+this.scrollTop()}},n.prototype.style=function(){return this.firstElement?this.firstElement.currentStyle||window.getComputedStyle(this.firstElement):{}},n.prototype.width=function(){var t=this.style();return this.firstElement.clientWidth-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)},n.prototype.height=function(){var t=this.style();return this.firstElement.clientHeight-parseFloat(t.paddingTop)-parseFloat(t.paddingBottom)},n.eventListeners={},n}();function kr(n){return function _5(){(function(){if("function"==typeof window.CustomEvent)return!1;window.CustomEvent=function n(t,e){e=e||{bubbles:!1,cancelable:!1,detail:null};var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),i}})(),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector)}(),new BO(n)}var y5=["src","sources","subHtml","subHtmlUrl","html","video","poster","slideName","responsive","srcset","sizes","iframe","downloadUrl","download","width","facebookShareUrl","tweetText","iframeTitle","twitterShareUrl","pinterestShareUrl","pinterestText","fbHtml","disqusIdentifier","disqusUrl"];function v5(n){return"href"===n?"src":n=(n=(n=n.replace("data-","")).charAt(0).toLowerCase()+n.slice(1)).replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})}var wu_getSize=function(n,t,e,i){void 0===e&&(e=0);var a=kr(n).attr("data-lg-size")||i;if(a){var f=a.split(",");if(f[1])for(var b=window.innerWidth,S=0;S<f.length;S++){var M=f[S];if(parseInt(M.split("-")[2],10)>b){a=M;break}S===f.length-1&&(a=M)}var N=a.split("-"),U=parseInt(N[0],10),j=parseInt(N[1],10),be=t.width(),Ce=t.height()-e,et=Math.min(be,U),Ye=Math.min(Ce,j),Be=Math.min(et/U,Ye/j);return{width:U*Be,height:j*Be}}},wu_getTransform=function(n,t,e,i,r){if(r){var a=kr(n).find("img").first();if(a.get()){var f=t.get().getBoundingClientRect(),b=f.width,S=t.height()-(e+i),M=a.width(),O=a.height(),N=a.style(),U=(b-M)/2-a.offset().left+(parseFloat(N.paddingLeft)||0)+(parseFloat(N.borderLeft)||0)+kr(window).scrollLeft()+f.left,j=(S-O)/2-a.offset().top+(parseFloat(N.paddingTop)||0)+(parseFloat(N.borderTop)||0)+kr(window).scrollTop()+e;return"translate3d("+(U*=-1)+"px, "+(j*=-1)+"px, 0) scale3d("+M/r.width+", "+O/r.height+", 1)"}}},wu_getImgMarkup=function(n,t,e,i,r,a){var S="<img "+e+" "+(i?'srcset="'+i+'"':"")+"  "+(r?'sizes="'+r+'"':"")+' class="lg-object lg-image" data-index="'+n+'" src="'+t+'" />',M="";return a&&(M=("string"==typeof a?JSON.parse(a):a).map(function(N){var U="";return Object.keys(N).forEach(function(j){U+=" "+j+'="'+N[j]+'"'}),"<source "+U+"></source>"})),""+M+S},zO=0,b5=function(){function n(t,e){if(this.lgOpened=!1,this.index=0,this.plugins=[],this.lGalleryOn=!1,this.lgBusy=!1,this.currentItemsInDom=[],this.prevScrollTop=0,this.bodyPaddingRight=0,this.isDummyImageRemoved=!1,this.dragOrSwipeEnabled=!1,this.mediaContainerPosition={top:0,bottom:0},!t)return this;if(zO++,this.lgId=zO,this.el=t,this.LGel=kr(t),this.generateSettings(e),this.buildModules(),this.settings.dynamic&&void 0!==this.settings.dynamicEl&&!Array.isArray(this.settings.dynamicEl))throw"When using dynamic mode, you must also define dynamicEl as an Array.";return this.galleryItems=this.getItems(),this.normalizeSettings(),this.init(),this.validateLicense(),this}return n.prototype.generateSettings=function(t){if(this.settings=Jg(Jg({},g5),t),this.settings.isMobile&&"function"==typeof this.settings.isMobile?this.settings.isMobile():/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)){var e=Jg(Jg({},this.settings.mobileSettings),this.settings.mobileSettings);this.settings=Jg(Jg({},this.settings),e)}},n.prototype.normalizeSettings=function(){this.settings.slideEndAnimation&&(this.settings.hideControlOnEnd=!1),this.settings.closable||(this.settings.swipeToClose=!1),this.zoomFromOrigin=this.settings.zoomFromOrigin,this.settings.dynamic&&(this.zoomFromOrigin=!1),this.settings.container||(this.settings.container=document.body),this.settings.preload=Math.min(this.settings.preload,this.galleryItems.length)},n.prototype.init=function(){var t=this;this.addSlideVideoInfo(this.galleryItems),this.buildStructure(),this.LGel.trigger("lgInit",{instance:this}),this.settings.keyPress&&this.keyPress(),setTimeout(function(){t.enableDrag(),t.enableSwipe(),t.triggerPosterClick()},50),this.arrow(),this.settings.mousewheel&&this.mousewheel(),this.settings.dynamic||this.openGalleryOnItemClick()},n.prototype.openGalleryOnItemClick=function(){for(var t=this,e=function(a){var f=i.items[a],b=kr(f),S=BO.generateUUID();b.attr("data-lg-id",S).on("click.lgcustom-item-"+S,function(M){M.preventDefault(),t.openGallery(t.settings.index||a,f)})},i=this,r=0;r<this.items.length;r++)e(r)},n.prototype.buildModules=function(){var t=this;this.settings.plugins.forEach(function(e){t.plugins.push(new e(t,kr))})},n.prototype.validateLicense=function(){this.settings.licenseKey?"0000-0000-000-0000"===this.settings.licenseKey&&console.warn("lightGallery: "+this.settings.licenseKey+" license key is not valid for production use"):console.error("Please provide a valid license key")},n.prototype.getSlideItem=function(t){return kr(this.getSlideItemId(t))},n.prototype.getSlideItemId=function(t){return"#lg-item-"+this.lgId+"-"+t},n.prototype.getIdName=function(t){return t+"-"+this.lgId},n.prototype.getElementById=function(t){return kr("#"+this.getIdName(t))},n.prototype.manageSingleSlideClassName=function(){this.galleryItems.length<2?this.outer.addClass("lg-single-item"):this.outer.removeClass("lg-single-item")},n.prototype.buildStructure=function(){var t=this;if(!this.$container||!this.$container.get()){var i="",r="";this.settings.controls&&(i='<button type="button" id="'+this.getIdName("lg-prev")+'" aria-label="'+this.settings.strings.previousSlide+'" class="lg-prev lg-icon"> '+this.settings.prevHtml+' </button>\n                <button type="button" id="'+this.getIdName("lg-next")+'" aria-label="'+this.settings.strings.nextSlide+'" class="lg-next lg-icon"> '+this.settings.nextHtml+" </button>"),".lg-item"!==this.settings.appendSubHtmlTo&&(r='<div class="lg-sub-html" role="status" aria-live="polite"></div>');var a="";this.settings.allowMediaOverlap&&(a+="lg-media-overlap ");var f=this.settings.ariaLabelledby?'aria-labelledby="'+this.settings.ariaLabelledby+'"':"",b=this.settings.ariaDescribedby?'aria-describedby="'+this.settings.ariaDescribedby+'"':"",S="lg-container "+this.settings.addClass+" "+(document.body!==this.settings.container?"lg-inline":""),M=this.settings.closable&&this.settings.showCloseIcon?'<button type="button" aria-label="'+this.settings.strings.closeGallery+'" id="'+this.getIdName("lg-close")+'" class="lg-close lg-icon"></button>':"",O=this.settings.showMaximizeIcon?'<button type="button" aria-label="'+this.settings.strings.toggleMaximize+'" id="'+this.getIdName("lg-maximize")+'" class="lg-maximize lg-icon"></button>':"",N='\n        <div class="'+S+'" id="'+this.getIdName("lg-container")+'" tabindex="-1" aria-modal="true" '+f+" "+b+' role="dialog"\n        >\n            <div id="'+this.getIdName("lg-backdrop")+'" class="lg-backdrop"></div>\n\n            <div id="'+this.getIdName("lg-outer")+'" class="lg-outer lg-use-css3 lg-css3 lg-hide-items '+a+' ">\n\n              <div id="'+this.getIdName("lg-content")+'" class="lg-content">\n                <div id="'+this.getIdName("lg-inner")+'" class="lg-inner">\n                </div>\n                '+i+'\n              </div>\n                <div id="'+this.getIdName("lg-toolbar")+'" class="lg-toolbar lg-group">\n                    '+O+"\n                    "+M+"\n                    </div>\n                    "+(".lg-outer"===this.settings.appendSubHtmlTo?r:"")+'\n                <div id="'+this.getIdName("lg-components")+'" class="lg-components">\n                    '+(".lg-sub-html"===this.settings.appendSubHtmlTo?r:"")+"\n                </div>\n            </div>\n        </div>\n        ";kr(this.settings.container).append(N),document.body!==this.settings.container&&kr(this.settings.container).css("position","relative"),this.outer=this.getElementById("lg-outer"),this.$lgComponents=this.getElementById("lg-components"),this.$backdrop=this.getElementById("lg-backdrop"),this.$container=this.getElementById("lg-container"),this.$inner=this.getElementById("lg-inner"),this.$content=this.getElementById("lg-content"),this.$toolbar=this.getElementById("lg-toolbar"),this.$backdrop.css("transition-duration",this.settings.backdropDuration+"ms");var U=this.settings.mode+" ";this.manageSingleSlideClassName(),this.settings.enableDrag&&(U+="lg-grab "),this.outer.addClass(U),this.$inner.css("transition-timing-function",this.settings.easing),this.$inner.css("transition-duration",this.settings.speed+"ms"),this.settings.download&&this.$toolbar.append('<a id="'+this.getIdName("lg-download")+'" target="_blank" rel="noopener" aria-label="'+this.settings.strings.download+'" download class="lg-download lg-icon"></a>'),this.counter(),kr(window).on("resize.lg.global"+this.lgId+" orientationchange.lg.global"+this.lgId,function(){t.refreshOnResize()}),this.hideBars(),this.manageCloseGallery(),this.toggleMaximize(),this.initModules()}},n.prototype.refreshOnResize=function(){if(this.lgOpened){var e=this.galleryItems[this.index].__slideVideoInfo;this.mediaContainerPosition=this.getMediaContainerPosition();var i=this.mediaContainerPosition;if(this.currentImageSize=wu_getSize(this.items[this.index],this.outer,i.top+i.bottom,e&&this.settings.videoMaxSize),e&&this.resizeVideoSlide(this.index,this.currentImageSize),this.zoomFromOrigin&&!this.isDummyImageRemoved){var f=this.getDummyImgStyles(this.currentImageSize);this.outer.find(".lg-current .lg-dummy-img").first().attr("style",f)}this.LGel.trigger("lgContainerResize")}},n.prototype.resizeVideoSlide=function(t,e){var i=this.getVideoContStyle(e);this.getSlideItem(t).find(".lg-video-cont").attr("style",i)},n.prototype.updateSlides=function(t,e){if(this.index>t.length-1&&(this.index=t.length-1),1===t.length&&(this.index=0),t.length){var i=this.galleryItems[e].src;this.galleryItems=t,this.updateControls(),this.$inner.empty(),this.currentItemsInDom=[];var r=0;this.galleryItems.some(function(a,f){return a.src===i&&(r=f,!0)}),this.currentItemsInDom=this.organizeSlideItems(r,-1),this.loadContent(r,!0),this.getSlideItem(r).addClass("lg-current"),this.index=r,this.updateCurrentCounter(r),this.LGel.trigger("lgUpdateSlides")}else this.closeGallery()},n.prototype.getItems=function(){if(this.items=[],this.settings.dynamic)return this.settings.dynamicEl||[];if("this"===this.settings.selector)this.items.push(this.el);else if(this.settings.selector)if("string"==typeof this.settings.selector)if(this.settings.selectWithin){var t=kr(this.settings.selectWithin);this.items=t.find(this.settings.selector).get()}else this.items=this.el.querySelectorAll(this.settings.selector);else this.items=this.settings.selector;else this.items=this.el.children;return function(n,t,e,i){var r=[],a=function m5(){for(var n=0,t=0,e=arguments.length;t<e;t++)n+=arguments[t].length;var i=Array(n),r=0;for(t=0;t<e;t++)for(var a=arguments[t],f=0,b=a.length;f<b;f++,r++)i[r]=a[f];return i}(y5,t);return[].forEach.call(n,function(f){for(var b={},S=0;S<f.attributes.length;S++){var M=f.attributes[S];if(M.specified){var O=v5(M.name),N="";a.indexOf(O)>-1&&(N=O),N&&(b[N]=M.value)}}var U=kr(f),j=U.find("img").first().attr("alt"),be=U.attr("title"),Ce=i?U.attr(i):U.find("img").first().attr("src");b.thumb=Ce,e&&!b.subHtml&&(b.subHtml=be||j||""),b.alt=j||be||"",r.push(b)}),r}(this.items,this.settings.extraProps,this.settings.getCaptionFromTitleOrAlt,this.settings.exThumbImage)},n.prototype.shouldHideScrollbar=function(){return this.settings.hideScrollbar&&document.body===this.settings.container},n.prototype.hideScrollbar=function(){if(this.shouldHideScrollbar()){this.bodyPaddingRight=parseFloat(kr("body").style().paddingRight);var t=document.documentElement.getBoundingClientRect(),e=window.innerWidth-t.width;kr(document.body).css("padding-right",e+this.bodyPaddingRight+"px"),kr(document.body).addClass("lg-overlay-open")}},n.prototype.resetScrollBar=function(){!this.shouldHideScrollbar()||(kr(document.body).css("padding-right",this.bodyPaddingRight+"px"),kr(document.body).removeClass("lg-overlay-open"))},n.prototype.openGallery=function(t,e){var i=this;if(void 0===t&&(t=this.settings.index),!this.lgOpened){this.lgOpened=!0,this.outer.removeClass("lg-hide-items"),this.hideScrollbar(),this.$container.addClass("lg-show");var r=this.getItemsToBeInsertedToDom(t,t);this.currentItemsInDom=r;var a="";r.forEach(function(U){a=a+'<div id="'+U+'" class="lg-item"></div>'}),this.$inner.append(a),this.addHtml(t);var f="";this.mediaContainerPosition=this.getMediaContainerPosition();var b=this.mediaContainerPosition,S=b.top,M=b.bottom;this.settings.allowMediaOverlap||this.setMediaContainerPosition(S,M),this.zoomFromOrigin&&e&&(this.currentImageSize=wu_getSize(e,this.outer,S+M,this.galleryItems[t].__slideVideoInfo&&this.settings.videoMaxSize),f=wu_getTransform(e,this.outer,S,M,this.currentImageSize)),(!this.zoomFromOrigin||!f)&&(this.outer.addClass(this.settings.startClass),this.getSlideItem(t).removeClass("lg-complete")),setTimeout(function(){i.outer.addClass("lg-components-open")},this.settings.zoomFromOrigin?100:this.settings.backdropDuration),this.index=t,this.LGel.trigger("lgBeforeOpen"),this.getSlideItem(t).addClass("lg-current"),this.lGalleryOn=!1,this.prevScrollTop=kr(window).scrollTop(),setTimeout(function(){if(i.zoomFromOrigin&&f){var U=i.getSlideItem(t);U.css("transform",f),setTimeout(function(){U.addClass("lg-start-progress lg-start-end-progress").css("transition-duration",i.settings.startAnimationDuration+"ms"),i.outer.addClass("lg-zoom-from-image")}),setTimeout(function(){U.css("transform","translate3d(0, 0, 0)")},100)}setTimeout(function(){i.$backdrop.addClass("in"),i.$container.addClass("lg-show-in")},10),setTimeout(function(){i.settings.trapFocus&&document.body===i.settings.container&&i.trapFocus()},i.settings.backdropDuration+50),(!i.zoomFromOrigin||!f)&&setTimeout(function(){i.outer.addClass("lg-visible")},i.settings.backdropDuration),i.slide(t,!1,!1,!1),i.LGel.trigger("lgAfterOpen")}),document.body===this.settings.container&&kr("html").addClass("lg-on")}},n.prototype.getMediaContainerPosition=function(){if(this.settings.allowMediaOverlap)return{top:0,bottom:0};var t=this.$toolbar.get().clientHeight||0,e=this.outer.find(".lg-components .lg-sub-html").get(),i=this.settings.defaultCaptionHeight||e&&e.clientHeight||0,r=this.outer.find(".lg-thumb-outer").get();return{top:t,bottom:(r?r.clientHeight:0)+i}},n.prototype.setMediaContainerPosition=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.$content.css("top",t+"px").css("bottom",e+"px")},n.prototype.hideBars=function(){var t=this;setTimeout(function(){t.outer.removeClass("lg-hide-items"),t.settings.hideBarsDelay>0&&(t.outer.on("mousemove.lg click.lg touchstart.lg",function(){t.outer.removeClass("lg-hide-items"),clearTimeout(t.hideBarTimeout),t.hideBarTimeout=setTimeout(function(){t.outer.addClass("lg-hide-items")},t.settings.hideBarsDelay)}),t.outer.trigger("mousemove.lg"))},this.settings.showBarsAfter)},n.prototype.initPictureFill=function(t){if(this.settings.supportLegacyBrowser)try{picturefill({elements:[t.get()]})}catch{console.warn("lightGallery :- If you want srcset or picture tag to be supported for older browser please include picturefil javascript library in your document.")}},n.prototype.counter=function(){if(this.settings.counter){var t='<div class="lg-counter" role="status" aria-live="polite">\n                <span id="'+this.getIdName("lg-counter-current")+'" class="lg-counter-current">'+(this.index+1)+' </span> /\n                <span id="'+this.getIdName("lg-counter-all")+'" class="lg-counter-all">'+this.galleryItems.length+" </span></div>";this.outer.find(this.settings.appendCounterTo).append(t)}},n.prototype.addHtml=function(t){var e,i;if(this.galleryItems[t].subHtmlUrl?i=this.galleryItems[t].subHtmlUrl:e=this.galleryItems[t].subHtml,!i)if(e){var r=e.substring(0,1);("."===r||"#"===r)&&(e=this.settings.subHtmlSelectorRelative&&!this.settings.dynamic?kr(this.items).eq(t).find(e).first().html():kr(e).first().html())}else e="";if(".lg-item"!==this.settings.appendSubHtmlTo)i?this.outer.find(".lg-sub-html").load(i):this.outer.find(".lg-sub-html").html(e);else{var a=kr(this.getSlideItemId(t));i?a.load(i):a.append('<div class="lg-sub-html">'+e+"</div>")}typeof e<"u"&&null!==e&&(""===e?this.outer.find(this.settings.appendSubHtmlTo).addClass("lg-empty-html"):this.outer.find(this.settings.appendSubHtmlTo).removeClass("lg-empty-html")),this.LGel.trigger("lgAfterAppendSubHtml",{index:t})},n.prototype.preload=function(t){for(var e=1;e<=this.settings.preload&&!(e>=this.galleryItems.length-t);e++)this.loadContent(t+e,!1);for(var i=1;i<=this.settings.preload&&!(t-i<0);i++)this.loadContent(t-i,!1)},n.prototype.getDummyImgStyles=function(t){return t?"width:"+t.width+"px;\n                margin-left: -"+t.width/2+"px;\n                margin-top: -"+t.height/2+"px;\n                height:"+t.height+"px":""},n.prototype.getVideoContStyle=function(t){return t?"width:"+t.width+"px;\n                height:"+t.height+"px":""},n.prototype.getDummyImageContent=function(t,e,i){var r;if(this.settings.dynamic||(r=kr(this.items).eq(e)),r){var a;if(!(a=this.settings.exThumbImage?r.attr(this.settings.exThumbImage):r.find("img").first().attr("src")))return"";var b="<img "+i+' style="'+this.getDummyImgStyles(this.currentImageSize)+'" class="lg-dummy-img" src="'+a+'" />';return t.addClass("lg-first-slide"),this.outer.addClass("lg-first-slide-loading"),b}return""},n.prototype.setImgMarkup=function(t,e,i){var M,r=this.galleryItems[i],a=r.alt,f=r.srcset,b=r.sizes,S=r.sources,O=a?'alt="'+a+'"':"";M=this.isFirstSlideWithZoomAnimation()?this.getDummyImageContent(e,i,O):wu_getImgMarkup(i,t,O,f,b,S),e.prepend('<picture class="lg-img-wrap"> '+M+"</picture>")},n.prototype.onSlideObjectLoad=function(t,e,i,r){var a=t.find(".lg-object").first();(function(n){return!(!n||!n.complete||0===n.naturalWidth)})(a.get())||e?i():(a.on("load.lg error.lg",function(){i&&i()}),a.on("error.lg",function(){r&&r()}))},n.prototype.onLgObjectLoad=function(t,e,i,r,a,f){var b=this;this.onSlideObjectLoad(t,f,function(){b.triggerSlideItemLoad(t,e,i,r,a)},function(){t.addClass("lg-complete lg-complete_"),t.html('<span class="lg-error-msg">Oops... Failed to load content...</span>')})},n.prototype.triggerSlideItemLoad=function(t,e,i,r,a){var f=this,b=this.galleryItems[e],S=a&&"video"===this.getSlideType(b)&&!b.poster?r:0;setTimeout(function(){t.addClass("lg-complete lg-complete_"),f.LGel.trigger("lgSlideItemLoad",{index:e,delay:i||0,isFirstSlide:a})},S)},n.prototype.isFirstSlideWithZoomAnimation=function(){return!(this.lGalleryOn||!this.zoomFromOrigin||!this.currentImageSize)},n.prototype.addSlideVideoInfo=function(t){var e=this;t.forEach(function(i,r){i.__slideVideoInfo=function(n,t,e){if(!n)return t?{html5:!0}:void console.error("lightGallery :- data-src is not provided on slide item "+(e+1)+". Please make sure the selector property is properly configured. More info - https://www.lightgalleryjs.com/demos/html-markup/");var i=n.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com|be-nocookie\.com)\/(?:watch\?v=|embed\/)?([a-z0-9\-\_\%]+)([\&|?][\S]*)*/i),r=n.match(/\/\/(?:www\.)?(?:player\.)?vimeo.com\/(?:video\/)?([0-9a-z\-_]+)(.*)?/i),a=n.match(/https?:\/\/(.+)?(wistia\.com|wi\.st)\/(medias|embed)\/([0-9a-z\-_]+)(.*)/);return i?{youtube:i}:r?{vimeo:r}:a?{wistia:a}:void 0}(i.src,!!i.video,r),i.__slideVideoInfo&&e.settings.loadYouTubePoster&&!i.poster&&i.__slideVideoInfo.youtube&&(i.poster="//img.youtube.com/vi/"+i.__slideVideoInfo.youtube[1]+"/maxresdefault.jpg")})},n.prototype.loadContent=function(t,e){var i=this,r=this.galleryItems[t],a=kr(this.getSlideItemId(t)),f=r.poster,b=r.srcset,S=r.sizes,M=r.sources,O=r.src,N=r.video,U=N&&"string"==typeof N?JSON.parse(N):N;if(r.responsive){var j=r.responsive.split(",");O=function(n){for(var t=[],e=[],i="",r=0;r<n.length;r++){var a=n[r].split(" ");""===a[0]&&a.splice(0,1),e.push(a[0]),t.push(a[1])}for(var f=window.innerWidth,b=0;b<t.length;b++)if(parseInt(t[b],10)>f){i=e[b];break}return i}(j)||O}var be=r.__slideVideoInfo,Ce="",et=!!r.iframe,Ye=!this.lGalleryOn,Be=0;if(Ye&&(Be=this.zoomFromOrigin&&this.currentImageSize?this.settings.startAnimationDuration+10:this.settings.backdropDuration+10),!a.hasClass("lg-loaded")){if(be){var it=this.mediaContainerPosition,qt=wu_getSize(this.items[t],this.outer,it.top+it.bottom,be&&this.settings.videoMaxSize);Ce=this.getVideoContStyle(qt)}if(et){var zt=function(n,t,e,i,r,a){return'<div class="lg-video-cont lg-has-iframe" style="width:'+n+"; max-width:"+e+"; height: "+t+"; max-height:"+i+'">\n                    <iframe class="lg-object" frameborder="0" '+(a?'title="'+a+'"':"")+' src="'+r+'"  allowfullscreen="true"></iframe>\n                </div>'}(this.settings.iframeWidth,this.settings.iframeHeight,this.settings.iframeMaxWidth,this.settings.iframeMaxHeight,O,r.iframeTitle);a.prepend(zt)}else if(f){var Kt="";Ye&&this.zoomFromOrigin&&this.currentImageSize&&(Kt=this.getDummyImageContent(a,t,"")),zt=function(n,t,e,i,r){return'<div class="lg-video-cont '+(r&&r.youtube?"lg-has-youtube":r&&r.vimeo?"lg-has-vimeo":"lg-has-html5")+'" style="'+e+'">\n                <div class="lg-video-play-button">\n                <svg\n                    viewBox="0 0 20 20"\n                    preserveAspectRatio="xMidYMid"\n                    focusable="false"\n                    aria-labelledby="'+i+'"\n                    role="img"\n                    class="lg-video-play-icon"\n                >\n                    <title>'+i+'</title>\n                    <polygon class="lg-video-play-icon-inner" points="1,0 20,10 1,20"></polygon>\n                </svg>\n                <svg class="lg-video-play-icon-bg" viewBox="0 0 50 50" focusable="false">\n                    <circle cx="50%" cy="50%" r="20"></circle></svg>\n                <svg class="lg-video-play-icon-circle" viewBox="0 0 50 50" focusable="false">\n                    <circle cx="50%" cy="50%" r="20"></circle>\n                </svg>\n            </div>\n            '+(t||"")+'\n            <img class="lg-object lg-video-poster" src="'+n+'" />\n        </div>'}(f,Kt||"",Ce,this.settings.strings.playVideo,be),a.prepend(zt)}else if(be)a.prepend(zt='<div class="lg-video-cont " style="'+Ce+'"></div>');else if(this.setImgMarkup(O,a,t),b||M){var $i=a.find(".lg-object");this.initPictureFill($i)}(f||be)&&this.LGel.trigger("lgHasVideo",{index:t,src:O,html5Video:U,hasPoster:!!f}),this.LGel.trigger("lgAfterAppendSlide",{index:t}),this.lGalleryOn&&".lg-item"===this.settings.appendSubHtmlTo&&this.addHtml(t)}var di=0;Be&&!kr(document.body).hasClass("lg-from-hash")&&(di=Be),this.isFirstSlideWithZoomAnimation()&&(setTimeout(function(){a.removeClass("lg-start-end-progress lg-start-progress").removeAttr("style")},this.settings.startAnimationDuration+100),a.hasClass("lg-loaded")||setTimeout(function(){if("image"===i.getSlideType(r)){var ur=r.alt,_r=ur?'alt="'+ur+'"':"";if(a.find(".lg-img-wrap").append(wu_getImgMarkup(t,O,_r,b,S,r.sources)),b||M){var Gn=a.find(".lg-object");i.initPictureFill(Gn)}}("image"===i.getSlideType(r)||"video"===i.getSlideType(r)&&f)&&(i.onLgObjectLoad(a,t,Be,di,!0,!1),i.onSlideObjectLoad(a,!(!be||!be.html5||f),function(){i.loadContentOnFirstSlideLoad(t,a,di)},function(){i.loadContentOnFirstSlideLoad(t,a,di)}))},this.settings.startAnimationDuration+100)),a.addClass("lg-loaded"),(!this.isFirstSlideWithZoomAnimation()||"video"===this.getSlideType(r)&&!f)&&this.onLgObjectLoad(a,t,Be,di,Ye,!(!be||!be.html5||f)),(!this.zoomFromOrigin||!this.currentImageSize)&&a.hasClass("lg-complete_")&&!this.lGalleryOn&&setTimeout(function(){a.addClass("lg-complete")},this.settings.backdropDuration),this.lGalleryOn=!0,!0===e&&(a.hasClass("lg-complete_")?this.preload(t):a.find(".lg-object").first().on("load.lg error.lg",function(){i.preload(t)}))},n.prototype.loadContentOnFirstSlideLoad=function(t,e,i){var r=this;setTimeout(function(){e.find(".lg-dummy-img").remove(),e.removeClass("lg-first-slide"),r.outer.removeClass("lg-first-slide-loading"),r.isDummyImageRemoved=!0,r.preload(t)},i+300)},n.prototype.getItemsToBeInsertedToDom=function(t,e,i){var r=this;void 0===i&&(i=0);var a=[],f=Math.max(i,3);f=Math.min(f,this.galleryItems.length);var b="lg-item-"+this.lgId+"-"+e;if(this.galleryItems.length<=3)return this.galleryItems.forEach(function(O,N){a.push("lg-item-"+r.lgId+"-"+N)}),a;if(t<(this.galleryItems.length-1)/2){for(var S=t;S>t-f/2&&S>=0;S--)a.push("lg-item-"+this.lgId+"-"+S);var M=a.length;for(S=0;S<f-M;S++)a.push("lg-item-"+this.lgId+"-"+(t+S+1))}else{for(S=t;S<=this.galleryItems.length-1&&S<t+f/2;S++)a.push("lg-item-"+this.lgId+"-"+S);for(M=a.length,S=0;S<f-M;S++)a.push("lg-item-"+this.lgId+"-"+(t-S-1))}return this.settings.loop&&(t===this.galleryItems.length-1?a.push("lg-item-"+this.lgId+"-0"):0===t&&a.push("lg-item-"+this.lgId+"-"+(this.galleryItems.length-1))),-1===a.indexOf(b)&&a.push("lg-item-"+this.lgId+"-"+e),a},n.prototype.organizeSlideItems=function(t,e){var i=this,r=this.getItemsToBeInsertedToDom(t,e,this.settings.numberOfSlideItemsInDom);return r.forEach(function(a){-1===i.currentItemsInDom.indexOf(a)&&i.$inner.append('<div id="'+a+'" class="lg-item"></div>')}),this.currentItemsInDom.forEach(function(a){-1===r.indexOf(a)&&kr("#"+a).remove()}),r},n.prototype.getPreviousSlideIndex=function(){var t=0;try{var e=this.outer.find(".lg-current").first().attr("id");t=parseInt(e.split("-")[3])||0}catch{t=0}return t},n.prototype.setDownloadValue=function(t){if(this.settings.download){var e=this.galleryItems[t];if(!1===e.downloadUrl||"false"===e.downloadUrl)this.outer.addClass("lg-hide-download");else{var r=this.getElementById("lg-download");this.outer.removeClass("lg-hide-download"),r.attr("href",e.downloadUrl||e.src),e.download&&r.attr("download",e.download)}}},n.prototype.makeSlideAnimation=function(t,e,i){var r=this;this.lGalleryOn&&i.addClass("lg-slide-progress"),setTimeout(function(){r.outer.addClass("lg-no-trans"),r.outer.find(".lg-item").removeClass("lg-prev-slide lg-next-slide"),"prev"===t?(e.addClass("lg-prev-slide"),i.addClass("lg-next-slide")):(e.addClass("lg-next-slide"),i.addClass("lg-prev-slide")),setTimeout(function(){r.outer.find(".lg-item").removeClass("lg-current"),e.addClass("lg-current"),r.outer.removeClass("lg-no-trans")},50)},this.lGalleryOn?this.settings.slideDelay:0)},n.prototype.slide=function(t,e,i,r){var a=this,f=this.getPreviousSlideIndex();if(this.currentItemsInDom=this.organizeSlideItems(t,f),!this.lGalleryOn||f!==t){var b=this.galleryItems.length;if(!this.lgBusy){this.settings.counter&&this.updateCurrentCounter(t);var S=this.getSlideItem(t),M=this.getSlideItem(f),O=this.galleryItems[t],N=O.__slideVideoInfo;if(this.outer.attr("data-lg-slide-type",this.getSlideType(O)),this.setDownloadValue(t),N){var U=this.mediaContainerPosition,Ce=wu_getSize(this.items[t],this.outer,U.top+U.bottom,N&&this.settings.videoMaxSize);this.resizeVideoSlide(t,Ce)}if(this.LGel.trigger("lgBeforeSlide",{prevIndex:f,index:t,fromTouch:!!e,fromThumb:!!i}),this.lgBusy=!0,clearTimeout(this.hideBarTimeout),this.arrowDisable(t),r||(t<f?r="prev":t>f&&(r="next")),e){this.outer.find(".lg-item").removeClass("lg-prev-slide lg-current lg-next-slide");var et=void 0,Ye=void 0;b>2?(et=t-1,Ye=t+1,(0===t&&f===b-1||t===b-1&&0===f)&&(Ye=0,et=b-1)):(et=0,Ye=1),"prev"===r?this.getSlideItem(Ye).addClass("lg-next-slide"):this.getSlideItem(et).addClass("lg-prev-slide"),S.addClass("lg-current")}else this.makeSlideAnimation(r,S,M);this.lGalleryOn?setTimeout(function(){a.loadContent(t,!0),".lg-item"!==a.settings.appendSubHtmlTo&&a.addHtml(t)},this.settings.speed+50+(e?0:this.settings.slideDelay)):this.loadContent(t,!0),setTimeout(function(){a.lgBusy=!1,M.removeClass("lg-slide-progress"),a.LGel.trigger("lgAfterSlide",{prevIndex:f,index:t,fromTouch:e,fromThumb:i})},(this.lGalleryOn?this.settings.speed+100:100)+(e?0:this.settings.slideDelay))}this.index=t}},n.prototype.updateCurrentCounter=function(t){this.getElementById("lg-counter-current").html(t+1+"")},n.prototype.updateCounterTotal=function(){this.getElementById("lg-counter-all").html(this.galleryItems.length+"")},n.prototype.getSlideType=function(t){return t.__slideVideoInfo?"video":t.iframe?"iframe":"image"},n.prototype.touchMove=function(t,e,i){var r=e.pageX-t.pageX,a=e.pageY-t.pageY,f=!1;if(this.swipeDirection?f=!0:Math.abs(r)>15?(this.swipeDirection="horizontal",f=!0):Math.abs(a)>15&&(this.swipeDirection="vertical",f=!0),f){var b=this.getSlideItem(this.index);if("horizontal"===this.swipeDirection){i?.preventDefault(),this.outer.addClass("lg-dragging"),this.setTranslate(b,r,0);var S=b.get().offsetWidth,O=15*S/100-Math.abs(10*r/100);this.setTranslate(this.outer.find(".lg-prev-slide").first(),-S+r-O,0),this.setTranslate(this.outer.find(".lg-next-slide").first(),S+r+O,0)}else if("vertical"===this.swipeDirection&&this.settings.swipeToClose){i?.preventDefault(),this.$container.addClass("lg-dragging-vertical");var N=1-Math.abs(a)/window.innerHeight;this.$backdrop.css("opacity",N);var U=1-Math.abs(a)/(2*window.innerWidth);this.setTranslate(b,0,a,U,U),Math.abs(a)>100&&this.outer.addClass("lg-hide-items").removeClass("lg-components-open")}}},n.prototype.touchEnd=function(t,e,i){var a,r=this;"lg-slide"!==this.settings.mode&&this.outer.addClass("lg-slide"),setTimeout(function(){r.$container.removeClass("lg-dragging-vertical"),r.outer.removeClass("lg-dragging lg-hide-items").addClass("lg-components-open");var f=!0;if("horizontal"===r.swipeDirection){a=t.pageX-e.pageX;var b=Math.abs(t.pageX-e.pageX);a<0&&b>r.settings.swipeThreshold?(r.goToNextSlide(!0),f=!1):a>0&&b>r.settings.swipeThreshold&&(r.goToPrevSlide(!0),f=!1)}else if("vertical"===r.swipeDirection){if(a=Math.abs(t.pageY-e.pageY),r.settings.closable&&r.settings.swipeToClose&&a>100)return void r.closeGallery();r.$backdrop.css("opacity",1)}if(r.outer.find(".lg-item").removeAttr("style"),f&&Math.abs(t.pageX-e.pageX)<5){var S=kr(i.target);r.isPosterElement(S)&&r.LGel.trigger("lgPosterClick")}r.swipeDirection=void 0}),setTimeout(function(){!r.outer.hasClass("lg-dragging")&&"lg-slide"!==r.settings.mode&&r.outer.removeClass("lg-slide")},this.settings.speed+100)},n.prototype.enableSwipe=function(){var t=this,e={},i={},r=!1,a=!1;this.settings.enableSwipe&&(this.$inner.on("touchstart.lg",function(f){t.dragOrSwipeEnabled=!0;var b=t.getSlideItem(t.index);(kr(f.target).hasClass("lg-item")||b.get().contains(f.target))&&!t.outer.hasClass("lg-zoomed")&&!t.lgBusy&&1===f.touches.length&&(a=!0,t.touchAction="swipe",t.manageSwipeClass(),e={pageX:f.touches[0].pageX,pageY:f.touches[0].pageY})}),this.$inner.on("touchmove.lg",function(f){a&&"swipe"===t.touchAction&&1===f.touches.length&&(t.touchMove(e,i={pageX:f.touches[0].pageX,pageY:f.touches[0].pageY},f),r=!0)}),this.$inner.on("touchend.lg",function(f){if("swipe"===t.touchAction){if(r)r=!1,t.touchEnd(i,e,f);else if(a){var b=kr(f.target);t.isPosterElement(b)&&t.LGel.trigger("lgPosterClick")}t.touchAction=void 0,a=!1}}))},n.prototype.enableDrag=function(){var t=this,e={},i={},r=!1,a=!1;this.settings.enableDrag&&(this.outer.on("mousedown.lg",function(f){t.dragOrSwipeEnabled=!0;var b=t.getSlideItem(t.index);(kr(f.target).hasClass("lg-item")||b.get().contains(f.target))&&!t.outer.hasClass("lg-zoomed")&&!t.lgBusy&&(f.preventDefault(),t.lgBusy||(t.manageSwipeClass(),e={pageX:f.pageX,pageY:f.pageY},r=!0,t.outer.get().scrollLeft+=1,t.outer.get().scrollLeft-=1,t.outer.removeClass("lg-grab").addClass("lg-grabbing"),t.LGel.trigger("lgDragStart")))}),kr(window).on("mousemove.lg.global"+this.lgId,function(f){r&&t.lgOpened&&(a=!0,t.touchMove(e,i={pageX:f.pageX,pageY:f.pageY}),t.LGel.trigger("lgDragMove"))}),kr(window).on("mouseup.lg.global"+this.lgId,function(f){if(t.lgOpened){var b=kr(f.target);a?(a=!1,t.touchEnd(i,e,f),t.LGel.trigger("lgDragEnd")):t.isPosterElement(b)&&t.LGel.trigger("lgPosterClick"),r&&(r=!1,t.outer.removeClass("lg-grabbing").addClass("lg-grab"))}}))},n.prototype.triggerPosterClick=function(){var t=this;this.$inner.on("click.lg",function(e){!t.dragOrSwipeEnabled&&t.isPosterElement(kr(e.target))&&t.LGel.trigger("lgPosterClick")})},n.prototype.manageSwipeClass=function(){var t=this.index+1,e=this.index-1;this.settings.loop&&this.galleryItems.length>2&&(0===this.index?e=this.galleryItems.length-1:this.index===this.galleryItems.length-1&&(t=0)),this.outer.find(".lg-item").removeClass("lg-next-slide lg-prev-slide"),e>-1&&this.getSlideItem(e).addClass("lg-prev-slide"),this.getSlideItem(t).addClass("lg-next-slide")},n.prototype.goToNextSlide=function(t){var e=this,i=this.settings.loop;t&&this.galleryItems.length<3&&(i=!1),this.lgBusy||(this.index+1<this.galleryItems.length?(this.index++,this.LGel.trigger("lgBeforeNextSlide",{index:this.index}),this.slide(this.index,!!t,!1,"next")):i?(this.index=0,this.LGel.trigger("lgBeforeNextSlide",{index:this.index}),this.slide(this.index,!!t,!1,"next")):this.settings.slideEndAnimation&&!t&&(this.outer.addClass("lg-right-end"),setTimeout(function(){e.outer.removeClass("lg-right-end")},400)))},n.prototype.goToPrevSlide=function(t){var e=this,i=this.settings.loop;t&&this.galleryItems.length<3&&(i=!1),this.lgBusy||(this.index>0?(this.index--,this.LGel.trigger("lgBeforePrevSlide",{index:this.index,fromTouch:t}),this.slide(this.index,!!t,!1,"prev")):i?(this.index=this.galleryItems.length-1,this.LGel.trigger("lgBeforePrevSlide",{index:this.index,fromTouch:t}),this.slide(this.index,!!t,!1,"prev")):this.settings.slideEndAnimation&&!t&&(this.outer.addClass("lg-left-end"),setTimeout(function(){e.outer.removeClass("lg-left-end")},400)))},n.prototype.keyPress=function(){var t=this;kr(window).on("keydown.lg.global"+this.lgId,function(e){t.lgOpened&&!0===t.settings.escKey&&27===e.keyCode&&(e.preventDefault(),t.settings.allowMediaOverlap&&t.outer.hasClass("lg-can-toggle")&&t.outer.hasClass("lg-components-open")?t.outer.removeClass("lg-components-open"):t.closeGallery()),t.lgOpened&&t.galleryItems.length>1&&(37===e.keyCode&&(e.preventDefault(),t.goToPrevSlide()),39===e.keyCode&&(e.preventDefault(),t.goToNextSlide()))})},n.prototype.arrow=function(){var t=this;this.getElementById("lg-prev").on("click.lg",function(){t.goToPrevSlide()}),this.getElementById("lg-next").on("click.lg",function(){t.goToNextSlide()})},n.prototype.arrowDisable=function(t){if(!this.settings.loop&&this.settings.hideControlOnEnd){var e=this.getElementById("lg-prev"),i=this.getElementById("lg-next");t+1===this.galleryItems.length?i.attr("disabled","disabled").addClass("disabled"):i.removeAttr("disabled").removeClass("disabled"),0===t?e.attr("disabled","disabled").addClass("disabled"):e.removeAttr("disabled").removeClass("disabled")}},n.prototype.setTranslate=function(t,e,i,r,a){void 0===r&&(r=1),void 0===a&&(a=1),t.css("transform","translate3d("+e+"px, "+i+"px, 0px) scale3d("+r+", "+a+", 1)")},n.prototype.mousewheel=function(){var t=this,e=0;this.outer.on("wheel.lg",function(i){if(i.deltaY&&!(t.galleryItems.length<2)){i.preventDefault();var r=(new Date).getTime();r-e<1e3||(e=r,i.deltaY>0?t.goToNextSlide():i.deltaY<0&&t.goToPrevSlide())}})},n.prototype.isSlideElement=function(t){return t.hasClass("lg-outer")||t.hasClass("lg-item")||t.hasClass("lg-img-wrap")},n.prototype.isPosterElement=function(t){var e=this.getSlideItem(this.index).find(".lg-video-play-button").get();return t.hasClass("lg-video-poster")||t.hasClass("lg-video-play-button")||e&&e.contains(t.get())},n.prototype.toggleMaximize=function(){var t=this;this.getElementById("lg-maximize").on("click.lg",function(){t.$container.toggleClass("lg-inline"),t.refreshOnResize()})},n.prototype.invalidateItems=function(){for(var t=0;t<this.items.length;t++){var i=kr(this.items[t]);i.off("click.lgcustom-item-"+i.attr("data-lg-id"))}},n.prototype.trapFocus=function(){var t=this;this.$container.get().focus({preventScroll:!0}),kr(window).on("keydown.lg.global"+this.lgId,function(e){if(t.lgOpened&&("Tab"===e.key||9===e.keyCode)){var r=function(n){var t=n.querySelectorAll('a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])');return[].filter.call(t,function(i){var r=window.getComputedStyle(i);return"none"!==r.display&&"hidden"!==r.visibility})}(t.$container.get()),a=r[0],f=r[r.length-1];e.shiftKey?document.activeElement===a&&(f.focus(),e.preventDefault()):document.activeElement===f&&(a.focus(),e.preventDefault())}})},n.prototype.manageCloseGallery=function(){var t=this;if(this.settings.closable){var e=!1;this.getElementById("lg-close").on("click.lg",function(){t.closeGallery()}),this.settings.closeOnTap&&(this.outer.on("mousedown.lg",function(i){var r=kr(i.target);e=!!t.isSlideElement(r)}),this.outer.on("mousemove.lg",function(){e=!1}),this.outer.on("mouseup.lg",function(i){var r=kr(i.target);t.isSlideElement(r)&&e&&(t.outer.hasClass("lg-dragging")||t.closeGallery())}))}},n.prototype.closeGallery=function(t){var e=this;if(!this.lgOpened||!this.settings.closable&&!t)return 0;this.LGel.trigger("lgBeforeClose"),this.settings.resetScrollPosition&&!this.settings.hideScrollbar&&kr(window).scrollTop(this.prevScrollTop);var r,i=this.items[this.index];if(this.zoomFromOrigin&&i){var a=this.mediaContainerPosition,f=a.top,b=a.bottom,S=this.galleryItems[this.index],N=wu_getSize(i,this.outer,f+b,S.__slideVideoInfo&&S.poster&&this.settings.videoMaxSize);r=wu_getTransform(i,this.outer,f,b,N)}this.zoomFromOrigin&&r?(this.outer.addClass("lg-closing lg-zoom-from-image"),this.getSlideItem(this.index).addClass("lg-start-end-progress").css("transition-duration",this.settings.startAnimationDuration+"ms").css("transform",r)):(this.outer.addClass("lg-hide-items"),this.outer.removeClass("lg-zoom-from-image")),this.destroyModules(),this.lGalleryOn=!1,this.isDummyImageRemoved=!1,this.zoomFromOrigin=this.settings.zoomFromOrigin,clearTimeout(this.hideBarTimeout),this.hideBarTimeout=!1,kr("html").removeClass("lg-on"),this.outer.removeClass("lg-visible lg-components-open"),this.$backdrop.removeClass("in").css("opacity",0);var U=this.zoomFromOrigin&&r?Math.max(this.settings.startAnimationDuration,this.settings.backdropDuration):this.settings.backdropDuration;return this.$container.removeClass("lg-show-in"),setTimeout(function(){e.zoomFromOrigin&&r&&e.outer.removeClass("lg-zoom-from-image"),e.$container.removeClass("lg-show"),e.resetScrollBar(),e.$backdrop.removeAttr("style").css("transition-duration",e.settings.backdropDuration+"ms"),e.outer.removeClass("lg-closing "+e.settings.startClass),e.getSlideItem(e.index).removeClass("lg-start-end-progress"),e.$inner.empty(),e.lgOpened&&e.LGel.trigger("lgAfterClose",{instance:e}),e.$container.get()&&e.$container.get().blur(),e.lgOpened=!1},U+100),U+100},n.prototype.initModules=function(){this.plugins.forEach(function(t){try{t.init()}catch{console.warn("lightGallery:- make sure lightGallery module is properly initiated")}})},n.prototype.destroyModules=function(t){this.plugins.forEach(function(e){try{t?e.destroy():e.closeGallery&&e.closeGallery()}catch{console.warn("lightGallery:- make sure lightGallery module is properly destroyed")}})},n.prototype.refresh=function(t){this.settings.dynamic||this.invalidateItems(),this.galleryItems=t||this.getItems(),this.updateControls(),this.openGalleryOnItemClick(),this.LGel.trigger("lgUpdateSlides")},n.prototype.updateControls=function(){this.addSlideVideoInfo(this.galleryItems),this.updateCounterTotal(),this.manageSingleSlideClassName()},n.prototype.destroyGallery=function(){this.destroyModules(!0),this.settings.dynamic||this.invalidateItems(),kr(window).off(".lg.global"+this.lgId),this.LGel.off(".lg"),this.$container.remove()},n.prototype.destroy=function(){var t=this.closeGallery(!0);return t?setTimeout(this.destroyGallery.bind(this),t):this.destroyGallery(),t},n}();const E5=["*"];let C5=(()=>{class n{constructor(e){this._elementRef=e,this.lgInitialized=!1,this._elementRef=e}ngAfterViewChecked(){this.lgInitialized||(this.registerEvents(),this.LG=function x5(n,t){return new b5(n,t)}(this._elementRef.nativeElement,this.settings),this.lgInitialized=!0)}ngOnDestroy(){this.LG.destroy(),this.lgInitialized=!1}registerEvents(){this.onAfterAppendSlide&&this._elementRef.nativeElement.addEventListener("lgAfterAppendSlide",e=>{this.onAfterAppendSlide&&this.onAfterAppendSlide(e.detail)}),this.onInit&&this._elementRef.nativeElement.addEventListener("lgInit",e=>{this.onInit&&this.onInit(e.detail)}),this.onHasVideo&&this._elementRef.nativeElement.addEventListener("lgHasVideo",e=>{this.onHasVideo&&this.onHasVideo(e.detail)}),this.onContainerResize&&this._elementRef.nativeElement.addEventListener("lgContainerResize",e=>{this.onContainerResize&&this.onContainerResize(e.detail)}),this.onAfterAppendSubHtml&&this._elementRef.nativeElement.addEventListener("lgAfterAppendSubHtml",e=>{this.onAfterAppendSubHtml&&this.onAfterAppendSubHtml(e.detail)}),this.onBeforeOpen&&this._elementRef.nativeElement.addEventListener("lgBeforeOpen",e=>{this.onBeforeOpen&&this.onBeforeOpen(e.detail)}),this.onAfterOpen&&this._elementRef.nativeElement.addEventListener("lgAfterOpen",e=>{this.onAfterOpen&&this.onAfterOpen(e.detail)}),this.onSlideItemLoad&&this._elementRef.nativeElement.addEventListener("lgSlideItemLoad",e=>{this.onSlideItemLoad&&this.onSlideItemLoad(e.detail)}),this.onBeforeSlide&&this._elementRef.nativeElement.addEventListener("lgBeforeSlide",e=>{this.onBeforeSlide&&this.onBeforeSlide(e.detail)}),this.onAfterSlide&&this._elementRef.nativeElement.addEventListener("lgAfterSlide",e=>{this.onAfterSlide&&this.onAfterSlide(e.detail)}),this.onPosterClick&&this._elementRef.nativeElement.addEventListener("lgPosterClick",e=>{this.onPosterClick&&this.onPosterClick(e.detail)}),this.onDragStart&&this._elementRef.nativeElement.addEventListener("lgDragStart",e=>{this.onDragStart&&this.onDragStart(e.detail)}),this.onDragMove&&this._elementRef.nativeElement.addEventListener("lgDragMove",e=>{this.onDragMove&&this.onDragMove(e.detail)}),this.onDragEnd&&this._elementRef.nativeElement.addEventListener("lgDragEnd",e=>{this.onDragEnd&&this.onDragEnd(e.detail)}),this.onBeforeNextSlide&&this._elementRef.nativeElement.addEventListener("lgBeforeNextSlide",e=>{this.onBeforeNextSlide&&this.onBeforeNextSlide(e.detail)}),this.onBeforePrevSlide&&this._elementRef.nativeElement.addEventListener("lgBeforePrevSlide",e=>{this.onBeforePrevSlide&&this.onBeforePrevSlide(e.detail)}),this.onBeforeClose&&this._elementRef.nativeElement.addEventListener("lgBeforeClose",e=>{this.onBeforeClose&&this.onBeforeClose(e.detail)}),this.onAfterClose&&this._elementRef.nativeElement.addEventListener("lgAfterClose",e=>{this.onAfterClose&&this.onAfterClose(e.detail)}),this.onRotateLeft&&this._elementRef.nativeElement.addEventListener("lgRotateLeft",e=>{this.onRotateLeft&&this.onRotateLeft(e.detail)}),this.onRotateRight&&this._elementRef.nativeElement.addEventListener("lgRotateRight",e=>{this.onRotateRight&&this.onRotateRight(e.detail)}),this.onFlipHorizontal&&this._elementRef.nativeElement.addEventListener("lgFlipHorizontal",e=>{this.onFlipHorizontal&&this.onFlipHorizontal(e.detail)}),this.onFlipVertical&&this._elementRef.nativeElement.addEventListener("lgFlipVertical",e=>{this.onFlipVertical&&this.onFlipVertical(e.detail)})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq))},n.\u0275cmp=o.Xpm({type:n,selectors:[["lightgallery"]],inputs:{settings:"settings",onAfterAppendSlide:"onAfterAppendSlide",onInit:"onInit",onHasVideo:"onHasVideo",onContainerResize:"onContainerResize",onAfterAppendSubHtml:"onAfterAppendSubHtml",onBeforeOpen:"onBeforeOpen",onAfterOpen:"onAfterOpen",onSlideItemLoad:"onSlideItemLoad",onBeforeSlide:"onBeforeSlide",onAfterSlide:"onAfterSlide",onPosterClick:"onPosterClick",onDragStart:"onDragStart",onDragMove:"onDragMove",onDragEnd:"onDragEnd",onBeforeNextSlide:"onBeforeNextSlide",onBeforePrevSlide:"onBeforePrevSlide",onBeforeClose:"onBeforeClose",onAfterClose:"onAfterClose",onRotateLeft:"onRotateLeft",onRotateRight:"onRotateRight",onFlipHorizontal:"onFlipHorizontal",onFlipVertical:"onFlipVertical"},ngContentSelectors:E5,decls:1,vars:0,template:function(e,i){1&e&&(o.F$t(),o.Hsn(0))},encapsulation:2}),n})(),S5=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();class Qg{constructor(t){this.http=t,this.tileSize=256,this.animationChangeSubj$=new rl.X(null),this.currentAnimationFrame$=this.animationChangeSubj$.asObservable().pipe((0,br.w)(e=>e?(0,an.of)(e).pipe((0,kn.U)(i=>({...i,stepTime:this.animationSpeedStepDuration(i.animationSpeed)})),(0,br.w)(i=>qd(0,i.stepTime*(i.itemCounts+5)).pipe((0,br.w)(()=>qd(0,i.stepTime).pipe((0,uo.q)(i.itemCounts))),(0,kn.U)(r=>({frameNum:r,time:i.timeArray[r].time,pastTime:i.timeArray[r].isPast}))))):(0,an.of)(null)),(0,co.h)(e=>!!e),(0,Ax.B)())}getUrls$(){return this.http.get("https://api.rainviewer.com/public/weather-maps.json").pipe((0,kn.U)(t=>({...t,coverage:`/v2/coverage/0/${this.tileSize}/{z}/{x}/{y}/0/0_0.png`})))}startAnimationTimer(t,e,i){this.animationChangeSubj$.next({itemCounts:t,animationSpeed:e,timeArray:i})}stopAnimationTimer(){this.animationChangeSubj$.next(null)}animationSpeedStepDuration(t){return 1990-Math.log10(t+1)/2*1990+10}}Qg.\u0275fac=function(t){return new(t||Qg)(o.LFG(Nc))},Qg.\u0275prov=o.Yz7({token:Qg,factory:Qg.\u0275fac,providedIn:"root"});const Ql=(0,xi.R7)({source:"Radar Settings",events:{"Enabled changed":(0,xi.Ky)(),"Enabled widget changed":(0,xi.Ky)(),"Type changed":(0,xi.Ky)(),"Color scheme changed":(0,xi.Ky)(),"Enabled snow changed":(0,xi.Ky)(),"Enabled smooth changed":(0,xi.Ky)(),"Animation speed changed":(0,xi.Ky)(),"Opacity changed":(0,xi.Ky)(),"Widget bg color changed":(0,xi.Ky)(),"Widget text color past changed":(0,xi.Ky)(),"Widget text color future changed":(0,xi.Ky)()}}),UO=(0,xi.R7)({source:"Radar widget",events:{"Position Moved":(0,xi.Ky)()}}),e_=(0,xi.R7)({source:"Airspaces settings",events:{"Enabled Changed":(0,xi.Ky)(),"Color changed":(0,xi.Ky)(),"Opacity changed":(0,xi.Ky)(),"Min zoom changed":(0,xi.Ky)()}}),VO=(0,xi.R7)({source:"Notams settings",events:{hide:(0,xi.Ky)()}}),GO=(0,xi.R7)({source:"General settings",events:{"Screen wake lock Enable Changed":(0,xi.Ky)()}}),T0=(0,xi.R7)({source:"Navigation settings",events:{"Minimum activation speed Changed":(0,xi.Ky)(),"Direction line segment seconds":(0,xi.Ky)(),"Direction line segment count":(0,xi.Ky)()}}),A0=n=>n.core,DC=(0,xi.P1)(A0,n=>n?.radar),D5=(0,xi.P1)(A0,n=>n?.radar.enabled),$O=(0,xi.P1)(A0,n=>n?.airSpaces),M5=(0,xi.P1)($O,n=>Object.entries(n).reduce((e,i)=>[...e,{...i[1],id:Number(i[0])}],[])),HO=(0,xi.P1)(A0,n=>n?.notams?.hiddenList??[]),jO=(0,xi.P1)(A0,n=>n?.screenWakeLock.enabled),QI=(0,xi.P1)(A0,n=>n?.navigation),qO=(0,xi.P1)(QI,n=>n?.minActivationSpeedKpH),YO=(0,xi.P1)(QI,n=>n?.directionLineSegmentCount),ZO=(0,xi.P1)(QI,n=>n?.directionLineSegmentSeconds),A5=function(){return{timeStyle:"short"}};function P5(n,t){if(1&n&&(o.TgZ(0,"span",5),o._uU(1),o.ALo(2,"translocoDate"),o.qZA()),2&n){const e=t.ngIf,i=o.oxw(2).ngrxLet;o.Udp("color",e.pastTime?i.widget.textColorPast:i.widget.textColorFuture),o.xp6(1),o.hij("",o.xi3(2,3,1e3*e.time,o.DdM(6,A5))," ")}}function R5(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",3),o.NdJ("cdkDragEnded",function(r){o.CHM(e);const a=o.oxw().ngrxLet,f=o.oxw(2);return o.KtG(f.dragEnded(a.widget.position,r))}),o.TgZ(1,"h6"),o._uU(2),o.qZA(),o.YNc(3,P5,3,7,"span",4),o.ALo(4,"ngrxPush"),o.qZA()}if(2&n){const e=o.oxw().ngrxLet,i=o.oxw().$implicit,r=o.oxw();o.Udp("background",e.widget.background),o.Q6J("cdkDragFreeDragPosition",e.widget.position)("cdkDragStartDelay",1e3),o.xp6(2),o.Oqu(i("settingDialog.radar.type."+e.type)),o.xp6(1),o.Q6J("ngIf",o.lcZ(4,6,r.currentAnimationFrame$))}}function O5(n,t){if(1&n&&(o.ynx(0),o.YNc(1,R5,5,8,"div",2),o.BQk()),2&n){const e=t.ngrxLet;o.xp6(1),o.Q6J("ngIf","coverage"!==e.type&&e.widget.enabled&&e.enabled)}}function L5(n,t){if(1&n&&o.YNc(0,O5,2,1,"ng-container",1),2&n){const e=o.oxw();o.Q6J("ngrxLet",e.radarSettings$)}}class t1{constructor(t,e){this.store=t,this.rainViewer=e,this.radarSettings$=this.store.select(DC),this.currentAnimationFrame$=this.rainViewer.currentAnimationFrame$}dragEnded(t,e){this.store.dispatch(UO.positionMoved({position:{x:t.x+e.distance.x,y:t.y+e.distance.y}}))}}t1.\u0275fac=function(t){return new(t||t1)(o.Y36(xi.yh),o.Y36(Qg))},t1.\u0275cmp=o.Xpm({type:t1,selectors:[["laamap-radar-widget"]],decls:1,vars:0,consts:[["transloco",""],[4,"ngrxLet"],["class","container","cdkDrag","","cdkDragBoundary","body",3,"cdkDragFreeDragPosition","cdkDragStartDelay","background","cdkDragEnded",4,"ngIf"],["cdkDrag","","cdkDragBoundary","body",1,"container",3,"cdkDragFreeDragPosition","cdkDragStartDelay","cdkDragEnded"],["class","value",3,"color",4,"ngIf"],[1,"value"]],template:function(t,e){1&t&&o.YNc(0,L5,1,1,"ng-template",0)},dependencies:[ci,Om,pv,qI,HI,EC],styles:[".container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;border-radius:.3rem;padding:.25rem .75rem;cursor:move;z-index:2}.container[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin:0}.container[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:500}"]});var MC=W(1943),IC=W.n(MC);function k5(n,t){if(1&n&&(o.TgZ(0,"mat-icon",6),o._uU(1," hide_source "),o.qZA()),2&n){const e=o.oxw(2).$implicit;o.Q6J("matTooltip",e("disabledDesc"))}}function F5(n,t){if(1&n&&(o.TgZ(0,"mat-icon",6),o._uU(1," speaker_notes_off "),o.qZA()),2&n){const e=o.oxw(2).$implicit;o.Q6J("matTooltip",e("widgetDisabledDesc"))}}function N5(n,t){if(1&n&&(o.TgZ(0,"mat-option",13),o._uU(1),o.qZA()),2&n){const e=t.$implicit,i=o.oxw(3).$implicit;o.Q6J("value",e),o.xp6(1),o.hij(" ",i("type."+e)," ")}}function B5(n,t){if(1&n&&(o.TgZ(0,"mat-option",13),o._uU(1),o.qZA()),2&n){const e=t.$implicit,i=o.oxw(4).$implicit;o.Q6J("value",e),o.xp6(1),o.hij(" ",i("colorScheme."+e)," ")}}function z5(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"mat-form-field")(1,"mat-label"),o._uU(2),o.qZA(),o.TgZ(3,"mat-select",8),o.NdJ("valueChange",function(r){o.CHM(e);const a=o.oxw(4);return o.KtG(a.colorSchemeChanged(r))}),o.YNc(4,B5,2,2,"mat-option",9),o.qZA()()}if(2&n){const e=o.oxw(2).ngrxLet,i=o.oxw().$implicit,r=o.oxw();o.xp6(2),o.Oqu(i("colorScheme.title")),o.xp6(1),o.Q6J("value",e.colorScheme),o.xp6(1),o.Q6J("ngForOf",r.colorScheme)}}function U5(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"mat-slide-toggle",3),o.NdJ("ngModelChange",function(r){o.CHM(e);const a=o.oxw(4);return o.KtG(a.enableSnow(r))}),o._uU(1),o.qZA()}if(2&n){const e=o.oxw(2).ngrxLet,i=o.oxw().$implicit;o.Q6J("ngModel",e.snow),o.xp6(1),o.hij("",i("snow")," ")}}function V5(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"mat-slide-toggle",3),o.NdJ("ngModelChange",function(r){o.CHM(e);const a=o.oxw(4);return o.KtG(a.enableSmooth(r))}),o._uU(1),o.qZA()}if(2&n){const e=o.oxw(2).ngrxLet,i=o.oxw().$implicit;o.Q6J("ngModel",e.smooth),o.xp6(1),o.hij("",i("smooth")," ")}}function G5(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",14)(1,"span",15),o._uU(2),o.qZA(),o.TgZ(3,"mat-slider",16)(4,"input",17),o.NdJ("ngModelChange",function(r){o.CHM(e);const a=o.oxw(4);return o.KtG(a.animationSpeedChanged(r))}),o.qZA()()()}if(2&n){const e=o.oxw(2).ngrxLet,i=o.oxw().$implicit;o.xp6(2),o.hij(" ",i("animationSpeed")," "),o.xp6(1),o.Q6J("min",0)("max",100),o.xp6(1),o.Q6J("ngModel",e.animationSpeed)}}function $5(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",14)(1,"span",15),o._uU(2),o.qZA(),o.TgZ(3,"mat-slider",16)(4,"input",17),o.NdJ("ngModelChange",function(r){o.CHM(e);const a=o.oxw(4);return o.KtG(a.opacityChanged(r))}),o.qZA()()()}if(2&n){const e=o.oxw(2).ngrxLet,i=o.oxw().$implicit;o.xp6(2),o.hij(" ",i("opacity")," "),o.xp6(1),o.Q6J("min",0)("max",100),o.xp6(1),o.Q6J("ngModel",e.opacity)}}function H5(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",7)(1,"mat-form-field")(2,"mat-label"),o._uU(3),o.qZA(),o.TgZ(4,"mat-select",8),o.NdJ("valueChange",function(r){o.CHM(e);const a=o.oxw(3);return o.KtG(a.typeChanged(r))}),o.YNc(5,N5,2,2,"mat-option",9),o.qZA()(),o.YNc(6,z5,5,3,"mat-form-field",10),o.YNc(7,U5,2,2,"mat-slide-toggle",11),o.YNc(8,V5,2,2,"mat-slide-toggle",11),o.YNc(9,G5,5,4,"div",12),o.YNc(10,$5,5,4,"div",12),o.qZA()}if(2&n){const e=o.oxw().ngrxLet,i=o.oxw().$implicit,r=o.oxw();o.xp6(3),o.Oqu(i("type.title")),o.xp6(1),o.Q6J("value",e.type),o.xp6(1),o.Q6J("ngForOf",r.types),o.xp6(1),o.Q6J("ngIf","radar"===e.type),o.xp6(1),o.Q6J("ngIf","radar"===e.type),o.xp6(1),o.Q6J("ngIf","coverage"!==e.type),o.xp6(1),o.Q6J("ngIf","coverage"!==e.type),o.xp6(1),o.Q6J("ngIf","coverage"!==e.type)}}function j5(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",7)(1,"mat-form-field")(2,"mat-label"),o._uU(3),o.qZA(),o.TgZ(4,"input",19),o.NdJ("ngModelChange",function(r){o.CHM(e);const a=o.oxw(4);return o.KtG(a.widgetBgColorChanged(r))}),o.qZA()(),o.TgZ(5,"mat-form-field")(6,"mat-label"),o._uU(7),o.qZA(),o.TgZ(8,"input",19),o.NdJ("ngModelChange",function(r){o.CHM(e);const a=o.oxw(4);return o.KtG(a.widgetTextColorPastChanged(r))}),o.qZA()(),o.TgZ(9,"mat-form-field")(10,"mat-label"),o._uU(11),o.qZA(),o.TgZ(12,"input",19),o.NdJ("ngModelChange",function(r){o.CHM(e);const a=o.oxw(4);return o.KtG(a.widgetTextColorFutureChanged(r))}),o.qZA()()()}if(2&n){const e=o.oxw(2).ngrxLet,i=o.oxw().$implicit;o.xp6(3),o.Oqu(i("widgetBackgroundColor")),o.xp6(1),o.Q6J("ngModel",e.widget.background),o.xp6(3),o.Oqu(i("widgetPastColor")),o.xp6(1),o.Q6J("ngModel",e.widget.textColorPast),o.xp6(3),o.Oqu(i("widgetFutureColor")),o.xp6(1),o.Q6J("ngModel",e.widget.textColorFuture)}}function q5(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"mat-card",18)(1,"mat-slide-toggle",3),o.NdJ("ngModelChange",function(r){o.CHM(e);const a=o.oxw(3);return o.KtG(a.enableWidget(r))}),o._uU(2),o.qZA(),o.YNc(3,j5,13,6,"div",4),o.qZA()}if(2&n){const e=o.oxw().ngrxLet,i=o.oxw().$implicit;o.xp6(1),o.Q6J("ngModel",e.widget.enabled),o.xp6(1),o.hij("",i("enableWidget")," "),o.xp6(1),o.Q6J("ngIf",e.widget.enabled)}}function Y5(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon"),o._uU(4,"thunderstorm"),o.qZA(),o._uU(5),o.qZA(),o.TgZ(6,"mat-panel-description"),o._uU(7),o.YNc(8,k5,2,1,"mat-icon",2),o.YNc(9,F5,2,1,"mat-icon",2),o.qZA()(),o.TgZ(10,"mat-slide-toggle",3),o.NdJ("ngModelChange",function(r){o.CHM(e);const a=o.oxw(2);return o.KtG(a.enableRadar(r))}),o._uU(11),o.qZA(),o.YNc(12,H5,11,8,"div",4),o.YNc(13,q5,4,3,"mat-card",5),o.qZA()}if(2&n){const e=t.ngrxLet,i=o.oxw().$implicit;o.xp6(5),o.hij("",i("title")," "),o.xp6(2),o.hij(" ",i("description")," "),o.xp6(1),o.Q6J("ngIf",!e.enabled),o.xp6(1),o.Q6J("ngIf",e.enabled&&!e.widget.enabled),o.xp6(1),o.Q6J("ngModel",e.enabled),o.xp6(1),o.hij("",i("enable")," "),o.xp6(1),o.Q6J("ngIf",e.enabled),o.xp6(1),o.Q6J("ngIf",e.enabled&&"coverage"!==e.type)}}function Z5(n,t){if(1&n&&o.YNc(0,Y5,14,8,"mat-expansion-panel",1),2&n){const e=o.oxw();o.Q6J("ngrxLet",e.radar$)}}class n1{constructor(t){this.store=t,this.radar$=this.store.select(DC),this.types=["radar","satellite","coverage"],this.colorScheme=Array.from(Array(9).keys())}enableRadar(t){this.store.dispatch(Ql.enabledChanged({enabled:t}))}enableWidget(t){this.store.dispatch(Ql.enabledWidgetChanged({enabled:t}))}typeChanged(t){this.store.dispatch(Ql.typeChanged({viewType:t}))}colorSchemeChanged(t){this.store.dispatch(Ql.colorSchemeChanged({colorScheme:t}))}enableSnow(t){this.store.dispatch(Ql.enabledSnowChanged({enabled:t}))}enableSmooth(t){this.store.dispatch(Ql.enabledSmoothChanged({enabled:t}))}animationSpeedChanged(t){this.store.dispatch(Ql.animationSpeedChanged({animationSpeed:t??0}))}widgetBgColorChanged(t){this.store.dispatch(Ql.widgetBgColorChanged({color:t}))}widgetTextColorFutureChanged(t){this.store.dispatch(Ql.widgetTextColorFutureChanged({color:t}))}widgetTextColorPastChanged(t){this.store.dispatch(Ql.widgetTextColorPastChanged({color:t}))}opacityChanged(t){this.store.dispatch(Ql.opacityChanged({opacity:t??0}))}}function W5(n,t){if(1&n){const e=o.EpF();o.ynx(0),o.TgZ(1,"div",5),o._uU(2),o.qZA(),o.TgZ(3,"mat-slide-toggle",6),o.NdJ("ngModelChange",function(r){o.CHM(e);const a=o.oxw().$implicit,f=o.oxw(4);return o.KtG(f.setEnabled(a.id,r))}),o._uU(4),o.qZA(),o.TgZ(5,"div",7)(6,"mat-form-field")(7,"mat-label"),o._uU(8),o.qZA(),o.TgZ(9,"input",8),o.NdJ("ngModelChange",function(r){o.CHM(e);const a=o.oxw().$implicit,f=o.oxw(4);return o.KtG(f.setColor(a.id,r))}),o.qZA()(),o.TgZ(10,"mat-form-field")(11,"mat-label"),o._uU(12),o.qZA(),o.TgZ(13,"input",9),o.NdJ("ngModelChange",function(r){o.CHM(e);const a=o.oxw().$implicit,f=o.oxw(4);return o.KtG(f.setOpacity(a.id,r))}),o.qZA()(),o.TgZ(14,"div",10)(15,"span",11),o._uU(16),o.qZA(),o.TgZ(17,"mat-slider",12)(18,"input",13),o.NdJ("ngModelChange",function(r){o.CHM(e);const a=o.oxw().$implicit,f=o.oxw(4);return o.KtG(r&&f.setMinZoom(a.id,r))}),o.qZA()()()(),o.BQk()}if(2&n){const e=o.oxw().$implicit,i=o.oxw().$implicit,r=o.oxw(2).$implicit;o.xp6(2),o.hij(" ",i("typesLong."+e.id)," "),o.xp6(1),o.Q6J("ngModel",e.enabled),o.xp6(1),o.hij("",r("enable")," "),o.xp6(4),o.Oqu(r("color")),o.xp6(1),o.Q6J("ngModel",e.color),o.xp6(3),o.Oqu(r("opacity")),o.xp6(1),o.Q6J("ngModel",e.opacity),o.xp6(3),o.hij(" ",r("zoomRange")," "),o.xp6(2),o.Q6J("ngModel",e.minZoom)}}function X5(n,t){if(1&n&&(o.TgZ(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title"),o._uU(3),o.qZA(),o.TgZ(4,"mat-panel-description"),o._uU(5),o.qZA()(),o.YNc(6,W5,19,9,"ng-container",2),o.qZA()),2&n){const e=t.$implicit,i=o.oxw().$implicit;o.xp6(3),o.Oqu(i("types."+e.id)),o.xp6(2),o.hij(" ",i("typesLong."+e.id)," "),o.xp6(1),o.Q6J("ngIf",e)}}function K5(n,t){if(1&n&&(o.TgZ(0,"mat-accordion"),o.YNc(1,X5,7,3,"mat-expansion-panel",4),o.ALo(2,"ngrxPush"),o.qZA()),2&n){const e=o.oxw(3);o.xp6(1),o.Q6J("ngForOf",o.lcZ(2,2,e.airSpaces$))("ngForTrackBy",e.airSpaceTrack)}}function J5(n,t){1&n&&(o.ynx(0),o.YNc(1,K5,3,4,"mat-accordion",3),o.BQk()),2&n&&(o.xp6(1),o.Q6J("translocoRead","airspaceDialog"))}function Q5(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"mat-expansion-panel",1),o.NdJ("expandedChange",function(r){o.CHM(e);const a=o.oxw();return o.KtG(a.expanded=r)}),o.TgZ(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon"),o._uU(4,"select_all"),o.qZA(),o._uU(5),o.qZA(),o.TgZ(6,"mat-panel-description"),o._uU(7),o.qZA()(),o.YNc(8,J5,2,1,"ng-container",2),o.qZA()}if(2&n){const e=t.$implicit,i=o.oxw();o.Q6J("expanded",i.expanded),o.xp6(5),o.hij("",e("title")," "),o.xp6(2),o.hij(" ",e("description")," "),o.xp6(1),o.Q6J("ngIf",i.expanded)}}n1.\u0275fac=function(t){return new(t||n1)(o.Y36(xi.yh))},n1.\u0275cmp=o.Xpm({type:n1,selectors:[["laamap-radar-settings"]],decls:1,vars:0,consts:[["transloco","","translocoRead","settingDialog.radar"],[4,"ngrxLet"],[3,"matTooltip",4,"ngIf"],[3,"ngModel","ngModelChange"],["class","settings",4,"ngIf"],["class","widgetSettings",4,"ngIf"],[3,"matTooltip"],[1,"settings"],[3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngModel","ngModelChange",4,"ngIf"],["class","labeled-slider mat-form-field-appearance-legacy mat-form-field-can-float mat-form-field-should-float",4,"ngIf"],[3,"value"],[1,"labeled-slider","mat-form-field-appearance-legacy","mat-form-field-can-float","mat-form-field-should-float"],[1,"mat-form-field-label"],[3,"min","max"],["matSliderThumb","",3,"ngModel","ngModelChange"],[1,"widgetSettings"],["matInput","","type","color",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&o.YNc(0,Z5,1,1,"ng-template",0)},dependencies:[rs,ci,z,uh,Tg,Om,Fw,I,g0,f0,Sm,Sp,Vg,Dm,gi,RE,pN,Tw,tR,YP,LE,qI],styles:["mat-panel-description[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-inline-start:auto}.settings[_ngcontent-%COMP%]{margin-top:1rem;display:grid;grid-template-columns:repeat(auto-fit,minmax(10rem,1fr));column-gap:1rem;align-items:center}.settings[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{margin-bottom:1rem}.settings[_ngcontent-%COMP%]   .labeled-slider[_ngcontent-%COMP%]{position:relative}.settings[_ngcontent-%COMP%]   .labeled-slider[_ngcontent-%COMP%]   mat-slider[_ngcontent-%COMP%]{width:100%}mat-panel-description[_ngcontent-%COMP%]{display:none}@media screen and (min-width: 500px){mat-panel-description[_ngcontent-%COMP%]{display:flex}}"]});class r1{constructor(t){this.store=t,this.airSpaces$=this.store.select(M5),this.expanded=!1}setEnabled(t,e){this.store.dispatch(e_.enabledChanged({airspaceType:t,enabled:e}))}setColor(t,e){this.store.dispatch(e_.colorChanged({airspaceType:t,color:e}))}setOpacity(t,e){this.store.dispatch(e_.opacityChanged({airspaceType:t,opacity:e}))}setMinZoom(t,e){this.store.dispatch(e_.minZoomChanged({airspaceType:t,minZoom:e}))}airSpaceTrack(t,e){return e.id}}r1.\u0275fac=function(t){return new(t||r1)(o.Y36(xi.yh))},r1.\u0275cmp=o.Xpm({type:r1,selectors:[["laamap-airspaces-settings"]],decls:1,vars:0,consts:[["transloco","","translocoRead","settingDialog.airspaces"],[3,"expanded","expandedChange"],[4,"ngIf"],[4,"transloco","translocoRead"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"description"],[3,"ngModel","ngModelChange"],[1,"settings"],["matInput","","type","color",3,"ngModel","ngModelChange"],["matInput","","type","number","min","0","max","1","step","0.05",3,"ngModel","ngModelChange"],[1,"labeled-slider","mat-form-field-appearance-legacy","mat-form-field-can-float","mat-form-field-should-float"],[1,"mat-form-field-label"],["min","0","max","24"],["matSliderThumb","",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&o.YNc(0,Q5,9,4,"ng-template",0)},dependencies:[rs,ci,z,Nv,uh,Vv,Uv,Tg,Om,I,g0,f0,Mm,Sm,Sp,Vg,Dm,gi,RE,YP,LE,EC],styles:["mat-panel-description[_ngcontent-%COMP%]{display:none}mat-icon[_ngcontent-%COMP%]{flex-shrink:0}.settings[_ngcontent-%COMP%]{margin-top:1rem;display:grid;grid-template-columns:repeat(auto-fit,minmax(10rem,1fr));column-gap:1rem;align-items:center}.labeled-slider[_ngcontent-%COMP%]{position:relative}.labeled-slider[_ngcontent-%COMP%]   mat-slider[_ngcontent-%COMP%]{width:100%}.labeled-slider[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{top:.8rem}input[type=color][_ngcontent-%COMP%]{height:1rem}@media screen and (min-width: 500px){mat-panel-description[_ngcontent-%COMP%]{display:flex}.description[_ngcontent-%COMP%]{display:none}}"]});class Ff{constructor(t,e){this.snackBar=t,this.translocoService=e}lock(){Ff.supported?navigator.wakeLock.request("screen").then(t=>{this.wakeLock=t},()=>this.showErrorMsg("wakeLock.lockingError")):this.showErrorMsg("wakeLock.notSupported")}release(){this.wakeLock?.release(),this.wakeLock=void 0}showErrorMsg(t){this.snackBar.open(this.translocoService.translate(t),void 0,{duration:5e3,politeness:"polite"})}}function eV(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"mat-slide-toggle",4),o.NdJ("ngModelChange",function(r){o.CHM(e);const a=o.oxw(2);return o.KtG(a.screenWakeLockEnabledChange(r))}),o._uU(1),o.qZA()}if(2&n){const e=t.ngrxLet,i=o.oxw().$implicit,r=o.oxw();o.Q6J("ngModel",e)("disabled",!r.screenWakeLockSupported&&!e),o.xp6(1),o.hij("",i("screenWakeLockEnabled")," ")}}function tV(n,t){if(1&n&&(o.TgZ(0,"mat-icon",5),o._uU(1," info "),o.qZA()),2&n){const e=o.oxw().$implicit;o.Q6J("matTooltip",e("notSupported"))}}function nV(n,t){if(1&n&&(o.TgZ(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon"),o._uU(4,"tune"),o.qZA(),o._uU(5),o.qZA(),o.TgZ(6,"mat-panel-description"),o._uU(7),o.qZA()(),o.TgZ(8,"div",1),o.YNc(9,eV,2,3,"mat-slide-toggle",2),o.YNc(10,tV,2,1,"mat-icon",3),o.qZA()()),2&n){const e=t.$implicit,i=o.oxw();o.xp6(5),o.hij("",e("title")," "),o.xp6(2),o.hij(" ",e("description"),""),o.xp6(2),o.Q6J("ngrxLet",i.screenWakeLockEnabled$),o.xp6(1),o.Q6J("ngIf",!i.screenWakeLockSupported)}}Ff.supported="wakeLock"in navigator,Ff.\u0275fac=function(t){return new(t||Ff)(o.LFG(KP),o.LFG(Ry))},Ff.\u0275prov=o.Yz7({token:Ff,factory:Ff.\u0275fac,providedIn:"root"});class o1{constructor(t){this.store=t,this.screenWakeLockEnabled$=this.store.select(jO),this.screenWakeLockSupported=Ff.supported}screenWakeLockEnabledChange(t){this.store.dispatch(GO.screenWakeLockEnableChanged({enabled:t}))}}function iV(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon"),o._uU(4,"navigation"),o.qZA(),o._uU(5),o.qZA(),o.TgZ(6,"mat-panel-description"),o._uU(7),o.qZA()(),o.TgZ(8,"mat-form-field")(9,"mat-label"),o._uU(10),o.qZA(),o.TgZ(11,"input",1),o.NdJ("ngModelChange",function(r){o.CHM(e);const a=o.oxw();return o.KtG(a.setMinActivationSpeed(r))}),o.ALo(12,"async"),o.qZA()(),o.TgZ(13,"mat-accordion")(14,"mat-expansion-panel")(15,"mat-expansion-panel-header")(16,"mat-panel-title"),o._uU(17),o.qZA()(),o.TgZ(18,"div",2)(19,"mat-form-field")(20,"mat-label"),o._uU(21),o.qZA(),o.TgZ(22,"input",3),o.NdJ("ngModelChange",function(r){o.CHM(e);const a=o.oxw();return o.KtG(a.setDirectionLineSegmentSeconds(r))}),o.ALo(23,"async"),o.qZA()(),o.TgZ(24,"mat-form-field")(25,"mat-label"),o._uU(26),o.qZA(),o.TgZ(27,"input",4),o.NdJ("ngModelChange",function(r){o.CHM(e);const a=o.oxw();return o.KtG(a.setDirectionLineSegmentCount(r))}),o.ALo(28,"async"),o.qZA()()()()()()}if(2&n){const e=t.$implicit,i=o.oxw();o.xp6(5),o.hij("",e("title")," "),o.xp6(2),o.hij(" ",e("description"),""),o.xp6(3),o.Oqu(e("minActivationSpeed")),o.xp6(1),o.Q6J("ngModel",o.lcZ(12,9,i.minActivationSpeed$)),o.xp6(6),o.Oqu(e("directionLine")),o.xp6(4),o.Oqu(e("directionLineSegmentSeconds")),o.xp6(1),o.Q6J("ngModel",o.lcZ(23,11,i.directionLineSegmentSeconds$)),o.xp6(4),o.Oqu(e("directionLineSegmentCount")),o.xp6(1),o.Q6J("ngModel",o.lcZ(28,13,i.directionLineSegmentCount$))}}o1.\u0275fac=function(t){return new(t||o1)(o.Y36(xi.yh))},o1.\u0275cmp=o.Xpm({type:o1,selectors:[["laamap-general-settings"]],decls:1,vars:0,consts:[["transloco","","translocoRead","settingDialog.general"],[1,"row"],[3,"ngModel","disabled","ngModelChange",4,"ngrxLet"],[3,"matTooltip",4,"ngIf"],[3,"ngModel","disabled","ngModelChange"],[3,"matTooltip"]],template:function(t,e){1&t&&o.YNc(0,nV,11,4,"ng-template",0)},dependencies:[ci,uh,Tg,Om,I,Sm,Sp,Vg,Dm,RE,tR,qI],styles:[".row[_ngcontent-%COMP%]{display:flex;align-items:center}.row[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{flex-shrink:0}mat-panel-description[_ngcontent-%COMP%]{display:none}@media screen and (min-width: 500px){mat-panel-description[_ngcontent-%COMP%]{display:flex}}"]});class s1{constructor(t){this.store=t,this.minActivationSpeed$=this.store.select(qO),this.directionLineSegmentSeconds$=this.store.select(ZO),this.directionLineSegmentCount$=this.store.select(YO)}setMinActivationSpeed(t){this.store.dispatch(T0.minimumActivationSpeedChanged({minActivationSpeedKpH:t}))}setDirectionLineSegmentSeconds(t){this.store.dispatch(T0.directionLineSegmentSeconds({seconds:t}))}setDirectionLineSegmentCount(t){this.store.dispatch(T0.directionLineSegmentCount({count:t}))}}function rV(n,t){if(1&n&&(o.TgZ(0,"h1",1),o._uU(1),o.qZA(),o.TgZ(2,"div",2)(3,"mat-accordion"),o._UZ(4,"laamap-general-settings")(5,"laamap-airspaces-settings")(6,"laamap-navigation-settings")(7,"laamap-radar-settings"),o.qZA()(),o.TgZ(8,"div",3)(9,"button",4),o._uU(10),o.qZA()()),2&n){const e=t.$implicit;o.xp6(1),o.Oqu(e("title")),o.xp6(7),o.Q6J("align","end"),o.xp6(1),o.Q6J("mat-dialog-close",!1),o.xp6(1),o.hij(" ",e("close")," ")}}s1.\u0275fac=function(t){return new(t||s1)(o.Y36(xi.yh))},s1.\u0275cmp=o.Xpm({type:s1,selectors:[["laamap-navigation-settings"]],decls:1,vars:0,consts:[["transloco","","translocoRead","settingDialog.navigation"],["matInput","","type","number","min","1","max","1000","step","1",3,"ngModel","ngModelChange"],[1,"fields"],["matInput","","type","number","min","1","max","3600","step","1",3,"ngModel","ngModelChange"],["matInput","","type","number","min","1","max","100","step","1",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&o.YNc(0,iV,29,15,"ng-template",0)},dependencies:[z,Nv,uh,Vv,Uv,Tg,Om,I,g0,f0,Mm,Sm,Sp,Vg,Dm,gi,Hi],styles:[".fields[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(10rem,1fr));column-gap:1rem;align-items:center}mat-panel-description[_ngcontent-%COMP%]{display:none}@media screen and (min-width: 500px){mat-panel-description[_ngcontent-%COMP%]{display:flex}}"]});class a1{}a1.\u0275fac=function(t){return new(t||a1)},a1.\u0275cmp=o.Xpm({type:a1,selectors:[["laamap-settings-dialog"]],decls:1,vars:0,consts:[["transloco","","translocoRead","settingDialog"],["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions","",3,"align"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(t,e){1&t&&o.YNc(0,rV,11,4,"ng-template",0)},dependencies:[Om,Cm,l0,_x,yx,Bg,Mm,n1,r1,o1,s1],styles:["mat-accordion[_ngcontent-%COMP%]{display:block;margin:1rem 0}"]});class Ld{constructor(t,e){this.transloco=t,this.dialog=e,this.movedSubj$=new rl.X(null),this.loadedSubj$=new rl.X(!1),this.geolocationSubj$=new rl.X(null),this.tileStyleUrl=`https://api.maptiler.com/maps/topo-v2/style.json?key=${{NODE_ENV:"production",NX_CLI_SET:"true",NX_LOAD_DOT_ENV_FILES:"true",NX_INVOKED_BY_RUNNER:"true",NX_WORKSPACE_ROOT:"/root/laamap",NX_TERMINAL_OUTPUT_PATH:"/root/laamap/node_modules/.cache/nx/terminalOutputs/27cfb34ba81a233f54e3d7239ce6fc818f600d2533c251d35155bb42c612f517",NX_STREAM_OUTPUT:"true",NX_TASK_TARGET_PROJECT:"mapview",NX_TASK_HASH:"27cfb34ba81a233f54e3d7239ce6fc818f600d2533c251d35155bb42c612f517"}.NX_MAP_TILES_KEY??"MISSING_KEY"}`,this.instance=new MC.Map({container:"map",style:this.tileStyleUrl,center:[19.471558112191815,48.704923970323705],zoom:7,attributionControl:!1,maxPitch:85}),this.addTranslatedControlsToMap(),this.setupRotate(),this.geolocation$=this.geolocationSubj$.asObservable(),this.moved$=this.movedSubj$.asObservable(),this.loaded$=this.loadedSubj$.asObservable(),this.instance?.on("move",()=>{this.movedSubj$.next(null)}),this.instance?.on("load",()=>{this.loadedSubj$.next(!0)})}setupRotate(){this.instance.on("rotate",t=>document.documentElement.style.setProperty("--bearing",`${t.target.getBearing()}`))}addTranslatedControlsToMap(){this.transloco.selectTranslateObject("mapView").pipe((0,uo.q)(1)).subscribe({next:t=>{this.instance._locale={...this.instance._locale,"GeolocateControl.FindMyLocation":t.findMyLocation,"GeolocateControl.LocationNotAvailable":t.locationNotAvailable,"NavigationControl.ResetBearing":t.resetBearing,"NavigationControl.ZoomIn":t.zoomIn,"NavigationControl.ZoomOut":t.zoomOut,"SettingControl.Settings":t.settings},this.addControlsToMap()}})}addControlsToMap(){this.addSettingsControl(),this.addGeoLocateControl(),this.instance.addControl(new(IC().NavigationControl)({showCompass:!0,showZoom:!0,visualizePitch:!0})),this.instance.addControl(new(IC().AttributionControl)({customAttribution:'<a href="https://www.rainviewer.com/"; target="_blank">Rain viewer</a>'}),"bottom-right"),this.instance.addControl(new(IC().ScaleControl)({}),"bottom-right")}addGeoLocateControl(){const t=new(IC().GeolocateControl)({trackUserLocation:!0,positionOptions:{enableHighAccuracy:!0},showUserLocation:!0,showAccuracyCircle:!0});t.on("geolocate",e=>this.geolocationSubj$.next(e)),this.instance.addControl(t)}addSettingsControl(){const t=document.createElement("div"),e=document.createElement("button");t.appendChild(e),t.classList.add("maplibregl-ctrl","maplibregl-ctrl-group"),e.style.fontFamily="Material Icons",e.style.fontSize="20px",e.textContent="settings",e.title=this.instance._getUIString("SettingControl.Settings"),e.addEventListener("click",()=>this.settingsClicked()),this.instance.addControl({onAdd:()=>t,onRemove:()=>t.parentNode?.removeChild(t),getDefaultPosition:()=>"top-right"})}settingsClicked(){this.dialog.open(a1,{width:"100%",id:"settingDialog"}).afterClosed()}}Ld.\u0275fac=function(t){return new(t||Ld)(o.LFG(Ry),o.LFG(Em))},Ld.\u0275prov=o.Yz7({token:Ld,factory:Ld.\u0275fac,providedIn:"root"});class km{constructor(t){this.mapService=t}decodeGeoJsonProperties(t){return t&&Object.entries(t).map(([e,i])=>"string"==typeof i&&(i.startsWith("[")||i.startsWith("{"))?[e,JSON.parse(i)]:[e,i]).reduce((e,[i,r])=>({...e,[i]:r}),{})}loadImageToMap$(t,e,i){const r=new Image,a=ac(r,"load").pipe(no(()=>t.addImage(e,r)),(0,kn.U)(()=>!0),(0,uo.q)(1));return r.src=i,a}metersToPixels(t){const i=(this.mapService.instance.getCanvas().clientHeight??0)/2,r=this.mapService.instance.unproject([0,i]),a=this.mapService.instance.unproject([100,i]);if(r&&a){const f=r?.distanceTo(a);return 100*t/f}return 0}}km.\u0275fac=function(t){return new(t||km)(o.LFG(Ld))},km.\u0275prov=o.Yz7({token:km,factory:km.\u0275fac,providedIn:"root"});class Ly{constructor(t,e){this.store=t,this.mapService=e,this.navigationMinSpeedHit$=So([this.store.select(qO),this.mapService.geolocation$]).pipe((0,kn.U)(([i,r])=>i<=3.6*(r?.coords.speed??0)))}}function oV(n,t){1&n&&o._UZ(0,"div",3)}function sV(n,t){if(1&n&&(o.TgZ(0,"div")(1,"div",1),o.YNc(2,oV,1,0,"div",2),o.qZA()()),2&n){const e=t.ngIf,i=o.oxw();o.xp6(1),o.Udp("left",e.currentPxPosition.x,"px")("top",e.currentPxPosition.y,"px")("--segment-size",e.segmentSize)("--heading",e.heading),o.xp6(1),o.Q6J("ngForOf",e.segmentsArray)("ngForTrackBy",i.trackBy)}}Ly.\u0275fac=function(t){return new(t||Ly)(o.LFG(xi.yh),o.LFG(Ld))},Ly.\u0275prov=o.Yz7({token:Ly,factory:Ly.\u0275fac,providedIn:"root"});class l1{constructor(t,e,i,r){this.store=t,this.mapHelperFunctionsService=e,this.mapService=i,this.navigationService=r,this.ds$=So([this.navigationService.navigationMinSpeedHit$,this.mapService.geolocation$,this.mapService.moved$]).pipe(KI(()=>this.store.select(ZO)),KI(()=>this.store.select(YO)),(0,kn.U)(([[[a,f],b],S])=>a&&f?.coords.longitude&&f?.coords.latitude?{segmentSize:this.mapHelperFunctionsService.metersToPixels((f.coords.speed??0)*b),segmentsArray:Array.from(Array(S).keys()),heading:f.coords.heading,currentPxPosition:this.mapService.instance.project([f.coords.longitude,f.coords.latitude])}:null))}trackBy(t,e){return e}}l1.\u0275fac=function(t){return new(t||l1)(o.Y36(xi.yh),o.Y36(km),o.Y36(Ld),o.Y36(Ly))},l1.\u0275cmp=o.Xpm({type:l1,selectors:[["laamap-on-map-direction-line"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"direction-line"],["class","segment",4,"ngFor","ngForOf","ngForTrackBy"],[1,"segment"]],template:function(t,e){1&t&&(o.YNc(0,sV,3,10,"div",0),o.ALo(1,"ngrxPush")),2&t&&o.Q6J("ngIf",o.lcZ(1,1,e.ds$))},dependencies:[rs,ci,EC],styles:["[_nghost-%COMP%]{position:absolute;top:0;left:-.125rem;pointer-events:none}.direction-line[_ngcontent-%COMP%]{position:absolute;transform:translateY(-100%) rotate(calc((var(--bearing) - var(--heading)) * -1deg));transform-origin:bottom}.segment[_ngcontent-%COMP%]{width:.25rem;height:calc(var(--segment-size) * 1px);background-color:var(--direction-line-color);border:1px solid var(--direction-line-color)}.segment[_ngcontent-%COMP%]:nth-child(2n+1){background-color:var(--direction-line-odd-color)}"],changeDetection:0});class c1{}c1.\u0275fac=function(t){return new(t||c1)},c1.\u0275cmp=o.Xpm({type:c1,selectors:[["laamap-root"]],decls:2,vars:0,template:function(t,e){1&t&&o._UZ(0,"laamap-radar-widget")(1,"laamap-on-map-direction-line")},dependencies:[t1,l1]});class P0{constructor(t,e){this.http=t,this.baseHref=e}getTranslation(t){return this.http.get(`${this.baseHref}assets/i18n/${t}.json`)}}P0.\u0275fac=function(t){return new(t||P0)(o.LFG(Nc),o.LFG(oe))},P0.\u0275prov=o.Yz7({token:P0,factory:P0.\u0275fac,providedIn:"root"});class R0{}function eT(n,t,e){return wm(()=>n()?t:e)}function WO(n,t,e,i,r,a,f){try{var b=n[a](f),S=b.value}catch(M){return void e(M)}b.done?t(S):Promise.resolve(S).then(i,r)}R0.\u0275fac=function(t){return new(t||R0)},R0.\u0275mod=o.oAB({type:R0}),R0.\u0275inj=o.cJS({providers:[{provide:Py,useValue:function ZU(n=vC){return{...vC,...n}}({availableLangs:["en","sk"],defaultLang:"sk",prodMode:true})},{provide:J2,useClass:P0}],imports:[h4]});class O0{logErrorMsg(t,e){console.error(t,e)}}O0.\u0275fac=function(t){return new(t||O0)},O0.\u0275prov=o.Yz7({token:O0,factory:O0.\u0275fac,providedIn:"root"});class L0{constructor(t,e,i){this.mapService=t,this.navigationService=e,this.logger=i,this.compassHeadingSubj$=new rl.X(0),this.gpsHeading$=this.mapService.geolocation$.pipe((0,co.h)(r=>!isNaN(r?.coords.heading)),(0,kn.U)(r=>r?.coords.heading??0)),this.initCompass(),this.heading$=So([this.compassHeadingSubj$,this.gpsHeading$,this.navigationService.navigationMinSpeedHit$]).pipe((0,kn.U)(([r,a,f])=>f?a:r))}initCompass(){this.requestCompassPermission().then(t=>{t&&this.setupCompass()?.start()}).catch(()=>{this.logger.logErrorMsg("mapComponent compass permission","Can not get permission for using compass")})}requestCompassPermission(){return function aV(n){return function(){var t=this,e=arguments;return new Promise(function(i,r){var a=n.apply(t,e);function f(S){WO(a,i,r,f,b,"next",S)}function b(S){WO(a,i,r,f,b,"throw",S)}f(void 0)})}}(function*(){return(yield Promise.all([navigator.permissions?.query({name:"accelerometer"}),navigator.permissions?.query({name:"magnetometer"}),navigator.permissions?.query({name:"gyroscope"})])).every(i=>!i||"granted"===i.state)})()}setupCompass(){if("AbsoluteOrientationSensor"in window){const t=new AbsoluteOrientationSensor({referenceFrame:"screen"});return t.addEventListener("reading",e=>{const i=e.target.quaternion,r=Math.atan2(2*i[0]*i[1]+2*i[2]*i[3],1-2*i[1]*i[1]-2*i[2]*i[2])*(-180/Math.PI);this.compassHeadingSubj$.next(r)}),t}}}L0.\u0275fac=function(t){return new(t||L0)(o.LFG(Ld),o.LFG(Ly),o.LFG(O0))},L0.\u0275prov=o.Yz7({token:L0,factory:L0.\u0275fac,providedIn:"root"});var cc=(()=>{return(n=cc||(cc={}))[n.airport=0]="airport",n[n.gliderSite=1]="gliderSite",n[n.airfieldCivil=2]="airfieldCivil",n[n.internationalAirport=3]="internationalAirport",n[n.heliportMilitary=4]="heliportMilitary",n[n.militaryAerodrome=5]="militaryAerodrome",n[n.ultralightFlyingSite=6]="ultralightFlyingSite",n[n.heliportCivil=7]="heliportCivil",n[n.aerodromeClosed=8]="aerodromeClosed",n[n.ifr=9]="ifr",n[n.airfieldWater=10]="airfieldWater",n[n.landingStrip=11]="landingStrip",n[n.agriculturalLandingStrip=12]="agriculturalLandingStrip",n[n.altiport=13]="altiport",cc;var n})(),Bc=(()=>{return(n=Bc||(Bc={}))[n.meter=0]="meter",n[n.feet=1]="feet",n[n.flightLevel=6]="flightLevel",Bc;var n})(),u1=(()=>{return(n=u1||(u1={}))[n.asphalt=0]="asphalt",n[n.concrete=1]="concrete",n[n.grass=2]="grass",n[n.sand=3]="sand",n[n.water=4]="water",n[n.bituminousTar=5]="bituminousTar",n[n.brick=6]="brick",n[n.macadam=7]="macadam",n[n.stone=8]="stone",n[n.coral=9]="coral",n[n.clay=10]="clay",n[n.laterite=11]="laterite",n[n.gravel=12]="gravel",n[n.earth=13]="earth",n[n.ice=14]="ice",n[n.snow=15]="snow",n[n.laminate=16]="laminate",n[n.metal=17]="metal",n[n.portable=18]="portable",n[n.piercedSteelPlanking=19]="piercedSteelPlanking",n[n.wood=20]="wood",n[n.nonBituminousMix=21]="nonBituminousMix",n[n.unknown=22]="unknown",u1;var n})();class k0{constructor(t){this.transloco=t}transform(t,e){const i=Math.round(this.convert(t.value,t.unit,e));return(e??t.unit)===Bc.flightLevel?`${this.transloco.translate(`shared.altitude.referenceDatum.${t.referenceDatum}`)} ${i}`:`${i}${this.transloco.translate(`shared.altitude.heighUnit.${e??t.unit}`)} ${this.transloco.translate(`shared.altitude.referenceDatum.${t.referenceDatum}`)}`}convert(t,e,i){return null==i||e===i?t:e===Bc.feet&&i===Bc.meter?.3048*t:e===Bc.meter&&i===Bc.feet?t/.3048:e===Bc.feet&&i===Bc.flightLevel?t/100:e===Bc.flightLevel&&i===Bc.feet?100*t:e===Bc.meter&&i===Bc.flightLevel?t/30.48:e===Bc.flightLevel&&i===Bc.meter?30.48*t:0}}function lV(n,t){if(1&n&&(o.TgZ(0,"span"),o._uU(1),o.ALo(2,"altitude"),o.qZA()),2&n){const e=o.oxw().$implicit,i=o.oxw(2);o.xp6(1),o.hij(" (",o.xi3(2,1,e.lowerLimit,i.eHeightUnit.meter),") ")}}function cV(n,t){if(1&n&&(o.TgZ(0,"span"),o._uU(1),o.ALo(2,"altitude"),o.qZA()),2&n){const e=o.oxw().$implicit,i=o.oxw(2);o.xp6(1),o.hij(" (",o.xi3(2,1,e.upperLimit,i.eHeightUnit.meter),") ")}}function uV(n,t){if(1&n&&(o.TgZ(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title"),o._uU(3),o.qZA(),o.TgZ(4,"mat-panel-description"),o._uU(5),o.ALo(6,"altitude"),o.ALo(7,"altitude"),o.qZA()(),o.TgZ(8,"div",6)(9,"span",7),o._uU(10),o.qZA(),o.TgZ(11,"span",8),o._uU(12),o.qZA()(),o.TgZ(13,"div",6)(14,"span",7),o._uU(15),o.qZA(),o.TgZ(16,"span",8),o._uU(17),o.qZA()(),o.TgZ(18,"div",6)(19,"span",7),o._uU(20),o.qZA(),o.TgZ(21,"span",8),o._uU(22),o.ALo(23,"altitude"),o.YNc(24,lV,3,4,"span",9),o.qZA()(),o.TgZ(25,"div",6)(26,"span",7),o._uU(27),o.qZA(),o.TgZ(28,"span",8),o._uU(29),o.ALo(30,"altitude"),o.YNc(31,cV,3,4,"span",9),o.qZA()(),o.TgZ(32,"div",6)(33,"span",7),o._uU(34),o.qZA(),o.TgZ(35,"span",8),o._uU(36),o.qZA()(),o.TgZ(37,"div",6)(38,"span",7),o._uU(39),o.qZA(),o.TgZ(40,"span",8),o._uU(41),o.qZA()(),o.TgZ(42,"div",6)(43,"span",7),o._uU(44),o.qZA(),o.TgZ(45,"span",8),o._uU(46),o.qZA()(),o.TgZ(47,"div",6)(48,"span",7),o._uU(49),o.qZA(),o.TgZ(50,"span",8),o._uU(51),o.qZA()(),o.TgZ(52,"div",6)(53,"span",7),o._uU(54),o.qZA(),o.TgZ(55,"span",8),o._uU(56),o.qZA()(),o.TgZ(57,"div",6)(58,"span",7),o._uU(59),o.qZA(),o.TgZ(60,"span",8),o._uU(61),o.qZA()(),o.TgZ(62,"div",6)(63,"span",7),o._uU(64),o.qZA(),o.TgZ(65,"span",8),o._uU(66),o.qZA()()()),2&n){const e=t.$implicit,i=o.oxw().$implicit,r=o.oxw();o.xp6(3),o.AsE(" ",e.name," (",i("class."+e.icaoClass),") "),o.xp6(2),o.lnq(" ",i("types."+e.type)," ",o.lcZ(6,30,e.lowerLimit)," - ",o.lcZ(7,32,e.upperLimit)," "),o.xp6(5),o.Oqu(i("name")),o.xp6(2),o.Oqu(e.name),o.xp6(3),o.Oqu(i("icaoClass")),o.xp6(2),o.Oqu(i("class."+e.icaoClass)),o.xp6(3),o.Oqu(i("lowerLimit")),o.xp6(2),o.hij("",o.lcZ(23,34,e.lowerLimit)," "),o.xp6(2),o.Q6J("ngIf",e.lowerLimit.unit!==r.eHeightUnit.flightLevel),o.xp6(3),o.Oqu(i("upperLimit")),o.xp6(2),o.hij("",o.lcZ(30,36,e.upperLimit)," "),o.xp6(2),o.Q6J("ngIf",e.upperLimit.unit!==r.eHeightUnit.flightLevel),o.xp6(3),o.Oqu(i("type")),o.xp6(2),o.AsE("",i("types."+e.type)," ",i("typesLong."+e.type),""),o.xp6(3),o.Oqu(i("activity")),o.xp6(2),o.Oqu(i("activities."+e.activity)),o.xp6(3),o.Oqu(i("byNotam")),o.xp6(2),o.Oqu(i("boolean."+e.byNotam)),o.xp6(3),o.Oqu(i("onDemand")),o.xp6(2),o.Oqu(i("boolean."+e.onDemand)),o.xp6(3),o.Oqu(i("onRequest")),o.xp6(2),o.Oqu(i("boolean."+e.onRequest)),o.xp6(3),o.Oqu(i("requestCompliance")),o.xp6(2),o.Oqu(e.requestCompliance),o.xp6(3),o.Oqu(i("specialAgreement")),o.xp6(2),o.Oqu(i("boolean."+e.specialAgreement))}}function dV(n,t){if(1&n&&(o.TgZ(0,"h1",1),o._uU(1),o.qZA(),o.TgZ(2,"mat-accordion",2),o.YNc(3,uV,67,38,"mat-expansion-panel",3),o.qZA(),o.TgZ(4,"div",4)(5,"button",5),o._uU(6),o.qZA()()),2&n){const e=t.$implicit,i=o.oxw();o.xp6(1),o.Oqu(e("title",i.data)),o.xp6(2),o.Q6J("ngForOf",i.data),o.xp6(1),o.Q6J("align","end"),o.xp6(1),o.Q6J("mat-dialog-close",!1),o.xp6(1),o.hij(" ",e("close")," ")}}k0.\u0275fac=function(t){return new(t||k0)(o.Y36(Ry,16))},k0.\u0275pipe=o.Yjl({name:"altitude",type:k0,pure:!0});class d1{constructor(t){this.data=t,this.eHeightUnit=Bc}}d1.\u0275fac=function(t){return new(t||d1)(o.Y36(by))},d1.\u0275cmp=o.Xpm({type:d1,selectors:[["laamap-airspaces-dialog"]],decls:1,vars:0,consts:[["transloco","","translocoRead","airspaceDialog"],["mat-dialog-title",""],["mat-dialog-content",""],[4,"ngFor","ngForOf"],["mat-dialog-actions","",3,"align"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"],[1,"info"],[1,"mat-caption"],[1,"value"],[4,"ngIf"]],template:function(t,e){1&t&&o.YNc(0,dV,7,5,"ng-template",0)},dependencies:[rs,ci,Om,Cm,l0,_x,yx,Bg,Mm,Sm,Sp,Vg,Dm,k0],styles:['.info[_ngcontent-%COMP%]   .mat-caption[_ngcontent-%COMP%]{color:var(--label-color)}.info[_ngcontent-%COMP%]   .mat-caption[_ngcontent-%COMP%]:after{content:": "}.info[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{margin-left:.5rem}mat-accordion[_ngcontent-%COMP%]{display:block;padding-top:1rem;padding-bottom:1rem}mat-panel-title[_ngcontent-%COMP%]{line-clamp:2;-webkit-line-clamp:2;-webkit-box-orient:vertical;display:-moz-box;display:-webkit-box}mat-panel-description[_ngcontent-%COMP%]{display:none}@media screen and (min-width: 500px){.info[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:inline}.info[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{margin-left:0}mat-panel-description[_ngcontent-%COMP%]{display:block}}']});class F0{constructor(t,e,i){this.mapService=t,this.dialog=e,this.mapHelper=i}createLayers(t){this.mapService.instance.addSource("airspacesSource",{type:"geojson",data:t}),this.mapService.instance.addLayer({id:"airspacesLayerBorder",type:"line",source:"airspacesSource"},"notamsLayer"),this.mapService.instance.addLayer({id:"airspacesLayerClick",type:"fill",source:"airspacesSource"},"notamsLayer"),this.addClickListener()}reloadSettings(t){this.mapService.instance.setFilter("airspacesLayerBorder",this.createFilter(t)),this.mapService.instance.setFilter("airspacesLayerClick",this.createFilter(t)),this.mapService.instance.setPaintProperty("airspacesLayerClick","fill-color",this.colors(t)),this.mapService.instance.setPaintProperty("airspacesLayerClick","fill-opacity",this.opacity(t))}addClickListener(){this.mapService.instance.on("click","airspacesLayerClick",t=>{if(this.dialog.getDialogById("notamDialog"))return;const e=t.features?.map(i=>this.mapHelper.decodeGeoJsonProperties(i.properties));this.dialog.open(d1,{width:"100%",data:e,id:"airspaceDialog"})})}createFilter(t){return["all",["in",["get","type"],["literal",Object.entries(t).filter(([,r])=>r.enabled).map(([r])=>Number.parseInt(r))]],[...Object.entries(t).reduce((r,[a,f])=>[...r,Number(a),[">=",["zoom"],f.minZoom]],["match",["number",["get","type"]]]),!0]]}colors(t){return[...Object.keys(t).map(e=>Number.parseInt(e)).reduce((e,i)=>[...e,["==",["get","type"],i],t[i]?.color??"grey"],["case"]),"grey"]}opacity(t){return[...Object.keys(t).map(e=>Number.parseInt(e)).reduce((e,i)=>[...e,["==",["get","type"],i],t[i]?.opacity??.1],["case"]),.1]}}F0.\u0275fac=function(t){return new(t||F0)(o.LFG(Ld),o.LFG(Em),o.LFG(km))},F0.\u0275prov=o.Yz7({token:F0,factory:F0.\u0275fac,providedIn:"root"});var TC=W(655);const hV=o.GuJ,pV=Symbol("__destroy"),XO=Symbol("__decoratorApplied");function KO(n){return"string"==typeof n?Symbol(`__destroy__${n}`):pV}function JO(n,t){n[t]||(n[t]=new Nn.x)}function QO(n,t){n[t]&&(n[t].next(),n[t].complete(),n[t]=null)}function eL(n){n instanceof Ia.w0&&n.unsubscribe()}function tL(n,t){return function(){if(n&&n.call(this),QO(this,KO()),t.arrayName&&function gV(n){Array.isArray(n)&&n.forEach(eL)}(this[t.arrayName]),t.checkProperties)for(const e in this)t.blackList?.includes(e)||eL(this[e])}}function nL(n={}){return t=>{!function fV(n){return!!n[hV]}(t)?function _V(n,t){n.prototype.ngOnDestroy=tL(n.prototype.ngOnDestroy,t)}(t,n):function yV(n,t){const e=n.\u0275pipe;e.onDestroy=tL(e.onDestroy,t)}(t,n),function mV(n){n.prototype[XO]=!0}(t)}}function sL(n,t){return e=>{const i=KO(t);"string"==typeof t?function wV(n,t,e){const i=n[t];JO(n,e),n[t]=function(){i.apply(this,arguments),QO(this,e),n[t]=i}}(n,t,i):JO(n,i);return e.pipe((0,Co.R)(n[i]))}}Symbol("CheckerHasBeenSet");var AC=function(){return AC=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var a in e=arguments[i])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},AC.apply(this,arguments)},CV={scale:1,zoom:!0,actualSize:!0,showZoomInOutIcons:!1,actualSizeIcons:{zoomIn:"lg-zoom-in",zoomOut:"lg-zoom-out"},enableZoomAfter:300,zoomPluginStrings:{zoomIn:"Zoom in",zoomOut:"Zoom out",viewActualSize:"View actual size"}};const DV=function(){function n(t,e){return this.core=t,this.$LG=e,this.settings=AC(AC({},CV),this.core.settings),this}return n.prototype.buildTemplates=function(){var t=this.settings.showZoomInOutIcons?'<button id="'+this.core.getIdName("lg-zoom-in")+'" type="button" aria-label="'+this.settings.zoomPluginStrings.zoomIn+'" class="lg-zoom-in lg-icon"></button><button id="'+this.core.getIdName("lg-zoom-out")+'" type="button" aria-label="'+this.settings.zoomPluginStrings.zoomIn+'" class="lg-zoom-out lg-icon"></button>':"";this.settings.actualSize&&(t+='<button id="'+this.core.getIdName("lg-actual-size")+'" type="button" aria-label="'+this.settings.zoomPluginStrings.viewActualSize+'" class="'+this.settings.actualSizeIcons.zoomIn+' lg-icon"></button>'),this.core.outer.addClass("lg-use-transition-for-zoom"),this.core.$toolbar.first().append(t)},n.prototype.enableZoom=function(t){var e=this,i=this.settings.enableZoomAfter+t.detail.delay;this.$LG("body").first().hasClass("lg-from-hash")&&t.detail.delay?i=0:this.$LG("body").first().removeClass("lg-from-hash"),this.zoomableTimeout=setTimeout(function(){!e.isImageSlide(e.core.index)||(e.core.getSlideItem(t.detail.index).addClass("lg-zoomable"),t.detail.index===e.core.index&&e.setZoomEssentials())},i+30)},n.prototype.enableZoomOnSlideItemLoad=function(){this.core.LGel.on("lgSlideItemLoad.zoom",this.enableZoom.bind(this))},n.prototype.getDragCords=function(t){return{x:t.pageX,y:t.pageY}},n.prototype.getSwipeCords=function(t){return{x:t.touches[0].pageX,y:t.touches[0].pageY}},n.prototype.getDragAllowedAxises=function(t,e){var i=this.core.getSlideItem(this.core.index).find(".lg-image").first().get(),r=0,a=0,f=i.getBoundingClientRect();return t?(r=i.offsetHeight*t,a=i.offsetWidth*t):e?(r=f.height+e*f.height,a=f.width+e*f.width):(r=f.height,a=f.width),{allowX:a>this.containerRect.width,allowY:r>this.containerRect.height}},n.prototype.setZoomEssentials=function(){this.containerRect=this.core.$content.get().getBoundingClientRect()},n.prototype.zoomImage=function(t,e,i,r){if(!(Math.abs(e)<=0)){var S,a=this.containerRect.width/2+this.containerRect.left,f=this.containerRect.height/2+this.containerRect.top+this.scrollTop;1===t&&(this.positionChanged=!1);var M=this.getDragAllowedAxises(0,e),O=M.allowY,N=M.allowX;this.positionChanged&&(S=this.top/(this.scale-e),this.pageX=a-this.left/(this.scale-e),this.pageY=f-S,this.positionChanged=!1);var j,be,U=this.getPossibleSwipeDragCords(e),Ce=a-this.pageX,et=f-this.pageY;if(t-e>1){var Ye=(t-e)/Math.abs(e);j=(Ce=(e<0?-Ce:Ce)+this.left*(Ye+(e<0?-1:1)))/Ye,be=(et=(e<0?-et:et)+this.top*(Ye+(e<0?-1:1)))/Ye}else j=Ce*(Ye=(t-e)*e),be=et*Ye;i&&(N?this.isBeyondPossibleLeft(j,U.minX)?j=U.minX:this.isBeyondPossibleRight(j,U.maxX)&&(j=U.maxX):t>1&&(j<U.minX?j=U.minX:j>U.maxX&&(j=U.maxX)),O?this.isBeyondPossibleTop(be,U.minY)?be=U.minY:this.isBeyondPossibleBottom(be,U.maxY)&&(be=U.maxY):t>1&&(be<U.minY?be=U.minY:be>U.maxY&&(be=U.maxY))),this.setZoomStyles({x:j,y:be,scale:t}),this.left=j,this.top=be,r&&this.setZoomImageSize()}},n.prototype.resetImageTranslate=function(t){if(this.isImageSlide(t)){var e=this.core.getSlideItem(t).find(".lg-image").first();this.imageReset=!1,e.removeClass("reset-transition reset-transition-y reset-transition-x"),this.core.outer.removeClass("lg-actual-size"),e.css("width","auto").css("height","auto"),setTimeout(function(){e.removeClass("no-transition")},10)}},n.prototype.setZoomImageSize=function(){var t=this,e=this.core.getSlideItem(this.core.index).find(".lg-image").first();setTimeout(function(){var i=t.getCurrentImageActualSizeScale();t.scale>=i&&(e.addClass("no-transition"),t.imageReset=!0)},500),setTimeout(function(){var i=t.getCurrentImageActualSizeScale();if(t.scale>=i){var r=t.getDragAllowedAxises(t.scale);e.css("width",e.get().naturalWidth+"px").css("height",e.get().naturalHeight+"px"),t.core.outer.addClass("lg-actual-size"),r.allowX&&r.allowY?e.addClass("reset-transition"):r.allowX&&!r.allowY?e.addClass("reset-transition-x"):!r.allowX&&r.allowY&&e.addClass("reset-transition-y")}},550)},n.prototype.setZoomStyles=function(t){var e=this.core.getSlideItem(this.core.index).find(".lg-img-wrap").first(),i=this.core.getSlideItem(this.core.index).find(".lg-image").first(),r=this.core.outer.find(".lg-current .lg-dummy-img").first();this.scale=t.scale,i.css("transform","scale3d("+t.scale+", "+t.scale+", 1)"),r.css("transform","scale3d("+t.scale+", "+t.scale+", 1)"),e.css("transform","translate3d("+t.x+"px, "+t.y+"px, 0)")},n.prototype.setActualSize=function(t,e){var i=this,r=this.core.galleryItems[this.core.index];this.resetImageTranslate(t),setTimeout(function(){if(r.src&&!i.core.outer.hasClass("lg-first-slide-loading")){var a=i.getCurrentImageActualSizeScale(),f=i.scale;i.scale=i.core.outer.hasClass("lg-zoomed")?1:i.getScale(a),i.setPageCords(e),i.beginZoom(i.scale),i.zoomImage(i.scale,i.scale-f,!0,!0),setTimeout(function(){i.core.outer.removeClass("lg-grabbing").addClass("lg-grab")},10)}},50)},n.prototype.getNaturalWidth=function(t){var e=this.core.getSlideItem(t).find(".lg-image").first(),i=this.core.galleryItems[t].width;return i?parseFloat(i):e.get().naturalWidth},n.prototype.getActualSizeScale=function(t,e){return t>=e?t/e||2:1},n.prototype.getCurrentImageActualSizeScale=function(){var e=this.core.getSlideItem(this.core.index).find(".lg-image").first().get().offsetWidth,i=this.getNaturalWidth(this.core.index)||e;return this.getActualSizeScale(i,e)},n.prototype.getPageCords=function(t){var e={};if(t)e.x=t.pageX||t.touches[0].pageX,e.y=t.pageY||t.touches[0].pageY;else{var i=this.core.$content.get().getBoundingClientRect();e.x=i.width/2+i.left,e.y=i.height/2+this.scrollTop+i.top}return e},n.prototype.setPageCords=function(t){var e=this.getPageCords(t);this.pageX=e.x,this.pageY=e.y},n.prototype.manageActualPixelClassNames=function(){this.core.getElementById("lg-actual-size").removeClass(this.settings.actualSizeIcons.zoomIn).addClass(this.settings.actualSizeIcons.zoomOut)},n.prototype.beginZoom=function(t){return this.core.outer.removeClass("lg-zoom-drag-transition lg-zoom-dragging"),t>1?(this.core.outer.addClass("lg-zoomed"),this.manageActualPixelClassNames()):this.resetZoom(),t>1},n.prototype.getScale=function(t){var e=this.getCurrentImageActualSizeScale();return t<1?t=1:t>e&&(t=e),t},n.prototype.init=function(){var t=this;if(this.settings.zoom){this.buildTemplates(),this.enableZoomOnSlideItemLoad();var e=null;this.core.outer.on("dblclick.lg",function(i){!t.$LG(i.target).hasClass("lg-image")||t.setActualSize(t.core.index,i)}),this.core.outer.on("touchstart.lg",function(i){var r=t.$LG(i.target);1===i.touches.length&&r.hasClass("lg-image")&&(e?(clearTimeout(e),e=null,i.preventDefault(),t.setActualSize(t.core.index,i)):e=setTimeout(function(){e=null},300))}),this.core.LGel.on("lgContainerResize.zoom lgRotateRight.zoom lgRotateLeft.zoom lgFlipHorizontal.zoom lgFlipVertical.zoom",function(){if(t.core.lgOpened&&t.isImageSlide(t.core.index)&&!t.core.touchAction){var i=t.core.getSlideItem(t.core.index).find(".lg-img-wrap").first();t.top=0,t.left=0,t.setZoomEssentials(),t.setZoomSwipeStyles(i,{x:0,y:0}),t.positionChanged=!0}}),this.$LG(window).on("scroll.lg.zoom.global"+this.core.lgId,function(){!t.core.lgOpened||(t.scrollTop=t.$LG(window).scrollTop())}),this.core.getElementById("lg-zoom-out").on("click.lg",function(){if(t.isImageSlide(t.core.index)){var i=0;t.imageReset&&(t.resetImageTranslate(t.core.index),i=50),setTimeout(function(){var r=t.scale-t.settings.scale;r<1&&(r=1),t.beginZoom(r),t.zoomImage(r,-t.settings.scale,!0,!0)},i)}}),this.core.getElementById("lg-zoom-in").on("click.lg",function(){t.zoomIn()}),this.core.getElementById("lg-actual-size").on("click.lg",function(){t.setActualSize(t.core.index)}),this.core.LGel.on("lgBeforeOpen.zoom",function(){t.core.outer.find(".lg-item").removeClass("lg-zoomable")}),this.core.LGel.on("lgAfterOpen.zoom",function(){t.scrollTop=t.$LG(window).scrollTop(),t.pageX=t.core.outer.width()/2,t.pageY=t.core.outer.height()/2+t.scrollTop,t.scale=1}),this.core.LGel.on("lgAfterSlide.zoom",function(i){var r=i.detail.prevIndex;t.scale=1,t.positionChanged=!1,t.resetZoom(r),t.resetImageTranslate(r),t.isImageSlide(t.core.index)&&t.setZoomEssentials()}),this.zoomDrag(),this.pinchZoom(),this.zoomSwipe(),this.zoomableTimeout=!1,this.positionChanged=!1}},n.prototype.zoomIn=function(){if(this.isImageSlide(this.core.index)){var t=this.scale+this.settings.scale;t=this.getScale(t),this.beginZoom(t),this.zoomImage(t,this.settings.scale,!0,!0)}},n.prototype.resetZoom=function(t){this.core.outer.removeClass("lg-zoomed lg-zoom-drag-transition");var e=this.core.getElementById("lg-actual-size"),i=this.core.getSlideItem(void 0!==t?t:this.core.index);e.removeClass(this.settings.actualSizeIcons.zoomOut).addClass(this.settings.actualSizeIcons.zoomIn),i.find(".lg-img-wrap").first().removeAttr("style"),i.find(".lg-image").first().removeAttr("style"),this.scale=1,this.left=0,this.top=0,this.setPageCords()},n.prototype.getTouchDistance=function(t){return Math.sqrt((t.touches[0].pageX-t.touches[1].pageX)*(t.touches[0].pageX-t.touches[1].pageX)+(t.touches[0].pageY-t.touches[1].pageY)*(t.touches[0].pageY-t.touches[1].pageY))},n.prototype.pinchZoom=function(){var t=this,e=0,i=!1,r=1,a=0,f=this.core.getSlideItem(this.core.index);this.core.outer.on("touchstart.lg",function(b){if(f=t.core.getSlideItem(t.core.index),t.isImageSlide(t.core.index)&&2===b.touches.length){if(b.preventDefault(),t.core.outer.hasClass("lg-first-slide-loading"))return;r=t.scale||1,t.core.outer.removeClass("lg-zoom-drag-transition lg-zoom-dragging"),t.setPageCords(b),t.resetImageTranslate(t.core.index),t.core.touchAction="pinch",e=t.getTouchDistance(b)}}),this.core.$inner.on("touchmove.lg",function(b){if(2===b.touches.length&&"pinch"===t.core.touchAction&&(t.$LG(b.target).hasClass("lg-item")||f.get().contains(b.target))){b.preventDefault();var S=t.getTouchDistance(b),M=e-S;if(!i&&Math.abs(M)>5&&(i=!0),i){a=t.scale;var O=Math.max(1,r+.02*-M);t.scale=Math.round(100*(O+Number.EPSILON))/100,t.zoomImage(t.scale,Math.round(100*(t.scale-a+Number.EPSILON))/100,!1,!1)}}}),this.core.$inner.on("touchend.lg",function(b){if("pinch"===t.core.touchAction&&(t.$LG(b.target).hasClass("lg-item")||f.get().contains(b.target))){if(i=!1,e=0,t.scale<=1)t.resetZoom();else{var S=t.getCurrentImageActualSizeScale();if(t.scale>=S){var M=S-t.scale;0===M&&(M=.01),t.zoomImage(S,M,!1,!0)}t.manageActualPixelClassNames(),t.core.outer.addClass("lg-zoomed")}t.core.touchAction=void 0}})},n.prototype.touchendZoom=function(t,e,i,r,a){var f=e.x-t.x,b=e.y-t.y,S=Math.abs(f)/a+1,M=Math.abs(b)/a+1;S>2&&(S+=1),M>2&&(M+=1),f*=S,b*=M;var O=this.core.getSlideItem(this.core.index).find(".lg-img-wrap").first(),N={};N.x=this.left+f,N.y=this.top+b;var U=this.getPossibleSwipeDragCords();(Math.abs(f)>15||Math.abs(b)>15)&&(r&&(this.isBeyondPossibleTop(N.y,U.minY)?N.y=U.minY:this.isBeyondPossibleBottom(N.y,U.maxY)&&(N.y=U.maxY)),i&&(this.isBeyondPossibleLeft(N.x,U.minX)?N.x=U.minX:this.isBeyondPossibleRight(N.x,U.maxX)&&(N.x=U.maxX)),r?this.top=N.y:N.y=this.top,i?this.left=N.x:N.x=this.left,this.setZoomSwipeStyles(O,N),this.positionChanged=!0)},n.prototype.getZoomSwipeCords=function(t,e,i,r,a){var f={};return r?(f.y=this.top+(e.y-t.y),this.isBeyondPossibleTop(f.y,a.minY)?f.y=a.minY-(a.minY-f.y)/6:this.isBeyondPossibleBottom(f.y,a.maxY)&&(f.y=a.maxY+(f.y-a.maxY)/6)):f.y=this.top,i?(f.x=this.left+(e.x-t.x),this.isBeyondPossibleLeft(f.x,a.minX)?f.x=a.minX-(a.minX-f.x)/6:this.isBeyondPossibleRight(f.x,a.maxX)&&(f.x=a.maxX+(f.x-a.maxX)/6)):f.x=this.left,f},n.prototype.isBeyondPossibleLeft=function(t,e){return t>=e},n.prototype.isBeyondPossibleRight=function(t,e){return t<=e},n.prototype.isBeyondPossibleTop=function(t,e){return t>=e},n.prototype.isBeyondPossibleBottom=function(t,e){return t<=e},n.prototype.isImageSlide=function(t){return"image"===this.core.getSlideType(this.core.galleryItems[t])},n.prototype.getPossibleSwipeDragCords=function(t){var e=this.core.getSlideItem(this.core.index).find(".lg-image").first(),i=this.core.mediaContainerPosition.bottom,r=e.get().getBoundingClientRect(),a=r.height,f=r.width;return t&&(a+=t*a,f+=t*f),{minY:(a-this.containerRect.height)/2,maxY:(this.containerRect.height-a)/2+i,minX:(f-this.containerRect.width)/2,maxX:(this.containerRect.width-f)/2}},n.prototype.setZoomSwipeStyles=function(t,e){t.css("transform","translate3d("+e.x+"px, "+e.y+"px, 0)")},n.prototype.zoomSwipe=function(){var M,O,t=this,e={},i={},r=!1,a=!1,f=!1,b=new Date,N=(new Date,this.core.getSlideItem(this.core.index));this.core.$inner.on("touchstart.lg",function(U){if(t.isImageSlide(t.core.index)&&(N=t.core.getSlideItem(t.core.index),(t.$LG(U.target).hasClass("lg-item")||N.get().contains(U.target))&&1===U.touches.length&&t.core.outer.hasClass("lg-zoomed"))){U.preventDefault(),b=new Date,t.core.touchAction="zoomSwipe",O=t.core.getSlideItem(t.core.index).find(".lg-img-wrap").first();var j=t.getDragAllowedAxises(0);f=j.allowY,((a=j.allowX)||f)&&(e=t.getSwipeCords(U)),M=t.getPossibleSwipeDragCords(),t.core.outer.addClass("lg-zoom-dragging lg-zoom-drag-transition")}}),this.core.$inner.on("touchmove.lg",function(U){if(1===U.touches.length&&"zoomSwipe"===t.core.touchAction&&(t.$LG(U.target).hasClass("lg-item")||N.get().contains(U.target))){U.preventDefault(),t.core.touchAction="zoomSwipe",i=t.getSwipeCords(U);var j=t.getZoomSwipeCords(e,i,a,f,M);(Math.abs(i.x-e.x)>15||Math.abs(i.y-e.y)>15)&&(r=!0,t.setZoomSwipeStyles(O,j))}}),this.core.$inner.on("touchend.lg",function(U){if("zoomSwipe"===t.core.touchAction&&(t.$LG(U.target).hasClass("lg-item")||N.get().contains(U.target))){if(U.preventDefault(),t.core.touchAction=void 0,t.core.outer.removeClass("lg-zoom-dragging"),!r)return;r=!1;var j=(new Date).valueOf()-b.valueOf();t.touchendZoom(e,i,a,f,j)}})},n.prototype.zoomDrag=function(){var S,M,O,N,t=this,e={},i={},r=!1,a=!1,f=!1,b=!1;this.core.outer.on("mousedown.lg.zoom",function(U){if(t.isImageSlide(t.core.index)){var j=t.core.getSlideItem(t.core.index);if(t.$LG(U.target).hasClass("lg-item")||j.get().contains(U.target)){S=new Date,N=t.core.getSlideItem(t.core.index).find(".lg-img-wrap").first();var be=t.getDragAllowedAxises(0);b=be.allowY,f=be.allowX,t.core.outer.hasClass("lg-zoomed")&&t.$LG(U.target).hasClass("lg-object")&&(f||b)&&(U.preventDefault(),e=t.getDragCords(U),O=t.getPossibleSwipeDragCords(),r=!0,t.core.outer.removeClass("lg-grab").addClass("lg-grabbing lg-zoom-drag-transition lg-zoom-dragging"))}}}),this.$LG(window).on("mousemove.lg.zoom.global"+this.core.lgId,function(U){if(r){a=!0,i=t.getDragCords(U);var j=t.getZoomSwipeCords(e,i,f,b,O);t.setZoomSwipeStyles(N,j)}}),this.$LG(window).on("mouseup.lg.zoom.global"+this.core.lgId,function(U){if(r){if(M=new Date,r=!1,t.core.outer.removeClass("lg-zoom-dragging"),a&&(e.x!==i.x||e.y!==i.y)){i=t.getDragCords(U);var j=M.valueOf()-S.valueOf();t.touchendZoom(e,i,f,b,j)}a=!1}t.core.outer.removeClass("lg-grabbing").addClass("lg-grab")})},n.prototype.closeGallery=function(){this.resetZoom()},n.prototype.destroy=function(){this.$LG(window).off(".lg.zoom.global"+this.core.lgId),this.core.LGel.off(".lg.zoom"),this.core.LGel.off(".zoom"),clearTimeout(this.zoomableTimeout),this.zoomableTimeout=!1},n}();class h1{constructor(t){this.transloco=t}transform(t){return`${t.value}${this.transloco.translate(`shared.altitude.heighUnit.${t.unit}`)}`}}var N0;function MV(n,t){if(1&n&&(o.TgZ(0,"span",11),o._uU(1),o.qZA()),2&n){const e=t.$implicit,i=o.oxw(2).$implicit;o.xp6(1),o.Oqu(i("trafficTypes."+e))}}function IV(n,t){if(1&n&&(o.TgZ(0,"span"),o._uU(1,"("),o.YNc(2,MV,2,1,"span",10),o._uU(3,")"),o.qZA()),2&n){const e=o.oxw(2);o.xp6(2),o.Q6J("ngForOf",e.data.trafficType)}}function TV(n,t){if(1&n&&(o.TgZ(0,"span"),o._uU(1),o.qZA()),2&n){const e=o.oxw().$implicit;o.xp6(1),o.Oqu(e.name)}}function AV(n,t){if(1&n&&(o.TgZ(0,"span"),o._uU(1),o.qZA()),2&n){const e=o.oxw().$implicit;o.xp6(1),o.hij("(",e.remarks,")")}}function PV(n,t){if(1&n&&(o.TgZ(0,"div",3)(1,"span",4),o._uU(2),o.qZA(),o.TgZ(3,"span",5),o._uU(4),o.YNc(5,TV,2,1,"span",6),o.YNc(6,AV,2,1,"span",6),o.qZA()()),2&n){const e=t.$implicit,i=o.oxw().$implicit;o.xp6(2),o.AsE("",i("frequency")," ",i("frequencies.types."+e.type),""),o.xp6(1),o.ekj("highlight",e.primary),o.xp6(1),o.Oqu(e.value+"MHz "),o.xp6(1),o.Q6J("ngIf",e.name),o.xp6(1),o.Q6J("ngIf",e.remarks)}}function RV(n,t){if(1&n&&(o.TgZ(0,"div",3)(1,"span",4),o._uU(2),o.qZA(),o.TgZ(3,"span",5),o._uU(4),o.qZA()()),2&n){const e=o.oxw().$implicit,i=o.oxw(2).$implicit;o.xp6(2),o.Oqu(i("runwaysDetail.remarks")),o.xp6(2),o.Oqu(e.remarks)}}function OV(n,t){if(1&n&&(o.TgZ(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title"),o._uU(3),o.qZA()(),o.TgZ(4,"div",3)(5,"span",4),o._uU(6),o.qZA(),o.TgZ(7,"span",5),o._uU(8),o.ALo(9,"dimension"),o.qZA()(),o.TgZ(10,"div",3)(11,"span",4),o._uU(12),o.qZA(),o.TgZ(13,"span",5),o._uU(14),o.ALo(15,"dimension"),o.qZA()(),o.TgZ(16,"div",3)(17,"span",4),o._uU(18),o.qZA(),o.TgZ(19,"span",5),o._uU(20),o.qZA()(),o.YNc(21,RV,5,2,"div",13),o.TgZ(22,"div",3)(23,"span",4),o._uU(24),o.qZA(),o.TgZ(25,"span",5),o._uU(26),o.qZA()(),o.TgZ(27,"div",3)(28,"span",4),o._uU(29),o.qZA(),o.TgZ(30,"span",5),o._uU(31),o.qZA()()()),2&n){const e=t.$implicit,i=o.oxw(2).$implicit;o.xp6(2),o.ekj("highlight",e.mainRunway),o.xp6(1),o.hij(" ",e.designator," "),o.xp6(3),o.Oqu(i("runwaysDetail.length")),o.xp6(2),o.Oqu(o.lcZ(9,14,e.dimension.length)),o.xp6(4),o.Oqu(i("runwaysDetail.width")),o.xp6(2),o.Oqu(o.lcZ(15,16,e.dimension.width)),o.xp6(4),o.Oqu(i("runwaysDetail.operation")),o.xp6(2),o.Oqu(i("runwaysDetail.operations."+e.operations)),o.xp6(1),o.Q6J("ngIf",e.remarks),o.xp6(3),o.Oqu(i("runwaysDetail.trueHeading")),o.xp6(2),o.hij("",e.trueHeading,"\xb0"),o.xp6(3),o.Oqu(i("runwaysDetail.turnDirection")),o.xp6(2),o.Oqu(i("runwaysDetail.turnDirections."+e.turnDirection))}}function LV(n,t){if(1&n&&(o.TgZ(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title"),o._uU(3),o.qZA()(),o.TgZ(4,"mat-accordion"),o.YNc(5,OV,32,18,"mat-expansion-panel",12),o.qZA()()),2&n){const e=o.oxw().$implicit,i=o.oxw();o.xp6(3),o.hij(" ",e("runways")," "),o.xp6(2),o.Q6J("ngForOf",i.data.runways)}}function kV(n,t){if(1&n&&(o.TgZ(0,"a",16),o._UZ(1,"img",17),o.qZA()),2&n){const e=t.$implicit,i=o.oxw(3);o.hYB("href","https://www.openaip.net/api/core/airports/",i.data._id,"/images/",e._id,"",o.LSH),o.xp6(1),o.hYB("src","https://www.openaip.net/api/core/airports/",i.data._id,"/images/",e._id,"?loadRfc=false&width=200&height=200",o.LSH),o.s9C("title",e.description),o.s9C("alt",e.description)}}function FV(n,t){if(1&n&&(o.TgZ(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title"),o._uU(3),o.qZA()(),o.TgZ(4,"lightgallery",14),o.YNc(5,kV,2,6,"a",15),o.qZA()()),2&n){const e=o.oxw().$implicit,i=o.oxw();o.xp6(3),o.hij(" ",e("images")," "),o.xp6(1),o.Q6J("settings",i.gallerySettings)("onAfterOpen",i.galleryOpened())("onAfterClose",i.galleryClosed())("onInit",i.onInit),o.xp6(1),o.Q6J("ngForOf",i.data.images)}}function NV(n,t){if(1&n&&(o.TgZ(0,"h1",1),o._uU(1),o.qZA(),o.TgZ(2,"div",2)(3,"div",3)(4,"span",4),o._uU(5),o.qZA(),o.TgZ(6,"span",5),o._uU(7),o.YNc(8,IV,4,1,"span",6),o.qZA()(),o.TgZ(9,"div",3)(10,"span",4),o._uU(11),o.qZA(),o.TgZ(12,"span",5),o._uU(13),o.ALo(14,"altitude"),o.qZA()(),o.TgZ(15,"div",3)(16,"span",4),o._uU(17),o.qZA(),o.TgZ(18,"span",5),o._uU(19),o.qZA()(),o.TgZ(20,"div",3)(21,"span",4),o._uU(22),o.qZA(),o.TgZ(23,"span",5),o._uU(24),o.qZA()(),o.TgZ(25,"div",3)(26,"span",4),o._uU(27),o.qZA(),o.TgZ(28,"span",5),o._uU(29),o.qZA()(),o.YNc(30,PV,7,7,"div",7),o.TgZ(31,"mat-accordion"),o.YNc(32,LV,6,2,"mat-expansion-panel",6),o.YNc(33,FV,6,6,"mat-expansion-panel",6),o.qZA()(),o.TgZ(34,"div",8)(35,"button",9),o._uU(36),o.qZA()()),2&n){const e=t.$implicit,i=o.oxw();o.xp6(1),o.Oqu(e("title",i.data)),o.xp6(4),o.Oqu(e("type")),o.xp6(2),o.hij(" ",e("types."+i.data.type)," "),o.xp6(1),o.Q6J("ngIf",null==i.data.trafficType?null:i.data.trafficType.length),o.xp6(3),o.Oqu(e("elevation")),o.xp6(2),o.Oqu(o.lcZ(14,18,i.data.elevation)),o.xp6(4),o.Oqu(e("magneticDeclination")),o.xp6(2),o.hij("",i.data.magneticDeclination,"\xb0"),o.xp6(3),o.Oqu(e("private")),o.xp6(2),o.Oqu(e("boolean."+i.data.private)),o.xp6(3),o.Oqu(e("skydiveActivity")),o.xp6(2),o.Oqu(e("boolean."+i.data.skydiveActivity)),o.xp6(1),o.Q6J("ngForOf",i.data.frequencies),o.xp6(2),o.Q6J("ngIf",i.data.runways),o.xp6(1),o.Q6J("ngIf",i.data.images),o.xp6(1),o.Q6J("align","end"),o.xp6(1),o.Q6J("mat-dialog-close",!1),o.xp6(1),o.hij(" ",e("close")," ")}}h1.\u0275fac=function(t){return new(t||h1)(o.Y36(Ry,16))},h1.\u0275pipe=o.Yjl({name:"dimension",type:h1,pure:!0});let nT=((N0=class{constructor(t,e,i,r,a){this.data=t,this.dialogRef=e,this.router=i,this.route=r,this.location=a,this.gallerySettings={counter:!1,plugins:[DV],licenseKey:{NODE_ENV:"production",NX_CLI_SET:"true",NX_LOAD_DOT_ENV_FILES:"true",NX_INVOKED_BY_RUNNER:"true",NX_WORKSPACE_ROOT:"/root/laamap",NX_TERMINAL_OUTPUT_PATH:"/root/laamap/node_modules/.cache/nx/terminalOutputs/27cfb34ba81a233f54e3d7239ce6fc818f600d2533c251d35155bb42c612f517",NX_STREAM_OUTPUT:"true",NX_TASK_TARGET_PROJECT:"mapview",NX_TASK_HASH:"27cfb34ba81a233f54e3d7239ce6fc818f600d2533c251d35155bb42c612f517"}.NX_LIGHT_GALLERY_KEY},this.onInit=f=>{this.lightGallery=f.instance},r.fragment.pipe((0,co.h)(f=>!f),sL(this)).subscribe({next:()=>{this.lightGallery?.closeGallery()}})}galleryOpened(){return()=>{this.dialogRef.disableClose=!0,this.router.navigate([],{fragment:`gallery_${Math.random()}`})}}galleryClosed(){return()=>{this.route.snapshot.fragment?.startsWith("gallery_")&&this.location.back(),this.dialogRef.disableClose=!1}}}).\u0275fac=function(t){return new(t||N0)(o.Y36(by),o.Y36(qh),o.Y36(md),o.Y36(Xg),o.Y36(Re))},N0.\u0275cmp=o.Xpm({type:N0,selectors:[["ng-component"]],decls:1,vars:0,consts:[["transloco","","translocoRead","airportDialog"],["mat-dialog-title",""],["mat-dialog-content",""],[1,"info"],[1,"mat-caption"],[1,"value"],[4,"ngIf"],["class","info",4,"ngFor","ngForOf"],["mat-dialog-actions","",3,"align"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"],["class","split-list",4,"ngFor","ngForOf"],[1,"split-list"],[4,"ngFor","ngForOf"],["class","info",4,"ngIf"],[3,"settings","onAfterOpen","onAfterClose","onInit"],[3,"href",4,"ngFor","ngForOf"],[3,"href"],[3,"src","title","alt"]],template:function(t,e){1&t&&o.YNc(0,NV,37,20,"ng-template",0)},dependencies:[rs,ci,Om,Cm,l0,_x,yx,Bg,Mm,Sm,Sp,Vg,C5,k0,h1],styles:['.info[_ngcontent-%COMP%]   .mat-caption[_ngcontent-%COMP%]{display:block;color:var(--label-color)}.info[_ngcontent-%COMP%]   .mat-caption[_ngcontent-%COMP%]:after{content:": "}.info[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{margin-left:.5rem}.info[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]   .split-list[_ngcontent-%COMP%]:not(:first-child):before{content:", "}mat-accordion[_ngcontent-%COMP%]{display:block;margin:1rem 0}.highlight[_ngcontent-%COMP%]{font-weight:500}@media screen and (min-width: 500px){.info[_ngcontent-%COMP%]   .mat-caption[_ngcontent-%COMP%]{display:inline}.info[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{margin-left:0}}'],changeDetection:0}),N0);nT=(0,TC.gn)([nL(),(0,TC.w6)("design:paramtypes",[Object,qh,md,Xg,Re])],nT);class B0{constructor(t,e,i,r){this.mapService=t,this.dialog=e,this.mapHelper=i,this.baseHref=r,this.imageList={runwayPaved:"runway_paved-small.svg",runwayUnpaved:"runway_unpaved-small.svg",ultralightFlyingSite:"light_aircraft-small.svg",airfieldCivil:"af_civil-small.svg",internationalAirport:"apt-small.svg",militaryAerodrome:"ad_mil-small.svg",aerodromeClosed:"ad_closed-small.svg",heliportCivil:"heli_civil-small.svg"}}createLayers(t){this.mapService.instance.addSource("airportSource",{type:"geojson",data:t}),this.addOrientationLayer(),this.addAirportTypeLayer(),this.addListeners()}addRequiredImages$(){return ll(Object.entries(this.imageList).map(([t,e])=>this.mapHelper.loadImageToMap$(this.mapService.instance,t,`${this.baseHref}assets/open-aip-images/${e}`)))}addListeners(){this.mapService.instance.on("mouseenter","airportTypeLayer",()=>{this.mapService.instance.getCanvasContainer().style.cursor="pointer"}),this.mapService.instance.on("mouseleave","airportTypeLayer",()=>{this.mapService.instance.getCanvasContainer().style.cursor=""}),this.mapService.instance.on("click","airportTypeLayer",t=>{if(this.dialog.getDialogById("airspaceDialog")?.close(),this.dialog.getDialogById("notamDialog")?.close(),t.features?.[0]?.properties){const e=this.mapHelper.decodeGeoJsonProperties(t.features?.[0]?.properties);this.dialog.open(nT,{width:"100%",data:e,id:"airportDialog",closeOnNavigation:!1})}})}get zoomLevelBasedFilter(){return["match",["number",["get","type"]],cc.ultralightFlyingSite,[">=",["zoom"],7.2],cc.aerodromeClosed,[">=",["zoom"],7.2],cc.airfieldCivil,[">=",["zoom"],7],!0]}addOrientationLayer(){this.mapService.instance.addLayer({id:"airportOrientationLayer",type:"symbol",source:"airportSource",filter:["all",["in",["get","type"],["literal",[cc.airport,cc.airfieldCivil,cc.internationalAirport,cc.militaryAerodrome,cc.ultralightFlyingSite,cc.ifr,cc.landingStrip,cc.agriculturalLandingStrip,cc.altiport]]],this.zoomLevelBasedFilter],layout:{"icon-image":["case",["get","paved",["get","mainRunway"]],"runwayPaved","runwayUnpaved"],"icon-size":1,"icon-allow-overlap":!0,"icon-rotate":["get","trueHeading",["get","mainRunway"]],"icon-rotation-alignment":"map"}})}addAirportTypeLayer(){this.mapService.instance.addLayer({id:"airportTypeLayer",type:"symbol",source:"airportSource",filter:this.zoomLevelBasedFilter,layout:{"icon-image":["match",["number",["get","type"]],cc.internationalAirport,"internationalAirport",cc.ultralightFlyingSite,"ultralightFlyingSite",cc.airfieldCivil,"airfieldCivil",cc.militaryAerodrome,"militaryAerodrome",cc.aerodromeClosed,"aerodromeClosed",cc.heliportCivil,"heliportCivil","airfieldCivil"],"icon-size":1,"icon-allow-overlap":!0,"text-field":["step",["zoom"],"",9,["get","name"],11,["concat",["get","name"],"\n",["case",["has","value",["get","mainFrequency"]],["concat",["get","value",["get","mainFrequency"]],"MHz"],""]]],"text-optional":!0,"text-anchor":"bottom","text-offset":[0,-1.2],"text-size":12}})}}var z0;function BV(n,t){if(1&n&&(o.TgZ(0,"span",15),o._uU(1),o.qZA()),2&n){const e=o.oxw(2).$implicit;o.xp6(1),o.Oqu(e("trafficValues.visual"))}}function zV(n,t){if(1&n&&(o.TgZ(0,"span",15),o._uU(1),o.qZA()),2&n){const e=o.oxw(2).$implicit;o.xp6(1),o.Oqu(e("trafficValues.instrument"))}}function UV(n,t){if(1&n&&(o.TgZ(0,"span",15),o._uU(1),o.qZA()),2&n){const e=o.oxw(2).$implicit;o.xp6(1),o.Oqu(e("trafficValues.checklist"))}}function VV(n,t){if(1&n&&(o.ynx(0),o._uU(1),o.BQk()),2&n){const e=t.$implicit;o.xp6(1),o.hij(" ",e("2")," ")}}function GV(n,t){if(1&n&&(o.TgZ(0,"span",16),o.YNc(1,VV,2,1,"ng-container",17),o._uU(2),o.qZA()),2&n){const e=o.oxw().$implicit;o.xp6(1),o.Q6J("translocoRead","shared.altitude.referenceDatum"),o.xp6(1),o.hij(" ",e.flightLevelLowerLimit," ")}}function $V(n,t){if(1&n&&(o.TgZ(0,"span",16),o._uU(1),o.qZA()),2&n){const e=o.oxw().$implicit;o.xp6(1),o.Oqu(e.lowerLimit2)}}function HV(n,t){if(1&n&&(o.ynx(0),o._uU(1),o.BQk()),2&n){const e=t.$implicit;o.xp6(1),o.Oqu(e("2"))}}function jV(n,t){if(1&n&&(o.TgZ(0,"span",16),o.YNc(1,HV,2,1,"ng-container",17),o._uU(2),o.qZA()),2&n){const e=o.oxw().$implicit;o.xp6(1),o.Q6J("translocoRead","shared.altitude.referenceDatum"),o.xp6(1),o.hij(" ",e.flightLevelUpperLimit,"")}}function qV(n,t){if(1&n&&(o.TgZ(0,"span",16),o._uU(1),o.qZA()),2&n){const e=o.oxw().$implicit;o.xp6(1),o.Oqu(e.upperLimit2)}}function YV(n,t){if(1&n&&(o.TgZ(0,"div",7)(1,"span",8),o._uU(2),o.qZA(),o.TgZ(3,"span",9),o._uU(4),o.qZA()()),2&n){const e=o.oxw().$implicit,i=o.oxw().$implicit;o.xp6(2),o.Oqu(i("schedule")),o.xp6(2),o.Oqu(e.schedule)}}function ZV(n,t){if(1&n&&(o.TgZ(0,"span",15),o._uU(1),o.qZA()),2&n){const e=o.oxw(2).$implicit;o.xp6(1),o.Oqu(e("purposeValues.checklist"))}}function WV(n,t){if(1&n&&(o.TgZ(0,"span",15),o._uU(1),o.qZA()),2&n){const e=o.oxw(2).$implicit;o.xp6(1),o.Oqu(e("purposeValues.flightOperation"))}}function XV(n,t){if(1&n&&(o.TgZ(0,"span",15),o._uU(1),o.qZA()),2&n){const e=o.oxw(2).$implicit;o.xp6(1),o.Oqu(e("purposeValues.immediateAttention"))}}function KV(n,t){if(1&n&&(o.TgZ(0,"span",15),o._uU(1),o.qZA()),2&n){const e=o.oxw(2).$implicit;o.xp6(1),o.Oqu(e("purposeValues.miscellaneous"))}}function JV(n,t){if(1&n&&(o.TgZ(0,"span",15),o._uU(1),o.qZA()),2&n){const e=o.oxw(2).$implicit;o.xp6(1),o.Oqu(e("purposeValues.preFlightBriefing"))}}function QV(n,t){if(1&n&&(o.TgZ(0,"span",15),o._uU(1),o.qZA()),2&n){const e=o.oxw(2).$implicit;o.xp6(1),o.Oqu(e("scopeValues.checklist"))}}function eG(n,t){if(1&n&&(o.TgZ(0,"span",15),o._uU(1),o.qZA()),2&n){const e=o.oxw(2).$implicit;o.xp6(1),o.Oqu(e("scopeValues.aerodrome"))}}function tG(n,t){if(1&n&&(o.TgZ(0,"span",15),o._uU(1),o.qZA()),2&n){const e=o.oxw(2).$implicit;o.xp6(1),o.Oqu(e("scopeValues.enRoute"))}}function nG(n,t){if(1&n&&(o.TgZ(0,"span",15),o._uU(1),o.qZA()),2&n){const e=o.oxw(2).$implicit;o.xp6(1),o.Oqu(e("scopeValues.navigationWarning"))}}function iG(n,t){if(1&n&&(o.TgZ(0,"div",7)(1,"span",8),o._uU(2),o.qZA(),o.TgZ(3,"span",9),o._uU(4),o.qZA()()),2&n){const e=o.oxw().$implicit,i=o.oxw().$implicit;o.xp6(2),o.Oqu(i("subjectIdentification")),o.xp6(2),o.Oqu(i("subjectIdentificationValues."+e.subjectIdentification))}}function rG(n,t){if(1&n&&(o.TgZ(0,"div",7)(1,"span",8),o._uU(2),o.qZA(),o.TgZ(3,"span",9),o._uU(4),o.qZA()()),2&n){const e=o.oxw().$implicit,i=o.oxw().$implicit;o.xp6(2),o.Oqu(i("subjectCondition")),o.xp6(2),o.Oqu(i("subjectConditionValues."+e.subjectCondition))}}B0.\u0275fac=function(t){return new(t||B0)(o.LFG(Ld),o.LFG(Em),o.LFG(km),o.LFG(oe))},B0.\u0275prov=o.Yz7({token:B0,factory:B0.\u0275fac,providedIn:"root"});const lL=function(){return{dateStyle:"short",timeStyle:"short"}};function oG(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title"),o._uU(3),o.qZA(),o.TgZ(4,"mat-panel-description"),o._uU(5),o.qZA()(),o.TgZ(6,"div")(7,"div",6),o._uU(8),o.qZA(),o.TgZ(9,"mat-expansion-panel")(10,"mat-expansion-panel-header"),o._uU(11),o.qZA(),o.TgZ(12,"div")(13,"div",7)(14,"span",8),o._uU(15),o.qZA(),o.TgZ(16,"span",9),o._uU(17),o.ALo(18,"translocoDate"),o.qZA()(),o.TgZ(19,"div",7)(20,"span",8),o._uU(21),o.qZA(),o.TgZ(22,"span",9),o._uU(23),o.ALo(24,"translocoDate"),o.qZA()(),o.TgZ(25,"div",7)(26,"span",8),o._uU(27),o.qZA(),o.TgZ(28,"span",9),o.YNc(29,BV,2,1,"span",10),o.YNc(30,zV,2,1,"span",10),o.YNc(31,UV,2,1,"span",10),o.qZA()(),o.TgZ(32,"div",7)(33,"span",8),o._uU(34),o.qZA(),o.TgZ(35,"span",9),o.YNc(36,GV,3,2,"span",11),o.YNc(37,$V,2,1,"span",11),o.qZA()(),o.TgZ(38,"div",7)(39,"span",8),o._uU(40),o.qZA(),o.TgZ(41,"span",9),o.YNc(42,jV,3,2,"span",11),o.YNc(43,qV,2,1,"span",11),o.qZA()(),o.YNc(44,YV,5,2,"div",12),o.TgZ(45,"div",7)(46,"span",8),o._uU(47),o.qZA(),o.TgZ(48,"span",9),o.YNc(49,ZV,2,1,"span",10),o.YNc(50,WV,2,1,"span",10),o.YNc(51,XV,2,1,"span",10),o.YNc(52,KV,2,1,"span",10),o.YNc(53,JV,2,1,"span",10),o.qZA()(),o.TgZ(54,"div",7)(55,"span",8),o._uU(56),o.qZA(),o.TgZ(57,"span",9),o.YNc(58,QV,2,1,"span",10),o.YNc(59,eG,2,1,"span",10),o.YNc(60,tG,2,1,"span",10),o.YNc(61,nG,2,1,"span",10),o.qZA()(),o.YNc(62,iG,5,2,"div",12),o.YNc(63,rG,5,2,"div",12),o.qZA(),o.TgZ(64,"div",13),o._uU(65),o.qZA()(),o.TgZ(66,"button",14),o.NdJ("click",function(){const a=o.CHM(e).$implicit,f=o.oxw(2);return o.KtG(f.hide(a.id))}),o._uU(67),o.qZA()()()}if(2&n){const e=t.$implicit,i=o.oxw().$implicit;let r,a;o.xp6(3),o.Oqu(e.id),o.xp6(2),o.Oqu(e.issuer),o.xp6(3),o.Oqu(e.msg),o.xp6(3),o.Oqu(i("description")),o.xp6(4),o.Oqu(i("from")),o.xp6(2),o.Oqu(o.xi3(18,34,e.from,o.DdM(40,lL))),o.xp6(4),o.Oqu(i("to")),o.xp6(2),o.Oqu(o.xi3(24,37,e.to,o.DdM(41,lL))),o.xp6(4),o.Oqu(i("traffic")),o.xp6(2),o.Q6J("ngIf",e.traffic.visual),o.xp6(1),o.Q6J("ngIf",e.traffic.instrument),o.xp6(1),o.Q6J("ngIf",e.traffic.checklist),o.xp6(3),o.Oqu(i("lowerLimit")),o.xp6(2),o.Q6J("ngIf",e.flightLevelLowerLimit||0===e.flightLevelLowerLimit),o.xp6(1),o.Q6J("ngIf",e.lowerLimit2),o.xp6(3),o.Oqu(i("upperLimit")),o.xp6(2),o.Q6J("ngIf",e.flightLevelUpperLimit||0===e.flightLevelUpperLimit),o.xp6(1),o.Q6J("ngIf",e.upperLimit2),o.xp6(1),o.Q6J("ngIf",e.schedule),o.xp6(3),o.Oqu(i("purpose")),o.xp6(2),o.Q6J("ngIf",e.purpose.checklist),o.xp6(1),o.Q6J("ngIf",e.purpose.flightOperation),o.xp6(1),o.Q6J("ngIf",e.purpose.immediateAttention),o.xp6(1),o.Q6J("ngIf",e.purpose.miscellaneous),o.xp6(1),o.Q6J("ngIf",e.purpose.preFlightBriefing),o.xp6(3),o.Oqu(i("scope")),o.xp6(2),o.Q6J("ngIf",e.scope.checklist),o.xp6(1),o.Q6J("ngIf",e.scope.aerodrome),o.xp6(1),o.Q6J("ngIf",e.scope.enRoute),o.xp6(1),o.Q6J("ngIf",e.scope.navigationWarning),o.xp6(1),o.Q6J("ngIf",!(null!=(r=i("subjectIdentificationValues."+e.subjectIdentification))&&r.startsWith("notamsDialog."))),o.xp6(1),o.Q6J("ngIf",!(null!=(a=i("subjectConditionValues."+e.subjectCondition))&&a.startsWith("notamsDialog."))),o.xp6(2),o.Oqu(e.originalMsg),o.xp6(2),o.hij(" ",i("permanentlyHide")," ")}}function sG(n,t){if(1&n&&(o.TgZ(0,"h1",1),o._uU(1),o.qZA(),o.TgZ(2,"mat-accordion",2),o.YNc(3,oG,68,42,"mat-expansion-panel",3),o.ALo(4,"ngrxPush"),o.qZA(),o.TgZ(5,"div",4)(6,"button",5),o._uU(7),o.qZA()()),2&n){const e=t.$implicit,i=o.oxw();o.xp6(1),o.Oqu(e("title")),o.xp6(2),o.Q6J("ngForOf",o.lcZ(4,5,i.nonHiddenNotams$)),o.xp6(2),o.Q6J("align","end"),o.xp6(1),o.Q6J("mat-dialog-close",!1),o.xp6(1),o.hij(" ",e("close")," ")}}let iT=((z0=class{constructor(t,e,i){var n;this.data=t,this.dialogRef=e,this.store=i,this.nonHiddenNotams$=this.store.select((n=this.data,(0,xi.P1)(HO,t=>n.filter(e=>!t.includes(e.id))))),this.nonHiddenNotams$.pipe((0,co.h)(r=>0===r.length),(0,uo.q)(1),sL(this)).subscribe({next:()=>{this.dialogRef.close()}})}hide(t){this.store.dispatch(VO.hide({notamId:t}))}}).\u0275fac=function(t){return new(t||z0)(o.Y36(by),o.Y36(qh),o.Y36(xi.yh))},z0.\u0275cmp=o.Xpm({type:z0,selectors:[["laamap-notams-dialog"]],decls:1,vars:0,consts:[["transloco","","translocoRead","notamsDialog"],["mat-dialog-title",""],["mat-dialog-content",""],[4,"ngFor","ngForOf"],["mat-dialog-actions","",3,"align"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"],[1,"msg"],[1,"info"],[1,"mat-caption"],[1,"value"],["class","split-list",4,"ngIf"],["class","option-list",4,"ngIf"],["class","info",4,"ngIf"],[1,"mat-body-strong","mat-small"],["mat-raised-button","","color","warn",1,"remove",3,"click"],[1,"split-list"],[1,"option-list"],[4,"transloco","translocoRead"]],template:function(t,e){1&t&&o.YNc(0,sG,8,7,"ng-template",0)},dependencies:[rs,ci,Om,Cm,l0,_x,yx,Bg,Mm,Sm,Sp,Vg,Dm,HI,EC],styles:['.msg[_ngcontent-%COMP%]{margin-bottom:1rem;white-space:pre-wrap}.remove[_ngcontent-%COMP%]{float:right;margin-top:1rem}.mat-body-strong[_ngcontent-%COMP%]{white-space:pre-wrap;margin-top:.5rem;font-weight:600;font-family:monospace}.info[_ngcontent-%COMP%]   .mat-caption[_ngcontent-%COMP%]{display:block;color:var(--label-color)}.info[_ngcontent-%COMP%]   .mat-caption[_ngcontent-%COMP%]:after{content:": "}.info[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{margin-left:.5rem}.info[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]   .split-list[_ngcontent-%COMP%]:not(:first-child):before{content:", "}.info[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]   .option-list[_ngcontent-%COMP%]:not(:first-child):before{content:" / "}@media screen and (min-width: 500px){.info[_ngcontent-%COMP%]   .mat-caption[_ngcontent-%COMP%]{display:inline}.info[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{margin-left:0}}']}),z0);iT=(0,TC.gn)([nL(),(0,TC.w6)("design:paramtypes",[Array,qh,xi.yh])],iT);class U0{constructor(t,e,i,r,a){this.mapService=t,this.dialog=e,this.mapHelper=i,this.snackBar=r,this.translocoService=a}createLayers(){this.mapService.instance.addSource("notamsSource",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.mapService.instance.addLayer({id:"notamsLayer",type:"fill",source:"notamsSource",paint:{"fill-color":"#0000ff","fill-opacity":.1,"fill-outline-color":"#0000ff"}}),this.addListeners()}setNotamsGeoJson(t){this.snackBar.open(this.translocoService.translate("notams.loaded"),void 0,{duration:5e3,politeness:"polite"}),this.mapService.instance.getSource("notamsSource").setData(t)}addListeners(){this.mapService.instance.on("click","notamsLayer",t=>{const e=t.features?.map(i=>this.mapHelper.decodeGeoJsonProperties(i.properties));this.dialog.open(iT,{width:"100%",data:e?.map(i=>i.decoded),id:"notamDialog"})})}}U0.\u0275fac=function(t){return new(t||U0)(o.LFG(Ld),o.LFG(Em),o.LFG(km),o.LFG(KP),o.LFG(Ry))},U0.\u0275prov=o.Yz7({token:U0,factory:U0.\u0275fac,providedIn:"root"});class V0{constructor(t,e){this.mapService=t,this.rainViewer=e,this.itemCounts=0}createLayers(t){if(this.deleteLayers(),t){const e=this.getSourceUrls(t);this.itemCounts=e.length,this.createLayersFromUrls(e,"coverage"===t.settings.type),"coverage"!==t.settings.type&&this.startAnimation(t.settings,this.createFrameTimeArray(t))}}deleteLayers(){this.rainViewer.stopAnimationTimer();for(let t=0;t<this.itemCounts;t++)this.mapService.instance.removeLayer(this.getLayerName(t)),this.mapService.instance.removeSource(this.getSourceName(t));this.itemCounts=0}showFrame(t,e){this.mapService.instance.setPaintProperty(this.getLayerName(t-1),"raster-opacity",0),this.mapService.instance.setPaintProperty(this.getLayerName(t),"raster-opacity",e/100)}startAnimation(t,e){this.rainViewer.startAnimationTimer(this.itemCounts,t.animationSpeed,e)}createLayersFromUrls(t,e){t.forEach((i,r)=>{const a=this.getSourceName(r),f=this.getLayerName(r);this.mapService.instance.addSource(a,{type:"raster",tiles:[i],tileSize:this.rainViewer.tileSize}),this.mapService.instance.addLayer({id:f,source:a,type:"raster",paint:{"raster-opacity":e?1:0,"raster-fade-duration":0}})})}createFrameTimeArray(t){return"radar"===t.settings.type?[...t.urls.radar.past.map(e=>({time:e.time,isPast:!0})),...t.urls.radar.nowcast.map(e=>({time:e.time,isPast:!1}))]:("satellite"===t.settings.type&&t.urls.satellite.infrared.map(e=>({time:e.time,isPast:!0})),[])}getSourceUrls(t){return"radar"===t.settings.type?this.getRadarSourceUrls(t):"satellite"===t.settings.type?this.getSatelliteSourceUrls(t):[`${t.urls.host}/${t.urls.coverage}`]}getRadarSourceUrls(t){return[...t.urls.radar.past,...t.urls.radar.nowcast].map(e=>`${t.urls.host}${e.path}/${this.rainViewer.tileSize}/{z}/{x}/{y}/${t.settings.colorScheme}/${t.settings.smooth?1:0}_${t.settings.snow?1:0}.png`)}getSatelliteSourceUrls(t){return t.urls.satellite.infrared.map(e=>`${t.urls.host}${e.path}/${this.rainViewer.tileSize}/{z}/{x}/{y}/0/${t.settings.smooth?1:0}_0.png`)}getSourceName(t){return`rainViewerSource${t<0?t=this.itemCounts-1:t}`}getLayerName(t){return`rainViewerLayer${t<0?t=this.itemCounts-1:t}`}}V0.\u0275fac=function(t){return new(t||V0)(o.LFG(Ld),o.LFG(Qg))},V0.\u0275prov=o.Yz7({token:V0,factory:V0.\u0275fac,providedIn:"root"});var gd=6371008.8,cL={centimeters:100*gd,centimetres:100*gd,degrees:gd/111325,feet:3.28084*gd,inches:39.37*gd,kilometers:gd/1e3,kilometres:gd/1e3,meters:gd,metres:gd,miles:gd/1609.344,millimeters:1e3*gd,millimetres:1e3*gd,nauticalmiles:gd/1852,radians:1,yards:1.0936*gd};function Nm(n,t,e){void 0===e&&(e={});var i={type:"Feature"};return(0===e.id||e.id)&&(i.id=e.id),e.bbox&&(i.bbox=e.bbox),i.properties=t||{},i.geometry=n,i}function f1(n,t,e){if(void 0===e&&(e={}),!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");if(n.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!lT(n[0])||!lT(n[1]))throw new Error("coordinates must contain numbers");return Nm({type:"Point",coordinates:n},t,e)}function p1(n,t,e){void 0===e&&(e={});for(var i=0,r=n;i<r.length;i++){var a=r[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var f=0;f<a[a.length-1].length;f++)if(a[a.length-1][f]!==a[0][f])throw new Error("First and last Position are not equivalent.")}return Nm({type:"Polygon",coordinates:n},t,e)}function sT(n){return n%(2*Math.PI)*180/Math.PI}function aT(n){return n%360*Math.PI/180}function lT(n){return!isNaN(n)&&null!==n&&!Array.isArray(n)}function m1(n,t,e){if(null!==n)for(var i,r,a,f,b,S,M,U,O=0,N=0,j=n.type,be="FeatureCollection"===j,Ce="Feature"===j,et=be?n.features.length:1,Ye=0;Ye<et;Ye++){b=(U=!!(M=be?n.features[Ye].geometry:Ce?n.geometry:n)&&"GeometryCollection"===M.type)?M.geometries.length:1;for(var Be=0;Be<b;Be++){var it=0,At=0;if(null!==(f=U?M.geometries[Be]:M)){S=f.coordinates;var kt=f.type;switch(O=!e||"Polygon"!==kt&&"MultiPolygon"!==kt?0:1,kt){case null:break;case"Point":if(!1===t(S,N,Ye,it,At))return!1;N++,it++;break;case"LineString":case"MultiPoint":for(i=0;i<S.length;i++){if(!1===t(S[i],N,Ye,it,At))return!1;N++,"MultiPoint"===kt&&it++}"LineString"===kt&&it++;break;case"Polygon":case"MultiLineString":for(i=0;i<S.length;i++){for(r=0;r<S[i].length-O;r++){if(!1===t(S[i][r],N,Ye,it,At))return!1;N++}"MultiLineString"===kt&&it++,"Polygon"===kt&&At++}"Polygon"===kt&&it++;break;case"MultiPolygon":for(i=0;i<S.length;i++){for(At=0,r=0;r<S[i].length;r++){for(a=0;a<S[i][r].length-O;a++){if(!1===t(S[i][r][a],N,Ye,it,At))return!1;N++}At++}it++}break;case"GeometryCollection":for(i=0;i<f.geometries.length;i++)if(!1===m1(f.geometries[i],t,e))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function RC(n,t){!function hL(n,t){var e,i,r,a,f,b,S,M,O,N,U=0,j="FeatureCollection"===n.type,be="Feature"===n.type,Ce=j?n.features.length:1;for(e=0;e<Ce;e++){for(M=j?n.features[e].properties:be?n.properties:{},O=j?n.features[e].bbox:be?n.bbox:void 0,N=j?n.features[e].id:be?n.id:void 0,f=(S=!!(b=j?n.features[e].geometry:be?n.geometry:n)&&"GeometryCollection"===b.type)?b.geometries.length:1,r=0;r<f;r++)if(null!==(a=S?b.geometries[r]:b))switch(a.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(a,U,M,O,N))return!1;break;case"GeometryCollection":for(i=0;i<a.geometries.length;i++)if(!1===t(a.geometries[i],U,M,O,N))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,U,M,O,N))return!1;U++}}(n,function(e,i,r,a,f){var S,b=null===e?null:e.type;switch(b){case null:case"Point":case"LineString":case"Polygon":return!1!==t(Nm(e,r,{bbox:a,id:f}),i,0)&&void 0}switch(b){case"MultiPoint":S="Point";break;case"MultiLineString":S="LineString";break;case"MultiPolygon":S="Polygon"}for(var M=0;M<e.coordinates.length;M++)if(!1===t(Nm({type:S,coordinates:e.coordinates[M]},r),i,M))return!1})}function cT(n){var t=[1/0,1/0,-1/0,-1/0];return m1(n,function(e){t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])}),t}cT.default=cT;const mG=cT;function fL(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if("Feature"===n.type&&null!==n.geometry&&"Point"===n.geometry.type)return n.geometry.coordinates;if("Point"===n.type)return n.coordinates}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return n;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function _L(n,t,e){if(void 0===e&&(e={}),!n)throw new Error("point is required");if(!t)throw new Error("polygon is required");var i=fL(n),r=function yG(n){return"Feature"===n.type?n.geometry:n}(t),a=r.type,f=t.bbox,b=r.coordinates;if(f&&!1===function IG(n,t){return t[0]<=n[0]&&t[1]<=n[1]&&t[2]>=n[0]&&t[3]>=n[1]}(i,f))return!1;"Polygon"===a&&(b=[b]);for(var S=!1,M=0;M<b.length&&!S;M++)if(yL(i,b[M][0],e.ignoreBoundary)){for(var O=!1,N=1;N<b[M].length&&!O;)yL(i,b[M][N],!e.ignoreBoundary)&&(O=!0),N++;O||(S=!0)}return S}function yL(n,t,e){var i=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var r=0,a=t.length-1;r<t.length;a=r++){var f=t[r][0],b=t[r][1],S=t[a][0],M=t[a][1];if(n[1]*(f-S)+b*(S-n[0])+M*(n[0]-f)==0&&(f-n[0])*(S-n[0])<=0&&(b-n[1])*(M-n[1])<=0)return!e;b>n[1]!=M>n[1]&&n[0]<(S-f)*(n[1]-b)/(M-b)+f&&(i=!i)}return i}W(5943),W(1335);var bL=new ArrayBuffer(16);new Float64Array(bL),new Uint32Array(bL),W(3544),function(){function n(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var i=this.points[e],r=this.points[e+1];this.centers.push({x:(i.x+r.x)/2,y:(i.y+r.y)/2,z:(i.z+r.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){var a=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,f=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,b=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+a),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+f),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+b)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+a),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+f),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+b)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}n.prototype.cacheSteps=function(t){var e=[],i=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var a=this.pos(r);Math.sqrt((a.x-i.x)*(a.x-i.x)+(a.y-i.y)*(a.y-i.y)+(a.z-i.z)*(a.z-i.z))>t&&(e.push(r),i=a)}return e},n.prototype.vector=function(t){var e=this.pos(t+10),i=this.pos(t-10);return{angle:180*Math.atan2(e.y-i.y,e.x-i.x)/3.14,speed:Math.sqrt((i.x-e.x)*(i.x-e.x)+(i.y-e.y)*(i.y-e.y)+(i.z-e.z)*(i.z-e.z))}},n.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var i=e/this.duration;if(i>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*i);return function HG(n,t,e,i,r){var a=function jG(n){var t=n*n;return[t*n,3*t*(1-n),3*n*(1-n)*(1-n),(1-n)*(1-n)*(1-n)]}(n);return{x:r.x*a[0]+i.x*a[1]+e.x*a[2]+t.x*a[3],y:r.y*a[0]+i.y*a[1]+e.y*a[2]+t.y*a[3],z:r.z*a[0]+i.z*a[1]+e.z*a[2]+t.z*a[3]}}((this.length-1)*i-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])}}();function XG(n,t,e,i){void 0===i&&(i={});var r=fL(n),a=aT(r[0]),f=aT(r[1]),b=aT(e),S=function oT(n,t){void 0===t&&(t="kilometers");var e=cL[t];if(!e)throw new Error(t+" units is invalid");return n/e}(t,i.units),M=Math.asin(Math.sin(f)*Math.cos(S)+Math.cos(f)*Math.sin(S)*Math.cos(b));return f1([sT(a+Math.atan2(Math.sin(b)*Math.sin(S)*Math.cos(f),Math.cos(S)-Math.sin(f)*Math.sin(M))),sT(M)],i.properties)}W(5469),W(5406);var NL=Math.PI/180,BL=180/Math.PI,y1=function(n,t){this.lon=n,this.lat=t,this.x=NL*n,this.y=NL*t};y1.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},y1.prototype.antipode=function(){return new y1(this.lon<0?180+this.lon:-1*(180-this.lon),-1*this.lat)};var zL=function(){this.coords=[],this.length=0};zL.prototype.move_to=function(n){this.length++,this.coords.push(n)};var _T=function(n){this.properties=n||{},this.geometries=[]};_T.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var n=[],t=0;t<this.geometries.length;t++)n.push(this.geometries[t].coords);return{geometry:{type:"MultiLineString",coordinates:n},type:"Feature",properties:this.properties}},_T.prototype.wkt=function(){for(var n="",t="LINESTRING(",e=function(a){t+=a[0]+" "+a[1]+","},i=0;i<this.geometries.length;i++){if(0===this.geometries[i].coords.length)return"LINESTRING(empty)";this.geometries[i].coords.forEach(e),n+=t.substring(0,t.length-1)+")"}return n};var yT=function(n,t,e){if(!n||void 0===n.x||void 0===n.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new y1(n.x,n.y),this.end=new y1(t.x,t.y),this.properties=e||{};var i=this.start.x-this.end.x,a=Math.pow(Math.sin((this.start.y-this.end.y)/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(i/2),2);if(this.g=2*Math.asin(Math.sqrt(a)),this.g===Math.PI)throw new Error("it appears "+n.view()+" and "+t.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+n+" and "+t)};yT.prototype.interpolate=function(n){var t=Math.sin((1-n)*this.g)/Math.sin(this.g),e=Math.sin(n*this.g)/Math.sin(this.g),i=t*Math.cos(this.start.y)*Math.cos(this.start.x)+e*Math.cos(this.end.y)*Math.cos(this.end.x),r=t*Math.cos(this.start.y)*Math.sin(this.start.x)+e*Math.cos(this.end.y)*Math.sin(this.end.x),a=t*Math.sin(this.start.y)+e*Math.sin(this.end.y),f=BL*Math.atan2(a,Math.sqrt(Math.pow(i,2)+Math.pow(r,2)));return[BL*Math.atan2(r,i),f]},yT.prototype.Arc=function(n,t){var e=[];if(!n||n<=2)e.push([this.start.lon,this.start.lat]),e.push([this.end.lon,this.end.lat]);else for(var i=1/(n-1),r=0;r<n;++r){var f=this.interpolate(i*r);e.push(f)}for(var b=!1,S=0,M=t&&t.offset?t.offset:10,O=180-M,N=-180+M,U=360-M,j=1;j<e.length;++j){var be=e[j-1][0],Ce=e[j][0],et=Math.abs(Ce-be);et>U&&(Ce>O&&be<N||be>O&&Ce<N)?b=!0:et>S&&(S=et)}var Ye=[];if(b&&S<M){var Be=[];Ye.push(Be);for(var it=0;it<e.length;++it){var At=parseFloat(e[it][0]);if(it>0&&Math.abs(At-e[it-1][0])>U){var kt=parseFloat(e[it-1][0]),qt=parseFloat(e[it-1][1]),zt=parseFloat(e[it][0]),Kt=parseFloat(e[it][1]);if(kt>-180&&kt<N&&180===zt&&it+1<e.length&&e[it-1][0]>-180&&e[it-1][0]<N){Be.push([-180,e[it][1]]),it++,Be.push([e[it][0],e[it][1]]);continue}if(kt>O&&kt<180&&-180===zt&&it+1<e.length&&e[it-1][0]>O&&e[it-1][0]<180){Be.push([180,e[it][1]]),it++,Be.push([e[it][0],e[it][1]]);continue}if(kt<N&&zt>O){var xt=kt;kt=zt,zt=xt;var $i=qt;qt=Kt,Kt=$i}if(kt>O&&zt<N&&(zt+=360),kt<=180&&zt>=180&&kt<zt){var di=(180-kt)/(zt-kt),ur=di*Kt+(1-di)*qt;Be.push([e[it-1][0]>O?180:-180,ur]),(Be=[]).push([e[it-1][0]>O?-180:180,ur]),Ye.push(Be)}else Ye.push(Be=[]);Be.push([At,e[it][1]])}else Be.push([e[it][0],e[it][1]])}}else{var _r=[];Ye.push(_r);for(var Gn=0;Gn<e.length;++Gn)_r.push([e[Gn][0],e[Gn][1]])}for(var or=new _T(this.properties),yn=0;yn<Ye.length;++yn){var ri=new zL;or.geometries.push(ri);for(var ui=Ye[yn],Si=0;Si<ui.length;++Si)ri.move_to(ui[Si])}return or},W(1105);var Io=[],To=[],Ao=[],Po=[],Ro=[],Oo=[],Lo=[],ko=[],Fo=[],No=[],Bo=[],zo=[],Uo=[],Vo=[],Go=[],$o=[],Ho=[],jo=[],qo=[],Yo=[],Zo=[],Wo=[],Xo=[],Ko=[];Lo[85]=No[85]=-1,ko[85]=Bo[85]=0,Fo[85]=zo[85]=1,qo[85]=Wo[85]=1,Yo[85]=Xo[85]=0,Zo[85]=Ko[85]=1,Io[85]=Po[85]=0,To[85]=Ro[85]=-1,Ao[85]=Go[85]=0,$o[85]=Uo[85]=0,Ho[85]=Vo[85]=1,Oo[85]=jo[85]=1,Wo[1]=Wo[169]=0,Xo[1]=Xo[169]=-1,Ko[1]=Ko[169]=0,Uo[1]=Uo[169]=-1,Vo[1]=Vo[169]=0,Go[1]=Go[169]=0,No[4]=No[166]=0,Bo[4]=Bo[166]=-1,zo[4]=zo[166]=1,$o[4]=$o[166]=1,Ho[4]=Ho[166]=0,jo[4]=jo[166]=0,Lo[16]=Lo[154]=0,ko[16]=ko[154]=1,Fo[16]=Fo[154]=1,Po[16]=Po[154]=1,Ro[16]=Ro[154]=0,Oo[16]=Oo[154]=1,qo[64]=qo[106]=0,Yo[64]=Yo[106]=1,Zo[64]=Zo[106]=0,Io[64]=Io[106]=-1,To[64]=To[106]=0,Ao[64]=Ao[106]=1,qo[2]=qo[168]=0,Yo[2]=Yo[168]=-1,Zo[2]=Zo[168]=1,Wo[2]=Wo[168]=0,Xo[2]=Xo[168]=-1,Ko[2]=Ko[168]=0,Uo[2]=Uo[168]=-1,Vo[2]=Vo[168]=0,Go[2]=Go[168]=0,$o[2]=$o[168]=-1,Ho[2]=Ho[168]=0,jo[2]=jo[168]=1,Lo[8]=Lo[162]=0,ko[8]=ko[162]=-1,Fo[8]=Fo[162]=0,No[8]=No[162]=0,Bo[8]=Bo[162]=-1,zo[8]=zo[162]=1,Uo[8]=Uo[162]=1,Vo[8]=Vo[162]=0,Go[8]=Go[162]=1,$o[8]=$o[162]=1,Ho[8]=Ho[162]=0,jo[8]=jo[162]=0,Lo[32]=Lo[138]=0,ko[32]=ko[138]=1,Fo[32]=Fo[138]=1,No[32]=No[138]=0,Bo[32]=Bo[138]=1,zo[32]=zo[138]=0,Io[32]=Io[138]=1,To[32]=To[138]=0,Ao[32]=Ao[138]=0,Po[32]=Po[138]=1,Ro[32]=Ro[138]=0,Oo[32]=Oo[138]=1,Wo[128]=Wo[42]=0,Xo[128]=Xo[42]=1,Ko[128]=Ko[42]=1,qo[128]=qo[42]=0,Yo[128]=Yo[42]=1,Zo[128]=Zo[42]=0,Io[128]=Io[42]=-1,To[128]=To[42]=0,Ao[128]=Ao[42]=1,Po[128]=Po[42]=-1,Ro[128]=Ro[42]=0,Oo[128]=Oo[42]=0,No[5]=No[165]=-1,Bo[5]=Bo[165]=0,zo[5]=zo[165]=0,Wo[5]=Wo[165]=1,Xo[5]=Xo[165]=0,Ko[5]=Ko[165]=0,$o[20]=$o[150]=0,Ho[20]=Ho[150]=1,jo[20]=jo[150]=1,Po[20]=Po[150]=0,Ro[20]=Ro[150]=-1,Oo[20]=Oo[150]=1,Lo[80]=Lo[90]=-1,ko[80]=ko[90]=0,Fo[80]=Fo[90]=1,qo[80]=qo[90]=1,Yo[80]=Yo[90]=0,Zo[80]=Zo[90]=1,Uo[65]=Uo[105]=0,Vo[65]=Vo[105]=1,Go[65]=Go[105]=0,Io[65]=Io[105]=0,To[65]=To[105]=-1,Ao[65]=Ao[105]=0,Lo[160]=Lo[10]=-1,ko[160]=ko[10]=0,Fo[160]=Fo[10]=1,No[160]=No[10]=-1,Bo[160]=Bo[10]=0,zo[160]=zo[10]=0,Wo[160]=Wo[10]=1,Xo[160]=Xo[10]=0,Ko[160]=Ko[10]=0,qo[160]=qo[10]=1,Yo[160]=Yo[10]=0,Zo[160]=Zo[10]=1,$o[130]=$o[40]=0,Ho[130]=Ho[40]=1,jo[130]=jo[40]=1,Uo[130]=Uo[40]=0,Vo[130]=Vo[40]=1,Go[130]=Go[40]=0,Io[130]=Io[40]=0,To[130]=To[40]=-1,Ao[130]=Ao[40]=0,Po[130]=Po[40]=0,Ro[130]=Ro[40]=-1,Oo[130]=Oo[40]=1,No[37]=No[133]=0,Bo[37]=Bo[133]=1,zo[37]=zo[133]=1,Wo[37]=Wo[133]=0,Xo[37]=Xo[133]=1,Ko[37]=Ko[133]=0,Io[37]=Io[133]=-1,To[37]=To[133]=0,Ao[37]=Ao[133]=0,Po[37]=Po[133]=1,Ro[37]=Ro[133]=0,Oo[37]=Oo[133]=0,$o[148]=$o[22]=-1,Ho[148]=Ho[22]=0,jo[148]=jo[22]=0,Wo[148]=Wo[22]=0,Xo[148]=Xo[22]=-1,Ko[148]=Ko[22]=1,qo[148]=qo[22]=0,Yo[148]=Yo[22]=1,Zo[148]=Zo[22]=1,Po[148]=Po[22]=-1,Ro[148]=Ro[22]=0,Oo[148]=Oo[22]=1,Lo[82]=Lo[88]=0,ko[82]=ko[88]=-1,Fo[82]=Fo[88]=1,$o[82]=$o[88]=1,Ho[82]=Ho[88]=0,jo[82]=jo[88]=1,Uo[82]=Uo[88]=-1,Vo[82]=Vo[88]=0,Go[82]=Go[88]=1,qo[82]=qo[88]=0,Yo[82]=Yo[88]=-1,Zo[82]=Zo[88]=0,Lo[73]=Lo[97]=0,ko[73]=ko[97]=1,Fo[73]=Fo[97]=0,No[73]=No[97]=0,Bo[73]=Bo[97]=-1,zo[73]=zo[97]=0,Uo[73]=Uo[97]=1,Vo[73]=Vo[97]=0,Go[73]=Go[97]=0,Io[73]=Io[97]=1,To[73]=To[97]=0,Ao[73]=Ao[97]=1,Lo[145]=Lo[25]=0,ko[145]=ko[25]=-1,Fo[145]=Fo[25]=0,Uo[145]=Uo[25]=1,Vo[145]=Vo[25]=0,Go[145]=Go[25]=1,Wo[145]=Wo[25]=0,Xo[145]=Xo[25]=1,Ko[145]=Ko[25]=1,Po[145]=Po[25]=-1,Ro[145]=Ro[25]=0,Oo[145]=Oo[25]=0,No[70]=No[100]=0,Bo[70]=Bo[100]=1,zo[70]=zo[100]=0,$o[70]=$o[100]=-1,Ho[70]=Ho[100]=0,jo[70]=jo[100]=1,qo[70]=qo[100]=0,Yo[70]=Yo[100]=-1,Zo[70]=Zo[100]=1,Io[70]=Io[100]=1,To[70]=To[100]=0,Ao[70]=Ao[100]=0,No[101]=No[69]=0,Bo[101]=Bo[69]=1,zo[101]=zo[69]=0,Io[101]=Io[69]=1,To[101]=To[69]=0,Ao[101]=Ao[69]=0,Wo[149]=Wo[21]=0,Xo[149]=Xo[21]=1,Ko[149]=Ko[21]=1,Po[149]=Po[21]=-1,Ro[149]=Ro[21]=0,Oo[149]=Oo[21]=0,$o[86]=$o[84]=-1,Ho[86]=Ho[84]=0,jo[86]=jo[84]=1,qo[86]=qo[84]=0,Yo[86]=Yo[84]=-1,Zo[86]=Zo[84]=1,Lo[89]=Lo[81]=0,ko[89]=ko[81]=-1,Fo[89]=Fo[81]=0,Uo[89]=Uo[81]=1,Vo[89]=Vo[81]=0,Go[89]=Go[81]=1,Lo[96]=Lo[74]=0,ko[96]=ko[74]=1,Fo[96]=Fo[74]=0,No[96]=No[74]=-1,Bo[96]=Bo[74]=0,zo[96]=zo[74]=1,qo[96]=qo[74]=1,Yo[96]=Yo[74]=0,Zo[96]=Zo[74]=0,Io[96]=Io[74]=1,To[96]=To[74]=0,Ao[96]=Ao[74]=1,Lo[24]=Lo[146]=0,ko[24]=ko[146]=-1,Fo[24]=Fo[146]=1,$o[24]=$o[146]=1,Ho[24]=Ho[146]=0,jo[24]=jo[146]=1,Uo[24]=Uo[146]=0,Vo[24]=Vo[146]=1,Go[24]=Go[146]=1,Po[24]=Po[146]=0,Ro[24]=Ro[146]=-1,Oo[24]=Oo[146]=0,No[6]=No[164]=-1,Bo[6]=Bo[164]=0,zo[6]=zo[164]=1,$o[6]=$o[164]=-1,Ho[6]=Ho[164]=0,jo[6]=jo[164]=0,Wo[6]=Wo[164]=0,Xo[6]=Xo[164]=-1,Ko[6]=Ko[164]=1,qo[6]=qo[164]=1,Yo[6]=Yo[164]=0,Zo[6]=Zo[164]=0,Uo[129]=Uo[41]=0,Vo[129]=Vo[41]=1,Go[129]=Go[41]=1,Wo[129]=Wo[41]=0,Xo[129]=Xo[41]=1,Ko[129]=Ko[41]=0,Io[129]=Io[41]=-1,To[129]=To[41]=0,Ao[129]=Ao[41]=0,Po[129]=Po[41]=0,Ro[129]=Ro[41]=-1,Oo[129]=Oo[41]=0,$o[66]=$o[104]=0,Ho[66]=Ho[104]=1,jo[66]=jo[104]=0,Uo[66]=Uo[104]=-1,Vo[66]=Vo[104]=0,Go[66]=Go[104]=1,qo[66]=qo[104]=0,Yo[66]=Yo[104]=-1,Zo[66]=Zo[104]=0,Io[66]=Io[104]=0,To[66]=To[104]=-1,Ao[66]=Ao[104]=1,Lo[144]=Lo[26]=-1,ko[144]=ko[26]=0,Fo[144]=Fo[26]=0,Wo[144]=Wo[26]=1,Xo[144]=Xo[26]=0,Ko[144]=Ko[26]=1,qo[144]=qo[26]=0,Yo[144]=Yo[26]=1,Zo[144]=Zo[26]=1,Po[144]=Po[26]=-1,Ro[144]=Ro[26]=0,Oo[144]=Oo[26]=1,No[36]=No[134]=0,Bo[36]=Bo[134]=1,zo[36]=zo[134]=1,$o[36]=$o[134]=0,Ho[36]=Ho[134]=1,jo[36]=jo[134]=0,Io[36]=Io[134]=0,To[36]=To[134]=-1,Ao[36]=Ao[134]=1,Po[36]=Po[134]=1,Ro[36]=Ro[134]=0,Oo[36]=Oo[134]=0,Lo[9]=Lo[161]=-1,ko[9]=ko[161]=0,Fo[9]=Fo[161]=0,No[9]=No[161]=0,Bo[9]=Bo[161]=-1,zo[9]=zo[161]=0,Uo[9]=Uo[161]=1,Vo[9]=Vo[161]=0,Go[9]=Go[161]=0,Wo[9]=Wo[161]=1,Xo[9]=Xo[161]=0,Ko[9]=Ko[161]=1,Lo[136]=0,ko[136]=1,Fo[136]=1,No[136]=0,Bo[136]=1,zo[136]=0,$o[136]=-1,Ho[136]=0,jo[136]=1,Uo[136]=-1,Vo[136]=0,Go[136]=0,Wo[136]=0,Xo[136]=-1,Ko[136]=0,qo[136]=0,Yo[136]=-1,Zo[136]=1,Io[136]=1,To[136]=0,Ao[136]=0,Po[136]=1,Ro[136]=0,Oo[136]=1,Lo[34]=0,ko[34]=-1,Fo[34]=0,No[34]=0,Bo[34]=-1,zo[34]=1,$o[34]=1,Ho[34]=0,jo[34]=0,Uo[34]=1,Vo[34]=0,Go[34]=1,Wo[34]=0,Xo[34]=1,Ko[34]=1,qo[34]=0,Yo[34]=1,Zo[34]=0,Io[34]=-1,To[34]=0,Ao[34]=1,Po[34]=-1,Ro[34]=0,Oo[34]=0,Lo[35]=0,ko[35]=1,Fo[35]=1,No[35]=0,Bo[35]=-1,zo[35]=1,$o[35]=1,Ho[35]=0,jo[35]=0,Uo[35]=-1,Vo[35]=0,Go[35]=0,Wo[35]=0,Xo[35]=-1,Ko[35]=0,qo[35]=0,Yo[35]=1,Zo[35]=0,Io[35]=-1,To[35]=0,Ao[35]=1,Po[35]=1,Ro[35]=0,Oo[35]=1,Lo[153]=0,ko[153]=1,Fo[153]=1,Uo[153]=-1,Vo[153]=0,Go[153]=0,Wo[153]=0,Xo[153]=-1,Ko[153]=0,Po[153]=1,Ro[153]=0,Oo[153]=1,No[102]=0,Bo[102]=-1,zo[102]=1,$o[102]=1,Ho[102]=0,jo[102]=0,qo[102]=0,Yo[102]=1,Zo[102]=0,Io[102]=-1,To[102]=0,Ao[102]=1,Lo[155]=0,ko[155]=-1,Fo[155]=0,Uo[155]=1,Vo[155]=0,Go[155]=1,Wo[155]=0,Xo[155]=1,Ko[155]=1,Po[155]=-1,Ro[155]=0,Oo[155]=0,No[103]=0,Bo[103]=1,zo[103]=0,$o[103]=-1,Ho[103]=0,jo[103]=1,qo[103]=0,Yo[103]=-1,Zo[103]=1,Io[103]=1,To[103]=0,Ao[103]=0,Lo[152]=0,ko[152]=1,Fo[152]=1,$o[152]=-1,Ho[152]=0,jo[152]=1,Uo[152]=-1,Vo[152]=0,Go[152]=0,Wo[152]=0,Xo[152]=-1,Ko[152]=0,qo[152]=0,Yo[152]=-1,Zo[152]=1,Po[152]=1,Ro[152]=0,Oo[152]=1,Lo[156]=0,ko[156]=-1,Fo[156]=1,$o[156]=1,Ho[156]=0,jo[156]=1,Uo[156]=-1,Vo[156]=0,Go[156]=0,Wo[156]=0,Xo[156]=-1,Ko[156]=0,qo[156]=0,Yo[156]=1,Zo[156]=1,Po[156]=-1,Ro[156]=0,Oo[156]=1,Lo[137]=0,ko[137]=1,Fo[137]=1,No[137]=0,Bo[137]=1,zo[137]=0,Uo[137]=-1,Vo[137]=0,Go[137]=0,Wo[137]=0,Xo[137]=-1,Ko[137]=0,Io[137]=1,To[137]=0,Ao[137]=0,Po[137]=1,Ro[137]=0,Oo[137]=1,Lo[139]=0,ko[139]=1,Fo[139]=1,No[139]=0,Bo[139]=-1,zo[139]=0,Uo[139]=1,Vo[139]=0,Go[139]=0,Wo[139]=0,Xo[139]=1,Ko[139]=0,Io[139]=-1,To[139]=0,Ao[139]=0,Po[139]=1,Ro[139]=0,Oo[139]=1,Lo[98]=0,ko[98]=-1,Fo[98]=0,No[98]=0,Bo[98]=-1,zo[98]=1,$o[98]=1,Ho[98]=0,jo[98]=0,Uo[98]=1,Vo[98]=0,Go[98]=1,qo[98]=0,Yo[98]=1,Zo[98]=0,Io[98]=-1,To[98]=0,Ao[98]=1,Lo[99]=0,ko[99]=1,Fo[99]=0,No[99]=0,Bo[99]=-1,zo[99]=1,$o[99]=1,Ho[99]=0,jo[99]=0,Uo[99]=-1,Vo[99]=0,Go[99]=1,qo[99]=0,Yo[99]=-1,Zo[99]=0,Io[99]=1,To[99]=0,Ao[99]=1,No[38]=0,Bo[38]=-1,zo[38]=1,$o[38]=1,Ho[38]=0,jo[38]=0,Wo[38]=0,Xo[38]=1,Ko[38]=1,qo[38]=0,Yo[38]=1,Zo[38]=0,Io[38]=-1,To[38]=0,Ao[38]=1,Po[38]=-1,Ro[38]=0,Oo[38]=0,No[39]=0,Bo[39]=1,zo[39]=1,$o[39]=-1,Ho[39]=0,jo[39]=0,Wo[39]=0,Xo[39]=-1,Ko[39]=1,qo[39]=0,Yo[39]=1,Zo[39]=0,Io[39]=-1,To[39]=0,Ao[39]=1,Po[39]=1,Ro[39]=0,Oo[39]=0;var wT=function(n){return[[n.bottomleft,0],[0,0],[0,n.leftbottom]]},ET=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0]]},CT=function(n){return[[n.topright,1],[1,1],[1,n.righttop]]},ST=function(n){return[[0,n.lefttop],[0,1],[n.topleft,1]]},DT=function(n){return[[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop]]},MT=function(n){return[[n.bottomright,0],[n.bottomleft,0],[1,n.righttop],[1,n.rightbottom]]},IT=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.topleft,1],[n.topright,1]]},TT=function(n){return[[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]},Li=[],Pi=[],cr=[],er=[],Tr=[],Dr=[],Jo=[],ns=[];er[1]=Tr[1]=18,er[169]=Tr[169]=18,cr[4]=Pi[4]=12,cr[166]=Pi[166]=12,Li[16]=ns[16]=4,Li[154]=ns[154]=4,Dr[64]=Jo[64]=22,Dr[106]=Jo[106]=22,cr[2]=Dr[2]=17,er[2]=Tr[2]=18,cr[168]=Dr[168]=17,er[168]=Tr[168]=18,Li[8]=er[8]=9,Pi[8]=cr[8]=12,Li[162]=er[162]=9,Pi[162]=cr[162]=12,Li[32]=ns[32]=4,Pi[32]=Jo[32]=1,Li[138]=ns[138]=4,Pi[138]=Jo[138]=1,Tr[128]=ns[128]=21,Dr[128]=Jo[128]=22,Tr[42]=ns[42]=21,Dr[42]=Jo[42]=22,Pi[5]=Tr[5]=14,Pi[165]=Tr[165]=14,cr[20]=ns[20]=6,cr[150]=ns[150]=6,Li[80]=Dr[80]=11,Li[90]=Dr[90]=11,er[65]=Jo[65]=3,er[105]=Jo[105]=3,Li[160]=Dr[160]=11,Pi[160]=Tr[160]=14,Li[10]=Dr[10]=11,Pi[10]=Tr[10]=14,cr[130]=ns[130]=6,er[130]=Jo[130]=3,cr[40]=ns[40]=6,er[40]=Jo[40]=3,Pi[101]=Jo[101]=1,Pi[69]=Jo[69]=1,Tr[149]=ns[149]=21,Tr[21]=ns[21]=21,cr[86]=Dr[86]=17,cr[84]=Dr[84]=17,Li[89]=er[89]=9,Li[81]=er[81]=9,Li[96]=Jo[96]=0,Pi[96]=Dr[96]=15,Li[74]=Jo[74]=0,Pi[74]=Dr[74]=15,Li[24]=cr[24]=8,er[24]=ns[24]=7,Li[146]=cr[146]=8,er[146]=ns[146]=7,Pi[6]=Dr[6]=15,cr[6]=Tr[6]=16,Pi[164]=Dr[164]=15,cr[164]=Tr[164]=16,er[129]=ns[129]=7,Tr[129]=Jo[129]=20,er[41]=ns[41]=7,Tr[41]=Jo[41]=20,cr[66]=Jo[66]=2,er[66]=Dr[66]=19,cr[104]=Jo[104]=2,er[104]=Dr[104]=19,Li[144]=Tr[144]=10,Dr[144]=ns[144]=23,Li[26]=Tr[26]=10,Dr[26]=ns[26]=23,Pi[36]=ns[36]=5,cr[36]=Jo[36]=2,Pi[134]=ns[134]=5,cr[134]=Jo[134]=2,Li[9]=Tr[9]=10,Pi[9]=er[9]=13,Li[161]=Tr[161]=10,Pi[161]=er[161]=13,Pi[37]=ns[37]=5,Tr[37]=Jo[37]=20,Pi[133]=ns[133]=5,Tr[133]=Jo[133]=20,cr[148]=Tr[148]=16,Dr[148]=ns[148]=23,cr[22]=Tr[22]=16,Dr[22]=ns[22]=23,Li[82]=cr[82]=8,er[82]=Dr[82]=19,Li[88]=cr[88]=8,er[88]=Dr[88]=19,Li[73]=Jo[73]=0,Pi[73]=er[73]=13,Li[97]=Jo[97]=0,Pi[97]=er[97]=13,Li[145]=er[145]=9,Tr[145]=ns[145]=21,Li[25]=er[25]=9,Tr[25]=ns[25]=21,Pi[70]=Jo[70]=1,cr[70]=Dr[70]=17,Pi[100]=Jo[100]=1,cr[100]=Dr[100]=17,Li[34]=er[34]=9,Pi[34]=cr[34]=12,Tr[34]=ns[34]=21,Dr[34]=Jo[34]=22,Li[136]=ns[136]=4,Pi[136]=Jo[136]=1,cr[136]=Dr[136]=17,er[136]=Tr[136]=18,Li[35]=ns[35]=4,Pi[35]=cr[35]=12,er[35]=Tr[35]=18,Dr[35]=Jo[35]=22,Li[153]=ns[153]=4,er[153]=Tr[153]=18,Pi[102]=cr[102]=12,Dr[102]=Jo[102]=22,Li[155]=er[155]=9,Tr[155]=ns[155]=23,Pi[103]=Jo[103]=1,cr[103]=Dr[103]=17,Li[152]=ns[152]=4,cr[152]=Dr[152]=17,er[152]=Tr[152]=18,Li[156]=cr[156]=8,er[156]=Tr[156]=18,Dr[156]=ns[156]=23,Li[137]=ns[137]=4,Pi[137]=Jo[137]=1,er[137]=Tr[137]=18,Li[139]=ns[139]=4,Pi[139]=er[139]=13,Tr[139]=Jo[139]=20,Li[98]=er[98]=9,Pi[98]=cr[98]=12,Dr[98]=Jo[98]=22,Li[99]=Jo[99]=0,Pi[99]=cr[99]=12,er[99]=Dr[99]=19,Pi[38]=cr[38]=12,Tr[38]=ns[38]=21,Dr[38]=Jo[38]=22,Pi[39]=ns[39]=5,cr[39]=Tr[39]=16,Dr[39]=Jo[39]=22;var _i=[];function RT(n,t,e){return function F8(n){return(n>0)-(n<0)||+n}((t[0]-n[0])*(e[1]-t[1])-(e[0]-t[0])*(t[1]-n[1]))}function tk(n,t){return t.geometry.coordinates[0].every(function(e){return _L(f1(e),n)})}_i[1]=_i[169]=wT,_i[4]=_i[166]=ET,_i[16]=_i[154]=CT,_i[64]=_i[106]=ST,_i[168]=_i[2]=DT,_i[162]=_i[8]=MT,_i[138]=_i[32]=IT,_i[42]=_i[128]=TT,_i[5]=_i[165]=function(n){return[[0,0],[0,n.leftbottom],[1,n.rightbottom],[1,0]]},_i[20]=_i[150]=function(n){return[[1,0],[n.bottomright,0],[n.topright,1],[1,1]]},_i[80]=_i[90]=function(n){return[[1,1],[1,n.righttop],[0,n.lefttop],[0,1]]},_i[65]=_i[105]=function(n){return[[n.bottomleft,0],[0,0],[0,1],[n.topleft,1]]},_i[160]=_i[10]=function(n){return[[1,n.righttop],[1,n.rightbottom],[0,n.leftbottom],[0,n.lefttop]]},_i[130]=_i[40]=function(n){return[[n.topleft,1],[n.topright,1],[n.bottomright,0],[n.bottomleft,0]]},_i[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},_i[101]=_i[69]=function(n){return[[1,n.rightbottom],[1,0],[0,0],[0,1],[n.topleft,1]]},_i[149]=_i[21]=function(n){return[[n.topright,1],[1,1],[1,0],[0,0],[0,n.leftbottom]]},_i[86]=_i[84]=function(n){return[[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[1,1]]},_i[89]=_i[81]=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,1]]},_i[96]=_i[74]=function(n){return[[1,n.righttop],[1,n.rightbottom],[0,n.lefttop],[0,1],[n.topleft,1]]},_i[24]=_i[146]=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[n.topright,1]]},_i[6]=_i[164]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop]]},_i[129]=_i[41]=function(n){return[[n.topright,1],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topleft,1]]},_i[66]=_i[104]=function(n){return[[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1],[n.topleft,1]]},_i[144]=_i[26]=function(n){return[[1,1],[1,n.righttop],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]},_i[36]=_i[134]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[n.topleft,1],[n.topright,1]]},_i[9]=_i[161]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,n.leftbottom]]},_i[37]=_i[133]=function(n){return[[1,n.rightbottom],[1,0],[0,0],[0,n.leftbottom],[n.topleft,1],[n.topright,1]]},_i[148]=_i[22]=function(n){return[[1,1],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]},_i[82]=_i[88]=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1]]},_i[73]=_i[97]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,1],[n.topleft,1]]},_i[145]=_i[25]=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topright,1]]},_i[70]=_i[100]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[n.topleft,1]]},_i[34]=function(n){return[TT(n),MT(n)]},_i[35]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]},_i[136]=function(n){return[IT(n),DT(n)]},_i[153]=function(n){return[CT(n),wT(n)]},_i[102]=function(n){return[ET(n),ST(n)]},_i[155]=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topright,1]]},_i[103]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[n.topleft,1]]},_i[152]=function(n){return[CT(n),DT(n)]},_i[156]=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]},_i[137]=function(n){return[IT(n),wT(n)]},_i[139]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topleft,1],[n.topright,1]]},_i[98]=function(n){return[MT(n),ST(n)]},_i[99]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1],[n.topleft,1]]},_i[38]=function(n){return[ET(n),TT(n)]},_i[39]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]};const nk=function(){function n(t){this.id=n.buildId(t),this.coordinates=t,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return n.buildId=function(t){return t.join(",")},n.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter(function(e){return e.from.id!==t.from.id})},n.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter(function(e){return e.to.id!==t.to.id})},n.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},n.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort(function(e,i){var r=e.to,a=i.to;if(r.coordinates[0]-t.coordinates[0]>=0&&a.coordinates[0]-t.coordinates[0]<0)return 1;if(r.coordinates[0]-t.coordinates[0]<0&&a.coordinates[0]-t.coordinates[0]>=0)return-1;if(r.coordinates[0]-t.coordinates[0]==0&&a.coordinates[0]-t.coordinates[0]==0)return r.coordinates[1]-t.coordinates[1]>=0||a.coordinates[1]-t.coordinates[1]>=0?r.coordinates[1]-a.coordinates[1]:a.coordinates[1]-r.coordinates[1];var f=RT(t.coordinates,r.coordinates,a.coordinates);return f<0?1:f>0?-1:Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2)-(Math.pow(a.coordinates[0]-t.coordinates[0],2)+Math.pow(a.coordinates[1]-t.coordinates[1],2))}),this.outerEdgesSorted=!0)},n.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},n.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},n.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},n}(),V8=function(){function n(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return n.prototype.getSymetric=function(){return this.symetric||(this.symetric=new n(this.to,this.from),this.symetric.symetric=this),this.symetric},n.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},n.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},n.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},n.prototype.toLineString=function(){return function rT(n,t,e){if(void 0===e&&(e={}),n.length<2)throw new Error("coordinates must be an array of two or more positions");return Nm({type:"LineString",coordinates:n},t,e)}([this.from.coordinates,this.to.coordinates])},n.prototype.compareTo=function(t){return RT(t.from.coordinates,t.to.coordinates,this.to.coordinates)},n}(),$8=function(){function n(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return n.prototype.push=function(t){this.edges.push(t),this.polygon=this.envelope=void 0},n.prototype.get=function(t){return this.edges[t]},Object.defineProperty(n.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),n.prototype.forEach=function(t){this.edges.forEach(t)},n.prototype.map=function(t){return this.edges.map(t)},n.prototype.some=function(t){return this.edges.some(t)},n.prototype.isValid=function(){return!0},n.prototype.isHole=function(){var t=this,e=this.edges.reduce(function(f,b,S){return b.from.coordinates[1]>t.edges[f].from.coordinates[1]&&(f=S),f},0),i=(0===e?this.length:e)-1,r=(e+1)%this.length,a=RT(this.edges[i].from.coordinates,this.edges[e].from.coordinates,this.edges[r].from.coordinates);return 0===a?this.edges[i].from.coordinates[0]>this.edges[r].from.coordinates[0]:a>0},n.prototype.toMultiPoint=function(){return function dL(n,t,e){return void 0===e&&(e={}),Nm({type:"MultiPoint",coordinates:n},t,e)}(this.edges.map(function(t){return t.from.coordinates}))},n.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map(function(e){return e.from.coordinates});return t.push(this.edges[0].from.coordinates),this.polygon=p1([t])},n.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=function ZG(n){return function YG(n,t){void 0===t&&(t={});var e=Number(n[0]),i=Number(n[1]),r=Number(n[2]),a=Number(n[3]);if(6===n.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var f=[e,i];return p1([[f,[r,i],[r,a],[e,a],f]],t.properties,{bbox:n,id:t.id})}(mG(n))}(this.toPolygon())},n.findEdgeRingContaining=function(t,e){var r,a,i=t.getEnvelope();return e.forEach(function(f){var b=f.getEnvelope();if(a&&(r=a.getEnvelope()),!function N8(n,t){var e=n.geometry.coordinates[0].map(function(f){return f[0]}),i=n.geometry.coordinates[0].map(function(f){return f[1]}),r=t.geometry.coordinates[0].map(function(f){return f[0]}),a=t.geometry.coordinates[0].map(function(f){return f[1]});return Math.max.apply(null,e)===Math.max.apply(null,r)&&Math.max.apply(null,i)===Math.max.apply(null,a)&&Math.min.apply(null,e)===Math.min.apply(null,r)&&Math.min.apply(null,i)===Math.min.apply(null,a)}(b,i)&&tk(b,i)){for(var S=t.map(function(be){return be.from.coordinates}),M=void 0,O=function(be){f.some(function(Ce){return function B8(n,t){return n[0]===t[0]&&n[1]===t[1]}(be,Ce.from.coordinates)})||(M=be)},N=0,U=S;N<U.length;N++)O(U[N]);M&&f.inside(f1(M))&&(!a||tk(r,b))&&(a=f)}}),a},n.prototype.inside=function(t){return _L(t,this.toPolygon())},n}();function dk(n){for(var t=n,e=[];t.parent;)e.unshift(t),t=t.parent;return e}!function(){function n(){this.edges=[],this.nodes={}}n.fromGeoJson=function(t){!function H8(n){if(!n)throw new Error("No geojson passed");if("FeatureCollection"!==n.type&&"GeometryCollection"!==n.type&&"MultiLineString"!==n.type&&"LineString"!==n.type&&"Feature"!==n.type)throw new Error("Invalid input type '"+n.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(t);var e=new n;return RC(t,function(i){(function _G(n,t,e){if(!n)throw new Error("No feature passed");if(!e)throw new Error(".featureOf() requires a name");if(!n||"Feature"!==n.type||!n.geometry)throw new Error("Invalid input to "+e+", Feature with geometry required");if(!n.geometry||n.geometry.type!==t)throw new Error("Invalid input to "+e+": must be a "+t+", given "+n.geometry.type)})(i,"LineString","Graph::fromGeoJson"),function uG(n,t,e,i){var r=e;m1(n,function(a,f,b,S,M){r=0===f&&void 0===e?a:t(r,a,f,b,S,M)},i)}(i,function(r,a){if(r){var f=e.getNode(r),b=e.getNode(a);e.addEdge(f,b)}return a})}),e},n.prototype.getNode=function(t){var e=nk.buildId(t),i=this.nodes[e];return i||(i=this.nodes[e]=new nk(t)),i},n.prototype.addEdge=function(t,e){var i=new V8(t,e),r=i.getSymetric();this.edges.push(i),this.edges.push(r)},n.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map(function(e){return t.nodes[e]}).forEach(function(e){return t._removeIfDangle(e)})},n.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var i=t.getOuterEdges().map(function(r){return r.to});this.removeNode(t),i.forEach(function(r){return e._removeIfDangle(r)})}},n.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))})},n.prototype._computeNextCWEdges=function(t){var e=this;typeof t>"u"?Object.keys(this.nodes).forEach(function(i){return e._computeNextCWEdges(e.nodes[i])}):t.getOuterEdges().forEach(function(i,r){t.getOuterEdge((0===r?t.getOuterEdges().length:r)-1).symetric.next=i})},n.prototype._computeNextCCWEdges=function(t,e){for(var r,a,i=t.getOuterEdges(),f=i.length-1;f>=0;--f){var b=i[f],S=b.symetric,M=void 0,O=void 0;b.label===e&&(M=b),S.label===e&&(O=S),M&&O&&(O&&(a=O),M&&(a&&(a.next=M,a=void 0),r||(r=M)))}a&&(a.next=r)},n.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach(function(i){if(!(i.label>=0)){t.push(i);var r=i;do{r.label=e,r=r.next}while(!i.isEqual(r));e++}}),t},n.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach(function(i){i.label=void 0}),this._findLabeledEdgeRings().forEach(function(i){t._findIntersectionNodes(i).forEach(function(r){t._computeNextCCWEdges(r,i.label)})});var e=[];return this.edges.forEach(function(i){i.ring||e.push(t._findEdgeRing(i))}),e},n.prototype._findIntersectionNodes=function(t){var e=[],i=t,r=function(){var a=0;i.from.getOuterEdges().forEach(function(f){f.label===t.label&&++a}),a>1&&e.push(i.from),i=i.next};do{r()}while(!t.isEqual(i));return e},n.prototype._findEdgeRing=function(t){var e=t,i=new $8;do{i.push(e),e.ring=i,e=e.next}while(!t.isEqual(e));return i},n.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach(function(i){return e.removeEdge(i)}),t.innerEdges.forEach(function(i){return e.removeEdge(i)}),delete this.nodes[t.id]},n.prototype.removeEdge=function(t){this.edges=this.edges.filter(function(e){return!e.isEqual(t)}),t.deleteEdge()}}(),W(5013),W(7470),W(9475);var zC={search:function(n,t,e,i){n.cleanDirty();var r=(i=i||{}).heuristic||zC.heuristics.manhattan,a=i.closest||!1,f=function sH(){return new hk(function(n){return n.f})}(),b=t;for(t.h=r(t,e),f.push(t);f.size()>0;){var S=f.pop();if(S===e)return dk(S);S.closed=!0;for(var M=n.neighbors(S),O=0,N=M.length;O<N;++O){var U=M[O];if(!U.closed&&!U.isWall()){var j=S.g+U.getCost(S),be=U.visited;(!be||j<U.g)&&(U.visited=!0,U.parent=S,U.h=U.h||r(U,e),U.g=j,U.f=U.g+U.h,n.markDirty(U),a&&(U.h<b.h||U.h===b.h&&U.g<b.g)&&(b=U),be?f.rescoreElement(U):f.push(U))}}}return a?dk(b):[]},heuristics:{manhattan:function(n,t){return Math.abs(t.x-n.x)+Math.abs(t.y-n.y)},diagonal:function(n,t){var i=Math.sqrt(2),r=Math.abs(t.x-n.x),a=Math.abs(t.y-n.y);return 1*(r+a)+(i-2)*Math.min(r,a)}},cleanNode:function(n){n.f=0,n.g=0,n.h=0,n.visited=!1,n.closed=!1,n.parent=null}};function $0(n,t){t=t||{},this.nodes=[],this.diagonal=!!t.diagonal,this.grid=[];for(var e=0;e<n.length;e++){this.grid[e]=[];for(var i=0,r=n[e];i<r.length;i++){var a=new UC(e,i,r[i]);this.grid[e][i]=a,this.nodes.push(a)}}this.init()}function UC(n,t,e){this.x=n,this.y=t,this.weight=e}function hk(n){this.content=[],this.scoreFunction=n}function LT(){this._=null}function VC(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function b1(n,t){var e=t,i=t.R,r=e.U;r?r.L===e?r.L=i:r.R=i:n._=i,i.U=r,e.U=i,e.R=i.L,e.R&&(e.R.U=e),i.L=e}function x1(n,t){var e=t,i=t.L,r=e.U;r?r.L===e?r.L=i:r.R=i:n._=i,i.U=r,e.U=i,e.L=i.R,e.L&&(e.L.U=e),i.R=e}function fk(n){for(;n.L;)n=n.L;return n}$0.prototype.init=function(){this.dirtyNodes=[];for(var n=0;n<this.nodes.length;n++)zC.cleanNode(this.nodes[n])},$0.prototype.cleanDirty=function(){for(var n=0;n<this.dirtyNodes.length;n++)zC.cleanNode(this.dirtyNodes[n]);this.dirtyNodes=[]},$0.prototype.markDirty=function(n){this.dirtyNodes.push(n)},$0.prototype.neighbors=function(n){var t=[],e=n.x,i=n.y,r=this.grid;return r[e-1]&&r[e-1][i]&&t.push(r[e-1][i]),r[e+1]&&r[e+1][i]&&t.push(r[e+1][i]),r[e]&&r[e][i-1]&&t.push(r[e][i-1]),r[e]&&r[e][i+1]&&t.push(r[e][i+1]),this.diagonal&&(r[e-1]&&r[e-1][i-1]&&t.push(r[e-1][i-1]),r[e+1]&&r[e+1][i-1]&&t.push(r[e+1][i-1]),r[e-1]&&r[e-1][i+1]&&t.push(r[e-1][i+1]),r[e+1]&&r[e+1][i+1]&&t.push(r[e+1][i+1])),t},$0.prototype.toString=function(){for(var e,i,r,a,n=[],t=this.grid,f=0,b=t.length;f<b;f++){for(e=[],r=0,a=(i=t[f]).length;r<a;r++)e.push(i[r].weight);n.push(e.join(" "))}return n.join("\n")},UC.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},UC.prototype.getCost=function(n){return n&&n.x!==this.x&&n.y!==this.y?1.41421*this.weight:this.weight},UC.prototype.isWall=function(){return 0===this.weight},hk.prototype={push:function(n){this.content.push(n),this.sinkDown(this.content.length-1)},pop:function(){var n=this.content[0],t=this.content.pop();return this.content.length>0&&(this.content[0]=t,this.bubbleUp(0)),n},remove:function(n){var t=this.content.indexOf(n),e=this.content.pop();t!==this.content.length-1&&(this.content[t]=e,this.scoreFunction(e)<this.scoreFunction(n)?this.sinkDown(t):this.bubbleUp(t))},size:function(){return this.content.length},rescoreElement:function(n){this.sinkDown(this.content.indexOf(n))},sinkDown:function(n){for(var t=this.content[n];n>0;){var e=(n+1>>1)-1,i=this.content[e];if(!(this.scoreFunction(t)<this.scoreFunction(i)))break;this.content[e]=t,this.content[n]=i,n=e}},bubbleUp:function(n){for(var t=this.content.length,e=this.content[n],i=this.scoreFunction(e);;){var b,r=n+1<<1,a=r-1,f=null;if(a<t&&(b=this.scoreFunction(this.content[a]))<i&&(f=a),r<t&&this.scoreFunction(this.content[r])<(null===f?i:b)&&(f=r),null===f)break;this.content[n]=this.content[f],this.content[f]=e,n=f}}},LT.prototype={constructor:LT,insert:function(n,t){var e,i,r;if(n){if(t.P=n,t.N=n.N,n.N&&(n.N.P=t),n.N=t,n.R){for(n=n.R;n.L;)n=n.L;n.L=t}else n.R=t;e=n}else this._?(n=fk(this._),t.P=null,t.N=n,n.P=n.L=t,e=n):(t.P=t.N=null,this._=t,e=null);for(t.L=t.R=null,t.U=e,t.C=!0,n=t;e&&e.C;)e===(i=e.U).L?(r=i.R)&&r.C?(e.C=r.C=!1,i.C=!0,n=i):(n===e.R&&(b1(this,e),e=(n=e).U),e.C=!1,i.C=!0,x1(this,i)):(r=i.L)&&r.C?(e.C=r.C=!1,i.C=!0,n=i):(n===e.L&&(x1(this,e),e=(n=e).U),e.C=!1,i.C=!0,b1(this,i)),e=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P),n.P&&(n.P.N=n.N),n.N=n.P=null;var e,a,f,t=n.U,i=n.L,r=n.R;if(a=i?r?fk(r):i:r,t?t.L===n?t.L=a:t.R=a:this._=a,i&&r?(f=a.C,a.C=n.C,a.L=i,i.U=a,a!==r?(t=a.U,a.U=n.U,t.L=n=a.R,a.R=r,r.U=a):(a.U=t,t=a,n=a.R)):(f=n.C,n=a),n&&(n.U=t),!f){if(n&&n.C)return void(n.C=!1);do{if(n===this._)break;if(n===t.L){if((e=t.R).C&&(e.C=!1,t.C=!0,b1(this,t),e=t.R),e.L&&e.L.C||e.R&&e.R.C){(!e.R||!e.R.C)&&(e.L.C=!1,e.C=!0,x1(this,e),e=t.R),e.C=t.C,t.C=e.R.C=!1,b1(this,t),n=this._;break}}else if((e=t.L).C&&(e.C=!1,t.C=!0,x1(this,t),e=t.L),e.L&&e.L.C||e.R&&e.R.C){(!e.L||!e.L.C)&&(e.R.C=!1,e.C=!0,b1(this,e),e=t.L),e.C=t.C,t.C=e.L.C=!1,x1(this,t),n=this._;break}e.C=!0,n=t,t=t.U}while(!n.C);n&&(n.C=!1)}}};const pk=LT;function w1(n,t,e,i){var r=[null,null],a=zu.push(r)-1;return r.left=n,r.right=t,e&&GC(r,n,t,e),i&&GC(r,t,n,i),vh[n.index].halfedges.push(a),vh[t.index].halfedges.push(a),r}function E1(n,t,e){var i=[t,e];return i.left=n,i}function GC(n,t,e,i){n[0]||n[1]?n.left===e?n[1]=i:n[0]=i:(n[0]=i,n.left=t,n.right=e)}function lH(n,t,e,i,r){var Ce,a=n[0],f=n[1],b=a[0],S=a[1],N=0,U=1,j=f[0]-b,be=f[1]-S;if(Ce=t-b,j||!(Ce>0)){if(Ce/=j,j<0){if(Ce<N)return;Ce<U&&(U=Ce)}else if(j>0){if(Ce>U)return;Ce>N&&(N=Ce)}if(Ce=i-b,j||!(Ce<0)){if(Ce/=j,j<0){if(Ce>U)return;Ce>N&&(N=Ce)}else if(j>0){if(Ce<N)return;Ce<U&&(U=Ce)}if(Ce=e-S,be||!(Ce>0)){if(Ce/=be,be<0){if(Ce<N)return;Ce<U&&(U=Ce)}else if(be>0){if(Ce>U)return;Ce>N&&(N=Ce)}if(Ce=r-S,be||!(Ce<0)){if(Ce/=be,be<0){if(Ce>U)return;Ce>N&&(N=Ce)}else if(be>0){if(Ce<N)return;Ce<U&&(U=Ce)}return!(N>0)&&!(U<1)||(N>0&&(n[0]=[b+N*j,S+N*be]),U<1&&(n[1]=[b+U*j,S+U*be])),!0}}}}}function cH(n,t,e,i,r){var a=n[1];if(a)return!0;var Ce,et,f=n[0],b=n.left,S=n.right,M=b[0],O=b[1],N=S[0],U=S[1],j=(M+N)/2;if(U===O){if(j<t||j>=i)return;if(M>N){if(f){if(f[1]>=r)return}else f=[j,e];a=[j,r]}else{if(f){if(f[1]<e)return}else f=[j,r];a=[j,e]}}else if(et=(O+U)/2-(Ce=(M-N)/(U-O))*j,Ce<-1||Ce>1)if(M>N){if(f){if(f[1]>=r)return}else f=[(e-et)/Ce,e];a=[(r-et)/Ce,r]}else{if(f){if(f[1]<e)return}else f=[(r-et)/Ce,r];a=[(e-et)/Ce,e]}else if(O<U){if(f){if(f[0]>=i)return}else f=[t,Ce*t+et];a=[i,Ce*i+et]}else{if(f){if(f[0]<t)return}else f=[i,Ce*i+et];a=[t,Ce*t+et]}return n[0]=f,n[1]=a,!0}function hH(n,t){var e=n.site,i=t.left,r=t.right;return e===r&&(r=i,i=e),r?Math.atan2(r[1]-i[1],r[0]-i[0]):(e===i?(i=t[1],r=t[0]):(i=t[0],r=t[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function mk(n,t){return t[+(t.left!==n.site)]}function fH(n,t){return t[+(t.left===n.site)]}var kT,gk=[];function gH(){VC(this),this.x=this.y=this.arc=this.site=this.cy=null}function H0(n){var t=n.P,e=n.N;if(t&&e){var i=t.site,r=n.site,a=e.site;if(i!==a){var f=r[0],b=r[1],S=i[0]-f,M=i[1]-b,O=a[0]-f,N=a[1]-b,U=2*(S*N-M*O);if(!(U>=-xH)){var j=S*S+M*M,be=O*O+N*N,Ce=(N*j-M*be)/U,et=(S*be-O*j)/U,Ye=gk.pop()||new gH;Ye.arc=n,Ye.site=r,Ye.x=Ce+f,Ye.y=(Ye.cy=et+b)+Math.sqrt(Ce*Ce+et*et),n.circle=Ye;for(var Be=null,it=C1._;it;)if(Ye.y<it.y||Ye.y===it.y&&Ye.x<=it.x){if(!it.L){Be=it.P;break}it=it.L}else{if(!it.R){Be=it;break}it=it.R}C1.insert(Be,Ye),Be||(kT=Ye)}}}}function j0(n){var t=n.circle;t&&(t.P||(kT=t.N),C1.remove(t),gk.push(t),VC(t),n.circle=null)}var _k=[];function _H(){VC(this),this.edge=this.site=this.circle=null}function yk(n){var t=_k.pop()||new _H;return t.site=n,t}function FT(n){j0(n),q0.remove(n),_k.push(n),VC(n)}function yH(n){var t=n.circle,e=t.x,i=t.cy,r=[e,i],a=n.P,f=n.N,b=[n];FT(n);for(var S=a;S.circle&&Math.abs(e-S.circle.x)<wl&&Math.abs(i-S.circle.cy)<wl;)a=S.P,b.unshift(S),FT(S),S=a;b.unshift(S),j0(S);for(var M=f;M.circle&&Math.abs(e-M.circle.x)<wl&&Math.abs(i-M.circle.cy)<wl;)f=M.N,b.push(M),FT(M),M=f;b.push(M),j0(M);var N,O=b.length;for(N=1;N<O;++N)GC((M=b[N]).edge,(S=b[N-1]).site,M.site,r);(M=b[O-1]).edge=w1((S=b[0]).site,M.site,null,r),H0(S),H0(M)}function vH(n){for(var i,r,a,f,t=n[0],e=n[1],b=q0._;b;)if((a=vk(b,e)-t)>wl)b=b.L;else{if(!((f=t-bH(b,e))>wl)){a>-wl?(i=b.P,r=b):f>-wl?(i=b,r=b.N):i=r=b;break}if(!b.R){i=b;break}b=b.R}!function dH(n){vh[n.index]={site:n,halfedges:[]}}(n);var S=yk(n);if(q0.insert(i,S),i||r){if(i===r)return j0(i),r=yk(i.site),q0.insert(S,r),S.edge=r.edge=w1(i.site,S.site),H0(i),void H0(r);if(!r)return void(S.edge=w1(i.site,S.site));j0(i),j0(r);var M=i.site,O=M[0],N=M[1],U=n[0]-O,j=n[1]-N,be=r.site,Ce=be[0]-O,et=be[1]-N,Ye=2*(U*et-j*Ce),Be=U*U+j*j,it=Ce*Ce+et*et,At=[(et*Be-j*it)/Ye+O,(U*it-Ce*Be)/Ye+N];GC(r.edge,M,be,At),S.edge=w1(M,n,null,At),r.edge=w1(n,be,null,At),H0(i),H0(r)}}function vk(n,t){var e=n.site,i=e[0],r=e[1],a=r-t;if(!a)return i;var f=n.P;if(!f)return-1/0;var b=(e=f.site)[0],S=e[1],M=S-t;if(!M)return b;var O=b-i,N=1/a-1/M,U=O/M;return N?(-U+Math.sqrt(U*U-2*N*(O*O/(-2*M)-S+M/2+r-a/2)))/N+i:(i+b)/2}function bH(n,t){var e=n.N;if(e)return vk(e,t);var i=n.site;return i[1]===t?i[0]:1/0}var q0,vh,C1,zu,wl=1e-6,xH=1e-12;function wH(n,t,e){return(n[0]-e[0])*(t[1]-n[1])-(n[0]-t[0])*(e[1]-n[1])}function EH(n,t){return t[1]-n[1]||t[0]-n[0]}function bk(n,t){var i,r,a,e=n.sort(EH).pop();for(zu=[],vh=new Array(n.length),q0=new pk,C1=new pk;;)if(a=kT,e&&(!a||e[1]<a.y||e[1]===a.y&&e[0]<a.x))(e[0]!==i||e[1]!==r)&&(vH(e),i=e[0],r=e[1]),e=n.pop();else{if(!a)break;yH(a.arc)}if(function pH(){for(var e,i,r,a,n=0,t=vh.length;n<t;++n)if((e=vh[n])&&(a=(i=e.halfedges).length)){var f=new Array(a),b=new Array(a);for(r=0;r<a;++r)f[r]=r,b[r]=hH(e,zu[i[r]]);for(f.sort(function(S,M){return b[M]-b[S]}),r=0;r<a;++r)b[r]=i[f[r]];for(r=0;r<a;++r)i[r]=b[r]}}(),t){var f=+t[0][0],b=+t[0][1],S=+t[1][0],M=+t[1][1];(function uH(n,t,e,i){for(var a,r=zu.length;r--;)cH(a=zu[r],n,t,e,i)&&lH(a,n,t,e,i)&&(Math.abs(a[0][0]-a[1][0])>wl||Math.abs(a[0][1]-a[1][1])>wl)||delete zu[r]})(f,b,S,M),function mH(n,t,e,i){var a,f,b,S,M,O,N,U,j,be,Ce,et,r=vh.length,Ye=!0;for(a=0;a<r;++a)if(f=vh[a]){for(b=f.site,S=(M=f.halfedges).length;S--;)zu[M[S]]||M.splice(S,1);for(S=0,O=M.length;S<O;)Ce=(be=fH(f,zu[M[S]]))[0],et=be[1],U=(N=mk(f,zu[M[++S%O]]))[0],j=N[1],(Math.abs(Ce-U)>wl||Math.abs(et-j)>wl)&&(M.splice(S,0,zu.push(E1(b,be,Math.abs(Ce-n)<wl&&i-et>wl?[n,Math.abs(U-n)<wl?j:i]:Math.abs(et-i)<wl&&e-Ce>wl?[Math.abs(j-i)<wl?U:e,i]:Math.abs(Ce-e)<wl&&et-t>wl?[e,Math.abs(U-e)<wl?j:t]:Math.abs(et-t)<wl&&Ce-n>wl?[Math.abs(j-t)<wl?U:n,t]:null))-1),++O);O&&(Ye=!1)}if(Ye){var Be,it,At,kt=1/0;for(a=0,Ye=null;a<r;++a)(f=vh[a])&&(At=(Be=(b=f.site)[0]-n)*Be+(it=b[1]-t)*it)<kt&&(kt=At,Ye=f);if(Ye){var qt=[n,t],zt=[n,i],Kt=[e,i],xt=[e,t];Ye.halfedges.push(zu.push(E1(b=Ye.site,qt,zt))-1,zu.push(E1(b,zt,Kt))-1,zu.push(E1(b,Kt,xt))-1,zu.push(E1(b,xt,qt))-1)}}for(a=0;a<r;++a)(f=vh[a])&&(f.halfedges.length||delete vh[a])}(f,b,S,M)}this.edges=zu,this.cells=vh,q0=C1=zu=vh=null}function t_(){return new $C}function $C(){this.reset()}bk.prototype={constructor:bk,polygons:function(){var n=this.edges;return this.cells.map(function(t){var e=t.halfedges.map(function(i){return mk(t,n[i])});return e.data=t.site.data,e})},triangles:function(){var n=[],t=this.edges;return this.cells.forEach(function(e,i){if(b=(a=e.halfedges).length)for(var a,b,S,r=e.site,f=-1,M=t[a[b-1]],O=M.left===r?M.right:M.left;++f<b;)S=O,O=(M=t[a[f]]).left===r?M.right:M.left,S&&O&&i<S.index&&i<O.index&&wH(r,S,O)<0&&n.push([r.data,S.data,O.data])}),n},links:function(){return this.edges.filter(function(n){return n.right}).map(function(n){return{source:n.left.data,target:n.right.data}})},find:function(n,t,e){for(var r,b,i=this,a=i._found||0,f=i.cells.length;!(b=i.cells[a]);)if(++a>=f)return null;var S=n-b.site[0],M=t-b.site[1],O=S*S+M*M;do{b=i.cells[r=a],a=null,b.halfedges.forEach(function(N){var U=i.edges[N],j=U.left;if(j!==b.site&&j||(j=U.right)){var be=n-j[0],Ce=t-j[1],et=be*be+Ce*Ce;et<O&&(O=et,a=j.index)}})}while(null!==a);return i._found=r,null==e||O<=e*e?b.site:null}},W(9855),W(770),$C.prototype={constructor:$C,reset:function(){this.s=this.t=0},add:function(n){Pk(HC,n,this.t),Pk(this,HC.s,this.s),this.s?this.t+=HC.t:this.s=HC.t},valueOf:function(){return this.s}};var HC=new $C;function Pk(n,t,e){var i=n.s=t+e,r=i-t;n.t=t-(i-r)+(e-r)}var Vl=Math.PI,kd=Vl/2,Y0=2*Vl,dl=Vl/180,S1=(Math,Math.atan),Z0=Math.atan2,Ps=Math.cos,is=(Math,Math,Math,Math,Math,Math.sin),Bm=(Math,Math.sqrt);Math;function W0(n){return n>1?kd:n<-1?-kd:Math.asin(n)}function XT(n,t){return[n>Vl?n-Y0:n<-Vl?n+Y0:n,t]}function rF(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}t_(),t_(),t_(),XT.invert=XT,function tj(n){1===n.length&&(n=function nj(n){return function(t,e){return rF(n(t),e)}}(n))}(rF),Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);t_();function mA(){}function AF(n){return function(t,e){var i=Ps(t),r=Ps(e),a=n(i*r);return[a*r*is(t),a*is(e)]}}function k1(n){return function(t,e){var i=Bm(t*t+e*e),r=n(i),a=is(r),f=Ps(r);return[Z0(t*a,i*f),W0(i&&e*a/i)]}}function _A(n,t){return[n,t]}t_(),t_(),t_(),t_(),function MF(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}(4.5),mA.prototype={constructor:mA,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},Ps(30*dl),function IF(n){return function(t){var e=new mA;for(var i in n)e[i]=n[i];return e.stream=t,e}}({point:function(n,t){this.stream.point(n*dl,t*dl)}}),AF(function(n){return Bm(2/(1+n))}).invert=k1(function(n){return 2*W0(n/2)}),AF(function(n){return(n=function NH(n){return n>1?0:n<-1?Vl:Math.acos(n)}(n))&&n/is(n)}).invert=k1(function(n){return n}),_A.invert=_A,k1(S1),k1(W0),k1(function(n){return 2*S1(n)});const Wj={ABN:"Airport Beacon",ABV:"Above",ACC:"Area Control Center (ARTCC)",ACCUM:"Accumulate",ACFT:"Aircraft",ACR:"Air Carrier",ACT:"Active",ADJ:"Adjacent",ADZD:"Advised",AFD:"Airport Facility Directory",AGL:"Above Ground Level",ALS:"Approach Lighting System",ALT:"Altitude",ALTM:"Altimeter",ALTN:"Alternate",ALTNLY:"Alternately",ALSTG:"Altimeter Setting",AMDT:"Amendment",AMGR:"Airport Manager",AMOS:"Automatic Meteorological Observing System",AP:"Airport",APCH:"Approach","AP LGT":"LGT Airport Lighting",APP:"Approach Control",ARFF:"Aircraft Rescue and Fire Fighting",ARR:"Arrive, Arrival",ASOS:"Automatic Surface Observing System",ASPH:"Asphalt",ATC:"Air Traffic Control",ATCCC:"Air Traffic Control Command Center",ATIS:"Automatic Terminal Information Service",AUTOB:"Automatic Weather Reporting System",AUTH:"Authority",AVBL:"Available",AWOS:"Automatic Weather Observing/Reporting System",AWY:"Airway",AZM:"Azimuth","BA FAIR":"Braking action fair","BA NIL":"Braking action nil","BA POOR":"Braking action poor",BC:"Back Course",BCN:"Beacon",BERM:"Snowbank(s) Containing Earth/Gravel",BLW:"Below",BND:"Bound",BRG:"Bearing",BYD:"Beyond",CAAS:"Class A Airspace",CAT:"Category",CBAS:"Class B Airspace",CBSA:"Class B Surface Area",CCAS:"Class C Airspace",CCLKWS:"Counterclockwise",CCSA:"Class C Surface Area",CD:"Clearance Delivery",CDAS:"Class D Airspace",CDSA:"Class D Surface Area",CEAS:"Class E Airspace",CESA:"Class E Surface Area",CFR:"Code of Federal Regulations",CGAS:"Class G Airspace",CHAN:"Channel",CHG:"Change/Modification",CIG:"Ceiling",CK:"Check",CL:"Centre Line",CLKWS:"Clockwise",CLR:"Clearance, Clear(s), Cleared to",CLSD:"Closed",CMB:"Climb",CMSND:"Commissioned",CNL:"Cancel",CNTRLN:"Centerline",COM:"Communications",CONC:"Concrete",CPD:"Coupled",CRS:"Course",CTC:"Contact",CTL:"Control",DALGT:"Daylight",DCMSN:"Decommission",DCMSND:"Decommissioned",DCT:"Direct",DEGS:"Degrees",DEP:"Depart, Departure","DEP PROC":"Departure Procedure",DH:"Decision Height",DISABLD:"Disabled",DIST:"Distance",DLA:"Delay/Delayed",DLT:"Delete",DLY:"Daily",DME:"Distance Measuring Equipment",DMSTN:"Demonstration",DP:"Dewpoint Temperature",DRFT:"Snowbank/s Caused by Wind Action",DSPLCD:"Displaced",E:"East",EB:"Eastbound",EFAS:"En Route Flight Advisory Service",ELEV:"Elevation",ENG:"Engine",ENRT:"En Route",ENTR:"Entire",EXC:"Except",FAC:"Facility",FAF:"Final Approach Fix","FAN MKR":"Fan Marker",FDC:"Flight Data Center","FI/T":"Flight Inspection Temporay","FI/P":"Flight Inspection Permanent",FM:"From",FNA:"Final Approach",FPM:"Feet Per Minute",FREQ:"Frequency",FRH:"Fly Runway Heading",FRI:"Friday",FRZN:"Frozen",FSS:"Automated/Flight Service Station",GC:"Ground Control",GCA:"Ground Control Approach",GCO:"Ground Communications Outlet",GOVT:"Government",GP:"Glide Path",GPS:"Global Positioning System",GRVL:"Gravel",HAA:"Height Above Airport",HAT:"Height Above Touchdown",HDG:"Heading",HEL:"Helicopter",HELI:"Heliport",HIRL:"High Intensity Runway Lights",HIWAS:"Hazardous Inflight Weather Advisory Service",HLDG:"Holding",HOL:"Holiday",HP:"Holding Pattern",HR:"Hour",IAF:"Initial Approach Fix",IAP:"Instrument Approach Procedure",INBD:"Inbound",ID:"Identification",IDENT:"Identify, Identifier, Identification",IF:"Intermediate Fix",ILS:"Instrument Landing System",IM:"Inner Marker",IMC:"Instrument Meteorological Conditions",INDEFLY:"Indefinitely",INFO:"Information",INOP:"Inoperative",INSTR:"Instrument",INT:"Intersection",INTL:"International",INTST:"Intensity",IR:"Ice On Runway(s)",KT:"Knots",L:"Left",LAA:"Local Airport Advisory",LAT:"Latitude",LAWRS:"Limited Aviation Weather Reporting Station",LB:"Pound(s)",LC:"Local Control",LOC:"Local, Locally, Location",LCTD:"Located",LDA:"Localizer Type Directional Aid",LGT:"Light/Lighting",LGTD:"Lighted",LIRL:"Low Intensity Runway Lights",LLWAS:"Low Level Wind Shear Alert System",LM:"Compass Locator at ILS Middle Marker",LDG:"Landing",LLZ:"Localizer",LO:"Compass Locator at ILS Outer Marker",LONG:"Longitude",LRN:"Long Range Navigation",LSR:"Loose Snow on Runway(s)",LT:"Left Turn",MAG:"Magnetic",MAINT:"Maintain, Maintenance",MALS:"Medium Intensity Approach Light System",MALSF:"Medium Intensity Approach Light System with Sequenced Flashers",MALSR:"Medium Intensity Approach Light System with Runway Alignment Indicator Lights",MAPT:"Missed Approach Point",MCA:"Minimum Crossing Altitude",MDA:"Minimum Descent Altitude",MEA:"Minimum En Route Altitude",MED:"Medium",MIN:"Minute(s)",MIRL:"Medium Intensity Runway Lights",MKR:"Marker",MLS:"Microwave Landing System",MM:"Middle Marker",MNM:"Minimum",MNT:"Monitor/Monitoring/Monitored",MOC:"Minimum Obstruction Clearance",MON:"Monday",MRA:"Minimum Reception Altitude",MSA:"Minimum Safe Altitude, Minimum Sector Altitude",MSAW:"Minimum Safe Altitude Warning",MSG:"Message",MSL:"Mean Sea Level",MU:"Mu Meters",MUD:"Mud",MUNI:"Municipal",N:"North",NA:"Not Authorized",NAV:"Navigation",NB:"Northbound",NDB:"Nondirectional Radio Beacon",NE:"Northeast",NGT:"Night",NM:"Nautical Mile(s)",NMR:"Nautical Mile Radius",NONSTD:"Nonstandard",NOPT:"No Procedure Turn Required",NR:"Number",NTAP:"Notice to Airmen Publication",NW:"Northwest",OBSC:"Obscured/Obscure/Obscuring",OBST:"Obstruction, Obstacle",OM:"Outer Marker",OPR:"Operate/Operator/Operative",OPS:"Operation(s)",ORIG:"Original",OTS:"Out of Service",OVR:"Over",PAEW:"Personnel and Equipment Working",PAX:"Passenger(s)",PAPI:"Precision Approach Path Indicator",PAR:"Precision Approach Radar",PARL:"Parallel",PAT:"Pattern",PCL:"Pilot Controlled Lighting",PERM:"Permanent",PJE:"Parachute Jumping Exercise",PLA:"Practice Low Approach",PLW:"Plow, Plowed",PN:"Prior Notice Required",PPR:"Prior Permission Required",PRN:"Psuedo Random Noise",PROC:"Procedure",PROP:"Propeller",PSR:"Packed Snow on Runway(s)",PTCHY:"Patchy",PTN:"Procedure Turn",PVT:"Private",RAIL:"Runway Alignment Indicator Lights",RAMOS:"Remote Automatic Meteorological Observing System",RCAG:"Remote Communication Air/Ground Facility",RCL:"Runway Center Line",RCLL:"Runway Center Line Lights",RCO:"Remote Communication Outlet",REC:"Receive/Receiver",REIL:"Runway End Identifier Lights",RELCTD:"Relocated",REP:"Report",RLLS:"Runway Lead-In Light System",RMNDR:"Remainder",RMK:"Remark(s)",RNAV:"Area Navigation",RPLC:"Replace",RQRD:"Required",RRL:"Runway Remaining Lights",RSR:"En Route Surveillance Radar",RSVN:"Reservation",RT:"Right Turn",RTE:"Route",RTR:"Remote Transmitter/Receiver",RTS:"Return to Service",RUF:"Rough",RVR:"Runway Visual Range",RVRM:"Runway Visual Range Midpoint",RVRR:"Runway Visual Range Rollout",RVRT:"Runway Visual Range Touchdown",RWY:"Runway",S:"South",SA:"Sand, Sanded",SAT:"Saturday",SAWRS:"Supplementary Aviation Weather Reporting Station",SB:"Southbound",SDF:"Simplified Directional Facility",SE:"Southeast",SFL:"Sequence Flashing Lights",SIMUL:"Simultaneously",SIR:"Packed/Compacted Snow and Ice on Runway(s)",SKED:"Scheduled",SLR:"Slush on Runway(s)",SN:"Snow",SNBNK:"Snowbank/s Caused by Plowing (Windrow(s))",SNGL:"Single",SPD:"Speed",SSALF:"Simplified Short Approach Lighting with Sequence Flashers",SSALR:"Simplified Short Approach Lighting with Runway Alignment Indicator Lights",SSALS:"Simplified Short Approach Lighting System",SSR:"Secondary Surveillance Radar",STA:"Straight-In Approach",STAR:"Standard Terminal Arrival",SUN:"Sunday",SVC:"Service",SVN:"Satellite Vehicle Number",SW:"Southwest",SWEPT:"Swept",T:"Temperature",TACAN:"Tactical Air Navigational Aid (Azimuth and DME)",TAR:"Terminal Area Surveillance Radar",TDWR:"Terminal Doppler Weather Radar",TDZ:"Touchdown Zone","TDZ LGT":"Touchdown Zone Lights",TEMPO:"Temporary",TFC:"Traffic",TFR:"Temporary Flight Restriction",TGL:"Touch-and-Go Landings",THN:"Thin",THR:"Threshold",THRU:"Through",THU:"Thursday",TIL:"Until",TKOF:"Takeoff",TM:"Traffic Management",TMPA:"Traffic Management Program Alert",TRML:"Terminal",TRNG:"Training",TRSN:"Transition",TSNT:"Transient",TUE:"Tuesday",TWR:"Airport Control Tower",TWY:"Taxiway",UAV:"Unmanned Air Vehicles",UFN:"Until Further Notice",UNAVBL:"Unavailable",UNLGTD:"Unlighted",UNMKD:"Unmarked",UNMNT:"Unmonitored",UNREL:"Unreliable",UNUSBL:"Unusable",VASI:"Visual Approach Slope Indicator System",VDP:"Visual Descent Point",VIA:"By Way Of",VICE:"Instead/Versus",VIS:"Visibility",VMC:"Visual Meteorological Conditions",VOL:"Volume",VOR:"VHF Omni-Directional Radio Range",VORTAC:"VOR and TACAN (Collocated)",W:"West",WB:"Westbound",WED:"Wednesday",WEF:"Effective From",WI:"Within",WIE:"Effective Immediately",WKDAYS:"Monday through Friday",WKEND:"Saturday and Sunday",WND:"Wind",WPT:"Waypoint",WSR:"Wet Snow on Runway(s)",WTR:"Water on Runway(s)",WX:"Weather"};class eb{constructor(t){this.http=t,this.notamProxy="https://notams.cezmatrix.sk"}icaoCode$(t,e=0){const i=new URLSearchParams;return i.set("searchType","0"),i.set("designatorsForLocation",t.join(",")),i.set("offset",e.toString()),i.set("notamsOnly","false"),this.http.post(`${this.notamProxy}/notamSearch/search`,i.toString(),{headers:(new id).set("Content-Type","application/x-www-form-urlencoded")}).pipe((0,br.w)(r=>eT(()=>r.endRecordCount===r.totalNotamCount,(0,an.of)(r),this.icaoCode$(t,r.endRecordCount).pipe((0,kn.U)(a=>({...a,startRecordCount:r.startRecordCount,notamList:[...a.notamList,...r.notamList]}))))),(0,kn.U)(r=>({...r,notamList:r.notamList.map(a=>({...a,decoded:this.decodeNotam(a.icaoMessage)}))})))}aroundPoint$(t,e,i=0){const r=t.wrap(),a=new URLSearchParams;return a.set("searchType","3"),a.set("latDegrees",Math.abs(Math.floor(r.lat)).toString()),a.set("latMinutes",Math.abs(Math.floor(r.lat%1*60)).toString()),a.set("latSeconds",Math.abs(Math.floor(r.lat%1*60%1*60)).toString()),a.set("latitudeDirection",r.lat>=0?"N":"S"),a.set("longDegrees",Math.abs(Math.floor(r.lng)).toString()),a.set("longMinutes",Math.abs(Math.floor(r.lng%1*60)).toString()),a.set("longSeconds",Math.abs(Math.floor(r.lng%1*60%1*60)).toString()),a.set("longitudeDirection",r.lng>=0?"E":"W"),a.set("radius",Math.ceil(.000539956803*e).toString()),a.set("offset",i.toString()),a.set("notamsOnly","false"),a.set("radiusSearchOnDesignator","false"),this.http.post(`${this.notamProxy}/notamSearch/search`,a.toString(),{headers:(new id).set("Content-Type","application/x-www-form-urlencoded")}).pipe((0,br.w)(f=>eT(()=>f.endRecordCount===f.totalNotamCount,(0,an.of)(f),this.aroundPoint$(t,e,f.endRecordCount).pipe((0,kn.U)(b=>({...b,startRecordCount:f.startRecordCount,notamList:[...b.notamList,...f.notamList]}))))),(0,kn.U)(f=>({...f,notamList:f.notamList.map(b=>({...b,decoded:this.decodeNotam(b.icaoMessage)}))})))}aroundPointWithCodes$(t,e,i){return this.aroundPoint$(t,e).pipe((0,br.w)(r=>this.icaoCode$(i).pipe((0,kn.U)(a=>[...a.notamList,...r.notamList]))))}decodeNotam(t){const e=this.separateToParts(t);return{...this.parseQ(e.q),id:e.id.split(" ")[0],type:e.id.split(" ")[1],linkedNotam:e.id.split(" ")[2],issuer:e.a,from:this.convertToDate(e.b),to:this.convertToDate(e.c),schedule:e.d,msg:this.parseMsg(e.e),originalMsg:t,lowerLimit2:e.f,upperLimit2:e.g}}notamsToGeoJson(t){return function PC(n,t){void 0===t&&(t={});var e={type:"FeatureCollection"};return t.id&&(e.id=t.id),t.bbox&&(e.bbox=t.bbox),e.features=n,e}(t.map(e=>function KG(n,t,e){void 0===e&&(e={});for(var i=e.steps||64,r=e.properties?e.properties:!Array.isArray(n)&&"Feature"===n.type&&n.properties?n.properties:{},a=[],f=0;f<i;f++)a.push(XG(n,t,-360*f/i,e).geometry.coordinates);return a.push(a[0]),p1([a],r)}(e.decoded.position.toArray(),e.decoded.radius/1e3,{properties:e})))}separateToParts(t){const e=t.indexOf("Q)"),i=t.indexOf("A)"),r=t.indexOf("B)"),a=t.indexOf("C)"),f=t.indexOf("D)"),b=t.indexOf("E)"),S=t.indexOf("F)"),M=t.indexOf("G)");return{id:t.substring(0,e)?.trim(),q:t.substring(e+2,i)?.trim(),a:t.substring(i+2,r)?.trim(),b:t.substring(r+2,a)?.trim(),c:t.substring(a+2,-1===f?b:f)?.trim(),d:-1===f?void 0:t.substring(f+2,b)?.trim(),e:t.substring(b+2,-1===S?void 0:S)?.trim(),f:-1===S?void 0:t.substring(S+2,-1===M?void 0:M)?.trim(),g:-1===M?void 0:t.substring(M+2)?.trim()}}convertToDate(t){return new Date(`20${t.substring(0,2)}-${t.substring(2,4)}-${t.substring(4,6)}T${t.substring(6,8)}:${t.substring(8,10)}:00.000Z`)}parseQ(t){const[e,i,r,a,f,b,S,M]=t.split("/");return{fir:e,subjectIdentification:i.substring(1,3),subjectCondition:i.substring(3),traffic:{checklist:r.toUpperCase().includes("K"),instrument:r.toUpperCase().includes("I"),visual:r.toUpperCase().includes("V")},purpose:{checklist:a.toUpperCase().includes("K"),flightOperation:a.toUpperCase().includes("O"),immediateAttention:a.toUpperCase().includes("N"),miscellaneous:a.toUpperCase().includes("M"),preFlightBriefing:a.toUpperCase().includes("B")},scope:{aerodrome:f.toUpperCase().includes("A"),checklist:f.toUpperCase().includes("K"),enRoute:f.toUpperCase().includes("E"),navigationWarning:f.toUpperCase().includes("W")},flightLevelLowerLimit:Number(b),flightLevelUpperLimit:Number(S),radius:1852*Number(M.substring(11)),position:new MC.LngLat(Number(M.substring(5,10))/100*("W"===M.substring(10,11)?-1:1),Number(M.substring(0,4))/100*("S"===M.substring(4,5)?-1:1))}}parseMsg(t){const e=Wj;return t.replace(/[A-Z]+/gi,i=>e[i]??i).toUpperCase()}}eb.\u0275fac=function(t){return new(t||eb)(o.LFG(Nc))},eb.\u0275prov=o.Yz7({token:eb,factory:eb.\u0275fac,providedIn:"root"});class tb{constructor(t){this.http=t}getAirSpaces$(){return this.http.get("assets/open-aip-db/sk_asp.geojson").pipe((0,kn.U)(t=>({...t,features:t.features.map(e=>({...e,properties:{...e.properties,lowerLimitMetersMsl:this.toMslMeters(e.properties.lowerLimit),upperLimitMetersMsl:this.toMslMeters(e.properties.upperLimit)}}))})))}getAirports$(){return this.http.get("assets/open-aip-db/sk_apt.geojson").pipe((0,kn.U)(t=>({...t,features:t.features.map(e=>({...e,properties:{...e.properties,mainRunway:this.runwayPaved(e.properties.runways?.find(i=>i.mainRunway)),runways:e.properties.runways?.sort((i,r)=>i.mainRunway===r.mainRunway?0:i.mainRunway?-1:1),mainFrequency:e.properties.frequencies?.find(i=>i.primary)??{},frequencies:e.properties.frequencies?.sort((i,r)=>i.primary===r.primary?0:i.primary?-1:1)}}))})))}runwayPaved(t){return t?{...t,paved:t.surface.mainComposite in[u1.asphalt,u1.concrete]}:{}}toMslMeters(t){return t.value*(t.unit===Bc.feet?.3048:t.unit===Bc.flightLevel?30.48:1)}}tb.\u0275fac=function(t){return new(t||tb)(o.LFG(Nc))},tb.\u0275prov=o.Yz7({token:tb,factory:tb.\u0275fac,providedIn:"root"});class nb{constructor(t,e,i,r,a,f,b,S,M,O,N){this.store=t,this.rainViewer=e,this.screenWakeLockService=i,this.headingService=r,this.mapService=a,this.openAip=f,this.onMapAirSpacesService=b,this.onMapAirportsService=S,this.onMapNotamsService=M,this.notams=O,this.onMapRainViewerService=N,this.visibilitySubj$=ac(document,"visibilitychange").pipe((0,kn.U)(()=>document.visibilityState),Yl(document.visibilityState)),this.wakeLockEnabled$=this.store.select(jO).pipe((0,fa.x)()),this.radarReloadTime=3e5,this.screenWakeLock$=Oy(()=>So([this.wakeLockEnabled$,this.visibilitySubj$]).pipe((0,Wn.b)(1e3),no(([U,j])=>{U&&"visible"===j?this.screenWakeLockService.lock():this.screenWakeLockService.release()})),{dispatch:!1}),this.heading$=Oy(()=>this.headingService.heading$.pipe(no(U=>document.documentElement.style.setProperty("--heading",`${U}`))),{dispatch:!1}),this.loadAirSpaces$=Oy(()=>this.mapService.loaded$.pipe((0,co.h)(U=>U),(0,br.w)(()=>this.openAip.getAirSpaces$()),no(U=>this.onMapAirSpacesService.createLayers(U)),(0,br.w)(()=>this.store.select($O)),no(U=>this.onMapAirSpacesService.reloadSettings(U))),{dispatch:!1}),this.loadAirports$=Oy(()=>this.mapService.loaded$.pipe((0,co.h)(U=>U),(0,br.w)(()=>ll([this.openAip.getAirports$(),this.onMapAirportsService.addRequiredImages$()])),no(([U])=>this.onMapAirportsService.createLayers(U))),{dispatch:!1}),this.showFirstPositionNotams$=Oy(()=>this.mapService.loaded$.pipe((0,co.h)(U=>U),no(()=>this.onMapNotamsService.createLayers()),(0,br.w)(()=>this.mapService.geolocation$),(0,co.h)(U=>!!U),(0,uo.q)(1),(0,br.w)(U=>this.notams.aroundPointWithCodes$(new MC.LngLat(U.coords.longitude,U.coords.latitude),1e5,["LZBB"]).pipe((0,kn.U)(j=>this.notams.notamsToGeoJson(j)))),(0,br.w)(U=>{return this.store.select((n=U,(0,xi.P1)(HO,t=>({...n,features:n.features.filter(e=>!t.includes(e.properties.decoded.id))}))));var n}),no(U=>this.onMapNotamsService.setNotamsGeoJson(U))),{dispatch:!1}),this.showRainViewer$=Oy(()=>this.mapService.loaded$.pipe((0,co.h)(U=>U),(0,br.w)(()=>this.store.select(D5)),(0,fa.x)(),(0,br.w)(U=>eT(()=>U,ta(this.radarReloadTime).pipe(Yl(0),(0,br.w)(()=>So({urls:this.rainViewer.getUrls$(),settings:this.store.select(DC)}).pipe((0,Wn.b)(1e3)))),(0,an.of)(void 0))),no(U=>this.onMapRainViewerService.createLayers(U))),{dispatch:!1}),this.rainViewerAnimation$=Oy(()=>this.rainViewer.currentAnimationFrame$.pipe(KI(()=>this.store.select(DC)),no(([{frameNum:U},j])=>this.onMapRainViewerService.showFrame(U,j.opacity))),{dispatch:!1})}}nb.\u0275fac=function(t){return new(t||nb)(o.LFG(xi.yh),o.LFG(Qg),o.LFG(Ff),o.LFG(L0),o.LFG(Ld),o.LFG(tb),o.LFG(F0),o.LFG(B0),o.LFG(U0),o.LFG(eb),o.LFG(V0))},nb.\u0275prov=o.Yz7({token:nb,factory:nb.\u0275fac});var Rs=(()=>{return(n=Rs||(Rs={}))[n.other=0]="other",n[n.restricted=1]="restricted",n[n.danger=2]="danger",n[n.prohibited=3]="prohibited",n[n.ctr=4]="ctr",n[n.tmz=5]="tmz",n[n.rmz=6]="rmz",n[n.tma=7]="tma",n[n.tra=8]="tra",n[n.tsa=9]="tsa",n[n.fir=10]="fir",n[n.uir=11]="uir",n[n.adiz=12]="adiz",n[n.atz=13]="atz",n[n.matz=14]="matz",n[n.airway=15]="airway",n[n.mtr=16]="mtr",n[n.alertArea=17]="alertArea",n[n.warningArea=18]="warningArea",n[n.protectedArea=19]="protectedArea",n[n.htz=20]="htz",n[n.gliderSector=21]="gliderSector",n[n.trp=22]="trp",n[n.tiz=23]="tiz",n[n.tia=24]="tia",n[n.mta=25]="mta",n[n.cta=26]="cta",n[n.acc=27]="acc",n[n.sport=28]="sport",n[n.lowOverflightRestriction=29]="lowOverflightRestriction",Rs;var n})();const Jj=(0,xi.Lq)({radar:{enabled:!1,type:"radar",colorScheme:1,snow:!1,smooth:!0,animationSpeed:30,opacity:75,widget:{enabled:!1,position:{x:0,y:0},background:"#ffffff",textColorPast:"#707070",textColorFuture:"#005706"}},airSpaces:{[Rs.other]:{enabled:!0,color:"#808080",opacity:.1,minZoom:5},[Rs.restricted]:{enabled:!0,color:"#ffa500",opacity:.1,minZoom:5},[Rs.danger]:{enabled:!0,color:"#a52a2a",opacity:.1,minZoom:5},[Rs.prohibited]:{enabled:!0,color:"#ff0000",opacity:.1,minZoom:5},[Rs.ctr]:{enabled:!0,color:"#808080",opacity:.1,minZoom:5},[Rs.tmz]:{enabled:!0,color:"#808080",opacity:.1,minZoom:5},[Rs.rmz]:{enabled:!0,color:"#808080",opacity:.1,minZoom:5},[Rs.tma]:{enabled:!0,color:"#808080",opacity:.1,minZoom:5},[Rs.tra]:{enabled:!0,color:"#808080",opacity:.1,minZoom:5},[Rs.tsa]:{enabled:!0,color:"#808080",opacity:.1,minZoom:5},[Rs.fir]:{enabled:!0,color:"#808080",opacity:.1,minZoom:5},[Rs.uir]:{enabled:!0,color:"#808080",opacity:.1,minZoom:5},[Rs.adiz]:{enabled:!0,color:"#808080",opacity:.1,minZoom:5},[Rs.atz]:{enabled:!0,color:"#808080",opacity:.1,minZoom:5},[Rs.matz]:{enabled:!0,color:"#808080",opacity:.1,minZoom:5},[Rs.airway]:{enabled:!0,color:"#808080",opacity:.1,minZoom:5},[Rs.mtr]:{enabled:!0,color:"#808080",opacity:.1,minZoom:5},[Rs.alertArea]:{enabled:!0,color:"#808080",opacity:.1,minZoom:5},[Rs.warningArea]:{enabled:!0,color:"#808080",opacity:.1,minZoom:5},[Rs.protectedArea]:{enabled:!0,color:"#808080",opacity:.1,minZoom:5},[Rs.htz]:{enabled:!0,color:"#808080",opacity:.1,minZoom:5},[Rs.gliderSector]:{enabled:!0,color:"#808080",opacity:.1,minZoom:5},[Rs.trp]:{enabled:!0,color:"#808080",opacity:.1,minZoom:5},[Rs.tiz]:{enabled:!0,color:"#808080",opacity:.1,minZoom:5},[Rs.tia]:{enabled:!0,color:"#808080",opacity:.1,minZoom:5},[Rs.mta]:{enabled:!0,color:"#808080",opacity:.1,minZoom:5},[Rs.cta]:{enabled:!0,color:"#808080",opacity:.1,minZoom:5},[Rs.acc]:{enabled:!0,color:"#808080",opacity:.1,minZoom:5},[Rs.sport]:{enabled:!0,color:"#808080",opacity:.1,minZoom:5},[Rs.lowOverflightRestriction]:{enabled:!0,color:"#808080",opacity:.1,minZoom:5}},notams:{hiddenList:[]},screenWakeLock:{enabled:Ff.supported},navigation:{minActivationSpeedKpH:30,directionLineSegmentSeconds:60,directionLineSegmentCount:5}},(0,xi.on)(Ql.enabledChanged,(n,{enabled:t})=>({...n,radar:{...n.radar,enabled:t}})),(0,xi.on)(Ql.enabledWidgetChanged,(n,{enabled:t})=>({...n,radar:{...n.radar,widget:{...n.radar.widget,enabled:t}}})),(0,xi.on)(Ql.typeChanged,(n,{viewType:t})=>({...n,radar:{...n.radar,type:t}})),(0,xi.on)(Ql.colorSchemeChanged,(n,{colorScheme:t})=>({...n,radar:{...n.radar,colorScheme:t}})),(0,xi.on)(Ql.enabledSmoothChanged,(n,{enabled:t})=>({...n,radar:{...n.radar,smooth:t}})),(0,xi.on)(Ql.enabledSnowChanged,(n,{enabled:t})=>({...n,radar:{...n.radar,snow:t}})),(0,xi.on)(Ql.animationSpeedChanged,(n,{animationSpeed:t})=>({...n,radar:{...n.radar,animationSpeed:t}})),(0,xi.on)(Ql.opacityChanged,(n,{opacity:t})=>({...n,radar:{...n.radar,opacity:t}})),(0,xi.on)(Ql.widgetBgColorChanged,(n,{color:t})=>({...n,radar:{...n.radar,widget:{...n.radar.widget,background:t}}})),(0,xi.on)(Ql.widgetTextColorPastChanged,(n,{color:t})=>({...n,radar:{...n.radar,widget:{...n.radar.widget,textColorPast:t}}})),(0,xi.on)(Ql.widgetTextColorFutureChanged,(n,{color:t})=>({...n,radar:{...n.radar,widget:{...n.radar.widget,textColorFuture:t}}})),(0,xi.on)(UO.positionMoved,(n,{position:t})=>({...n,radar:{...n.radar,widget:{...n.radar.widget,position:t}}})),(0,xi.on)(e_.enabledChanged,(n,{airspaceType:t,enabled:e})=>({...n,airSpaces:{...n.airSpaces,[t]:{...n.airSpaces[t],enabled:e}}})),(0,xi.on)(e_.colorChanged,(n,{airspaceType:t,color:e})=>({...n,airSpaces:{...n.airSpaces,[t]:{...n.airSpaces[t],color:e}}})),(0,xi.on)(e_.opacityChanged,(n,{airspaceType:t,opacity:e})=>({...n,airSpaces:{...n.airSpaces,[t]:{...n.airSpaces[t],opacity:e}}})),(0,xi.on)(e_.minZoomChanged,(n,{airspaceType:t,minZoom:e})=>({...n,airSpaces:{...n.airSpaces,[t]:{...n.airSpaces[t],minZoom:e}}})),(0,xi.on)(VO.hide,(n,{notamId:t})=>({...n,notams:{...n.notams,hiddenList:[...n.notams.hiddenList.filter(e=>e!==t),t]}})),(0,xi.on)(GO.screenWakeLockEnableChanged,(n,{enabled:t})=>({...n,screenWakeLock:{...n.screenWakeLock,enabled:t}})),(0,xi.on)(T0.directionLineSegmentSeconds,(n,{seconds:t})=>({...n,navigation:{...n.navigation,directionLineSegmentSeconds:t}})),(0,xi.on)(T0.directionLineSegmentCount,(n,{count:t})=>({...n,navigation:{...n.navigation,directionLineSegmentCount:t}})),(0,xi.on)(T0.minimumActivationSpeedChanged,(n,{minActivationSpeedKpH:t})=>({...n,navigation:{...n.navigation,minActivationSpeedKpH:t}})));var Qj=W(4999);const yA="@ngrx/store/init",tq=/(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})/,nq=(n,t)=>"string"==typeof t&&tq.test(t)?new Date(t):t,iq=(n,t)=>t;function GF(n,t){return t.reduce((e,i)=>{if("string"==typeof i||"number"==typeof i){const r=n?.[i];void 0!==r&&(e[i]=r)}else for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=GF(n[r],i[r]));return e},{})}const aq=(n,t,e,i,r,a)=>{if(a)try{if(!0!==a(n))return}catch(f){if(f instanceof TypeError)return;throw f}t.forEach(f=>{let S,M,O,b=n[f];if("object"==typeof f){let N=Object.keys(f)[0];if(b=n[N],typeof b<"u"&&f[N]){if(f[N].serialize)b=f[N].serialize(b);else{let U;f[N].reduce?U=f[N]:f[N].filter&&(U=f[N].filter),U&&(b=GF(b,U)),f[N].encrypt&&f[N].decrypt?"function"==typeof f[N].encrypt&&(O=f[N].encrypt):(f[N].encrypt||f[N].decrypt)&&console.error(`Either encrypt or decrypt function is not present on '${f[N]}' key object.`)}S=f[N].replacer,M=f[N].space}f=N}if(typeof b<"u"&&void 0!==e)try{O&&(b=O("string"==typeof b?b:JSON.stringify(b,S,M))),e.setItem(i(f),"string"==typeof b?b:JSON.stringify(b,S,M))}catch(N){console.warn("Unable to save state to localStorage:",N)}else if(typeof b>"u"&&r&&void 0!==e)try{e.removeItem(i(f))}catch(N){console.warn(`Exception on removing/cleaning undefined '${f}' state`,N)}})},lq=(n,t,e)=>((e.type===yA||"@ngrx/store/update-reducers"===e.type)&&t&&(n=Qj(n,t,{arrayMerge:(a,f,b)=>f})),n),dq=[function uq(n){return(n=>t=>{(void 0===n.storage&&!n.checkStorageAvailability||n.checkStorageAvailability&&typeof window<"u")&&(n.storage=localStorage||window.localStorage),void 0===n.storageKeySerializer&&(n.storageKeySerializer=a=>a),void 0===n.restoreDates&&(n.restoreDates=!0);let e=n.mergeReducer;(void 0===e||"function"!=typeof e)&&(e=lq);const i=(n=>n.map(t=>{let e=t;if("object"==typeof t&&(e=Object.keys(t)[0]),"string"!=typeof e)throw new TypeError("localStorageSync Unknown Parameter Type: Expected type of string, got "+typeof e);return t}))(n.keys),r=n.rehydrate?((n,t,e,i)=>n.reduce((r,a)=>{let S,M,f=a,b=i?nq:iq;if("object"==typeof f&&(f=Object.keys(f)[0],"function"==typeof a[f]?b=a[f]:(a[f].reviver&&(b=a[f].reviver),a[f].deserialize&&(S=a[f].deserialize)),a[f].encrypt&&a[f].decrypt?"function"==typeof a[f].encrypt&&"function"==typeof a[f].decrypt?M=a[f].decrypt:console.error(`Either encrypt or decrypt is not a function on '${a[f]}' key object.`):(a[f].encrypt||a[f].decrypt)&&console.error(`Either encrypt or decrypt function is not present on '${a[f]}' key object.`)),void 0!==t){let O=t.getItem(e(f));if(O){M&&(O=M(O));const N=new RegExp("{|\\[");let U=O;return("null"===O||"true"===O||"false"===O||N.test(O.charAt(0)))&&(U=JSON.parse(O,b)),Object.assign({},r,{[f]:S?S(U):U})}}return r},{}))(i,n.storage,n.storageKeySerializer,n.restoreDates):void 0;return function(a,f){let b;return b=f.type!==yA||a?{...a}:t(a,f),b=e(b,r,f),b=t(b,f),f.type!==yA&&aq(b,i,n.storage,n.storageKeySerializer,n.removeOnUndefined,n.syncCondition),b}})({keys:["core"],rehydrate:!0})(n)}];class ib{}ib.\u0275fac=function(t){return new(t||ib)},ib.\u0275mod=o.oAB({type:ib,bootstrap:[c1]}),ib.\u0275inj=o.cJS({providers:[{provide:oe,useFactory:n=>n.getBaseHrefFromDOM(),deps:[Oe]}],imports:[s,ay,WS,Cb,R0,E4.forRoot({langToLocaleMapping:{en:"en-US",sk:"sk-SK"}}),D4.forRoot({locales:["en-US","sk-SK"]}),pz,$w,R,uM,Gg,SD,db,bM,Yi,SN,mN,mB,VN,WP,z4,U4,RU.forRoot([]),xi.Aw.forRoot({core:Jj},{runtimeChecks:{strictStateImmutability:!0,strictActionImmutability:!0,strictStateSerializability:!0,strictActionSerializability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!0},metaReducers:dq}),d5.forRoot([nb]),p5.FT.instrument({maxAge:25,logOnly:true}),S5]}),(0,o.G48)(),$().bootstrapModule(ib).catch(n=>console.error(n))},1503:(lt,Pe,W)=>{"use strict";var me=W(9626);function Ae(E){var Se=[1/0,1/0,-1/0,-1/0];return me.coordEach(E,function(he){Se[0]>he[0]&&(Se[0]=he[0]),Se[1]>he[1]&&(Se[1]=he[1]),Se[2]<he[0]&&(Se[2]=he[0]),Se[3]<he[1]&&(Se[3]=he[1])}),Se}Ae.default=Ae,Pe.Z=Ae},8275:(lt,Pe)=>{"use strict";function W(Xe,st,de){void 0===de&&(de={});var Qe={type:"Feature"};return(0===de.id||de.id)&&(Qe.id=de.id),de.bbox&&(Qe.bbox=de.bbox),Qe.properties=st||{},Qe.geometry=Xe,Qe}function me(Xe,st,de){if(void 0===de&&(de={}),!Xe)throw new Error("coordinates is required");if(!Array.isArray(Xe))throw new Error("coordinates must be an Array");if(Xe.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!we(Xe[0])||!we(Xe[1]))throw new Error("coordinates must contain numbers");return W({type:"Point",coordinates:Xe},st,de)}function E(Xe,st,de){void 0===de&&(de={});for(var Qe=0,dt=Xe;Qe<dt.length;Qe++){var Me=dt[Qe];if(Me.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var ut=0;ut<Me[Me.length-1].length;ut++)if(Me[Me.length-1][ut]!==Me[0][ut])throw new Error("First and last Position are not equivalent.")}return W({type:"Polygon",coordinates:Xe},st,de)}function he(Xe,st,de){if(void 0===de&&(de={}),Xe.length<2)throw new Error("coordinates must be an array of two or more positions");return W({type:"LineString",coordinates:Xe},st,de)}function Ne(Xe,st){void 0===st&&(st={});var de={type:"FeatureCollection"};return st.id&&(de.id=st.id),st.bbox&&(de.bbox=st.bbox),de.features=Xe,de}function xe(Xe,st,de){return void 0===de&&(de={}),W({type:"MultiLineString",coordinates:Xe},st,de)}function ct(Xe,st,de){return void 0===de&&(de={}),W({type:"MultiPoint",coordinates:Xe},st,de)}function Ke(Xe,st,de){return void 0===de&&(de={}),W({type:"MultiPolygon",coordinates:Xe},st,de)}function Ct(Xe,st){void 0===st&&(st="kilometers");var de=Pe.factors[st];if(!de)throw new Error(st+" units is invalid");return Xe*de}function ue(Xe,st){void 0===st&&(st="kilometers");var de=Pe.factors[st];if(!de)throw new Error(st+" units is invalid");return Xe/de}function ye(Xe){return Xe%(2*Math.PI)*180/Math.PI}function we(Xe){return!isNaN(Xe)&&null!==Xe&&!Array.isArray(Xe)}Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.earthRadius=6371008.8,Pe.factors={centimeters:100*Pe.earthRadius,centimetres:100*Pe.earthRadius,degrees:Pe.earthRadius/111325,feet:3.28084*Pe.earthRadius,inches:39.37*Pe.earthRadius,kilometers:Pe.earthRadius/1e3,kilometres:Pe.earthRadius/1e3,meters:Pe.earthRadius,metres:Pe.earthRadius,miles:Pe.earthRadius/1609.344,millimeters:1e3*Pe.earthRadius,millimetres:1e3*Pe.earthRadius,nauticalmiles:Pe.earthRadius/1852,radians:1,yards:1.0936*Pe.earthRadius},Pe.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/Pe.earthRadius,yards:1.0936133},Pe.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},Pe.feature=W,Pe.geometry=function o(Xe,st,de){switch(void 0===de&&(de={}),Xe){case"Point":return me(st).geometry;case"LineString":return he(st).geometry;case"Polygon":return E(st).geometry;case"MultiPoint":return ct(st).geometry;case"MultiLineString":return xe(st).geometry;case"MultiPolygon":return Ke(st).geometry;default:throw new Error(Xe+" is invalid")}},Pe.point=me,Pe.points=function Ae(Xe,st,de){return void 0===de&&(de={}),Ne(Xe.map(function(Qe){return me(Qe,st)}),de)},Pe.polygon=E,Pe.polygons=function Se(Xe,st,de){return void 0===de&&(de={}),Ne(Xe.map(function(Qe){return E(Qe,st)}),de)},Pe.lineString=he,Pe.lineStrings=function Oe(Xe,st,de){return void 0===de&&(de={}),Ne(Xe.map(function(Qe){return he(Qe,st)}),de)},Pe.featureCollection=Ne,Pe.multiLineString=xe,Pe.multiPoint=ct,Pe.multiPolygon=Ke,Pe.geometryCollection=function Te(Xe,st,de){return void 0===de&&(de={}),W({type:"GeometryCollection",geometries:Xe},st,de)},Pe.round=function at(Xe,st){if(void 0===st&&(st=0),st&&!(st>=0))throw new Error("precision must be a positive number");var de=Math.pow(10,st||0);return Math.round(Xe*de)/de},Pe.radiansToLength=Ct,Pe.lengthToRadians=ue,Pe.lengthToDegrees=function De(Xe,st){return ye(ue(Xe,st))},Pe.bearingToAzimuth=function oe(Xe){var st=Xe%360;return st<0&&(st+=360),st},Pe.radiansToDegrees=ye,Pe.degreesToRadians=function ce(Xe){return Xe%360*Math.PI/180},Pe.convertLength=function Re(Xe,st,de){if(void 0===st&&(st="kilometers"),void 0===de&&(de="kilometers"),!(Xe>=0))throw new Error("length must be a positive number");return Ct(ue(Xe,st),de)},Pe.convertArea=function ve(Xe,st,de){if(void 0===st&&(st="meters"),void 0===de&&(de="kilometers"),!(Xe>=0))throw new Error("area must be a positive number");var Qe=Pe.areaFactors[st];if(!Qe)throw new Error("invalid original units");var dt=Pe.areaFactors[de];if(!dt)throw new Error("invalid final units");return Xe/Qe*dt},Pe.isNumber=we,Pe.isObject=function Fe(Xe){return!!Xe&&Xe.constructor===Object},Pe.validateBBox=function se(Xe){if(!Xe)throw new Error("bbox is required");if(!Array.isArray(Xe))throw new Error("bbox must be an Array");if(4!==Xe.length&&6!==Xe.length)throw new Error("bbox must be an Array of 4 or 6 numbers");Xe.forEach(function(st){if(!we(st))throw new Error("bbox must only contain numbers")})},Pe.validateId=function _t(Xe){if(!Xe)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof Xe))throw new Error("id must be a number or a string")}},1105:(lt,Pe,W)=>{var o=W(1356),me=W(3407),Ae=W(2e3),E=W(2342),Se=W(9235),he=W(2374),Oe=Date.prototype.getTime;function xe(Te){return null==Te}function ct(Te){return!(!Te||"object"!=typeof Te||"number"!=typeof Te.length||"function"!=typeof Te.copy||"function"!=typeof Te.slice||Te.length>0&&"number"!=typeof Te[0])}lt.exports=function Ne(Te,at,Ct){var ue=Ct||{};return!!(ue.strict?Ae(Te,at):Te===at)||(!Te||!at||"object"!=typeof Te&&"object"!=typeof at?ue.strict?Ae(Te,at):Te==at:function Ke(Te,at,Ct){var ue,De;if(typeof Te!=typeof at||xe(Te)||xe(at)||Te.prototype!==at.prototype||me(Te)!==me(at))return!1;var oe=E(Te),ye=E(at);if(oe!==ye)return!1;if(oe||ye)return Te.source===at.source&&Se(Te)===Se(at);if(he(Te)&&he(at))return Oe.call(Te)===Oe.call(at);var ce=ct(Te),Re=ct(at);if(ce!==Re)return!1;if(ce||Re){if(Te.length!==at.length)return!1;for(ue=0;ue<Te.length;ue++)if(Te[ue]!==at[ue])return!1;return!0}if(typeof Te!=typeof at)return!1;try{var ve=o(Te),we=o(at)}catch{return!1}if(ve.length!==we.length)return!1;for(ve.sort(),we.sort(),ue=ve.length-1;ue>=0;ue--)if(ve[ue]!=we[ue])return!1;for(ue=ve.length-1;ue>=0;ue--)if(!Ne(Te[De=ve[ue]],at[De],Ct))return!1;return!0}(Te,at,ue))}},9626:(lt,Pe,W)=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});var o=W(8275);function me(ce,Re,ve){if(null!==ce)for(var we,Fe,se,_t,Xe,st,de,Me,Qe=0,dt=0,ut=ce.type,$e="FeatureCollection"===ut,gt="Feature"===ut,Mt=$e?ce.features.length:1,tt=0;tt<Mt;tt++){Xe=(Me=!!(de=$e?ce.features[tt].geometry:gt?ce.geometry:ce)&&"GeometryCollection"===de.type)?de.geometries.length:1;for(var Bt=0;Bt<Xe;Bt++){var Vt=0,rn=0;if(null!==(_t=Me?de.geometries[Bt]:de)){st=_t.coordinates;var Gt=_t.type;switch(Qe=!ve||"Polygon"!==Gt&&"MultiPolygon"!==Gt?0:1,Gt){case null:break;case"Point":if(!1===Re(st,dt,tt,Vt,rn))return!1;dt++,Vt++;break;case"LineString":case"MultiPoint":for(we=0;we<st.length;we++){if(!1===Re(st[we],dt,tt,Vt,rn))return!1;dt++,"MultiPoint"===Gt&&Vt++}"LineString"===Gt&&Vt++;break;case"Polygon":case"MultiLineString":for(we=0;we<st.length;we++){for(Fe=0;Fe<st[we].length-Qe;Fe++){if(!1===Re(st[we][Fe],dt,tt,Vt,rn))return!1;dt++}"MultiLineString"===Gt&&Vt++,"Polygon"===Gt&&rn++}"Polygon"===Gt&&Vt++;break;case"MultiPolygon":for(we=0;we<st.length;we++){for(rn=0,Fe=0;Fe<st[we].length;Fe++){for(se=0;se<st[we][Fe].length-Qe;se++){if(!1===Re(st[we][Fe][se],dt,tt,Vt,rn))return!1;dt++}rn++}Vt++}break;case"GeometryCollection":for(we=0;we<_t.geometries.length;we++)if(!1===me(_t.geometries[we],Re,ve))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function E(ce,Re){var ve;switch(ce.type){case"FeatureCollection":for(ve=0;ve<ce.features.length&&!1!==Re(ce.features[ve].properties,ve);ve++);break;case"Feature":Re(ce.properties,0)}}function he(ce,Re){if("Feature"===ce.type)Re(ce,0);else if("FeatureCollection"===ce.type)for(var ve=0;ve<ce.features.length&&!1!==Re(ce.features[ve],ve);ve++);}function xe(ce,Re){var ve,we,Fe,se,_t,Xe,st,de,Qe,dt,Me=0,ut="FeatureCollection"===ce.type,$e="Feature"===ce.type,gt=ut?ce.features.length:1;for(ve=0;ve<gt;ve++){for(de=ut?ce.features[ve].properties:$e?ce.properties:{},Qe=ut?ce.features[ve].bbox:$e?ce.bbox:void 0,dt=ut?ce.features[ve].id:$e?ce.id:void 0,_t=(st=!!(Xe=ut?ce.features[ve].geometry:$e?ce.geometry:ce)&&"GeometryCollection"===Xe.type)?Xe.geometries.length:1,Fe=0;Fe<_t;Fe++)if(null!==(se=st?Xe.geometries[Fe]:Xe))switch(se.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===Re(se,Me,de,Qe,dt))return!1;break;case"GeometryCollection":for(we=0;we<se.geometries.length;we++)if(!1===Re(se.geometries[we],Me,de,Qe,dt))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===Re(null,Me,de,Qe,dt))return!1;Me++}}function Ke(ce,Re){xe(ce,function(ve,we,Fe,se,_t){var st,Xe=null===ve?null:ve.type;switch(Xe){case null:case"Point":case"LineString":case"Polygon":return!1!==Re(o.feature(ve,Fe,{bbox:se,id:_t}),we,0)&&void 0}switch(Xe){case"MultiPoint":st="Point";break;case"MultiLineString":st="LineString";break;case"MultiPolygon":st="Polygon"}for(var de=0;de<ve.coordinates.length;de++)if(!1===Re(o.feature({type:st,coordinates:ve.coordinates[de]},Fe),we,de))return!1})}function at(ce,Re){Ke(ce,function(ve,we,Fe){var se=0;if(ve.geometry){var _t=ve.geometry.type;if("Point"!==_t&&"MultiPoint"!==_t){var Xe,st=0,de=0,Qe=0;if(!1===me(ve,function(dt,Me,ut,$e,gt){if(void 0===Xe||we>st||$e>de||gt>Qe)return Xe=dt,st=we,de=$e,Qe=gt,void(se=0);var Mt=o.lineString([Xe,dt],ve.properties);if(!1===Re(Mt,we,Fe,gt,se))return!1;se++,Xe=dt}))return!1}}})}function ue(ce,Re){if(!ce)throw new Error("geojson is required");Ke(ce,function(ve,we,Fe){if(null!==ve.geometry){var _t=ve.geometry.coordinates;switch(ve.geometry.type){case"LineString":if(!1===Re(ve,we,Fe,0,0))return!1;break;case"Polygon":for(var Xe=0;Xe<_t.length;Xe++)if(!1===Re(o.lineString(_t[Xe],ve.properties),we,Fe,Xe))return!1}}})}Pe.coordAll=function Ne(ce){var Re=[];return me(ce,function(ve){Re.push(ve)}),Re},Pe.coordEach=me,Pe.coordReduce=function Ae(ce,Re,ve,we){var Fe=ve;return me(ce,function(se,_t,Xe,st,de){Fe=0===_t&&void 0===ve?se:Re(Fe,se,_t,Xe,st,de)},we),Fe},Pe.featureEach=he,Pe.featureReduce=function Oe(ce,Re,ve){var we=ve;return he(ce,function(Fe,se){we=0===se&&void 0===ve?Fe:Re(we,Fe,se)}),we},Pe.findPoint=function ye(ce,Re){if(!o.isObject(Re=Re||{}))throw new Error("options is invalid");var Xe,ve=Re.featureIndex||0,we=Re.multiFeatureIndex||0,Fe=Re.geometryIndex||0,se=Re.coordIndex||0,_t=Re.properties;switch(ce.type){case"FeatureCollection":ve<0&&(ve=ce.features.length+ve),_t=_t||ce.features[ve].properties,Xe=ce.features[ve].geometry;break;case"Feature":_t=_t||ce.properties,Xe=ce.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Xe=ce;break;default:throw new Error("geojson is invalid")}if(null===Xe)return null;var st=Xe.coordinates;switch(Xe.type){case"Point":return o.point(st,_t,Re);case"MultiPoint":return we<0&&(we=st.length+we),o.point(st[we],_t,Re);case"LineString":return se<0&&(se=st.length+se),o.point(st[se],_t,Re);case"Polygon":return Fe<0&&(Fe=st.length+Fe),se<0&&(se=st[Fe].length+se),o.point(st[Fe][se],_t,Re);case"MultiLineString":return we<0&&(we=st.length+we),se<0&&(se=st[we].length+se),o.point(st[we][se],_t,Re);case"MultiPolygon":return we<0&&(we=st.length+we),Fe<0&&(Fe=st[we].length+Fe),se<0&&(se=st[we][Fe].length-se),o.point(st[we][Fe][se],_t,Re)}throw new Error("geojson is invalid")},Pe.findSegment=function oe(ce,Re){if(!o.isObject(Re=Re||{}))throw new Error("options is invalid");var Xe,ve=Re.featureIndex||0,we=Re.multiFeatureIndex||0,Fe=Re.geometryIndex||0,se=Re.segmentIndex||0,_t=Re.properties;switch(ce.type){case"FeatureCollection":ve<0&&(ve=ce.features.length+ve),_t=_t||ce.features[ve].properties,Xe=ce.features[ve].geometry;break;case"Feature":_t=_t||ce.properties,Xe=ce.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Xe=ce;break;default:throw new Error("geojson is invalid")}if(null===Xe)return null;var st=Xe.coordinates;switch(Xe.type){case"Point":case"MultiPoint":return null;case"LineString":return se<0&&(se=st.length+se-1),o.lineString([st[se],st[se+1]],_t,Re);case"Polygon":return Fe<0&&(Fe=st.length+Fe),se<0&&(se=st[Fe].length+se-1),o.lineString([st[Fe][se],st[Fe][se+1]],_t,Re);case"MultiLineString":return we<0&&(we=st.length+we),se<0&&(se=st[we].length+se-1),o.lineString([st[we][se],st[we][se+1]],_t,Re);case"MultiPolygon":return we<0&&(we=st.length+we),Fe<0&&(Fe=st[we].length+Fe),se<0&&(se=st[we][Fe].length-se-1),o.lineString([st[we][Fe][se],st[we][Fe][se+1]],_t,Re)}throw new Error("geojson is invalid")},Pe.flattenEach=Ke,Pe.flattenReduce=function Te(ce,Re,ve){var we=ve;return Ke(ce,function(Fe,se,_t){we=0===se&&0===_t&&void 0===ve?Fe:Re(we,Fe,se,_t)}),we},Pe.geomEach=xe,Pe.geomReduce=function ct(ce,Re,ve){var we=ve;return xe(ce,function(Fe,se,_t,Xe,st){we=0===se&&void 0===ve?Fe:Re(we,Fe,se,_t,Xe,st)}),we},Pe.lineEach=ue,Pe.lineReduce=function De(ce,Re,ve){var we=ve;return ue(ce,function(Fe,se,_t,Xe){we=0===se&&void 0===ve?Fe:Re(we,Fe,se,_t,Xe)}),we},Pe.propEach=E,Pe.propReduce=function Se(ce,Re,ve){var we=ve;return E(ce,function(Fe,se){we=0===se&&void 0===ve?Fe:Re(we,Fe,se)}),we},Pe.segmentEach=at,Pe.segmentReduce=function Ct(ce,Re,ve){var we=ve,Fe=!1;return at(ce,function(se,_t,Xe,st,de){we=!1===Fe&&void 0===ve?se:Re(we,se,_t,Xe,st,de),Fe=!0}),we}},5834:(lt,Pe,W)=>{"use strict";var o=W(5203),me=W(5685),Ae=me(o("String.prototype.indexOf"));lt.exports=function(Se,he){var Oe=o(Se,!!he);return"function"==typeof Oe&&Ae(Se,".prototype.")>-1?me(Oe):Oe}},5685:(lt,Pe,W)=>{"use strict";var o=W(4444),me=W(5203),Ae=me("%Function.prototype.apply%"),E=me("%Function.prototype.call%"),Se=me("%Reflect.apply%",!0)||o.call(E,Ae),he=me("%Object.getOwnPropertyDescriptor%",!0),Oe=me("%Object.defineProperty%",!0),Ne=me("%Math.max%");if(Oe)try{Oe({},"a",{value:1})}catch{Oe=null}lt.exports=function(Ke){var Te=Se(o,E,arguments);if(he&&Oe){var at=he(Te,"length");at.configurable&&Oe(Te,"length",{value:1+Ne(0,Ke.length-(arguments.length-1))})}return Te};var xe=function(){return Se(o,Ae,arguments)};Oe?Oe(lt.exports,"apply",{value:xe}):lt.exports.apply=xe},1335:(lt,Pe,W)=>{"use strict";var o=W(3156),me=W(7253),Ae=W(3870),E=W(7563).orient2d;function Se(ve,we,Fe){we=Math.max(0,void 0===we?2:we),Fe=Fe||0;var se=function Ct(ve){for(var we=ve[0],Fe=ve[0],se=ve[0],_t=ve[0],Xe=0;Xe<ve.length;Xe++){var st=ve[Xe];st[0]<we[0]&&(we=st),st[0]>se[0]&&(se=st),st[1]<Fe[1]&&(Fe=st),st[1]>_t[1]&&(_t=st)}var de=[we,Fe,se,_t],Qe=de.slice();for(Xe=0;Xe<ve.length;Xe++)Ae(ve[Xe],de)||Qe.push(ve[Xe]);return function Re(ve){ve.sort(ce);for(var we=[],Fe=0;Fe<ve.length;Fe++){for(;we.length>=2&&Ke(we[we.length-2],we[we.length-1],ve[Fe])<=0;)we.pop();we.push(ve[Fe])}for(var se=[],_t=ve.length-1;_t>=0;_t--){for(;se.length>=2&&Ke(se[se.length-2],se[se.length-1],ve[_t])<=0;)se.pop();se.push(ve[_t])}return se.pop(),we.pop(),we.concat(se)}(Qe)}(ve),_t=new o(16);_t.toBBox=function(rn){return{minX:rn[0],minY:rn[1],maxX:rn[0],maxY:rn[1]}},_t.compareMinX=function(rn,Gt){return rn[0]-Gt[0]},_t.compareMinY=function(rn,Gt){return rn[1]-Gt[1]},_t.load(ve);for(var de,Xe=[],st=0;st<se.length;st++){var Qe=se[st];_t.remove(Qe),de=ue(Qe,de),Xe.push(de)}var dt=new o(16);for(st=0;st<Xe.length;st++)dt.insert(at(Xe[st]));for(var Me=we*we,ut=Fe*Fe;Xe.length;){var $e=Xe.shift(),gt=$e.p,Mt=$e.next.p,tt=De(gt,Mt);if(!(tt<ut)){var Bt=tt/Me;(Qe=he(_t,$e.prev.p,gt,Mt,$e.next.next.p,Bt,dt))&&Math.min(De(Qe,gt),De(Qe,Mt))<=Bt&&(Xe.push($e),Xe.push(ue(Qe,$e)),_t.remove(Qe),dt.remove($e),dt.insert(at($e)),dt.insert(at($e.next)))}}$e=de;var Vt=[];do{Vt.push($e.p),$e=$e.next}while($e!==de);return Vt.push($e.p),Vt}function he(ve,we,Fe,se,_t,Xe,st){for(var de=new me([],Oe),Qe=ve.data;Qe;){for(var dt=0;dt<Qe.children.length;dt++){var Me=Qe.children[dt],ut=Qe.leaf?oe(Me,Fe,se):Ne(Fe,se,Me);ut>Xe||de.push({node:Me,dist:ut})}for(;de.length&&!de.peek().node.children;){var $e=de.pop(),gt=$e.node,Mt=oe(gt,we,Fe),tt=oe(gt,se,_t);if($e.dist<Mt&&$e.dist<tt&&ct(Fe,gt,st)&&ct(se,gt,st))return gt}(Qe=de.pop())&&(Qe=Qe.node)}return null}function Oe(ve,we){return ve.dist-we.dist}function Ne(ve,we,Fe){if(xe(ve,Fe)||xe(we,Fe))return 0;var se=ye(ve[0],ve[1],we[0],we[1],Fe.minX,Fe.minY,Fe.maxX,Fe.minY);if(0===se)return 0;var _t=ye(ve[0],ve[1],we[0],we[1],Fe.minX,Fe.minY,Fe.minX,Fe.maxY);if(0===_t)return 0;var Xe=ye(ve[0],ve[1],we[0],we[1],Fe.maxX,Fe.minY,Fe.maxX,Fe.maxY);if(0===Xe)return 0;var st=ye(ve[0],ve[1],we[0],we[1],Fe.minX,Fe.maxY,Fe.maxX,Fe.maxY);return 0===st?0:Math.min(se,_t,Xe,st)}function xe(ve,we){return ve[0]>=we.minX&&ve[0]<=we.maxX&&ve[1]>=we.minY&&ve[1]<=we.maxY}function ct(ve,we,Fe){for(var se=Math.min(ve[0],we[0]),_t=Math.min(ve[1],we[1]),Xe=Math.max(ve[0],we[0]),st=Math.max(ve[1],we[1]),de=Fe.search({minX:se,minY:_t,maxX:Xe,maxY:st}),Qe=0;Qe<de.length;Qe++)if(Te(de[Qe].p,de[Qe].next.p,ve,we))return!1;return!0}function Ke(ve,we,Fe){return E(ve[0],ve[1],we[0],we[1],Fe[0],Fe[1])}function Te(ve,we,Fe,se){return ve!==se&&we!==Fe&&Ke(ve,we,Fe)>0!=Ke(ve,we,se)>0&&Ke(Fe,se,ve)>0!=Ke(Fe,se,we)>0}function at(ve){var we=ve.p,Fe=ve.next.p;return ve.minX=Math.min(we[0],Fe[0]),ve.minY=Math.min(we[1],Fe[1]),ve.maxX=Math.max(we[0],Fe[0]),ve.maxY=Math.max(we[1],Fe[1]),ve}function ue(ve,we){var Fe={p:ve,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return we?(Fe.next=we.next,Fe.prev=we,we.next.prev=Fe,we.next=Fe):(Fe.prev=Fe,Fe.next=Fe),Fe}function De(ve,we){var Fe=ve[0]-we[0],se=ve[1]-we[1];return Fe*Fe+se*se}function oe(ve,we,Fe){var se=we[0],_t=we[1],Xe=Fe[0]-se,st=Fe[1]-_t;if(0!==Xe||0!==st){var de=((ve[0]-se)*Xe+(ve[1]-_t)*st)/(Xe*Xe+st*st);de>1?(se=Fe[0],_t=Fe[1]):de>0&&(se+=Xe*de,_t+=st*de)}return(Xe=ve[0]-se)*Xe+(st=ve[1]-_t)*st}function ye(ve,we,Fe,se,_t,Xe,st,de){var Vn,Bn,Sn,si,Qe=Fe-ve,dt=se-we,Me=st-_t,ut=de-Xe,$e=ve-_t,gt=we-Xe,Mt=Qe*Qe+dt*dt,tt=Qe*Me+dt*ut,Bt=Me*Me+ut*ut,Vt=Qe*$e+dt*gt,rn=Me*$e+ut*gt,Gt=Mt*Bt-tt*tt,$n=Gt,hn=Gt;0===Gt?(Bn=0,$n=1,si=rn,hn=Bt):(si=Mt*rn-tt*Vt,(Bn=tt*rn-Bt*Vt)<0?(Bn=0,si=rn,hn=Bt):Bn>$n&&(Bn=$n,si=rn+tt,hn=Bt)),si<0?(si=0,-Vt<0?Bn=0:-Vt>Mt?Bn=$n:(Bn=-Vt,$n=Mt)):si>hn&&(si=hn,-Vt+tt<0?Bn=0:-Vt+tt>Mt?Bn=$n:(Bn=-Vt+tt,$n=Mt));var Ri=(1-(Sn=0===si?0:si/hn))*_t+Sn*st-((1-(Vn=0===Bn?0:Bn/$n))*ve+Vn*Fe),It=(1-Sn)*Xe+Sn*de-((1-Vn)*we+Vn*se);return Ri*Ri+It*It}function ce(ve,we){return ve[0]===we[0]?ve[1]-we[1]:ve[0]-we[0]}me.default&&(me=me.default),lt.exports=Se,lt.exports.default=Se},3156:function(lt){lt.exports=function(){"use strict";function Pe(ue,De,oe,ye,ce){!function Re(ve,we,Fe,se,_t){for(;se>Fe;){if(se-Fe>600){var Xe=se-Fe+1,st=we-Fe+1,de=Math.log(Xe),Qe=.5*Math.exp(2*de/3),dt=.5*Math.sqrt(de*Qe*(Xe-Qe)/Xe)*(st-Xe/2<0?-1:1);Re(ve,we,Math.max(Fe,Math.floor(we-st*Qe/Xe+dt)),Math.min(se,Math.floor(we+(Xe-st)*Qe/Xe+dt)),_t)}var $e=ve[we],gt=Fe,Mt=se;for(W(ve,Fe,we),_t(ve[se],$e)>0&&W(ve,Fe,se);gt<Mt;){for(W(ve,gt,Mt),gt++,Mt--;_t(ve[gt],$e)<0;)gt++;for(;_t(ve[Mt],$e)>0;)Mt--}0===_t(ve[Fe],$e)?W(ve,Fe,Mt):W(ve,++Mt,se),Mt<=we&&(Fe=Mt+1),we<=Mt&&(se=Mt-1)}}(ue,De,oe||0,ye||ue.length-1,ce||o)}function W(ue,De,oe){var ye=ue[De];ue[De]=ue[oe],ue[oe]=ye}function o(ue,De){return ue<De?-1:ue>De?1:0}var me=function(ue){void 0===ue&&(ue=9),this._maxEntries=Math.max(4,ue),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function Ae(ue,De,oe){if(!oe)return De.indexOf(ue);for(var ye=0;ye<De.length;ye++)if(oe(ue,De[ye]))return ye;return-1}function E(ue,De){Se(ue,0,ue.children.length,De,ue)}function Se(ue,De,oe,ye,ce){ce||(ce=at(null)),ce.minX=1/0,ce.minY=1/0,ce.maxX=-1/0,ce.maxY=-1/0;for(var Re=De;Re<oe;Re++){var ve=ue.children[Re];he(ce,ue.leaf?ye(ve):ve)}return ce}function he(ue,De){return ue.minX=Math.min(ue.minX,De.minX),ue.minY=Math.min(ue.minY,De.minY),ue.maxX=Math.max(ue.maxX,De.maxX),ue.maxY=Math.max(ue.maxY,De.maxY),ue}function Oe(ue,De){return ue.minX-De.minX}function Ne(ue,De){return ue.minY-De.minY}function xe(ue){return(ue.maxX-ue.minX)*(ue.maxY-ue.minY)}function ct(ue){return ue.maxX-ue.minX+(ue.maxY-ue.minY)}function Ke(ue,De){return ue.minX<=De.minX&&ue.minY<=De.minY&&De.maxX<=ue.maxX&&De.maxY<=ue.maxY}function Te(ue,De){return De.minX<=ue.maxX&&De.minY<=ue.maxY&&De.maxX>=ue.minX&&De.maxY>=ue.minY}function at(ue){return{children:ue,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ct(ue,De,oe,ye,ce){for(var Re=[De,oe];Re.length;)if(!((oe=Re.pop())-(De=Re.pop())<=ye)){var ve=De+Math.ceil((oe-De)/ye/2)*ye;Pe(ue,ve,De,oe,ce),Re.push(De,ve,ve,oe)}}return me.prototype.all=function(){return this._all(this.data,[])},me.prototype.search=function(ue){var De=this.data,oe=[];if(!Te(ue,De))return oe;for(var ye=this.toBBox,ce=[];De;){for(var Re=0;Re<De.children.length;Re++){var ve=De.children[Re],we=De.leaf?ye(ve):ve;Te(ue,we)&&(De.leaf?oe.push(ve):Ke(ue,we)?this._all(ve,oe):ce.push(ve))}De=ce.pop()}return oe},me.prototype.collides=function(ue){var De=this.data;if(!Te(ue,De))return!1;for(var oe=[];De;){for(var ye=0;ye<De.children.length;ye++){var ce=De.children[ye],Re=De.leaf?this.toBBox(ce):ce;if(Te(ue,Re)){if(De.leaf||Ke(ue,Re))return!0;oe.push(ce)}}De=oe.pop()}return!1},me.prototype.load=function(ue){if(!ue||!ue.length)return this;if(ue.length<this._minEntries){for(var De=0;De<ue.length;De++)this.insert(ue[De]);return this}var oe=this._build(ue.slice(),0,ue.length-1,0);if(this.data.children.length)if(this.data.height===oe.height)this._splitRoot(this.data,oe);else{if(this.data.height<oe.height){var ye=this.data;this.data=oe,oe=ye}this._insert(oe,this.data.height-oe.height-1,!0)}else this.data=oe;return this},me.prototype.insert=function(ue){return ue&&this._insert(ue,this.data.height-1),this},me.prototype.clear=function(){return this.data=at([]),this},me.prototype.remove=function(ue,De){if(!ue)return this;for(var oe,ye,ce,Re=this.data,ve=this.toBBox(ue),we=[],Fe=[];Re||we.length;){if(Re||(Re=we.pop(),ye=we[we.length-1],oe=Fe.pop(),ce=!0),Re.leaf){var se=Ae(ue,Re.children,De);if(-1!==se)return Re.children.splice(se,1),we.push(Re),this._condense(we),this}ce||Re.leaf||!Ke(Re,ve)?ye?(oe++,Re=ye.children[oe],ce=!1):Re=null:(we.push(Re),Fe.push(oe),oe=0,ye=Re,Re=Re.children[0])}return this},me.prototype.toBBox=function(ue){return ue},me.prototype.compareMinX=function(ue,De){return ue.minX-De.minX},me.prototype.compareMinY=function(ue,De){return ue.minY-De.minY},me.prototype.toJSON=function(){return this.data},me.prototype.fromJSON=function(ue){return this.data=ue,this},me.prototype._all=function(ue,De){for(var oe=[];ue;)ue.leaf?De.push.apply(De,ue.children):oe.push.apply(oe,ue.children),ue=oe.pop();return De},me.prototype._build=function(ue,De,oe,ye){var ce,Re=oe-De+1,ve=this._maxEntries;if(Re<=ve)return E(ce=at(ue.slice(De,oe+1)),this.toBBox),ce;ye||(ye=Math.ceil(Math.log(Re)/Math.log(ve)),ve=Math.ceil(Re/Math.pow(ve,ye-1))),(ce=at([])).leaf=!1,ce.height=ye;var we=Math.ceil(Re/ve),Fe=we*Math.ceil(Math.sqrt(ve));Ct(ue,De,oe,Fe,this.compareMinX);for(var se=De;se<=oe;se+=Fe){var _t=Math.min(se+Fe-1,oe);Ct(ue,se,_t,we,this.compareMinY);for(var Xe=se;Xe<=_t;Xe+=we){var st=Math.min(Xe+we-1,_t);ce.children.push(this._build(ue,Xe,st,ye-1))}}return E(ce,this.toBBox),ce},me.prototype._chooseSubtree=function(ue,De,oe,ye){for(;ye.push(De),!De.leaf&&ye.length-1!==oe;){for(var ce=1/0,Re=1/0,ve=void 0,we=0;we<De.children.length;we++){var Fe=De.children[we],se=xe(Fe),_t=(Xe=ue,st=Fe,(Math.max(st.maxX,Xe.maxX)-Math.min(st.minX,Xe.minX))*(Math.max(st.maxY,Xe.maxY)-Math.min(st.minY,Xe.minY))-se);_t<Re?(Re=_t,ce=se<ce?se:ce,ve=Fe):_t===Re&&se<ce&&(ce=se,ve=Fe)}De=ve||De.children[0]}var Xe,st;return De},me.prototype._insert=function(ue,De,oe){var ye=oe?ue:this.toBBox(ue),ce=[],Re=this._chooseSubtree(ye,this.data,De,ce);for(Re.children.push(ue),he(Re,ye);De>=0&&ce[De].children.length>this._maxEntries;)this._split(ce,De),De--;this._adjustParentBBoxes(ye,ce,De)},me.prototype._split=function(ue,De){var oe=ue[De],ye=oe.children.length,ce=this._minEntries;this._chooseSplitAxis(oe,ce,ye);var Re=this._chooseSplitIndex(oe,ce,ye),ve=at(oe.children.splice(Re,oe.children.length-Re));ve.height=oe.height,ve.leaf=oe.leaf,E(oe,this.toBBox),E(ve,this.toBBox),De?ue[De-1].children.push(ve):this._splitRoot(oe,ve)},me.prototype._splitRoot=function(ue,De){this.data=at([ue,De]),this.data.height=ue.height+1,this.data.leaf=!1,E(this.data,this.toBBox)},me.prototype._chooseSplitIndex=function(ue,De,oe){for(var ye,ce,Re,ve,we,Fe,se,_t=1/0,Xe=1/0,st=De;st<=oe-De;st++){var de=Se(ue,0,st,this.toBBox),Qe=Se(ue,st,oe,this.toBBox),dt=(ce=de,Re=Qe,void 0,void 0,void 0,void 0,ve=Math.max(ce.minX,Re.minX),we=Math.max(ce.minY,Re.minY),Fe=Math.min(ce.maxX,Re.maxX),se=Math.min(ce.maxY,Re.maxY),Math.max(0,Fe-ve)*Math.max(0,se-we)),Me=xe(de)+xe(Qe);dt<_t?(_t=dt,ye=st,Xe=Me<Xe?Me:Xe):dt===_t&&Me<Xe&&(Xe=Me,ye=st)}return ye||oe-De},me.prototype._chooseSplitAxis=function(ue,De,oe){var ye=ue.leaf?this.compareMinX:Oe,ce=ue.leaf?this.compareMinY:Ne;this._allDistMargin(ue,De,oe,ye)<this._allDistMargin(ue,De,oe,ce)&&ue.children.sort(ye)},me.prototype._allDistMargin=function(ue,De,oe,ye){ue.children.sort(ye);for(var ce=this.toBBox,Re=Se(ue,0,De,ce),ve=Se(ue,oe-De,oe,ce),we=ct(Re)+ct(ve),Fe=De;Fe<oe-De;Fe++){var se=ue.children[Fe];he(Re,ue.leaf?ce(se):se),we+=ct(Re)}for(var _t=oe-De-1;_t>=De;_t--){var Xe=ue.children[_t];he(ve,ue.leaf?ce(Xe):Xe),we+=ct(ve)}return we},me.prototype._adjustParentBBoxes=function(ue,De,oe){for(var ye=oe;ye>=0;ye--)he(De[ye],ue)},me.prototype._condense=function(ue){for(var De=ue.length-1,oe=void 0;De>=0;De--)0===ue[De].children.length?De>0?(oe=ue[De-1].children).splice(oe.indexOf(ue[De]),1):this.clear():E(ue[De],this.toBBox)},me}()},4999:lt=>{"use strict";var Pe=function(oe){return function W(De){return!!De&&"object"==typeof De}(oe)&&!function o(De){var oe=Object.prototype.toString.call(De);return"[object RegExp]"===oe||"[object Date]"===oe||function E(De){return De.$$typeof===Ae}(De)}(oe)},Ae="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function he(De,oe){return!1!==oe.clone&&oe.isMergeableObject(De)?Ct(function Se(De){return Array.isArray(De)?[]:{}}(De),De,oe):De}function Oe(De,oe,ye){return De.concat(oe).map(function(ce){return he(ce,ye)})}function ct(De){return Object.keys(De).concat(function xe(De){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(De).filter(function(oe){return De.propertyIsEnumerable(oe)}):[]}(De))}function Ke(De,oe){try{return oe in De}catch{return!1}}function Ct(De,oe,ye){(ye=ye||{}).arrayMerge=ye.arrayMerge||Oe,ye.isMergeableObject=ye.isMergeableObject||Pe,ye.cloneUnlessOtherwiseSpecified=he;var ce=Array.isArray(oe);return ce===Array.isArray(De)?ce?ye.arrayMerge(De,oe,ye):function at(De,oe,ye){var ce={};return ye.isMergeableObject(De)&&ct(De).forEach(function(Re){ce[Re]=he(De[Re],ye)}),ct(oe).forEach(function(Re){(function Te(De,oe){return Ke(De,oe)&&!(Object.hasOwnProperty.call(De,oe)&&Object.propertyIsEnumerable.call(De,oe))})(De,Re)||(ce[Re]=Ke(De,Re)&&ye.isMergeableObject(oe[Re])?function Ne(De,oe){if(!oe.customMerge)return Ct;var ye=oe.customMerge(De);return"function"==typeof ye?ye:Ct}(Re,ye)(De[Re],oe[Re],ye):he(oe[Re],ye))}),ce}(De,oe,ye):he(oe,ye)}Ct.all=function(oe,ye){if(!Array.isArray(oe))throw new Error("first argument should be an array");return oe.reduce(function(ce,Re){return Ct(ce,Re,ye)},{})},lt.exports=Ct},2358:(lt,Pe,W)=>{"use strict";var o=W(1356),me="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),Ae=Object.prototype.toString,E=Array.prototype.concat,Se=Object.defineProperty,Oe=W(7027)(),Ne=Se&&Oe,xe=function(Ke,Te,at,Ct){Te in Ke&&(!function(Ke){return"function"==typeof Ke&&"[object Function]"===Ae.call(Ke)}(Ct)||!Ct())||(Ne?Se(Ke,Te,{configurable:!0,enumerable:!1,value:at,writable:!0}):Ke[Te]=at)},ct=function(Ke,Te){var at=arguments.length>2?arguments[2]:{},Ct=o(Te);me&&(Ct=E.call(Ct,Object.getOwnPropertySymbols(Te)));for(var ue=0;ue<Ct.length;ue+=1)xe(Ke,Ct[ue],Te[Ct[ue]],at[Ct[ue]])};ct.supportsDescriptors=!!Ne,lt.exports=ct},1817:lt=>{function Pe(W,o,me,Ae){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(W,o,me,Ae)}Pe.prototype.run=function(W,o,me,Ae){this._init(W,o,me,Ae);for(var E=0;E<this._datasetLength;E++)if(1!==this._visited[E]){this._visited[E]=1;var Se=this._regionQuery(E);if(Se.length<this.minPts)this.noise.push(E);else{var he=this.clusters.length;this.clusters.push([]),this._addToCluster(E,he),this._expandCluster(he,Se)}}return this.clusters},Pe.prototype._init=function(W,o,me,Ae){if(W){if(!(W instanceof Array))throw Error("Dataset must be of type array, "+typeof W+" given");this.dataset=W,this.clusters=[],this.noise=[],this._datasetLength=W.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}o&&(this.epsilon=o),me&&(this.minPts=me),Ae&&(this.distance=Ae)},Pe.prototype._expandCluster=function(W,o){for(var me=0;me<o.length;me++){var Ae=o[me];if(1!==this._visited[Ae]){this._visited[Ae]=1;var E=this._regionQuery(Ae);E.length>=this.minPts&&(o=this._mergeArrays(o,E))}1!==this._assigned[Ae]&&this._addToCluster(Ae,W)}},Pe.prototype._addToCluster=function(W,o){this.clusters[o].push(W),this._assigned[W]=1},Pe.prototype._regionQuery=function(W){for(var o=[],me=0;me<this._datasetLength;me++)this.distance(this.dataset[W],this.dataset[me])<this.epsilon&&o.push(me);return o},Pe.prototype._mergeArrays=function(W,o){for(var me=o.length,Ae=0;Ae<me;Ae++){var E=o[Ae];W.indexOf(E)<0&&W.push(E)}return W},Pe.prototype._euclideanDistance=function(W,o){for(var me=0,Ae=Math.min(W.length,o.length);Ae--;)me+=(W[Ae]-o[Ae])*(W[Ae]-o[Ae]);return Math.sqrt(me)},lt.exports&&(lt.exports=Pe)},4273:lt=>{function Pe(W,o,me){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(W,o,me)}Pe.prototype.init=function(W,o,me){this.assignments=[],this.centroids=[],typeof W<"u"&&(this.dataset=W),typeof o<"u"&&(this.k=o),typeof me<"u"&&(this.distance=me)},Pe.prototype.run=function(W,o){this.init(W,o);for(var me=this.dataset.length,Ae=0;Ae<this.k;Ae++)this.centroids[Ae]=this.randomCentroid();for(var E=!0;E;){E=this.assign();for(var Se=0;Se<this.k;Se++){for(var he=new Array(ct),Oe=0,Ne=0;Ne<ct;Ne++)he[Ne]=0;for(var xe=0;xe<me;xe++){var ct=this.dataset[xe].length;if(Se===this.assignments[xe]){for(Ne=0;Ne<ct;Ne++)he[Ne]+=this.dataset[xe][Ne];Oe++}}if(Oe>0){for(Ne=0;Ne<ct;Ne++)he[Ne]/=Oe;this.centroids[Se]=he}else this.centroids[Se]=this.randomCentroid(),E=!0}}return this.getClusters()},Pe.prototype.randomCentroid=function(){var o,me,W=this.dataset.length-1;do{me=Math.round(Math.random()*W),o=this.dataset[me]}while(this.centroids.indexOf(o)>=0);return o},Pe.prototype.assign=function(){for(var me,W=!1,o=this.dataset.length,Ae=0;Ae<o;Ae++)(me=this.argmin(this.dataset[Ae],this.centroids,this.distance))!=this.assignments[Ae]&&(this.assignments[Ae]=me,W=!0);return W},Pe.prototype.getClusters=function(){for(var o,W=new Array(this.k),me=0;me<this.assignments.length;me++)typeof W[o=this.assignments[me]]>"u"&&(W[o]=[]),W[o].push(me);return W},Pe.prototype.argmin=function(W,o,me){for(var he,Ae=Number.MAX_VALUE,E=0,Se=o.length,Oe=0;Oe<Se;Oe++)(he=me(W,o[Oe]))<Ae&&(Ae=he,E=Oe);return E},Pe.prototype.distance=function(W,o){for(var me=0,Ae=Math.min(W.length,o.length);Ae--;){var E=W[Ae]-o[Ae];me+=E*E}return Math.sqrt(me)},lt.exports&&(lt.exports=Pe)},8680:(lt,Pe,W)=>{if(lt.exports)var o=W(8759);function me(Ae,E,Se,he){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(Ae,E,Se,he)}me.prototype.run=function(Ae,E,Se,he){this._init(Ae,E,Se,he);for(var Oe=0,Ne=this.dataset.length;Oe<Ne;Oe++)if(1!==this._processed[Oe]){this._processed[Oe]=1,this.clusters.push([Oe]);var xe=this.clusters.length-1;this._orderedList.push(Oe);var ct=new o(null,null,"asc"),Ke=this._regionQuery(Oe);void 0!==this._distanceToCore(Oe)&&(this._updateQueue(Oe,Ke,ct),this._expandCluster(xe,ct))}return this.clusters},me.prototype.getReachabilityPlot=function(){for(var Ae=[],E=0,Se=this._orderedList.length;E<Se;E++){var he=this._orderedList[E];Ae.push([he,this._reachability[he]])}return Ae},me.prototype._init=function(Ae,E,Se,he){if(Ae){if(!(Ae instanceof Array))throw Error("Dataset must be of type array, "+typeof Ae+" given");this.dataset=Ae,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}E&&(this.epsilon=E),Se&&(this.minPts=Se),he&&(this.distance=he)},me.prototype._updateQueue=function(Ae,E,Se){var he=this;this._coreDistance=this._distanceToCore(Ae),E.forEach(function(Oe){if(void 0===he._processed[Oe]){var Ne=he.distance(he.dataset[Ae],he.dataset[Oe]),xe=Math.max(he._coreDistance,Ne);void 0===he._reachability[Oe]?(he._reachability[Oe]=xe,Se.insert(Oe,xe)):xe<he._reachability[Oe]&&(he._reachability[Oe]=xe,Se.remove(Oe),Se.insert(Oe,xe))}})},me.prototype._expandCluster=function(Ae,E){for(var Se=E.getElements(),he=0,Oe=Se.length;he<Oe;he++){var Ne=Se[he];if(void 0===this._processed[Ne]){var xe=this._regionQuery(Ne);this._processed[Ne]=1,this.clusters[Ae].push(Ne),this._orderedList.push(Ne),void 0!==this._distanceToCore(Ne)&&(this._updateQueue(Ne,xe,E),this._expandCluster(Ae,E))}}},me.prototype._distanceToCore=function(Ae){for(var E=this.epsilon,Se=0;Se<E;Se++)if(this._regionQuery(Ae,Se).length>=this.minPts)return Se},me.prototype._regionQuery=function(Ae,E){E=E||this.epsilon;for(var Se=[],he=0,Oe=this.dataset.length;he<Oe;he++)this.distance(this.dataset[Ae],this.dataset[he])<E&&Se.push(he);return Se},me.prototype._euclideanDistance=function(Ae,E){for(var Se=0,he=Math.min(Ae.length,E.length);he--;)Se+=(Ae[he]-E[he])*(Ae[he]-E[he]);return Math.sqrt(Se)},lt.exports&&(lt.exports=me)},8759:lt=>{function Pe(W,o,me){this._queue=[],this._priorities=[],this._sorting="desc",this._init(W,o,me)}Pe.prototype.insert=function(W,o){for(var me=this._queue.length,Ae=me;Ae--;){var E=this._priorities[Ae];"desc"===this._sorting?o>E&&(me=Ae):o<E&&(me=Ae)}this._insertAt(W,o,me)},Pe.prototype.remove=function(W){for(var o=this._queue.length;o--;)if(W===this._queue[o]){this._queue.splice(o,1),this._priorities.splice(o,1);break}},Pe.prototype.forEach=function(W){this._queue.forEach(W)},Pe.prototype.getElements=function(){return this._queue},Pe.prototype.getElementPriority=function(W){return this._priorities[W]},Pe.prototype.getPriorities=function(){return this._priorities},Pe.prototype.getElementsWithPriorities=function(){for(var W=[],o=0,me=this._queue.length;o<me;o++)W.push([this._queue[o],this._priorities[o]]);return W},Pe.prototype._init=function(W,o,me){if(W&&o){if(this._queue=[],this._priorities=[],W.length!==o.length)throw new Error("Arrays must have the same length");for(var Ae=0;Ae<W.length;Ae++)this.insert(W[Ae],o[Ae])}me&&(this._sorting=me)},Pe.prototype._insertAt=function(W,o,me){this._queue.length===me?(this._queue.push(W),this._priorities.push(o)):(this._queue.splice(me,0,W),this._priorities.splice(me,0,o))},lt.exports&&(lt.exports=Pe)},7470:(lt,Pe,W)=>{lt.exports&&(lt.exports={DBSCAN:W(1817),KMEANS:W(4273),OPTICS:W(8680),PriorityQueue:W(8759)})},5469:lt=>{"use strict";function Pe(Me,ut,$e){$e=$e||2;var Vt,rn,Gt,Vn,Bn,Sn,si,gt=ut&&ut.length,Mt=gt?ut[0]*$e:Me.length,tt=W(Me,0,Mt,$e,!0),Bt=[];if(!tt||tt.next===tt.prev)return Bt;if(gt&&(tt=function Oe(Me,ut,$e,gt){var tt,Bt,Gt,Mt=[];for(tt=0,Bt=ut.length;tt<Bt;tt++)(Gt=W(Me,ut[tt]*gt,tt<Bt-1?ut[tt+1]*gt:Me.length,gt,!1))===Gt.next&&(Gt.steiner=!0),Mt.push(ue(Gt));for(Mt.sort(Ne),tt=0;tt<Mt.length;tt++)$e=xe(Mt[tt],$e);return $e}(Me,ut,tt,$e)),Me.length>80*$e){Vt=Gt=Me[0],rn=Vn=Me[1];for(var $n=$e;$n<Mt;$n+=$e)(Bn=Me[$n])<Vt&&(Vt=Bn),(Sn=Me[$n+1])<rn&&(rn=Sn),Bn>Gt&&(Gt=Bn),Sn>Vn&&(Vn=Sn);si=0!==(si=Math.max(Gt-Vt,Vn-rn))?32767/si:0}return me(tt,Bt,$e,Vt,rn,si,0),Bt}function W(Me,ut,$e,gt,Mt){var tt,Bt;if(Mt===dt(Me,ut,$e,gt)>0)for(tt=ut;tt<$e;tt+=gt)Bt=st(tt,Me[tt],Me[tt+1],Bt);else for(tt=$e-gt;tt>=ut;tt-=gt)Bt=st(tt,Me[tt],Me[tt+1],Bt);return Bt&&ce(Bt,Bt.next)&&(de(Bt),Bt=Bt.next),Bt}function o(Me,ut){if(!Me)return Me;ut||(ut=Me);var gt,$e=Me;do{if(gt=!1,$e.steiner||!ce($e,$e.next)&&0!==ye($e.prev,$e,$e.next))$e=$e.next;else{if(de($e),($e=ut=$e.prev)===$e.next)break;gt=!0}}while(gt||$e!==ut);return ut}function me(Me,ut,$e,gt,Mt,tt,Bt){if(Me){!Bt&&tt&&function Te(Me,ut,$e,gt){var Mt=Me;do{0===Mt.z&&(Mt.z=Ct(Mt.x,Mt.y,ut,$e,gt)),Mt.prevZ=Mt.prev,Mt.nextZ=Mt.next,Mt=Mt.next}while(Mt!==Me);Mt.prevZ.nextZ=null,Mt.prevZ=null,function at(Me){var ut,$e,gt,Mt,tt,Bt,Vt,rn,Gt=1;do{for($e=Me,Me=null,tt=null,Bt=0;$e;){for(Bt++,gt=$e,Vt=0,ut=0;ut<Gt&&(Vt++,gt=gt.nextZ);ut++);for(rn=Gt;Vt>0||rn>0&&gt;)0!==Vt&&(0===rn||!gt||$e.z<=gt.z)?(Mt=$e,$e=$e.nextZ,Vt--):(Mt=gt,gt=gt.nextZ,rn--),tt?tt.nextZ=Mt:Me=Mt,Mt.prevZ=tt,tt=Mt;$e=gt}tt.nextZ=null,Gt*=2}while(Bt>1)}(Mt)}(Me,gt,Mt,tt);for(var rn,Gt,Vt=Me;Me.prev!==Me.next;)if(rn=Me.prev,Gt=Me.next,tt?E(Me,gt,Mt,tt):Ae(Me))ut.push(rn.i/$e|0),ut.push(Me.i/$e|0),ut.push(Gt.i/$e|0),de(Me),Me=Gt.next,Vt=Gt.next;else if((Me=Gt)===Vt){Bt?1===Bt?me(Me=Se(o(Me),ut,$e),ut,$e,gt,Mt,tt,2):2===Bt&&he(Me,ut,$e,gt,Mt,tt):me(o(Me),ut,$e,gt,Mt,tt,1);break}}}function Ae(Me){var ut=Me.prev,$e=Me,gt=Me.next;if(ye(ut,$e,gt)>=0)return!1;for(var Mt=ut.x,tt=$e.x,Bt=gt.x,Vt=ut.y,rn=$e.y,Gt=gt.y,Vn=Mt<tt?Mt<Bt?Mt:Bt:tt<Bt?tt:Bt,Bn=Vt<rn?Vt<Gt?Vt:Gt:rn<Gt?rn:Gt,Sn=Mt>tt?Mt>Bt?Mt:Bt:tt>Bt?tt:Bt,si=Vt>rn?Vt>Gt?Vt:Gt:rn>Gt?rn:Gt,$n=gt.next;$n!==ut;){if($n.x>=Vn&&$n.x<=Sn&&$n.y>=Bn&&$n.y<=si&&De(Mt,Vt,tt,rn,Bt,Gt,$n.x,$n.y)&&ye($n.prev,$n,$n.next)>=0)return!1;$n=$n.next}return!0}function E(Me,ut,$e,gt){var Mt=Me.prev,tt=Me,Bt=Me.next;if(ye(Mt,tt,Bt)>=0)return!1;for(var Vt=Mt.x,rn=tt.x,Gt=Bt.x,Vn=Mt.y,Bn=tt.y,Sn=Bt.y,si=Vt<rn?Vt<Gt?Vt:Gt:rn<Gt?rn:Gt,$n=Vn<Bn?Vn<Sn?Vn:Sn:Bn<Sn?Bn:Sn,hn=Vt>rn?Vt>Gt?Vt:Gt:rn>Gt?rn:Gt,jr=Vn>Bn?Vn>Sn?Vn:Sn:Bn>Sn?Bn:Sn,sr=Ct(si,$n,ut,$e,gt),Fr=Ct(hn,jr,ut,$e,gt),yi=Me.prevZ,Ri=Me.nextZ;yi&&yi.z>=sr&&Ri&&Ri.z<=Fr;){if(yi.x>=si&&yi.x<=hn&&yi.y>=$n&&yi.y<=jr&&yi!==Mt&&yi!==Bt&&De(Vt,Vn,rn,Bn,Gt,Sn,yi.x,yi.y)&&ye(yi.prev,yi,yi.next)>=0||(yi=yi.prevZ,Ri.x>=si&&Ri.x<=hn&&Ri.y>=$n&&Ri.y<=jr&&Ri!==Mt&&Ri!==Bt&&De(Vt,Vn,rn,Bn,Gt,Sn,Ri.x,Ri.y)&&ye(Ri.prev,Ri,Ri.next)>=0))return!1;Ri=Ri.nextZ}for(;yi&&yi.z>=sr;){if(yi.x>=si&&yi.x<=hn&&yi.y>=$n&&yi.y<=jr&&yi!==Mt&&yi!==Bt&&De(Vt,Vn,rn,Bn,Gt,Sn,yi.x,yi.y)&&ye(yi.prev,yi,yi.next)>=0)return!1;yi=yi.prevZ}for(;Ri&&Ri.z<=Fr;){if(Ri.x>=si&&Ri.x<=hn&&Ri.y>=$n&&Ri.y<=jr&&Ri!==Mt&&Ri!==Bt&&De(Vt,Vn,rn,Bn,Gt,Sn,Ri.x,Ri.y)&&ye(Ri.prev,Ri,Ri.next)>=0)return!1;Ri=Ri.nextZ}return!0}function Se(Me,ut,$e){var gt=Me;do{var Mt=gt.prev,tt=gt.next.next;!ce(Mt,tt)&&Re(Mt,gt,gt.next,tt)&&se(Mt,tt)&&se(tt,Mt)&&(ut.push(Mt.i/$e|0),ut.push(gt.i/$e|0),ut.push(tt.i/$e|0),de(gt),de(gt.next),gt=Me=tt),gt=gt.next}while(gt!==Me);return o(gt)}function he(Me,ut,$e,gt,Mt,tt){var Bt=Me;do{for(var Vt=Bt.next.next;Vt!==Bt.prev;){if(Bt.i!==Vt.i&&oe(Bt,Vt)){var rn=Xe(Bt,Vt);return Bt=o(Bt,Bt.next),rn=o(rn,rn.next),me(Bt,ut,$e,gt,Mt,tt,0),void me(rn,ut,$e,gt,Mt,tt,0)}Vt=Vt.next}Bt=Bt.next}while(Bt!==Me)}function Ne(Me,ut){return Me.x-ut.x}function xe(Me,ut){var $e=function ct(Me,ut){var Bt,$e=ut,gt=Me.x,Mt=Me.y,tt=-1/0;do{if(Mt<=$e.y&&Mt>=$e.next.y&&$e.next.y!==$e.y){var Vt=$e.x+(Mt-$e.y)*($e.next.x-$e.x)/($e.next.y-$e.y);if(Vt<=gt&&Vt>tt&&(tt=Vt,Bt=$e.x<$e.next.x?$e:$e.next,Vt===gt))return Bt}$e=$e.next}while($e!==ut);if(!Bt)return null;var Sn,rn=Bt,Gt=Bt.x,Vn=Bt.y,Bn=1/0;$e=Bt;do{gt>=$e.x&&$e.x>=Gt&&gt!==$e.x&&De(Mt<Vn?gt:tt,Mt,Gt,Vn,Mt<Vn?tt:gt,Mt,$e.x,$e.y)&&(Sn=Math.abs(Mt-$e.y)/(gt-$e.x),se($e,Me)&&(Sn<Bn||Sn===Bn&&($e.x>Bt.x||$e.x===Bt.x&&Ke(Bt,$e)))&&(Bt=$e,Bn=Sn)),$e=$e.next}while($e!==rn);return Bt}(Me,ut);if(!$e)return ut;var gt=Xe($e,Me);return o(gt,gt.next),o($e,$e.next)}function Ke(Me,ut){return ye(Me.prev,Me,ut.prev)<0&&ye(ut.next,Me,Me.next)<0}function Ct(Me,ut,$e,gt,Mt){return(Me=1431655765&((Me=858993459&((Me=252645135&((Me=16711935&((Me=(Me-$e)*Mt|0)|Me<<8))|Me<<4))|Me<<2))|Me<<1))|(ut=1431655765&((ut=858993459&((ut=252645135&((ut=16711935&((ut=(ut-gt)*Mt|0)|ut<<8))|ut<<4))|ut<<2))|ut<<1))<<1}function ue(Me){var ut=Me,$e=Me;do{(ut.x<$e.x||ut.x===$e.x&&ut.y<$e.y)&&($e=ut),ut=ut.next}while(ut!==Me);return $e}function De(Me,ut,$e,gt,Mt,tt,Bt,Vt){return(Mt-Bt)*(ut-Vt)>=(Me-Bt)*(tt-Vt)&&(Me-Bt)*(gt-Vt)>=($e-Bt)*(ut-Vt)&&($e-Bt)*(tt-Vt)>=(Mt-Bt)*(gt-Vt)}function oe(Me,ut){return Me.next.i!==ut.i&&Me.prev.i!==ut.i&&!function Fe(Me,ut){var $e=Me;do{if($e.i!==Me.i&&$e.next.i!==Me.i&&$e.i!==ut.i&&$e.next.i!==ut.i&&Re($e,$e.next,Me,ut))return!0;$e=$e.next}while($e!==Me);return!1}(Me,ut)&&(se(Me,ut)&&se(ut,Me)&&function _t(Me,ut){var $e=Me,gt=!1,Mt=(Me.x+ut.x)/2,tt=(Me.y+ut.y)/2;do{$e.y>tt!=$e.next.y>tt&&$e.next.y!==$e.y&&Mt<($e.next.x-$e.x)*(tt-$e.y)/($e.next.y-$e.y)+$e.x&&(gt=!gt),$e=$e.next}while($e!==Me);return gt}(Me,ut)&&(ye(Me.prev,Me,ut.prev)||ye(Me,ut.prev,ut))||ce(Me,ut)&&ye(Me.prev,Me,Me.next)>0&&ye(ut.prev,ut,ut.next)>0)}function ye(Me,ut,$e){return(ut.y-Me.y)*($e.x-ut.x)-(ut.x-Me.x)*($e.y-ut.y)}function ce(Me,ut){return Me.x===ut.x&&Me.y===ut.y}function Re(Me,ut,$e,gt){var Mt=we(ye(Me,ut,$e)),tt=we(ye(Me,ut,gt)),Bt=we(ye($e,gt,Me)),Vt=we(ye($e,gt,ut));return!!(Mt!==tt&&Bt!==Vt||0===Mt&&ve(Me,$e,ut)||0===tt&&ve(Me,gt,ut)||0===Bt&&ve($e,Me,gt)||0===Vt&&ve($e,ut,gt))}function ve(Me,ut,$e){return ut.x<=Math.max(Me.x,$e.x)&&ut.x>=Math.min(Me.x,$e.x)&&ut.y<=Math.max(Me.y,$e.y)&&ut.y>=Math.min(Me.y,$e.y)}function we(Me){return Me>0?1:Me<0?-1:0}function se(Me,ut){return ye(Me.prev,Me,Me.next)<0?ye(Me,ut,Me.next)>=0&&ye(Me,Me.prev,ut)>=0:ye(Me,ut,Me.prev)<0||ye(Me,Me.next,ut)<0}function Xe(Me,ut){var $e=new Qe(Me.i,Me.x,Me.y),gt=new Qe(ut.i,ut.x,ut.y),Mt=Me.next,tt=ut.prev;return Me.next=ut,ut.prev=Me,$e.next=Mt,Mt.prev=$e,gt.next=$e,$e.prev=gt,tt.next=gt,gt.prev=tt,gt}function st(Me,ut,$e,gt){var Mt=new Qe(Me,ut,$e);return gt?(Mt.next=gt.next,Mt.prev=gt,gt.next.prev=Mt,gt.next=Mt):(Mt.prev=Mt,Mt.next=Mt),Mt}function de(Me){Me.next.prev=Me.prev,Me.prev.next=Me.next,Me.prevZ&&(Me.prevZ.nextZ=Me.nextZ),Me.nextZ&&(Me.nextZ.prevZ=Me.prevZ)}function Qe(Me,ut,$e){this.i=Me,this.x=ut,this.y=$e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function dt(Me,ut,$e,gt){for(var Mt=0,tt=ut,Bt=$e-gt;tt<$e;tt+=gt)Mt+=(Me[Bt]-Me[tt])*(Me[tt+1]+Me[Bt+1]),Bt=tt;return Mt}lt.exports=Pe,lt.exports.default=Pe,Pe.deviation=function(Me,ut,$e,gt){var Mt=ut&&ut.length,Bt=Math.abs(dt(Me,0,Mt?ut[0]*$e:Me.length,$e));if(Mt)for(var Vt=0,rn=ut.length;Vt<rn;Vt++)Bt-=Math.abs(dt(Me,ut[Vt]*$e,Vt<rn-1?ut[Vt+1]*$e:Me.length,$e));var Bn=0;for(Vt=0;Vt<gt.length;Vt+=3){var Sn=gt[Vt]*$e,si=gt[Vt+1]*$e,$n=gt[Vt+2]*$e;Bn+=Math.abs((Me[Sn]-Me[$n])*(Me[si+1]-Me[Sn+1])-(Me[Sn]-Me[si])*(Me[$n+1]-Me[Sn+1]))}return 0===Bt&&0===Bn?0:Math.abs((Bn-Bt)/Bt)},Pe.flatten=function(Me){for(var ut=Me[0][0].length,$e={vertices:[],holes:[],dimensions:ut},gt=0,Mt=0;Mt<Me.length;Mt++){for(var tt=0;tt<Me[Mt].length;tt++)for(var Bt=0;Bt<ut;Bt++)$e.vertices.push(Me[Mt][tt][Bt]);Mt>0&&$e.holes.push(gt+=Me[Mt-1].length)}return $e}},6100:lt=>{function Pe(Ae){return Ae&&Ae.constructor&&"function"==typeof Ae.constructor.isBuffer&&Ae.constructor.isBuffer(Ae)}function W(Ae){return Ae}function o(Ae,E){const Se=(E=E||{}).delimiter||".",he=E.maxDepth,Oe=E.transformKey||W,Ne={};return function xe(ct,Ke,Te){Te=Te||1,Object.keys(ct).forEach(function(at){const Ct=ct[at],ue=E.safe&&Array.isArray(Ct),De=Object.prototype.toString.call(Ct),oe=Pe(Ct),ye="[object Object]"===De||"[object Array]"===De,ce=Ke?Ke+Se+Oe(at):Oe(at);if(!ue&&!oe&&ye&&Object.keys(Ct).length&&(!E.maxDepth||Te<he))return xe(Ct,ce,Te+1);Ne[ce]=Ct})}(Ae),Ne}lt.exports=o,o.flatten=o,o.unflatten=function me(Ae,E){const Se=(E=E||{}).delimiter||".",he=E.overwrite||!1,Oe=E.transformKey||W,Ne={};if(Pe(Ae)||"[object Object]"!==Object.prototype.toString.call(Ae))return Ae;function ct(at){const Ct=Number(at);return isNaN(Ct)||-1!==at.indexOf(".")||E.object?at:Ct}return Ae=Object.keys(Ae).reduce(function(at,Ct){const ue=Object.prototype.toString.call(Ae[Ct]);return"[object Object]"!==ue&&"[object Array]"!==ue||function Te(at){const Ct=Object.prototype.toString.call(at);return!at||("[object Array]"===Ct?!at.length:"[object Object]"===Ct?!Object.keys(at).length:void 0)}(Ae[Ct])?(at[Ct]=Ae[Ct],at):function Ke(at,Ct,ue){return Object.keys(ue).reduce(function(De,oe){return De[at+Se+oe]=ue[oe],De},Ct)}(Ct,at,o(Ae[Ct],E))},{}),Object.keys(Ae).forEach(function(at){const Ct=at.split(Se).map(Oe);let ue=ct(Ct.shift()),De=ct(Ct[0]),oe=Ne;for(;void 0!==De;){if("__proto__"===ue)return;const ye=Object.prototype.toString.call(oe[ue]),ce="[object Object]"===ye||"[object Array]"===ye;if(!he&&!ce&&typeof oe[ue]<"u")return;(he&&!ce||!he&&null==oe[ue])&&(oe[ue]="number"!=typeof De||E.object?{}:[]),oe=oe[ue],Ct.length>0&&(ue=ct(Ct.shift()),De=ct(Ct[0]))}oe[ue]=me(Ae[at],E)}),Ne}},3457:lt=>{"use strict";var Pe="Function.prototype.bind called on incompatible ",W=Array.prototype.slice,o=Object.prototype.toString,me="[object Function]";lt.exports=function(E){var Se=this;if("function"!=typeof Se||o.call(Se)!==me)throw new TypeError(Pe+Se);for(var Oe,he=W.call(arguments,1),Ne=function(){if(this instanceof Oe){var at=Se.apply(this,he.concat(W.call(arguments)));return Object(at)===at?at:this}return Se.apply(E,he.concat(W.call(arguments)))},xe=Math.max(0,Se.length-he.length),ct=[],Ke=0;Ke<xe;Ke++)ct.push("$"+Ke);if(Oe=Function("binder","return function ("+ct.join(",")+"){ return binder.apply(this,arguments); }")(Ne),Se.prototype){var Te=function(){};Te.prototype=Se.prototype,Oe.prototype=new Te,Te.prototype=null}return Oe}},4444:(lt,Pe,W)=>{"use strict";var o=W(3457);lt.exports=Function.prototype.bind||o},9582:lt=>{"use strict";var Pe=function(){return"string"==typeof function(){}.name},W=Object.getOwnPropertyDescriptor;if(W)try{W([],"length")}catch{W=null}Pe.functionsHaveConfigurableNames=function(){if(!Pe()||!W)return!1;var Ae=W(function(){},"name");return!!Ae&&!!Ae.configurable};var o=Function.prototype.bind;Pe.boundFunctionsHaveNames=function(){return Pe()&&"function"==typeof o&&""!==function(){}.bind().name},lt.exports=Pe},5013:(lt,Pe,W)=>{var o=W(8958),me=function(he){this.precision=he&&he.precision?he.precision:17,this.direction=!(!he||!he.direction)&&he.direction,this.pseudoNode=!(!he||!he.pseudoNode)&&he.pseudoNode,this.objectComparator=he&&he.objectComparator?he.objectComparator:Se};function Ae(he){return he.coordinates.map(function(Oe){return{type:he.type.replace("Multi",""),coordinates:Oe}})}function E(he,Oe){return he.hasOwnProperty("coordinates")?he.coordinates.length===Oe.coordinates.length:he.length===Oe.length}function Se(he,Oe){return o(he,Oe,{strict:!0})}me.prototype.compare=function(he,Oe){if(he.type!==Oe.type||!E(he,Oe))return!1;switch(he.type){case"Point":return this.compareCoord(he.coordinates,Oe.coordinates);case"LineString":return this.compareLine(he.coordinates,Oe.coordinates,0,!1);case"Polygon":return this.comparePolygon(he,Oe);case"Feature":return this.compareFeature(he,Oe);default:if(0===he.type.indexOf("Multi")){var Ne=this,xe=Ae(he),ct=Ae(Oe);return xe.every(function(Ke){return this.some(function(Te){return Ne.compare(Ke,Te)})},ct)}}return!1},me.prototype.compareCoord=function(he,Oe){if(he.length!==Oe.length)return!1;for(var Ne=0;Ne<he.length;Ne++)if(he[Ne].toFixed(this.precision)!==Oe[Ne].toFixed(this.precision))return!1;return!0},me.prototype.compareLine=function(he,Oe,Ne,xe){if(!E(he,Oe))return!1;var ct=this.pseudoNode?he:this.removePseudo(he),Ke=this.pseudoNode?Oe:this.removePseudo(Oe);if(!xe||this.compareCoord(ct[0],Ke[0])||(Ke=this.fixStartIndex(Ke,ct))){var Te=this.compareCoord(ct[Ne],Ke[Ne]);return this.direction||Te?this.comparePath(ct,Ke):!!this.compareCoord(ct[Ne],Ke[Ke.length-(1+Ne)])&&this.comparePath(ct.slice().reverse(),Ke)}},me.prototype.fixStartIndex=function(he,Oe){for(var Ne,xe=-1,ct=0;ct<he.length;ct++)if(this.compareCoord(he[ct],Oe[0])){xe=ct;break}return xe>=0&&(Ne=[].concat(he.slice(xe,he.length),he.slice(1,xe+1))),Ne},me.prototype.comparePath=function(he,Oe){var Ne=this;return he.every(function(xe,ct){return Ne.compareCoord(xe,this[ct])},Oe)},me.prototype.comparePolygon=function(he,Oe){if(this.compareLine(he.coordinates[0],Oe.coordinates[0],1,!0)){var Ne=he.coordinates.slice(1,he.coordinates.length),xe=Oe.coordinates.slice(1,Oe.coordinates.length),ct=this;return Ne.every(function(Ke){return this.some(function(Te){return ct.compareLine(Ke,Te,1,!0)})},xe)}return!1},me.prototype.compareFeature=function(he,Oe){return!(he.id!==Oe.id||!this.objectComparator(he.properties,Oe.properties)||!this.compareBBox(he,Oe))&&this.compare(he.geometry,Oe.geometry)},me.prototype.compareBBox=function(he,Oe){return!!(!he.bbox&&!Oe.bbox||he.bbox&&Oe.bbox&&this.compareCoord(he.bbox,Oe.bbox))},me.prototype.removePseudo=function(he){return he},lt.exports=me},8958:(lt,Pe,W)=>{var o=W(1356),me=W(3407),Ae=W(2e3),E=W(2342),Se=W(9235),he=W(2374),Oe=Date.prototype.getTime;function xe(Te){return null==Te}function ct(Te){return!(!Te||"object"!=typeof Te||"number"!=typeof Te.length||"function"!=typeof Te.copy||"function"!=typeof Te.slice||Te.length>0&&"number"!=typeof Te[0])}lt.exports=function Ne(Te,at,Ct){var ue=Ct||{};return!!(ue.strict?Ae(Te,at):Te===at)||(!Te||!at||"object"!=typeof Te&&"object"!=typeof at?ue.strict?Ae(Te,at):Te==at:function Ke(Te,at,Ct){var ue,De;if(typeof Te!=typeof at||xe(Te)||xe(at)||Te.prototype!==at.prototype||me(Te)!==me(at))return!1;var oe=E(Te),ye=E(at);if(oe!==ye)return!1;if(oe||ye)return Te.source===at.source&&Se(Te)===Se(at);if(he(Te)&&he(at))return Oe.call(Te)===Oe.call(at);var ce=ct(Te),Re=ct(at);if(ce!==Re)return!1;if(ce||Re){if(Te.length!==at.length)return!1;for(ue=0;ue<Te.length;ue++)if(Te[ue]!==at[ue])return!1;return!0}if(typeof Te!=typeof at)return!1;try{var ve=o(Te),we=o(at)}catch{return!1}if(ve.length!==we.length)return!1;for(ve.sort(),we.sort(),ue=ve.length-1;ue>=0;ue--)if(ve[ue]!=we[ue])return!1;for(ue=ve.length-1;ue>=0;ue--)if(!Ne(Te[De=ve[ue]],at[De],Ct))return!1;return!0}(Te,at,ue))}},5406:(lt,Pe,W)=>{var o=W(7192),me=W(8275),Ae=W(9626),E=W(1503).Z,Se=Ae.featureEach,Ne=me.featureCollection;function xe(ct){var Ke=new o(ct);return Ke.insert=function(Te){if("Feature"!==Te.type)throw new Error("invalid feature");return Te.bbox=Te.bbox?Te.bbox:E(Te),o.prototype.insert.call(this,Te)},Ke.load=function(Te){var at=[];return Array.isArray(Te)?Te.forEach(function(Ct){if("Feature"!==Ct.type)throw new Error("invalid features");Ct.bbox=Ct.bbox?Ct.bbox:E(Ct),at.push(Ct)}):Se(Te,function(Ct){if("Feature"!==Ct.type)throw new Error("invalid features");Ct.bbox=Ct.bbox?Ct.bbox:E(Ct),at.push(Ct)}),o.prototype.load.call(this,at)},Ke.remove=function(Te,at){if("Feature"!==Te.type)throw new Error("invalid feature");return Te.bbox=Te.bbox?Te.bbox:E(Te),o.prototype.remove.call(this,Te,at)},Ke.clear=function(){return o.prototype.clear.call(this)},Ke.search=function(Te){var at=o.prototype.search.call(this,this.toBBox(Te));return Ne(at)},Ke.collides=function(Te){return o.prototype.collides.call(this,this.toBBox(Te))},Ke.all=function(){var Te=o.prototype.all.call(this);return Ne(Te)},Ke.toJSON=function(){return o.prototype.toJSON.call(this)},Ke.fromJSON=function(Te){return o.prototype.fromJSON.call(this,Te)},Ke.toBBox=function(Te){var at;if(Te.bbox)at=Te.bbox;else if(Array.isArray(Te)&&4===Te.length)at=Te;else if(Array.isArray(Te)&&6===Te.length)at=[Te[0],Te[1],Te[3],Te[4]];else if("Feature"===Te.type)at=E(Te);else{if("FeatureCollection"!==Te.type)throw new Error("invalid geojson");at=E(Te)}return{minX:at[0],minY:at[1],maxX:at[2],maxY:at[3]}},Ke}lt.exports=xe,lt.exports.default=xe},7192:function(lt){lt.exports=function(){"use strict";function Pe(ue,De,oe,ye,ce){!function Re(ve,we,Fe,se,_t){for(;se>Fe;){if(se-Fe>600){var Xe=se-Fe+1,st=we-Fe+1,de=Math.log(Xe),Qe=.5*Math.exp(2*de/3),dt=.5*Math.sqrt(de*Qe*(Xe-Qe)/Xe)*(st-Xe/2<0?-1:1);Re(ve,we,Math.max(Fe,Math.floor(we-st*Qe/Xe+dt)),Math.min(se,Math.floor(we+(Xe-st)*Qe/Xe+dt)),_t)}var $e=ve[we],gt=Fe,Mt=se;for(W(ve,Fe,we),_t(ve[se],$e)>0&&W(ve,Fe,se);gt<Mt;){for(W(ve,gt,Mt),gt++,Mt--;_t(ve[gt],$e)<0;)gt++;for(;_t(ve[Mt],$e)>0;)Mt--}0===_t(ve[Fe],$e)?W(ve,Fe,Mt):W(ve,++Mt,se),Mt<=we&&(Fe=Mt+1),we<=Mt&&(se=Mt-1)}}(ue,De,oe||0,ye||ue.length-1,ce||o)}function W(ue,De,oe){var ye=ue[De];ue[De]=ue[oe],ue[oe]=ye}function o(ue,De){return ue<De?-1:ue>De?1:0}var me=function(ue){void 0===ue&&(ue=9),this._maxEntries=Math.max(4,ue),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function Ae(ue,De,oe){if(!oe)return De.indexOf(ue);for(var ye=0;ye<De.length;ye++)if(oe(ue,De[ye]))return ye;return-1}function E(ue,De){Se(ue,0,ue.children.length,De,ue)}function Se(ue,De,oe,ye,ce){ce||(ce=at(null)),ce.minX=1/0,ce.minY=1/0,ce.maxX=-1/0,ce.maxY=-1/0;for(var Re=De;Re<oe;Re++){var ve=ue.children[Re];he(ce,ue.leaf?ye(ve):ve)}return ce}function he(ue,De){return ue.minX=Math.min(ue.minX,De.minX),ue.minY=Math.min(ue.minY,De.minY),ue.maxX=Math.max(ue.maxX,De.maxX),ue.maxY=Math.max(ue.maxY,De.maxY),ue}function Oe(ue,De){return ue.minX-De.minX}function Ne(ue,De){return ue.minY-De.minY}function xe(ue){return(ue.maxX-ue.minX)*(ue.maxY-ue.minY)}function ct(ue){return ue.maxX-ue.minX+(ue.maxY-ue.minY)}function Ke(ue,De){return ue.minX<=De.minX&&ue.minY<=De.minY&&De.maxX<=ue.maxX&&De.maxY<=ue.maxY}function Te(ue,De){return De.minX<=ue.maxX&&De.minY<=ue.maxY&&De.maxX>=ue.minX&&De.maxY>=ue.minY}function at(ue){return{children:ue,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ct(ue,De,oe,ye,ce){for(var Re=[De,oe];Re.length;)if(!((oe=Re.pop())-(De=Re.pop())<=ye)){var ve=De+Math.ceil((oe-De)/ye/2)*ye;Pe(ue,ve,De,oe,ce),Re.push(De,ve,ve,oe)}}return me.prototype.all=function(){return this._all(this.data,[])},me.prototype.search=function(ue){var De=this.data,oe=[];if(!Te(ue,De))return oe;for(var ye=this.toBBox,ce=[];De;){for(var Re=0;Re<De.children.length;Re++){var ve=De.children[Re],we=De.leaf?ye(ve):ve;Te(ue,we)&&(De.leaf?oe.push(ve):Ke(ue,we)?this._all(ve,oe):ce.push(ve))}De=ce.pop()}return oe},me.prototype.collides=function(ue){var De=this.data;if(!Te(ue,De))return!1;for(var oe=[];De;){for(var ye=0;ye<De.children.length;ye++){var ce=De.children[ye],Re=De.leaf?this.toBBox(ce):ce;if(Te(ue,Re)){if(De.leaf||Ke(ue,Re))return!0;oe.push(ce)}}De=oe.pop()}return!1},me.prototype.load=function(ue){if(!ue||!ue.length)return this;if(ue.length<this._minEntries){for(var De=0;De<ue.length;De++)this.insert(ue[De]);return this}var oe=this._build(ue.slice(),0,ue.length-1,0);if(this.data.children.length)if(this.data.height===oe.height)this._splitRoot(this.data,oe);else{if(this.data.height<oe.height){var ye=this.data;this.data=oe,oe=ye}this._insert(oe,this.data.height-oe.height-1,!0)}else this.data=oe;return this},me.prototype.insert=function(ue){return ue&&this._insert(ue,this.data.height-1),this},me.prototype.clear=function(){return this.data=at([]),this},me.prototype.remove=function(ue,De){if(!ue)return this;for(var oe,ye,ce,Re=this.data,ve=this.toBBox(ue),we=[],Fe=[];Re||we.length;){if(Re||(Re=we.pop(),ye=we[we.length-1],oe=Fe.pop(),ce=!0),Re.leaf){var se=Ae(ue,Re.children,De);if(-1!==se)return Re.children.splice(se,1),we.push(Re),this._condense(we),this}ce||Re.leaf||!Ke(Re,ve)?ye?(oe++,Re=ye.children[oe],ce=!1):Re=null:(we.push(Re),Fe.push(oe),oe=0,ye=Re,Re=Re.children[0])}return this},me.prototype.toBBox=function(ue){return ue},me.prototype.compareMinX=function(ue,De){return ue.minX-De.minX},me.prototype.compareMinY=function(ue,De){return ue.minY-De.minY},me.prototype.toJSON=function(){return this.data},me.prototype.fromJSON=function(ue){return this.data=ue,this},me.prototype._all=function(ue,De){for(var oe=[];ue;)ue.leaf?De.push.apply(De,ue.children):oe.push.apply(oe,ue.children),ue=oe.pop();return De},me.prototype._build=function(ue,De,oe,ye){var ce,Re=oe-De+1,ve=this._maxEntries;if(Re<=ve)return E(ce=at(ue.slice(De,oe+1)),this.toBBox),ce;ye||(ye=Math.ceil(Math.log(Re)/Math.log(ve)),ve=Math.ceil(Re/Math.pow(ve,ye-1))),(ce=at([])).leaf=!1,ce.height=ye;var we=Math.ceil(Re/ve),Fe=we*Math.ceil(Math.sqrt(ve));Ct(ue,De,oe,Fe,this.compareMinX);for(var se=De;se<=oe;se+=Fe){var _t=Math.min(se+Fe-1,oe);Ct(ue,se,_t,we,this.compareMinY);for(var Xe=se;Xe<=_t;Xe+=we){var st=Math.min(Xe+we-1,_t);ce.children.push(this._build(ue,Xe,st,ye-1))}}return E(ce,this.toBBox),ce},me.prototype._chooseSubtree=function(ue,De,oe,ye){for(;ye.push(De),!De.leaf&&ye.length-1!==oe;){for(var ce=1/0,Re=1/0,ve=void 0,we=0;we<De.children.length;we++){var Fe=De.children[we],se=xe(Fe),_t=(Xe=ue,st=Fe,(Math.max(st.maxX,Xe.maxX)-Math.min(st.minX,Xe.minX))*(Math.max(st.maxY,Xe.maxY)-Math.min(st.minY,Xe.minY))-se);_t<Re?(Re=_t,ce=se<ce?se:ce,ve=Fe):_t===Re&&se<ce&&(ce=se,ve=Fe)}De=ve||De.children[0]}var Xe,st;return De},me.prototype._insert=function(ue,De,oe){var ye=oe?ue:this.toBBox(ue),ce=[],Re=this._chooseSubtree(ye,this.data,De,ce);for(Re.children.push(ue),he(Re,ye);De>=0&&ce[De].children.length>this._maxEntries;)this._split(ce,De),De--;this._adjustParentBBoxes(ye,ce,De)},me.prototype._split=function(ue,De){var oe=ue[De],ye=oe.children.length,ce=this._minEntries;this._chooseSplitAxis(oe,ce,ye);var Re=this._chooseSplitIndex(oe,ce,ye),ve=at(oe.children.splice(Re,oe.children.length-Re));ve.height=oe.height,ve.leaf=oe.leaf,E(oe,this.toBBox),E(ve,this.toBBox),De?ue[De-1].children.push(ve):this._splitRoot(oe,ve)},me.prototype._splitRoot=function(ue,De){this.data=at([ue,De]),this.data.height=ue.height+1,this.data.leaf=!1,E(this.data,this.toBBox)},me.prototype._chooseSplitIndex=function(ue,De,oe){for(var ye,ce,Re,ve,we,Fe,se,_t=1/0,Xe=1/0,st=De;st<=oe-De;st++){var de=Se(ue,0,st,this.toBBox),Qe=Se(ue,st,oe,this.toBBox),dt=(ce=de,Re=Qe,void 0,void 0,void 0,void 0,ve=Math.max(ce.minX,Re.minX),we=Math.max(ce.minY,Re.minY),Fe=Math.min(ce.maxX,Re.maxX),se=Math.min(ce.maxY,Re.maxY),Math.max(0,Fe-ve)*Math.max(0,se-we)),Me=xe(de)+xe(Qe);dt<_t?(_t=dt,ye=st,Xe=Me<Xe?Me:Xe):dt===_t&&Me<Xe&&(Xe=Me,ye=st)}return ye||oe-De},me.prototype._chooseSplitAxis=function(ue,De,oe){var ye=ue.leaf?this.compareMinX:Oe,ce=ue.leaf?this.compareMinY:Ne;this._allDistMargin(ue,De,oe,ye)<this._allDistMargin(ue,De,oe,ce)&&ue.children.sort(ye)},me.prototype._allDistMargin=function(ue,De,oe,ye){ue.children.sort(ye);for(var ce=this.toBBox,Re=Se(ue,0,De,ce),ve=Se(ue,oe-De,oe,ce),we=ct(Re)+ct(ve),Fe=De;Fe<oe-De;Fe++){var se=ue.children[Fe];he(Re,ue.leaf?ce(se):se),we+=ct(Re)}for(var _t=oe-De-1;_t>=De;_t--){var Xe=ue.children[_t];he(ve,ue.leaf?ce(Xe):Xe),we+=ct(ve)}return we},me.prototype._adjustParentBBoxes=function(ue,De,oe){for(var ye=oe;ye>=0;ye--)he(De[ye],ue)},me.prototype._condense=function(ue){for(var De=ue.length-1,oe=void 0;De>=0;De--)0===ue[De].children.length?De>0?(oe=ue[De-1].children).splice(oe.indexOf(ue[De]),1):this.clear():E(ue[De],this.toBBox)},me}()},5203:(lt,Pe,W)=>{"use strict";var o,me=SyntaxError,Ae=Function,E=TypeError,Se=function(st){try{return Ae('"use strict"; return ('+st+").constructor;")()}catch{}},he=Object.getOwnPropertyDescriptor;if(he)try{he({},"")}catch{he=null}var Oe=function(){throw new E},Ne=he?function(){try{return Oe}catch{try{return he(arguments,"callee").get}catch{return Oe}}}():Oe,xe=W(2969)(),ct=Object.getPrototypeOf||function(st){return st.__proto__},Ke={},Te=typeof Uint8Array>"u"?o:ct(Uint8Array),at={"%AggregateError%":typeof AggregateError>"u"?o:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?o:ArrayBuffer,"%ArrayIteratorPrototype%":xe?ct([][Symbol.iterator]()):o,"%AsyncFromSyncIteratorPrototype%":o,"%AsyncFunction%":Ke,"%AsyncGenerator%":Ke,"%AsyncGeneratorFunction%":Ke,"%AsyncIteratorPrototype%":Ke,"%Atomics%":typeof Atomics>"u"?o:Atomics,"%BigInt%":typeof BigInt>"u"?o:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?o:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?o:Float32Array,"%Float64Array%":typeof Float64Array>"u"?o:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?o:FinalizationRegistry,"%Function%":Ae,"%GeneratorFunction%":Ke,"%Int8Array%":typeof Int8Array>"u"?o:Int8Array,"%Int16Array%":typeof Int16Array>"u"?o:Int16Array,"%Int32Array%":typeof Int32Array>"u"?o:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":xe?ct(ct([][Symbol.iterator]())):o,"%JSON%":"object"==typeof JSON?JSON:o,"%Map%":typeof Map>"u"?o:Map,"%MapIteratorPrototype%":typeof Map>"u"||!xe?o:ct((new Map)[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?o:Promise,"%Proxy%":typeof Proxy>"u"?o:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?o:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?o:Set,"%SetIteratorPrototype%":typeof Set>"u"||!xe?o:ct((new Set)[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?o:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":xe?ct(""[Symbol.iterator]()):o,"%Symbol%":xe?Symbol:o,"%SyntaxError%":me,"%ThrowTypeError%":Ne,"%TypedArray%":Te,"%TypeError%":E,"%Uint8Array%":typeof Uint8Array>"u"?o:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?o:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?o:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?o:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?o:WeakMap,"%WeakRef%":typeof WeakRef>"u"?o:WeakRef,"%WeakSet%":typeof WeakSet>"u"?o:WeakSet},Ct=function st(de){var Qe;if("%AsyncFunction%"===de)Qe=Se("async function () {}");else if("%GeneratorFunction%"===de)Qe=Se("function* () {}");else if("%AsyncGeneratorFunction%"===de)Qe=Se("async function* () {}");else if("%AsyncGenerator%"===de){var dt=st("%AsyncGeneratorFunction%");dt&&(Qe=dt.prototype)}else if("%AsyncIteratorPrototype%"===de){var Me=st("%AsyncGenerator%");Me&&(Qe=ct(Me.prototype))}return at[de]=Qe,Qe},ue={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},De=W(4444),oe=W(3164),ye=De.call(Function.call,Array.prototype.concat),ce=De.call(Function.apply,Array.prototype.splice),Re=De.call(Function.call,String.prototype.replace),ve=De.call(Function.call,String.prototype.slice),we=De.call(Function.call,RegExp.prototype.exec),Fe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,se=/\\(\\)?/g,_t=function(de){var Qe=ve(de,0,1),dt=ve(de,-1);if("%"===Qe&&"%"!==dt)throw new me("invalid intrinsic syntax, expected closing `%`");if("%"===dt&&"%"!==Qe)throw new me("invalid intrinsic syntax, expected opening `%`");var Me=[];return Re(de,Fe,function(ut,$e,gt,Mt){Me[Me.length]=gt?Re(Mt,se,"$1"):$e||ut}),Me},Xe=function(de,Qe){var Me,dt=de;if(oe(ue,dt)&&(dt="%"+(Me=ue[dt])[0]+"%"),oe(at,dt)){var ut=at[dt];if(ut===Ke&&(ut=Ct(dt)),typeof ut>"u"&&!Qe)throw new E("intrinsic "+de+" exists, but is not available. Please file an issue!");return{alias:Me,name:dt,value:ut}}throw new me("intrinsic "+de+" does not exist!")};lt.exports=function(de,Qe){if("string"!=typeof de||0===de.length)throw new E("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof Qe)throw new E('"allowMissing" argument must be a boolean');if(null===we(/^%?[^%]*%?$/,de))throw new me("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var dt=_t(de),Me=dt.length>0?dt[0]:"",ut=Xe("%"+Me+"%",Qe),$e=ut.name,gt=ut.value,Mt=!1,tt=ut.alias;tt&&(Me=tt[0],ce(dt,ye([0,1],tt)));for(var Bt=1,Vt=!0;Bt<dt.length;Bt+=1){var rn=dt[Bt],Gt=ve(rn,0,1),Vn=ve(rn,-1);if(('"'===Gt||"'"===Gt||"`"===Gt||'"'===Vn||"'"===Vn||"`"===Vn)&&Gt!==Vn)throw new me("property names with quotes must have matching quotes");if(("constructor"===rn||!Vt)&&(Mt=!0),oe(at,$e="%"+(Me+="."+rn)+"%"))gt=at[$e];else if(null!=gt){if(!(rn in gt)){if(!Qe)throw new E("base intrinsic for "+de+" exists, but the property is not available.");return}if(he&&Bt+1>=dt.length){var Bn=he(gt,rn);gt=(Vt=!!Bn)&&"get"in Bn&&!("originalValue"in Bn.get)?Bn.get:gt[rn]}else Vt=oe(gt,rn),gt=gt[rn];Vt&&!Mt&&(at[$e]=gt)}}return gt}},7027:(lt,Pe,W)=>{"use strict";var me=W(5203)("%Object.defineProperty%",!0),Ae=function(){if(me)try{return me({},"a",{value:1}),!0}catch{return!1}return!1};Ae.hasArrayLengthDefineBug=function(){if(!Ae())return null;try{return 1!==me([],"length",{value:1}).length}catch{return!0}},lt.exports=Ae},2969:(lt,Pe,W)=>{"use strict";var o=typeof Symbol<"u"&&Symbol,me=W(1983);lt.exports=function(){return"function"==typeof o&&"function"==typeof Symbol&&"symbol"==typeof o("foo")&&"symbol"==typeof Symbol("bar")&&me()}},1983:lt=>{"use strict";lt.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var W={},o=Symbol("test"),me=Object(o);if("string"==typeof o||"[object Symbol]"!==Object.prototype.toString.call(o)||"[object Symbol]"!==Object.prototype.toString.call(me))return!1;for(o in W[o]=42,W)return!1;if("function"==typeof Object.keys&&0!==Object.keys(W).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(W).length)return!1;var E=Object.getOwnPropertySymbols(W);if(1!==E.length||E[0]!==o||!Object.prototype.propertyIsEnumerable.call(W,o))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var Se=Object.getOwnPropertyDescriptor(W,o);if(42!==Se.value||!0!==Se.enumerable)return!1}return!0}},6259:(lt,Pe,W)=>{"use strict";var o=W(1983);lt.exports=function(){return o()&&!!Symbol.toStringTag}},3164:(lt,Pe,W)=>{"use strict";var o=W(4444);lt.exports=o.call(Function.call,Object.prototype.hasOwnProperty)},3407:(lt,Pe,W)=>{"use strict";var o=W(6259)(),Ae=W(5834)("Object.prototype.toString"),E=function(Ne){return!(o&&Ne&&"object"==typeof Ne&&Symbol.toStringTag in Ne)&&"[object Arguments]"===Ae(Ne)},Se=function(Ne){return!!E(Ne)||null!==Ne&&"object"==typeof Ne&&"number"==typeof Ne.length&&Ne.length>=0&&"[object Array]"!==Ae(Ne)&&"[object Function]"===Ae(Ne.callee)},he=function(){return E(arguments)}();E.isLegacyArguments=Se,lt.exports=he?E:Se},2374:(lt,Pe,W)=>{"use strict";var o=Date.prototype.getDay,Ae=Object.prototype.toString,Se=W(6259)();lt.exports=function(Oe){return"object"==typeof Oe&&null!==Oe&&(Se?function(Oe){try{return o.call(Oe),!0}catch{return!1}}(Oe):"[object Date]"===Ae.call(Oe))}},2342:(lt,Pe,W)=>{"use strict";var Ae,E,Se,he,o=W(5834),me=W(6259)();if(me){Ae=o("Object.prototype.hasOwnProperty"),E=o("RegExp.prototype.exec"),Se={};var Oe=function(){throw Se};he={toString:Oe,valueOf:Oe},"symbol"==typeof Symbol.toPrimitive&&(he[Symbol.toPrimitive]=Oe)}var Ne=o("Object.prototype.toString"),xe=Object.getOwnPropertyDescriptor;lt.exports=me?function(Te){if(!Te||"object"!=typeof Te)return!1;var at=xe(Te,"lastIndex");if(!at||!Ae(at,"value"))return!1;try{E(Te,he)}catch(ue){return ue===Se}}:function(Te){return!(!Te||"object"!=typeof Te&&"function"!=typeof Te)&&"[object RegExp]"===Ne(Te)}},5943:lt=>{"use strict";var Pe=Object.getOwnPropertySymbols,W=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function me(E){if(null==E)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(E)}lt.exports=function Ae(){try{if(!Object.assign)return!1;var E=new String("abc");if(E[5]="de","5"===Object.getOwnPropertyNames(E)[0])return!1;for(var Se={},he=0;he<10;he++)Se["_"+String.fromCharCode(he)]=he;if("0123456789"!==Object.getOwnPropertyNames(Se).map(function(xe){return Se[xe]}).join(""))return!1;var Ne={};return"abcdefghijklmnopqrst".split("").forEach(function(xe){Ne[xe]=xe}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},Ne)).join("")}catch{return!1}}()?Object.assign:function(E,Se){for(var he,Ne,Oe=me(E),xe=1;xe<arguments.length;xe++){for(var ct in he=Object(arguments[xe]))W.call(he,ct)&&(Oe[ct]=he[ct]);if(Pe){Ne=Pe(he);for(var Ke=0;Ke<Ne.length;Ke++)o.call(he,Ne[Ke])&&(Oe[Ne[Ke]]=he[Ne[Ke]])}}return Oe}},1175:lt=>{"use strict";var Pe=function(W){return W!=W};lt.exports=function(o,me){return 0===o&&0===me?1/o==1/me:!!(o===me||Pe(o)&&Pe(me))}},2e3:(lt,Pe,W)=>{"use strict";var o=W(2358),me=W(5685),Ae=W(1175),E=W(6305),Se=W(3859),he=me(E(),Object);o(he,{getPolyfill:E,implementation:Ae,shim:Se}),lt.exports=he},6305:(lt,Pe,W)=>{"use strict";var o=W(1175);lt.exports=function(){return"function"==typeof Object.is?Object.is:o}},3859:(lt,Pe,W)=>{"use strict";var o=W(6305),me=W(2358);lt.exports=function(){var E=o();return me(Object,{is:E},{is:function(){return Object.is!==E}}),E}},2450:(lt,Pe,W)=>{"use strict";var o;if(!Object.keys){var me=Object.prototype.hasOwnProperty,Ae=Object.prototype.toString,E=W(9978),Se=Object.prototype.propertyIsEnumerable,he=!Se.call({toString:null},"toString"),Oe=Se.call(function(){},"prototype"),Ne=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],xe=function(at){var Ct=at.constructor;return Ct&&Ct.prototype===at},ct={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},Ke=function(){if(typeof window>"u")return!1;for(var at in window)try{if(!ct["$"+at]&&me.call(window,at)&&null!==window[at]&&"object"==typeof window[at])try{xe(window[at])}catch{return!0}}catch{return!0}return!1}();o=function(Ct){var ue=null!==Ct&&"object"==typeof Ct,De="[object Function]"===Ae.call(Ct),oe=E(Ct),ye=ue&&"[object String]"===Ae.call(Ct),ce=[];if(!ue&&!De&&!oe)throw new TypeError("Object.keys called on a non-object");var Re=Oe&&De;if(ye&&Ct.length>0&&!me.call(Ct,0))for(var ve=0;ve<Ct.length;++ve)ce.push(String(ve));if(oe&&Ct.length>0)for(var we=0;we<Ct.length;++we)ce.push(String(we));else for(var Fe in Ct)(!Re||"prototype"!==Fe)&&me.call(Ct,Fe)&&ce.push(String(Fe));if(he)for(var se=function(at){if(typeof window>"u"||!Ke)return xe(at);try{return xe(at)}catch{return!1}}(Ct),_t=0;_t<Ne.length;++_t)(!se||"constructor"!==Ne[_t])&&me.call(Ct,Ne[_t])&&ce.push(Ne[_t]);return ce}}lt.exports=o},1356:(lt,Pe,W)=>{"use strict";var o=Array.prototype.slice,me=W(9978),Ae=Object.keys,E=Ae?function(Oe){return Ae(Oe)}:W(2450),Se=Object.keys;E.shim=function(){if(Object.keys){var Oe=function(){var Ne=Object.keys(arguments);return Ne&&Ne.length===arguments.length}(1,2);Oe||(Object.keys=function(xe){return me(xe)?Se(o.call(xe)):Se(xe)})}else Object.keys=E;return Object.keys||E},lt.exports=E},9978:lt=>{"use strict";var Pe=Object.prototype.toString;lt.exports=function(o){var me=Pe.call(o),Ae="[object Arguments]"===me;return Ae||(Ae="[object Array]"!==me&&null!==o&&"object"==typeof o&&"number"==typeof o.length&&o.length>=0&&"[object Function]"===Pe.call(o.callee)),Ae}},1766:lt=>{lt.exports=function(W,o,me,Ae){var E=W[0],Se=W[1],he=!1;void 0===me&&(me=0),void 0===Ae&&(Ae=o.length);for(var Oe=(Ae-me)/2,Ne=0,xe=Oe-1;Ne<Oe;xe=Ne++){var ct=o[me+2*Ne+0],Ke=o[me+2*Ne+1],at=o[me+2*xe+1];Ke>Se!=at>Se&&E<(o[me+2*xe+0]-ct)*(Se-Ke)/(at-Ke)+ct&&(he=!he)}return he}},3870:(lt,Pe,W)=>{var o=W(1766),me=W(2260);lt.exports=function(E,Se,he,Oe){return Se.length>0&&Array.isArray(Se[0])?me(E,Se,he,Oe):o(E,Se,he,Oe)},lt.exports.nested=me,lt.exports.flat=o},2260:lt=>{lt.exports=function(W,o,me,Ae){var E=W[0],Se=W[1],he=!1;void 0===me&&(me=0),void 0===Ae&&(Ae=o.length);for(var Oe=Ae-me,Ne=0,xe=Oe-1;Ne<Oe;xe=Ne++){var ct=o[Ne+me][0],Ke=o[Ne+me][1],at=o[xe+me][1];Ke>Se!=at>Se&&E<(o[xe+me][0]-ct)*(Se-Ke)/(at-Ke)+ct&&(he=!he)}return he}},9855:function(lt){lt.exports=function(){"use strict";function Pe(It,je){if(!(It instanceof je))throw new TypeError("Cannot call a class as a function")}function W(It,je){for(var Le=0;Le<je.length;Le++){var ke=je[Le];ke.enumerable=ke.enumerable||!1,ke.configurable=!0,"value"in ke&&(ke.writable=!0),Object.defineProperty(It,ke.key,ke)}}function o(It,je,Le){return je&&W(It.prototype,je),Le&&W(It,Le),It}var me=function It(je,Le){this.next=null,this.key=je,this.data=Le,this.left=null,this.right=null};function Ae(It,je){return It>je?1:It<je?-1:0}function E(It,je,Le){for(var ke=new me(null,null),Je=ke,Tt=ke;;){var Yt=Le(It,je.key);if(Yt<0){if(null===je.left)break;if(Le(It,je.left.key)<0&&(je.left=(ln=je.left).right,ln.right=je,null===(je=ln).left))break;Tt.left=je,Tt=je,je=je.left}else{if(!(Yt>0))break;if(null===je.right)break;var ln;if(Le(It,je.right.key)>0&&(je.right=(ln=je.right).left,ln.left=je,null===(je=ln).right))break;Je.right=je,Je=je,je=je.right}}return Je.right=je.left,Tt.left=je.right,je.left=ke.right,je.right=ke.left,je}function Se(It,je,Le,ke){var Je=new me(It,je);if(null===Le)return Je.left=Je.right=null,Je;var Tt=ke(It,(Le=E(It,Le,ke)).key);return Tt<0?(Je.left=Le.left,Je.right=Le,Le.left=null):Tt>=0&&(Je.right=Le.right,Je.left=Le,Le.right=null),Je}function he(It,je,Le){var ke=null,Je=null;if(je){var Tt=Le((je=E(It,je,Le)).key,It);0===Tt?(ke=je.left,Je=je.right):Tt<0?(Je=je.right,je.right=null,ke=je):(ke=je.left,je.left=null,Je=je)}return{left:ke,right:Je}}function Ne(It,je,Le,ke,Je){if(It){ke(je+(Le?"\u2514\u2500\u2500 ":"\u251c\u2500\u2500 ")+Je(It)+"\n");var Tt=je+(Le?"    ":"\u2502   ");It.left&&Ne(It.left,Tt,!1,ke,Je),It.right&&Ne(It.right,Tt,!0,ke,Je)}}var xe=function(){function It(je){void 0===je&&(je=Ae),this._root=null,this._size=0,this._comparator=je}return It.prototype.insert=function(je,Le){return this._size++,this._root=Se(je,Le,this._root,this._comparator)},It.prototype.add=function(je,Le){var ke=new me(je,Le);null===this._root&&(ke.left=ke.right=null,this._size++,this._root=ke);var Je=this._comparator,Tt=E(je,this._root,Je),Yt=Je(je,Tt.key);return 0===Yt?this._root=Tt:(Yt<0?(ke.left=Tt.left,ke.right=Tt,Tt.left=null):Yt>0&&(ke.right=Tt.right,ke.left=Tt,Tt.right=null),this._size++,this._root=ke),this._root},It.prototype.remove=function(je){this._root=this._remove(je,this._root,this._comparator)},It.prototype._remove=function(je,Le,ke){var Je;return null===Le?null:0===ke(je,(Le=E(je,Le,ke)).key)?(null===Le.left?Je=Le.right:(Je=E(je,Le.left,ke)).right=Le.right,this._size--,Je):Le},It.prototype.pop=function(){var je=this._root;if(je){for(;je.left;)je=je.left;return this._root=E(je.key,this._root,this._comparator),this._root=this._remove(je.key,this._root,this._comparator),{key:je.key,data:je.data}}return null},It.prototype.findStatic=function(je){for(var Le=this._root,ke=this._comparator;Le;){var Je=ke(je,Le.key);if(0===Je)return Le;Le=Je<0?Le.left:Le.right}return null},It.prototype.find=function(je){return this._root&&(this._root=E(je,this._root,this._comparator),0!==this._comparator(je,this._root.key))?null:this._root},It.prototype.contains=function(je){for(var Le=this._root,ke=this._comparator;Le;){var Je=ke(je,Le.key);if(0===Je)return!0;Le=Je<0?Le.left:Le.right}return!1},It.prototype.forEach=function(je,Le){for(var ke=this._root,Je=[],Tt=!1;!Tt;)null!==ke?(Je.push(ke),ke=ke.left):0!==Je.length?(ke=Je.pop(),je.call(Le,ke),ke=ke.right):Tt=!0;return this},It.prototype.range=function(je,Le,ke,Je){for(var Tt=[],Yt=this._comparator,ln=this._root;0!==Tt.length||ln;)if(ln)Tt.push(ln),ln=ln.left;else{if(Yt((ln=Tt.pop()).key,Le)>0)break;if(Yt(ln.key,je)>=0&&ke.call(Je,ln))return this;ln=ln.right}return this},It.prototype.keys=function(){var je=[];return this.forEach(function(Le){return je.push(Le.key)}),je},It.prototype.values=function(){var je=[];return this.forEach(function(Le){return je.push(Le.data)}),je},It.prototype.min=function(){return this._root?this.minNode(this._root).key:null},It.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},It.prototype.minNode=function(je){if(void 0===je&&(je=this._root),je)for(;je.left;)je=je.left;return je},It.prototype.maxNode=function(je){if(void 0===je&&(je=this._root),je)for(;je.right;)je=je.right;return je},It.prototype.at=function(je){for(var Le=this._root,ke=!1,Je=0,Tt=[];!ke;)if(Le)Tt.push(Le),Le=Le.left;else if(Tt.length>0){if(Le=Tt.pop(),Je===je)return Le;Je++,Le=Le.right}else ke=!0;return null},It.prototype.next=function(je){var Le=this._root,ke=null;if(je.right){for(ke=je.right;ke.left;)ke=ke.left;return ke}for(var Je=this._comparator;Le;){var Tt=Je(je.key,Le.key);if(0===Tt)break;Tt<0?(ke=Le,Le=Le.left):Le=Le.right}return ke},It.prototype.prev=function(je){var Le=this._root,ke=null;if(null!==je.left){for(ke=je.left;ke.right;)ke=ke.right;return ke}for(var Je=this._comparator;Le;){var Tt=Je(je.key,Le.key);if(0===Tt)break;Tt<0?Le=Le.left:(ke=Le,Le=Le.right)}return ke},It.prototype.clear=function(){return this._root=null,this._size=0,this},It.prototype.toList=function(){return function Te(It){for(var je=It,Le=[],ke=!1,Je=new me(null,null),Tt=Je;!ke;)je?(Le.push(je),je=je.left):Le.length>0?je=(je=Tt=Tt.next=Le.pop()).right:ke=!0;return Tt.next=null,Je.next}(this._root)},It.prototype.load=function(je,Le,ke){void 0===Le&&(Le=[]),void 0===ke&&(ke=!1);var Je=je.length,Tt=this._comparator;if(ke&&ue(je,Le,0,Je-1,Tt),null===this._root)this._root=ct(je,Le,0,Je),this._size=Je;else{var Yt=function Ct(It,je,Le){for(var ke=new me(null,null),Je=ke,Tt=It,Yt=je;null!==Tt&&null!==Yt;)Le(Tt.key,Yt.key)<0?(Je.next=Tt,Tt=Tt.next):(Je.next=Yt,Yt=Yt.next),Je=Je.next;return null!==Tt?Je.next=Tt:null!==Yt&&(Je.next=Yt),ke.next}(this.toList(),function Ke(It,je){for(var Le=new me(null,null),ke=Le,Je=0;Je<It.length;Je++)ke=ke.next=new me(It[Je],je[Je]);return ke.next=null,Le.next}(je,Le),Tt);this._root=at({head:Yt},0,Je=this._size+Je)}return this},It.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(It.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(It.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),It.prototype.toString=function(je){void 0===je&&(je=function(Je){return String(Je.key)});var Le=[];return Ne(this._root,"",!0,function(ke){return Le.push(ke)},je),Le.join("")},It.prototype.update=function(je,Le,ke){var Je=this._comparator,Tt=he(je,this._root,Je),Yt=Tt.left,ln=Tt.right;Je(je,Le)<0?ln=Se(Le,ke,ln,Je):Yt=Se(Le,ke,Yt,Je),this._root=function Oe(It,je,Le){return null===je?It:(null===It||((je=E(It.key,je,Le)).left=It),je)}(Yt,ln,Je)},It.prototype.split=function(je){return he(je,this._root,this._comparator)},It}();function ct(It,je,Le,ke){var Je=ke-Le;if(Je>0){var Tt=Le+Math.floor(Je/2),un=new me(It[Tt],je[Tt]);return un.left=ct(It,je,Le,Tt),un.right=ct(It,je,Tt+1,ke),un}return null}function at(It,je,Le){var ke=Le-je;if(ke>0){var Je=je+Math.floor(ke/2),Tt=at(It,je,Je),Yt=It.head;return Yt.left=Tt,It.head=It.head.next,Yt.right=at(It,Je+1,Le),Yt}return null}function ue(It,je,Le,ke,Je){if(!(Le>=ke)){for(var Tt=It[Le+ke>>1],Yt=Le-1,ln=ke+1;;){do{Yt++}while(Je(It[Yt],Tt)<0);do{ln--}while(Je(It[ln],Tt)>0);if(Yt>=ln)break;var un=It[Yt];It[Yt]=It[ln],It[ln]=un,un=je[Yt],je[Yt]=je[ln],je[ln]=un}ue(It,je,Le,ln,Je),ue(It,je,ln+1,ke,Je)}}var De=function(je,Le){return je.ll.x<=Le.x&&Le.x<=je.ur.x&&je.ll.y<=Le.y&&Le.y<=je.ur.y},oe=function(je,Le){return Le.ur.x<je.ll.x||je.ur.x<Le.ll.x||Le.ur.y<je.ll.y||je.ur.y<Le.ll.y?null:{ll:{x:je.ll.x<Le.ll.x?Le.ll.x:je.ll.x,y:je.ll.y<Le.ll.y?Le.ll.y:je.ll.y},ur:{x:je.ur.x<Le.ur.x?je.ur.x:Le.ur.x,y:je.ur.y<Le.ur.y?je.ur.y:Le.ur.y}}},ye=Number.EPSILON;void 0===ye&&(ye=Math.pow(2,-52));var ce=ye*ye,Re=function(je,Le){if(-ye<je&&je<ye&&-ye<Le&&Le<ye)return 0;var ke=je-Le;return ke*ke<ce*je*Le?0:je<Le?-1:1},ve=function(){function It(){Pe(this,It),this.reset()}return o(It,[{key:"reset",value:function(){this.xRounder=new we,this.yRounder=new we}},{key:"round",value:function(Le,ke){return{x:this.xRounder.round(Le),y:this.yRounder.round(ke)}}}]),It}(),we=function(){function It(){Pe(this,It),this.tree=new xe,this.round(0)}return o(It,[{key:"round",value:function(Le){var ke=this.tree.add(Le),Je=this.tree.prev(ke);if(null!==Je&&0===Re(ke.key,Je.key))return this.tree.remove(Le),Je.key;var Tt=this.tree.next(ke);return null!==Tt&&0===Re(ke.key,Tt.key)?(this.tree.remove(Le),Tt.key):Le}}]),It}(),Fe=new ve,se=function(je,Le){return je.x*Le.y-je.y*Le.x},_t=function(je,Le){return je.x*Le.x+je.y*Le.y},Xe=function(je,Le,ke){var Yt=se({x:Le.x-je.x,y:Le.y-je.y},{x:ke.x-je.x,y:ke.y-je.y});return Re(Yt,0)},st=function(je){return Math.sqrt(_t(je,je))},de=function(je,Le,ke){var Je={x:Le.x-je.x,y:Le.y-je.y},Tt={x:ke.x-je.x,y:ke.y-je.y};return se(Tt,Je)/st(Tt)/st(Je)},Qe=function(je,Le,ke){var Je={x:Le.x-je.x,y:Le.y-je.y},Tt={x:ke.x-je.x,y:ke.y-je.y};return _t(Tt,Je)/st(Tt)/st(Je)},dt=function(je,Le,ke){return 0===Le.y?null:{x:je.x+Le.x/Le.y*(ke-je.y),y:ke}},Me=function(je,Le,ke){return 0===Le.x?null:{x:ke,y:je.y+Le.y/Le.x*(ke-je.x)}},$e=function(){function It(je,Le){Pe(this,It),void 0===je.events?je.events=[this]:je.events.push(this),this.point=je,this.isLeft=Le}return o(It,null,[{key:"compare",value:function(Le,ke){var Je=It.comparePoints(Le.point,ke.point);return 0!==Je?Je:(Le.point!==ke.point&&Le.link(ke),Le.isLeft!==ke.isLeft?Le.isLeft?1:-1:Mt.compare(Le.segment,ke.segment))}},{key:"comparePoints",value:function(Le,ke){return Le.x<ke.x?-1:Le.x>ke.x?1:Le.y<ke.y?-1:Le.y>ke.y?1:0}}]),o(It,[{key:"link",value:function(Le){if(Le.point===this.point)throw new Error("Tried to link already linked events");for(var ke=Le.point.events,Je=0,Tt=ke.length;Je<Tt;Je++){var Yt=ke[Je];this.point.events.push(Yt),Yt.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var Le=this.point.events.length,ke=0;ke<Le;ke++){var Je=this.point.events[ke];if(void 0===Je.segment.consumedBy)for(var Tt=ke+1;Tt<Le;Tt++){var Yt=this.point.events[Tt];void 0===Yt.consumedBy&&Je.otherSE.point.events===Yt.otherSE.point.events&&Je.segment.consume(Yt.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var Le=[],ke=0,Je=this.point.events.length;ke<Je;ke++){var Tt=this.point.events[ke];Tt!==this&&!Tt.segment.ringOut&&Tt.segment.isInResult()&&Le.push(Tt)}return Le}},{key:"getLeftmostComparator",value:function(Le){var ke=this,Je=new Map,Tt=function(ln){var un=ln.otherSE;Je.set(ln,{sine:de(ke.point,Le.point,un.point),cosine:Qe(ke.point,Le.point,un.point)})};return function(Yt,ln){Je.has(Yt)||Tt(Yt),Je.has(ln)||Tt(ln);var un=Je.get(Yt),mt=un.sine,jt=un.cosine,In=Je.get(ln),sn=In.sine,Fn=In.cosine;return mt>=0&&sn>=0?jt<Fn?1:jt>Fn?-1:0:mt<0&&sn<0?jt<Fn?-1:jt>Fn?1:0:sn<mt?-1:sn>mt?1:0}}}]),It}(),gt=0,Mt=function(){function It(je,Le,ke,Je){Pe(this,It),this.id=++gt,this.leftSE=je,je.segment=this,je.otherSE=Le,this.rightSE=Le,Le.segment=this,Le.otherSE=je,this.rings=ke,this.windings=Je}return o(It,null,[{key:"compare",value:function(Le,ke){var Je=Le.leftSE.point.x,Tt=ke.leftSE.point.x,Yt=Le.rightSE.point.x,ln=ke.rightSE.point.x;if(ln<Je)return 1;if(Yt<Tt)return-1;var un=Le.leftSE.point.y,mt=ke.leftSE.point.y,jt=Le.rightSE.point.y,In=ke.rightSE.point.y;if(Je<Tt){if(mt<un&&mt<jt)return 1;if(mt>un&&mt>jt)return-1;var sn=Le.comparePoint(ke.leftSE.point);if(sn<0)return 1;if(sn>0)return-1;var Fn=ke.comparePoint(Le.rightSE.point);return 0!==Fn?Fn:-1}if(Je>Tt){if(un<mt&&un<In)return-1;if(un>mt&&un>In)return 1;var hr=ke.comparePoint(Le.leftSE.point);if(0!==hr)return hr;var Ti=Le.comparePoint(ke.rightSE.point);return Ti<0?1:Ti>0?-1:1}if(un<mt)return-1;if(un>mt)return 1;if(Yt<ln){var Bi=ke.comparePoint(Le.rightSE.point);if(0!==Bi)return Bi}if(Yt>ln){var fr=Le.comparePoint(ke.rightSE.point);if(fr<0)return 1;if(fr>0)return-1}if(Yt!==ln){var Cn=jt-un,qn=Yt-Je,hi=In-mt,Di=ln-Tt;if(Cn>qn&&hi<Di)return 1;if(Cn<qn&&hi>Di)return-1}return Yt>ln?1:Yt<ln||jt<In?-1:jt>In?1:Le.id<ke.id?-1:Le.id>ke.id?1:0}}]),o(It,[{key:"replaceRightSE",value:function(Le){this.rightSE=Le,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var Le=this.leftSE.point.y,ke=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:Le<ke?Le:ke},ur:{x:this.rightSE.point.x,y:Le>ke?Le:ke}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(Le){return Le.x===this.leftSE.point.x&&Le.y===this.leftSE.point.y||Le.x===this.rightSE.point.x&&Le.y===this.rightSE.point.y}},{key:"comparePoint",value:function(Le){if(this.isAnEndpoint(Le))return 0;var ke=this.leftSE.point,Je=this.rightSE.point,Tt=this.vector();if(ke.x===Je.x)return Le.x===ke.x?0:Le.x<ke.x?1:-1;if(Le.x===ke.x+(Le.y-ke.y)/Tt.y*Tt.x)return 0;var mt=ke.y+(Le.x-ke.x)/Tt.x*Tt.y;return Le.y===mt?0:Le.y<mt?-1:1}},{key:"getIntersection",value:function(Le){var ke=this.bbox(),Je=Le.bbox(),Tt=oe(ke,Je);if(null===Tt)return null;var Yt=this.leftSE.point,ln=this.rightSE.point,un=Le.leftSE.point,mt=Le.rightSE.point,jt=De(ke,un)&&0===this.comparePoint(un),In=De(Je,Yt)&&0===Le.comparePoint(Yt),sn=De(ke,mt)&&0===this.comparePoint(mt),Fn=De(Je,ln)&&0===Le.comparePoint(ln);if(In&&jt)return Fn&&!sn?ln:!Fn&&sn?mt:null;if(In)return sn&&Yt.x===mt.x&&Yt.y===mt.y?null:Yt;if(jt)return Fn&&ln.x===un.x&&ln.y===un.y?null:un;if(Fn&&sn)return null;if(Fn)return ln;if(sn)return mt;var hr=function(je,Le,ke,Je){if(0===Le.x)return Me(ke,Je,je.x);if(0===Je.x)return Me(je,Le,ke.x);if(0===Le.y)return dt(ke,Je,je.y);if(0===Je.y)return dt(je,Le,ke.y);var Tt=se(Le,Je);if(0==Tt)return null;var Yt={x:ke.x-je.x,y:ke.y-je.y},ln=se(Yt,Le)/Tt,un=se(Yt,Je)/Tt;return{x:(je.x+un*Le.x+(ke.x+ln*Je.x))/2,y:(je.y+un*Le.y+(ke.y+ln*Je.y))/2}}(Yt,this.vector(),un,Le.vector());return null!==hr&&De(Tt,hr)?Fe.round(hr.x,hr.y):null}},{key:"split",value:function(Le){var ke=[],Je=void 0!==Le.events,Tt=new $e(Le,!0),Yt=new $e(Le,!1),ln=this.rightSE;this.replaceRightSE(Yt),ke.push(Yt),ke.push(Tt);var un=new It(Tt,ln,this.rings.slice(),this.windings.slice());return $e.comparePoints(un.leftSE.point,un.rightSE.point)>0&&un.swapEvents(),$e.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),Je&&(Tt.checkForConsuming(),Yt.checkForConsuming()),ke}},{key:"swapEvents",value:function(){var Le=this.rightSE;this.rightSE=this.leftSE,this.leftSE=Le,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var ke=0,Je=this.windings.length;ke<Je;ke++)this.windings[ke]*=-1}},{key:"consume",value:function(Le){for(var ke=this,Je=Le;ke.consumedBy;)ke=ke.consumedBy;for(;Je.consumedBy;)Je=Je.consumedBy;var Tt=It.compare(ke,Je);if(0!==Tt){if(Tt>0){var Yt=ke;ke=Je,Je=Yt}if(ke.prev===Je){var ln=ke;ke=Je,Je=ln}for(var un=0,mt=Je.rings.length;un<mt;un++){var jt=Je.rings[un],In=Je.windings[un],sn=ke.rings.indexOf(jt);-1===sn?(ke.rings.push(jt),ke.windings.push(In)):ke.windings[sn]+=In}Je.rings=null,Je.windings=null,Je.consumedBy=ke,Je.leftSE.consumedBy=ke.leftSE,Je.rightSE.consumedBy=ke.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this._prevInResult=this.prev?this.prev.isInResult()?this.prev:this.prev.prevInResult():null),this._prevInResult}},{key:"beforeState",value:function(){return void 0!==this._beforeState||(this._beforeState=this.prev?(this.prev.consumedBy||this.prev).afterState():{rings:[],windings:[],multiPolys:[]}),this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var Le=this.beforeState();this._afterState={rings:Le.rings.slice(0),windings:Le.windings.slice(0),multiPolys:[]};for(var ke=this._afterState.rings,Je=this._afterState.windings,Tt=this._afterState.multiPolys,Yt=0,ln=this.rings.length;Yt<ln;Yt++){var un=this.rings[Yt],mt=this.windings[Yt],jt=ke.indexOf(un);-1===jt?(ke.push(un),Je.push(mt)):Je[jt]+=mt}for(var In=[],sn=[],Fn=0,hr=ke.length;Fn<hr;Fn++)if(0!==Je[Fn]){var Ti=ke[Fn],Bi=Ti.poly;if(-1===sn.indexOf(Bi))if(Ti.isExterior)In.push(Bi);else{-1===sn.indexOf(Bi)&&sn.push(Bi);var fr=In.indexOf(Ti.poly);-1!==fr&&In.splice(fr,1)}}for(var Cn=0,qn=In.length;Cn<qn;Cn++){var hi=In[Cn].multiPoly;-1===Tt.indexOf(hi)&&Tt.push(hi)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var Le=this.beforeState().multiPolys,ke=this.afterState().multiPolys;switch(hn.type){case"union":this._isInResult=0===Le.length!=(0===ke.length);break;case"intersection":var Yt,ln;Le.length<ke.length?(Yt=Le.length,ln=ke.length):(Yt=ke.length,ln=Le.length),this._isInResult=ln===hn.numMultiPolys&&Yt<ln;break;case"xor":var un=Math.abs(Le.length-ke.length);this._isInResult=un%2==1;break;case"difference":var mt=function(In){return 1===In.length&&In[0].isSubject};this._isInResult=mt(Le)!==mt(ke);break;default:throw new Error("Unrecognized operation type found ".concat(hn.type))}return this._isInResult}}],[{key:"fromRing",value:function(Le,ke,Je){var Tt,Yt,ln,un=$e.comparePoints(Le,ke);if(un<0)Tt=Le,Yt=ke,ln=1;else{if(!(un>0))throw new Error("Tried to create degenerate segment at [".concat(Le.x,", ").concat(Le.y,"]"));Tt=ke,Yt=Le,ln=-1}return new It(new $e(Tt,!0),new $e(Yt,!1),[Je],[ln])}}]),It}(),tt=function(){function It(je,Le,ke){if(Pe(this,It),!Array.isArray(je)||0===je.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=Le,this.isExterior=ke,this.segments=[],"number"!=typeof je[0][0]||"number"!=typeof je[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var Je=Fe.round(je[0][0],je[0][1]);this.bbox={ll:{x:Je.x,y:Je.y},ur:{x:Je.x,y:Je.y}};for(var Tt=Je,Yt=1,ln=je.length;Yt<ln;Yt++){if("number"!=typeof je[Yt][0]||"number"!=typeof je[Yt][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var un=Fe.round(je[Yt][0],je[Yt][1]);un.x===Tt.x&&un.y===Tt.y||(this.segments.push(Mt.fromRing(Tt,un,this)),un.x<this.bbox.ll.x&&(this.bbox.ll.x=un.x),un.y<this.bbox.ll.y&&(this.bbox.ll.y=un.y),un.x>this.bbox.ur.x&&(this.bbox.ur.x=un.x),un.y>this.bbox.ur.y&&(this.bbox.ur.y=un.y),Tt=un)}(Je.x!==Tt.x||Je.y!==Tt.y)&&this.segments.push(Mt.fromRing(Tt,Je,this))}return o(It,[{key:"getSweepEvents",value:function(){for(var Le=[],ke=0,Je=this.segments.length;ke<Je;ke++){var Tt=this.segments[ke];Le.push(Tt.leftSE),Le.push(Tt.rightSE)}return Le}}]),It}(),Bt=function(){function It(je,Le){if(Pe(this,It),!Array.isArray(je))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new tt(je[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var ke=1,Je=je.length;ke<Je;ke++){var Tt=new tt(je[ke],this,!1);Tt.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=Tt.bbox.ll.x),Tt.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=Tt.bbox.ll.y),Tt.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=Tt.bbox.ur.x),Tt.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=Tt.bbox.ur.y),this.interiorRings.push(Tt)}this.multiPoly=Le}return o(It,[{key:"getSweepEvents",value:function(){for(var Le=this.exteriorRing.getSweepEvents(),ke=0,Je=this.interiorRings.length;ke<Je;ke++)for(var Tt=this.interiorRings[ke].getSweepEvents(),Yt=0,ln=Tt.length;Yt<ln;Yt++)Le.push(Tt[Yt]);return Le}}]),It}(),Vt=function(){function It(je,Le){if(Pe(this,It),!Array.isArray(je))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof je[0][0][0]&&(je=[je])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var ke=0,Je=je.length;ke<Je;ke++){var Tt=new Bt(je[ke],this);Tt.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=Tt.bbox.ll.x),Tt.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=Tt.bbox.ll.y),Tt.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=Tt.bbox.ur.x),Tt.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=Tt.bbox.ur.y),this.polys.push(Tt)}this.isSubject=Le}return o(It,[{key:"getSweepEvents",value:function(){for(var Le=[],ke=0,Je=this.polys.length;ke<Je;ke++)for(var Tt=this.polys[ke].getSweepEvents(),Yt=0,ln=Tt.length;Yt<ln;Yt++)Le.push(Tt[Yt]);return Le}}]),It}(),rn=function(){function It(je){Pe(this,It),this.events=je;for(var Le=0,ke=je.length;Le<ke;Le++)je[Le].segment.ringOut=this;this.poly=null}return o(It,null,[{key:"factory",value:function(Le){for(var ke=[],Je=0,Tt=Le.length;Je<Tt;Je++){var Yt=Le[Je];if(Yt.isInResult()&&!Yt.ringOut){for(var ln=null,un=Yt.leftSE,mt=Yt.rightSE,jt=[un],In=un.point,sn=[];ln=un,jt.push(un=mt),un.point!==In;)for(;;){var Fn=un.getAvailableLinkedEvents();if(0===Fn.length){var hr=jt[0].point,Ti=jt[jt.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(hr.x,",")+" ".concat(hr.y,"]. Last matching segment found ends at")+" [".concat(Ti.x,", ").concat(Ti.y,"]."))}if(1===Fn.length){mt=Fn[0].otherSE;break}for(var Bi=null,fr=0,Cn=sn.length;fr<Cn;fr++)if(sn[fr].point===un.point){Bi=fr;break}if(null===Bi){sn.push({index:jt.length,point:un.point});var Di=un.getLeftmostComparator(ln);mt=Fn.sort(Di)[0].otherSE;break}var qn=sn.splice(Bi)[0],hi=jt.splice(qn.index);hi.unshift(hi[0].otherSE),ke.push(new It(hi.reverse()))}ke.push(new It(jt))}}return ke}}]),o(It,[{key:"getGeom",value:function(){for(var Le=this.events[0].point,ke=[Le],Je=1,Tt=this.events.length-1;Je<Tt;Je++){var Yt=this.events[Je].point;0!==Xe(Yt,Le,this.events[Je+1].point)&&(ke.push(Yt),Le=Yt)}if(1===ke.length)return null;0===Xe(ke[0],Le,ke[1])&&ke.shift(),ke.push(ke[0]);for(var jt=this.isExteriorRing()?1:-1,In=this.isExteriorRing()?0:ke.length-1,sn=this.isExteriorRing()?ke.length:-1,Fn=[],hr=In;hr!=sn;hr+=jt)Fn.push([ke[hr].x,ke[hr].y]);return Fn}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var Le=this.enclosingRing();this._isExteriorRing=!Le||!Le.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var Le=this.events[0],ke=1,Je=this.events.length;ke<Je;ke++){var Tt=this.events[ke];$e.compare(Le,Tt)>0&&(Le=Tt)}for(var Yt=Le.segment.prevInResult(),ln=Yt?Yt.prevInResult():null;;){if(!Yt)return null;if(!ln)return Yt.ringOut;if(ln.ringOut!==Yt.ringOut)return ln.ringOut.enclosingRing()!==Yt.ringOut?Yt.ringOut:Yt.ringOut.enclosingRing();Yt=ln.prevInResult(),ln=Yt?Yt.prevInResult():null}}}]),It}(),Gt=function(){function It(je){Pe(this,It),this.exteriorRing=je,je.poly=this,this.interiorRings=[]}return o(It,[{key:"addInterior",value:function(Le){this.interiorRings.push(Le),Le.poly=this}},{key:"getGeom",value:function(){var Le=[this.exteriorRing.getGeom()];if(null===Le[0])return null;for(var ke=0,Je=this.interiorRings.length;ke<Je;ke++){var Tt=this.interiorRings[ke].getGeom();null!==Tt&&Le.push(Tt)}return Le}}]),It}(),Vn=function(){function It(je){Pe(this,It),this.rings=je,this.polys=this._composePolys(je)}return o(It,[{key:"getGeom",value:function(){for(var Le=[],ke=0,Je=this.polys.length;ke<Je;ke++){var Tt=this.polys[ke].getGeom();null!==Tt&&Le.push(Tt)}return Le}},{key:"_composePolys",value:function(Le){for(var ke=[],Je=0,Tt=Le.length;Je<Tt;Je++){var Yt=Le[Je];if(!Yt.poly)if(Yt.isExteriorRing())ke.push(new Gt(Yt));else{var ln=Yt.enclosingRing();ln.poly||ke.push(new Gt(ln)),ln.poly.addInterior(Yt)}}return ke}}]),It}(),Bn=function(){function It(je){var Le=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mt.compare;Pe(this,It),this.queue=je,this.tree=new xe(Le),this.segments=[]}return o(It,[{key:"process",value:function(Le){var ke=Le.segment,Je=[];if(Le.consumedBy)return Le.isLeft?this.queue.remove(Le.otherSE):this.tree.remove(ke),Je;var Tt=Le.isLeft?this.tree.insert(ke):this.tree.find(ke);if(!Tt)throw new Error("Unable to find segment #".concat(ke.id," ")+"[".concat(ke.leftSE.point.x,", ").concat(ke.leftSE.point.y,"] -> ")+"[".concat(ke.rightSE.point.x,", ").concat(ke.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var Yt=Tt,ln=Tt,un=void 0,mt=void 0;void 0===un;)null===(Yt=this.tree.prev(Yt))?un=null:void 0===Yt.key.consumedBy&&(un=Yt.key);for(;void 0===mt;)null===(ln=this.tree.next(ln))?mt=null:void 0===ln.key.consumedBy&&(mt=ln.key);if(Le.isLeft){var jt=null;if(un){var In=un.getIntersection(ke);if(null!==In&&(ke.isAnEndpoint(In)||(jt=In),!un.isAnEndpoint(In)))for(var sn=this._splitSafely(un,In),Fn=0,hr=sn.length;Fn<hr;Fn++)Je.push(sn[Fn])}var Ti=null;if(mt){var Bi=mt.getIntersection(ke);if(null!==Bi&&(ke.isAnEndpoint(Bi)||(Ti=Bi),!mt.isAnEndpoint(Bi)))for(var fr=this._splitSafely(mt,Bi),Cn=0,qn=fr.length;Cn<qn;Cn++)Je.push(fr[Cn])}if(null!==jt||null!==Ti){var hi;hi=null===jt?Ti:null===Ti||$e.comparePoints(jt,Ti)<=0?jt:Ti,this.queue.remove(ke.rightSE),Je.push(ke.rightSE);for(var Mr=ke.split(hi),wi=0,nr=Mr.length;wi<nr;wi++)Je.push(Mr[wi])}Je.length>0?(this.tree.remove(ke),Je.push(Le)):(this.segments.push(ke),ke.prev=un)}else{if(un&&mt){var dn=un.getIntersection(mt);if(null!==dn){if(!un.isAnEndpoint(dn))for(var wa=this._splitSafely(un,dn),Lr=0,fi=wa.length;Lr<fi;Lr++)Je.push(wa[Lr]);if(!mt.isAnEndpoint(dn))for(var ar=this._splitSafely(mt,dn),Zs=0,Os=ar.length;Zs<Os;Zs++)Je.push(ar[Zs])}}this.tree.remove(ke)}return Je}},{key:"_splitSafely",value:function(Le,ke){this.tree.remove(Le);var Je=Le.rightSE;this.queue.remove(Je);var Tt=Le.split(ke);return Tt.push(Je),void 0===Le.consumedBy&&this.tree.insert(Le),Tt}}]),It}(),Sn=typeof process<"u"&&{NODE_ENV:"production",NX_CLI_SET:"true",NX_LOAD_DOT_ENV_FILES:"true",NX_INVOKED_BY_RUNNER:"true",NX_WORKSPACE_ROOT:"/root/laamap",NX_TERMINAL_OUTPUT_PATH:"/root/laamap/node_modules/.cache/nx/terminalOutputs/27cfb34ba81a233f54e3d7239ce6fc818f600d2533c251d35155bb42c612f517",NX_STREAM_OUTPUT:"true",NX_TASK_TARGET_PROJECT:"mapview",NX_TASK_HASH:"27cfb34ba81a233f54e3d7239ce6fc818f600d2533c251d35155bb42c612f517"}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,si=typeof process<"u"&&{NODE_ENV:"production",NX_CLI_SET:"true",NX_LOAD_DOT_ENV_FILES:"true",NX_INVOKED_BY_RUNNER:"true",NX_WORKSPACE_ROOT:"/root/laamap",NX_TERMINAL_OUTPUT_PATH:"/root/laamap/node_modules/.cache/nx/terminalOutputs/27cfb34ba81a233f54e3d7239ce6fc818f600d2533c251d35155bb42c612f517",NX_STREAM_OUTPUT:"true",NX_TASK_TARGET_PROJECT:"mapview",NX_TASK_HASH:"27cfb34ba81a233f54e3d7239ce6fc818f600d2533c251d35155bb42c612f517"}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,hn=new(function(){function It(){Pe(this,It)}return o(It,[{key:"run",value:function(Le,ke,Je){hn.type=Le,Fe.reset();for(var Tt=[new Vt(ke,!0)],Yt=0,ln=Je.length;Yt<ln;Yt++)Tt.push(new Vt(Je[Yt],!1));if(hn.numMultiPolys=Tt.length,"difference"===hn.type)for(var un=Tt[0],mt=1;mt<Tt.length;)null!==oe(Tt[mt].bbox,un.bbox)?mt++:Tt.splice(mt,1);if("intersection"===hn.type)for(var jt=0,In=Tt.length;jt<In;jt++)for(var sn=Tt[jt],Fn=jt+1,hr=Tt.length;Fn<hr;Fn++)if(null===oe(sn.bbox,Tt[Fn].bbox))return[];for(var Ti=new xe($e.compare),Bi=0,fr=Tt.length;Bi<fr;Bi++)for(var Cn=Tt[Bi].getSweepEvents(),qn=0,hi=Cn.length;qn<hi;qn++)if(Ti.insert(Cn[qn]),Ti.size>Sn)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var Di=new Bn(Ti),Mr=Ti.size,wi=Ti.pop();wi;){var nr=wi.key;if(Ti.size===Mr){var dn=nr.segment;throw new Error("Unable to pop() ".concat(nr.isLeft?"left":"right"," SweepEvent ")+"[".concat(nr.point.x,", ").concat(nr.point.y,"] from segment #").concat(dn.id," ")+"[".concat(dn.leftSE.point.x,", ").concat(dn.leftSE.point.y,"] -> ")+"[".concat(dn.rightSE.point.x,", ").concat(dn.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(Ti.size>Sn)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(Di.segments.length>si)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var wa=Di.process(nr),Lr=0,fi=wa.length;Lr<fi;Lr++){var ar=wa[Lr];void 0===ar.consumedBy&&Ti.insert(ar)}Mr=Ti.size,wi=Ti.pop()}Fe.reset();var Zs=rn.factory(Di.segments);return new Vn(Zs).getGeom()}}]),It}());return{union:function(je){for(var Le=arguments.length,ke=new Array(Le>1?Le-1:0),Je=1;Je<Le;Je++)ke[Je-1]=arguments[Je];return hn.run("union",je,ke)},intersection:function(je){for(var Le=arguments.length,ke=new Array(Le>1?Le-1:0),Je=1;Je<Le;Je++)ke[Je-1]=arguments[Je];return hn.run("intersection",je,ke)},xor:function(je){for(var Le=arguments.length,ke=new Array(Le>1?Le-1:0),Je=1;Je<Le;Je++)ke[Je-1]=arguments[Je];return hn.run("xor",je,ke)},difference:function(je){for(var Le=arguments.length,ke=new Array(Le>1?Le-1:0),Je=1;Je<Le;Je++)ke[Je-1]=arguments[Je];return hn.run("difference",je,ke)}}}()},3544:(lt,Pe,W)=>{"use strict";lt.exports=me,lt.exports.default=me;var o=W(6709);function me(oe,ye){if(!(this instanceof me))return new me(oe,ye);this._maxEntries=Math.max(4,oe||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),ye&&this._initFormat(ye),this.clear()}function Ae(oe,ye,ce){if(!ce)return ye.indexOf(oe);for(var Re=0;Re<ye.length;Re++)if(ce(oe,ye[Re]))return Re;return-1}function E(oe,ye){Se(oe,0,oe.children.length,ye,oe)}function Se(oe,ye,ce,Re,ve){ve||(ve=ue(null)),ve.minX=1/0,ve.minY=1/0,ve.maxX=-1/0,ve.maxY=-1/0;for(var Fe,we=ye;we<ce;we++)Fe=oe.children[we],he(ve,oe.leaf?Re(Fe):Fe);return ve}function he(oe,ye){return oe.minX=Math.min(oe.minX,ye.minX),oe.minY=Math.min(oe.minY,ye.minY),oe.maxX=Math.max(oe.maxX,ye.maxX),oe.maxY=Math.max(oe.maxY,ye.maxY),oe}function Oe(oe,ye){return oe.minX-ye.minX}function Ne(oe,ye){return oe.minY-ye.minY}function xe(oe){return(oe.maxX-oe.minX)*(oe.maxY-oe.minY)}function ct(oe){return oe.maxX-oe.minX+(oe.maxY-oe.minY)}function Ke(oe,ye){return(Math.max(ye.maxX,oe.maxX)-Math.min(ye.minX,oe.minX))*(Math.max(ye.maxY,oe.maxY)-Math.min(ye.minY,oe.minY))}function Te(oe,ye){var ce=Math.max(oe.minX,ye.minX),Re=Math.max(oe.minY,ye.minY),ve=Math.min(oe.maxX,ye.maxX),we=Math.min(oe.maxY,ye.maxY);return Math.max(0,ve-ce)*Math.max(0,we-Re)}function at(oe,ye){return oe.minX<=ye.minX&&oe.minY<=ye.minY&&ye.maxX<=oe.maxX&&ye.maxY<=oe.maxY}function Ct(oe,ye){return ye.minX<=oe.maxX&&ye.minY<=oe.maxY&&ye.maxX>=oe.minX&&ye.maxY>=oe.minY}function ue(oe){return{children:oe,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function De(oe,ye,ce,Re,ve){for(var Fe,we=[ye,ce];we.length;)!((ce=we.pop())-(ye=we.pop())<=Re)&&(Fe=ye+Math.ceil((ce-ye)/Re/2)*Re,o(oe,Fe,ye,ce,ve),we.push(ye,Fe,Fe,ce))}me.prototype={all:function(){return this._all(this.data,[])},search:function(oe){var ye=this.data,ce=[],Re=this.toBBox;if(!Ct(oe,ye))return ce;for(var we,Fe,se,_t,ve=[];ye;){for(we=0,Fe=ye.children.length;we<Fe;we++)se=ye.children[we],Ct(oe,_t=ye.leaf?Re(se):se)&&(ye.leaf?ce.push(se):at(oe,_t)?this._all(se,ce):ve.push(se));ye=ve.pop()}return ce},collides:function(oe){var ye=this.data,ce=this.toBBox;if(!Ct(oe,ye))return!1;for(var ve,we,Fe,se,Re=[];ye;){for(ve=0,we=ye.children.length;ve<we;ve++)if(Fe=ye.children[ve],Ct(oe,se=ye.leaf?ce(Fe):Fe)){if(ye.leaf||at(oe,se))return!0;Re.push(Fe)}ye=Re.pop()}return!1},load:function(oe){if(!oe||!oe.length)return this;if(oe.length<this._minEntries){for(var ye=0,ce=oe.length;ye<ce;ye++)this.insert(oe[ye]);return this}var Re=this._build(oe.slice(),0,oe.length-1,0);if(this.data.children.length)if(this.data.height===Re.height)this._splitRoot(this.data,Re);else{if(this.data.height<Re.height){var ve=this.data;this.data=Re,Re=ve}this._insert(Re,this.data.height-Re.height-1,!0)}else this.data=Re;return this},insert:function(oe){return oe&&this._insert(oe,this.data.height-1),this},clear:function(){return this.data=ue([]),this},remove:function(oe,ye){if(!oe)return this;for(var Fe,se,_t,Xe,ce=this.data,Re=this.toBBox(oe),ve=[],we=[];ce||ve.length;){if(ce||(ce=ve.pop(),se=ve[ve.length-1],Fe=we.pop(),Xe=!0),ce.leaf&&-1!==(_t=Ae(oe,ce.children,ye)))return ce.children.splice(_t,1),ve.push(ce),this._condense(ve),this;Xe||ce.leaf||!at(ce,Re)?se?(Fe++,ce=se.children[Fe],Xe=!1):ce=null:(ve.push(ce),we.push(Fe),Fe=0,se=ce,ce=ce.children[0])}return this},toBBox:function(oe){return oe},compareMinX:Oe,compareMinY:Ne,toJSON:function(){return this.data},fromJSON:function(oe){return this.data=oe,this},_all:function(oe,ye){for(var ce=[];oe;)oe.leaf?ye.push.apply(ye,oe.children):ce.push.apply(ce,oe.children),oe=ce.pop();return ye},_build:function(oe,ye,ce,Re){var Fe,ve=ce-ye+1,we=this._maxEntries;if(ve<=we)return E(Fe=ue(oe.slice(ye,ce+1)),this.toBBox),Fe;Re||(Re=Math.ceil(Math.log(ve)/Math.log(we)),we=Math.ceil(ve/Math.pow(we,Re-1))),(Fe=ue([])).leaf=!1,Fe.height=Re;var Xe,st,de,Qe,se=Math.ceil(ve/we),_t=se*Math.ceil(Math.sqrt(we));for(De(oe,ye,ce,_t,this.compareMinX),Xe=ye;Xe<=ce;Xe+=_t)for(De(oe,Xe,de=Math.min(Xe+_t-1,ce),se,this.compareMinY),st=Xe;st<=de;st+=se)Qe=Math.min(st+se-1,de),Fe.children.push(this._build(oe,st,Qe,Re-1));return E(Fe,this.toBBox),Fe},_chooseSubtree:function(oe,ye,ce,Re){for(var ve,we,Fe,se,_t,Xe,st,de;Re.push(ye),!ye.leaf&&Re.length-1!==ce;){for(st=de=1/0,ve=0,we=ye.children.length;ve<we;ve++)_t=xe(Fe=ye.children[ve]),(Xe=Ke(oe,Fe)-_t)<de?(de=Xe,st=_t<st?_t:st,se=Fe):Xe===de&&_t<st&&(st=_t,se=Fe);ye=se||ye.children[0]}return ye},_insert:function(oe,ye,ce){var ve=ce?oe:(0,this.toBBox)(oe),we=[],Fe=this._chooseSubtree(ve,this.data,ye,we);for(Fe.children.push(oe),he(Fe,ve);ye>=0&&we[ye].children.length>this._maxEntries;)this._split(we,ye),ye--;this._adjustParentBBoxes(ve,we,ye)},_split:function(oe,ye){var ce=oe[ye],Re=ce.children.length,ve=this._minEntries;this._chooseSplitAxis(ce,ve,Re);var we=this._chooseSplitIndex(ce,ve,Re),Fe=ue(ce.children.splice(we,ce.children.length-we));Fe.height=ce.height,Fe.leaf=ce.leaf,E(ce,this.toBBox),E(Fe,this.toBBox),ye?oe[ye-1].children.push(Fe):this._splitRoot(ce,Fe)},_splitRoot:function(oe,ye){this.data=ue([oe,ye]),this.data.height=oe.height+1,this.data.leaf=!1,E(this.data,this.toBBox)},_chooseSplitIndex:function(oe,ye,ce){var Re,ve,we,Fe,se,_t,Xe,st;for(_t=Xe=1/0,Re=ye;Re<=ce-ye;Re++)Fe=Te(ve=Se(oe,0,Re,this.toBBox),we=Se(oe,Re,ce,this.toBBox)),se=xe(ve)+xe(we),Fe<_t?(_t=Fe,st=Re,Xe=se<Xe?se:Xe):Fe===_t&&se<Xe&&(Xe=se,st=Re);return st},_chooseSplitAxis:function(oe,ye,ce){var Re=oe.leaf?this.compareMinX:Oe,ve=oe.leaf?this.compareMinY:Ne;this._allDistMargin(oe,ye,ce,Re)<this._allDistMargin(oe,ye,ce,ve)&&oe.children.sort(Re)},_allDistMargin:function(oe,ye,ce,Re){oe.children.sort(Re);var _t,Xe,ve=this.toBBox,we=Se(oe,0,ye,ve),Fe=Se(oe,ce-ye,ce,ve),se=ct(we)+ct(Fe);for(_t=ye;_t<ce-ye;_t++)Xe=oe.children[_t],he(we,oe.leaf?ve(Xe):Xe),se+=ct(we);for(_t=ce-ye-1;_t>=ye;_t--)Xe=oe.children[_t],he(Fe,oe.leaf?ve(Xe):Xe),se+=ct(Fe);return se},_adjustParentBBoxes:function(oe,ye,ce){for(var Re=ce;Re>=0;Re--)he(ye[Re],oe)},_condense:function(oe){for(var ce,ye=oe.length-1;ye>=0;ye--)0===oe[ye].children.length?ye>0?(ce=oe[ye-1].children).splice(ce.indexOf(oe[ye]),1):this.clear():E(oe[ye],this.toBBox)},_initFormat:function(oe){var ye=["return a"," - b",";"];this.compareMinX=new Function("a","b",ye.join(oe[0])),this.compareMinY=new Function("a","b",ye.join(oe[1])),this.toBBox=new Function("a","return {minX: a"+oe[0]+", minY: a"+oe[1]+", maxX: a"+oe[2]+", maxY: a"+oe[3]+"};")}}},6709:function(lt){lt.exports=function(){"use strict";function W(Ae,E,Se,he,Oe){for(;he>Se;){if(he-Se>600){var Ne=he-Se+1,xe=E-Se+1,ct=Math.log(Ne),Ke=.5*Math.exp(2*ct/3),Te=.5*Math.sqrt(ct*Ke*(Ne-Ke)/Ne)*(xe-Ne/2<0?-1:1);W(Ae,E,Math.max(Se,Math.floor(E-xe*Ke/Ne+Te)),Math.min(he,Math.floor(E+(Ne-xe)*Ke/Ne+Te)),Oe)}var ue=Ae[E],De=Se,oe=he;for(o(Ae,Se,E),Oe(Ae[he],ue)>0&&o(Ae,Se,he);De<oe;){for(o(Ae,De,oe),De++,oe--;Oe(Ae[De],ue)<0;)De++;for(;Oe(Ae[oe],ue)>0;)oe--}0===Oe(Ae[Se],ue)?o(Ae,Se,oe):o(Ae,++oe,he),oe<=E&&(Se=oe+1),E<=oe&&(he=oe-1)}}function o(Ae,E,Se){var he=Ae[E];Ae[E]=Ae[Se],Ae[Se]=he}function me(Ae,E){return Ae<E?-1:Ae>E?1:0}return function Pe(Ae,E,Se,he,Oe){W(Ae,E,Se||0,he||Ae.length-1,Oe||me)}}()},4468:(lt,Pe,W)=>{"use strict";var o=W(9582).functionsHaveConfigurableNames(),me=Object,Ae=TypeError;lt.exports=function(){if(null!=this&&this!==me(this))throw new Ae("RegExp.prototype.flags getter called on non-object");var Se="";return this.hasIndices&&(Se+="d"),this.global&&(Se+="g"),this.ignoreCase&&(Se+="i"),this.multiline&&(Se+="m"),this.dotAll&&(Se+="s"),this.unicode&&(Se+="u"),this.sticky&&(Se+="y"),Se},o&&Object.defineProperty&&Object.defineProperty(lt.exports,"name",{value:"get flags"})},9235:(lt,Pe,W)=>{"use strict";var o=W(2358),me=W(5685),Ae=W(4468),E=W(6343),Se=W(1956),he=me(E());o(he,{getPolyfill:E,implementation:Ae,shim:Se}),lt.exports=he},6343:(lt,Pe,W)=>{"use strict";var o=W(4468),me=W(2358).supportsDescriptors,Ae=Object.getOwnPropertyDescriptor;lt.exports=function(){if(me&&"gim"===/a/gim.flags){var Se=Ae(RegExp.prototype,"flags");if(Se&&"function"==typeof Se.get&&"boolean"==typeof RegExp.prototype.dotAll&&"boolean"==typeof RegExp.prototype.hasIndices){var he="",Oe={};if(Object.defineProperty(Oe,"hasIndices",{get:function(){he+="d"}}),Object.defineProperty(Oe,"sticky",{get:function(){he+="y"}}),"dy"===he)return Se.get}}return o}},1956:(lt,Pe,W)=>{"use strict";var o=W(2358).supportsDescriptors,me=W(6343),Ae=Object.getOwnPropertyDescriptor,E=Object.defineProperty,Se=TypeError,he=Object.getPrototypeOf,Oe=/a/;lt.exports=function(){if(!o||!he)throw new Se("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var xe=me(),ct=he(Oe),Ke=Ae(ct,"flags");return(!Ke||Ke.get!==xe)&&E(ct,"flags",{configurable:!0,enumerable:!1,get:xe}),xe}},7563:function(lt,Pe){!function(W){"use strict";function Ae(at,Ct,ue,De,oe){let ye,ce,Re,ve,we=Ct[0],Fe=De[0],se=0,_t=0;Fe>we==Fe>-we?(ye=we,we=Ct[++se]):(ye=Fe,Fe=De[++_t]);let Xe=0;if(se<at&&_t<ue)for(Fe>we==Fe>-we?(Re=ye-((ce=we+ye)-we),we=Ct[++se]):(Re=ye-((ce=Fe+ye)-Fe),Fe=De[++_t]),ye=ce,0!==Re&&(oe[Xe++]=Re);se<at&&_t<ue;)Fe>we==Fe>-we?(Re=ye-((ce=ye+we)-(ve=ce-ye))+(we-ve),we=Ct[++se]):(Re=ye-((ce=ye+Fe)-(ve=ce-ye))+(Fe-ve),Fe=De[++_t]),ye=ce,0!==Re&&(oe[Xe++]=Re);for(;se<at;)Re=ye-((ce=ye+we)-(ve=ce-ye))+(we-ve),we=Ct[++se],ye=ce,0!==Re&&(oe[Xe++]=Re);for(;_t<ue;)Re=ye-((ce=ye+Fe)-(ve=ce-ye))+(Fe-ve),Fe=De[++_t],ye=ce,0!==Re&&(oe[Xe++]=Re);return 0===ye&&0!==Xe||(oe[Xe++]=ye),Xe}function E(at){return new Float64Array(at)}const Ne=E(4),xe=E(8),ct=E(12),Ke=E(16),Te=E(4);W.orient2d=function(at,Ct,ue,De,oe,ye){const ce=(Ct-ye)*(ue-oe),Re=(at-oe)*(De-ye),ve=ce-Re;if(0===ce||0===Re||ce>0!=Re>0)return ve;const we=Math.abs(ce+Re);return Math.abs(ve)>=33306690738754716e-32*we?ve:-function(Fe,se,_t,Xe,st,de,Qe){let dt,Me,ut,$e,gt,Mt,tt,Bt,Vt,rn,Gt,Vn,Bn,Sn,si,$n,hn,jr;const sr=Fe-st,Fr=_t-st,yi=se-de,Ri=Xe-de;gt=(si=(Bt=sr-(tt=(Mt=134217729*sr)-(Mt-sr)))*(rn=Ri-(Vt=(Mt=134217729*Ri)-(Mt-Ri)))-((Sn=sr*Ri)-tt*Vt-Bt*Vt-tt*rn))-(Gt=si-(hn=(Bt=yi-(tt=(Mt=134217729*yi)-(Mt-yi)))*(rn=Fr-(Vt=(Mt=134217729*Fr)-(Mt-Fr)))-(($n=yi*Fr)-tt*Vt-Bt*Vt-tt*rn))),Ne[0]=si-(Gt+gt)+(gt-hn),gt=(Bn=Sn-((Vn=Sn+Gt)-(gt=Vn-Sn))+(Gt-gt))-(Gt=Bn-$n),Ne[1]=Bn-(Gt+gt)+(gt-$n),gt=(jr=Vn+Gt)-Vn,Ne[2]=Vn-(jr-gt)+(Gt-gt),Ne[3]=jr;let It=function(Tt,Yt){let ln=Yt[0];for(let un=1;un<4;un++)ln+=Yt[un];return ln}(0,Ne),je=22204460492503146e-32*Qe;if(It>=je||-It>=je||(dt=Fe-(sr+(gt=Fe-sr))+(gt-st),ut=_t-(Fr+(gt=_t-Fr))+(gt-st),Me=se-(yi+(gt=se-yi))+(gt-de),$e=Xe-(Ri+(gt=Xe-Ri))+(gt-de),0===dt&&0===Me&&0===ut&&0===$e)||(je=11093356479670487e-47*Qe+33306690738754706e-32*Math.abs(It),(It+=sr*$e+Ri*dt-(yi*ut+Fr*Me))>=je||-It>=je))return It;gt=(si=(Bt=dt-(tt=(Mt=134217729*dt)-(Mt-dt)))*(rn=Ri-(Vt=(Mt=134217729*Ri)-(Mt-Ri)))-((Sn=dt*Ri)-tt*Vt-Bt*Vt-tt*rn))-(Gt=si-(hn=(Bt=Me-(tt=(Mt=134217729*Me)-(Mt-Me)))*(rn=Fr-(Vt=(Mt=134217729*Fr)-(Mt-Fr)))-(($n=Me*Fr)-tt*Vt-Bt*Vt-tt*rn))),Te[0]=si-(Gt+gt)+(gt-hn),gt=(Bn=Sn-((Vn=Sn+Gt)-(gt=Vn-Sn))+(Gt-gt))-(Gt=Bn-$n),Te[1]=Bn-(Gt+gt)+(gt-$n),gt=(jr=Vn+Gt)-Vn,Te[2]=Vn-(jr-gt)+(Gt-gt),Te[3]=jr;const Le=Ae(4,Ne,4,Te,xe);gt=(si=(Bt=sr-(tt=(Mt=134217729*sr)-(Mt-sr)))*(rn=$e-(Vt=(Mt=134217729*$e)-(Mt-$e)))-((Sn=sr*$e)-tt*Vt-Bt*Vt-tt*rn))-(Gt=si-(hn=(Bt=yi-(tt=(Mt=134217729*yi)-(Mt-yi)))*(rn=ut-(Vt=(Mt=134217729*ut)-(Mt-ut)))-(($n=yi*ut)-tt*Vt-Bt*Vt-tt*rn))),Te[0]=si-(Gt+gt)+(gt-hn),gt=(Bn=Sn-((Vn=Sn+Gt)-(gt=Vn-Sn))+(Gt-gt))-(Gt=Bn-$n),Te[1]=Bn-(Gt+gt)+(gt-$n),gt=(jr=Vn+Gt)-Vn,Te[2]=Vn-(jr-gt)+(Gt-gt),Te[3]=jr;const ke=Ae(Le,xe,4,Te,ct);gt=(si=(Bt=dt-(tt=(Mt=134217729*dt)-(Mt-dt)))*(rn=$e-(Vt=(Mt=134217729*$e)-(Mt-$e)))-((Sn=dt*$e)-tt*Vt-Bt*Vt-tt*rn))-(Gt=si-(hn=(Bt=Me-(tt=(Mt=134217729*Me)-(Mt-Me)))*(rn=ut-(Vt=(Mt=134217729*ut)-(Mt-ut)))-(($n=Me*ut)-tt*Vt-Bt*Vt-tt*rn))),Te[0]=si-(Gt+gt)+(gt-hn),gt=(Bn=Sn-((Vn=Sn+Gt)-(gt=Vn-Sn))+(Gt-gt))-(Gt=Bn-$n),Te[1]=Bn-(Gt+gt)+(gt-$n),gt=(jr=Vn+Gt)-Vn,Te[2]=Vn-(jr-gt)+(Gt-gt),Te[3]=jr;const Je=Ae(ke,ct,4,Te,Ke);return Ke[Je-1]}(at,Ct,ue,De,oe,ye,we)},W.orient2dfast=function(at,Ct,ue,De,oe,ye){return(Ct-ye)*(ue-oe)-(at-oe)*(De-ye)},Object.defineProperty(W,"__esModule",{value:!0})}(Pe)},1135:(lt,Pe,W)=>{"use strict";W.d(Pe,{X:()=>me});var o=W(7579);class me extends o.x{constructor(E){super(),this._value=E}get value(){return this.getValue()}_subscribe(E){const Se=super._subscribe(E);return!Se.closed&&E.next(this._value),Se}getValue(){const{hasError:E,thrownError:Se,_value:he}=this;if(E)throw Se;return this._throwIfClosed(),he}next(E){super.next(this._value=E)}}},9751:(lt,Pe,W)=>{"use strict";W.d(Pe,{y:()=>Ne});var o=W(930),me=W(727),Ae=W(8822),E=W(9635),Se=W(2416),he=W(576),Oe=W(2806);let Ne=(()=>{class Te{constructor(Ct){Ct&&(this._subscribe=Ct)}lift(Ct){const ue=new Te;return ue.source=this,ue.operator=Ct,ue}subscribe(Ct,ue,De){const oe=function Ke(Te){return Te&&Te instanceof o.Lv||function ct(Te){return Te&&(0,he.m)(Te.next)&&(0,he.m)(Te.error)&&(0,he.m)(Te.complete)}(Te)&&(0,me.Nn)(Te)}(Ct)?Ct:new o.Hp(Ct,ue,De);return(0,Oe.x)(()=>{const{operator:ye,source:ce}=this;oe.add(ye?ye.call(oe,ce):ce?this._subscribe(oe):this._trySubscribe(oe))}),oe}_trySubscribe(Ct){try{return this._subscribe(Ct)}catch(ue){Ct.error(ue)}}forEach(Ct,ue){return new(ue=xe(ue))((De,oe)=>{const ye=new o.Hp({next:ce=>{try{Ct(ce)}catch(Re){oe(Re),ye.unsubscribe()}},error:oe,complete:De});this.subscribe(ye)})}_subscribe(Ct){var ue;return null===(ue=this.source)||void 0===ue?void 0:ue.subscribe(Ct)}[Ae.L](){return this}pipe(...Ct){return(0,E.U)(Ct)(this)}toPromise(Ct){return new(Ct=xe(Ct))((ue,De)=>{let oe;this.subscribe(ye=>oe=ye,ye=>De(ye),()=>ue(oe))})}}return Te.create=at=>new Te(at),Te})();function xe(Te){var at;return null!==(at=Te??Se.v.Promise)&&void 0!==at?at:Promise}},4707:(lt,Pe,W)=>{"use strict";W.d(Pe,{t:()=>Ae});var o=W(7579),me=W(6063);class Ae extends o.x{constructor(Se=1/0,he=1/0,Oe=me.l){super(),this._bufferSize=Se,this._windowTime=he,this._timestampProvider=Oe,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=he===1/0,this._bufferSize=Math.max(1,Se),this._windowTime=Math.max(1,he)}next(Se){const{isStopped:he,_buffer:Oe,_infiniteTimeWindow:Ne,_timestampProvider:xe,_windowTime:ct}=this;he||(Oe.push(Se),!Ne&&Oe.push(xe.now()+ct)),this._trimBuffer(),super.next(Se)}_subscribe(Se){this._throwIfClosed(),this._trimBuffer();const he=this._innerSubscribe(Se),{_infiniteTimeWindow:Oe,_buffer:Ne}=this,xe=Ne.slice();for(let ct=0;ct<xe.length&&!Se.closed;ct+=Oe?1:2)Se.next(xe[ct]);return this._checkFinalizedStatuses(Se),he}_trimBuffer(){const{_bufferSize:Se,_timestampProvider:he,_buffer:Oe,_infiniteTimeWindow:Ne}=this,xe=(Ne?1:2)*Se;if(Se<1/0&&xe<Oe.length&&Oe.splice(0,Oe.length-xe),!Ne){const ct=he.now();let Ke=0;for(let Te=1;Te<Oe.length&&Oe[Te]<=ct;Te+=2)Ke=Te;Ke&&Oe.splice(0,Ke+1)}}}},7579:(lt,Pe,W)=>{"use strict";W.d(Pe,{x:()=>Oe});var o=W(9751),me=W(727);const E=(0,W(3888).d)(xe=>function(){xe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Se=W(8737),he=W(2806);let Oe=(()=>{class xe extends o.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Ke){const Te=new Ne(this,this);return Te.operator=Ke,Te}_throwIfClosed(){if(this.closed)throw new E}next(Ke){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Te of this.currentObservers)Te.next(Ke)}})}error(Ke){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Ke;const{observers:Te}=this;for(;Te.length;)Te.shift().error(Ke)}})}complete(){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Ke}=this;for(;Ke.length;)Ke.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Ke;return(null===(Ke=this.observers)||void 0===Ke?void 0:Ke.length)>0}_trySubscribe(Ke){return this._throwIfClosed(),super._trySubscribe(Ke)}_subscribe(Ke){return this._throwIfClosed(),this._checkFinalizedStatuses(Ke),this._innerSubscribe(Ke)}_innerSubscribe(Ke){const{hasError:Te,isStopped:at,observers:Ct}=this;return Te||at?me.Lc:(this.currentObservers=null,Ct.push(Ke),new me.w0(()=>{this.currentObservers=null,(0,Se.P)(Ct,Ke)}))}_checkFinalizedStatuses(Ke){const{hasError:Te,thrownError:at,isStopped:Ct}=this;Te?Ke.error(at):Ct&&Ke.complete()}asObservable(){const Ke=new o.y;return Ke.source=this,Ke}}return xe.create=(ct,Ke)=>new Ne(ct,Ke),xe})();class Ne extends Oe{constructor(ct,Ke){super(),this.destination=ct,this.source=Ke}next(ct){var Ke,Te;null===(Te=null===(Ke=this.destination)||void 0===Ke?void 0:Ke.next)||void 0===Te||Te.call(Ke,ct)}error(ct){var Ke,Te;null===(Te=null===(Ke=this.destination)||void 0===Ke?void 0:Ke.error)||void 0===Te||Te.call(Ke,ct)}complete(){var ct,Ke;null===(Ke=null===(ct=this.destination)||void 0===ct?void 0:ct.complete)||void 0===Ke||Ke.call(ct)}_subscribe(ct){var Ke,Te;return null!==(Te=null===(Ke=this.source)||void 0===Ke?void 0:Ke.subscribe(ct))&&void 0!==Te?Te:me.Lc}}},930:(lt,Pe,W)=>{"use strict";W.d(Pe,{Hp:()=>De,Lv:()=>Te});var o=W(576),me=W(727),Ae=W(2416),E=W(7849),Se=W(5032);const he=xe("C",void 0,void 0);function xe(ve,we,Fe){return{kind:ve,value:we,error:Fe}}var ct=W(3410),Ke=W(2806);class Te extends me.w0{constructor(we){super(),this.isStopped=!1,we?(this.destination=we,(0,me.Nn)(we)&&we.add(this)):this.destination=Re}static create(we,Fe,se){return new De(we,Fe,se)}next(we){this.isStopped?ce(function Ne(ve){return xe("N",ve,void 0)}(we),this):this._next(we)}error(we){this.isStopped?ce(function Oe(ve){return xe("E",void 0,ve)}(we),this):(this.isStopped=!0,this._error(we))}complete(){this.isStopped?ce(he,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(we){this.destination.next(we)}_error(we){try{this.destination.error(we)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const at=Function.prototype.bind;function Ct(ve,we){return at.call(ve,we)}class ue{constructor(we){this.partialObserver=we}next(we){const{partialObserver:Fe}=this;if(Fe.next)try{Fe.next(we)}catch(se){oe(se)}}error(we){const{partialObserver:Fe}=this;if(Fe.error)try{Fe.error(we)}catch(se){oe(se)}else oe(we)}complete(){const{partialObserver:we}=this;if(we.complete)try{we.complete()}catch(Fe){oe(Fe)}}}class De extends Te{constructor(we,Fe,se){let _t;if(super(),(0,o.m)(we)||!we)_t={next:we??void 0,error:Fe??void 0,complete:se??void 0};else{let Xe;this&&Ae.v.useDeprecatedNextContext?(Xe=Object.create(we),Xe.unsubscribe=()=>this.unsubscribe(),_t={next:we.next&&Ct(we.next,Xe),error:we.error&&Ct(we.error,Xe),complete:we.complete&&Ct(we.complete,Xe)}):_t=we}this.destination=new ue(_t)}}function oe(ve){Ae.v.useDeprecatedSynchronousErrorHandling?(0,Ke.O)(ve):(0,E.h)(ve)}function ce(ve,we){const{onStoppedNotification:Fe}=Ae.v;Fe&&ct.z.setTimeout(()=>Fe(ve,we))}const Re={closed:!0,next:Se.Z,error:function ye(ve){throw ve},complete:Se.Z}},727:(lt,Pe,W)=>{"use strict";W.d(Pe,{Lc:()=>he,w0:()=>Se,Nn:()=>Oe});var o=W(576);const Ae=(0,W(3888).d)(xe=>function(Ke){xe(this),this.message=Ke?`${Ke.length} errors occurred during unsubscription:\n${Ke.map((Te,at)=>`${at+1}) ${Te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Ke});var E=W(8737);class Se{constructor(ct){this.initialTeardown=ct,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ct;if(!this.closed){this.closed=!0;const{_parentage:Ke}=this;if(Ke)if(this._parentage=null,Array.isArray(Ke))for(const Ct of Ke)Ct.remove(this);else Ke.remove(this);const{initialTeardown:Te}=this;if((0,o.m)(Te))try{Te()}catch(Ct){ct=Ct instanceof Ae?Ct.errors:[Ct]}const{_finalizers:at}=this;if(at){this._finalizers=null;for(const Ct of at)try{Ne(Ct)}catch(ue){ct=ct??[],ue instanceof Ae?ct=[...ct,...ue.errors]:ct.push(ue)}}if(ct)throw new Ae(ct)}}add(ct){var Ke;if(ct&&ct!==this)if(this.closed)Ne(ct);else{if(ct instanceof Se){if(ct.closed||ct._hasParent(this))return;ct._addParent(this)}(this._finalizers=null!==(Ke=this._finalizers)&&void 0!==Ke?Ke:[]).push(ct)}}_hasParent(ct){const{_parentage:Ke}=this;return Ke===ct||Array.isArray(Ke)&&Ke.includes(ct)}_addParent(ct){const{_parentage:Ke}=this;this._parentage=Array.isArray(Ke)?(Ke.push(ct),Ke):Ke?[Ke,ct]:ct}_removeParent(ct){const{_parentage:Ke}=this;Ke===ct?this._parentage=null:Array.isArray(Ke)&&(0,E.P)(Ke,ct)}remove(ct){const{_finalizers:Ke}=this;Ke&&(0,E.P)(Ke,ct),ct instanceof Se&&ct._removeParent(this)}}Se.EMPTY=(()=>{const xe=new Se;return xe.closed=!0,xe})();const he=Se.EMPTY;function Oe(xe){return xe instanceof Se||xe&&"closed"in xe&&(0,o.m)(xe.remove)&&(0,o.m)(xe.add)&&(0,o.m)(xe.unsubscribe)}function Ne(xe){(0,o.m)(xe)?xe():xe.unsubscribe()}},2416:(lt,Pe,W)=>{"use strict";W.d(Pe,{v:()=>o});const o={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(lt,Pe,W)=>{"use strict";W.d(Pe,{E:()=>me});const me=new(W(9751).y)(Se=>Se.complete())},457:(lt,Pe,W)=>{"use strict";W.d(Pe,{D:()=>Fe});var o=W(8421),me=W(5363),Ae=W(4482);function E(se,_t=0){return(0,Ae.e)((Xe,st)=>{st.add(se.schedule(()=>Xe.subscribe(st),_t))})}var Oe=W(9751),xe=W(2202),ct=W(576),Ke=W(9672);function at(se,_t){if(!se)throw new Error("Iterable cannot be null");return new Oe.y(Xe=>{(0,Ke.f)(Xe,_t,()=>{const st=se[Symbol.asyncIterator]();(0,Ke.f)(Xe,_t,()=>{st.next().then(de=>{de.done?Xe.complete():Xe.next(de.value)})},0,!0)})})}var Ct=W(3670),ue=W(8239),De=W(1144),oe=W(6495),ye=W(2206),ce=W(4532),Re=W(3260);function Fe(se,_t){return _t?function we(se,_t){if(null!=se){if((0,Ct.c)(se))return function Se(se,_t){return(0,o.Xf)(se).pipe(E(_t),(0,me.Q)(_t))}(se,_t);if((0,De.z)(se))return function Ne(se,_t){return new Oe.y(Xe=>{let st=0;return _t.schedule(function(){st===se.length?Xe.complete():(Xe.next(se[st++]),Xe.closed||this.schedule())})})}(se,_t);if((0,ue.t)(se))return function he(se,_t){return(0,o.Xf)(se).pipe(E(_t),(0,me.Q)(_t))}(se,_t);if((0,ye.D)(se))return at(se,_t);if((0,oe.T)(se))return function Te(se,_t){return new Oe.y(Xe=>{let st;return(0,Ke.f)(Xe,_t,()=>{st=se[xe.h](),(0,Ke.f)(Xe,_t,()=>{let de,Qe;try{({value:de,done:Qe}=st.next())}catch(dt){return void Xe.error(dt)}Qe?Xe.complete():Xe.next(de)},0,!0)}),()=>(0,ct.m)(st?.return)&&st.return()})}(se,_t);if((0,Re.L)(se))return function ve(se,_t){return at((0,Re.Q)(se),_t)}(se,_t)}throw(0,ce.z)(se)}(se,_t):(0,o.Xf)(se)}},8421:(lt,Pe,W)=>{"use strict";W.d(Pe,{Xf:()=>at});var o=W(655),me=W(1144),Ae=W(8239),E=W(9751),Se=W(3670),he=W(2206),Oe=W(4532),Ne=W(6495),xe=W(3260),ct=W(576),Ke=W(7849),Te=W(8822);function at(ve){if(ve instanceof E.y)return ve;if(null!=ve){if((0,Se.c)(ve))return function Ct(ve){return new E.y(we=>{const Fe=ve[Te.L]();if((0,ct.m)(Fe.subscribe))return Fe.subscribe(we);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ve);if((0,me.z)(ve))return function ue(ve){return new E.y(we=>{for(let Fe=0;Fe<ve.length&&!we.closed;Fe++)we.next(ve[Fe]);we.complete()})}(ve);if((0,Ae.t)(ve))return function De(ve){return new E.y(we=>{ve.then(Fe=>{we.closed||(we.next(Fe),we.complete())},Fe=>we.error(Fe)).then(null,Ke.h)})}(ve);if((0,he.D)(ve))return ye(ve);if((0,Ne.T)(ve))return function oe(ve){return new E.y(we=>{for(const Fe of ve)if(we.next(Fe),we.closed)return;we.complete()})}(ve);if((0,xe.L)(ve))return function ce(ve){return ye((0,xe.Q)(ve))}(ve)}throw(0,Oe.z)(ve)}function ye(ve){return new E.y(we=>{(function Re(ve,we){var Fe,se,_t,Xe;return(0,o.mG)(this,void 0,void 0,function*(){try{for(Fe=(0,o.KL)(ve);!(se=yield Fe.next()).done;)if(we.next(se.value),we.closed)return}catch(st){_t={error:st}}finally{try{se&&!se.done&&(Xe=Fe.return)&&(yield Xe.call(Fe))}finally{if(_t)throw _t.error}}we.complete()})})(ve,we).catch(Fe=>we.error(Fe))})}},6451:(lt,Pe,W)=>{"use strict";W.d(Pe,{T:()=>he});var o=W(8189),me=W(8421),Ae=W(515),E=W(3269),Se=W(457);function he(...Oe){const Ne=(0,E.yG)(Oe),xe=(0,E._6)(Oe,1/0),ct=Oe;return ct.length?1===ct.length?(0,me.Xf)(ct[0]):(0,o.J)(xe)((0,Se.D)(ct,Ne)):Ae.E}},9646:(lt,Pe,W)=>{"use strict";W.d(Pe,{of:()=>Ae});var o=W(3269),me=W(457);function Ae(...E){const Se=(0,o.yG)(E);return(0,me.D)(E,Se)}},5403:(lt,Pe,W)=>{"use strict";W.d(Pe,{Q:()=>Ae,x:()=>me});var o=W(930);function me(E,Se,he,Oe,Ne){return new Ae(E,Se,he,Oe,Ne)}class Ae extends o.Lv{constructor(Se,he,Oe,Ne,xe,ct){super(Se),this.onFinalize=xe,this.shouldUnsubscribe=ct,this._next=he?function(Ke){try{he(Ke)}catch(Te){Se.error(Te)}}:super._next,this._error=Ne?function(Ke){try{Ne(Ke)}catch(Te){Se.error(Te)}finally{this.unsubscribe()}}:super._error,this._complete=Oe?function(){try{Oe()}catch(Ke){Se.error(Ke)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:he}=this;super.unsubscribe(),!he&&(null===(Se=this.onFinalize)||void 0===Se||Se.call(this))}}}},262:(lt,Pe,W)=>{"use strict";W.d(Pe,{K:()=>E});var o=W(8421),me=W(5403),Ae=W(4482);function E(Se){return(0,Ae.e)((he,Oe)=>{let ct,Ne=null,xe=!1;Ne=he.subscribe((0,me.x)(Oe,void 0,void 0,Ke=>{ct=(0,o.Xf)(Se(Ke,E(Se)(he))),Ne?(Ne.unsubscribe(),Ne=null,ct.subscribe(Oe)):xe=!0})),xe&&(Ne.unsubscribe(),Ne=null,ct.subscribe(Oe))})}},4351:(lt,Pe,W)=>{"use strict";W.d(Pe,{b:()=>Ae});var o=W(5577),me=W(576);function Ae(E,Se){return(0,me.m)(Se)?(0,o.z)(E,Se,1):(0,o.z)(E,1)}},8372:(lt,Pe,W)=>{"use strict";W.d(Pe,{b:()=>E});var o=W(4986),me=W(4482),Ae=W(5403);function E(Se,he=o.z){return(0,me.e)((Oe,Ne)=>{let xe=null,ct=null,Ke=null;const Te=()=>{if(xe){xe.unsubscribe(),xe=null;const Ct=ct;ct=null,Ne.next(Ct)}};function at(){const Ct=Ke+Se,ue=he.now();if(ue<Ct)return xe=this.schedule(void 0,Ct-ue),void Ne.add(xe);Te()}Oe.subscribe((0,Ae.x)(Ne,Ct=>{ct=Ct,Ke=he.now(),xe||(xe=he.schedule(at,Se),Ne.add(xe))},()=>{Te(),Ne.complete()},void 0,()=>{ct=xe=null}))})}},1884:(lt,Pe,W)=>{"use strict";W.d(Pe,{x:()=>E});var o=W(4671),me=W(4482),Ae=W(5403);function E(he,Oe=o.y){return he=he??Se,(0,me.e)((Ne,xe)=>{let ct,Ke=!0;Ne.subscribe((0,Ae.x)(xe,Te=>{const at=Oe(Te);(Ke||!he(ct,at))&&(Ke=!1,ct=at,xe.next(Te))}))})}function Se(he,Oe){return he===Oe}},9300:(lt,Pe,W)=>{"use strict";W.d(Pe,{h:()=>Ae});var o=W(4482),me=W(5403);function Ae(E,Se){return(0,o.e)((he,Oe)=>{let Ne=0;he.subscribe((0,me.x)(Oe,xe=>E.call(Se,xe,Ne++)&&Oe.next(xe)))})}},4004:(lt,Pe,W)=>{"use strict";W.d(Pe,{U:()=>Ae});var o=W(4482),me=W(5403);function Ae(E,Se){return(0,o.e)((he,Oe)=>{let Ne=0;he.subscribe((0,me.x)(Oe,xe=>{Oe.next(E.call(Se,xe,Ne++))}))})}},8189:(lt,Pe,W)=>{"use strict";W.d(Pe,{J:()=>Ae});var o=W(5577),me=W(4671);function Ae(E=1/0){return(0,o.z)(me.y,E)}},5577:(lt,Pe,W)=>{"use strict";W.d(Pe,{z:()=>Ne});var o=W(4004),me=W(8421),Ae=W(4482),E=W(9672),Se=W(5403),Oe=W(576);function Ne(xe,ct,Ke=1/0){return(0,Oe.m)(ct)?Ne((Te,at)=>(0,o.U)((Ct,ue)=>ct(Te,Ct,at,ue))((0,me.Xf)(xe(Te,at))),Ke):("number"==typeof ct&&(Ke=ct),(0,Ae.e)((Te,at)=>function he(xe,ct,Ke,Te,at,Ct,ue,De){const oe=[];let ye=0,ce=0,Re=!1;const ve=()=>{Re&&!oe.length&&!ye&&ct.complete()},we=se=>ye<Te?Fe(se):oe.push(se),Fe=se=>{Ct&&ct.next(se),ye++;let _t=!1;(0,me.Xf)(Ke(se,ce++)).subscribe((0,Se.x)(ct,Xe=>{at?.(Xe),Ct?we(Xe):ct.next(Xe)},()=>{_t=!0},void 0,()=>{if(_t)try{for(ye--;oe.length&&ye<Te;){const Xe=oe.shift();ue?(0,E.f)(ct,ue,()=>Fe(Xe)):Fe(Xe)}ve()}catch(Xe){ct.error(Xe)}}))};return xe.subscribe((0,Se.x)(ct,we,()=>{Re=!0,ve()})),()=>{De?.()}}(Te,at,xe,Ke)))}},5363:(lt,Pe,W)=>{"use strict";W.d(Pe,{Q:()=>E});var o=W(9672),me=W(4482),Ae=W(5403);function E(Se,he=0){return(0,me.e)((Oe,Ne)=>{Oe.subscribe((0,Ae.x)(Ne,xe=>(0,o.f)(Ne,Se,()=>Ne.next(xe),he),()=>(0,o.f)(Ne,Se,()=>Ne.complete(),he),xe=>(0,o.f)(Ne,Se,()=>Ne.error(xe),he)))})}},5026:(lt,Pe,W)=>{"use strict";W.d(Pe,{R:()=>E});var o=W(4482),me=W(5403);function Ae(Se,he,Oe,Ne,xe){return(ct,Ke)=>{let Te=Oe,at=he,Ct=0;ct.subscribe((0,me.x)(Ke,ue=>{const De=Ct++;at=Te?Se(at,ue,De):(Te=!0,ue),Ne&&Ke.next(at)},xe&&(()=>{Te&&Ke.next(at),Ke.complete()})))}}function E(Se,he){return(0,o.e)(Ae(Se,he,arguments.length>=2,!0))}},3099:(lt,Pe,W)=>{"use strict";W.d(Pe,{B:()=>Se});var o=W(8421),me=W(7579),Ae=W(930),E=W(4482);function Se(Oe={}){const{connector:Ne=(()=>new me.x),resetOnError:xe=!0,resetOnComplete:ct=!0,resetOnRefCountZero:Ke=!0}=Oe;return Te=>{let at,Ct,ue,De=0,oe=!1,ye=!1;const ce=()=>{Ct?.unsubscribe(),Ct=void 0},Re=()=>{ce(),at=ue=void 0,oe=ye=!1},ve=()=>{const we=at;Re(),we?.unsubscribe()};return(0,E.e)((we,Fe)=>{De++,!ye&&!oe&&ce();const se=ue=ue??Ne();Fe.add(()=>{De--,0===De&&!ye&&!oe&&(Ct=he(ve,Ke))}),se.subscribe(Fe),!at&&De>0&&(at=new Ae.Hp({next:_t=>se.next(_t),error:_t=>{ye=!0,ce(),Ct=he(Re,xe,_t),se.error(_t)},complete:()=>{oe=!0,ce(),Ct=he(Re,ct),se.complete()}}),(0,o.Xf)(we).subscribe(at))})(Te)}}function he(Oe,Ne,...xe){if(!0===Ne)return void Oe();if(!1===Ne)return;const ct=new Ae.Hp({next:()=>{ct.unsubscribe(),Oe()}});return(0,o.Xf)(Ne(...xe)).subscribe(ct)}},5684:(lt,Pe,W)=>{"use strict";W.d(Pe,{T:()=>me});var o=W(9300);function me(Ae){return(0,o.h)((E,Se)=>Ae<=Se)}},3900:(lt,Pe,W)=>{"use strict";W.d(Pe,{w:()=>E});var o=W(8421),me=W(4482),Ae=W(5403);function E(Se,he){return(0,me.e)((Oe,Ne)=>{let xe=null,ct=0,Ke=!1;const Te=()=>Ke&&!xe&&Ne.complete();Oe.subscribe((0,Ae.x)(Ne,at=>{xe?.unsubscribe();let Ct=0;const ue=ct++;(0,o.Xf)(Se(at,ue)).subscribe(xe=(0,Ae.x)(Ne,De=>Ne.next(he?he(at,De,ue,Ct++):De),()=>{xe=null,Te()}))},()=>{Ke=!0,Te()}))})}},5698:(lt,Pe,W)=>{"use strict";W.d(Pe,{q:()=>E});var o=W(515),me=W(4482),Ae=W(5403);function E(Se){return Se<=0?()=>o.E:(0,me.e)((he,Oe)=>{let Ne=0;he.subscribe((0,Ae.x)(Oe,xe=>{++Ne<=Se&&(Oe.next(xe),Se<=Ne&&Oe.complete())}))})}},2722:(lt,Pe,W)=>{"use strict";W.d(Pe,{R:()=>Se});var o=W(4482),me=W(5403),Ae=W(8421),E=W(5032);function Se(he){return(0,o.e)((Oe,Ne)=>{(0,Ae.Xf)(he).subscribe((0,me.x)(Ne,()=>Ne.complete(),E.Z)),!Ne.closed&&Oe.subscribe(Ne)})}},7414:(lt,Pe,W)=>{"use strict";W.d(Pe,{V:()=>xe});var o=W(4986),me=W(1165),Ae=W(4482),E=W(8421),Se=W(3888),he=W(5403),Oe=W(9672);const Ne=(0,Se.d)(Ke=>function(at=null){Ke(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=at});function xe(Ke,Te){const{first:at,each:Ct,with:ue=ct,scheduler:De=Te??o.z,meta:oe=null}=(0,me.q)(Ke)?{first:Ke}:"number"==typeof Ke?{each:Ke}:Ke;if(null==at&&null==Ct)throw new TypeError("No timeout provided.");return(0,Ae.e)((ye,ce)=>{let Re,ve,we=null,Fe=0;const se=_t=>{ve=(0,Oe.f)(ce,De,()=>{try{Re.unsubscribe(),(0,E.Xf)(ue({meta:oe,lastValue:we,seen:Fe})).subscribe(ce)}catch(Xe){ce.error(Xe)}},_t)};Re=ye.subscribe((0,he.x)(ce,_t=>{ve?.unsubscribe(),Fe++,ce.next(we=_t),Ct>0&&se(Ct)},void 0,void 0,()=>{ve?.closed||ve?.unsubscribe(),we=null})),!Fe&&se(null!=at?"number"==typeof at?at:+at-De.now():Ct)})}function ct(Ke){throw new Ne(Ke)}},1365:(lt,Pe,W)=>{"use strict";W.d(Pe,{M:()=>Oe});var o=W(4482),me=W(5403),Ae=W(8421),E=W(4671),Se=W(5032),he=W(3269);function Oe(...Ne){const xe=(0,he.jO)(Ne);return(0,o.e)((ct,Ke)=>{const Te=Ne.length,at=new Array(Te);let Ct=Ne.map(()=>!1),ue=!1;for(let De=0;De<Te;De++)(0,Ae.Xf)(Ne[De]).subscribe((0,me.x)(Ke,oe=>{at[De]=oe,!ue&&!Ct[De]&&(Ct[De]=!0,(ue=Ct.every(E.y))&&(Ct=null))},Se.Z));ct.subscribe((0,me.x)(Ke,De=>{if(ue){const oe=[De,...at];Ke.next(xe?xe(...oe):oe)}}))})}},4408:(lt,Pe,W)=>{"use strict";W.d(Pe,{o:()=>Se});var o=W(727);class me extends o.w0{constructor(Oe,Ne){super()}schedule(Oe,Ne=0){return this}}const Ae={setInterval(he,Oe,...Ne){const{delegate:xe}=Ae;return xe?.setInterval?xe.setInterval(he,Oe,...Ne):setInterval(he,Oe,...Ne)},clearInterval(he){const{delegate:Oe}=Ae;return(Oe?.clearInterval||clearInterval)(he)},delegate:void 0};var E=W(8737);class Se extends me{constructor(Oe,Ne){super(Oe,Ne),this.scheduler=Oe,this.work=Ne,this.pending=!1}schedule(Oe,Ne=0){var xe;if(this.closed)return this;this.state=Oe;const ct=this.id,Ke=this.scheduler;return null!=ct&&(this.id=this.recycleAsyncId(Ke,ct,Ne)),this.pending=!0,this.delay=Ne,this.id=null!==(xe=this.id)&&void 0!==xe?xe:this.requestAsyncId(Ke,this.id,Ne),this}requestAsyncId(Oe,Ne,xe=0){return Ae.setInterval(Oe.flush.bind(Oe,this),xe)}recycleAsyncId(Oe,Ne,xe=0){if(null!=xe&&this.delay===xe&&!1===this.pending)return Ne;null!=Ne&&Ae.clearInterval(Ne)}execute(Oe,Ne){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const xe=this._execute(Oe,Ne);if(xe)return xe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Oe,Ne){let ct,xe=!1;try{this.work(Oe)}catch(Ke){xe=!0,ct=Ke||new Error("Scheduled action threw falsy error")}if(xe)return this.unsubscribe(),ct}unsubscribe(){if(!this.closed){const{id:Oe,scheduler:Ne}=this,{actions:xe}=Ne;this.work=this.state=this.scheduler=null,this.pending=!1,(0,E.P)(xe,this),null!=Oe&&(this.id=this.recycleAsyncId(Ne,Oe,null)),this.delay=null,super.unsubscribe()}}}},7565:(lt,Pe,W)=>{"use strict";W.d(Pe,{v:()=>Ae});var o=W(6063);class me{constructor(Se,he=me.now){this.schedulerActionCtor=Se,this.now=he}schedule(Se,he=0,Oe){return new this.schedulerActionCtor(this,Se).schedule(Oe,he)}}me.now=o.l.now;class Ae extends me{constructor(Se,he=me.now){super(Se,he),this.actions=[],this._active=!1}flush(Se){const{actions:he}=this;if(this._active)return void he.push(Se);let Oe;this._active=!0;do{if(Oe=Se.execute(Se.state,Se.delay))break}while(Se=he.shift());if(this._active=!1,Oe){for(;Se=he.shift();)Se.unsubscribe();throw Oe}}}},4986:(lt,Pe,W)=>{"use strict";W.d(Pe,{P:()=>E,z:()=>Ae});var o=W(4408);const Ae=new(W(7565).v)(o.o),E=Ae},6063:(lt,Pe,W)=>{"use strict";W.d(Pe,{l:()=>o});const o={now:()=>(o.delegate||Date).now(),delegate:void 0}},233:(lt,Pe,W)=>{"use strict";W.d(Pe,{N:()=>Se});var o=W(4408),Ae=W(7565);const Se=new class E extends Ae.v{}(class me extends o.o{constructor(Ne,xe){super(Ne,xe),this.scheduler=Ne,this.work=xe}schedule(Ne,xe=0){return xe>0?super.schedule(Ne,xe):(this.delay=xe,this.state=Ne,this.scheduler.flush(this),this)}execute(Ne,xe){return xe>0||this.closed?super.execute(Ne,xe):this._execute(Ne,xe)}requestAsyncId(Ne,xe,ct=0){return null!=ct&&ct>0||null==ct&&this.delay>0?super.requestAsyncId(Ne,xe,ct):(Ne.flush(this),0)}})},3410:(lt,Pe,W)=>{"use strict";W.d(Pe,{z:()=>o});const o={setTimeout(me,Ae,...E){const{delegate:Se}=o;return Se?.setTimeout?Se.setTimeout(me,Ae,...E):setTimeout(me,Ae,...E)},clearTimeout(me){const{delegate:Ae}=o;return(Ae?.clearTimeout||clearTimeout)(me)},delegate:void 0}},2202:(lt,Pe,W)=>{"use strict";W.d(Pe,{h:()=>me});const me=function o(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(lt,Pe,W)=>{"use strict";W.d(Pe,{L:()=>o});const o="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(lt,Pe,W)=>{"use strict";W.d(Pe,{_6:()=>he,jO:()=>E,yG:()=>Se});var o=W(576),me=W(3532);function Ae(Oe){return Oe[Oe.length-1]}function E(Oe){return(0,o.m)(Ae(Oe))?Oe.pop():void 0}function Se(Oe){return(0,me.K)(Ae(Oe))?Oe.pop():void 0}function he(Oe,Ne){return"number"==typeof Ae(Oe)?Oe.pop():Ne}},8737:(lt,Pe,W)=>{"use strict";function o(me,Ae){if(me){const E=me.indexOf(Ae);0<=E&&me.splice(E,1)}}W.d(Pe,{P:()=>o})},3888:(lt,Pe,W)=>{"use strict";function o(me){const E=me(Se=>{Error.call(Se),Se.stack=(new Error).stack});return E.prototype=Object.create(Error.prototype),E.prototype.constructor=E,E}W.d(Pe,{d:()=>o})},2806:(lt,Pe,W)=>{"use strict";W.d(Pe,{O:()=>E,x:()=>Ae});var o=W(2416);let me=null;function Ae(Se){if(o.v.useDeprecatedSynchronousErrorHandling){const he=!me;if(he&&(me={errorThrown:!1,error:null}),Se(),he){const{errorThrown:Oe,error:Ne}=me;if(me=null,Oe)throw Ne}}else Se()}function E(Se){o.v.useDeprecatedSynchronousErrorHandling&&me&&(me.errorThrown=!0,me.error=Se)}},9672:(lt,Pe,W)=>{"use strict";function o(me,Ae,E,Se=0,he=!1){const Oe=Ae.schedule(function(){E(),he?me.add(this.schedule(null,Se)):this.unsubscribe()},Se);if(me.add(Oe),!he)return Oe}W.d(Pe,{f:()=>o})},4671:(lt,Pe,W)=>{"use strict";function o(me){return me}W.d(Pe,{y:()=>o})},1144:(lt,Pe,W)=>{"use strict";W.d(Pe,{z:()=>o});const o=me=>me&&"number"==typeof me.length&&"function"!=typeof me},2206:(lt,Pe,W)=>{"use strict";W.d(Pe,{D:()=>me});var o=W(576);function me(Ae){return Symbol.asyncIterator&&(0,o.m)(Ae?.[Symbol.asyncIterator])}},1165:(lt,Pe,W)=>{"use strict";function o(me){return me instanceof Date&&!isNaN(me)}W.d(Pe,{q:()=>o})},576:(lt,Pe,W)=>{"use strict";function o(me){return"function"==typeof me}W.d(Pe,{m:()=>o})},3670:(lt,Pe,W)=>{"use strict";W.d(Pe,{c:()=>Ae});var o=W(8822),me=W(576);function Ae(E){return(0,me.m)(E[o.L])}},6495:(lt,Pe,W)=>{"use strict";W.d(Pe,{T:()=>Ae});var o=W(2202),me=W(576);function Ae(E){return(0,me.m)(E?.[o.h])}},8239:(lt,Pe,W)=>{"use strict";W.d(Pe,{t:()=>me});var o=W(576);function me(Ae){return(0,o.m)(Ae?.then)}},3260:(lt,Pe,W)=>{"use strict";W.d(Pe,{L:()=>E,Q:()=>Ae});var o=W(655),me=W(576);function Ae(Se){return(0,o.FC)(this,arguments,function*(){const Oe=Se.getReader();try{for(;;){const{value:Ne,done:xe}=yield(0,o.qq)(Oe.read());if(xe)return yield(0,o.qq)(void 0);yield yield(0,o.qq)(Ne)}}finally{Oe.releaseLock()}})}function E(Se){return(0,me.m)(Se?.getReader)}},3532:(lt,Pe,W)=>{"use strict";W.d(Pe,{K:()=>me});var o=W(576);function me(Ae){return Ae&&(0,o.m)(Ae.schedule)}},4482:(lt,Pe,W)=>{"use strict";W.d(Pe,{A:()=>me,e:()=>Ae});var o=W(576);function me(E){return(0,o.m)(E?.lift)}function Ae(E){return Se=>{if(me(Se))return Se.lift(function(he){try{return E(he,this)}catch(Oe){this.error(Oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(lt,Pe,W)=>{"use strict";function o(){}W.d(Pe,{Z:()=>o})},9635:(lt,Pe,W)=>{"use strict";W.d(Pe,{U:()=>Ae,z:()=>me});var o=W(4671);function me(...E){return Ae(E)}function Ae(E){return 0===E.length?o.y:1===E.length?E[0]:function(he){return E.reduce((Oe,Ne)=>Ne(Oe),he)}}},7849:(lt,Pe,W)=>{"use strict";W.d(Pe,{h:()=>Ae});var o=W(2416),me=W(3410);function Ae(E){me.z.setTimeout(()=>{const{onUnhandledError:Se}=o.v;if(!Se)throw E;Se(E)})}},4532:(lt,Pe,W)=>{"use strict";function o(me){return new TypeError(`You provided ${null!==me&&"object"==typeof me?"an invalid object":`'${me}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}W.d(Pe,{z:()=>o})},9231:lt=>{"use strict";lt.exports={eudist:function(W,o,me){for(var Ae=W.length,E=0,Se=0;Se<Ae;Se++){var he=(W[Se]||0)-(o[Se]||0);E+=he*he}return me?Math.sqrt(E):E},mandist:function(W,o,me){for(var Ae=W.length,E=0,Se=0;Se<Ae;Se++)E+=Math.abs((W[Se]||0)-(o[Se]||0));return me?Math.sqrt(E):E},dist:function(W,o,me){var Ae=Math.abs(W-o);return me?Ae:Ae*Ae}}},5561:(lt,Pe,W)=>{"use strict";var o=W(9231),me=o.eudist,Ae=o.dist;lt.exports={kmrand:function(Se,he){for(var Oe={},Ne=[],xe=he<<2,ct=Se.length,Ke=Se[0].length>0;Ne.length<he&&xe-- >0;){var Te=Se[Math.floor(Math.random()*ct)],at=Ke?Te.join("_"):""+Te;Oe[at]||(Oe[at]=!0,Ne.push(Te))}if(Ne.length<he)throw new Error("Error initializating clusters");return Ne},kmpp:function(Se,he){var Oe=Se[0].length?me:Ae,Ne=[],xe=Se.length,ct=Se[0].length>0,Te=Se[Math.floor(Math.random()*xe)];for(ct&&Te.join("_"),Ne.push(Te);Ne.length<he;){for(var Ct=[],ue=Ne.length,De=0,oe=[],ye=0;ye<xe;ye++){for(var ce=1/0,Re=0;Re<ue;Re++){var ve=Oe(Se[ye],Ne[Re]);ve<=ce&&(ce=ve)}Ct[ye]=ce}for(var we=0;we<xe;we++)De+=Ct[we];for(var Fe=0;Fe<xe;Fe++)oe[Fe]={i:Fe,v:Se[Fe],pr:Ct[Fe]/De,cs:0};oe.sort(function(st,de){return st.pr-de.pr}),oe[0].cs=oe[0].pr;for(var se=1;se<xe;se++)oe[se].cs=oe[se-1].cs+oe[se].pr;for(var _t=Math.random(),Xe=0;Xe<xe-1&&oe[Xe++].cs<_t;);Ne.push(oe[Xe-1].v)}return Ne}}},9475:(lt,Pe,W)=>{"use strict";var o=W(9231),me=W(5561),Ae=o.eudist,he=me.kmrand,Oe=me.kmpp;function xe(Ke,Te,at){at=at||[];for(var Ct=0;Ct<Ke;Ct++)at[Ct]=Te;return at}lt.exports=function ct(Ke,Te,at,Ct){var ue=[],De=[],oe=[],ye=[],ce=!1,Re=Ct||1e4,ve=Ke.length,we=Ke[0].length,Fe=we>0,se=[];if(at)ue="kmrand"==at?he(Ke,Te):"kmpp"==at?Oe(Ke,Te):at;else for(var _t={};ue.length<Te;){var Xe=Math.floor(Math.random()*ve);_t[Xe]||(_t[Xe]=!0,ue.push(Ke[Xe]))}do{xe(Te,0,se);for(var st=0;st<ve;st++){for(var de=1/0,Qe=0,dt=0;dt<Te;dt++)(ye=Fe?Ae(Ke[st],ue[dt]):Math.abs(Ke[st]-ue[dt]))<=de&&(de=ye,Qe=dt);oe[st]=Qe,se[Qe]++}for(var Me=[],$e=(De=[],0);$e<Te;$e++)Me[$e]=Fe?xe(we,0,Me[$e]):0,De[$e]=ue[$e];if(Fe){for(var gt=0;gt<Te;gt++)ue[gt]=[];for(var Mt=0;Mt<ve;Mt++)for(var Bt=Me[oe[Mt]],Vt=Ke[Mt],rn=0;rn<we;rn++)Bt[rn]+=Vt[rn];ce=!0;for(var Gt=0;Gt<Te;Gt++){for(var Vn=ue[Gt],Bn=Me[Gt],Sn=De[Gt],si=se[Gt],$n=0;$n<we;$n++)Vn[$n]=Bn[$n]/si||0;if(ce)for(var hn=0;hn<we;hn++)if(Sn[hn]!=Vn[hn]){ce=!1;break}}}else{for(var jr=0;jr<ve;jr++)Me[oe[jr]]+=Ke[jr];for(var Fr=0;Fr<Te;Fr++)ue[Fr]=Me[Fr]/se[Fr]||0;ce=!0;for(var yi=0;yi<Te;yi++)if(De[yi]!=ue[yi]){ce=!1;break}}ce=ce||--Re<=0}while(!ce);return{it:1e4-Re,k:Te,idxs:oe,centroids:ue}}},7253:(lt,Pe,W)=>{"use strict";W.r(Pe),W.d(Pe,{default:()=>o});class o{constructor(E=[],Se=me){if(this.data=E,this.length=this.data.length,this.compare=Se,this.length>0)for(let he=(this.length>>1)-1;he>=0;he--)this._down(he)}push(E){this.data.push(E),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const E=this.data[0],Se=this.data.pop();return this.length--,this.length>0&&(this.data[0]=Se,this._down(0)),E}peek(){return this.data[0]}_up(E){const{data:Se,compare:he}=this,Oe=Se[E];for(;E>0;){const Ne=E-1>>1,xe=Se[Ne];if(he(Oe,xe)>=0)break;Se[E]=xe,E=Ne}Se[E]=Oe}_down(E){const{data:Se,compare:he}=this,Oe=this.length>>1,Ne=Se[E];for(;E<Oe;){let xe=1+(E<<1),ct=Se[xe];const Ke=xe+1;if(Ke<this.length&&he(Se[Ke],ct)<0&&(xe=Ke,ct=Se[Ke]),he(ct,Ne)>=0)break;Se[E]=ct,E=xe}Se[E]=Ne}}function me(Ae,E){return Ae<E?-1:Ae>E?1:0}},770:function(lt,Pe){!function(W){"use strict";function o(){}function me(s){this.message=s||""}function Ae(s){this.message=s||""}function E(s){this.message=s||""}function Se(){}function he(s){return null===s?rt:s.color}function Oe(s){return null===s?null:s.parent}function Ne(s,l){null!==s&&(s.color=l)}function xe(s){return null===s?null:s.left}function ct(s){return null===s?null:s.right}function Ke(){this.root_=null,this.size_=0}function Te(){}function at(){this.array_=[],arguments[0]instanceof Mr&&this.addAll(arguments[0])}function Ct(){}function ue(s){this.message=s||""}function De(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(s){if(null==this)throw new TypeError(this+" is not an object");var l=Object(this),m=Math.max(Math.min(l.length,9007199254740991),0)||0,v=1 in arguments&&parseInt(Number(arguments[1]),10)||0;v=v<0?Math.max(m+v,0):Math.min(v,m);var C=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:m;for(C=C<0?Math.max(m+arguments[2],0):Math.min(C,m);v<C;)l[v]=s,++v;return l},writable:!0}),Number.isFinite=Number.isFinite||function(s){return"number"==typeof s&&isFinite(s)},Number.isInteger=Number.isInteger||function(s){return"number"==typeof s&&isFinite(s)&&Math.floor(s)===s},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(s){return s!=s},Math.trunc=Math.trunc||function(s){return s<0?Math.ceil(s):Math.floor(s)};var oe=function(){};oe.prototype.interfaces_=function(){return[]},oe.prototype.getClass=function(){return oe},oe.prototype.equalsWithTolerance=function(s,l,m){return Math.abs(s-l)<=m};var ye=function(s){function l(m){s.call(this,m),this.name="IllegalArgumentException",this.message=m,this.stack=(new s).stack}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l}(Error),ce=function(){},Re={MAX_VALUE:{configurable:!0}};ce.isNaN=function(s){return Number.isNaN(s)},ce.doubleToLongBits=function(s){return s},ce.longBitsToDouble=function(s){return s},ce.isInfinite=function(s){return!Number.isFinite(s)},Re.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(ce,Re);var ve=function(){},we=function(){},Fe=function(){},se=function s(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=s.NULL_ORDINATE;else if(1===arguments.length){var l=arguments[0];this.x=l.x,this.y=l.y,this.z=l.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=s.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},_t={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};se.prototype.setOrdinate=function(s,l){switch(s){case se.X:this.x=l;break;case se.Y:this.y=l;break;case se.Z:this.z=l;break;default:throw new ye("Invalid ordinate index: "+s)}},se.prototype.equals2D=function(){if(1===arguments.length){var s=arguments[0];return this.x===s.x&&this.y===s.y}if(2===arguments.length){var l=arguments[0],m=arguments[1];return!!oe.equalsWithTolerance(this.x,l.x,m)&&!!oe.equalsWithTolerance(this.y,l.y,m)}},se.prototype.getOrdinate=function(s){switch(s){case se.X:return this.x;case se.Y:return this.y;case se.Z:return this.z}throw new ye("Invalid ordinate index: "+s)},se.prototype.equals3D=function(s){return this.x===s.x&&this.y===s.y&&(this.z===s.z||ce.isNaN(this.z))&&ce.isNaN(s.z)},se.prototype.equals=function(s){return s instanceof se&&this.equals2D(s)},se.prototype.equalInZ=function(s,l){return oe.equalsWithTolerance(this.z,s.z,l)},se.prototype.compareTo=function(s){return this.x<s.x?-1:this.x>s.x?1:this.y<s.y?-1:this.y>s.y?1:0},se.prototype.clone=function(){},se.prototype.copy=function(){return new se(this)},se.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},se.prototype.distance3D=function(s){var l=this.x-s.x,m=this.y-s.y,v=this.z-s.z;return Math.sqrt(l*l+m*m+v*v)},se.prototype.distance=function(s){var l=this.x-s.x,m=this.y-s.y;return Math.sqrt(l*l+m*m)},se.prototype.hashCode=function(){var s=17;return 37*(s=37*s+se.hashCode(this.x))+se.hashCode(this.y)},se.prototype.setCoordinate=function(s){this.x=s.x,this.y=s.y,this.z=s.z},se.prototype.interfaces_=function(){return[ve,we,o]},se.prototype.getClass=function(){return se},se.hashCode=function(){if(1===arguments.length){var l=ce.doubleToLongBits(arguments[0]);return Math.trunc((l^l)>>>32)}},_t.DimensionalComparator.get=function(){return Xe},_t.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},_t.NULL_ORDINATE.get=function(){return ce.NaN},_t.X.get=function(){return 0},_t.Y.get=function(){return 1},_t.Z.get=function(){return 2},Object.defineProperties(se,_t);var Xe=function(s){if(this._dimensionsToTest=2,0!==arguments.length&&1===arguments.length){var l=arguments[0];if(2!==l&&3!==l)throw new ye("only 2 or 3 dimensions may be specified");this._dimensionsToTest=l}};Xe.prototype.compare=function(s,l){var m=s,v=l,C=Xe.compare(m.x,v.x);if(0!==C)return C;var k=Xe.compare(m.y,v.y);return 0!==k?k:this._dimensionsToTest<=2?0:Xe.compare(m.z,v.z)},Xe.prototype.interfaces_=function(){return[Fe]},Xe.prototype.getClass=function(){return Xe},Xe.compare=function(s,l){return s<l?-1:s>l?1:ce.isNaN(s)?ce.isNaN(l)?0:-1:ce.isNaN(l)?1:0};var st=function(){};st.prototype.create=function(){},st.prototype.interfaces_=function(){return[]},st.prototype.getClass=function(){return st};var de=function(){},Qe={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};de.prototype.interfaces_=function(){return[]},de.prototype.getClass=function(){return de},de.toLocationSymbol=function(s){switch(s){case de.EXTERIOR:return"e";case de.BOUNDARY:return"b";case de.INTERIOR:return"i";case de.NONE:return"-"}throw new ye("Unknown location value: "+s)},Qe.INTERIOR.get=function(){return 0},Qe.BOUNDARY.get=function(){return 1},Qe.EXTERIOR.get=function(){return 2},Qe.NONE.get=function(){return-1},Object.defineProperties(de,Qe);var dt=function(s,l){return s.interfaces_&&s.interfaces_().indexOf(l)>-1},Me=function(){},ut={LOG_10:{configurable:!0}};Me.prototype.interfaces_=function(){return[]},Me.prototype.getClass=function(){return Me},Me.log10=function(s){var l=Math.log(s);return ce.isInfinite(l)||ce.isNaN(l)?l:l/Me.LOG_10},Me.min=function(s,l,m,v){var C=s;return l<C&&(C=l),m<C&&(C=m),v<C&&(C=v),C},Me.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var s=arguments[0],l=arguments[1],m=arguments[2];return s<l?l:s>m?m:s}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var v=arguments[0],C=arguments[1],k=arguments[2];return v<C?C:v>k?k:v}},Me.wrap=function(s,l){return s<0?l- -s%l:s%l},Me.max=function(){if(3===arguments.length){var l=arguments[1],m=arguments[2],v=arguments[0];return l>v&&(v=l),m>v&&(v=m),v}if(4===arguments.length){var k=arguments[1],G=arguments[2],J=arguments[3],fe=arguments[0];return k>fe&&(fe=k),G>fe&&(fe=G),J>fe&&(fe=J),fe}},Me.average=function(s,l){return(s+l)/2},ut.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(Me,ut);var $e=function(s){this.str=s};$e.prototype.append=function(s){this.str+=s},$e.prototype.setCharAt=function(s,l){this.str=this.str.substr(0,s)+l+this.str.substr(s+1)},$e.prototype.toString=function(s){return this.str};var gt=function(s){this.value=s};gt.prototype.intValue=function(){return this.value},gt.prototype.compareTo=function(s){return this.value<s?-1:this.value>s?1:0},gt.isNaN=function(s){return Number.isNaN(s)};var Mt=function(){};Mt.isWhitespace=function(s){return s<=32&&s>=0||127===s},Mt.toUpperCase=function(s){return s.toUpperCase()};var tt=function s(){this._hi=0,this._lo=0,0===arguments.length?this.init(0):1===arguments.length?"number"==typeof arguments[0]||arguments[0]instanceof s?this.init(arguments[0]):"string"==typeof arguments[0]&&s.call(this,s.parse(arguments[0])):2===arguments.length&&this.init(arguments[0],arguments[1])},Bt={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};tt.prototype.le=function(s){return(this._hi<s._hi||this._hi===s._hi)&&this._lo<=s._lo},tt.prototype.extractSignificantDigits=function(s,l){var m=this.abs(),v=tt.magnitude(m._hi),C=tt.TEN.pow(v);(m=m.divide(C)).gt(tt.TEN)?(m=m.divide(tt.TEN),v+=1):m.lt(tt.ONE)&&(m=m.multiply(tt.TEN),v-=1);for(var k=v+1,G=new $e,J=tt.MAX_PRINT_DIGITS-1,fe=0;fe<=J;fe++){s&&fe===k&&G.append(".");var pe=Math.trunc(m._hi);if(pe<0)break;var ot=!1,nt=0;pe>9?(ot=!0,nt="9"):nt="0"+pe,G.append(nt),m=m.subtract(tt.valueOf(pe)).multiply(tt.TEN),ot&&m.selfAdd(tt.TEN);var wt=!0,Pt=tt.magnitude(m._hi);if(Pt<0&&Math.abs(Pt)>=J-fe&&(wt=!1),!wt)break}return l[0]=v,G.toString()},tt.prototype.sqr=function(){return this.multiply(this)},tt.prototype.doubleValue=function(){return this._hi+this._lo},tt.prototype.subtract=function(){return arguments[0]instanceof tt?this.add(arguments[0].negate()):"number"==typeof arguments[0]?this.add(-arguments[0]):void 0},tt.prototype.equals=function(){if(1===arguments.length){var s=arguments[0];return this._hi===s._hi&&this._lo===s._lo}},tt.prototype.isZero=function(){return 0===this._hi&&0===this._lo},tt.prototype.selfSubtract=function(){if(arguments[0]instanceof tt){var s=arguments[0];return this.isNaN()?this:this.selfAdd(-s._hi,-s._lo)}if("number"==typeof arguments[0]){var l=arguments[0];return this.isNaN()?this:this.selfAdd(-l,0)}},tt.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},tt.prototype.min=function(s){return this.le(s)?this:s},tt.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof tt){var s=arguments[0];return this.selfDivide(s._hi,s._lo)}if("number"==typeof arguments[0])return this.selfDivide(arguments[0],0)}else if(2===arguments.length){var m=arguments[0],C=null,k=null,G=null,J=null,fe=null,pe=null,ot=null,nt=null;return this._hi=nt=(fe=this._hi/m)+(pe=(this._hi-(ot=fe*m)-(nt=(C=(pe=tt.SPLIT*fe)-(C=pe-fe))*(G=(nt=tt.SPLIT*m)-(G=nt-m))-ot+C*(J=m-G)+(k=fe-C)*G+k*J)+this._lo-fe*arguments[1])/m),this._lo=fe-nt+pe,this}},tt.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},tt.prototype.divide=function(){if(arguments[0]instanceof tt){var s=arguments[0],l=null,m=null,v=null,C=null,k=null,G=null,J=null,fe=null;return m=(k=this._hi/s._hi)-(l=(G=tt.SPLIT*k)-(l=G-k)),fe=l*(v=(fe=tt.SPLIT*s._hi)-(v=fe-s._hi))-(J=k*s._hi)+l*(C=s._hi-v)+m*v+m*C,new tt(fe=k+(G=(this._hi-J-fe+this._lo-k*s._lo)/s._hi),k-fe+G)}if("number"==typeof arguments[0]){var pe=arguments[0];return ce.isNaN(pe)?tt.createNaN():tt.copy(this).selfDivide(pe,0)}},tt.prototype.ge=function(s){return(this._hi>s._hi||this._hi===s._hi)&&this._lo>=s._lo},tt.prototype.pow=function(s){if(0===s)return tt.valueOf(1);var l=new tt(this),m=tt.valueOf(1),v=Math.abs(s);if(v>1)for(;v>0;)v%2==1&&m.selfMultiply(l),(v/=2)>0&&(l=l.sqr());else m=l;return s<0?m.reciprocal():m},tt.prototype.ceil=function(){if(this.isNaN())return tt.NaN;var s=Math.ceil(this._hi),l=0;return s===this._hi&&(l=Math.ceil(this._lo)),new tt(s,l)},tt.prototype.compareTo=function(s){return this._hi<s._hi?-1:this._hi>s._hi?1:this._lo<s._lo?-1:this._lo>s._lo?1:0},tt.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},tt.prototype.setValue=function(){return arguments[0]instanceof tt||"number"==typeof arguments[0]?(this.init(arguments[0]),this):void 0},tt.prototype.max=function(s){return this.ge(s)?this:s},tt.prototype.sqrt=function(){if(this.isZero())return tt.valueOf(0);if(this.isNegative())return tt.NaN;var s=1/Math.sqrt(this._hi),m=tt.valueOf(this._hi*s),v=this.subtract(m.sqr())._hi*(.5*s);return m.add(v)},tt.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof tt){var s=arguments[0];return this.selfAdd(s._hi,s._lo)}if("number"==typeof arguments[0]){var l=arguments[0],m=null,v=null,C=null,G=null,J=null;return this._hi=(m=(C=this._hi+l)+(J=l-(G=C-this._hi)+(this._hi-(C-G))+this._lo))+(v=J+(C-m)),this._lo=v+(m-this._hi),this}}else if(2===arguments.length){var fe=arguments[0],pe=arguments[1],ot=null,nt=null,wt=null,Pt=null,$t=null,Ft=null,En=null;$t=(Pt=this._hi+fe)-(Ft=Pt-this._hi),wt=(nt=this._lo+pe)-(En=nt-this._lo);var Dn=(ot=Pt+(Ft=($t=fe-Ft+(this._hi-$t))+nt))+(Ft=(wt=pe-En+(this._lo-wt))+(Ft+(Pt-ot))),Ln=Ft+(ot-Dn);return this._hi=Dn,this._lo=Ln,this}},tt.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof tt){var s=arguments[0];return this.selfMultiply(s._hi,s._lo)}if("number"==typeof arguments[0])return this.selfMultiply(arguments[0],0)}else if(2===arguments.length){var m=arguments[0],C=null,k=null,G=null,J=null,fe=null,pe=null;C=(fe=tt.SPLIT*this._hi)-this._hi,C=fe-C;var ot=(fe=this._hi*m)+(pe=C*(G=(pe=tt.SPLIT*m)-(G=pe-m))-fe+C*(J=m-G)+(k=this._hi-C)*G+k*J+(this._hi*arguments[1]+this._lo*m)),nt=pe+(C=fe-ot);return this._hi=ot,this._lo=nt,this}},tt.prototype.selfSqr=function(){return this.selfMultiply(this)},tt.prototype.floor=function(){if(this.isNaN())return tt.NaN;var s=Math.floor(this._hi),l=0;return s===this._hi&&(l=Math.floor(this._lo)),new tt(s,l)},tt.prototype.negate=function(){return this.isNaN()?this:new tt(-this._hi,-this._lo)},tt.prototype.clone=function(){},tt.prototype.multiply=function(){if(arguments[0]instanceof tt){var s=arguments[0];return s.isNaN()?tt.createNaN():tt.copy(this).selfMultiply(s)}if("number"==typeof arguments[0]){var l=arguments[0];return ce.isNaN(l)?tt.createNaN():tt.copy(this).selfMultiply(l,0)}},tt.prototype.isNaN=function(){return ce.isNaN(this._hi)},tt.prototype.intValue=function(){return Math.trunc(this._hi)},tt.prototype.toString=function(){var s=tt.magnitude(this._hi);return s>=-3&&s<=20?this.toStandardNotation():this.toSciNotation()},tt.prototype.toStandardNotation=function(){var s=this.getSpecialNumberString();if(null!==s)return s;var l=new Array(1).fill(null),m=this.extractSignificantDigits(!0,l),v=l[0]+1,C=m;return"."===m.charAt(0)?C="0"+m:v<0?C="0."+tt.stringOfChar("0",-v)+m:-1===m.indexOf(".")&&(C=m+tt.stringOfChar("0",v-m.length)+".0"),this.isNegative()?"-"+C:C},tt.prototype.reciprocal=function(){var l,v,C,G,s=null,m=null,k=null,J=null;l=(C=1/this._hi)-(s=(k=tt.SPLIT*C)-(s=k-C)),m=(J=tt.SPLIT*this._hi)-this._hi;var fe=C+(k=(1-(G=C*this._hi)-(J=s*(m=J-m)-G+s*(v=this._hi-m)+l*m+l*v)-C*this._lo)/this._hi);return new tt(fe,C-fe+k)},tt.prototype.toSciNotation=function(){if(this.isZero())return tt.SCI_NOT_ZERO;var s=this.getSpecialNumberString();if(null!==s)return s;var l=new Array(1).fill(null),m=this.extractSignificantDigits(!1,l),v=tt.SCI_NOT_EXPONENT_CHAR+l[0];if("0"===m.charAt(0))throw new Error("Found leading zero: "+m);var C="";m.length>1&&(C=m.substring(1));var k=m.charAt(0)+"."+C;return this.isNegative()?"-"+k+v:k+v},tt.prototype.abs=function(){return this.isNaN()?tt.NaN:this.isNegative()?this.negate():new tt(this)},tt.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},tt.prototype.lt=function(s){return(this._hi<s._hi||this._hi===s._hi)&&this._lo<s._lo},tt.prototype.add=function(){if(arguments[0]instanceof tt){var s=arguments[0];return tt.copy(this).selfAdd(s)}if("number"==typeof arguments[0]){var l=arguments[0];return tt.copy(this).selfAdd(l)}},tt.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0])this._hi=arguments[0],this._lo=0;else if(arguments[0]instanceof tt){var l=arguments[0];this._hi=l._hi,this._lo=l._lo}}else if(2===arguments.length){var v=arguments[1];this._hi=arguments[0],this._lo=v}},tt.prototype.gt=function(s){return(this._hi>s._hi||this._hi===s._hi)&&this._lo>s._lo},tt.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},tt.prototype.trunc=function(){return this.isNaN()?tt.NaN:this.isPositive()?this.floor():this.ceil()},tt.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},tt.prototype.interfaces_=function(){return[o,ve,we]},tt.prototype.getClass=function(){return tt},tt.sqr=function(s){return tt.valueOf(s).selfMultiply(s)},tt.valueOf=function(){return"string"==typeof arguments[0]?tt.parse(arguments[0]):"number"==typeof arguments[0]?new tt(arguments[0]):void 0},tt.sqrt=function(s){return tt.valueOf(s).sqrt()},tt.parse=function(s){for(var l=0,m=s.length;Mt.isWhitespace(s.charAt(l));)l++;var v=!1;if(l<m){var C=s.charAt(l);"-"!==C&&"+"!==C||(l++,"-"===C&&(v=!0))}for(var k=new tt,G=0,J=0,fe=0;!(l>=m);){var pe=s.charAt(l);if(l++,Mt.isDigit(pe)){var ot=pe-"0";k.selfMultiply(tt.TEN),k.selfAdd(ot),G++}else{if("."!==pe){if("e"===pe||"E"===pe){var nt=s.substring(l);try{fe=gt.parseInt(nt)}catch(En){throw En instanceof Error?new Error("Invalid exponent "+nt+" in string "+s):En}break}throw new Error("Unexpected character '"+pe+"' at position "+l+" in string "+s)}J=G}}var wt=k,Pt=G-J-fe;if(0===Pt)wt=k;else if(Pt>0){var $t=tt.TEN.pow(Pt);wt=k.divide($t)}else if(Pt<0){var Ft=tt.TEN.pow(-Pt);wt=k.multiply(Ft)}return v?wt.negate():wt},tt.createNaN=function(){return new tt(ce.NaN,ce.NaN)},tt.copy=function(s){return new tt(s)},tt.magnitude=function(s){var l=Math.abs(s),m=Math.log(l)/Math.log(10),v=Math.trunc(Math.floor(m));return 10*Math.pow(10,v)<=l&&(v+=1),v},tt.stringOfChar=function(s,l){for(var m=new $e,v=0;v<l;v++)m.append(s);return m.toString()},Bt.PI.get=function(){return new tt(3.141592653589793,12246467991473532e-32)},Bt.TWO_PI.get=function(){return new tt(6.283185307179586,24492935982947064e-32)},Bt.PI_2.get=function(){return new tt(1.5707963267948966,6123233995736766e-32)},Bt.E.get=function(){return new tt(2.718281828459045,14456468917292502e-32)},Bt.NaN.get=function(){return new tt(ce.NaN,ce.NaN)},Bt.EPS.get=function(){return 123259516440783e-46},Bt.SPLIT.get=function(){return 134217729},Bt.MAX_PRINT_DIGITS.get=function(){return 32},Bt.TEN.get=function(){return tt.valueOf(10)},Bt.ONE.get=function(){return tt.valueOf(1)},Bt.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},Bt.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(tt,Bt);var Vt=function(){},rn={DP_SAFE_EPSILON:{configurable:!0}};Vt.prototype.interfaces_=function(){return[]},Vt.prototype.getClass=function(){return Vt},Vt.orientationIndex=function(s,l,m){var v=Vt.orientationIndexFilter(s,l,m);if(v<=1)return v;var C=tt.valueOf(l.x).selfAdd(-s.x),k=tt.valueOf(l.y).selfAdd(-s.y),G=tt.valueOf(m.x).selfAdd(-l.x),J=tt.valueOf(m.y).selfAdd(-l.y);return C.selfMultiply(J).selfSubtract(k.selfMultiply(G)).signum()},Vt.signOfDet2x2=function(s,l,m,v){return s.multiply(v).selfSubtract(l.multiply(m)).signum()},Vt.intersection=function(s,l,m,v){var C=tt.valueOf(v.y).selfSubtract(m.y).selfMultiply(tt.valueOf(l.x).selfSubtract(s.x)),k=tt.valueOf(v.x).selfSubtract(m.x).selfMultiply(tt.valueOf(l.y).selfSubtract(s.y)),G=C.subtract(k),J=tt.valueOf(v.x).selfSubtract(m.x).selfMultiply(tt.valueOf(s.y).selfSubtract(m.y)),fe=tt.valueOf(v.y).selfSubtract(m.y).selfMultiply(tt.valueOf(s.x).selfSubtract(m.x)),pe=J.subtract(fe).selfDivide(G).doubleValue(),ot=tt.valueOf(s.x).selfAdd(tt.valueOf(l.x).selfSubtract(s.x).selfMultiply(pe)).doubleValue(),nt=tt.valueOf(l.x).selfSubtract(s.x).selfMultiply(tt.valueOf(s.y).selfSubtract(m.y)),wt=tt.valueOf(l.y).selfSubtract(s.y).selfMultiply(tt.valueOf(s.x).selfSubtract(m.x)),Pt=nt.subtract(wt).selfDivide(G).doubleValue(),$t=tt.valueOf(m.y).selfAdd(tt.valueOf(v.y).selfSubtract(m.y).selfMultiply(Pt)).doubleValue();return new se(ot,$t)},Vt.orientationIndexFilter=function(s,l,m){var v=null,C=(s.x-m.x)*(l.y-m.y),k=(s.y-m.y)*(l.x-m.x),G=C-k;if(C>0){if(k<=0)return Vt.signum(G);v=C+k}else{if(!(C<0)||k>=0)return Vt.signum(G);v=-C-k}var J=Vt.DP_SAFE_EPSILON*v;return G>=J||-G>=J?Vt.signum(G):2},Vt.signum=function(s){return s>0?1:s<0?-1:0},rn.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(Vt,rn);var Gt=function(){},Vn={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};Vn.X.get=function(){return 0},Vn.Y.get=function(){return 1},Vn.Z.get=function(){return 2},Vn.M.get=function(){return 3},Gt.prototype.setOrdinate=function(s,l,m){},Gt.prototype.size=function(){},Gt.prototype.getOrdinate=function(s,l){},Gt.prototype.getCoordinate=function(){},Gt.prototype.getCoordinateCopy=function(s){},Gt.prototype.getDimension=function(){},Gt.prototype.getX=function(s){},Gt.prototype.clone=function(){},Gt.prototype.expandEnvelope=function(s){},Gt.prototype.copy=function(){},Gt.prototype.getY=function(s){},Gt.prototype.toCoordinateArray=function(){},Gt.prototype.interfaces_=function(){return[we]},Gt.prototype.getClass=function(){return Gt},Object.defineProperties(Gt,Vn);var Bn=function(){},Sn=function(s){function l(){s.call(this,"Projective point not representable on the Cartesian plane.")}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.interfaces_=function(){return[]},l.prototype.getClass=function(){return l},l}(Bn),si=function(){};si.arraycopy=function(s,l,m,v,C){for(var k=0,G=l;G<l+C;G++)m[v+k]=s[G],k++},si.getProperty=function(s){return{"line.separator":"\n"}[s]};var $n=function s(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var l=arguments[0];this.x=l.x,this.y=l.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var v=arguments[1];this.x=arguments[0],this.y=v,this.w=1}else if(arguments[0]instanceof s&&arguments[1]instanceof s){var C=arguments[0],k=arguments[1];this.x=C.y*k.w-k.y*C.w,this.y=k.x*C.w-C.x*k.w,this.w=C.x*k.y-k.x*C.y}else if(arguments[0]instanceof se&&arguments[1]instanceof se){var G=arguments[0],J=arguments[1];this.x=G.y-J.y,this.y=J.x-G.x,this.w=G.x*J.y-J.x*G.y}}else if(3===arguments.length){var pe=arguments[1],ot=arguments[2];this.x=arguments[0],this.y=pe,this.w=ot}else if(4===arguments.length){var nt=arguments[0],wt=arguments[1],Pt=arguments[2],$t=arguments[3],Ft=nt.y-wt.y,En=wt.x-nt.x,Dn=nt.x*wt.y-wt.x*nt.y,Ln=Pt.y-$t.y,Zi=$t.x-Pt.x,Qi=Pt.x*$t.y-$t.x*Pt.y;this.x=En*Qi-Zi*Dn,this.y=Ln*Dn-Ft*Qi,this.w=Ft*Zi-Ln*En}};$n.prototype.getY=function(){var s=this.y/this.w;if(ce.isNaN(s)||ce.isInfinite(s))throw new Sn;return s},$n.prototype.getX=function(){var s=this.x/this.w;if(ce.isNaN(s)||ce.isInfinite(s))throw new Sn;return s},$n.prototype.getCoordinate=function(){var s=new se;return s.x=this.getX(),s.y=this.getY(),s},$n.prototype.interfaces_=function(){return[]},$n.prototype.getClass=function(){return $n},$n.intersection=function(s,l,m,v){var C=s.y-l.y,k=l.x-s.x,G=s.x*l.y-l.x*s.y,J=m.y-v.y,fe=v.x-m.x,pe=m.x*v.y-v.x*m.y,ot=C*fe-J*k,nt=(k*pe-fe*G)/ot,wt=(J*G-C*pe)/ot;if(ce.isNaN(nt)||ce.isInfinite(nt)||ce.isNaN(wt)||ce.isInfinite(wt))throw new Sn;return new se(nt,wt)};var hn=function s(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length)if(arguments[0]instanceof se){var l=arguments[0];this.init(l.x,l.x,l.y,l.y)}else arguments[0]instanceof s&&this.init(arguments[0]);else if(2===arguments.length){var v=arguments[0],C=arguments[1];this.init(v.x,C.x,v.y,C.y)}else 4===arguments.length&&this.init(arguments[0],arguments[1],arguments[2],arguments[3])},jr={serialVersionUID:{configurable:!0}};hn.prototype.getArea=function(){return this.getWidth()*this.getHeight()},hn.prototype.equals=function(s){if(!(s instanceof hn))return!1;var l=s;return this.isNull()?l.isNull():this._maxx===l.getMaxX()&&this._maxy===l.getMaxY()&&this._minx===l.getMinX()&&this._miny===l.getMinY()},hn.prototype.intersection=function(s){return this.isNull()||s.isNull()||!this.intersects(s)?new hn:new hn(this._minx>s._minx?this._minx:s._minx,this._maxx<s._maxx?this._maxx:s._maxx,this._miny>s._miny?this._miny:s._miny,this._maxy<s._maxy?this._maxy:s._maxy)},hn.prototype.isNull=function(){return this._maxx<this._minx},hn.prototype.getMaxX=function(){return this._maxx},hn.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof se){var s=arguments[0];return this.covers(s.x,s.y)}if(arguments[0]instanceof hn){var l=arguments[0];return!this.isNull()&&!l.isNull()&&l.getMinX()>=this._minx&&l.getMaxX()<=this._maxx&&l.getMinY()>=this._miny&&l.getMaxY()<=this._maxy}}else if(2===arguments.length){var m=arguments[0],v=arguments[1];return!this.isNull()&&m>=this._minx&&m<=this._maxx&&v>=this._miny&&v<=this._maxy}},hn.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof hn){var s=arguments[0];return!this.isNull()&&!s.isNull()&&!(s._minx>this._maxx||s._maxx<this._minx||s._miny>this._maxy||s._maxy<this._miny)}if(arguments[0]instanceof se){var l=arguments[0];return this.intersects(l.x,l.y)}}else if(2===arguments.length){var m=arguments[0],v=arguments[1];return!this.isNull()&&!(m>this._maxx||m<this._minx||v>this._maxy||v<this._miny)}},hn.prototype.getMinY=function(){return this._miny},hn.prototype.getMinX=function(){return this._minx},hn.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof se){var s=arguments[0];this.expandToInclude(s.x,s.y)}else if(arguments[0]instanceof hn){var l=arguments[0];if(l.isNull())return null;this.isNull()?(this._minx=l.getMinX(),this._maxx=l.getMaxX(),this._miny=l.getMinY(),this._maxy=l.getMaxY()):(l._minx<this._minx&&(this._minx=l._minx),l._maxx>this._maxx&&(this._maxx=l._maxx),l._miny<this._miny&&(this._miny=l._miny),l._maxy>this._maxy&&(this._maxy=l._maxy))}}else if(2===arguments.length){var m=arguments[0],v=arguments[1];this.isNull()?(this._minx=m,this._maxx=m,this._miny=v,this._maxy=v):(m<this._minx&&(this._minx=m),m>this._maxx&&(this._maxx=m),v<this._miny&&(this._miny=v),v>this._maxy&&(this._maxy=v))}},hn.prototype.minExtent=function(){if(this.isNull())return 0;var s=this.getWidth(),l=this.getHeight();return s<l?s:l},hn.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},hn.prototype.compareTo=function(s){var l=s;return this.isNull()?l.isNull()?0:-1:l.isNull()?1:this._minx<l._minx?-1:this._minx>l._minx?1:this._miny<l._miny?-1:this._miny>l._miny?1:this._maxx<l._maxx?-1:this._maxx>l._maxx?1:this._maxy<l._maxy?-1:this._maxy>l._maxy?1:0},hn.prototype.translate=function(s,l){if(this.isNull())return null;this.init(this.getMinX()+s,this.getMaxX()+s,this.getMinY()+l,this.getMaxY()+l)},hn.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},hn.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},hn.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},hn.prototype.maxExtent=function(){if(this.isNull())return 0;var s=this.getWidth(),l=this.getHeight();return s>l?s:l},hn.prototype.expandBy=function(){if(1===arguments.length){var s=arguments[0];this.expandBy(s,s)}else if(2===arguments.length){var l=arguments[0],m=arguments[1];if(this.isNull())return null;this._minx-=l,this._maxx+=l,this._miny-=m,this._maxy+=m,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},hn.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof hn)return this.covers(arguments[0]);if(arguments[0]instanceof se)return this.covers(arguments[0])}else if(2===arguments.length)return this.covers(arguments[0],arguments[1])},hn.prototype.centre=function(){return this.isNull()?null:new se((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},hn.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof se){var s=arguments[0];this.init(s.x,s.x,s.y,s.y)}else if(arguments[0]instanceof hn){var l=arguments[0];this._minx=l._minx,this._maxx=l._maxx,this._miny=l._miny,this._maxy=l._maxy}}else if(2===arguments.length){var m=arguments[0],v=arguments[1];this.init(m.x,v.x,m.y,v.y)}else if(4===arguments.length){var C=arguments[0],k=arguments[1],G=arguments[2],J=arguments[3];C<k?(this._minx=C,this._maxx=k):(this._minx=k,this._maxx=C),G<J?(this._miny=G,this._maxy=J):(this._miny=J,this._maxy=G)}},hn.prototype.getMaxY=function(){return this._maxy},hn.prototype.distance=function(s){if(this.intersects(s))return 0;var l=0;this._maxx<s._minx?l=s._minx-this._maxx:this._minx>s._maxx&&(l=this._minx-s._maxx);var m=0;return this._maxy<s._miny?m=s._miny-this._maxy:this._miny>s._maxy&&(m=this._miny-s._maxy),0===l?m:0===m?l:Math.sqrt(l*l+m*m)},hn.prototype.hashCode=function(){var s=17;return 37*(s=37*(s=37*(s=37*s+se.hashCode(this._minx))+se.hashCode(this._maxx))+se.hashCode(this._miny))+se.hashCode(this._maxy)},hn.prototype.interfaces_=function(){return[ve,o]},hn.prototype.getClass=function(){return hn},hn.intersects=function(){if(3===arguments.length){var s=arguments[0],l=arguments[1],m=arguments[2];return m.x>=(s.x<l.x?s.x:l.x)&&m.x<=(s.x>l.x?s.x:l.x)&&m.y>=(s.y<l.y?s.y:l.y)&&m.y<=(s.y>l.y?s.y:l.y)}if(4===arguments.length){var v=arguments[0],C=arguments[1],k=arguments[2],G=arguments[3],J=Math.min(k.x,G.x),fe=Math.max(k.x,G.x),pe=Math.min(v.x,C.x),ot=Math.max(v.x,C.x);return!(pe>fe||ot<J||(J=Math.min(k.y,G.y),fe=Math.max(k.y,G.y),pe=Math.min(v.y,C.y),ot=Math.max(v.y,C.y),pe>fe||ot<J))}},jr.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(hn,jr);var sr={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Fr=function(s){this.geometryFactory=s||new Xi};Fr.prototype.read=function(s){var l,m;s=s.replace(/[\n\r]/g," ");var C=sr.typeStr.exec(s);if(-1!==s.search("EMPTY")&&((C=sr.emptyTypeStr.exec(s))[2]=void 0),C&&(m=C[1].toLowerCase(),Ri[m]&&(l=Ri[m].apply(this,[C[2]]))),void 0===l)throw new Error("Could not parse WKT "+s);return l},Fr.prototype.write=function(s){return this.extractGeometry(s)},Fr.prototype.extractGeometry=function(s){var l=s.getGeometryType().toLowerCase();if(!yi[l])return null;var m=l.toUpperCase();return s.isEmpty()?m+" EMPTY":m+"("+yi[l].apply(this,[s])+")"};var yi={coordinate:function(s){return s.x+" "+s.y},point:function(s){return yi.coordinate.call(this,s._coordinates._coordinates[0])},multipoint:function(s){for(var l=[],m=0,v=s._geometries.length;m<v;++m)l.push("("+yi.point.apply(this,[s._geometries[m]])+")");return l.join(",")},linestring:function(s){for(var l=[],m=0,v=s._points._coordinates.length;m<v;++m)l.push(yi.coordinate.apply(this,[s._points._coordinates[m]]));return l.join(",")},linearring:function(s){for(var l=[],m=0,v=s._points._coordinates.length;m<v;++m)l.push(yi.coordinate.apply(this,[s._points._coordinates[m]]));return l.join(",")},multilinestring:function(s){for(var l=[],m=0,v=s._geometries.length;m<v;++m)l.push("("+yi.linestring.apply(this,[s._geometries[m]])+")");return l.join(",")},polygon:function(s){var l=[];l.push("("+yi.linestring.apply(this,[s._shell])+")");for(var m=0,v=s._holes.length;m<v;++m)l.push("("+yi.linestring.apply(this,[s._holes[m]])+")");return l.join(",")},multipolygon:function(s){for(var l=[],m=0,v=s._geometries.length;m<v;++m)l.push("("+yi.polygon.apply(this,[s._geometries[m]])+")");return l.join(",")},geometrycollection:function(s){for(var l=[],m=0,v=s._geometries.length;m<v;++m)l.push(this.extractGeometry(s._geometries[m]));return l.join(",")}},Ri={point:function(s){if(void 0===s)return this.geometryFactory.createPoint();var l=s.trim().split(sr.spaces);return this.geometryFactory.createPoint(new se(Number.parseFloat(l[0]),Number.parseFloat(l[1])))},multipoint:function(s){if(void 0===s)return this.geometryFactory.createMultiPoint();for(var l,m=s.trim().split(","),v=[],C=0,k=m.length;C<k;++C)l=m[C].replace(sr.trimParens,"$1"),v.push(Ri.point.apply(this,[l]));return this.geometryFactory.createMultiPoint(v)},linestring:function(s){if(void 0===s)return this.geometryFactory.createLineString();for(var l,m=s.trim().split(","),v=[],C=0,k=m.length;C<k;++C)l=m[C].trim().split(sr.spaces),v.push(new se(Number.parseFloat(l[0]),Number.parseFloat(l[1])));return this.geometryFactory.createLineString(v)},linearring:function(s){if(void 0===s)return this.geometryFactory.createLinearRing();for(var l,m=s.trim().split(","),v=[],C=0,k=m.length;C<k;++C)l=m[C].trim().split(sr.spaces),v.push(new se(Number.parseFloat(l[0]),Number.parseFloat(l[1])));return this.geometryFactory.createLinearRing(v)},multilinestring:function(s){if(void 0===s)return this.geometryFactory.createMultiLineString();for(var l,m=s.trim().split(sr.parenComma),v=[],C=0,k=m.length;C<k;++C)l=m[C].replace(sr.trimParens,"$1"),v.push(Ri.linestring.apply(this,[l]));return this.geometryFactory.createMultiLineString(v)},polygon:function(s){if(void 0===s)return this.geometryFactory.createPolygon();for(var l,m,v,C,k=s.trim().split(sr.parenComma),G=[],J=0,fe=k.length;J<fe;++J)l=k[J].replace(sr.trimParens,"$1"),m=Ri.linestring.apply(this,[l]),v=this.geometryFactory.createLinearRing(m._points),0===J?C=v:G.push(v);return this.geometryFactory.createPolygon(C,G)},multipolygon:function(s){if(void 0===s)return this.geometryFactory.createMultiPolygon();for(var l,m=s.trim().split(sr.doubleParenComma),v=[],C=0,k=m.length;C<k;++C)l=m[C].replace(sr.trimParens,"$1"),v.push(Ri.polygon.apply(this,[l]));return this.geometryFactory.createMultiPolygon(v)},geometrycollection:function(s){if(void 0===s)return this.geometryFactory.createGeometryCollection();for(var l=(s=s.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),m=[],v=0,C=l.length;v<C;++v)m.push(this.read(l[v]));return this.geometryFactory.createGeometryCollection(m)}},It=function(s){this.parser=new Fr(s)};It.prototype.write=function(s){return this.parser.write(s)},It.toLineString=function(s,l){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+s.x+" "+s.y+", "+l.x+" "+l.y+" )"};var je=function(s){function l(m){s.call(this,m),this.name="RuntimeException",this.message=m,this.stack=(new s).stack}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l}(Error),Le=function(s){function l(){s.call(this),0===arguments.length?s.call(this):1===arguments.length&&s.call(this,arguments[0])}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.interfaces_=function(){return[]},l.prototype.getClass=function(){return l},l}(je),ke=function(){};ke.prototype.interfaces_=function(){return[]},ke.prototype.getClass=function(){return ke},ke.shouldNeverReachHere=function(){if(0===arguments.length)ke.shouldNeverReachHere(null);else if(1===arguments.length){var s=arguments[0];throw new Le("Should never reach here"+(null!==s?": "+s:""))}},ke.isTrue=function(){var l;if(1===arguments.length)ke.isTrue(arguments[0],null);else if(2===arguments.length&&(l=arguments[1],!arguments[0]))throw null===l?new Le:new Le(l)},ke.equals=function(){var s,l,m;if(2===arguments.length)ke.equals(s=arguments[0],l=arguments[1],null);else if(3===arguments.length&&(m=arguments[2],!(l=arguments[1]).equals(s=arguments[0])))throw new Le("Expected "+s+" but encountered "+l+(null!==m?": "+m:""))};var Je=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new se,this._intPt[1]=new se,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},Tt={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};Je.prototype.getIndexAlongSegment=function(s,l){return this.computeIntLineIndex(),this._intLineIndex[s][l]},Je.prototype.getTopologySummary=function(){var s=new $e;return this.isEndPoint()&&s.append(" endpoint"),this._isProper&&s.append(" proper"),this.isCollinear()&&s.append(" collinear"),s.toString()},Je.prototype.computeIntersection=function(s,l,m,v){this._inputLines[0][0]=s,this._inputLines[0][1]=l,this._inputLines[1][0]=m,this._inputLines[1][1]=v,this._result=this.computeIntersect(s,l,m,v)},Je.prototype.getIntersectionNum=function(){return this._result},Je.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var s=arguments[0];this.getEdgeDistance(s,0)>this.getEdgeDistance(s,1)?(this._intLineIndex[s][0]=0,this._intLineIndex[s][1]=1):(this._intLineIndex[s][0]=1,this._intLineIndex[s][1]=0)}},Je.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},Je.prototype.setPrecisionModel=function(s){this._precisionModel=s},Je.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var s=arguments[0],l=0;l<this._result;l++)if(!this._intPt[l].equals2D(this._inputLines[s][0])&&!this._intPt[l].equals2D(this._inputLines[s][1]))return!0;return!1}},Je.prototype.getIntersection=function(s){return this._intPt[s]},Je.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},Je.prototype.hasIntersection=function(){return this._result!==Je.NO_INTERSECTION},Je.prototype.getEdgeDistance=function(s,l){return Je.computeEdgeDistance(this._intPt[l],this._inputLines[s][0],this._inputLines[s][1])},Je.prototype.isCollinear=function(){return this._result===Je.COLLINEAR_INTERSECTION},Je.prototype.toString=function(){return It.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+It.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},Je.prototype.getEndpoint=function(s,l){return this._inputLines[s][l]},Je.prototype.isIntersection=function(s){for(var l=0;l<this._result;l++)if(this._intPt[l].equals2D(s))return!0;return!1},Je.prototype.getIntersectionAlongSegment=function(s,l){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[s][l]]},Je.prototype.interfaces_=function(){return[]},Je.prototype.getClass=function(){return Je},Je.computeEdgeDistance=function(s,l,m){var v=Math.abs(m.x-l.x),C=Math.abs(m.y-l.y),k=-1;if(s.equals(l))k=0;else if(s.equals(m))k=v>C?v:C;else{var G=Math.abs(s.x-l.x),J=Math.abs(s.y-l.y);0!==(k=v>C?G:J)||s.equals(l)||(k=Math.max(G,J))}return ke.isTrue(!(0===k&&!s.equals(l)),"Bad distance calculation"),k},Je.nonRobustComputeEdgeDistance=function(s,l,m){var v=s.x-l.x,C=s.y-l.y,k=Math.sqrt(v*v+C*C);return ke.isTrue(!(0===k&&!s.equals(l)),"Invalid distance calculation"),k},Tt.DONT_INTERSECT.get=function(){return 0},Tt.DO_INTERSECT.get=function(){return 1},Tt.COLLINEAR.get=function(){return 2},Tt.NO_INTERSECTION.get=function(){return 0},Tt.POINT_INTERSECTION.get=function(){return 1},Tt.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(Je,Tt);var Yt=function(s){function l(){s.apply(this,arguments)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.isInSegmentEnvelopes=function(m){var v=new hn(this._inputLines[0][0],this._inputLines[0][1]),C=new hn(this._inputLines[1][0],this._inputLines[1][1]);return v.contains(m)&&C.contains(m)},l.prototype.computeIntersection=function(){if(3!==arguments.length)return s.prototype.computeIntersection.apply(this,arguments);var m=arguments[0],v=arguments[1],C=arguments[2];if(this._isProper=!1,hn.intersects(v,C,m)&&0===mt.orientationIndex(v,C,m)&&0===mt.orientationIndex(C,v,m))return this._isProper=!0,(m.equals(v)||m.equals(C))&&(this._isProper=!1),this._result=s.POINT_INTERSECTION,null;this._result=s.NO_INTERSECTION},l.prototype.normalizeToMinimum=function(m,v,C,k,G){G.x=this.smallestInAbsValue(m.x,v.x,C.x,k.x),G.y=this.smallestInAbsValue(m.y,v.y,C.y,k.y),m.x-=G.x,m.y-=G.y,v.x-=G.x,v.y-=G.y,C.x-=G.x,C.y-=G.y,k.x-=G.x,k.y-=G.y},l.prototype.safeHCoordinateIntersection=function(m,v,C,k){var G=null;try{G=$n.intersection(m,v,C,k)}catch(J){if(!(J instanceof Sn))throw J;G=l.nearestEndpoint(m,v,C,k)}return G},l.prototype.intersection=function(m,v,C,k){var G=this.intersectionWithNormalization(m,v,C,k);return this.isInSegmentEnvelopes(G)||(G=new se(l.nearestEndpoint(m,v,C,k))),null!==this._precisionModel&&this._precisionModel.makePrecise(G),G},l.prototype.smallestInAbsValue=function(m,v,C,k){var G=m,J=Math.abs(G);return Math.abs(v)<J&&(G=v,J=Math.abs(v)),Math.abs(C)<J&&(G=C,J=Math.abs(C)),Math.abs(k)<J&&(G=k),G},l.prototype.checkDD=function(m,v,C,k,G){var J=Vt.intersection(m,v,C,k),fe=this.isInSegmentEnvelopes(J);si.out.println("DD in env = "+fe+"  --------------------- "+J),G.distance(J)>1e-4&&si.out.println("Distance = "+G.distance(J))},l.prototype.intersectionWithNormalization=function(m,v,C,k){var G=new se(m),J=new se(v),fe=new se(C),pe=new se(k),ot=new se;this.normalizeToEnvCentre(G,J,fe,pe,ot);var nt=this.safeHCoordinateIntersection(G,J,fe,pe);return nt.x+=ot.x,nt.y+=ot.y,nt},l.prototype.computeCollinearIntersection=function(m,v,C,k){var G=hn.intersects(m,v,C),J=hn.intersects(m,v,k),fe=hn.intersects(C,k,m),pe=hn.intersects(C,k,v);return G&&J?(this._intPt[0]=C,this._intPt[1]=k,s.COLLINEAR_INTERSECTION):fe&&pe?(this._intPt[0]=m,this._intPt[1]=v,s.COLLINEAR_INTERSECTION):G&&fe?(this._intPt[0]=C,this._intPt[1]=m,!C.equals(m)||J||pe?s.COLLINEAR_INTERSECTION:s.POINT_INTERSECTION):G&&pe?(this._intPt[0]=C,this._intPt[1]=v,!C.equals(v)||J||fe?s.COLLINEAR_INTERSECTION:s.POINT_INTERSECTION):J&&fe?(this._intPt[0]=k,this._intPt[1]=m,!k.equals(m)||G||pe?s.COLLINEAR_INTERSECTION:s.POINT_INTERSECTION):J&&pe?(this._intPt[0]=k,this._intPt[1]=v,!k.equals(v)||G||fe?s.COLLINEAR_INTERSECTION:s.POINT_INTERSECTION):s.NO_INTERSECTION},l.prototype.normalizeToEnvCentre=function(m,v,C,k,G){var J=m.x<v.x?m.x:v.x,fe=m.y<v.y?m.y:v.y,pe=m.x>v.x?m.x:v.x,ot=m.y>v.y?m.y:v.y,nt=C.x<k.x?C.x:k.x,wt=C.y<k.y?C.y:k.y,Pt=C.x>k.x?C.x:k.x,$t=C.y>k.y?C.y:k.y,En=((fe>wt?fe:wt)+(ot<$t?ot:$t))/2;G.x=((J>nt?J:nt)+(pe<Pt?pe:Pt))/2,G.y=En,m.x-=G.x,m.y-=G.y,v.x-=G.x,v.y-=G.y,C.x-=G.x,C.y-=G.y,k.x-=G.x,k.y-=G.y},l.prototype.computeIntersect=function(m,v,C,k){if(this._isProper=!1,!hn.intersects(m,v,C,k))return s.NO_INTERSECTION;var G=mt.orientationIndex(m,v,C),J=mt.orientationIndex(m,v,k);if(G>0&&J>0||G<0&&J<0)return s.NO_INTERSECTION;var fe=mt.orientationIndex(C,k,m),pe=mt.orientationIndex(C,k,v);return fe>0&&pe>0||fe<0&&pe<0?s.NO_INTERSECTION:0===G&&0===J&&0===fe&&0===pe?this.computeCollinearIntersection(m,v,C,k):(0===G||0===J||0===fe||0===pe?(this._isProper=!1,m.equals2D(C)||m.equals2D(k)?this._intPt[0]=m:v.equals2D(C)||v.equals2D(k)?this._intPt[0]=v:0===G?this._intPt[0]=new se(C):0===J?this._intPt[0]=new se(k):0===fe?this._intPt[0]=new se(m):0===pe&&(this._intPt[0]=new se(v))):(this._isProper=!0,this._intPt[0]=this.intersection(m,v,C,k)),s.POINT_INTERSECTION)},l.prototype.interfaces_=function(){return[]},l.prototype.getClass=function(){return l},l.nearestEndpoint=function(m,v,C,k){var G=m,J=mt.distancePointLine(m,C,k),fe=mt.distancePointLine(v,C,k);return fe<J&&(J=fe,G=v),(fe=mt.distancePointLine(C,m,v))<J&&(J=fe,G=C),(fe=mt.distancePointLine(k,m,v))<J&&(J=fe,G=k),G},l}(Je),ln=function(){};ln.prototype.interfaces_=function(){return[]},ln.prototype.getClass=function(){return ln},ln.orientationIndex=function(s,l,m){return ln.signOfDet2x2(l.x-s.x,l.y-s.y,m.x-l.x,m.y-l.y)},ln.signOfDet2x2=function(s,l,m,v){var C=null,k=null,G=null;if(C=1,0===s||0===v)return 0===l||0===m?0:l>0?m>0?-C:C:m>0?C:-C;if(0===l||0===m)return v>0?s>0?C:-C:s>0?-C:C;if(l>0?v>0?l<=v||(C=-C,k=s,s=m,m=k,k=l,l=v,v=k):l<=-v?(C=-C,m=-m,v=-v):(k=s,s=-m,m=k,k=l,l=-v,v=k):v>0?-l<=v?(C=-C,s=-s,l=-l):(k=-s,s=m,m=k,k=-l,l=v,v=k):l>=v?(s=-s,l=-l,m=-m,v=-v):(C=-C,k=-s,s=-m,m=k,k=-l,l=-v,v=k),s>0){if(!(m>0&&s<=m))return C}else{if(m>0||!(s>=m))return-C;C=-C,s=-s,m=-m}for(;;){if((v-=(G=Math.floor(m/s))*l)<0)return-C;if(v>l)return C;if(s>(m-=G*s)+m){if(l<v+v)return C}else{if(l>v+v)return-C;m=s-m,v=l-v,C=-C}if(0===v)return 0===m?0:-C;if(0===m||(s-=(G=Math.floor(s/m))*m,(l-=G*v)<0))return C;if(l>v)return-C;if(m>s+s){if(v<l+l)return-C}else{if(v>l+l)return C;s=m-s,l=v-l,C=-C}if(0===l)return 0===s?0:C;if(0===s)return-C}};var un=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1,this._p=arguments[0]};un.prototype.countSegment=function(s,l){if(s.x<this._p.x&&l.x<this._p.x)return null;if(this._p.x===l.x&&this._p.y===l.y)return this._isPointOnSegment=!0,null;if(s.y===this._p.y&&l.y===this._p.y){var m=s.x,v=l.x;return m>v&&(m=l.x,v=s.x),this._p.x>=m&&this._p.x<=v&&(this._isPointOnSegment=!0),null}if(s.y>this._p.y&&l.y<=this._p.y||l.y>this._p.y&&s.y<=this._p.y){var k=s.y-this._p.y,J=l.y-this._p.y,fe=ln.signOfDet2x2(s.x-this._p.x,k,l.x-this._p.x,J);if(0===fe)return this._isPointOnSegment=!0,null;J<k&&(fe=-fe),fe>0&&this._crossingCount++}},un.prototype.isPointInPolygon=function(){return this.getLocation()!==de.EXTERIOR},un.prototype.getLocation=function(){return this._isPointOnSegment?de.BOUNDARY:this._crossingCount%2==1?de.INTERIOR:de.EXTERIOR},un.prototype.isOnSegment=function(){return this._isPointOnSegment},un.prototype.interfaces_=function(){return[]},un.prototype.getClass=function(){return un},un.locatePointInRing=function(){if(arguments[0]instanceof se&&dt(arguments[1],Gt)){for(var l=arguments[1],m=new un(arguments[0]),v=new se,C=new se,k=1;k<l.size();k++)if(l.getCoordinate(k,v),l.getCoordinate(k-1,C),m.countSegment(v,C),m.isOnSegment())return m.getLocation();return m.getLocation()}if(arguments[0]instanceof se&&arguments[1]instanceof Array){for(var J=arguments[1],fe=new un(arguments[0]),pe=1;pe<J.length;pe++)if(fe.countSegment(J[pe],J[pe-1]),fe.isOnSegment())return fe.getLocation();return fe.getLocation()}};var mt=function(){},jt={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};mt.prototype.interfaces_=function(){return[]},mt.prototype.getClass=function(){return mt},mt.orientationIndex=function(s,l,m){return Vt.orientationIndex(s,l,m)},mt.signedArea=function(){if(arguments[0]instanceof Array){var s=arguments[0];if(s.length<3)return 0;for(var l=0,m=s[0].x,v=1;v<s.length-1;v++)l+=(s[v].x-m)*(s[v-1].y-s[v+1].y);return l/2}if(dt(arguments[0],Gt)){var G=arguments[0],J=G.size();if(J<3)return 0;var fe=new se,pe=new se,ot=new se;G.getCoordinate(0,pe),G.getCoordinate(1,ot);var nt=pe.x;ot.x-=nt;for(var wt=0,Pt=1;Pt<J-1;Pt++)fe.y=pe.y,pe.x=ot.x,pe.y=ot.y,G.getCoordinate(Pt+1,ot),ot.x-=nt,wt+=pe.x*(fe.y-ot.y);return wt/2}},mt.distanceLineLine=function(s,l,m,v){if(s.equals(l))return mt.distancePointLine(s,m,v);if(m.equals(v))return mt.distancePointLine(v,s,l);var C=!1;if(hn.intersects(s,l,m,v)){var k=(l.x-s.x)*(v.y-m.y)-(l.y-s.y)*(v.x-m.x);if(0===k)C=!0;else{var J=((s.y-m.y)*(l.x-s.x)-(s.x-m.x)*(l.y-s.y))/k,fe=((s.y-m.y)*(v.x-m.x)-(s.x-m.x)*(v.y-m.y))/k;(fe<0||fe>1||J<0||J>1)&&(C=!0)}}else C=!0;return C?Me.min(mt.distancePointLine(s,m,v),mt.distancePointLine(l,m,v),mt.distancePointLine(m,s,l),mt.distancePointLine(v,s,l)):0},mt.isPointInRing=function(s,l){return mt.locatePointInRing(s,l)!==de.EXTERIOR},mt.computeLength=function(s){var l=s.size();if(l<=1)return 0;var m=0,v=new se;s.getCoordinate(0,v);for(var C=v.x,k=v.y,G=1;G<l;G++){s.getCoordinate(G,v);var J=v.x,fe=v.y,pe=J-C,ot=fe-k;m+=Math.sqrt(pe*pe+ot*ot),C=J,k=fe}return m},mt.isCCW=function(s){var l=s.length-1;if(l<3)throw new ye("Ring has fewer than 4 points, so orientation cannot be determined");for(var m=s[0],v=0,C=1;C<=l;C++){var k=s[C];k.y>m.y&&(m=k,v=C)}var G=v;do{(G-=1)<0&&(G=l)}while(s[G].equals2D(m)&&G!==v);var J=v;do{J=(J+1)%l}while(s[J].equals2D(m)&&J!==v);var fe=s[G],pe=s[J];if(fe.equals2D(m)||pe.equals2D(m)||fe.equals2D(pe))return!1;var ot=mt.computeOrientation(fe,m,pe);return 0===ot?fe.x>pe.x:ot>0},mt.locatePointInRing=function(s,l){return un.locatePointInRing(s,l)},mt.distancePointLinePerpendicular=function(s,l,m){var v=(m.x-l.x)*(m.x-l.x)+(m.y-l.y)*(m.y-l.y);return Math.abs(((l.y-s.y)*(m.x-l.x)-(l.x-s.x)*(m.y-l.y))/v)*Math.sqrt(v)},mt.computeOrientation=function(s,l,m){return mt.orientationIndex(s,l,m)},mt.distancePointLine=function(){if(2===arguments.length){var s=arguments[0],l=arguments[1];if(0===l.length)throw new ye("Line array must contain at least one vertex");for(var m=s.distance(l[0]),v=0;v<l.length-1;v++){var C=mt.distancePointLine(s,l[v],l[v+1]);C<m&&(m=C)}return m}if(3===arguments.length){var k=arguments[0],G=arguments[1],J=arguments[2];if(G.x===J.x&&G.y===J.y)return k.distance(G);var fe=(J.x-G.x)*(J.x-G.x)+(J.y-G.y)*(J.y-G.y),pe=((k.x-G.x)*(J.x-G.x)+(k.y-G.y)*(J.y-G.y))/fe;return pe<=0?k.distance(G):pe>=1?k.distance(J):Math.abs(((G.y-k.y)*(J.x-G.x)-(G.x-k.x)*(J.y-G.y))/fe)*Math.sqrt(fe)}},mt.isOnLine=function(s,l){for(var m=new Yt,v=1;v<l.length;v++)if(m.computeIntersection(s,l[v-1],l[v]),m.hasIntersection())return!0;return!1},jt.CLOCKWISE.get=function(){return-1},jt.RIGHT.get=function(){return mt.CLOCKWISE},jt.COUNTERCLOCKWISE.get=function(){return 1},jt.LEFT.get=function(){return mt.COUNTERCLOCKWISE},jt.COLLINEAR.get=function(){return 0},jt.STRAIGHT.get=function(){return mt.COLLINEAR},Object.defineProperties(mt,jt);var In=function(){};In.prototype.filter=function(s){},In.prototype.interfaces_=function(){return[]},In.prototype.getClass=function(){return In};var sn=function(){var s=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=s,this._SRID=s.getSRID()},Fn={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};sn.prototype.isGeometryCollection=function(){return this.getSortIndex()===sn.SORTINDEX_GEOMETRYCOLLECTION},sn.prototype.getFactory=function(){return this._factory},sn.prototype.getGeometryN=function(s){return this},sn.prototype.getArea=function(){return 0},sn.prototype.isRectangle=function(){return!1},sn.prototype.equals=function(){if(arguments[0]instanceof sn){var s=arguments[0];return null!==s&&this.equalsTopo(s)}if(arguments[0]instanceof Object){var l=arguments[0];return l instanceof sn&&this.equalsExact(l)}},sn.prototype.equalsExact=function(s){return this===s||this.equalsExact(s,0)},sn.prototype.geometryChanged=function(){this.apply(sn.geometryChangedFilter)},sn.prototype.geometryChangedAction=function(){this._envelope=null},sn.prototype.equalsNorm=function(s){return null!==s&&this.norm().equalsExact(s.norm())},sn.prototype.getLength=function(){return 0},sn.prototype.getNumGeometries=function(){return 1},sn.prototype.compareTo=function(){if(1===arguments.length){var s=arguments[0],l=s;return this.getSortIndex()!==l.getSortIndex()?this.getSortIndex()-l.getSortIndex():this.isEmpty()&&l.isEmpty()?0:this.isEmpty()?-1:l.isEmpty()?1:this.compareToSameClass(s)}if(2===arguments.length){var m=arguments[0],v=arguments[1];return this.getSortIndex()!==m.getSortIndex()?this.getSortIndex()-m.getSortIndex():this.isEmpty()&&m.isEmpty()?0:this.isEmpty()?-1:m.isEmpty()?1:this.compareToSameClass(m,v)}},sn.prototype.getUserData=function(){return this._userData},sn.prototype.getSRID=function(){return this._SRID},sn.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},sn.prototype.checkNotGeometryCollection=function(s){if(s.getSortIndex()===sn.SORTINDEX_GEOMETRYCOLLECTION)throw new ye("This method does not support GeometryCollection arguments")},sn.prototype.equal=function(s,l,m){return 0===m?s.equals(l):s.distance(l)<=m},sn.prototype.norm=function(){var s=this.copy();return s.normalize(),s},sn.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},sn.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new hn(this._envelope)},sn.prototype.setSRID=function(s){this._SRID=s},sn.prototype.setUserData=function(s){this._userData=s},sn.prototype.compare=function(s,l){for(var m=s.iterator(),v=l.iterator();m.hasNext()&&v.hasNext();){var C=m.next(),k=v.next(),G=C.compareTo(k);if(0!==G)return G}return m.hasNext()?1:v.hasNext()?-1:0},sn.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},sn.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===sn.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===sn.SORTINDEX_MULTIPOINT||this.getSortIndex()===sn.SORTINDEX_MULTILINESTRING||this.getSortIndex()===sn.SORTINDEX_MULTIPOLYGON},sn.prototype.interfaces_=function(){return[we,ve,o]},sn.prototype.getClass=function(){return sn},sn.hasNonEmptyElements=function(s){for(var l=0;l<s.length;l++)if(!s[l].isEmpty())return!0;return!1},sn.hasNullElements=function(s){for(var l=0;l<s.length;l++)if(null===s[l])return!0;return!1},Fn.serialVersionUID.get=function(){return 0x799ea46522854c00},Fn.SORTINDEX_POINT.get=function(){return 0},Fn.SORTINDEX_MULTIPOINT.get=function(){return 1},Fn.SORTINDEX_LINESTRING.get=function(){return 2},Fn.SORTINDEX_LINEARRING.get=function(){return 3},Fn.SORTINDEX_MULTILINESTRING.get=function(){return 4},Fn.SORTINDEX_POLYGON.get=function(){return 5},Fn.SORTINDEX_MULTIPOLYGON.get=function(){return 6},Fn.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},Fn.geometryChangedFilter.get=function(){return hr},Object.defineProperties(sn,Fn);var hr=function(){};hr.interfaces_=function(){return[In]},hr.filter=function(s){s.geometryChangedAction()};var Ti=function(){};Ti.prototype.filter=function(s){},Ti.prototype.interfaces_=function(){return[]},Ti.prototype.getClass=function(){return Ti};var Bi=function(){},fr={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};Bi.prototype.isInBoundary=function(s){},Bi.prototype.interfaces_=function(){return[]},Bi.prototype.getClass=function(){return Bi},fr.Mod2BoundaryNodeRule.get=function(){return Cn},fr.EndPointBoundaryNodeRule.get=function(){return qn},fr.MultiValentEndPointBoundaryNodeRule.get=function(){return hi},fr.MonoValentEndPointBoundaryNodeRule.get=function(){return Di},fr.MOD2_BOUNDARY_RULE.get=function(){return new Cn},fr.ENDPOINT_BOUNDARY_RULE.get=function(){return new qn},fr.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new hi},fr.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Di},fr.OGC_SFS_BOUNDARY_RULE.get=function(){return Bi.MOD2_BOUNDARY_RULE},Object.defineProperties(Bi,fr);var Cn=function(){};Cn.prototype.isInBoundary=function(s){return s%2==1},Cn.prototype.interfaces_=function(){return[Bi]},Cn.prototype.getClass=function(){return Cn};var qn=function(){};qn.prototype.isInBoundary=function(s){return s>0},qn.prototype.interfaces_=function(){return[Bi]},qn.prototype.getClass=function(){return qn};var hi=function(){};hi.prototype.isInBoundary=function(s){return s>1},hi.prototype.interfaces_=function(){return[Bi]},hi.prototype.getClass=function(){return hi};var Di=function(){};Di.prototype.isInBoundary=function(s){return 1===s},Di.prototype.interfaces_=function(){return[Bi]},Di.prototype.getClass=function(){return Di};var Mr=function(){};Mr.prototype.add=function(){},Mr.prototype.addAll=function(){},Mr.prototype.isEmpty=function(){},Mr.prototype.iterator=function(){},Mr.prototype.size=function(){},Mr.prototype.toArray=function(){},Mr.prototype.remove=function(){},(me.prototype=new Error).name="IndexOutOfBoundsException";var wi=function(){};wi.prototype.hasNext=function(){},wi.prototype.next=function(){},wi.prototype.remove=function(){};var nr=function(s){function l(){s.apply(this,arguments)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.get=function(){},l.prototype.set=function(){},l.prototype.isEmpty=function(){},l}(Mr);(Ae.prototype=new Error).name="NoSuchElementException";var dn=function(s){function l(){s.call(this),this.array_=[],arguments[0]instanceof Mr&&this.addAll(arguments[0])}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.ensureCapacity=function(){},l.prototype.interfaces_=function(){return[s,Mr]},l.prototype.add=function(m){return 1===arguments.length?this.array_.push(m):this.array_.splice(arguments[0],arguments[1]),!0},l.prototype.clear=function(){this.array_=[]},l.prototype.addAll=function(m){for(var v=m.iterator();v.hasNext();)this.add(v.next());return!0},l.prototype.set=function(m,v){var C=this.array_[m];return this.array_[m]=v,C},l.prototype.iterator=function(){return new wa(this)},l.prototype.get=function(m){if(m<0||m>=this.size())throw new me;return this.array_[m]},l.prototype.isEmpty=function(){return 0===this.array_.length},l.prototype.size=function(){return this.array_.length},l.prototype.toArray=function(){for(var m=[],v=0,C=this.array_.length;v<C;v++)m.push(this.array_[v]);return m},l.prototype.remove=function(m){for(var v=!1,C=0,k=this.array_.length;C<k;C++)if(this.array_[C]===m){this.array_.splice(C,1),v=!0;break}return v},l}(nr),wa=function(s){function l(m){s.call(this),this.arrayList_=m,this.position_=0}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new Ae;return this.arrayList_.get(this.position_++)},l.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},l.prototype.set=function(m){return this.arrayList_.set(this.position_-1,m)},l.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},l}(wi),Lr=function(s){function l(){if(s.call(this),0!==arguments.length)if(1===arguments.length){var v=arguments[0];this.ensureCapacity(v.length),this.add(v,!0)}else if(2===arguments.length){var C=arguments[0],k=arguments[1];this.ensureCapacity(C.length),this.add(C,k)}}s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l;var m={coordArrayType:{configurable:!0}};return m.coordArrayType.get=function(){return new Array(0).fill(null)},l.prototype.getCoordinate=function(v){return this.get(v)},l.prototype.addAll=function(){if(2===arguments.length){for(var C=arguments[1],k=!1,G=arguments[0].iterator();G.hasNext();)this.add(G.next(),C),k=!0;return k}return s.prototype.addAll.apply(this,arguments)},l.prototype.clone=function(){for(var v=s.prototype.clone.call(this),C=0;C<this.size();C++)v.add(C,this.get(C).copy());return v},l.prototype.toCoordinateArray=function(){return this.toArray(l.coordArrayType)},l.prototype.add=function(){if(1===arguments.length)s.prototype.add.call(this,arguments[0]);else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1],!0),!0;if(arguments[0]instanceof se&&"boolean"==typeof arguments[1]){var G=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(G))return null;s.prototype.add.call(this,G)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1]),!0}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var pe=arguments[0],ot=arguments[1];if(arguments[2])for(var nt=0;nt<pe.length;nt++)this.add(pe[nt],ot);else for(var wt=pe.length-1;wt>=0;wt--)this.add(pe[wt],ot);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof se){var Pt=arguments[0],$t=arguments[1];if(!arguments[2]){var Ft=this.size();if(Ft>0&&(Pt>0&&this.get(Pt-1).equals2D($t)||Pt<Ft&&this.get(Pt).equals2D($t)))return null}s.prototype.add.call(this,Pt,$t)}}else if(4===arguments.length){var En=arguments[0],Dn=arguments[1],Ln=arguments[2],Zi=arguments[3],Qi=1;Ln>Zi&&(Qi=-1);for(var ki=Ln;ki!==Zi;ki+=Qi)this.add(En[ki],Dn);return!0}},l.prototype.closeRing=function(){this.size()>0&&this.add(new se(this.get(0)),!1)},l.prototype.interfaces_=function(){return[]},l.prototype.getClass=function(){return l},Object.defineProperties(l,m),l}(dn),fi=function(){},ar={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};ar.ForwardComparator.get=function(){return Zs},ar.BidirectionalComparator.get=function(){return Os},ar.coordArrayType.get=function(){return new Array(0).fill(null)},fi.prototype.interfaces_=function(){return[]},fi.prototype.getClass=function(){return fi},fi.isRing=function(s){return!(s.length<4||!s[0].equals2D(s[s.length-1]))},fi.ptNotInList=function(s,l){for(var m=0;m<s.length;m++){var v=s[m];if(fi.indexOf(v,l)<0)return v}return null},fi.scroll=function(s,l){var m=fi.indexOf(l,s);if(m<0)return null;var v=new Array(s.length).fill(null);si.arraycopy(s,m,v,0,s.length-m),si.arraycopy(s,0,v,s.length-m,m),si.arraycopy(v,0,s,0,s.length)},fi.equals=function(){if(2===arguments.length){var s=arguments[0],l=arguments[1];if(s===l)return!0;if(null===s||null===l||s.length!==l.length)return!1;for(var m=0;m<s.length;m++)if(!s[m].equals(l[m]))return!1;return!0}if(3===arguments.length){var v=arguments[0],C=arguments[1],k=arguments[2];if(v===C)return!0;if(null===v||null===C||v.length!==C.length)return!1;for(var G=0;G<v.length;G++)if(0!==k.compare(v[G],C[G]))return!1;return!0}},fi.intersection=function(s,l){for(var m=new Lr,v=0;v<s.length;v++)l.intersects(s[v])&&m.add(s[v],!0);return m.toCoordinateArray()},fi.hasRepeatedPoints=function(s){for(var l=1;l<s.length;l++)if(s[l-1].equals(s[l]))return!0;return!1},fi.removeRepeatedPoints=function(s){return fi.hasRepeatedPoints(s)?new Lr(s,!1).toCoordinateArray():s},fi.reverse=function(s){for(var l=s.length-1,m=Math.trunc(l/2),v=0;v<=m;v++){var C=s[v];s[v]=s[l-v],s[l-v]=C}},fi.removeNull=function(s){for(var l=0,m=0;m<s.length;m++)null!==s[m]&&l++;var v=new Array(l).fill(null);if(0===l)return v;for(var C=0,k=0;k<s.length;k++)null!==s[k]&&(v[C++]=s[k]);return v},fi.copyDeep=function(){if(1===arguments.length){for(var s=arguments[0],l=new Array(s.length).fill(null),m=0;m<s.length;m++)l[m]=new se(s[m]);return l}if(5===arguments.length)for(var v=arguments[0],C=arguments[1],k=arguments[2],G=arguments[3],J=arguments[4],fe=0;fe<J;fe++)k[G+fe]=new se(v[C+fe])},fi.isEqualReversed=function(s,l){for(var m=0;m<s.length;m++)if(0!==s[m].compareTo(l[s.length-m-1]))return!1;return!0},fi.envelope=function(s){for(var l=new hn,m=0;m<s.length;m++)l.expandToInclude(s[m]);return l},fi.toCoordinateArray=function(s){return s.toArray(fi.coordArrayType)},fi.atLeastNCoordinatesOrNothing=function(s,l){return l.length>=s?l:[]},fi.indexOf=function(s,l){for(var m=0;m<l.length;m++)if(s.equals(l[m]))return m;return-1},fi.increasingDirection=function(s){for(var l=0;l<Math.trunc(s.length/2);l++){var v=s[l].compareTo(s[s.length-1-l]);if(0!==v)return v}return 1},fi.compare=function(s,l){for(var m=0;m<s.length&&m<l.length;){var v=s[m].compareTo(l[m]);if(0!==v)return v;m++}return m<l.length?-1:m<s.length?1:0},fi.minCoordinate=function(s){for(var l=null,m=0;m<s.length;m++)(null===l||l.compareTo(s[m])>0)&&(l=s[m]);return l},fi.extract=function(s,l,m){l=Me.clamp(l,0,s.length);var v=(m=Me.clamp(m,-1,s.length))-l+1;m<0&&(v=0),l>=s.length&&(v=0),m<l&&(v=0);var C=new Array(v).fill(null);if(0===v)return C;for(var k=0,G=l;G<=m;G++)C[k++]=s[G];return C},Object.defineProperties(fi,ar);var Zs=function(){};Zs.prototype.compare=function(s,l){return fi.compare(s,l)},Zs.prototype.interfaces_=function(){return[Fe]},Zs.prototype.getClass=function(){return Zs};var Os=function(){};Os.prototype.compare=function(s,l){var m=s,v=l;if(m.length<v.length)return-1;if(m.length>v.length)return 1;if(0===m.length)return 0;var C=fi.compare(m,v);return fi.isEqualReversed(m,v)?0:C},Os.prototype.OLDcompare=function(s,l){var m=s,v=l;if(m.length<v.length)return-1;if(m.length>v.length)return 1;if(0===m.length)return 0;for(var C=fi.increasingDirection(m),k=fi.increasingDirection(v),G=C>0?0:m.length-1,J=k>0?0:m.length-1,fe=0;fe<m.length;fe++){var pe=m[G].compareTo(v[J]);if(0!==pe)return pe;G+=C,J+=k}return 0},Os.prototype.interfaces_=function(){return[Fe]},Os.prototype.getClass=function(){return Os};var na=function(){};na.prototype.get=function(){},na.prototype.put=function(){},na.prototype.size=function(){},na.prototype.values=function(){},na.prototype.entrySet=function(){};var ia=function(s){function l(){s.apply(this,arguments)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l}(na);(E.prototype=new Error).name="OperationNotSupported",(Se.prototype=new Mr).contains=function(){};var zs=function(s){function l(){s.call(this),this.array_=[],arguments[0]instanceof Mr&&this.addAll(arguments[0])}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.contains=function(m){for(var v=0,C=this.array_.length;v<C;v++)if(this.array_[v]===m)return!0;return!1},l.prototype.add=function(m){return!this.contains(m)&&(this.array_.push(m),!0)},l.prototype.addAll=function(m){for(var v=m.iterator();v.hasNext();)this.add(v.next());return!0},l.prototype.remove=function(m){throw new Error},l.prototype.size=function(){return this.array_.length},l.prototype.isEmpty=function(){return 0===this.array_.length},l.prototype.toArray=function(){for(var m=[],v=0,C=this.array_.length;v<C;v++)m.push(this.array_[v]);return m},l.prototype.iterator=function(){return new dc(this)},l}(Se),dc=function(s){function l(m){s.call(this),this.hashSet_=m,this.position_=0}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new Ae;return this.hashSet_.array_[this.position_++]},l.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},l.prototype.remove=function(){throw new E},l}(wi),rt=0;(Ke.prototype=new ia).get=function(s){for(var l=this.root_;null!==l;){var m=s.compareTo(l.key);if(m<0)l=l.left;else{if(!(m>0))return l.value;l=l.right}}return null},Ke.prototype.put=function(s,l){if(null===this.root_)return this.root_={key:s,value:l,left:null,right:null,parent:null,color:rt,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var m,v,C=this.root_;do{if(m=C,(v=s.compareTo(C.key))<0)C=C.left;else{if(!(v>0)){var k=C.value;return C.value=l,k}C=C.right}}while(null!==C);var G={key:s,left:null,right:null,value:l,parent:m,color:rt,getValue:function(){return this.value},getKey:function(){return this.key}};return v<0?m.left=G:m.right=G,this.fixAfterInsertion(G),this.size_++,null},Ke.prototype.fixAfterInsertion=function(s){for(s.color=1;null!=s&&s!==this.root_&&1===s.parent.color;)if(Oe(s)===xe(Oe(Oe(s)))){var l=ct(Oe(Oe(s)));1===he(l)?(Ne(Oe(s),rt),Ne(l,rt),Ne(Oe(Oe(s)),1),s=Oe(Oe(s))):(s===ct(Oe(s))&&(s=Oe(s),this.rotateLeft(s)),Ne(Oe(s),rt),Ne(Oe(Oe(s)),1),this.rotateRight(Oe(Oe(s))))}else{var m=xe(Oe(Oe(s)));1===he(m)?(Ne(Oe(s),rt),Ne(m,rt),Ne(Oe(Oe(s)),1),s=Oe(Oe(s))):(s===xe(Oe(s))&&(s=Oe(s),this.rotateRight(s)),Ne(Oe(s),rt),Ne(Oe(Oe(s)),1),this.rotateLeft(Oe(Oe(s))))}this.root_.color=rt},Ke.prototype.values=function(){var s=new dn,l=this.getFirstEntry();if(null!==l)for(s.add(l.value);null!==(l=Ke.successor(l));)s.add(l.value);return s},Ke.prototype.entrySet=function(){var s=new zs,l=this.getFirstEntry();if(null!==l)for(s.add(l);null!==(l=Ke.successor(l));)s.add(l);return s},Ke.prototype.rotateLeft=function(s){if(null!=s){var l=s.right;s.right=l.left,null!=l.left&&(l.left.parent=s),l.parent=s.parent,null===s.parent?this.root_=l:s.parent.left===s?s.parent.left=l:s.parent.right=l,l.left=s,s.parent=l}},Ke.prototype.rotateRight=function(s){if(null!=s){var l=s.left;s.left=l.right,null!=l.right&&(l.right.parent=s),l.parent=s.parent,null===s.parent?this.root_=l:s.parent.right===s?s.parent.right=l:s.parent.left=l,l.right=s,s.parent=l}},Ke.prototype.getFirstEntry=function(){var s=this.root_;if(null!=s)for(;null!=s.left;)s=s.left;return s},Ke.successor=function(s){if(null===s)return null;if(null!==s.right){for(var l=s.right;null!==l.left;)l=l.left;return l}for(var m=s.parent,v=s;null!==m&&v===m.right;)v=m,m=m.parent;return m},Ke.prototype.size=function(){return this.size_};var le=function(){};le.prototype.interfaces_=function(){return[]},le.prototype.getClass=function(){return le},Te.prototype=new Se,(at.prototype=new Te).contains=function(s){for(var l=0,m=this.array_.length;l<m;l++)if(0===this.array_[l].compareTo(s))return!0;return!1},at.prototype.add=function(s){if(this.contains(s))return!1;for(var l=0,m=this.array_.length;l<m;l++)if(1===this.array_[l].compareTo(s))return this.array_.splice(l,0,s),!0;return this.array_.push(s),!0},at.prototype.addAll=function(s){for(var l=s.iterator();l.hasNext();)this.add(l.next());return!0},at.prototype.remove=function(s){throw new E},at.prototype.size=function(){return this.array_.length},at.prototype.isEmpty=function(){return 0===this.array_.length},at.prototype.toArray=function(){for(var s=[],l=0,m=this.array_.length;l<m;l++)s.push(this.array_[l]);return s},at.prototype.iterator=function(){return new Ee(this)};var Ee=function(s){this.treeSet_=s,this.position_=0};Ee.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new Ae;return this.treeSet_.array_[this.position_++]},Ee.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Ee.prototype.remove=function(){throw new E};var Ge=function(){};Ge.sort=function(){var s,l,m,C=arguments[0];if(1===arguments.length)C.sort(function(G,J){return G.compareTo(J)});else if(2===arguments.length)m=arguments[1],C.sort(function(G,J){return m.compare(G,J)});else if(3===arguments.length){(l=C.slice(arguments[1],arguments[2])).sort();var k=C.slice(0,arguments[1]).concat(l,C.slice(arguments[2],C.length));for(C.splice(0,C.length),s=0;s<k.length;s++)C.push(k[s])}else if(4===arguments.length)for(l=C.slice(arguments[1],arguments[2]),m=arguments[3],l.sort(function(G,J){return m.compare(G,J)}),k=C.slice(0,arguments[1]).concat(l,C.slice(arguments[2],C.length)),C.splice(0,C.length),s=0;s<k.length;s++)C.push(k[s])},Ge.asList=function(s){for(var l=new dn,m=0,v=s.length;m<v;m++)l.add(s[m]);return l};var qe=function(){},bt={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};bt.P.get=function(){return 0},bt.L.get=function(){return 1},bt.A.get=function(){return 2},bt.FALSE.get=function(){return-1},bt.TRUE.get=function(){return-2},bt.DONTCARE.get=function(){return-3},bt.SYM_FALSE.get=function(){return"F"},bt.SYM_TRUE.get=function(){return"T"},bt.SYM_DONTCARE.get=function(){return"*"},bt.SYM_P.get=function(){return"0"},bt.SYM_L.get=function(){return"1"},bt.SYM_A.get=function(){return"2"},qe.prototype.interfaces_=function(){return[]},qe.prototype.getClass=function(){return qe},qe.toDimensionSymbol=function(s){switch(s){case qe.FALSE:return qe.SYM_FALSE;case qe.TRUE:return qe.SYM_TRUE;case qe.DONTCARE:return qe.SYM_DONTCARE;case qe.P:return qe.SYM_P;case qe.L:return qe.SYM_L;case qe.A:return qe.SYM_A}throw new ye("Unknown dimension value: "+s)},qe.toDimensionValue=function(s){switch(Mt.toUpperCase(s)){case qe.SYM_FALSE:return qe.FALSE;case qe.SYM_TRUE:return qe.TRUE;case qe.SYM_DONTCARE:return qe.DONTCARE;case qe.SYM_P:return qe.P;case qe.SYM_L:return qe.L;case qe.SYM_A:return qe.A}throw new ye("Unknown dimension symbol: "+s)},Object.defineProperties(qe,bt);var Ot=function(){};Ot.prototype.filter=function(s){},Ot.prototype.interfaces_=function(){return[]},Ot.prototype.getClass=function(){return Ot};var Dt=function(){};Dt.prototype.filter=function(s,l){},Dt.prototype.isDone=function(){},Dt.prototype.isGeometryChanged=function(){},Dt.prototype.interfaces_=function(){return[]},Dt.prototype.getClass=function(){return Dt};var vt=function(s){function l(v,C){if(s.call(this,C),this._geometries=v||[],s.hasNullElements(this._geometries))throw new ye("geometries must not contain null elements")}s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l;var m={serialVersionUID:{configurable:!0}};return l.prototype.computeEnvelopeInternal=function(){for(var v=new hn,C=0;C<this._geometries.length;C++)v.expandToInclude(this._geometries[C].getEnvelopeInternal());return v},l.prototype.getGeometryN=function(v){return this._geometries[v]},l.prototype.getSortIndex=function(){return s.SORTINDEX_GEOMETRYCOLLECTION},l.prototype.getCoordinates=function(){for(var v=new Array(this.getNumPoints()).fill(null),C=-1,k=0;k<this._geometries.length;k++)for(var G=this._geometries[k].getCoordinates(),J=0;J<G.length;J++)v[++C]=G[J];return v},l.prototype.getArea=function(){for(var v=0,C=0;C<this._geometries.length;C++)v+=this._geometries[C].getArea();return v},l.prototype.equalsExact=function(){if(2===arguments.length){var v=arguments[0],C=arguments[1];if(!this.isEquivalentClass(v))return!1;var k=v;if(this._geometries.length!==k._geometries.length)return!1;for(var G=0;G<this._geometries.length;G++)if(!this._geometries[G].equalsExact(k._geometries[G],C))return!1;return!0}return s.prototype.equalsExact.apply(this,arguments)},l.prototype.normalize=function(){for(var v=0;v<this._geometries.length;v++)this._geometries[v].normalize();Ge.sort(this._geometries)},l.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},l.prototype.getBoundaryDimension=function(){for(var v=qe.FALSE,C=0;C<this._geometries.length;C++)v=Math.max(v,this._geometries[C].getBoundaryDimension());return v},l.prototype.getDimension=function(){for(var v=qe.FALSE,C=0;C<this._geometries.length;C++)v=Math.max(v,this._geometries[C].getDimension());return v},l.prototype.getLength=function(){for(var v=0,C=0;C<this._geometries.length;C++)v+=this._geometries[C].getLength();return v},l.prototype.getNumPoints=function(){for(var v=0,C=0;C<this._geometries.length;C++)v+=this._geometries[C].getNumPoints();return v},l.prototype.getNumGeometries=function(){return this._geometries.length},l.prototype.reverse=function(){for(var C=new Array(this._geometries.length).fill(null),k=0;k<this._geometries.length;k++)C[k]=this._geometries[k].reverse();return this.getFactory().createGeometryCollection(C)},l.prototype.compareToSameClass=function(){if(1===arguments.length){var v=arguments[0],C=new at(Ge.asList(this._geometries)),k=new at(Ge.asList(v._geometries));return this.compare(C,k)}if(2===arguments.length){for(var J=arguments[1],fe=arguments[0],pe=this.getNumGeometries(),ot=fe.getNumGeometries(),nt=0;nt<pe&&nt<ot;){var wt=this.getGeometryN(nt),Pt=fe.getGeometryN(nt),$t=wt.compareToSameClass(Pt,J);if(0!==$t)return $t;nt++}return nt<pe?1:nt<ot?-1:0}},l.prototype.apply=function(){if(dt(arguments[0],Ti))for(var v=arguments[0],C=0;C<this._geometries.length;C++)this._geometries[C].apply(v);else if(dt(arguments[0],Dt)){var k=arguments[0];if(0===this._geometries.length)return null;for(var G=0;G<this._geometries.length&&(this._geometries[G].apply(k),!k.isDone());G++);k.isGeometryChanged()&&this.geometryChanged()}else if(dt(arguments[0],Ot)){var J=arguments[0];J.filter(this);for(var fe=0;fe<this._geometries.length;fe++)this._geometries[fe].apply(J)}else if(dt(arguments[0],In)){var pe=arguments[0];pe.filter(this);for(var ot=0;ot<this._geometries.length;ot++)this._geometries[ot].apply(pe)}},l.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),ke.shouldNeverReachHere(),null},l.prototype.clone=function(){var v=s.prototype.clone.call(this);v._geometries=new Array(this._geometries.length).fill(null);for(var C=0;C<this._geometries.length;C++)v._geometries[C]=this._geometries[C].clone();return v},l.prototype.getGeometryType=function(){return"GeometryCollection"},l.prototype.copy=function(){for(var v=new Array(this._geometries.length).fill(null),C=0;C<v.length;C++)v[C]=this._geometries[C].copy();return new l(v,this._factory)},l.prototype.isEmpty=function(){for(var v=0;v<this._geometries.length;v++)if(!this._geometries[v].isEmpty())return!1;return!0},l.prototype.interfaces_=function(){return[]},l.prototype.getClass=function(){return l},m.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(l,m),l}(sn),Lt=function(s){function l(){s.apply(this,arguments)}s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l;var m={serialVersionUID:{configurable:!0}};return l.prototype.getSortIndex=function(){return sn.SORTINDEX_MULTILINESTRING},l.prototype.equalsExact=function(){if(2===arguments.length){var v=arguments[0],C=arguments[1];return!!this.isEquivalentClass(v)&&s.prototype.equalsExact.call(this,v,C)}return s.prototype.equalsExact.apply(this,arguments)},l.prototype.getBoundaryDimension=function(){return this.isClosed()?qe.FALSE:0},l.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var v=0;v<this._geometries.length;v++)if(!this._geometries[v].isClosed())return!1;return!0},l.prototype.getDimension=function(){return 1},l.prototype.reverse=function(){for(var v=this._geometries.length,C=new Array(v).fill(null),k=0;k<this._geometries.length;k++)C[v-1-k]=this._geometries[k].reverse();return this.getFactory().createMultiLineString(C)},l.prototype.getBoundary=function(){return new Qt(this).getBoundary()},l.prototype.getGeometryType=function(){return"MultiLineString"},l.prototype.copy=function(){for(var v=new Array(this._geometries.length).fill(null),C=0;C<v.length;C++)v[C]=this._geometries[C].copy();return new l(v,this._factory)},l.prototype.interfaces_=function(){return[le]},l.prototype.getClass=function(){return l},m.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(l,m),l}(vt),Qt=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var s=arguments[0],l=Bi.MOD2_BOUNDARY_RULE;this._geom=s,this._geomFact=s.getFactory(),this._bnRule=l}else if(2===arguments.length){var m=arguments[0],v=arguments[1];this._geom=m,this._geomFact=m.getFactory(),this._bnRule=v}};Qt.prototype.boundaryMultiLineString=function(s){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var l=this.computeBoundaryCoordinates(s);return 1===l.length?this._geomFact.createPoint(l[0]):this._geomFact.createMultiPointFromCoords(l)},Qt.prototype.getBoundary=function(){return this._geom instanceof xn?this.boundaryLineString(this._geom):this._geom instanceof Lt?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Qt.prototype.boundaryLineString=function(s){return this._geom.isEmpty()?this.getEmptyMultiPoint():s.isClosed()?this._bnRule.isInBoundary(2)?s.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([s.getStartPoint(),s.getEndPoint()])},Qt.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Qt.prototype.computeBoundaryCoordinates=function(s){var l=new dn;this._endpointMap=new Ke;for(var m=0;m<s.getNumGeometries();m++){var v=s.getGeometryN(m);0!==v.getNumPoints()&&(this.addEndpoint(v.getCoordinateN(0)),this.addEndpoint(v.getCoordinateN(v.getNumPoints()-1)))}for(var C=this._endpointMap.entrySet().iterator();C.hasNext();){var k=C.next(),G=k.getValue().count;this._bnRule.isInBoundary(G)&&l.add(k.getKey())}return fi.toCoordinateArray(l)},Qt.prototype.addEndpoint=function(s){var l=this._endpointMap.get(s);null===l&&(l=new mn,this._endpointMap.put(s,l)),l.count++},Qt.prototype.interfaces_=function(){return[]},Qt.prototype.getClass=function(){return Qt},Qt.getBoundary=function(){return 1===arguments.length?new Qt(arguments[0]).getBoundary():2===arguments.length?new Qt(arguments[0],arguments[1]).getBoundary():void 0};var mn=function(){this.count=null};mn.prototype.interfaces_=function(){return[]},mn.prototype.getClass=function(){return mn};var Wt=function(){},li={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Wt.prototype.interfaces_=function(){return[]},Wt.prototype.getClass=function(){return Wt},Wt.chars=function(s,l){for(var m=new Array(l).fill(null),v=0;v<l;v++)m[v]=s;return String(m)},Wt.getStackTrace=function(){if(1===arguments.length){var s=arguments[0],l=new function(){},m=new function(){}(l);return s.printStackTrace(m),l.toString()}if(2===arguments.length){for(var C=arguments[1],k="",G=new function(){}(new function(){}(Wt.getStackTrace(arguments[0]))),J=0;J<C;J++)try{k+=G.readLine()+Wt.NEWLINE}catch(fe){if(!(fe instanceof Ct))throw fe;ke.shouldNeverReachHere()}return k}},Wt.split=function(s,l){for(var m=l.length,v=new dn,C=""+s,k=C.indexOf(l);k>=0;){var G=C.substring(0,k);v.add(G),k=(C=C.substring(k+m)).indexOf(l)}C.length>0&&v.add(C);for(var J=new Array(v.size()).fill(null),fe=0;fe<J.length;fe++)J[fe]=v.get(fe);return J},Wt.toString=function(){if(1===arguments.length)return Wt.SIMPLE_ORDINATE_FORMAT.format(arguments[0])},Wt.spaces=function(s){return Wt.chars(" ",s)},li.NEWLINE.get=function(){return si.getProperty("line.separator")},li.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Wt,li);var Pn=function(){};Pn.prototype.interfaces_=function(){return[]},Pn.prototype.getClass=function(){return Pn},Pn.copyCoord=function(s,l,m,v){for(var C=Math.min(s.getDimension(),m.getDimension()),k=0;k<C;k++)m.setOrdinate(v,k,s.getOrdinate(l,k))},Pn.isRing=function(s){var l=s.size();return 0===l||!(l<=3)&&s.getOrdinate(0,Gt.X)===s.getOrdinate(l-1,Gt.X)&&s.getOrdinate(0,Gt.Y)===s.getOrdinate(l-1,Gt.Y)},Pn.isEqual=function(s,l){var m=s.size();if(m!==l.size())return!1;for(var v=Math.min(s.getDimension(),l.getDimension()),C=0;C<m;C++)for(var k=0;k<v;k++){var G=s.getOrdinate(C,k),J=l.getOrdinate(C,k);if(!(s.getOrdinate(C,k)===l.getOrdinate(C,k)||ce.isNaN(G)&&ce.isNaN(J)))return!1}return!0},Pn.extend=function(s,l,m){var v=s.create(m,l.getDimension()),C=l.size();if(Pn.copy(l,0,v,0,C),C>0)for(var k=C;k<m;k++)Pn.copy(l,C-1,v,k,1);return v},Pn.reverse=function(s){for(var l=s.size()-1,m=Math.trunc(l/2),v=0;v<=m;v++)Pn.swap(s,v,l-v)},Pn.swap=function(s,l,m){if(l===m)return null;for(var v=0;v<s.getDimension();v++){var C=s.getOrdinate(l,v);s.setOrdinate(l,v,s.getOrdinate(m,v)),s.setOrdinate(m,v,C)}},Pn.copy=function(s,l,m,v,C){for(var k=0;k<C;k++)Pn.copyCoord(s,l+k,m,v+k)},Pn.toString=function(){if(1===arguments.length){var s=arguments[0],l=s.size();if(0===l)return"()";var m=s.getDimension(),v=new $e;v.append("(");for(var C=0;C<l;C++){C>0&&v.append(" ");for(var k=0;k<m;k++)k>0&&v.append(","),v.append(Wt.toString(s.getOrdinate(C,k)))}return v.append(")"),v.toString()}},Pn.ensureValidRing=function(s,l){var m=l.size();return 0===m?l:m<=3?Pn.createClosedRing(s,l,4):l.getOrdinate(0,Gt.X)===l.getOrdinate(m-1,Gt.X)&&l.getOrdinate(0,Gt.Y)===l.getOrdinate(m-1,Gt.Y)?l:Pn.createClosedRing(s,l,m+1)},Pn.createClosedRing=function(s,l,m){var v=s.create(m,l.getDimension()),C=l.size();Pn.copy(l,0,v,0,C);for(var k=C;k<m;k++)Pn.copy(l,0,v,k,1);return v};var xn=function(s){function l(v,C){s.call(this,C),this._points=null,this.init(v)}s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l;var m={serialVersionUID:{configurable:!0}};return l.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new hn:this._points.expandEnvelope(new hn)},l.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},l.prototype.getSortIndex=function(){return s.SORTINDEX_LINESTRING},l.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},l.prototype.equalsExact=function(){if(2===arguments.length){var v=arguments[0],C=arguments[1];if(!this.isEquivalentClass(v))return!1;var k=v;if(this._points.size()!==k._points.size())return!1;for(var G=0;G<this._points.size();G++)if(!this.equal(this._points.getCoordinate(G),k._points.getCoordinate(G),C))return!1;return!0}return s.prototype.equalsExact.apply(this,arguments)},l.prototype.normalize=function(){for(var v=0;v<Math.trunc(this._points.size()/2);v++){var C=this._points.size()-1-v;if(!this._points.getCoordinate(v).equals(this._points.getCoordinate(C)))return this._points.getCoordinate(v).compareTo(this._points.getCoordinate(C))>0&&Pn.reverse(this._points),null}},l.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},l.prototype.getBoundaryDimension=function(){return this.isClosed()?qe.FALSE:0},l.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},l.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},l.prototype.getDimension=function(){return 1},l.prototype.getLength=function(){return mt.computeLength(this._points)},l.prototype.getNumPoints=function(){return this._points.size()},l.prototype.reverse=function(){var v=this._points.copy();return Pn.reverse(v),this.getFactory().createLineString(v)},l.prototype.compareToSameClass=function(){if(1===arguments.length){for(var v=arguments[0],C=0,k=0;C<this._points.size()&&k<v._points.size();){var G=this._points.getCoordinate(C).compareTo(v._points.getCoordinate(k));if(0!==G)return G;C++,k++}return C<this._points.size()?1:k<v._points.size()?-1:0}if(2===arguments.length)return arguments[1].compare(this._points,arguments[0]._points)},l.prototype.apply=function(){if(dt(arguments[0],Ti))for(var v=arguments[0],C=0;C<this._points.size();C++)v.filter(this._points.getCoordinate(C));else if(dt(arguments[0],Dt)){var k=arguments[0];if(0===this._points.size())return null;for(var G=0;G<this._points.size()&&(k.filter(this._points,G),!k.isDone());G++);k.isGeometryChanged()&&this.geometryChanged()}else(dt(arguments[0],Ot)||dt(arguments[0],In))&&arguments[0].filter(this)},l.prototype.getBoundary=function(){return new Qt(this).getBoundary()},l.prototype.isEquivalentClass=function(v){return v instanceof l},l.prototype.clone=function(){var v=s.prototype.clone.call(this);return v._points=this._points.clone(),v},l.prototype.getCoordinateN=function(v){return this._points.getCoordinate(v)},l.prototype.getGeometryType=function(){return"LineString"},l.prototype.copy=function(){return new l(this._points.copy(),this._factory)},l.prototype.getCoordinateSequence=function(){return this._points},l.prototype.isEmpty=function(){return 0===this._points.size()},l.prototype.init=function(v){if(null===v&&(v=this.getFactory().getCoordinateSequenceFactory().create([])),1===v.size())throw new ye("Invalid number of points in LineString (found "+v.size()+" - must be 0 or >= 2)");this._points=v},l.prototype.isCoordinate=function(v){for(var C=0;C<this._points.size();C++)if(this._points.getCoordinate(C).equals(v))return!0;return!1},l.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},l.prototype.getPointN=function(v){return this.getFactory().createPoint(this._points.getCoordinate(v))},l.prototype.interfaces_=function(){return[le]},l.prototype.getClass=function(){return l},m.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(l,m),l}(sn),Ii=function(){};Ii.prototype.interfaces_=function(){return[]},Ii.prototype.getClass=function(){return Ii};var mi=function(s){function l(v,C){s.call(this,C),this._coordinates=v||null,this.init(this._coordinates)}s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l;var m={serialVersionUID:{configurable:!0}};return l.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new hn;var v=new hn;return v.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),v},l.prototype.getSortIndex=function(){return s.SORTINDEX_POINT},l.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},l.prototype.equalsExact=function(){if(2===arguments.length){var v=arguments[0],C=arguments[1];return!!this.isEquivalentClass(v)&&(!(!this.isEmpty()||!v.isEmpty())||this.isEmpty()===v.isEmpty()&&this.equal(v.getCoordinate(),this.getCoordinate(),C))}return s.prototype.equalsExact.apply(this,arguments)},l.prototype.normalize=function(){},l.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},l.prototype.getBoundaryDimension=function(){return qe.FALSE},l.prototype.getDimension=function(){return 0},l.prototype.getNumPoints=function(){return this.isEmpty()?0:1},l.prototype.reverse=function(){return this.copy()},l.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},l.prototype.compareToSameClass=function(){if(1===arguments.length){var v=arguments[0];return this.getCoordinate().compareTo(v.getCoordinate())}if(2===arguments.length)return arguments[1].compare(this._coordinates,arguments[0]._coordinates)},l.prototype.apply=function(){if(dt(arguments[0],Ti)){var v=arguments[0];if(this.isEmpty())return null;v.filter(this.getCoordinate())}else if(dt(arguments[0],Dt)){var C=arguments[0];if(this.isEmpty())return null;C.filter(this._coordinates,0),C.isGeometryChanged()&&this.geometryChanged()}else(dt(arguments[0],Ot)||dt(arguments[0],In))&&arguments[0].filter(this)},l.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},l.prototype.clone=function(){var v=s.prototype.clone.call(this);return v._coordinates=this._coordinates.clone(),v},l.prototype.getGeometryType=function(){return"Point"},l.prototype.copy=function(){return new l(this._coordinates.copy(),this._factory)},l.prototype.getCoordinateSequence=function(){return this._coordinates},l.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},l.prototype.isEmpty=function(){return 0===this._coordinates.size()},l.prototype.init=function(v){null===v&&(v=this.getFactory().getCoordinateSequenceFactory().create([])),ke.isTrue(v.size()<=1),this._coordinates=v},l.prototype.isSimple=function(){return!0},l.prototype.interfaces_=function(){return[Ii]},l.prototype.getClass=function(){return l},m.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(l,m),l}(sn),lr=function(){};lr.prototype.interfaces_=function(){return[]},lr.prototype.getClass=function(){return lr};var ii=function(s){function l(v,C,k){if(s.call(this,k),this._shell=null,this._holes=null,null===v&&(v=this.getFactory().createLinearRing()),null===C&&(C=[]),s.hasNullElements(C))throw new ye("holes must not contain null elements");if(v.isEmpty()&&s.hasNonEmptyElements(C))throw new ye("shell is empty but holes are not");this._shell=v,this._holes=C}s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l;var m={serialVersionUID:{configurable:!0}};return l.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},l.prototype.getSortIndex=function(){return s.SORTINDEX_POLYGON},l.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var v=new Array(this.getNumPoints()).fill(null),C=-1,k=this._shell.getCoordinates(),G=0;G<k.length;G++)v[++C]=k[G];for(var J=0;J<this._holes.length;J++)for(var fe=this._holes[J].getCoordinates(),pe=0;pe<fe.length;pe++)v[++C]=fe[pe];return v},l.prototype.getArea=function(){var v=0;v+=Math.abs(mt.signedArea(this._shell.getCoordinateSequence()));for(var C=0;C<this._holes.length;C++)v-=Math.abs(mt.signedArea(this._holes[C].getCoordinateSequence()));return v},l.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing()||null===this._shell||5!==this._shell.getNumPoints())return!1;for(var v=this._shell.getCoordinateSequence(),C=this.getEnvelopeInternal(),k=0;k<5;k++){var G=v.getX(k);if(G!==C.getMinX()&&G!==C.getMaxX())return!1;var J=v.getY(k);if(J!==C.getMinY()&&J!==C.getMaxY())return!1}for(var fe=v.getX(0),pe=v.getY(0),ot=1;ot<=4;ot++){var nt=v.getX(ot),wt=v.getY(ot);if(nt!==fe==(wt!==pe))return!1;fe=nt,pe=wt}return!0},l.prototype.equalsExact=function(){if(2===arguments.length){var v=arguments[0],C=arguments[1];if(!this.isEquivalentClass(v))return!1;var k=v;if(!this._shell.equalsExact(k._shell,C)||this._holes.length!==k._holes.length)return!1;for(var fe=0;fe<this._holes.length;fe++)if(!this._holes[fe].equalsExact(k._holes[fe],C))return!1;return!0}return s.prototype.equalsExact.apply(this,arguments)},l.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var v=0;v<this._holes.length;v++)this.normalize(this._holes[v],!1);Ge.sort(this._holes)}else if(2===arguments.length){var C=arguments[0],k=arguments[1];if(C.isEmpty())return null;var G=new Array(C.getCoordinates().length-1).fill(null);si.arraycopy(C.getCoordinates(),0,G,0,G.length);var J=fi.minCoordinate(C.getCoordinates());fi.scroll(G,J),si.arraycopy(G,0,C.getCoordinates(),0,G.length),C.getCoordinates()[G.length]=G[0],mt.isCCW(C.getCoordinates())===k&&fi.reverse(C.getCoordinates())}},l.prototype.getCoordinate=function(){return this._shell.getCoordinate()},l.prototype.getNumInteriorRing=function(){return this._holes.length},l.prototype.getBoundaryDimension=function(){return 1},l.prototype.getDimension=function(){return 2},l.prototype.getLength=function(){var v=0;v+=this._shell.getLength();for(var C=0;C<this._holes.length;C++)v+=this._holes[C].getLength();return v},l.prototype.getNumPoints=function(){for(var v=this._shell.getNumPoints(),C=0;C<this._holes.length;C++)v+=this._holes[C].getNumPoints();return v},l.prototype.reverse=function(){var v=this.copy();v._shell=this._shell.copy().reverse(),v._holes=new Array(this._holes.length).fill(null);for(var C=0;C<this._holes.length;C++)v._holes[C]=this._holes[C].copy().reverse();return v},l.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},l.prototype.compareToSameClass=function(){if(1===arguments.length)return this._shell.compareToSameClass(arguments[0]._shell);if(2===arguments.length){var J=arguments[1],fe=arguments[0],nt=this._shell.compareToSameClass(fe._shell,J);if(0!==nt)return nt;for(var wt=this.getNumInteriorRing(),Pt=fe.getNumInteriorRing(),$t=0;$t<wt&&$t<Pt;){var Ft=this.getInteriorRingN($t),En=fe.getInteriorRingN($t),Dn=Ft.compareToSameClass(En,J);if(0!==Dn)return Dn;$t++}return $t<wt?1:$t<Pt?-1:0}},l.prototype.apply=function(v){if(dt(v,Ti)){this._shell.apply(v);for(var C=0;C<this._holes.length;C++)this._holes[C].apply(v)}else if(dt(v,Dt)){if(this._shell.apply(v),!v.isDone())for(var k=0;k<this._holes.length&&(this._holes[k].apply(v),!v.isDone());k++);v.isGeometryChanged()&&this.geometryChanged()}else if(dt(v,Ot))v.filter(this);else if(dt(v,In)){v.filter(this),this._shell.apply(v);for(var G=0;G<this._holes.length;G++)this._holes[G].apply(v)}},l.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var v=new Array(this._holes.length+1).fill(null);v[0]=this._shell;for(var C=0;C<this._holes.length;C++)v[C+1]=this._holes[C];return v.length<=1?this.getFactory().createLinearRing(v[0].getCoordinateSequence()):this.getFactory().createMultiLineString(v)},l.prototype.clone=function(){var v=s.prototype.clone.call(this);v._shell=this._shell.clone(),v._holes=new Array(this._holes.length).fill(null);for(var C=0;C<this._holes.length;C++)v._holes[C]=this._holes[C].clone();return v},l.prototype.getGeometryType=function(){return"Polygon"},l.prototype.copy=function(){for(var v=this._shell.copy(),C=new Array(this._holes.length).fill(null),k=0;k<C.length;k++)C[k]=this._holes[k].copy();return new l(v,C,this._factory)},l.prototype.getExteriorRing=function(){return this._shell},l.prototype.isEmpty=function(){return this._shell.isEmpty()},l.prototype.getInteriorRingN=function(v){return this._holes[v]},l.prototype.interfaces_=function(){return[lr]},l.prototype.getClass=function(){return l},m.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(l,m),l}(sn),Xn=function(s){function l(){s.apply(this,arguments)}s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l;var m={serialVersionUID:{configurable:!0}};return l.prototype.getSortIndex=function(){return sn.SORTINDEX_MULTIPOINT},l.prototype.isValid=function(){return!0},l.prototype.equalsExact=function(){if(2===arguments.length){var v=arguments[0],C=arguments[1];return!!this.isEquivalentClass(v)&&s.prototype.equalsExact.call(this,v,C)}return s.prototype.equalsExact.apply(this,arguments)},l.prototype.getCoordinate=function(){return 1===arguments.length?this._geometries[arguments[0]].getCoordinate():s.prototype.getCoordinate.apply(this,arguments)},l.prototype.getBoundaryDimension=function(){return qe.FALSE},l.prototype.getDimension=function(){return 0},l.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},l.prototype.getGeometryType=function(){return"MultiPoint"},l.prototype.copy=function(){for(var v=new Array(this._geometries.length).fill(null),C=0;C<v.length;C++)v[C]=this._geometries[C].copy();return new l(v,this._factory)},l.prototype.interfaces_=function(){return[Ii]},l.prototype.getClass=function(){return l},m.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(l,m),l}(vt),Mi=function(s){function l(v,C){v instanceof se&&C instanceof Xi&&(v=C.getCoordinateSequenceFactory().create(v)),s.call(this,v,C),this.validateConstruction()}s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l;var m={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return l.prototype.getSortIndex=function(){return sn.SORTINDEX_LINEARRING},l.prototype.getBoundaryDimension=function(){return qe.FALSE},l.prototype.isClosed=function(){return!!this.isEmpty()||s.prototype.isClosed.call(this)},l.prototype.reverse=function(){var v=this._points.copy();return Pn.reverse(v),this.getFactory().createLinearRing(v)},l.prototype.validateConstruction=function(){if(!this.isEmpty()&&!s.prototype.isClosed.call(this))throw new ye("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<l.MINIMUM_VALID_SIZE)throw new ye("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},l.prototype.getGeometryType=function(){return"LinearRing"},l.prototype.copy=function(){return new l(this._points.copy(),this._factory)},l.prototype.interfaces_=function(){return[]},l.prototype.getClass=function(){return l},m.MINIMUM_VALID_SIZE.get=function(){return 4},m.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(l,m),l}(xn),Wi=function(s){function l(){s.apply(this,arguments)}s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l;var m={serialVersionUID:{configurable:!0}};return l.prototype.getSortIndex=function(){return sn.SORTINDEX_MULTIPOLYGON},l.prototype.equalsExact=function(){if(2===arguments.length){var v=arguments[0],C=arguments[1];return!!this.isEquivalentClass(v)&&s.prototype.equalsExact.call(this,v,C)}return s.prototype.equalsExact.apply(this,arguments)},l.prototype.getBoundaryDimension=function(){return 1},l.prototype.getDimension=function(){return 2},l.prototype.reverse=function(){for(var C=new Array(this._geometries.length).fill(null),k=0;k<this._geometries.length;k++)C[k]=this._geometries[k].reverse();return this.getFactory().createMultiPolygon(C)},l.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var v=new dn,C=0;C<this._geometries.length;C++)for(var k=this._geometries[C].getBoundary(),G=0;G<k.getNumGeometries();G++)v.add(k.getGeometryN(G));var J=new Array(v.size()).fill(null);return this.getFactory().createMultiLineString(v.toArray(J))},l.prototype.getGeometryType=function(){return"MultiPolygon"},l.prototype.copy=function(){for(var v=new Array(this._geometries.length).fill(null),C=0;C<v.length;C++)v[C]=this._geometries[C].copy();return new l(v,this._factory)},l.prototype.interfaces_=function(){return[lr]},l.prototype.getClass=function(){return l},m.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(l,m),l}(vt),qr=function(s){this._factory=s||null,this._isUserDataCopied=!1},yr={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};qr.prototype.setCopyUserData=function(s){this._isUserDataCopied=s},qr.prototype.edit=function(s,l){if(null===s)return null;var m=this.editInternal(s,l);return this._isUserDataCopied&&m.setUserData(s.getUserData()),m},qr.prototype.editInternal=function(s,l){return null===this._factory&&(this._factory=s.getFactory()),s instanceof vt?this.editGeometryCollection(s,l):s instanceof ii?this.editPolygon(s,l):s instanceof mi||s instanceof xn?l.edit(s,this._factory):(ke.shouldNeverReachHere("Unsupported Geometry class: "+s.getClass().getName()),null)},qr.prototype.editGeometryCollection=function(s,l){for(var m=l.edit(s,this._factory),v=new dn,C=0;C<m.getNumGeometries();C++){var k=this.edit(m.getGeometryN(C),l);null===k||k.isEmpty()||v.add(k)}return m.getClass()===Xn?this._factory.createMultiPoint(v.toArray([])):m.getClass()===Lt?this._factory.createMultiLineString(v.toArray([])):m.getClass()===Wi?this._factory.createMultiPolygon(v.toArray([])):this._factory.createGeometryCollection(v.toArray([]))},qr.prototype.editPolygon=function(s,l){var m=l.edit(s,this._factory);if(null===m&&(m=this._factory.createPolygon(null)),m.isEmpty())return m;var v=this.edit(m.getExteriorRing(),l);if(null===v||v.isEmpty())return this._factory.createPolygon();for(var C=new dn,k=0;k<m.getNumInteriorRing();k++){var G=this.edit(m.getInteriorRingN(k),l);null===G||G.isEmpty()||C.add(G)}return this._factory.createPolygon(v,C.toArray([]))},qr.prototype.interfaces_=function(){return[]},qr.prototype.getClass=function(){return qr},qr.GeometryEditorOperation=function(){},yr.NoOpGeometryOperation.get=function(){return eo},yr.CoordinateOperation.get=function(){return Qn},yr.CoordinateSequenceOperation.get=function(){return zi},Object.defineProperties(qr,yr);var eo=function(){};eo.prototype.edit=function(s,l){return s},eo.prototype.interfaces_=function(){return[qr.GeometryEditorOperation]},eo.prototype.getClass=function(){return eo};var Qn=function(){};Qn.prototype.edit=function(s,l){var m=this.editCoordinates(s.getCoordinates(),s);return null===m?s:s instanceof Mi?l.createLinearRing(m):s instanceof xn?l.createLineString(m):s instanceof mi?m.length>0?l.createPoint(m[0]):l.createPoint():s},Qn.prototype.interfaces_=function(){return[qr.GeometryEditorOperation]},Qn.prototype.getClass=function(){return Qn};var zi=function(){};zi.prototype.edit=function(s,l){return s instanceof Mi?l.createLinearRing(this.edit(s.getCoordinateSequence(),s)):s instanceof xn?l.createLineString(this.edit(s.getCoordinateSequence(),s)):s instanceof mi?l.createPoint(this.edit(s.getCoordinateSequence(),s)):s},zi.prototype.interfaces_=function(){return[qr.GeometryEditorOperation]},zi.prototype.getClass=function(){return zi};var ei=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var s=arguments[0];this._coordinates=new Array(s).fill(null);for(var l=0;l<s;l++)this._coordinates[l]=new se}else if(dt(arguments[0],Gt)){var m=arguments[0];if(null===m)return this._coordinates=new Array(0).fill(null),null;this._dimension=m.getDimension(),this._coordinates=new Array(m.size()).fill(null);for(var v=0;v<this._coordinates.length;v++)this._coordinates[v]=m.getCoordinateCopy(v)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var C=arguments[0],k=arguments[1];this._coordinates=C,this._dimension=k,null===C&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var G=arguments[0],J=arguments[1];this._coordinates=new Array(G).fill(null),this._dimension=J;for(var fe=0;fe<G;fe++)this._coordinates[fe]=new se}},La={serialVersionUID:{configurable:!0}};ei.prototype.setOrdinate=function(s,l,m){switch(l){case Gt.X:this._coordinates[s].x=m;break;case Gt.Y:this._coordinates[s].y=m;break;case Gt.Z:this._coordinates[s].z=m;break;default:throw new ye("invalid ordinateIndex")}},ei.prototype.size=function(){return this._coordinates.length},ei.prototype.getOrdinate=function(s,l){switch(l){case Gt.X:return this._coordinates[s].x;case Gt.Y:return this._coordinates[s].y;case Gt.Z:return this._coordinates[s].z}return ce.NaN},ei.prototype.getCoordinate=function(){if(1===arguments.length)return this._coordinates[arguments[0]];if(2===arguments.length){var l=arguments[0],m=arguments[1];m.x=this._coordinates[l].x,m.y=this._coordinates[l].y,m.z=this._coordinates[l].z}},ei.prototype.getCoordinateCopy=function(s){return new se(this._coordinates[s])},ei.prototype.getDimension=function(){return this._dimension},ei.prototype.getX=function(s){return this._coordinates[s].x},ei.prototype.clone=function(){for(var s=new Array(this.size()).fill(null),l=0;l<this._coordinates.length;l++)s[l]=this._coordinates[l].clone();return new ei(s,this._dimension)},ei.prototype.expandEnvelope=function(s){for(var l=0;l<this._coordinates.length;l++)s.expandToInclude(this._coordinates[l]);return s},ei.prototype.copy=function(){for(var s=new Array(this.size()).fill(null),l=0;l<this._coordinates.length;l++)s[l]=this._coordinates[l].copy();return new ei(s,this._dimension)},ei.prototype.toString=function(){if(this._coordinates.length>0){var s=new $e(17*this._coordinates.length);s.append("("),s.append(this._coordinates[0]);for(var l=1;l<this._coordinates.length;l++)s.append(", "),s.append(this._coordinates[l]);return s.append(")"),s.toString()}return"()"},ei.prototype.getY=function(s){return this._coordinates[s].y},ei.prototype.toCoordinateArray=function(){return this._coordinates},ei.prototype.interfaces_=function(){return[Gt,o]},ei.prototype.getClass=function(){return ei},La.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(ei,La);var rs=function(){},Cs={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};rs.prototype.readResolve=function(){return rs.instance()},rs.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new ei(arguments[0]);if(dt(arguments[0],Gt))return new ei(arguments[0])}else if(2===arguments.length){var m=arguments[0],v=arguments[1];return v>3&&(v=3),v<2?new ei(m):new ei(m,v)}},rs.prototype.interfaces_=function(){return[st,o]},rs.prototype.getClass=function(){return rs},rs.instance=function(){return rs.instanceObject},Cs.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},Cs.instanceObject.get=function(){return new rs},Object.defineProperties(rs,Cs);var hc=function(s){function l(){s.call(this),this.map_=new Map}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.get=function(m){return this.map_.get(m)||null},l.prototype.put=function(m,v){return this.map_.set(m,v),v},l.prototype.values=function(){for(var m=new dn,v=this.map_.values(),C=v.next();!C.done;)m.add(C.value),C=v.next();return m},l.prototype.entrySet=function(){var m=new zs;return this.map_.entries().forEach(function(v){return m.add(v)}),m},l.prototype.size=function(){return this.map_.size()},l}(na),ci=function s(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=s.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof Us){var l=arguments[0];this._modelType=l,l===s.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var m=arguments[0];this._modelType=s.FIXED,this.setScale(m)}else if(arguments[0]instanceof s){var v=arguments[0];this._modelType=v._modelType,this._scale=v._scale}},Vc={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};ci.prototype.equals=function(s){return s instanceof ci&&this._modelType===s._modelType&&this._scale===s._scale},ci.prototype.compareTo=function(s){var l=s,m=this.getMaximumSignificantDigits(),v=l.getMaximumSignificantDigits();return new gt(m).compareTo(new gt(v))},ci.prototype.getScale=function(){return this._scale},ci.prototype.isFloating=function(){return this._modelType===ci.FLOATING||this._modelType===ci.FLOATING_SINGLE},ci.prototype.getType=function(){return this._modelType},ci.prototype.toString=function(){var s="UNKNOWN";return this._modelType===ci.FLOATING?s="Floating":this._modelType===ci.FLOATING_SINGLE?s="Floating-Single":this._modelType===ci.FIXED&&(s="Fixed (Scale="+this.getScale()+")"),s},ci.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var s=arguments[0];return ce.isNaN(s)||this._modelType===ci.FLOATING_SINGLE?s:this._modelType===ci.FIXED?Math.round(s*this._scale)/this._scale:s}if(arguments[0]instanceof se){var l=arguments[0];if(this._modelType===ci.FLOATING)return null;l.x=this.makePrecise(l.x),l.y=this.makePrecise(l.y)}},ci.prototype.getMaximumSignificantDigits=function(){var s=16;return this._modelType===ci.FLOATING?s=16:this._modelType===ci.FLOATING_SINGLE?s=6:this._modelType===ci.FIXED&&(s=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),s},ci.prototype.setScale=function(s){this._scale=Math.abs(s)},ci.prototype.interfaces_=function(){return[o,ve]},ci.prototype.getClass=function(){return ci},ci.mostPrecise=function(s,l){return s.compareTo(l)>=0?s:l},Vc.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},Vc.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(ci,Vc);var Us=function s(l){this._name=l||null,s.nameToTypeMap.put(l,this)},dr={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Us.prototype.readResolve=function(){return Us.nameToTypeMap.get(this._name)},Us.prototype.toString=function(){return this._name},Us.prototype.interfaces_=function(){return[o]},Us.prototype.getClass=function(){return Us},dr.serialVersionUID.get=function(){return-552860263173159e4},dr.nameToTypeMap.get=function(){return new hc},Object.defineProperties(Us,dr),ci.Type=Us,ci.FIXED=new Us("FIXED"),ci.FLOATING=new Us("FLOATING"),ci.FLOATING_SINGLE=new Us("FLOATING SINGLE");var Xi=function s(){this._precisionModel=new ci,this._SRID=0,this._coordinateSequenceFactory=s.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?dt(arguments[0],st)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof ci&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},An={serialVersionUID:{configurable:!0}};Xi.prototype.toGeometry=function(s){return s.isNull()?this.createPoint(null):s.getMinX()===s.getMaxX()&&s.getMinY()===s.getMaxY()?this.createPoint(new se(s.getMinX(),s.getMinY())):s.getMinX()===s.getMaxX()||s.getMinY()===s.getMaxY()?this.createLineString([new se(s.getMinX(),s.getMinY()),new se(s.getMaxX(),s.getMaxY())]):this.createPolygon(this.createLinearRing([new se(s.getMinX(),s.getMinY()),new se(s.getMinX(),s.getMaxY()),new se(s.getMaxX(),s.getMaxY()),new se(s.getMaxX(),s.getMinY()),new se(s.getMinX(),s.getMinY())]),null)},Xi.prototype.createLineString=function(s){return s?s instanceof Array?new xn(this.getCoordinateSequenceFactory().create(s),this):dt(s,Gt)?new xn(s,this):void 0:new xn(this.getCoordinateSequenceFactory().create([]),this)},Xi.prototype.createMultiLineString=function(){return 0===arguments.length?new Lt(null,this):1===arguments.length?new Lt(arguments[0],this):void 0},Xi.prototype.buildGeometry=function(s){for(var l=null,m=!1,v=!1,C=s.iterator();C.hasNext();){var k=C.next(),G=k.getClass();null===l&&(l=G),G!==l&&(m=!0),k.isGeometryCollectionOrDerived()&&(v=!0)}if(null===l)return this.createGeometryCollection();if(m||v)return this.createGeometryCollection(Xi.toGeometryArray(s));var J=s.iterator().next();if(s.size()>1){if(J instanceof ii)return this.createMultiPolygon(Xi.toPolygonArray(s));if(J instanceof xn)return this.createMultiLineString(Xi.toLineStringArray(s));if(J instanceof mi)return this.createMultiPoint(Xi.toPointArray(s));ke.shouldNeverReachHere("Unhandled class: "+J.getClass().getName())}return J},Xi.prototype.createMultiPointFromCoords=function(s){return this.createMultiPoint(null!==s?this.getCoordinateSequenceFactory().create(s):null)},Xi.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof se){var s=arguments[0];return this.createPoint(null!==s?this.getCoordinateSequenceFactory().create([s]):null)}if(dt(arguments[0],Gt))return new mi(arguments[0],this)}},Xi.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},Xi.prototype.createPolygon=function(){if(0===arguments.length)return new ii(null,null,this);if(1===arguments.length){if(dt(arguments[0],Gt))return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof Array)return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof Mi)return this.createPolygon(arguments[0],null)}else if(2===arguments.length)return new ii(arguments[0],arguments[1],this)},Xi.prototype.getSRID=function(){return this._SRID},Xi.prototype.createGeometryCollection=function(){return 0===arguments.length?new vt(null,this):1===arguments.length?new vt(arguments[0],this):void 0},Xi.prototype.createGeometry=function(s){return new qr(this).edit(s,{edit:function(){if(2===arguments.length)return this._coordinateSequenceFactory.create(arguments[0])}})},Xi.prototype.getPrecisionModel=function(){return this._precisionModel},Xi.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var s=arguments[0];return this.createLinearRing(null!==s?this.getCoordinateSequenceFactory().create(s):null)}if(dt(arguments[0],Gt))return new Mi(arguments[0],this)}},Xi.prototype.createMultiPolygon=function(){return 0===arguments.length?new Wi(null,this):1===arguments.length?new Wi(arguments[0],this):void 0},Xi.prototype.createMultiPoint=function(){if(0===arguments.length)return new Xn(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new Xn(arguments[0],this);if(arguments[0]instanceof Array){var l=arguments[0];return this.createMultiPoint(null!==l?this.getCoordinateSequenceFactory().create(l):null)}if(dt(arguments[0],Gt)){var m=arguments[0];if(null===m)return this.createMultiPoint(new Array(0).fill(null));for(var v=new Array(m.size()).fill(null),C=0;C<m.size();C++){var k=this.getCoordinateSequenceFactory().create(1,m.getDimension());Pn.copy(m,C,k,0,1),v[C]=this.createPoint(k)}return this.createMultiPoint(v)}}},Xi.prototype.interfaces_=function(){return[o]},Xi.prototype.getClass=function(){return Xi},Xi.toMultiPolygonArray=function(s){var l=new Array(s.size()).fill(null);return s.toArray(l)},Xi.toGeometryArray=function(s){if(null===s)return null;var l=new Array(s.size()).fill(null);return s.toArray(l)},Xi.getDefaultCoordinateSequenceFactory=function(){return rs.instance()},Xi.toMultiLineStringArray=function(s){var l=new Array(s.size()).fill(null);return s.toArray(l)},Xi.toLineStringArray=function(s){var l=new Array(s.size()).fill(null);return s.toArray(l)},Xi.toMultiPointArray=function(s){var l=new Array(s.size()).fill(null);return s.toArray(l)},Xi.toLinearRingArray=function(s){var l=new Array(s.size()).fill(null);return s.toArray(l)},Xi.toPointArray=function(s){var l=new Array(s.size()).fill(null);return s.toArray(l)},Xi.toPolygonArray=function(s){var l=new Array(s.size()).fill(null);return s.toArray(l)},Xi.createPointFromInternalCoord=function(s,l){return l.getPrecisionModel().makePrecise(s),l.getFactory().createPoint(s)},An.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(Xi,An);var Xa=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],ms=function(s){this.geometryFactory=s||new Xi};ms.prototype.read=function(s){var l,m=(l="string"==typeof s?JSON.parse(s):s).type;if(!ir[m])throw new Error("Unknown GeoJSON type: "+l.type);return-1!==Xa.indexOf(m)?ir[m].apply(this,[l.coordinates]):ir[m].apply(this,"GeometryCollection"===m?[l.geometries]:[l])},ms.prototype.write=function(s){var l=s.getGeometryType();if(!Ji[l])throw new Error("Geometry is not supported");return Ji[l].apply(this,[s])};var ir={Feature:function(s){var l={};for(var m in s)l[m]=s[m];if(s.geometry){if(!ir[s.geometry.type])throw new Error("Unknown GeoJSON type: "+s.type);l.geometry=this.read(s.geometry)}return s.bbox&&(l.bbox=ir.bbox.apply(this,[s.bbox])),l},FeatureCollection:function(s){var l={};if(s.features){l.features=[];for(var m=0;m<s.features.length;++m)l.features.push(this.read(s.features[m]))}return s.bbox&&(l.bbox=this.parse.bbox.apply(this,[s.bbox])),l},coordinates:function(s){for(var l=[],m=0;m<s.length;++m){var v=s[m];l.push(new se(v[0],v[1]))}return l},bbox:function(s){return this.geometryFactory.createLinearRing([new se(s[0],s[1]),new se(s[2],s[1]),new se(s[2],s[3]),new se(s[0],s[3]),new se(s[0],s[1])])},Point:function(s){var l=new se(s[0],s[1]);return this.geometryFactory.createPoint(l)},MultiPoint:function(s){for(var l=[],m=0;m<s.length;++m)l.push(ir.Point.apply(this,[s[m]]));return this.geometryFactory.createMultiPoint(l)},LineString:function(s){var l=ir.coordinates.apply(this,[s]);return this.geometryFactory.createLineString(l)},MultiLineString:function(s){for(var l=[],m=0;m<s.length;++m)l.push(ir.LineString.apply(this,[s[m]]));return this.geometryFactory.createMultiLineString(l)},Polygon:function(s){for(var l=ir.coordinates.apply(this,[s[0]]),m=this.geometryFactory.createLinearRing(l),v=[],C=1;C<s.length;++C){var G=ir.coordinates.apply(this,[s[C]]),J=this.geometryFactory.createLinearRing(G);v.push(J)}return this.geometryFactory.createPolygon(m,v)},MultiPolygon:function(s){for(var l=[],m=0;m<s.length;++m)l.push(ir.Polygon.apply(this,[s[m]]));return this.geometryFactory.createMultiPolygon(l)},GeometryCollection:function(s){for(var l=[],m=0;m<s.length;++m)l.push(this.read(s[m]));return this.geometryFactory.createGeometryCollection(l)}},Ji={coordinate:function(s){return[s.x,s.y]},Point:function(s){return{type:"Point",coordinates:Ji.coordinate.apply(this,[s.getCoordinate()])}},MultiPoint:function(s){for(var l=[],m=0;m<s._geometries.length;++m){var C=Ji.Point.apply(this,[s._geometries[m]]);l.push(C.coordinates)}return{type:"MultiPoint",coordinates:l}},LineString:function(s){for(var l=[],m=s.getCoordinates(),v=0;v<m.length;++v)l.push(Ji.coordinate.apply(this,[m[v]]));return{type:"LineString",coordinates:l}},MultiLineString:function(s){for(var l=[],m=0;m<s._geometries.length;++m){var C=Ji.LineString.apply(this,[s._geometries[m]]);l.push(C.coordinates)}return{type:"MultiLineString",coordinates:l}},Polygon:function(s){var l=[],m=Ji.LineString.apply(this,[s._shell]);l.push(m.coordinates);for(var v=0;v<s._holes.length;++v){var k=Ji.LineString.apply(this,[s._holes[v]]);l.push(k.coordinates)}return{type:"Polygon",coordinates:l}},MultiPolygon:function(s){for(var l=[],m=0;m<s._geometries.length;++m){var C=Ji.Polygon.apply(this,[s._geometries[m]]);l.push(C.coordinates)}return{type:"MultiPolygon",coordinates:l}},GeometryCollection:function(s){for(var l=[],m=0;m<s._geometries.length;++m){var v=s._geometries[m],C=v.getGeometryType();l.push(Ji[C].apply(this,[v]))}return{type:"GeometryCollection",geometries:l}}},ht=function(s){this.geometryFactory=s||new Xi,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new ms(this.geometryFactory)};ht.prototype.read=function(s){var l=this.parser.read(s);return this.precisionModel.getType()===ci.FIXED&&this.reducePrecision(l),l},ht.prototype.reducePrecision=function(s){var l,m;if(s.coordinate)this.precisionModel.makePrecise(s.coordinate);else if(s.points)for(l=0,m=s.points.length;l<m;l++)this.precisionModel.makePrecise(s.points[l]);else if(s.geometries)for(l=0,m=s.geometries.length;l<m;l++)this.reducePrecision(s.geometries[l])};var Jt=function(){this.parser=new ms(this.geometryFactory)};Jt.prototype.write=function(s){return this.parser.write(s)};var ft=function(){},on={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};ft.prototype.interfaces_=function(){return[]},ft.prototype.getClass=function(){return ft},ft.opposite=function(s){return s===ft.LEFT?ft.RIGHT:s===ft.RIGHT?ft.LEFT:s},on.ON.get=function(){return 0},on.LEFT.get=function(){return 1},on.RIGHT.get=function(){return 2},Object.defineProperties(ft,on),(ue.prototype=new Error).name="EmptyStackException",(De.prototype=new nr).add=function(s){return this.array_.push(s),!0},De.prototype.get=function(s){if(s<0||s>=this.size())throw new Error;return this.array_[s]},De.prototype.push=function(s){return this.array_.push(s),s},De.prototype.pop=function(s){if(0===this.array_.length)throw new ue;return this.array_.pop()},De.prototype.peek=function(){if(0===this.array_.length)throw new ue;return this.array_[this.array_.length-1]},De.prototype.empty=function(){return 0===this.array_.length},De.prototype.isEmpty=function(){return this.empty()},De.prototype.search=function(s){return this.array_.indexOf(s)},De.prototype.size=function(){return this.array_.length},De.prototype.toArray=function(){for(var s=[],l=0,m=this.array_.length;l<m;l++)s.push(this.array_[l]);return s};var gn=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};gn.prototype.getCoordinate=function(){return this._minCoord},gn.prototype.getRightmostSide=function(s,l){var m=this.getRightmostSideOfSegment(s,l);return m<0&&(m=this.getRightmostSideOfSegment(s,l-1)),m<0&&(this._minCoord=null,this.checkForRightmostCoordinate(s)),m},gn.prototype.findRightmostEdgeAtVertex=function(){var s=this._minDe.getEdge().getCoordinates();ke.isTrue(this._minIndex>0&&this._minIndex<s.length,"rightmost point expected to be interior vertex of edge");var l=s[this._minIndex-1],m=s[this._minIndex+1],v=mt.computeOrientation(this._minCoord,m,l),C=!1;(l.y<this._minCoord.y&&m.y<this._minCoord.y&&v===mt.COUNTERCLOCKWISE||l.y>this._minCoord.y&&m.y>this._minCoord.y&&v===mt.CLOCKWISE)&&(C=!0),C&&(this._minIndex=this._minIndex-1)},gn.prototype.getRightmostSideOfSegment=function(s,l){var m=s.getEdge().getCoordinates();if(l<0||l+1>=m.length||m[l].y===m[l+1].y)return-1;var v=ft.LEFT;return m[l].y<m[l+1].y&&(v=ft.RIGHT),v},gn.prototype.getEdge=function(){return this._orientedDe},gn.prototype.checkForRightmostCoordinate=function(s){for(var l=s.getEdge().getCoordinates(),m=0;m<l.length-1;m++)(null===this._minCoord||l[m].x>this._minCoord.x)&&(this._minDe=s,this._minIndex=m,this._minCoord=l[m])},gn.prototype.findRightmostEdgeAtNode=function(){var s=this._minDe.getNode().getEdges();this._minDe=s.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},gn.prototype.findEdge=function(s){for(var l=s.iterator();l.hasNext();){var m=l.next();m.isForward()&&this.checkForRightmostCoordinate(m)}ke.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===ft.LEFT&&(this._orientedDe=this._minDe.getSym())},gn.prototype.interfaces_=function(){return[]},gn.prototype.getClass=function(){return gn};var zn=function(s){function l(m,v){s.call(this,l.msgWithCoord(m,v)),this.pt=v?new se(v):null,this.name="TopologyException"}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.getCoordinate=function(){return this.pt},l.prototype.interfaces_=function(){return[]},l.prototype.getClass=function(){return l},l.msgWithCoord=function(m,v){return v?m:m+" [ "+v+" ]"},l}(je),Ai=function(){this.array_=[]};Ai.prototype.addLast=function(s){this.array_.push(s)},Ai.prototype.removeFirst=function(){return this.array_.shift()},Ai.prototype.isEmpty=function(){return 0===this.array_.length};var vr=function(){this._finder=null,this._dirEdgeList=new dn,this._nodes=new dn,this._rightMostCoord=null,this._env=null,this._finder=new gn};vr.prototype.clearVisitedEdges=function(){for(var s=this._dirEdgeList.iterator();s.hasNext();)s.next().setVisited(!1)},vr.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},vr.prototype.computeNodeDepth=function(s){for(var l=null,m=s.getEdges().iterator();m.hasNext();){var v=m.next();if(v.isVisited()||v.getSym().isVisited()){l=v;break}}if(null===l)throw new zn("unable to find edge to compute depths at "+s.getCoordinate());s.getEdges().computeDepths(l);for(var C=s.getEdges().iterator();C.hasNext();){var k=C.next();k.setVisited(!0),this.copySymDepths(k)}},vr.prototype.computeDepth=function(s){this.clearVisitedEdges();var l=this._finder.getEdge();l.setEdgeDepths(ft.RIGHT,s),this.copySymDepths(l),this.computeDepths(l)},vr.prototype.create=function(s){this.addReachable(s),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},vr.prototype.findResultEdges=function(){for(var s=this._dirEdgeList.iterator();s.hasNext();){var l=s.next();l.getDepth(ft.RIGHT)>=1&&l.getDepth(ft.LEFT)<=0&&!l.isInteriorAreaEdge()&&l.setInResult(!0)}},vr.prototype.computeDepths=function(s){var l=new zs,m=new Ai,v=s.getNode();for(m.addLast(v),l.add(v),s.setVisited(!0);!m.isEmpty();){var C=m.removeFirst();l.add(C),this.computeNodeDepth(C);for(var k=C.getEdges().iterator();k.hasNext();){var G=k.next().getSym();if(!G.isVisited()){var J=G.getNode();l.contains(J)||(m.addLast(J),l.add(J))}}}},vr.prototype.compareTo=function(s){return this._rightMostCoord.x<s._rightMostCoord.x?-1:this._rightMostCoord.x>s._rightMostCoord.x?1:0},vr.prototype.getEnvelope=function(){if(null===this._env){for(var s=new hn,l=this._dirEdgeList.iterator();l.hasNext();)for(var m=l.next().getEdge().getCoordinates(),v=0;v<m.length-1;v++)s.expandToInclude(m[v]);this._env=s}return this._env},vr.prototype.addReachable=function(s){var l=new De;for(l.add(s);!l.empty();){var m=l.pop();this.add(m,l)}},vr.prototype.copySymDepths=function(s){var l=s.getSym();l.setDepth(ft.LEFT,s.getDepth(ft.RIGHT)),l.setDepth(ft.RIGHT,s.getDepth(ft.LEFT))},vr.prototype.add=function(s,l){s.setVisited(!0),this._nodes.add(s);for(var m=s.getEdges().iterator();m.hasNext();){var v=m.next();this._dirEdgeList.add(v);var C=v.getSym().getNode();C.isVisited()||l.push(C)}},vr.prototype.getNodes=function(){return this._nodes},vr.prototype.getDirectedEdges=function(){return this._dirEdgeList},vr.prototype.interfaces_=function(){return[ve]},vr.prototype.getClass=function(){return vr};var Hi=function s(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array)this.init(arguments[0].length);else if(Number.isInteger(arguments[0])){var m=arguments[0];this.init(1),this.location[ft.ON]=m}else if(arguments[0]instanceof s){var v=arguments[0];if(this.init(v.location.length),null!==v)for(var C=0;C<this.location.length;C++)this.location[C]=v.location[C]}}else if(3===arguments.length){var k=arguments[0],G=arguments[1],J=arguments[2];this.init(3),this.location[ft.ON]=k,this.location[ft.LEFT]=G,this.location[ft.RIGHT]=J}};Hi.prototype.setAllLocations=function(s){for(var l=0;l<this.location.length;l++)this.location[l]=s},Hi.prototype.isNull=function(){for(var s=0;s<this.location.length;s++)if(this.location[s]!==de.NONE)return!1;return!0},Hi.prototype.setAllLocationsIfNull=function(s){for(var l=0;l<this.location.length;l++)this.location[l]===de.NONE&&(this.location[l]=s)},Hi.prototype.isLine=function(){return 1===this.location.length},Hi.prototype.merge=function(s){if(s.location.length>this.location.length){var l=new Array(3).fill(null);l[ft.ON]=this.location[ft.ON],l[ft.LEFT]=de.NONE,l[ft.RIGHT]=de.NONE,this.location=l}for(var m=0;m<this.location.length;m++)this.location[m]===de.NONE&&m<s.location.length&&(this.location[m]=s.location[m])},Hi.prototype.getLocations=function(){return this.location},Hi.prototype.flip=function(){if(this.location.length<=1)return null;var s=this.location[ft.LEFT];this.location[ft.LEFT]=this.location[ft.RIGHT],this.location[ft.RIGHT]=s},Hi.prototype.toString=function(){var s=new $e;return this.location.length>1&&s.append(de.toLocationSymbol(this.location[ft.LEFT])),s.append(de.toLocationSymbol(this.location[ft.ON])),this.location.length>1&&s.append(de.toLocationSymbol(this.location[ft.RIGHT])),s.toString()},Hi.prototype.setLocations=function(s,l,m){this.location[ft.ON]=s,this.location[ft.LEFT]=l,this.location[ft.RIGHT]=m},Hi.prototype.get=function(s){return s<this.location.length?this.location[s]:de.NONE},Hi.prototype.isArea=function(){return this.location.length>1},Hi.prototype.isAnyNull=function(){for(var s=0;s<this.location.length;s++)if(this.location[s]===de.NONE)return!0;return!1},Hi.prototype.setLocation=function(){1===arguments.length?this.setLocation(ft.ON,arguments[0]):2===arguments.length&&(this.location[arguments[0]]=arguments[1])},Hi.prototype.init=function(s){this.location=new Array(s).fill(null),this.setAllLocations(de.NONE)},Hi.prototype.isEqualOnSide=function(s,l){return this.location[l]===s.location[l]},Hi.prototype.allPositionsEqual=function(s){for(var l=0;l<this.location.length;l++)if(this.location[l]!==s)return!1;return!0},Hi.prototype.interfaces_=function(){return[]},Hi.prototype.getClass=function(){return Hi};var tr=function s(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var l=arguments[0];this.elt[0]=new Hi(l),this.elt[1]=new Hi(l)}else if(arguments[0]instanceof s){var m=arguments[0];this.elt[0]=new Hi(m.elt[0]),this.elt[1]=new Hi(m.elt[1])}}else if(2===arguments.length){var v=arguments[0],C=arguments[1];this.elt[0]=new Hi(de.NONE),this.elt[1]=new Hi(de.NONE),this.elt[v].setLocation(C)}else if(3===arguments.length){var k=arguments[0],G=arguments[1],J=arguments[2];this.elt[0]=new Hi(k,G,J),this.elt[1]=new Hi(k,G,J)}else if(4===arguments.length){var fe=arguments[0],pe=arguments[1],ot=arguments[2],nt=arguments[3];this.elt[0]=new Hi(de.NONE,de.NONE,de.NONE),this.elt[1]=new Hi(de.NONE,de.NONE,de.NONE),this.elt[fe].setLocations(pe,ot,nt)}};tr.prototype.getGeometryCount=function(){var s=0;return this.elt[0].isNull()||s++,this.elt[1].isNull()||s++,s},tr.prototype.setAllLocations=function(s,l){this.elt[s].setAllLocations(l)},tr.prototype.isNull=function(s){return this.elt[s].isNull()},tr.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var s=arguments[0];this.setAllLocationsIfNull(0,s),this.setAllLocationsIfNull(1,s)}else 2===arguments.length&&this.elt[arguments[0]].setAllLocationsIfNull(arguments[1])},tr.prototype.isLine=function(s){return this.elt[s].isLine()},tr.prototype.merge=function(s){for(var l=0;l<2;l++)null===this.elt[l]&&null!==s.elt[l]?this.elt[l]=new Hi(s.elt[l]):this.elt[l].merge(s.elt[l])},tr.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},tr.prototype.getLocation=function(){return 1===arguments.length?this.elt[arguments[0]].get(ft.ON):2===arguments.length?this.elt[arguments[0]].get(arguments[1]):void 0},tr.prototype.toString=function(){var s=new $e;return null!==this.elt[0]&&(s.append("A:"),s.append(this.elt[0].toString())),null!==this.elt[1]&&(s.append(" B:"),s.append(this.elt[1].toString())),s.toString()},tr.prototype.isArea=function(){return 0===arguments.length?this.elt[0].isArea()||this.elt[1].isArea():1===arguments.length?this.elt[arguments[0]].isArea():void 0},tr.prototype.isAnyNull=function(s){return this.elt[s].isAnyNull()},tr.prototype.setLocation=function(){2===arguments.length?this.elt[arguments[0]].setLocation(ft.ON,arguments[1]):3===arguments.length&&this.elt[arguments[0]].setLocation(arguments[1],arguments[2])},tr.prototype.isEqualOnSide=function(s,l){return this.elt[0].isEqualOnSide(s.elt[0],l)&&this.elt[1].isEqualOnSide(s.elt[1],l)},tr.prototype.allPositionsEqual=function(s,l){return this.elt[s].allPositionsEqual(l)},tr.prototype.toLine=function(s){this.elt[s].isArea()&&(this.elt[s]=new Hi(this.elt[s].location[0]))},tr.prototype.interfaces_=function(){return[]},tr.prototype.getClass=function(){return tr},tr.toLineLabel=function(s){for(var l=new tr(de.NONE),m=0;m<2;m++)l.setLocation(m,s.getLocation(m));return l};var qi=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new dn,this._pts=new dn,this._label=new tr(de.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new dn,this._geometryFactory=null;var s=arguments[0];this._geometryFactory=arguments[1],this.computePoints(s),this.computeRing()};qi.prototype.computeRing=function(){if(null!==this._ring)return null;for(var s=new Array(this._pts.size()).fill(null),l=0;l<this._pts.size();l++)s[l]=this._pts.get(l);this._ring=this._geometryFactory.createLinearRing(s),this._isHole=mt.isCCW(this._ring.getCoordinates())},qi.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},qi.prototype.computePoints=function(s){this._startDe=s;var l=s,m=!0;do{if(null===l)throw new zn("Found null DirectedEdge");if(l.getEdgeRing()===this)throw new zn("Directed Edge visited twice during ring-building at "+l.getCoordinate());this._edges.add(l);var v=l.getLabel();ke.isTrue(v.isArea()),this.mergeLabel(v),this.addPoints(l.getEdge(),l.isForward(),m),m=!1,this.setEdgeRing(l,this),l=this.getNext(l)}while(l!==this._startDe)},qi.prototype.getLinearRing=function(){return this._ring},qi.prototype.getCoordinate=function(s){return this._pts.get(s)},qi.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var s=this._startDe;do{var l=s.getNode().getEdges().getOutgoingDegree(this);l>this._maxNodeDegree&&(this._maxNodeDegree=l),s=this.getNext(s)}while(s!==this._startDe);this._maxNodeDegree*=2},qi.prototype.addPoints=function(s,l,m){var v=s.getCoordinates();if(l){var C=1;m&&(C=0);for(var k=C;k<v.length;k++)this._pts.add(v[k])}else{var G=v.length-2;m&&(G=v.length-1);for(var J=G;J>=0;J--)this._pts.add(v[J])}},qi.prototype.isHole=function(){return this._isHole},qi.prototype.setInResult=function(){var s=this._startDe;do{s.getEdge().setInResult(!0),s=s.getNext()}while(s!==this._startDe)},qi.prototype.containsPoint=function(s){var l=this.getLinearRing();if(!l.getEnvelopeInternal().contains(s)||!mt.isPointInRing(s,l.getCoordinates()))return!1;for(var m=this._holes.iterator();m.hasNext();)if(m.next().containsPoint(s))return!1;return!0},qi.prototype.addHole=function(s){this._holes.add(s)},qi.prototype.isShell=function(){return null===this._shell},qi.prototype.getLabel=function(){return this._label},qi.prototype.getEdges=function(){return this._edges},qi.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},qi.prototype.getShell=function(){return this._shell},qi.prototype.mergeLabel=function(){if(1===arguments.length){var s=arguments[0];this.mergeLabel(s,0),this.mergeLabel(s,1)}else if(2===arguments.length){var m=arguments[1],v=arguments[0].getLocation(m,ft.RIGHT);if(v===de.NONE)return null;if(this._label.getLocation(m)===de.NONE)return this._label.setLocation(m,v),null}},qi.prototype.setShell=function(s){this._shell=s,null!==s&&s.addHole(this)},qi.prototype.toPolygon=function(s){for(var l=new Array(this._holes.size()).fill(null),m=0;m<this._holes.size();m++)l[m]=this._holes.get(m).getLinearRing();return s.createPolygon(this.getLinearRing(),l)},qi.prototype.interfaces_=function(){return[]},qi.prototype.getClass=function(){return qi};var fo=function(s){function l(){s.call(this,arguments[0],arguments[1])}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.setEdgeRing=function(m,v){m.setMinEdgeRing(v)},l.prototype.getNext=function(m){return m.getNextMin()},l.prototype.interfaces_=function(){return[]},l.prototype.getClass=function(){return l},l}(qi),Nd=function(s){function l(){s.call(this,arguments[0],arguments[1])}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.buildMinimalRings=function(){var m=new dn,v=this._startDe;do{if(null===v.getMinEdgeRing()){var C=new fo(v,this._geometryFactory);m.add(C)}v=v.getNext()}while(v!==this._startDe);return m},l.prototype.setEdgeRing=function(m,v){m.setEdgeRing(v)},l.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var m=this._startDe;do{m.getNode().getEdges().linkMinimalDirectedEdges(this),m=m.getNext()}while(m!==this._startDe)},l.prototype.getNext=function(m){return m.getNext()},l.prototype.interfaces_=function(){return[]},l.prototype.getClass=function(){return l},l}(qi),po=function(){this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0!==arguments.length&&1===arguments.length&&(this._label=arguments[0])};po.prototype.setVisited=function(s){this._isVisited=s},po.prototype.setInResult=function(s){this._isInResult=s},po.prototype.isCovered=function(){return this._isCovered},po.prototype.isCoveredSet=function(){return this._isCoveredSet},po.prototype.setLabel=function(s){this._label=s},po.prototype.getLabel=function(){return this._label},po.prototype.setCovered=function(s){this._isCovered=s,this._isCoveredSet=!0},po.prototype.updateIM=function(s){ke.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(s)},po.prototype.isInResult=function(){return this._isInResult},po.prototype.isVisited=function(){return this._isVisited},po.prototype.interfaces_=function(){return[]},po.prototype.getClass=function(){return po};var Ea=function(s){function l(){s.call(this),this._coord=null,this._edges=null;var v=arguments[1];this._coord=arguments[0],this._edges=v,this._label=new tr(0,de.NONE)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.isIncidentEdgeInResult=function(){for(var m=this.getEdges().getEdges().iterator();m.hasNext();)if(m.next().getEdge().isInResult())return!0;return!1},l.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},l.prototype.getCoordinate=function(){return this._coord},l.prototype.print=function(m){m.println("node "+this._coord+" lbl: "+this._label)},l.prototype.computeIM=function(m){},l.prototype.computeMergedLocation=function(m,v){var C=de.NONE;if(C=this._label.getLocation(v),!m.isNull(v)){var k=m.getLocation(v);C!==de.BOUNDARY&&(C=k)}return C},l.prototype.setLabel=function(){if(2!==arguments.length)return s.prototype.setLabel.apply(this,arguments);var m=arguments[0],v=arguments[1];null===this._label?this._label=new tr(m,v):this._label.setLocation(m,v)},l.prototype.getEdges=function(){return this._edges},l.prototype.mergeLabel=function(){if(arguments[0]instanceof l)this.mergeLabel(arguments[0]._label);else if(arguments[0]instanceof tr)for(var v=arguments[0],C=0;C<2;C++){var k=this.computeMergedLocation(v,C);this._label.getLocation(C)===de.NONE&&this._label.setLocation(C,k)}},l.prototype.add=function(m){this._edges.insert(m),m.setNode(this)},l.prototype.setLabelBoundary=function(m){if(null===this._label)return null;var v=de.NONE;null!==this._label&&(v=this._label.getLocation(m)),this._label.setLocation(m,v===de.BOUNDARY?de.INTERIOR:de.BOUNDARY)},l.prototype.interfaces_=function(){return[]},l.prototype.getClass=function(){return l},l}(po),ka=function(){this.nodeMap=new Ke,this.nodeFact=null,this.nodeFact=arguments[0]};ka.prototype.find=function(s){return this.nodeMap.get(s)},ka.prototype.addNode=function(){if(arguments[0]instanceof se){var s=arguments[0],l=this.nodeMap.get(s);return null===l&&(l=this.nodeFact.createNode(s),this.nodeMap.put(s,l)),l}if(arguments[0]instanceof Ea){var m=arguments[0],v=this.nodeMap.get(m.getCoordinate());return null===v?(this.nodeMap.put(m.getCoordinate(),m),m):(v.mergeLabel(m),v)}},ka.prototype.print=function(s){for(var l=this.iterator();l.hasNext();)l.next().print(s)},ka.prototype.iterator=function(){return this.nodeMap.values().iterator()},ka.prototype.values=function(){return this.nodeMap.values()},ka.prototype.getBoundaryNodes=function(s){for(var l=new dn,m=this.iterator();m.hasNext();){var v=m.next();v.getLabel().getLocation(s)===de.BOUNDARY&&l.add(v)}return l},ka.prototype.add=function(s){var l=s.getCoordinate();this.addNode(l).add(s)},ka.prototype.interfaces_=function(){return[]},ka.prototype.getClass=function(){return ka};var Nr=function(){},fc={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Nr.prototype.interfaces_=function(){return[]},Nr.prototype.getClass=function(){return Nr},Nr.isNorthern=function(s){return s===Nr.NE||s===Nr.NW},Nr.isOpposite=function(s,l){return s!==l&&(s-l+4)%4==2},Nr.commonHalfPlane=function(s,l){if(s===l)return s;if((s-l+4)%4==2)return-1;var m=s<l?s:l;return 0===m&&3===(s>l?s:l)?3:m},Nr.isInHalfPlane=function(s,l){return l===Nr.SE?s===Nr.SE||s===Nr.SW:s===l||s===l+1},Nr.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var s=arguments[0],l=arguments[1];if(0===s&&0===l)throw new ye("Cannot compute the quadrant for point ( "+s+", "+l+" )");return s>=0?l>=0?Nr.NE:Nr.SE:l>=0?Nr.NW:Nr.SW}if(arguments[0]instanceof se&&arguments[1]instanceof se){var m=arguments[0],v=arguments[1];if(v.x===m.x&&v.y===m.y)throw new ye("Cannot compute the quadrant for two identical points "+m);return v.x>=m.x?v.y>=m.y?Nr.NE:Nr.SE:v.y>=m.y?Nr.NW:Nr.SW}},fc.NE.get=function(){return 0},fc.NW.get=function(){return 1},fc.SW.get=function(){return 2},fc.SE.get=function(){return 3},Object.defineProperties(Nr,fc);var so=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length)this._edge=arguments[0];else if(3===arguments.length){var m=arguments[1],v=arguments[2];this._edge=arguments[0],this.init(m,v),this._label=null}else if(4===arguments.length){var k=arguments[1],G=arguments[2],J=arguments[3];this._edge=arguments[0],this.init(k,G),this._label=J}};so.prototype.compareDirection=function(s){return this._dx===s._dx&&this._dy===s._dy?0:this._quadrant>s._quadrant?1:this._quadrant<s._quadrant?-1:mt.computeOrientation(s._p0,s._p1,this._p1)},so.prototype.getDy=function(){return this._dy},so.prototype.getCoordinate=function(){return this._p0},so.prototype.setNode=function(s){this._node=s},so.prototype.print=function(s){var l=Math.atan2(this._dy,this._dx),m=this.getClass().getName(),v=m.lastIndexOf("."),C=m.substring(v+1);s.print("  "+C+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+l+"   "+this._label)},so.prototype.compareTo=function(s){return this.compareDirection(s)},so.prototype.getDirectedCoordinate=function(){return this._p1},so.prototype.getDx=function(){return this._dx},so.prototype.getLabel=function(){return this._label},so.prototype.getEdge=function(){return this._edge},so.prototype.getQuadrant=function(){return this._quadrant},so.prototype.getNode=function(){return this._node},so.prototype.toString=function(){var s=Math.atan2(this._dy,this._dx),l=this.getClass().getName(),m=l.lastIndexOf(".");return"  "+l.substring(m+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+s+"   "+this._label},so.prototype.computeLabel=function(s){},so.prototype.init=function(s,l){this._p0=s,this._p1=l,this._dx=l.x-s.x,this._dy=l.y-s.y,this._quadrant=Nr.quadrant(this._dx,this._dy),ke.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},so.prototype.interfaces_=function(){return[ve]},so.prototype.getClass=function(){return so};var Xr=function(s){function l(){var m=arguments[0],v=arguments[1];if(s.call(this,m),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=v,v)this.init(m.getCoordinate(0),m.getCoordinate(1));else{var C=m.getNumPoints()-1;this.init(m.getCoordinate(C),m.getCoordinate(C-1))}this.computeDirectedLabel()}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.getNextMin=function(){return this._nextMin},l.prototype.getDepth=function(m){return this._depth[m]},l.prototype.setVisited=function(m){this._isVisited=m},l.prototype.computeDirectedLabel=function(){this._label=new tr(this._edge.getLabel()),this._isForward||this._label.flip()},l.prototype.getNext=function(){return this._next},l.prototype.setDepth=function(m,v){if(-999!==this._depth[m]&&this._depth[m]!==v)throw new zn("assigned depths do not match",this.getCoordinate());this._depth[m]=v},l.prototype.isInteriorAreaEdge=function(){for(var m=!0,v=0;v<2;v++)this._label.isArea(v)&&this._label.getLocation(v,ft.LEFT)===de.INTERIOR&&this._label.getLocation(v,ft.RIGHT)===de.INTERIOR||(m=!1);return m},l.prototype.setNextMin=function(m){this._nextMin=m},l.prototype.print=function(m){s.prototype.print.call(this,m),m.print(" "+this._depth[ft.LEFT]+"/"+this._depth[ft.RIGHT]),m.print(" ("+this.getDepthDelta()+")"),this._isInResult&&m.print(" inResult")},l.prototype.setMinEdgeRing=function(m){this._minEdgeRing=m},l.prototype.isLineEdge=function(){var m=this._label.isLine(0)||this._label.isLine(1),v=!this._label.isArea(0)||this._label.allPositionsEqual(0,de.EXTERIOR),C=!this._label.isArea(1)||this._label.allPositionsEqual(1,de.EXTERIOR);return m&&v&&C},l.prototype.setEdgeRing=function(m){this._edgeRing=m},l.prototype.getMinEdgeRing=function(){return this._minEdgeRing},l.prototype.getDepthDelta=function(){var m=this._edge.getDepthDelta();return this._isForward||(m=-m),m},l.prototype.setInResult=function(m){this._isInResult=m},l.prototype.getSym=function(){return this._sym},l.prototype.isForward=function(){return this._isForward},l.prototype.getEdge=function(){return this._edge},l.prototype.printEdge=function(m){this.print(m),m.print(" "),this._isForward?this._edge.print(m):this._edge.printReverse(m)},l.prototype.setSym=function(m){this._sym=m},l.prototype.setVisitedEdge=function(m){this.setVisited(m),this._sym.setVisited(m)},l.prototype.setEdgeDepths=function(m,v){var C=this.getEdge().getDepthDelta();this._isForward||(C=-C);var k=1;m===ft.LEFT&&(k=-1);var G=ft.opposite(m),J=v+C*k;this.setDepth(m,v),this.setDepth(G,J)},l.prototype.getEdgeRing=function(){return this._edgeRing},l.prototype.isInResult=function(){return this._isInResult},l.prototype.setNext=function(m){this._next=m},l.prototype.isVisited=function(){return this._isVisited},l.prototype.interfaces_=function(){return[]},l.prototype.getClass=function(){return l},l.depthFactor=function(m,v){return m===de.EXTERIOR&&v===de.INTERIOR?1:m===de.INTERIOR&&v===de.EXTERIOR?-1:0},l}(so),Cu=function(){};Cu.prototype.createNode=function(s){return new Ea(s,null)},Cu.prototype.interfaces_=function(){return[]},Cu.prototype.getClass=function(){return Cu};var os=function(){this._edges=new dn,this._nodes=null,this._edgeEndList=new dn,0===arguments.length?this._nodes=new ka(new Cu):1===arguments.length&&(this._nodes=new ka(arguments[0]))};os.prototype.printEdges=function(s){s.println("Edges:");for(var l=0;l<this._edges.size();l++){s.println("edge "+l+":");var m=this._edges.get(l);m.print(s),m.eiList.print(s)}},os.prototype.find=function(s){return this._nodes.find(s)},os.prototype.addNode=function(){return arguments[0]instanceof Ea||arguments[0]instanceof se?this._nodes.addNode(arguments[0]):void 0},os.prototype.getNodeIterator=function(){return this._nodes.iterator()},os.prototype.linkResultDirectedEdges=function(){for(var s=this._nodes.iterator();s.hasNext();)s.next().getEdges().linkResultDirectedEdges()},os.prototype.debugPrintln=function(s){si.out.println(s)},os.prototype.isBoundaryNode=function(s,l){var m=this._nodes.find(l);if(null===m)return!1;var v=m.getLabel();return null!==v&&v.getLocation(s)===de.BOUNDARY},os.prototype.linkAllDirectedEdges=function(){for(var s=this._nodes.iterator();s.hasNext();)s.next().getEdges().linkAllDirectedEdges()},os.prototype.matchInSameDirection=function(s,l,m,v){return!!s.equals(m)&&mt.computeOrientation(s,l,v)===mt.COLLINEAR&&Nr.quadrant(s,l)===Nr.quadrant(m,v)},os.prototype.getEdgeEnds=function(){return this._edgeEndList},os.prototype.debugPrint=function(s){si.out.print(s)},os.prototype.getEdgeIterator=function(){return this._edges.iterator()},os.prototype.findEdgeInSameDirection=function(s,l){for(var m=0;m<this._edges.size();m++){var v=this._edges.get(m),C=v.getCoordinates();if(this.matchInSameDirection(s,l,C[0],C[1])||this.matchInSameDirection(s,l,C[C.length-1],C[C.length-2]))return v}return null},os.prototype.insertEdge=function(s){this._edges.add(s)},os.prototype.findEdgeEnd=function(s){for(var l=this.getEdgeEnds().iterator();l.hasNext();){var m=l.next();if(m.getEdge()===s)return m}return null},os.prototype.addEdges=function(s){for(var l=s.iterator();l.hasNext();){var m=l.next();this._edges.add(m);var v=new Xr(m,!0),C=new Xr(m,!1);v.setSym(C),C.setSym(v),this.add(v),this.add(C)}},os.prototype.add=function(s){this._nodes.add(s),this._edgeEndList.add(s)},os.prototype.getNodes=function(){return this._nodes.values()},os.prototype.findEdge=function(s,l){for(var m=0;m<this._edges.size();m++){var v=this._edges.get(m),C=v.getCoordinates();if(s.equals(C[0])&&l.equals(C[1]))return v}return null},os.prototype.interfaces_=function(){return[]},os.prototype.getClass=function(){return os},os.linkResultDirectedEdges=function(s){for(var l=s.iterator();l.hasNext();)l.next().getEdges().linkResultDirectedEdges()};var Ws=function(){this._geometryFactory=null,this._shellList=new dn,this._geometryFactory=arguments[0]};Ws.prototype.sortShellsAndHoles=function(s,l,m){for(var v=s.iterator();v.hasNext();){var C=v.next();C.isHole()?m.add(C):l.add(C)}},Ws.prototype.computePolygons=function(s){for(var l=new dn,m=s.iterator();m.hasNext();){var v=m.next().toPolygon(this._geometryFactory);l.add(v)}return l},Ws.prototype.placeFreeHoles=function(s,l){for(var m=l.iterator();m.hasNext();){var v=m.next();if(null===v.getShell()){var C=this.findEdgeRingContaining(v,s);if(null===C)throw new zn("unable to assign hole to a shell",v.getCoordinate(0));v.setShell(C)}}},Ws.prototype.buildMinimalEdgeRings=function(s,l,m){for(var v=new dn,C=s.iterator();C.hasNext();){var k=C.next();if(k.getMaxNodeDegree()>2){k.linkDirectedEdgesForMinimalEdgeRings();var G=k.buildMinimalRings(),J=this.findShell(G);null!==J?(this.placePolygonHoles(J,G),l.add(J)):m.addAll(G)}else v.add(k)}return v},Ws.prototype.containsPoint=function(s){for(var l=this._shellList.iterator();l.hasNext();)if(l.next().containsPoint(s))return!0;return!1},Ws.prototype.buildMaximalEdgeRings=function(s){for(var l=new dn,m=s.iterator();m.hasNext();){var v=m.next();if(v.isInResult()&&v.getLabel().isArea()&&null===v.getEdgeRing()){var C=new Nd(v,this._geometryFactory);l.add(C),C.setInResult()}}return l},Ws.prototype.placePolygonHoles=function(s,l){for(var m=l.iterator();m.hasNext();){var v=m.next();v.isHole()&&v.setShell(s)}},Ws.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Ws.prototype.findEdgeRingContaining=function(s,l){for(var m=s.getLinearRing(),v=m.getEnvelopeInternal(),C=m.getCoordinateN(0),k=null,G=null,J=l.iterator();J.hasNext();){var fe=J.next(),pe=fe.getLinearRing(),ot=pe.getEnvelopeInternal();null!==k&&(G=k.getLinearRing().getEnvelopeInternal());var nt=!1;ot.contains(v)&&mt.isPointInRing(C,pe.getCoordinates())&&(nt=!0),nt&&(null===k||G.contains(ot))&&(k=fe)}return k},Ws.prototype.findShell=function(s){for(var l=0,m=null,v=s.iterator();v.hasNext();){var C=v.next();C.isHole()||(m=C,l++)}return ke.isTrue(l<=1,"found two shells in MinimalEdgeRing list"),m},Ws.prototype.add=function(){if(1===arguments.length){var s=arguments[0];this.add(s.getEdgeEnds(),s.getNodes())}else if(2===arguments.length){var l=arguments[0];os.linkResultDirectedEdges(arguments[1]);var v=this.buildMaximalEdgeRings(l),C=new dn,k=this.buildMinimalEdgeRings(v,this._shellList,C);this.sortShellsAndHoles(k,this._shellList,C),this.placeFreeHoles(this._shellList,C)}},Ws.prototype.interfaces_=function(){return[]},Ws.prototype.getClass=function(){return Ws};var pc=function(){};pc.prototype.getBounds=function(){},pc.prototype.interfaces_=function(){return[]},pc.prototype.getClass=function(){return pc};var El=function(){this._bounds=null,this._item=null;var l=arguments[1];this._bounds=arguments[0],this._item=l};El.prototype.getItem=function(){return this._item},El.prototype.getBounds=function(){return this._bounds},El.prototype.interfaces_=function(){return[pc,o]},El.prototype.getClass=function(){return El};var Vs=function(){this._size=null,this._items=null,this._size=0,this._items=new dn,this._items.add(null)};Vs.prototype.poll=function(){if(this.isEmpty())return null;var s=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),s},Vs.prototype.size=function(){return this._size},Vs.prototype.reorder=function(s){for(var l=null,m=this._items.get(s);2*s<=this._size&&((l=2*s)!==this._size&&this._items.get(l+1).compareTo(this._items.get(l))<0&&l++,this._items.get(l).compareTo(m)<0);s=l)this._items.set(s,this._items.get(l));this._items.set(s,m)},Vs.prototype.clear=function(){this._size=0,this._items.clear()},Vs.prototype.isEmpty=function(){return 0===this._size},Vs.prototype.add=function(s){this._items.add(null),this._size+=1;var l=this._size;for(this._items.set(0,s);s.compareTo(this._items.get(Math.trunc(l/2)))<0;l/=2)this._items.set(l,this._items.get(Math.trunc(l/2)));this._items.set(l,s)},Vs.prototype.interfaces_=function(){return[]},Vs.prototype.getClass=function(){return Vs};var mc=function(){};mc.prototype.visitItem=function(s){},mc.prototype.interfaces_=function(){return[]},mc.prototype.getClass=function(){return mc};var tc=function(){};tc.prototype.insert=function(s,l){},tc.prototype.remove=function(s,l){},tc.prototype.query=function(){},tc.prototype.interfaces_=function(){return[]},tc.prototype.getClass=function(){return tc};var ss=function(){this._childBoundables=new dn,this._bounds=null,this._level=null,0!==arguments.length&&1===arguments.length&&(this._level=arguments[0])},Bd={serialVersionUID:{configurable:!0}};ss.prototype.getLevel=function(){return this._level},ss.prototype.size=function(){return this._childBoundables.size()},ss.prototype.getChildBoundables=function(){return this._childBoundables},ss.prototype.addChildBoundable=function(s){ke.isTrue(null===this._bounds),this._childBoundables.add(s)},ss.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},ss.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},ss.prototype.interfaces_=function(){return[pc,o]},ss.prototype.getClass=function(){return ss},Bd.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(ss,Bd);var Cl=function(){};Cl.reverseOrder=function(){return{compare:function(s,l){return l.compareTo(s)}}},Cl.min=function(s){return Cl.sort(s),s.get(0)},Cl.sort=function(s,l){var m=s.toArray();l?Ge.sort(m,l):Ge.sort(m);for(var v=s.iterator(),C=0,k=m.length;C<k;C++)v.next(),v.set(m[C])},Cl.singletonList=function(s){var l=new dn;return l.add(s),l};var Kr=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var l=arguments[1],m=arguments[2];this._boundable1=arguments[0],this._boundable2=l,this._itemDistance=m,this._distance=this.distance()};Kr.prototype.expandToQueue=function(s,l){var m=Kr.isComposite(this._boundable1),v=Kr.isComposite(this._boundable2);if(m&&v)return Kr.area(this._boundable1)>Kr.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,s,l),null):(this.expand(this._boundable2,this._boundable1,s,l),null);if(m)return this.expand(this._boundable1,this._boundable2,s,l),null;if(v)return this.expand(this._boundable2,this._boundable1,s,l),null;throw new ye("neither boundable is composite")},Kr.prototype.isLeaves=function(){return!(Kr.isComposite(this._boundable1)||Kr.isComposite(this._boundable2))},Kr.prototype.compareTo=function(s){return this._distance<s._distance?-1:this._distance>s._distance?1:0},Kr.prototype.expand=function(s,l,m,v){for(var C=s.getChildBoundables().iterator();C.hasNext();){var k=C.next(),G=new Kr(k,l,this._itemDistance);G.getDistance()<v&&m.add(G)}},Kr.prototype.getBoundable=function(s){return 0===s?this._boundable1:this._boundable2},Kr.prototype.getDistance=function(){return this._distance},Kr.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},Kr.prototype.interfaces_=function(){return[ve]},Kr.prototype.getClass=function(){return Kr},Kr.area=function(s){return s.getBounds().getArea()},Kr.isComposite=function(s){return s instanceof ss};var Ss=function s(){if(this._root=null,this._built=!1,this._itemBoundables=new dn,this._nodeCapacity=null,0===arguments.length)this._nodeCapacity=s.DEFAULT_NODE_CAPACITY;else if(1===arguments.length){var m=arguments[0];ke.isTrue(m>1,"Node capacity must be greater than 1"),this._nodeCapacity=m}},Uu={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};Ss.prototype.getNodeCapacity=function(){return this._nodeCapacity},Ss.prototype.lastNode=function(s){return s.get(s.size()-1)},Ss.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var s=0,l=arguments[0].getChildBoundables().iterator();l.hasNext();){var m=l.next();m instanceof ss?s+=this.size(m):m instanceof El&&(s+=1)}return s}},Ss.prototype.removeItem=function(s,l){for(var m=null,v=s.getChildBoundables().iterator();v.hasNext();){var C=v.next();C instanceof El&&C.getItem()===l&&(m=C)}return null!==m&&(s.getChildBoundables().remove(m),!0)},Ss.prototype.itemsTree=function(){if(0===arguments.length){this.build();var s=this.itemsTree(this._root);return null===s?new dn:s}if(1===arguments.length){for(var l=arguments[0],m=new dn,v=l.getChildBoundables().iterator();v.hasNext();){var C=v.next();if(C instanceof ss){var k=this.itemsTree(C);null!==k&&m.add(k)}else C instanceof El?m.add(C.getItem()):ke.shouldNeverReachHere()}return m.size()<=0?null:m}},Ss.prototype.insert=function(s,l){ke.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new El(s,l))},Ss.prototype.boundablesAtLevel=function(){if(1===arguments.length){var s=arguments[0],l=new dn;return this.boundablesAtLevel(s,this._root,l),l}if(3===arguments.length){var m=arguments[0],v=arguments[1],C=arguments[2];if(ke.isTrue(m>-2),v.getLevel()===m)return C.add(v),null;for(var k=v.getChildBoundables().iterator();k.hasNext();){var G=k.next();G instanceof ss?this.boundablesAtLevel(m,G,C):(ke.isTrue(G instanceof El),-1===m&&C.add(G))}return null}},Ss.prototype.query=function(){if(1===arguments.length){var s=arguments[0];this.build();var l=new dn;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),s)&&this.query(s,this._root,l),l}if(2===arguments.length){var m=arguments[0],v=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),m)&&this.query(m,this._root,v)}else if(3===arguments.length)if(dt(arguments[2],mc)&&arguments[0]instanceof Object&&arguments[1]instanceof ss)for(var C=arguments[0],G=arguments[2],J=arguments[1].getChildBoundables(),fe=0;fe<J.size();fe++){var pe=J.get(fe);this.getIntersectsOp().intersects(pe.getBounds(),C)&&(pe instanceof ss?this.query(C,pe,G):pe instanceof El?G.visitItem(pe.getItem()):ke.shouldNeverReachHere())}else if(dt(arguments[2],nr)&&arguments[0]instanceof Object&&arguments[1]instanceof ss)for(var ot=arguments[0],wt=arguments[2],Pt=arguments[1].getChildBoundables(),$t=0;$t<Pt.size();$t++){var Ft=Pt.get($t);this.getIntersectsOp().intersects(Ft.getBounds(),ot)&&(Ft instanceof ss?this.query(ot,Ft,wt):Ft instanceof El?wt.add(Ft.getItem()):ke.shouldNeverReachHere())}},Ss.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},Ss.prototype.getRoot=function(){return this.build(),this._root},Ss.prototype.remove=function(){if(2===arguments.length){var s=arguments[0],l=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),s)&&this.remove(s,this._root,l)}if(3===arguments.length){var m=arguments[0],v=arguments[1],C=arguments[2],k=this.removeItem(v,C);if(k)return!0;for(var G=null,J=v.getChildBoundables().iterator();J.hasNext();){var fe=J.next();if(this.getIntersectsOp().intersects(fe.getBounds(),m)&&fe instanceof ss&&(k=this.remove(m,fe,C))){G=fe;break}}return null!==G&&G.getChildBoundables().isEmpty()&&v.getChildBoundables().remove(G),k}},Ss.prototype.createHigherLevels=function(s,l){ke.isTrue(!s.isEmpty());var m=this.createParentBoundables(s,l+1);return 1===m.size()?m.get(0):this.createHigherLevels(m,l+1)},Ss.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var s=0,l=arguments[0].getChildBoundables().iterator();l.hasNext();){var m=l.next();if(m instanceof ss){var v=this.depth(m);v>s&&(s=v)}}return s+1}},Ss.prototype.createParentBoundables=function(s,l){ke.isTrue(!s.isEmpty());var m=new dn;m.add(this.createNode(l));var v=new dn(s);Cl.sort(v,this.getComparator());for(var C=v.iterator();C.hasNext();){var k=C.next();this.lastNode(m).getChildBoundables().size()===this.getNodeCapacity()&&m.add(this.createNode(l)),this.lastNode(m).addChildBoundable(k)}return m},Ss.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},Ss.prototype.interfaces_=function(){return[o]},Ss.prototype.getClass=function(){return Ss},Ss.compareDoubles=function(s,l){return s>l?1:s<l?-1:0},Uu.IntersectsOp.get=function(){return zd},Uu.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},Uu.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(Ss,Uu);var zd=function(){},Gc=function(){};Gc.prototype.distance=function(s,l){},Gc.prototype.interfaces_=function(){return[]},Gc.prototype.getClass=function(){return Gc};var bd=function(s){function l(v){s.call(this,v=v||l.DEFAULT_NODE_CAPACITY)}s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l;var m={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return l.prototype.createParentBoundablesFromVerticalSlices=function(v,C){ke.isTrue(v.length>0);for(var k=new dn,G=0;G<v.length;G++)k.addAll(this.createParentBoundablesFromVerticalSlice(v[G],C));return k},l.prototype.createNode=function(v){return new Vu(v)},l.prototype.size=function(){return 0===arguments.length?s.prototype.size.call(this):s.prototype.size.apply(this,arguments)},l.prototype.insert=function(){if(2!==arguments.length)return s.prototype.insert.apply(this,arguments);var v=arguments[0],C=arguments[1];if(v.isNull())return null;s.prototype.insert.call(this,v,C)},l.prototype.getIntersectsOp=function(){return l.intersectsOp},l.prototype.verticalSlices=function(v,C){for(var k=Math.trunc(Math.ceil(v.size()/C)),G=new Array(C).fill(null),J=v.iterator(),fe=0;fe<C;fe++){G[fe]=new dn;for(var pe=0;J.hasNext()&&pe<k;){var ot=J.next();G[fe].add(ot),pe++}}return G},l.prototype.query=function(){if(1===arguments.length)return s.prototype.query.call(this,arguments[0]);2===arguments.length?s.prototype.query.call(this,arguments[0],arguments[1]):3===arguments.length&&(dt(arguments[2],mc)&&arguments[0]instanceof Object&&arguments[1]instanceof ss||dt(arguments[2],nr)&&arguments[0]instanceof Object&&arguments[1]instanceof ss)&&s.prototype.query.call(this,arguments[0],arguments[1],arguments[2])},l.prototype.getComparator=function(){return l.yComparator},l.prototype.createParentBoundablesFromVerticalSlice=function(v,C){return s.prototype.createParentBoundables.call(this,v,C)},l.prototype.remove=function(){return 2===arguments.length?s.prototype.remove.call(this,arguments[0],arguments[1]):s.prototype.remove.apply(this,arguments)},l.prototype.depth=function(){return 0===arguments.length?s.prototype.depth.call(this):s.prototype.depth.apply(this,arguments)},l.prototype.createParentBoundables=function(v,C){ke.isTrue(!v.isEmpty());var k=Math.trunc(Math.ceil(v.size()/this.getNodeCapacity())),G=new dn(v);Cl.sort(G,l.xComparator);var J=this.verticalSlices(G,Math.trunc(Math.ceil(Math.sqrt(k))));return this.createParentBoundablesFromVerticalSlices(J,C)},l.prototype.nearestNeighbour=function(){if(1===arguments.length){if(dt(arguments[0],Gc)){var v=arguments[0],C=new Kr(this.getRoot(),this.getRoot(),v);return this.nearestNeighbour(C)}if(arguments[0]instanceof Kr)return this.nearestNeighbour(arguments[0],ce.POSITIVE_INFINITY)}else if(2===arguments.length){if(arguments[0]instanceof l&&dt(arguments[1],Gc)){var G=arguments[0],J=arguments[1],fe=new Kr(this.getRoot(),G.getRoot(),J);return this.nearestNeighbour(fe)}if(arguments[0]instanceof Kr&&"number"==typeof arguments[1]){var pe=arguments[0],ot=arguments[1],nt=null,wt=new Vs;for(wt.add(pe);!wt.isEmpty()&&ot>0;){var Pt=wt.poll(),$t=Pt.getDistance();if($t>=ot)break;Pt.isLeaves()?(ot=$t,nt=Pt):Pt.expandToQueue(wt,ot)}return[nt.getBoundable(0).getItem(),nt.getBoundable(1).getItem()]}}else if(3===arguments.length){var Dn=arguments[2],Ln=new El(arguments[0],arguments[1]),Zi=new Kr(this.getRoot(),Ln,Dn);return this.nearestNeighbour(Zi)[0]}},l.prototype.interfaces_=function(){return[tc,o]},l.prototype.getClass=function(){return l},l.centreX=function(v){return l.avg(v.getMinX(),v.getMaxX())},l.avg=function(v,C){return(v+C)/2},l.centreY=function(v){return l.avg(v.getMinY(),v.getMaxY())},m.STRtreeNode.get=function(){return Vu},m.serialVersionUID.get=function(){return 0x39920f7d5f261e0},m.xComparator.get=function(){return{interfaces_:function(){return[Fe]},compare:function(v,C){return s.compareDoubles(l.centreX(v.getBounds()),l.centreX(C.getBounds()))}}},m.yComparator.get=function(){return{interfaces_:function(){return[Fe]},compare:function(v,C){return s.compareDoubles(l.centreY(v.getBounds()),l.centreY(C.getBounds()))}}},m.intersectsOp.get=function(){return{interfaces_:function(){return[s.IntersectsOp]},intersects:function(v,C){return v.intersects(C)}}},m.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(l,m),l}(Ss),Vu=function(s){function l(){s.call(this,arguments[0])}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.computeBounds=function(){for(var m=null,v=this.getChildBoundables().iterator();v.hasNext();){var C=v.next();null===m?m=new hn(C.getBounds()):m.expandToInclude(C.getBounds())}return m},l.prototype.interfaces_=function(){return[]},l.prototype.getClass=function(){return l},l}(ss),Ka=function(){};Ka.prototype.interfaces_=function(){return[]},Ka.prototype.getClass=function(){return Ka},Ka.relativeSign=function(s,l){return s<l?-1:s>l?1:0},Ka.compare=function(s,l,m){if(l.equals2D(m))return 0;var v=Ka.relativeSign(l.x,m.x),C=Ka.relativeSign(l.y,m.y);switch(s){case 0:return Ka.compareValue(v,C);case 1:return Ka.compareValue(C,v);case 2:return Ka.compareValue(C,-v);case 3:return Ka.compareValue(-v,C);case 4:return Ka.compareValue(-v,-C);case 5:return Ka.compareValue(-C,-v);case 6:return Ka.compareValue(-C,v);case 7:return Ka.compareValue(v,-C)}return ke.shouldNeverReachHere("invalid octant value"),0},Ka.compareValue=function(s,l){return s<0?-1:s>0?1:l<0?-1:l>0?1:0};var ou=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var s=arguments[0],l=arguments[1],m=arguments[2],v=arguments[3];this._segString=s,this.coord=new se(l),this.segmentIndex=m,this._segmentOctant=v,this._isInterior=!l.equals2D(s.getCoordinate(m))};ou.prototype.getCoordinate=function(){return this.coord},ou.prototype.print=function(s){s.print(this.coord),s.print(" seg # = "+this.segmentIndex)},ou.prototype.compareTo=function(s){var l=s;return this.segmentIndex<l.segmentIndex?-1:this.segmentIndex>l.segmentIndex?1:this.coord.equals2D(l.coord)?0:Ka.compare(this._segmentOctant,this.coord,l.coord)},ou.prototype.isEndPoint=function(s){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===s},ou.prototype.isInterior=function(){return this._isInterior},ou.prototype.interfaces_=function(){return[ve]},ou.prototype.getClass=function(){return ou};var Ds=function(){this._nodeMap=new Ke,this._edge=null,this._edge=arguments[0]};Ds.prototype.getSplitCoordinates=function(){var s=new Lr;this.addEndpoints();for(var l=this.iterator(),m=l.next();l.hasNext();){var v=l.next();this.addEdgeCoordinates(m,v,s),m=v}return s.toCoordinateArray()},Ds.prototype.addCollapsedNodes=function(){var s=new dn;this.findCollapsesFromInsertedNodes(s),this.findCollapsesFromExistingVertices(s);for(var l=s.iterator();l.hasNext();){var m=l.next().intValue();this.add(this._edge.getCoordinate(m),m)}},Ds.prototype.print=function(s){s.println("Intersections:");for(var l=this.iterator();l.hasNext();)l.next().print(s)},Ds.prototype.findCollapsesFromExistingVertices=function(s){for(var l=0;l<this._edge.size()-2;l++){var m=this._edge.getCoordinate(l),v=this._edge.getCoordinate(l+2);m.equals2D(v)&&s.add(new gt(l+1))}},Ds.prototype.addEdgeCoordinates=function(s,l,m){var v=this._edge.getCoordinate(l.segmentIndex),C=l.isInterior()||!l.coord.equals2D(v);m.add(new se(s.coord),!1);for(var k=s.segmentIndex+1;k<=l.segmentIndex;k++)m.add(this._edge.getCoordinate(k));C&&m.add(new se(l.coord))},Ds.prototype.iterator=function(){return this._nodeMap.values().iterator()},Ds.prototype.addSplitEdges=function(s){this.addEndpoints(),this.addCollapsedNodes();for(var l=this.iterator(),m=l.next();l.hasNext();){var v=l.next(),C=this.createSplitEdge(m,v);s.add(C),m=v}},Ds.prototype.findCollapseIndex=function(s,l,m){if(!s.coord.equals2D(l.coord))return!1;var v=l.segmentIndex-s.segmentIndex;return l.isInterior()||v--,1===v&&(m[0]=s.segmentIndex+1,!0)},Ds.prototype.findCollapsesFromInsertedNodes=function(s){for(var l=new Array(1).fill(null),m=this.iterator(),v=m.next();m.hasNext();){var C=m.next();this.findCollapseIndex(v,C,l)&&s.add(new gt(l[0])),v=C}},Ds.prototype.getEdge=function(){return this._edge},Ds.prototype.addEndpoints=function(){var s=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(s),s)},Ds.prototype.createSplitEdge=function(s,l){var m=l.segmentIndex-s.segmentIndex+2,v=this._edge.getCoordinate(l.segmentIndex),C=l.isInterior()||!l.coord.equals2D(v);C||m--;var k=new Array(m).fill(null),G=0;k[G++]=new se(s.coord);for(var J=s.segmentIndex+1;J<=l.segmentIndex;J++)k[G++]=this._edge.getCoordinate(J);return C&&(k[G]=new se(l.coord)),new as(k,this._edge.getData())},Ds.prototype.add=function(s,l){var m=new ou(this._edge,s,l,this._edge.getSegmentOctant(l)),v=this._nodeMap.get(m);return null!==v?(ke.isTrue(v.coord.equals2D(s),"Found equal nodes with different coordinates"),v):(this._nodeMap.put(m,m),m)},Ds.prototype.checkSplitEdgesCorrectness=function(s){var l=this._edge.getCoordinates(),m=s.get(0).getCoordinate(0);if(!m.equals2D(l[0]))throw new je("bad split edge start point at "+m);var v=s.get(s.size()-1).getCoordinates(),C=v[v.length-1];if(!C.equals2D(l[l.length-1]))throw new je("bad split edge end point at "+C)},Ds.prototype.interfaces_=function(){return[]},Ds.prototype.getClass=function(){return Ds};var su=function(){};su.prototype.interfaces_=function(){return[]},su.prototype.getClass=function(){return su},su.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var s=arguments[0],l=arguments[1];if(0===s&&0===l)throw new ye("Cannot compute the octant for point ( "+s+", "+l+" )");var m=Math.abs(s),v=Math.abs(l);return s>=0?l>=0?m>=v?0:1:m>=v?7:6:l>=0?m>=v?3:2:m>=v?4:5}if(arguments[0]instanceof se&&arguments[1]instanceof se){var C=arguments[0],k=arguments[1],G=k.x-C.x,J=k.y-C.y;if(0===G&&0===J)throw new ye("Cannot compute the octant for two identical points "+C);return su.octant(G,J)}};var Sl=function(){};Sl.prototype.getCoordinates=function(){},Sl.prototype.size=function(){},Sl.prototype.getCoordinate=function(s){},Sl.prototype.isClosed=function(){},Sl.prototype.setData=function(s){},Sl.prototype.getData=function(){},Sl.prototype.interfaces_=function(){return[]},Sl.prototype.getClass=function(){return Sl};var au=function(){};au.prototype.addIntersection=function(s,l){},au.prototype.interfaces_=function(){return[Sl]},au.prototype.getClass=function(){return au};var as=function(){this._nodeList=new Ds(this),this._pts=null,this._data=null;var l=arguments[1];this._pts=arguments[0],this._data=l};as.prototype.getCoordinates=function(){return this._pts},as.prototype.size=function(){return this._pts.length},as.prototype.getCoordinate=function(s){return this._pts[s]},as.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},as.prototype.getSegmentOctant=function(s){return s===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(s),this.getCoordinate(s+1))},as.prototype.setData=function(s){this._data=s},as.prototype.safeOctant=function(s,l){return s.equals2D(l)?0:su.octant(s,l)},as.prototype.getData=function(){return this._data},as.prototype.addIntersection=function(){if(2===arguments.length)this.addIntersectionNode(arguments[0],arguments[1]);else if(4===arguments.length){var v=arguments[1],k=new se(arguments[0].getIntersection(arguments[3]));this.addIntersection(k,v)}},as.prototype.toString=function(){return It.toLineString(new ei(this._pts))},as.prototype.getNodeList=function(){return this._nodeList},as.prototype.addIntersectionNode=function(s,l){var m=l,v=m+1;return v<this._pts.length&&s.equals2D(this._pts[v])&&(m=v),this._nodeList.add(s,m)},as.prototype.addIntersections=function(s,l,m){for(var v=0;v<s.getIntersectionNum();v++)this.addIntersection(s,l,m,v)},as.prototype.interfaces_=function(){return[au]},as.prototype.getClass=function(){return as},as.getNodedSubstrings=function(){if(1===arguments.length){var s=arguments[0],l=new dn;return as.getNodedSubstrings(s,l),l}if(2===arguments.length)for(var v=arguments[1],C=arguments[0].iterator();C.hasNext();)C.next().getNodeList().addSplitEdges(v)};var Ci=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new se,this.p1=new se;else if(1===arguments.length){var s=arguments[0];this.p0=new se(s.p0),this.p1=new se(s.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var v=arguments[2],C=arguments[3];this.p0=new se(arguments[0],arguments[1]),this.p1=new se(v,C)}},Su={serialVersionUID:{configurable:!0}};Ci.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},Ci.prototype.orientationIndex=function(){if(arguments[0]instanceof Ci){var s=arguments[0],l=mt.orientationIndex(this.p0,this.p1,s.p0),m=mt.orientationIndex(this.p0,this.p1,s.p1);return l>=0&&m>=0||l<=0&&m<=0?Math.max(l,m):0}if(arguments[0]instanceof se)return mt.orientationIndex(this.p0,this.p1,arguments[0])},Ci.prototype.toGeometry=function(s){return s.createLineString([this.p0,this.p1])},Ci.prototype.isVertical=function(){return this.p0.x===this.p1.x},Ci.prototype.equals=function(s){if(!(s instanceof Ci))return!1;var l=s;return this.p0.equals(l.p0)&&this.p1.equals(l.p1)},Ci.prototype.intersection=function(s){var l=new Yt;return l.computeIntersection(this.p0,this.p1,s.p0,s.p1),l.hasIntersection()?l.getIntersection(0):null},Ci.prototype.project=function(){if(arguments[0]instanceof se){var s=arguments[0];if(s.equals(this.p0)||s.equals(this.p1))return new se(s);var l=this.projectionFactor(s),m=new se;return m.x=this.p0.x+l*(this.p1.x-this.p0.x),m.y=this.p0.y+l*(this.p1.y-this.p0.y),m}if(arguments[0]instanceof Ci){var v=arguments[0],C=this.projectionFactor(v.p0),k=this.projectionFactor(v.p1);if(C>=1&&k>=1||C<=0&&k<=0)return null;var G=this.project(v.p0);C<0&&(G=this.p0),C>1&&(G=this.p1);var J=this.project(v.p1);return k<0&&(J=this.p0),k>1&&(J=this.p1),new Ci(G,J)}},Ci.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},Ci.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},Ci.prototype.getCoordinate=function(s){return 0===s?this.p0:this.p1},Ci.prototype.distancePerpendicular=function(s){return mt.distancePointLinePerpendicular(s,this.p0,this.p1)},Ci.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},Ci.prototype.midPoint=function(){return Ci.midPoint(this.p0,this.p1)},Ci.prototype.projectionFactor=function(s){if(s.equals(this.p0))return 0;if(s.equals(this.p1))return 1;var l=this.p1.x-this.p0.x,m=this.p1.y-this.p0.y,v=l*l+m*m;return v<=0?ce.NaN:((s.x-this.p0.x)*l+(s.y-this.p0.y)*m)/v},Ci.prototype.closestPoints=function(s){var l=this.intersection(s);if(null!==l)return[l,l];var m=new Array(2).fill(null),v=ce.MAX_VALUE,C=null,k=this.closestPoint(s.p0);v=k.distance(s.p0),m[0]=k,m[1]=s.p0;var G=this.closestPoint(s.p1);(C=G.distance(s.p1))<v&&(v=C,m[0]=G,m[1]=s.p1);var J=s.closestPoint(this.p0);(C=J.distance(this.p0))<v&&(v=C,m[0]=this.p0,m[1]=J);var fe=s.closestPoint(this.p1);return(C=fe.distance(this.p1))<v&&(v=C,m[0]=this.p1,m[1]=fe),m},Ci.prototype.closestPoint=function(s){var l=this.projectionFactor(s);return l>0&&l<1?this.project(s):this.p0.distance(s)<this.p1.distance(s)?this.p0:this.p1},Ci.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},Ci.prototype.getLength=function(){return this.p0.distance(this.p1)},Ci.prototype.compareTo=function(s){var l=s,m=this.p0.compareTo(l.p0);return 0!==m?m:this.p1.compareTo(l.p1)},Ci.prototype.reverse=function(){var s=this.p0;this.p0=this.p1,this.p1=s},Ci.prototype.equalsTopo=function(s){return this.p0.equals(s.p0)&&(this.p1.equals(s.p1)||this.p0.equals(s.p1))&&this.p1.equals(s.p0)},Ci.prototype.lineIntersection=function(s){try{return $n.intersection(this.p0,this.p1,s.p0,s.p1)}catch(l){if(!(l instanceof Sn))throw l}return null},Ci.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},Ci.prototype.pointAlongOffset=function(s,l){var m=this.p0.x+s*(this.p1.x-this.p0.x),v=this.p0.y+s*(this.p1.y-this.p0.y),C=this.p1.x-this.p0.x,k=this.p1.y-this.p0.y,G=Math.sqrt(C*C+k*k),J=0,fe=0;if(0!==l){if(G<=0)throw new Error("Cannot compute offset from zero-length line segment");J=l*C/G,fe=l*k/G}return new se(m-fe,v+J)},Ci.prototype.setCoordinates=function(){if(1===arguments.length){var s=arguments[0];this.setCoordinates(s.p0,s.p1)}else if(2===arguments.length){var l=arguments[0],m=arguments[1];this.p0.x=l.x,this.p0.y=l.y,this.p1.x=m.x,this.p1.y=m.y}},Ci.prototype.segmentFraction=function(s){var l=this.projectionFactor(s);return l<0?l=0:(l>1||ce.isNaN(l))&&(l=1),l},Ci.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},Ci.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},Ci.prototype.distance=function(){if(arguments[0]instanceof Ci){var s=arguments[0];return mt.distanceLineLine(this.p0,this.p1,s.p0,s.p1)}if(arguments[0]instanceof se)return mt.distancePointLine(arguments[0],this.p0,this.p1)},Ci.prototype.pointAlong=function(s){var l=new se;return l.x=this.p0.x+s*(this.p1.x-this.p0.x),l.y=this.p0.y+s*(this.p1.y-this.p0.y),l},Ci.prototype.hashCode=function(){var s=ce.doubleToLongBits(this.p0.x);s^=31*ce.doubleToLongBits(this.p0.y);var l=Math.trunc(s)^Math.trunc(s>>32),m=ce.doubleToLongBits(this.p1.x);return m^=31*ce.doubleToLongBits(this.p1.y),l^Math.trunc(m)^Math.trunc(m>>32)},Ci.prototype.interfaces_=function(){return[ve,o]},Ci.prototype.getClass=function(){return Ci},Ci.midPoint=function(s,l){return new se((s.x+l.x)/2,(s.y+l.y)/2)},Su.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(Ci,Su);var lu=function(){this.tempEnv1=new hn,this.tempEnv2=new hn,this._overlapSeg1=new Ci,this._overlapSeg2=new Ci};lu.prototype.overlap=function(){if(2!==arguments.length&&4===arguments.length){var m=arguments[2],v=arguments[3];arguments[0].getLineSegment(arguments[1],this._overlapSeg1),m.getLineSegment(v,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},lu.prototype.interfaces_=function(){return[]},lu.prototype.getClass=function(){return lu};var Ms=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var l=arguments[1],m=arguments[2],v=arguments[3];this._pts=arguments[0],this._start=l,this._end=m,this._context=v};Ms.prototype.getLineSegment=function(s,l){l.p0=this._pts[s],l.p1=this._pts[s+1]},Ms.prototype.computeSelect=function(s,l,m,v){if(v.tempEnv1.init(this._pts[l],this._pts[m]),m-l==1)return v.select(this,l),null;if(!s.intersects(v.tempEnv1))return null;var G=Math.trunc((l+m)/2);l<G&&this.computeSelect(s,l,G,v),G<m&&this.computeSelect(s,G,m,v)},Ms.prototype.getCoordinates=function(){for(var s=new Array(this._end-this._start+1).fill(null),l=0,m=this._start;m<=this._end;m++)s[l++]=this._pts[m];return s},Ms.prototype.computeOverlaps=function(s,l){this.computeOverlapsInternal(this._start,this._end,s,s._start,s._end,l)},Ms.prototype.setId=function(s){this._id=s},Ms.prototype.select=function(s,l){this.computeSelect(s,this._start,this._end,l)},Ms.prototype.getEnvelope=function(){return null===this._env&&(this._env=new hn(this._pts[this._start],this._pts[this._end])),this._env},Ms.prototype.getEndIndex=function(){return this._end},Ms.prototype.getStartIndex=function(){return this._start},Ms.prototype.getContext=function(){return this._context},Ms.prototype.getId=function(){return this._id},Ms.prototype.computeOverlapsInternal=function(s,l,m,v,C,k){var G=this._pts[s],J=this._pts[l],fe=m._pts[v],pe=m._pts[C];if(l-s==1&&C-v==1)return k.overlap(this,s,m,v),null;if(k.tempEnv1.init(G,J),k.tempEnv2.init(fe,pe),!k.tempEnv1.intersects(k.tempEnv2))return null;var ot=Math.trunc((s+l)/2),nt=Math.trunc((v+C)/2);s<ot&&(v<nt&&this.computeOverlapsInternal(s,ot,m,v,nt,k),nt<C&&this.computeOverlapsInternal(s,ot,m,nt,C,k)),ot<l&&(v<nt&&this.computeOverlapsInternal(ot,l,m,v,nt,k),nt<C&&this.computeOverlapsInternal(ot,l,m,nt,C,k))},Ms.prototype.interfaces_=function(){return[]},Ms.prototype.getClass=function(){return Ms};var hl=function(){};hl.prototype.interfaces_=function(){return[]},hl.prototype.getClass=function(){return hl},hl.getChainStartIndices=function(s){var l=0,m=new dn;m.add(new gt(l));do{var v=hl.findChainEnd(s,l);m.add(new gt(v)),l=v}while(l<s.length-1);return hl.toIntArray(m)},hl.findChainEnd=function(s,l){for(var m=l;m<s.length-1&&s[m].equals2D(s[m+1]);)m++;if(m>=s.length-1)return s.length-1;for(var v=Nr.quadrant(s[m],s[m+1]),C=l+1;C<s.length&&(s[C-1].equals2D(s[C])||Nr.quadrant(s[C-1],s[C])===v);)C++;return C-1},hl.getChains=function(){if(1===arguments.length)return hl.getChains(arguments[0],null);if(2===arguments.length){for(var l=arguments[0],m=arguments[1],v=new dn,C=hl.getChainStartIndices(l),k=0;k<C.length-1;k++){var G=new Ms(l,C[k],C[k+1],m);v.add(G)}return v}},hl.toIntArray=function(s){for(var l=new Array(s.size()).fill(null),m=0;m<l.length;m++)l[m]=s.get(m).intValue();return l};var Sc=function(){};Sc.prototype.computeNodes=function(s){},Sc.prototype.getNodedSubstrings=function(){},Sc.prototype.interfaces_=function(){return[]},Sc.prototype.getClass=function(){return Sc};var ra=function(){this._segInt=null,0!==arguments.length&&1===arguments.length&&this.setSegmentIntersector(arguments[0])};ra.prototype.setSegmentIntersector=function(s){this._segInt=s},ra.prototype.interfaces_=function(){return[Sc]},ra.prototype.getClass=function(){return ra};var gc=function(s){function l(v){v?s.call(this,v):s.call(this),this._monoChains=new dn,this._index=new bd,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l;var m={SegmentOverlapAction:{configurable:!0}};return l.prototype.getMonotoneChains=function(){return this._monoChains},l.prototype.getNodedSubstrings=function(){return as.getNodedSubstrings(this._nodedSegStrings)},l.prototype.getIndex=function(){return this._index},l.prototype.add=function(v){for(var C=hl.getChains(v.getCoordinates(),v).iterator();C.hasNext();){var k=C.next();k.setId(this._idCounter++),this._index.insert(k.getEnvelope(),k),this._monoChains.add(k)}},l.prototype.computeNodes=function(v){this._nodedSegStrings=v;for(var C=v.iterator();C.hasNext();)this.add(C.next());this.intersectChains()},l.prototype.intersectChains=function(){for(var v=new Gu(this._segInt),C=this._monoChains.iterator();C.hasNext();)for(var k=C.next(),G=this._index.query(k.getEnvelope()).iterator();G.hasNext();){var J=G.next();if(J.getId()>k.getId()&&(k.computeOverlaps(J,v),this._nOverlaps++),this._segInt.isDone())return null}},l.prototype.interfaces_=function(){return[]},l.prototype.getClass=function(){return l},m.SegmentOverlapAction.get=function(){return Gu},Object.defineProperties(l,m),l}(ra),Gu=function(s){function l(){s.call(this),this._si=null,this._si=arguments[0]}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.overlap=function(){if(4!==arguments.length)return s.prototype.overlap.apply(this,arguments);var v=arguments[1],C=arguments[2],k=arguments[3],G=arguments[0].getContext(),J=C.getContext();this._si.processIntersections(G,v,J,k)},l.prototype.interfaces_=function(){return[]},l.prototype.getClass=function(){return l},l}(lu),ji=function s(){if(this._quadrantSegments=s.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=s.CAP_ROUND,this._joinStyle=s.JOIN_ROUND,this._mitreLimit=s.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=s.DEFAULT_SIMPLIFY_FACTOR,0!==arguments.length)if(1===arguments.length)this.setQuadrantSegments(arguments[0]);else if(2===arguments.length){var v=arguments[1];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(v)}else if(4===arguments.length){var k=arguments[1],G=arguments[2],J=arguments[3];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(k),this.setJoinStyle(G),this.setMitreLimit(J)}},Vr={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};ji.prototype.getEndCapStyle=function(){return this._endCapStyle},ji.prototype.isSingleSided=function(){return this._isSingleSided},ji.prototype.setQuadrantSegments=function(s){this._quadrantSegments=s,0===this._quadrantSegments&&(this._joinStyle=ji.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=ji.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),s<=0&&(this._quadrantSegments=1),this._joinStyle!==ji.JOIN_ROUND&&(this._quadrantSegments=ji.DEFAULT_QUADRANT_SEGMENTS)},ji.prototype.getJoinStyle=function(){return this._joinStyle},ji.prototype.setJoinStyle=function(s){this._joinStyle=s},ji.prototype.setSimplifyFactor=function(s){this._simplifyFactor=s<0?0:s},ji.prototype.getSimplifyFactor=function(){return this._simplifyFactor},ji.prototype.getQuadrantSegments=function(){return this._quadrantSegments},ji.prototype.setEndCapStyle=function(s){this._endCapStyle=s},ji.prototype.getMitreLimit=function(){return this._mitreLimit},ji.prototype.setMitreLimit=function(s){this._mitreLimit=s},ji.prototype.setSingleSided=function(s){this._isSingleSided=s},ji.prototype.interfaces_=function(){return[]},ji.prototype.getClass=function(){return ji},ji.bufferDistanceError=function(s){var l=Math.PI/2/s;return 1-Math.cos(l/2)},Vr.CAP_ROUND.get=function(){return 1},Vr.CAP_FLAT.get=function(){return 2},Vr.CAP_SQUARE.get=function(){return 3},Vr.JOIN_ROUND.get=function(){return 1},Vr.JOIN_MITRE.get=function(){return 2},Vr.JOIN_BEVEL.get=function(){return 3},Vr.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Vr.DEFAULT_MITRE_LIMIT.get=function(){return 5},Vr.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(ji,Vr);var mo=function(s){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=mt.COUNTERCLOCKWISE,this._inputLine=s||null},Ki={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};mo.prototype.isDeletable=function(s,l,m,v){var C=this._inputLine[s],k=this._inputLine[l],G=this._inputLine[m];return!!this.isConcave(C,k,G)&&!!this.isShallow(C,k,G,v)&&this.isShallowSampled(C,k,s,m,v)},mo.prototype.deleteShallowConcavities=function(){for(var s=1,l=this.findNextNonDeletedIndex(s),m=this.findNextNonDeletedIndex(l),v=!1;m<this._inputLine.length;){var C=!1;this.isDeletable(s,l,m,this._distanceTol)&&(this._isDeleted[l]=mo.DELETE,C=!0,v=!0),l=this.findNextNonDeletedIndex(s=C?m:l),m=this.findNextNonDeletedIndex(l)}return v},mo.prototype.isShallowConcavity=function(s,l,m,v){return mt.computeOrientation(s,l,m)===this._angleOrientation&&mt.distancePointLine(l,s,m)<v},mo.prototype.isShallowSampled=function(s,l,m,v,C){var k=Math.trunc((v-m)/mo.NUM_PTS_TO_CHECK);k<=0&&(k=1);for(var G=m;G<v;G+=k)if(!this.isShallow(s,l,this._inputLine[G],C))return!1;return!0},mo.prototype.isConcave=function(s,l,m){return mt.computeOrientation(s,l,m)===this._angleOrientation},mo.prototype.simplify=function(s){this._distanceTol=Math.abs(s),s<0&&(this._angleOrientation=mt.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var l=!1;do{l=this.deleteShallowConcavities()}while(l);return this.collapseLine()},mo.prototype.findNextNonDeletedIndex=function(s){for(var l=s+1;l<this._inputLine.length&&this._isDeleted[l]===mo.DELETE;)l++;return l},mo.prototype.isShallow=function(s,l,m,v){return mt.distancePointLine(l,s,m)<v},mo.prototype.collapseLine=function(){for(var s=new Lr,l=0;l<this._inputLine.length;l++)this._isDeleted[l]!==mo.DELETE&&s.add(this._inputLine[l]);return s.toCoordinateArray()},mo.prototype.interfaces_=function(){return[]},mo.prototype.getClass=function(){return mo},mo.simplify=function(s,l){return new mo(s).simplify(l)},Ki.INIT.get=function(){return 0},Ki.DELETE.get=function(){return 1},Ki.KEEP.get=function(){return 1},Ki.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(mo,Ki);var pr=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new dn},bo={COORDINATE_ARRAY_TYPE:{configurable:!0}};pr.prototype.getCoordinates=function(){return this._ptList.toArray(pr.COORDINATE_ARRAY_TYPE)},pr.prototype.setPrecisionModel=function(s){this._precisionModel=s},pr.prototype.addPt=function(s){var l=new se(s);if(this._precisionModel.makePrecise(l),this.isRedundant(l))return null;this._ptList.add(l)},pr.prototype.revere=function(){},pr.prototype.addPts=function(s,l){if(l)for(var m=0;m<s.length;m++)this.addPt(s[m]);else for(var v=s.length-1;v>=0;v--)this.addPt(s[v])},pr.prototype.isRedundant=function(s){if(this._ptList.size()<1)return!1;var l=this._ptList.get(this._ptList.size()-1);return s.distance(l)<this._minimimVertexDistance},pr.prototype.toString=function(){return(new Xi).createLineString(this.getCoordinates()).toString()},pr.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var s=new se(this._ptList.get(0)),l=this._ptList.get(this._ptList.size()-1);if(s.equals(l))return null;this._ptList.add(s)},pr.prototype.setMinimumVertexDistance=function(s){this._minimimVertexDistance=s},pr.prototype.interfaces_=function(){return[]},pr.prototype.getClass=function(){return pr},bo.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(pr,bo);var vi=function(){},Is={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};vi.prototype.interfaces_=function(){return[]},vi.prototype.getClass=function(){return vi},vi.toDegrees=function(s){return 180*s/Math.PI},vi.normalize=function(s){for(;s>Math.PI;)s-=vi.PI_TIMES_2;for(;s<=-Math.PI;)s+=vi.PI_TIMES_2;return s},vi.angle=function(){if(1===arguments.length){var s=arguments[0];return Math.atan2(s.y,s.x)}if(2===arguments.length){var l=arguments[0],m=arguments[1];return Math.atan2(m.y-l.y,m.x-l.x)}},vi.isAcute=function(s,l,m){return(s.x-l.x)*(m.x-l.x)+(s.y-l.y)*(m.y-l.y)>0},vi.isObtuse=function(s,l,m){return(s.x-l.x)*(m.x-l.x)+(s.y-l.y)*(m.y-l.y)<0},vi.interiorAngle=function(s,l,m){var v=vi.angle(l,s),C=vi.angle(l,m);return Math.abs(C-v)},vi.normalizePositive=function(s){if(s<0){for(;s<0;)s+=vi.PI_TIMES_2;s>=vi.PI_TIMES_2&&(s=0)}else{for(;s>=vi.PI_TIMES_2;)s-=vi.PI_TIMES_2;s<0&&(s=0)}return s},vi.angleBetween=function(s,l,m){var v=vi.angle(l,s),C=vi.angle(l,m);return vi.diff(v,C)},vi.diff=function(s,l){var m=null;return(m=s<l?l-s:s-l)>Math.PI&&(m=2*Math.PI-m),m},vi.toRadians=function(s){return s*Math.PI/180},vi.getTurn=function(s,l){var m=Math.sin(l-s);return m>0?vi.COUNTERCLOCKWISE:m<0?vi.CLOCKWISE:vi.NONE},vi.angleBetweenOriented=function(s,l,m){var v=vi.angle(l,s),C=vi.angle(l,m)-v;return C<=-Math.PI?C+vi.PI_TIMES_2:C>Math.PI?C-vi.PI_TIMES_2:C},Is.PI_TIMES_2.get=function(){return 2*Math.PI},Is.PI_OVER_2.get=function(){return Math.PI/2},Is.PI_OVER_4.get=function(){return Math.PI/4},Is.COUNTERCLOCKWISE.get=function(){return mt.COUNTERCLOCKWISE},Is.CLOCKWISE.get=function(){return mt.CLOCKWISE},Is.NONE.get=function(){return mt.COLLINEAR},Object.defineProperties(vi,Is);var to=function s(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Ci,this._seg1=new Ci,this._offset0=new Ci,this._offset1=new Ci,this._side=0,this._hasNarrowConcaveAngle=!1;var m=arguments[1],v=arguments[2];this._precisionModel=arguments[0],this._bufParams=m,this._li=new Yt,this._filletAngleQuantum=Math.PI/2/m.getQuadrantSegments(),m.getQuadrantSegments()>=8&&m.getJoinStyle()===ji.JOIN_ROUND&&(this._closingSegLengthFactor=s.MAX_CLOSING_SEG_LEN_FACTOR),this.init(v)},cu={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};to.prototype.addNextSegment=function(s,l){if(this._s0=this._s1,this._s1=this._s2,this._s2=s,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var m=mt.computeOrientation(this._s0,this._s1,this._s2),v=m===mt.CLOCKWISE&&this._side===ft.LEFT||m===mt.COUNTERCLOCKWISE&&this._side===ft.RIGHT;0===m?this.addCollinear(l):v?this.addOutsideTurn(m,l):this.addInsideTurn(m,l)},to.prototype.addLineEndCap=function(s,l){var m=new Ci(s,l),v=new Ci;this.computeOffsetSegment(m,ft.LEFT,this._distance,v);var C=new Ci;this.computeOffsetSegment(m,ft.RIGHT,this._distance,C);var J=Math.atan2(l.y-s.y,l.x-s.x);switch(this._bufParams.getEndCapStyle()){case ji.CAP_ROUND:this._segList.addPt(v.p1),this.addFilletArc(l,J+Math.PI/2,J-Math.PI/2,mt.CLOCKWISE,this._distance),this._segList.addPt(C.p1);break;case ji.CAP_FLAT:this._segList.addPt(v.p1),this._segList.addPt(C.p1);break;case ji.CAP_SQUARE:var fe=new se;fe.x=Math.abs(this._distance)*Math.cos(J),fe.y=Math.abs(this._distance)*Math.sin(J);var pe=new se(v.p1.x+fe.x,v.p1.y+fe.y),ot=new se(C.p1.x+fe.x,C.p1.y+fe.y);this._segList.addPt(pe),this._segList.addPt(ot)}},to.prototype.getCoordinates=function(){return this._segList.getCoordinates()},to.prototype.addMitreJoin=function(s,l,m,v){var C=!0,k=null;try{k=$n.intersection(l.p0,l.p1,m.p0,m.p1),(v<=0?1:k.distance(s)/Math.abs(v))>this._bufParams.getMitreLimit()&&(C=!1)}catch(G){if(!(G instanceof Sn))throw G;k=new se(0,0),C=!1}C?this._segList.addPt(k):this.addLimitedMitreJoin(l,m,v,this._bufParams.getMitreLimit())},to.prototype.addFilletCorner=function(s,l,m,v,C){var J=Math.atan2(l.y-s.y,l.x-s.x),ot=Math.atan2(m.y-s.y,m.x-s.x);v===mt.CLOCKWISE?J<=ot&&(J+=2*Math.PI):J>=ot&&(J-=2*Math.PI),this._segList.addPt(l),this.addFilletArc(s,J,ot,v,C),this._segList.addPt(m)},to.prototype.addOutsideTurn=function(s,l){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*to.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===ji.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===ji.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(l&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,s,this._distance),this._segList.addPt(this._offset1.p0))},to.prototype.createSquare=function(s){this._segList.addPt(new se(s.x+this._distance,s.y+this._distance)),this._segList.addPt(new se(s.x+this._distance,s.y-this._distance)),this._segList.addPt(new se(s.x-this._distance,s.y-this._distance)),this._segList.addPt(new se(s.x-this._distance,s.y+this._distance)),this._segList.closeRing()},to.prototype.addSegments=function(s,l){this._segList.addPts(s,l)},to.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},to.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},to.prototype.initSideSegments=function(s,l,m){this._s1=s,this._s2=l,this._side=m,this._seg1.setCoordinates(s,l),this.computeOffsetSegment(this._seg1,m,this._distance,this._offset1)},to.prototype.addLimitedMitreJoin=function(s,l,m,v){var C=this._seg0.p1,k=vi.angle(C,this._seg0.p0),G=vi.angleBetweenOriented(this._seg0.p0,C,this._seg1.p1)/2,J=vi.normalize(k+G),fe=vi.normalize(J+Math.PI),pe=v*m,ot=m-pe*Math.abs(Math.sin(G)),nt=C.x+pe*Math.cos(fe),wt=C.y+pe*Math.sin(fe),Pt=new se(nt,wt),$t=new Ci(C,Pt),Ft=$t.pointAlongOffset(1,ot),En=$t.pointAlongOffset(1,-ot);this._side===ft.LEFT?(this._segList.addPt(Ft),this._segList.addPt(En)):(this._segList.addPt(En),this._segList.addPt(Ft))},to.prototype.computeOffsetSegment=function(s,l,m,v){var C=l===ft.LEFT?1:-1,k=s.p1.x-s.p0.x,G=s.p1.y-s.p0.y,J=Math.sqrt(k*k+G*G),fe=C*m*k/J,pe=C*m*G/J;v.p0.x=s.p0.x-pe,v.p0.y=s.p0.y+fe,v.p1.x=s.p1.x-pe,v.p1.y=s.p1.y+fe},to.prototype.addFilletArc=function(s,l,m,v,C){var k=v===mt.CLOCKWISE?-1:1,G=Math.abs(l-m),J=Math.trunc(G/this._filletAngleQuantum+.5);if(J<1)return null;for(var fe=G/J,pe=0,ot=new se;pe<G;){var nt=l+k*pe;ot.x=s.x+C*Math.cos(nt),ot.y=s.y+C*Math.sin(nt),this._segList.addPt(ot),pe+=fe}},to.prototype.addInsideTurn=function(s,l){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*to.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var m=new se((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(m);var v=new se((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(v)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},to.prototype.createCircle=function(s){var l=new se(s.x+this._distance,s.y);this._segList.addPt(l),this.addFilletArc(s,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},to.prototype.addBevelJoin=function(s,l){this._segList.addPt(s.p1),this._segList.addPt(l.p0)},to.prototype.init=function(s){this._distance=s,this._maxCurveSegmentError=s*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new pr,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(s*to.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},to.prototype.addCollinear=function(s){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===ji.JOIN_BEVEL||this._bufParams.getJoinStyle()===ji.JOIN_MITRE?(s&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,mt.CLOCKWISE,this._distance))},to.prototype.closeRing=function(){this._segList.closeRing()},to.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},to.prototype.interfaces_=function(){return[]},to.prototype.getClass=function(){return to},cu.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},cu.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},cu.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},cu.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(to,cu);var Ca=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var l=arguments[1];this._precisionModel=arguments[0],this._bufParams=l};Ca.prototype.getOffsetCurve=function(s,l){if(this._distance=l,0===l)return null;var m=l<0,v=Math.abs(l),C=this.getSegGen(v);s.length<=1?this.computePointCurve(s[0],C):this.computeOffsetCurve(s,m,C);var k=C.getCoordinates();return m&&fi.reverse(k),k},Ca.prototype.computeSingleSidedBufferCurve=function(s,l,m){var v=this.simplifyTolerance(this._distance);if(l){m.addSegments(s,!0);var C=mo.simplify(s,-v),k=C.length-1;m.initSideSegments(C[k],C[k-1],ft.LEFT),m.addFirstSegment();for(var G=k-2;G>=0;G--)m.addNextSegment(C[G],!0)}else{m.addSegments(s,!1);var J=mo.simplify(s,v),fe=J.length-1;m.initSideSegments(J[0],J[1],ft.LEFT),m.addFirstSegment();for(var pe=2;pe<=fe;pe++)m.addNextSegment(J[pe],!0)}m.addLastSegment(),m.closeRing()},Ca.prototype.computeRingBufferCurve=function(s,l,m){var v=this.simplifyTolerance(this._distance);l===ft.RIGHT&&(v=-v);var C=mo.simplify(s,v),k=C.length-1;m.initSideSegments(C[k-1],C[0],l);for(var G=1;G<=k;G++)m.addNextSegment(C[G],1!==G);m.closeRing()},Ca.prototype.computeLineBufferCurve=function(s,l){var m=this.simplifyTolerance(this._distance),v=mo.simplify(s,m),C=v.length-1;l.initSideSegments(v[0],v[1],ft.LEFT);for(var k=2;k<=C;k++)l.addNextSegment(v[k],!0);l.addLastSegment(),l.addLineEndCap(v[C-1],v[C]);var G=mo.simplify(s,-m),J=G.length-1;l.initSideSegments(G[J],G[J-1],ft.LEFT);for(var fe=J-2;fe>=0;fe--)l.addNextSegment(G[fe],!0);l.addLastSegment(),l.addLineEndCap(G[1],G[0]),l.closeRing()},Ca.prototype.computePointCurve=function(s,l){switch(this._bufParams.getEndCapStyle()){case ji.CAP_ROUND:l.createCircle(s);break;case ji.CAP_SQUARE:l.createSquare(s)}},Ca.prototype.getLineCurve=function(s,l){if(this._distance=l,l<0&&!this._bufParams.isSingleSided()||0===l)return null;var m=Math.abs(l),v=this.getSegGen(m);return s.length<=1?this.computePointCurve(s[0],v):this._bufParams.isSingleSided()?this.computeSingleSidedBufferCurve(s,l<0,v):this.computeLineBufferCurve(s,v),v.getCoordinates()},Ca.prototype.getBufferParameters=function(){return this._bufParams},Ca.prototype.simplifyTolerance=function(s){return s*this._bufParams.getSimplifyFactor()},Ca.prototype.getRingCurve=function(s,l,m){if(this._distance=m,s.length<=2)return this.getLineCurve(s,m);if(0===m)return Ca.copyCoordinates(s);var v=this.getSegGen(m);return this.computeRingBufferCurve(s,l,v),v.getCoordinates()},Ca.prototype.computeOffsetCurve=function(s,l,m){var v=this.simplifyTolerance(this._distance);if(l){var C=mo.simplify(s,-v),k=C.length-1;m.initSideSegments(C[k],C[k-1],ft.LEFT),m.addFirstSegment();for(var G=k-2;G>=0;G--)m.addNextSegment(C[G],!0)}else{var J=mo.simplify(s,v),fe=J.length-1;m.initSideSegments(J[0],J[1],ft.LEFT),m.addFirstSegment();for(var pe=2;pe<=fe;pe++)m.addNextSegment(J[pe],!0)}m.addLastSegment()},Ca.prototype.getSegGen=function(s){return new to(this._precisionModel,this._bufParams,s)},Ca.prototype.interfaces_=function(){return[]},Ca.prototype.getClass=function(){return Ca},Ca.copyCoordinates=function(s){for(var l=new Array(s.length).fill(null),m=0;m<l.length;m++)l[m]=new se(s[m]);return l};var Ja=function(){this._subgraphs=null,this._seg=new Ci,this._cga=new mt,this._subgraphs=arguments[0]},Ud={DepthSegment:{configurable:!0}};Ja.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var s=arguments[0],l=new dn,m=this._subgraphs.iterator();m.hasNext();){var v=m.next(),C=v.getEnvelope();s.y<C.getMinY()||s.y>C.getMaxY()||this.findStabbedSegments(s,v.getDirectedEdges(),l)}return l}if(3===arguments.length)if(dt(arguments[2],nr)&&arguments[0]instanceof se&&arguments[1]instanceof Xr){for(var k=arguments[0],G=arguments[1],J=arguments[2],fe=G.getEdge().getCoordinates(),pe=0;pe<fe.length-1;pe++)if(this._seg.p0=fe[pe],this._seg.p1=fe[pe+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<k.x||this._seg.isHorizontal()||k.y<this._seg.p0.y||k.y>this._seg.p1.y||mt.computeOrientation(this._seg.p0,this._seg.p1,k)===mt.RIGHT)){var ot=G.getDepth(ft.LEFT);this._seg.p0.equals(fe[pe])||(ot=G.getDepth(ft.RIGHT));var nt=new Dl(this._seg,ot);J.add(nt)}}else if(dt(arguments[2],nr)&&arguments[0]instanceof se&&dt(arguments[1],nr))for(var wt=arguments[0],$t=arguments[2],Ft=arguments[1].iterator();Ft.hasNext();){var En=Ft.next();En.isForward()&&this.findStabbedSegments(wt,En,$t)}},Ja.prototype.getDepth=function(s){var l=this.findStabbedSegments(s);return 0===l.size()?0:Cl.min(l)._leftDepth},Ja.prototype.interfaces_=function(){return[]},Ja.prototype.getClass=function(){return Ja},Ud.DepthSegment.get=function(){return Dl},Object.defineProperties(Ja,Ud);var Dl=function(){this._upwardSeg=null,this._leftDepth=null;var l=arguments[1];this._upwardSeg=new Ci(arguments[0]),this._leftDepth=l};Dl.prototype.compareTo=function(s){var l=s;if(this._upwardSeg.minX()>=l._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=l._upwardSeg.minX())return-1;var m=this._upwardSeg.orientationIndex(l._upwardSeg);return 0!==m||0!=(m=-1*l._upwardSeg.orientationIndex(this._upwardSeg))?m:this._upwardSeg.compareTo(l._upwardSeg)},Dl.prototype.compareX=function(s,l){var m=s.p0.compareTo(l.p0);return 0!==m?m:s.p1.compareTo(l.p1)},Dl.prototype.toString=function(){return this._upwardSeg.toString()},Dl.prototype.interfaces_=function(){return[ve]},Dl.prototype.getClass=function(){return Dl};var Yn=function(s,l,m){this.p0=s||null,this.p1=l||null,this.p2=m||null};Yn.prototype.area=function(){return Yn.area(this.p0,this.p1,this.p2)},Yn.prototype.signedArea=function(){return Yn.signedArea(this.p0,this.p1,this.p2)},Yn.prototype.interpolateZ=function(s){if(null===s)throw new ye("Supplied point is null.");return Yn.interpolateZ(s,this.p0,this.p1,this.p2)},Yn.prototype.longestSideLength=function(){return Yn.longestSideLength(this.p0,this.p1,this.p2)},Yn.prototype.isAcute=function(){return Yn.isAcute(this.p0,this.p1,this.p2)},Yn.prototype.circumcentre=function(){return Yn.circumcentre(this.p0,this.p1,this.p2)},Yn.prototype.area3D=function(){return Yn.area3D(this.p0,this.p1,this.p2)},Yn.prototype.centroid=function(){return Yn.centroid(this.p0,this.p1,this.p2)},Yn.prototype.inCentre=function(){return Yn.inCentre(this.p0,this.p1,this.p2)},Yn.prototype.interfaces_=function(){return[]},Yn.prototype.getClass=function(){return Yn},Yn.area=function(s,l,m){return Math.abs(((m.x-s.x)*(l.y-s.y)-(l.x-s.x)*(m.y-s.y))/2)},Yn.signedArea=function(s,l,m){return((m.x-s.x)*(l.y-s.y)-(l.x-s.x)*(m.y-s.y))/2},Yn.det=function(s,l,m,v){return s*v-l*m},Yn.interpolateZ=function(s,l,m,v){var C=l.x,k=l.y,G=m.x-C,J=v.x-C,fe=m.y-k,pe=v.y-k,ot=G*pe-J*fe,nt=s.x-C,wt=s.y-k;return l.z+(pe*nt-J*wt)/ot*(m.z-l.z)+(-fe*nt+G*wt)/ot*(v.z-l.z)},Yn.longestSideLength=function(s,l,m){var v=s.distance(l),C=l.distance(m),k=m.distance(s),G=v;return C>G&&(G=C),k>G&&(G=k),G},Yn.isAcute=function(s,l,m){return!!vi.isAcute(s,l,m)&&!!vi.isAcute(l,m,s)&&!!vi.isAcute(m,s,l)},Yn.circumcentre=function(s,l,m){var v=m.x,C=m.y,k=s.x-v,G=s.y-C,J=l.x-v,fe=l.y-C,pe=2*Yn.det(k,G,J,fe),ot=Yn.det(G,k*k+G*G,fe,J*J+fe*fe),nt=Yn.det(k,k*k+G*G,J,J*J+fe*fe);return new se(v-ot/pe,C+nt/pe)},Yn.perpendicularBisector=function(s,l){var m=l.x-s.x,v=l.y-s.y,C=new $n(s.x+m/2,s.y+v/2,1),k=new $n(s.x-v+m/2,s.y+m+v/2,1);return new $n(C,k)},Yn.angleBisector=function(s,l,m){var v=l.distance(s),C=v/(v+l.distance(m));return new se(s.x+C*(m.x-s.x),s.y+C*(m.y-s.y))},Yn.area3D=function(s,l,m){var v=l.x-s.x,C=l.y-s.y,k=l.z-s.z,G=m.x-s.x,J=m.y-s.y,fe=m.z-s.z,pe=C*fe-k*J,ot=k*G-v*fe,nt=v*J-C*G;return Math.sqrt(pe*pe+ot*ot+nt*nt)/2},Yn.centroid=function(s,l,m){return new se((s.x+l.x+m.x)/3,(s.y+l.y+m.y)/3)},Yn.inCentre=function(s,l,m){var v=l.distance(m),C=s.distance(m),k=s.distance(l),G=v+C+k;return new se((v*s.x+C*l.x+k*m.x)/G,(v*s.y+C*l.y+k*m.y)/G)};var oa=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new dn;var l=arguments[1],m=arguments[2];this._inputGeom=arguments[0],this._distance=l,this._curveBuilder=m};oa.prototype.addPoint=function(s){if(this._distance<=0)return null;var l=s.getCoordinates(),m=this._curveBuilder.getLineCurve(l,this._distance);this.addCurve(m,de.EXTERIOR,de.INTERIOR)},oa.prototype.addPolygon=function(s){var l=this._distance,m=ft.LEFT;this._distance<0&&(l=-this._distance,m=ft.RIGHT);var v=s.getExteriorRing(),C=fi.removeRepeatedPoints(v.getCoordinates());if(this._distance<0&&this.isErodedCompletely(v,this._distance)||this._distance<=0&&C.length<3)return null;this.addPolygonRing(C,l,m,de.EXTERIOR,de.INTERIOR);for(var k=0;k<s.getNumInteriorRing();k++){var G=s.getInteriorRingN(k),J=fi.removeRepeatedPoints(G.getCoordinates());this._distance>0&&this.isErodedCompletely(G,-this._distance)||this.addPolygonRing(J,l,ft.opposite(m),de.INTERIOR,de.EXTERIOR)}},oa.prototype.isTriangleErodedCompletely=function(s,l){var m=new Yn(s[0],s[1],s[2]),v=m.inCentre();return mt.distancePointLine(v,m.p0,m.p1)<Math.abs(l)},oa.prototype.addLineString=function(s){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var l=fi.removeRepeatedPoints(s.getCoordinates()),m=this._curveBuilder.getLineCurve(l,this._distance);this.addCurve(m,de.EXTERIOR,de.INTERIOR)},oa.prototype.addCurve=function(s,l,m){if(null===s||s.length<2)return null;var v=new as(s,new tr(0,de.BOUNDARY,l,m));this._curveList.add(v)},oa.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},oa.prototype.addPolygonRing=function(s,l,m,v,C){if(0===l&&s.length<Mi.MINIMUM_VALID_SIZE)return null;var k=v,G=C;s.length>=Mi.MINIMUM_VALID_SIZE&&mt.isCCW(s)&&(k=C,G=v,m=ft.opposite(m));var J=this._curveBuilder.getRingCurve(s,m,l);this.addCurve(J,k,G)},oa.prototype.add=function(s){if(s.isEmpty())return null;s instanceof ii?this.addPolygon(s):s instanceof xn?this.addLineString(s):s instanceof mi?this.addPoint(s):(s instanceof Xn||s instanceof Lt||s instanceof Wi||s instanceof vt)&&this.addCollection(s)},oa.prototype.isErodedCompletely=function(s,l){var m=s.getCoordinates();if(m.length<4)return l<0;if(4===m.length)return this.isTriangleErodedCompletely(m,l);var v=s.getEnvelopeInternal(),C=Math.min(v.getHeight(),v.getWidth());return l<0&&2*Math.abs(l)>C},oa.prototype.addCollection=function(s){for(var l=0;l<s.getNumGeometries();l++){var m=s.getGeometryN(l);this.add(m)}},oa.prototype.interfaces_=function(){return[]},oa.prototype.getClass=function(){return oa};var Dc=function(){};Dc.prototype.locate=function(s){},Dc.prototype.interfaces_=function(){return[]},Dc.prototype.getClass=function(){return Dc};var Ml=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var s=arguments[0];this._parent=s,this._atStart=!0,this._index=0,this._max=s.getNumGeometries()};Ml.prototype.next=function(){if(this._atStart)return this._atStart=!1,Ml.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Ae;var s=this._parent.getGeometryN(this._index++);return s instanceof vt?(this._subcollectionIterator=new Ml(s),this._subcollectionIterator.next()):s},Ml.prototype.remove=function(){throw new Error(this.getClass().getName())},Ml.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Ml.prototype.interfaces_=function(){return[wi]},Ml.prototype.getClass=function(){return Ml},Ml.isAtomic=function(s){return!(s instanceof vt)};var Fa=function(){this._geom=null,this._geom=arguments[0]};Fa.prototype.locate=function(s){return Fa.locate(s,this._geom)},Fa.prototype.interfaces_=function(){return[Dc]},Fa.prototype.getClass=function(){return Fa},Fa.isPointInRing=function(s,l){return!!l.getEnvelopeInternal().intersects(s)&&mt.isPointInRing(s,l.getCoordinates())},Fa.containsPointInPolygon=function(s,l){if(l.isEmpty())return!1;var m=l.getExteriorRing();if(!Fa.isPointInRing(s,m))return!1;for(var v=0;v<l.getNumInteriorRing();v++){var C=l.getInteriorRingN(v);if(Fa.isPointInRing(s,C))return!1}return!0},Fa.containsPoint=function(s,l){if(l instanceof ii)return Fa.containsPointInPolygon(s,l);if(l instanceof vt)for(var m=new Ml(l);m.hasNext();){var v=m.next();if(v!==l&&Fa.containsPoint(s,v))return!0}return!1},Fa.locate=function(s,l){return l.isEmpty()?de.EXTERIOR:Fa.containsPoint(s,l)?de.INTERIOR:de.EXTERIOR};var Gs=function(){this._edgeMap=new Ke,this._edgeList=null,this._ptInAreaLocation=[de.NONE,de.NONE]};Gs.prototype.getNextCW=function(s){this.getEdges();var l=this._edgeList.indexOf(s),m=l-1;return 0===l&&(m=this._edgeList.size()-1),this._edgeList.get(m)},Gs.prototype.propagateSideLabels=function(s){for(var l=de.NONE,m=this.iterator();m.hasNext();){var v=m.next().getLabel();v.isArea(s)&&v.getLocation(s,ft.LEFT)!==de.NONE&&(l=v.getLocation(s,ft.LEFT))}if(l===de.NONE)return null;for(var C=l,k=this.iterator();k.hasNext();){var G=k.next(),J=G.getLabel();if(J.getLocation(s,ft.ON)===de.NONE&&J.setLocation(s,ft.ON,C),J.isArea(s)){var fe=J.getLocation(s,ft.LEFT),pe=J.getLocation(s,ft.RIGHT);if(pe!==de.NONE){if(pe!==C)throw new zn("side location conflict",G.getCoordinate());fe===de.NONE&&ke.shouldNeverReachHere("found single null side (at "+G.getCoordinate()+")"),C=fe}else ke.isTrue(J.getLocation(s,ft.LEFT)===de.NONE,"found single null side"),J.setLocation(s,ft.RIGHT,C),J.setLocation(s,ft.LEFT,C)}}},Gs.prototype.getCoordinate=function(){var s=this.iterator();return s.hasNext()?s.next().getCoordinate():null},Gs.prototype.print=function(s){si.out.println("EdgeEndStar:   "+this.getCoordinate());for(var l=this.iterator();l.hasNext();)l.next().print(s)},Gs.prototype.isAreaLabelsConsistent=function(s){return this.computeEdgeEndLabels(s.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Gs.prototype.checkAreaLabelsConsistent=function(s){var l=this.getEdges();if(l.size()<=0)return!0;var m=l.size()-1,v=l.get(m).getLabel().getLocation(s,ft.LEFT);ke.isTrue(v!==de.NONE,"Found unlabelled area edge");for(var C=v,k=this.iterator();k.hasNext();){var G=k.next().getLabel();ke.isTrue(G.isArea(s),"Found non-area edge");var J=G.getLocation(s,ft.LEFT),fe=G.getLocation(s,ft.RIGHT);if(J===fe||fe!==C)return!1;C=J}return!0},Gs.prototype.findIndex=function(s){this.iterator();for(var l=0;l<this._edgeList.size();l++)if(this._edgeList.get(l)===s)return l;return-1},Gs.prototype.iterator=function(){return this.getEdges().iterator()},Gs.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new dn(this._edgeMap.values())),this._edgeList},Gs.prototype.getLocation=function(s,l,m){return this._ptInAreaLocation[s]===de.NONE&&(this._ptInAreaLocation[s]=Fa.locate(l,m[s].getGeometry())),this._ptInAreaLocation[s]},Gs.prototype.toString=function(){var s=new $e;s.append("EdgeEndStar:   "+this.getCoordinate()),s.append("\n");for(var l=this.iterator();l.hasNext();){var m=l.next();s.append(m),s.append("\n")}return s.toString()},Gs.prototype.computeEdgeEndLabels=function(s){for(var l=this.iterator();l.hasNext();)l.next().computeLabel(s)},Gs.prototype.computeLabelling=function(s){this.computeEdgeEndLabels(s[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var l=[!1,!1],m=this.iterator();m.hasNext();)for(var v=m.next().getLabel(),C=0;C<2;C++)v.isLine(C)&&v.getLocation(C)===de.BOUNDARY&&(l[C]=!0);for(var k=this.iterator();k.hasNext();)for(var G=k.next(),J=G.getLabel(),fe=0;fe<2;fe++)if(J.isAnyNull(fe)){var pe=de.NONE;if(l[fe])pe=de.EXTERIOR;else{var ot=G.getCoordinate();pe=this.getLocation(fe,ot,s)}J.setAllLocationsIfNull(fe,pe)}},Gs.prototype.getDegree=function(){return this._edgeMap.size()},Gs.prototype.insertEdgeEnd=function(s,l){this._edgeMap.put(s,l),this._edgeList=null},Gs.prototype.interfaces_=function(){return[]},Gs.prototype.getClass=function(){return Gs};var $u=function(s){function l(){s.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var m=null,v=null,C=this._SCANNING_FOR_INCOMING,k=0;k<this._resultAreaEdgeList.size();k++){var G=this._resultAreaEdgeList.get(k),J=G.getSym();if(G.getLabel().isArea())switch(null===m&&G.isInResult()&&(m=G),C){case this._SCANNING_FOR_INCOMING:if(!J.isInResult())continue;v=J,C=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!G.isInResult())continue;v.setNext(G),C=this._SCANNING_FOR_INCOMING}}if(C===this._LINKING_TO_OUTGOING){if(null===m)throw new zn("no outgoing dirEdge found",this.getCoordinate());ke.isTrue(m.isInResult(),"unable to link last incoming dirEdge"),v.setNext(m)}},l.prototype.insert=function(m){this.insertEdgeEnd(m,m)},l.prototype.getRightmostEdge=function(){var m=this.getEdges(),v=m.size();if(v<1)return null;var C=m.get(0);if(1===v)return C;var k=m.get(v-1),G=C.getQuadrant(),J=k.getQuadrant();return Nr.isNorthern(G)&&Nr.isNorthern(J)?C:Nr.isNorthern(G)||Nr.isNorthern(J)?0!==C.getDy()?C:0!==k.getDy()?k:(ke.shouldNeverReachHere("found two horizontal edges incident on node"),null):k},l.prototype.print=function(m){si.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var v=this.iterator();v.hasNext();){var C=v.next();m.print("out "),C.print(m),m.println(),m.print("in "),C.getSym().print(m),m.println()}},l.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new dn;for(var m=this.iterator();m.hasNext();){var v=m.next();(v.isInResult()||v.getSym().isInResult())&&this._resultAreaEdgeList.add(v)}return this._resultAreaEdgeList},l.prototype.updateLabelling=function(m){for(var v=this.iterator();v.hasNext();){var C=v.next().getLabel();C.setAllLocationsIfNull(0,m.getLocation(0)),C.setAllLocationsIfNull(1,m.getLocation(1))}},l.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var m=null,v=null,C=this._edgeList.size()-1;C>=0;C--){var k=this._edgeList.get(C),G=k.getSym();null===v&&(v=G),null!==m&&G.setNext(m),m=k}v.setNext(m)},l.prototype.computeDepths=function(){if(1===arguments.length){var m=arguments[0],v=this.findIndex(m),C=m.getDepth(ft.LEFT),k=m.getDepth(ft.RIGHT),G=this.computeDepths(v+1,this._edgeList.size(),C);if(this.computeDepths(0,v,G)!==k)throw new zn("depth mismatch at "+m.getCoordinate())}else if(3===arguments.length){for(var fe=arguments[1],pe=arguments[2],ot=arguments[0];ot<fe;ot++){var nt=this._edgeList.get(ot);nt.setEdgeDepths(ft.RIGHT,pe),pe=nt.getDepth(ft.LEFT)}return pe}},l.prototype.mergeSymLabels=function(){for(var m=this.iterator();m.hasNext();){var v=m.next();v.getLabel().merge(v.getSym().getLabel())}},l.prototype.linkMinimalDirectedEdges=function(m){for(var v=null,C=null,k=this._SCANNING_FOR_INCOMING,G=this._resultAreaEdgeList.size()-1;G>=0;G--){var J=this._resultAreaEdgeList.get(G),fe=J.getSym();switch(null===v&&J.getEdgeRing()===m&&(v=J),k){case this._SCANNING_FOR_INCOMING:if(fe.getEdgeRing()!==m)continue;C=fe,k=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(J.getEdgeRing()!==m)continue;C.setNextMin(J),k=this._SCANNING_FOR_INCOMING}}k===this._LINKING_TO_OUTGOING&&(ke.isTrue(null!==v,"found null for first outgoing dirEdge"),ke.isTrue(v.getEdgeRing()===m,"unable to link last incoming dirEdge"),C.setNextMin(v))},l.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var m=0,v=this.iterator();v.hasNext();)v.next().isInResult()&&m++;return m}if(1===arguments.length){for(var C=arguments[0],k=0,G=this.iterator();G.hasNext();)G.next().getEdgeRing()===C&&k++;return k}},l.prototype.getLabel=function(){return this._label},l.prototype.findCoveredLineEdges=function(){for(var m=de.NONE,v=this.iterator();v.hasNext();){var C=v.next(),k=C.getSym();if(!C.isLineEdge()){if(C.isInResult()){m=de.INTERIOR;break}if(k.isInResult()){m=de.EXTERIOR;break}}}if(m===de.NONE)return null;for(var G=m,J=this.iterator();J.hasNext();){var fe=J.next(),pe=fe.getSym();fe.isLineEdge()?fe.getEdge().setCovered(G===de.INTERIOR):(fe.isInResult()&&(G=de.EXTERIOR),pe.isInResult()&&(G=de.INTERIOR))}},l.prototype.computeLabelling=function(m){s.prototype.computeLabelling.call(this,m),this._label=new tr(de.NONE);for(var v=this.iterator();v.hasNext();)for(var C=v.next().getEdge().getLabel(),k=0;k<2;k++){var G=C.getLocation(k);G!==de.INTERIOR&&G!==de.BOUNDARY||this._label.setLocation(k,de.INTERIOR)}},l.prototype.interfaces_=function(){return[]},l.prototype.getClass=function(){return l},l}(Gs),go=function(s){function l(){s.apply(this,arguments)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.createNode=function(m){return new Ea(m,new $u)},l.prototype.interfaces_=function(){return[]},l.prototype.getClass=function(){return l},l}(Cu),Mc=function s(){this._pts=null,this._orientation=null;var l=arguments[0];this._pts=l,this._orientation=s.orientation(l)};Mc.prototype.compareTo=function(s){return Mc.compareOriented(this._pts,this._orientation,s._pts,s._orientation)},Mc.prototype.interfaces_=function(){return[ve]},Mc.prototype.getClass=function(){return Mc},Mc.orientation=function(s){return 1===fi.increasingDirection(s)},Mc.compareOriented=function(s,l,m,v){for(var C=l?1:-1,k=v?1:-1,G=l?s.length:-1,J=v?m.length:-1,fe=l?0:s.length-1,pe=v?0:m.length-1;;){var ot=s[fe].compareTo(m[pe]);if(0!==ot)return ot;var nt=(fe+=C)===G,wt=(pe+=k)===J;if(nt&&!wt)return-1;if(!nt&&wt)return 1;if(nt&&wt)return 0}};var _n=function(){this._edges=new dn,this._ocaMap=new Ke};_n.prototype.print=function(s){s.print("MULTILINESTRING ( ");for(var l=0;l<this._edges.size();l++){var m=this._edges.get(l);l>0&&s.print(","),s.print("(");for(var v=m.getCoordinates(),C=0;C<v.length;C++)C>0&&s.print(","),s.print(v[C].x+" "+v[C].y);s.println(")")}s.print(")  ")},_n.prototype.addAll=function(s){for(var l=s.iterator();l.hasNext();)this.add(l.next())},_n.prototype.findEdgeIndex=function(s){for(var l=0;l<this._edges.size();l++)if(this._edges.get(l).equals(s))return l;return-1},_n.prototype.iterator=function(){return this._edges.iterator()},_n.prototype.getEdges=function(){return this._edges},_n.prototype.get=function(s){return this._edges.get(s)},_n.prototype.findEqualEdge=function(s){var l=new Mc(s.getCoordinates());return this._ocaMap.get(l)},_n.prototype.add=function(s){this._edges.add(s);var l=new Mc(s.getCoordinates());this._ocaMap.put(l,s)},_n.prototype.interfaces_=function(){return[]},_n.prototype.getClass=function(){return _n};var Pr=function(){};Pr.prototype.processIntersections=function(s,l,m,v){},Pr.prototype.isDone=function(){},Pr.prototype.interfaces_=function(){return[]},Pr.prototype.getClass=function(){return Pr};var $s=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0,this._li=arguments[0]};$s.prototype.isTrivialIntersection=function(s,l,m,v){if(s===m&&1===this._li.getIntersectionNum()){if($s.isAdjacentSegments(l,v))return!0;if(s.isClosed()){var C=s.size()-1;if(0===l&&v===C||0===v&&l===C)return!0}}return!1},$s.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},$s.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},$s.prototype.getLineIntersector=function(){return this._li},$s.prototype.hasProperIntersection=function(){return this._hasProper},$s.prototype.processIntersections=function(s,l,m,v){if(s===m&&l===v)return null;this.numTests++;var C=s.getCoordinates()[l],k=s.getCoordinates()[l+1],G=m.getCoordinates()[v],J=m.getCoordinates()[v+1];this._li.computeIntersection(C,k,G,J),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(s,l,m,v)||(this._hasIntersection=!0,s.addIntersections(this._li,l,0),m.addIntersections(this._li,v,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},$s.prototype.hasIntersection=function(){return this._hasIntersection},$s.prototype.isDone=function(){return!1},$s.prototype.hasInteriorIntersection=function(){return this._hasInterior},$s.prototype.interfaces_=function(){return[Pr]},$s.prototype.getClass=function(){return $s},$s.isAdjacentSegments=function(s,l){return 1===Math.abs(s-l)};var Na=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var l=arguments[1],m=arguments[2];this.coord=new se(arguments[0]),this.segmentIndex=l,this.dist=m};Na.prototype.getSegmentIndex=function(){return this.segmentIndex},Na.prototype.getCoordinate=function(){return this.coord},Na.prototype.print=function(s){s.print(this.coord),s.print(" seg # = "+this.segmentIndex),s.println(" dist = "+this.dist)},Na.prototype.compareTo=function(s){return this.compare(s.segmentIndex,s.dist)},Na.prototype.isEndPoint=function(s){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===s},Na.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Na.prototype.getDistance=function(){return this.dist},Na.prototype.compare=function(s,l){return this.segmentIndex<s?-1:this.segmentIndex>s?1:this.dist<l?-1:this.dist>l?1:0},Na.prototype.interfaces_=function(){return[ve]},Na.prototype.getClass=function(){return Na};var ao=function(){this._nodeMap=new Ke,this.edge=null,this.edge=arguments[0]};ao.prototype.print=function(s){s.println("Intersections:");for(var l=this.iterator();l.hasNext();)l.next().print(s)},ao.prototype.iterator=function(){return this._nodeMap.values().iterator()},ao.prototype.addSplitEdges=function(s){this.addEndpoints();for(var l=this.iterator(),m=l.next();l.hasNext();){var v=l.next(),C=this.createSplitEdge(m,v);s.add(C),m=v}},ao.prototype.addEndpoints=function(){var s=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[s],s,0)},ao.prototype.createSplitEdge=function(s,l){var m=l.segmentIndex-s.segmentIndex+2,C=l.dist>0||!l.coord.equals2D(this.edge.pts[l.segmentIndex]);C||m--;var k=new Array(m).fill(null),G=0;k[G++]=new se(s.coord);for(var J=s.segmentIndex+1;J<=l.segmentIndex;J++)k[G++]=this.edge.pts[J];return C&&(k[G]=l.coord),new nc(k,new tr(this.edge._label))},ao.prototype.add=function(s,l,m){var v=new Na(s,l,m),C=this._nodeMap.get(v);return null!==C?C:(this._nodeMap.put(v,v),v)},ao.prototype.isIntersection=function(s){for(var l=this.iterator();l.hasNext();)if(l.next().coord.equals(s))return!0;return!1},ao.prototype.interfaces_=function(){return[]},ao.prototype.getClass=function(){return ao};var Ic=function(){};Ic.prototype.getChainStartIndices=function(s){var l=0,m=new dn;m.add(new gt(l));do{var v=this.findChainEnd(s,l);m.add(new gt(v)),l=v}while(l<s.length-1);return Ic.toIntArray(m)},Ic.prototype.findChainEnd=function(s,l){for(var m=Nr.quadrant(s[l],s[l+1]),v=l+1;v<s.length&&Nr.quadrant(s[v-1],s[v])===m;)v++;return v-1},Ic.prototype.interfaces_=function(){return[]},Ic.prototype.getClass=function(){return Ic},Ic.toIntArray=function(s){for(var l=new Array(s.size()).fill(null),m=0;m<l.length;m++)l[m]=s.get(m).intValue();return l};var Ba=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new hn,this.env2=new hn;var s=arguments[0];this.e=s,this.pts=s.getCoordinates();var l=new Ic;this.startIndex=l.getChainStartIndices(this.pts)};Ba.prototype.getCoordinates=function(){return this.pts},Ba.prototype.getMaxX=function(s){var l=this.pts[this.startIndex[s]].x,m=this.pts[this.startIndex[s+1]].x;return l>m?l:m},Ba.prototype.getMinX=function(s){var l=this.pts[this.startIndex[s]].x,m=this.pts[this.startIndex[s+1]].x;return l<m?l:m},Ba.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var s=arguments[0],l=arguments[1],m=arguments[2];this.computeIntersectsForChain(this.startIndex[s],this.startIndex[s+1],l,l.startIndex[m],l.startIndex[m+1],arguments[3])}else if(6===arguments.length){var C=arguments[0],k=arguments[1],G=arguments[2],J=arguments[3],fe=arguments[4],pe=arguments[5],ot=this.pts[C],nt=this.pts[k],wt=G.pts[J],Pt=G.pts[fe];if(k-C==1&&fe-J==1)return pe.addIntersections(this.e,C,G.e,J),null;if(this.env1.init(ot,nt),this.env2.init(wt,Pt),!this.env1.intersects(this.env2))return null;var $t=Math.trunc((C+k)/2),Ft=Math.trunc((J+fe)/2);C<$t&&(J<Ft&&this.computeIntersectsForChain(C,$t,G,J,Ft,pe),Ft<fe&&this.computeIntersectsForChain(C,$t,G,Ft,fe,pe)),$t<k&&(J<Ft&&this.computeIntersectsForChain($t,k,G,J,Ft,pe),Ft<fe&&this.computeIntersectsForChain($t,k,G,Ft,fe,pe))}},Ba.prototype.getStartIndexes=function(){return this.startIndex},Ba.prototype.computeIntersects=function(s,l){for(var m=0;m<this.startIndex.length-1;m++)for(var v=0;v<s.startIndex.length-1;v++)this.computeIntersectsForChain(m,s,v,l)},Ba.prototype.interfaces_=function(){return[]},Ba.prototype.getClass=function(){return Ba};var xo=function s(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var l=0;l<2;l++)for(var m=0;m<3;m++)this._depth[l][m]=s.NULL_VALUE},xd={NULL_VALUE:{configurable:!0}};xo.prototype.getDepth=function(s,l){return this._depth[s][l]},xo.prototype.setDepth=function(s,l,m){this._depth[s][l]=m},xo.prototype.isNull=function(){if(0===arguments.length){for(var s=0;s<2;s++)for(var l=0;l<3;l++)if(this._depth[s][l]!==xo.NULL_VALUE)return!1;return!0}return 1===arguments.length?this._depth[arguments[0]][1]===xo.NULL_VALUE:2===arguments.length?this._depth[arguments[0]][arguments[1]]===xo.NULL_VALUE:void 0},xo.prototype.normalize=function(){for(var s=0;s<2;s++)if(!this.isNull(s)){var l=this._depth[s][1];this._depth[s][2]<l&&(l=this._depth[s][2]),l<0&&(l=0);for(var m=1;m<3;m++){var v=0;this._depth[s][m]>l&&(v=1),this._depth[s][m]=v}}},xo.prototype.getDelta=function(s){return this._depth[s][ft.RIGHT]-this._depth[s][ft.LEFT]},xo.prototype.getLocation=function(s,l){return this._depth[s][l]<=0?de.EXTERIOR:de.INTERIOR},xo.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},xo.prototype.add=function(){if(1===arguments.length)for(var s=arguments[0],l=0;l<2;l++)for(var m=1;m<3;m++){var v=s.getLocation(l,m);v!==de.EXTERIOR&&v!==de.INTERIOR||(this.isNull(l,m)?this._depth[l][m]=xo.depthAtLocation(v):this._depth[l][m]+=xo.depthAtLocation(v))}else 3===arguments.length&&arguments[2]===de.INTERIOR&&this._depth[arguments[0]][arguments[1]]++},xo.prototype.interfaces_=function(){return[]},xo.prototype.getClass=function(){return xo},xo.depthAtLocation=function(s){return s===de.EXTERIOR?0:s===de.INTERIOR?1:xo.NULL_VALUE},xd.NULL_VALUE.get=function(){return-1},Object.defineProperties(xo,xd);var nc=function(s){function l(){if(s.call(this),this.pts=null,this._env=null,this.eiList=new ao(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new xo,this._depthDelta=0,1===arguments.length)l.call(this,arguments[0],null);else if(2===arguments.length){var C=arguments[1];this.pts=arguments[0],this._label=C}}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.getDepth=function(){return this._depth},l.prototype.getCollapsedEdge=function(){var m=new Array(2).fill(null);return m[0]=this.pts[0],m[1]=this.pts[1],new l(m,tr.toLineLabel(this._label))},l.prototype.isIsolated=function(){return this._isIsolated},l.prototype.getCoordinates=function(){return this.pts},l.prototype.setIsolated=function(m){this._isIsolated=m},l.prototype.setName=function(m){this._name=m},l.prototype.equals=function(m){if(!(m instanceof l))return!1;var v=m;if(this.pts.length!==v.pts.length)return!1;for(var C=!0,k=!0,G=this.pts.length,J=0;J<this.pts.length;J++)if(this.pts[J].equals2D(v.pts[J])||(C=!1),this.pts[J].equals2D(v.pts[--G])||(k=!1),!C&&!k)return!1;return!0},l.prototype.getCoordinate=function(){return 0===arguments.length?this.pts.length>0?this.pts[0]:null:1===arguments.length?this.pts[arguments[0]]:void 0},l.prototype.print=function(m){m.print("edge "+this._name+": "),m.print("LINESTRING (");for(var v=0;v<this.pts.length;v++)v>0&&m.print(","),m.print(this.pts[v].x+" "+this.pts[v].y);m.print(")  "+this._label+" "+this._depthDelta)},l.prototype.computeIM=function(m){l.updateIM(this._label,m)},l.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},l.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},l.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},l.prototype.getDepthDelta=function(){return this._depthDelta},l.prototype.getNumPoints=function(){return this.pts.length},l.prototype.printReverse=function(m){m.print("edge "+this._name+": ");for(var v=this.pts.length-1;v>=0;v--)m.print(this.pts[v]+" ");m.println("")},l.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Ba(this)),this._mce},l.prototype.getEnvelope=function(){if(null===this._env){this._env=new hn;for(var m=0;m<this.pts.length;m++)this._env.expandToInclude(this.pts[m])}return this._env},l.prototype.addIntersection=function(m,v,C,k){var G=new se(m.getIntersection(k)),J=v,fe=m.getEdgeDistance(C,k),pe=J+1;pe<this.pts.length&&G.equals2D(this.pts[pe])&&(J=pe,fe=0),this.eiList.add(G,J,fe)},l.prototype.toString=function(){var m=new $e;m.append("edge "+this._name+": "),m.append("LINESTRING (");for(var v=0;v<this.pts.length;v++)v>0&&m.append(","),m.append(this.pts[v].x+" "+this.pts[v].y);return m.append(")  "+this._label+" "+this._depthDelta),m.toString()},l.prototype.isPointwiseEqual=function(m){if(this.pts.length!==m.pts.length)return!1;for(var v=0;v<this.pts.length;v++)if(!this.pts[v].equals2D(m.pts[v]))return!1;return!0},l.prototype.setDepthDelta=function(m){this._depthDelta=m},l.prototype.getEdgeIntersectionList=function(){return this.eiList},l.prototype.addIntersections=function(m,v,C){for(var k=0;k<m.getIntersectionNum();k++)this.addIntersection(m,v,C,k)},l.prototype.interfaces_=function(){return[]},l.prototype.getClass=function(){return l},l.updateIM=function(){if(2!==arguments.length)return s.prototype.updateIM.apply(this,arguments);var m=arguments[0],v=arguments[1];v.setAtLeastIfValid(m.getLocation(0,ft.ON),m.getLocation(1,ft.ON),1),m.isArea()&&(v.setAtLeastIfValid(m.getLocation(0,ft.LEFT),m.getLocation(1,ft.LEFT),2),v.setAtLeastIfValid(m.getLocation(0,ft.RIGHT),m.getLocation(1,ft.RIGHT),2))},l}(po),Xs=function(s){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new _n,this._bufParams=s||null};Xs.prototype.setWorkingPrecisionModel=function(s){this._workingPrecisionModel=s},Xs.prototype.insertUniqueEdge=function(s){var l=this._edgeList.findEqualEdge(s);if(null!==l){var m=l.getLabel(),v=s.getLabel();l.isPointwiseEqual(s)||(v=new tr(s.getLabel())).flip(),m.merge(v);var C=Xs.depthDelta(v),k=l.getDepthDelta()+C;l.setDepthDelta(k)}else this._edgeList.add(s),s.setDepthDelta(Xs.depthDelta(s.getLabel()))},Xs.prototype.buildSubgraphs=function(s,l){for(var m=new dn,v=s.iterator();v.hasNext();){var C=v.next(),k=C.getRightmostCoordinate(),G=new Ja(m).getDepth(k);C.computeDepth(G),C.findResultEdges(),m.add(C),l.add(C.getDirectedEdges(),C.getNodes())}},Xs.prototype.createSubgraphs=function(s){for(var l=new dn,m=s.getNodes().iterator();m.hasNext();){var v=m.next();if(!v.isVisited()){var C=new vr;C.create(v),l.add(C)}}return Cl.sort(l,Cl.reverseOrder()),l},Xs.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},Xs.prototype.getNoder=function(s){if(null!==this._workingNoder)return this._workingNoder;var l=new gc,m=new Yt;return m.setPrecisionModel(s),l.setSegmentIntersector(new $s(m)),l},Xs.prototype.buffer=function(s,l){var m=this._workingPrecisionModel;null===m&&(m=s.getPrecisionModel()),this._geomFact=s.getFactory();var v=new Ca(m,this._bufParams),C=new oa(s,l,v).getCurves();if(C.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(C,m),this._graph=new os(new go),this._graph.addEdges(this._edgeList.getEdges());var k=this.createSubgraphs(this._graph),G=new Ws(this._geomFact);this.buildSubgraphs(k,G);var J=G.getPolygons();return J.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(J)},Xs.prototype.computeNodedEdges=function(s,l){var m=this.getNoder(l);m.computeNodes(s);for(var v=m.getNodedSubstrings().iterator();v.hasNext();){var C=v.next(),k=C.getCoordinates();if(2!==k.length||!k[0].equals2D(k[1])){var G=C.getData(),J=new nc(C.getCoordinates(),new tr(G));this.insertUniqueEdge(J)}}},Xs.prototype.setNoder=function(s){this._workingNoder=s},Xs.prototype.interfaces_=function(){return[]},Xs.prototype.getClass=function(){return Xs},Xs.depthDelta=function(s){var l=s.getLocation(0,ft.LEFT),m=s.getLocation(0,ft.RIGHT);return l===de.INTERIOR&&m===de.EXTERIOR?1:l===de.EXTERIOR&&m===de.INTERIOR?-1:0},Xs.convertSegStrings=function(s){for(var l=new Xi,m=new dn;s.hasNext();){var v=s.next(),C=l.createLineString(v.getCoordinates());m.add(C)}return l.buildGeometry(m)};var ic=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var l=arguments[1];this._noder=arguments[0],this._scaleFactor=l,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var v=arguments[1],C=arguments[2],k=arguments[3];this._noder=arguments[0],this._scaleFactor=v,this._offsetX=C,this._offsetY=k,this._isScaled=!this.isIntegerPrecision()}};ic.prototype.rescale=function(){if(dt(arguments[0],Mr))for(var s=arguments[0].iterator();s.hasNext();){var l=s.next();this.rescale(l.getCoordinates())}else if(arguments[0]instanceof Array){for(var m=arguments[0],v=0;v<m.length;v++)m[v].x=m[v].x/this._scaleFactor+this._offsetX,m[v].y=m[v].y/this._scaleFactor+this._offsetY;2===m.length&&m[0].equals2D(m[1])&&si.out.println(m)}},ic.prototype.scale=function(){if(dt(arguments[0],Mr)){for(var s=arguments[0],l=new dn,m=s.iterator();m.hasNext();){var v=m.next();l.add(new as(this.scale(v.getCoordinates()),v.getData()))}return l}if(arguments[0]instanceof Array){for(var C=arguments[0],k=new Array(C.length).fill(null),G=0;G<C.length;G++)k[G]=new se(Math.round((C[G].x-this._offsetX)*this._scaleFactor),Math.round((C[G].y-this._offsetY)*this._scaleFactor),C[G].z);return fi.removeRepeatedPoints(k)}},ic.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ic.prototype.getNodedSubstrings=function(){var s=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(s),s},ic.prototype.computeNodes=function(s){var l=s;this._isScaled&&(l=this.scale(s)),this._noder.computeNodes(l)},ic.prototype.interfaces_=function(){return[Sc]},ic.prototype.getClass=function(){return ic};var sa=function(){this._li=new Yt,this._segStrings=null,this._segStrings=arguments[0]},gs={fact:{configurable:!0}};sa.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var s=this._segStrings.iterator();s.hasNext();){var l=s.next().getCoordinates();this.checkEndPtVertexIntersections(l[0],this._segStrings),this.checkEndPtVertexIntersections(l[l.length-1],this._segStrings)}else if(2===arguments.length)for(var m=arguments[0],v=arguments[1].iterator();v.hasNext();)for(var C=v.next().getCoordinates(),k=1;k<C.length-1;k++)if(C[k].equals(m))throw new je("found endpt/interior pt intersection at index "+k+" :pt "+m)},sa.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var s=this._segStrings.iterator();s.hasNext();)for(var l=s.next(),m=this._segStrings.iterator();m.hasNext();){var v=m.next();this.checkInteriorIntersections(l,v)}else if(2===arguments.length)for(var C=arguments[0],k=arguments[1],G=C.getCoordinates(),J=k.getCoordinates(),fe=0;fe<G.length-1;fe++)for(var pe=0;pe<J.length-1;pe++)this.checkInteriorIntersections(C,fe,k,pe);else if(4===arguments.length){var ot=arguments[0],nt=arguments[1],wt=arguments[2],Pt=arguments[3];if(ot===wt&&nt===Pt)return null;var $t=ot.getCoordinates()[nt],Ft=ot.getCoordinates()[nt+1],En=wt.getCoordinates()[Pt],Dn=wt.getCoordinates()[Pt+1];if(this._li.computeIntersection($t,Ft,En,Dn),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,$t,Ft)||this.hasInteriorIntersection(this._li,En,Dn)))throw new je("found non-noded intersection at "+$t+"-"+Ft+" and "+En+"-"+Dn)}},sa.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},sa.prototype.checkCollapses=function(){if(0===arguments.length)for(var s=this._segStrings.iterator();s.hasNext();){var l=s.next();this.checkCollapses(l)}else if(1===arguments.length)for(var m=arguments[0].getCoordinates(),v=0;v<m.length-2;v++)this.checkCollapse(m[v],m[v+1],m[v+2])},sa.prototype.hasInteriorIntersection=function(s,l,m){for(var v=0;v<s.getIntersectionNum();v++){var C=s.getIntersection(v);if(!C.equals(l)&&!C.equals(m))return!0}return!1},sa.prototype.checkCollapse=function(s,l,m){if(s.equals(m))throw new je("found non-noded collapse at "+sa.fact.createLineString([s,l,m]))},sa.prototype.interfaces_=function(){return[]},sa.prototype.getClass=function(){return sa},gs.fact.get=function(){return new Xi},Object.defineProperties(sa,gs);var Qo=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var s=arguments[0],l=arguments[1],m=arguments[2];if(this._originalPt=s,this._pt=s,this._scaleFactor=l,this._li=m,l<=0)throw new ye("Scale factor must be non-zero");1!==l&&(this._pt=new se(this.scale(s.x),this.scale(s.y)),this._p0Scaled=new se,this._p1Scaled=new se),this.initCorners(this._pt)},Vd={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};Qo.prototype.intersectsScaled=function(s,l){var m=Math.min(s.x,l.x),v=Math.max(s.x,l.x),C=Math.min(s.y,l.y),k=Math.max(s.y,l.y),G=this._maxx<m||this._minx>v||this._maxy<C||this._miny>k;if(G)return!1;var J=this.intersectsToleranceSquare(s,l);return ke.isTrue(!(G&&J),"Found bad envelope test"),J},Qo.prototype.initCorners=function(s){this._minx=s.x-.5,this._maxx=s.x+.5,this._miny=s.y-.5,this._maxy=s.y+.5,this._corner[0]=new se(this._maxx,this._maxy),this._corner[1]=new se(this._minx,this._maxy),this._corner[2]=new se(this._minx,this._miny),this._corner[3]=new se(this._maxx,this._miny)},Qo.prototype.intersects=function(s,l){return 1===this._scaleFactor?this.intersectsScaled(s,l):(this.copyScaled(s,this._p0Scaled),this.copyScaled(l,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},Qo.prototype.scale=function(s){return Math.round(s*this._scaleFactor)},Qo.prototype.getCoordinate=function(){return this._originalPt},Qo.prototype.copyScaled=function(s,l){l.x=this.scale(s.x),l.y=this.scale(s.y)},Qo.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var s=Qo.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new hn(this._originalPt.x-s,this._originalPt.x+s,this._originalPt.y-s,this._originalPt.y+s)}return this._safeEnv},Qo.prototype.intersectsPixelClosure=function(s,l){return this._li.computeIntersection(s,l,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(s,l,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(s,l,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(s,l,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},Qo.prototype.intersectsToleranceSquare=function(s,l){var m=!1,v=!1;return this._li.computeIntersection(s,l,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(s,l,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(m=!0),this._li.computeIntersection(s,l,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(v=!0),this._li.computeIntersection(s,l,this._corner[3],this._corner[0]),this._li.isProper()||m&&v||s.equals(this._pt)||l.equals(this._pt)))))},Qo.prototype.addSnappedNode=function(s,l){var m=s.getCoordinate(l),v=s.getCoordinate(l+1);return!!this.intersects(m,v)&&(s.addIntersection(this.getCoordinate(),l),!0)},Qo.prototype.interfaces_=function(){return[]},Qo.prototype.getClass=function(){return Qo},Vd.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(Qo,Vd);var Qa=function(){this.tempEnv1=new hn,this.selectedSegment=new Ci};Qa.prototype.select=function(){1!==arguments.length&&2===arguments.length&&(arguments[0].getLineSegment(arguments[1],this.selectedSegment),this.select(this.selectedSegment))},Qa.prototype.interfaces_=function(){return[]},Qa.prototype.getClass=function(){return Qa};var za=function(){this._index=null,this._index=arguments[0]},wh={HotPixelSnapAction:{configurable:!0}};za.prototype.snap=function(){if(1===arguments.length)return this.snap(arguments[0],null,-1);if(3===arguments.length){var l=arguments[0],m=arguments[1],v=arguments[2],C=l.getSafeEnvelope(),k=new Gd(l,m,v);return this._index.query(C,{interfaces_:function(){return[mc]},visitItem:function(G){G.select(C,k)}}),k.isNodeAdded()}},za.prototype.interfaces_=function(){return[]},za.prototype.getClass=function(){return za},wh.HotPixelSnapAction.get=function(){return Gd},Object.defineProperties(za,wh);var Gd=function(s){function l(){s.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var v=arguments[1],C=arguments[2];this._hotPixel=arguments[0],this._parentEdge=v,this._hotPixelVertexIndex=C}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.isNodeAdded=function(){return this._isNodeAdded},l.prototype.select=function(){if(2!==arguments.length)return s.prototype.select.apply(this,arguments);var v=arguments[1],C=arguments[0].getContext();if(null!==this._parentEdge&&C===this._parentEdge&&v===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(C,v)},l.prototype.interfaces_=function(){return[]},l.prototype.getClass=function(){return l},l}(Qa),$l=function(){this._li=null,this._interiorIntersections=null,this._li=arguments[0],this._interiorIntersections=new dn};$l.prototype.processIntersections=function(s,l,m,v){if(s===m&&l===v)return null;var C=s.getCoordinates()[l],k=s.getCoordinates()[l+1],G=m.getCoordinates()[v],J=m.getCoordinates()[v+1];if(this._li.computeIntersection(C,k,G,J),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var fe=0;fe<this._li.getIntersectionNum();fe++)this._interiorIntersections.add(this._li.getIntersection(fe));s.addIntersections(this._li,l,0),m.addIntersections(this._li,v,1)}},$l.prototype.isDone=function(){return!1},$l.prototype.getInteriorIntersections=function(){return this._interiorIntersections},$l.prototype.interfaces_=function(){return[Pr]},$l.prototype.getClass=function(){return $l};var Il=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var s=arguments[0];this._pm=s,this._li=new Yt,this._li.setPrecisionModel(s),this._scaleFactor=s.getScale()};Il.prototype.checkCorrectness=function(s){var l=as.getNodedSubstrings(s),m=new sa(l);try{m.checkValid()}catch(v){if(!(v instanceof Bn))throw v;v.printStackTrace()}},Il.prototype.getNodedSubstrings=function(){return as.getNodedSubstrings(this._nodedSegStrings)},Il.prototype.snapRound=function(s,l){var m=this.findInteriorIntersections(s,l);this.computeIntersectionSnaps(m),this.computeVertexSnaps(s)},Il.prototype.findInteriorIntersections=function(s,l){var m=new $l(l);return this._noder.setSegmentIntersector(m),this._noder.computeNodes(s),m.getInteriorIntersections()},Il.prototype.computeVertexSnaps=function(){if(dt(arguments[0],Mr))for(var s=arguments[0].iterator();s.hasNext();){var l=s.next();this.computeVertexSnaps(l)}else if(arguments[0]instanceof as)for(var m=arguments[0],v=m.getCoordinates(),C=0;C<v.length;C++){var k=new Qo(v[C],this._scaleFactor,this._li);this._pointSnapper.snap(k,m,C)&&m.addIntersection(v[C],C)}},Il.prototype.computeNodes=function(s){this._nodedSegStrings=s,this._noder=new gc,this._pointSnapper=new za(this._noder.getIndex()),this.snapRound(s,this._li)},Il.prototype.computeIntersectionSnaps=function(s){for(var l=s.iterator();l.hasNext();){var m=l.next(),v=new Qo(m,this._scaleFactor,this._li);this._pointSnapper.snap(v)}},Il.prototype.interfaces_=function(){return[Sc]},Il.prototype.getClass=function(){return Il};var _s=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new ji,this._resultGeometry=null,this._saveException=null,1===arguments.length)this._argGeom=arguments[0];else if(2===arguments.length){var m=arguments[1];this._argGeom=arguments[0],this._bufParams=m}},rc={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};_s.prototype.bufferFixedPrecision=function(s){var l=new ic(new Il(new ci(1)),s.getScale()),m=new Xs(this._bufParams);m.setWorkingPrecisionModel(s),m.setNoder(l),this._resultGeometry=m.buffer(this._argGeom,this._distance)},_s.prototype.bufferReducedPrecision=function(){var s=this;if(0===arguments.length){for(var l=_s.MAX_PRECISION_DIGITS;l>=0;l--){try{s.bufferReducedPrecision(l)}catch(k){if(!(k instanceof zn))throw k;s._saveException=k}if(null!==s._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var v=_s.precisionScaleFactor(this._argGeom,this._distance,arguments[0]),C=new ci(v);this.bufferFixedPrecision(C)}},_s.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var s=this._argGeom.getFactory().getPrecisionModel();s.getType()===ci.FIXED?this.bufferFixedPrecision(s):this.bufferReducedPrecision()},_s.prototype.setQuadrantSegments=function(s){this._bufParams.setQuadrantSegments(s)},_s.prototype.bufferOriginalPrecision=function(){try{var s=new Xs(this._bufParams);this._resultGeometry=s.buffer(this._argGeom,this._distance)}catch(l){if(!(l instanceof je))throw l;this._saveException=l}},_s.prototype.getResultGeometry=function(s){return this._distance=s,this.computeGeometry(),this._resultGeometry},_s.prototype.setEndCapStyle=function(s){this._bufParams.setEndCapStyle(s)},_s.prototype.interfaces_=function(){return[]},_s.prototype.getClass=function(){return _s},_s.bufferOp=function(){if(2===arguments.length){var l=arguments[1];return new _s(arguments[0]).getResultGeometry(l)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof sn&&"number"==typeof arguments[1]){var v=arguments[1],C=arguments[2],k=new _s(arguments[0]);return k.setQuadrantSegments(C),k.getResultGeometry(v)}if(arguments[2]instanceof ji&&arguments[0]instanceof sn&&"number"==typeof arguments[1]){var J=arguments[1];return new _s(arguments[0],arguments[2]).getResultGeometry(J)}}else if(4===arguments.length){var ot=arguments[1],nt=arguments[2],wt=arguments[3],Pt=new _s(arguments[0]);return Pt.setQuadrantSegments(nt),Pt.setEndCapStyle(wt),Pt.getResultGeometry(ot)}},_s.precisionScaleFactor=function(s,l,m){var v=s.getEnvelopeInternal(),C=Me.max(Math.abs(v.getMaxX()),Math.abs(v.getMaxY()),Math.abs(v.getMinX()),Math.abs(v.getMinY()))+2*(l>0?l:0),k=m-Math.trunc(Math.log(C)/Math.log(10)+1);return Math.pow(10,k)},rc.CAP_ROUND.get=function(){return ji.CAP_ROUND},rc.CAP_BUTT.get=function(){return ji.CAP_FLAT},rc.CAP_FLAT.get=function(){return ji.CAP_FLAT},rc.CAP_SQUARE.get=function(){return ji.CAP_SQUARE},rc.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(_s,rc);var _o=function(){this._pt=[new se,new se],this._distance=ce.NaN,this._isNull=!0};_o.prototype.getCoordinates=function(){return this._pt},_o.prototype.getCoordinate=function(s){return this._pt[s]},_o.prototype.setMinimum=function(){if(1===arguments.length){var s=arguments[0];this.setMinimum(s._pt[0],s._pt[1])}else if(2===arguments.length){var l=arguments[0],m=arguments[1];if(this._isNull)return this.initialize(l,m),null;var v=l.distance(m);v<this._distance&&this.initialize(l,m,v)}},_o.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var s=arguments[0],l=arguments[1];this._pt[0].setCoordinate(s),this._pt[1].setCoordinate(l),this._distance=s.distance(l),this._isNull=!1}else if(3===arguments.length){var v=arguments[1],C=arguments[2];this._pt[0].setCoordinate(arguments[0]),this._pt[1].setCoordinate(v),this._distance=C,this._isNull=!1}},_o.prototype.getDistance=function(){return this._distance},_o.prototype.setMaximum=function(){if(1===arguments.length){var s=arguments[0];this.setMaximum(s._pt[0],s._pt[1])}else if(2===arguments.length){var l=arguments[0],m=arguments[1];if(this._isNull)return this.initialize(l,m),null;var v=l.distance(m);v>this._distance&&this.initialize(l,m,v)}},_o.prototype.interfaces_=function(){return[]},_o.prototype.getClass=function(){return _o};var Ua=function(){};Ua.prototype.interfaces_=function(){return[]},Ua.prototype.getClass=function(){return Ua},Ua.computeDistance=function(){if(arguments[2]instanceof _o&&arguments[0]instanceof xn&&arguments[1]instanceof se)for(var l=arguments[1],m=arguments[2],v=arguments[0].getCoordinates(),C=new Ci,k=0;k<v.length-1;k++){C.setCoordinates(v[k],v[k+1]);var G=C.closestPoint(l);m.setMinimum(G,l)}else if(arguments[2]instanceof _o&&arguments[0]instanceof ii&&arguments[1]instanceof se){var J=arguments[0],fe=arguments[1],pe=arguments[2];Ua.computeDistance(J.getExteriorRing(),fe,pe);for(var ot=0;ot<J.getNumInteriorRing();ot++)Ua.computeDistance(J.getInteriorRingN(ot),fe,pe)}else if(arguments[2]instanceof _o&&arguments[0]instanceof sn&&arguments[1]instanceof se){var nt=arguments[0],wt=arguments[1],Pt=arguments[2];if(nt instanceof xn)Ua.computeDistance(nt,wt,Pt);else if(nt instanceof ii)Ua.computeDistance(nt,wt,Pt);else if(nt instanceof vt)for(var $t=nt,Ft=0;Ft<$t.getNumGeometries();Ft++){var En=$t.getGeometryN(Ft);Ua.computeDistance(En,wt,Pt)}else Pt.setMinimum(nt.getCoordinate(),wt)}else if(arguments[2]instanceof _o&&arguments[0]instanceof Ci&&arguments[1]instanceof se){var Ln=arguments[1],Zi=arguments[2],Qi=arguments[0].closestPoint(Ln);Zi.setMinimum(Qi,Ln)}};var aa=function(s){this._maxPtDist=new _o,this._inputGeom=s||null},$d={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};aa.prototype.computeMaxMidpointDistance=function(s){var l=new _c(this._inputGeom);s.apply(l),this._maxPtDist.setMaximum(l.getMaxPointDistance())},aa.prototype.computeMaxVertexDistance=function(s){var l=new el(this._inputGeom);s.apply(l),this._maxPtDist.setMaximum(l.getMaxPointDistance())},aa.prototype.findDistance=function(s){return this.computeMaxVertexDistance(s),this.computeMaxMidpointDistance(s),this._maxPtDist.getDistance()},aa.prototype.getDistancePoints=function(){return this._maxPtDist},aa.prototype.interfaces_=function(){return[]},aa.prototype.getClass=function(){return aa},$d.MaxPointDistanceFilter.get=function(){return el},$d.MaxMidpointDistanceFilter.get=function(){return _c},Object.defineProperties(aa,$d);var el=function(s){this._maxPtDist=new _o,this._minPtDist=new _o,this._geom=s||null};el.prototype.filter=function(s){this._minPtDist.initialize(),Ua.computeDistance(this._geom,s,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},el.prototype.getMaxPointDistance=function(){return this._maxPtDist},el.prototype.interfaces_=function(){return[Ti]},el.prototype.getClass=function(){return el};var _c=function(s){this._maxPtDist=new _o,this._minPtDist=new _o,this._geom=s||null};_c.prototype.filter=function(s,l){if(0===l)return null;var m=s.getCoordinate(l-1),v=s.getCoordinate(l),C=new se((m.x+v.x)/2,(m.y+v.y)/2);this._minPtDist.initialize(),Ua.computeDistance(this._geom,C,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},_c.prototype.isDone=function(){return!1},_c.prototype.isGeometryChanged=function(){return!1},_c.prototype.getMaxPointDistance=function(){return this._maxPtDist},_c.prototype.interfaces_=function(){return[Dt]},_c.prototype.getClass=function(){return _c};var va=function(s){this._comps=s||null};va.prototype.filter=function(s){s instanceof ii&&this._comps.add(s)},va.prototype.interfaces_=function(){return[Ot]},va.prototype.getClass=function(){return va},va.getPolygons=function(){if(1===arguments.length)return va.getPolygons(arguments[0],new dn);if(2===arguments.length){var l=arguments[0],m=arguments[1];return l instanceof ii?m.add(l):l instanceof vt&&l.apply(new va(m)),m}};var vs=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length)this._lines=arguments[0];else if(2===arguments.length){var m=arguments[1];this._lines=arguments[0],this._isForcedToLineString=m}};vs.prototype.filter=function(s){if(this._isForcedToLineString&&s instanceof Mi){var l=s.getFactory().createLineString(s.getCoordinateSequence());return this._lines.add(l),null}s instanceof xn&&this._lines.add(s)},vs.prototype.setForceToLineString=function(s){this._isForcedToLineString=s},vs.prototype.interfaces_=function(){return[In]},vs.prototype.getClass=function(){return vs},vs.getGeometry=function(){if(1===arguments.length){var s=arguments[0];return s.getFactory().buildGeometry(vs.getLines(s))}if(2===arguments.length){var l=arguments[0],m=arguments[1];return l.getFactory().buildGeometry(vs.getLines(l,m))}},vs.getLines=function(){if(1===arguments.length)return vs.getLines(arguments[0],!1);if(2===arguments.length){if(dt(arguments[0],Mr)&&dt(arguments[1],Mr)){for(var m=arguments[1],v=arguments[0].iterator();v.hasNext();){var C=v.next();vs.getLines(C,m)}return m}if(arguments[0]instanceof sn&&"boolean"==typeof arguments[1]){var k=arguments[0],G=arguments[1],J=new dn;return k.apply(new vs(J,G)),J}if(arguments[0]instanceof sn&&dt(arguments[1],Mr)){var fe=arguments[0],pe=arguments[1];return fe instanceof xn?pe.add(fe):fe.apply(new vs(pe)),pe}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&dt(arguments[0],Mr)&&dt(arguments[1],Mr)){for(var nt=arguments[1],wt=arguments[2],Pt=arguments[0].iterator();Pt.hasNext();){var $t=Pt.next();vs.getLines($t,nt,wt)}return nt}if("boolean"==typeof arguments[2]&&arguments[0]instanceof sn&&dt(arguments[1],Mr)){var En=arguments[1];return arguments[0].apply(new vs(En,arguments[2])),En}}};var Va=function(){if(this._boundaryRule=Bi.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0!==arguments.length&&1===arguments.length){var s=arguments[0];if(null===s)throw new ye("Rule must be non-null");this._boundaryRule=s}};Va.prototype.locateInternal=function(){if(arguments[0]instanceof se&&arguments[1]instanceof ii){var s=arguments[0],l=arguments[1];if(l.isEmpty())return de.EXTERIOR;var m=l.getExteriorRing(),v=this.locateInPolygonRing(s,m);if(v===de.EXTERIOR)return de.EXTERIOR;if(v===de.BOUNDARY)return de.BOUNDARY;for(var C=0;C<l.getNumInteriorRing();C++){var k=l.getInteriorRingN(C),G=this.locateInPolygonRing(s,k);if(G===de.INTERIOR)return de.EXTERIOR;if(G===de.BOUNDARY)return de.BOUNDARY}return de.INTERIOR}if(arguments[0]instanceof se&&arguments[1]instanceof xn){var J=arguments[0],fe=arguments[1];if(!fe.getEnvelopeInternal().intersects(J))return de.EXTERIOR;var pe=fe.getCoordinates();return fe.isClosed()||!J.equals(pe[0])&&!J.equals(pe[pe.length-1])?mt.isOnLine(J,pe)?de.INTERIOR:de.EXTERIOR:de.BOUNDARY}if(arguments[0]instanceof se&&arguments[1]instanceof mi){var ot=arguments[0];return arguments[1].getCoordinate().equals2D(ot)?de.INTERIOR:de.EXTERIOR}},Va.prototype.locateInPolygonRing=function(s,l){return l.getEnvelopeInternal().intersects(s)?mt.locatePointInRing(s,l.getCoordinates()):de.EXTERIOR},Va.prototype.intersects=function(s,l){return this.locate(s,l)!==de.EXTERIOR},Va.prototype.updateLocationInfo=function(s){s===de.INTERIOR&&(this._isIn=!0),s===de.BOUNDARY&&this._numBoundaries++},Va.prototype.computeLocation=function(s,l){if(l instanceof mi&&this.updateLocationInfo(this.locateInternal(s,l)),l instanceof xn)this.updateLocationInfo(this.locateInternal(s,l));else if(l instanceof ii)this.updateLocationInfo(this.locateInternal(s,l));else if(l instanceof Lt)for(var m=l,v=0;v<m.getNumGeometries();v++){var C=m.getGeometryN(v);this.updateLocationInfo(this.locateInternal(s,C))}else if(l instanceof Wi)for(var k=l,G=0;G<k.getNumGeometries();G++){var J=k.getGeometryN(G);this.updateLocationInfo(this.locateInternal(s,J))}else if(l instanceof vt)for(var fe=new Ml(l);fe.hasNext();){var pe=fe.next();pe!==l&&this.computeLocation(s,pe)}},Va.prototype.locate=function(s,l){return l.isEmpty()?de.EXTERIOR:l instanceof xn||l instanceof ii?this.locateInternal(s,l):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(s,l),this._boundaryRule.isInBoundary(this._numBoundaries)?de.BOUNDARY:this._numBoundaries>0||this._isIn?de.INTERIOR:de.EXTERIOR)},Va.prototype.interfaces_=function(){return[]},Va.prototype.getClass=function(){return Va};var la=function s(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)s.call(this,arguments[0],s.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var C=arguments[1],k=arguments[2];this._component=arguments[0],this._segIndex=C,this._pt=k}},Eh={INSIDE_AREA:{configurable:!0}};la.prototype.isInsideArea=function(){return this._segIndex===la.INSIDE_AREA},la.prototype.getCoordinate=function(){return this._pt},la.prototype.getGeometryComponent=function(){return this._component},la.prototype.getSegmentIndex=function(){return this._segIndex},la.prototype.interfaces_=function(){return[]},la.prototype.getClass=function(){return la},Eh.INSIDE_AREA.get=function(){return-1},Object.defineProperties(la,Eh);var Hl=function(s){this._pts=s||null};Hl.prototype.filter=function(s){s instanceof mi&&this._pts.add(s)},Hl.prototype.interfaces_=function(){return[Ot]},Hl.prototype.getClass=function(){return Hl},Hl.getPoints=function(){if(1===arguments.length){var s=arguments[0];return s instanceof mi?Cl.singletonList(s):Hl.getPoints(s,new dn)}if(2===arguments.length){var l=arguments[0],m=arguments[1];return l instanceof mi?m.add(l):l instanceof vt&&l.apply(new Hl(m)),m}};var bs=function(){this._locations=null,this._locations=arguments[0]};bs.prototype.filter=function(s){(s instanceof mi||s instanceof xn||s instanceof ii)&&this._locations.add(new la(s,0,s.getCoordinate()))},bs.prototype.interfaces_=function(){return[Ot]},bs.prototype.getClass=function(){return bs},bs.getLocations=function(s){var l=new dn;return s.apply(new bs(l)),l};var io=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Va,this._minDistanceLocation=null,this._minDistance=ce.MAX_VALUE,2===arguments.length)this._geom=[arguments[0],arguments[1]],this._terminateDistance=0;else if(3===arguments.length){var m=arguments[0],v=arguments[1],C=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=m,this._geom[1]=v,this._terminateDistance=C}};io.prototype.computeContainmentDistance=function(){if(0===arguments.length){var s=new Array(2).fill(null);if(this.computeContainmentDistance(0,s),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,s)}else if(2===arguments.length){var l=arguments[0],m=arguments[1],v=1-l,C=va.getPolygons(this._geom[l]);if(C.size()>0){var k=bs.getLocations(this._geom[v]);if(this.computeContainmentDistance(k,C,m),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[v]=m[0],this._minDistanceLocation[l]=m[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&dt(arguments[0],nr)&&dt(arguments[1],nr)){for(var G=arguments[0],J=arguments[1],fe=arguments[2],pe=0;pe<G.size();pe++)for(var ot=G.get(pe),nt=0;nt<J.size();nt++)if(this.computeContainmentDistance(ot,J.get(nt),fe),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof la&&arguments[1]instanceof ii){var wt=arguments[0],Pt=arguments[1],$t=arguments[2],Ft=wt.getCoordinate();if(de.EXTERIOR!==this._ptLocator.locate(Ft,Pt))return this._minDistance=0,$t[0]=wt,$t[1]=new la(Pt,Ft),null}},io.prototype.computeMinDistanceLinesPoints=function(s,l,m){for(var v=0;v<s.size();v++)for(var C=s.get(v),k=0;k<l.size();k++){var G=l.get(k);if(this.computeMinDistance(C,G,m),this._minDistance<=this._terminateDistance)return null}},io.prototype.computeFacetDistance=function(){var s=new Array(2).fill(null),l=vs.getLines(this._geom[0]),m=vs.getLines(this._geom[1]),v=Hl.getPoints(this._geom[0]),C=Hl.getPoints(this._geom[1]);return this.computeMinDistanceLines(l,m,s),this.updateMinDistance(s,!1),this._minDistance<=this._terminateDistance?null:(s[0]=null,s[1]=null,this.computeMinDistanceLinesPoints(l,C,s),this.updateMinDistance(s,!1),this._minDistance<=this._terminateDistance?null:(s[0]=null,s[1]=null,this.computeMinDistanceLinesPoints(m,v,s),this.updateMinDistance(s,!0),this._minDistance<=this._terminateDistance?null:(s[0]=null,s[1]=null,this.computeMinDistancePoints(v,C,s),void this.updateMinDistance(s,!1))))},io.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},io.prototype.updateMinDistance=function(s,l){if(null===s[0])return null;l?(this._minDistanceLocation[0]=s[1],this._minDistanceLocation[1]=s[0]):(this._minDistanceLocation[0]=s[0],this._minDistanceLocation[1]=s[1])},io.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},io.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof xn&&arguments[1]instanceof mi){var s=arguments[0],l=arguments[1],m=arguments[2];if(s.getEnvelopeInternal().distance(l.getEnvelopeInternal())>this._minDistance)return null;for(var v=s.getCoordinates(),C=l.getCoordinate(),k=0;k<v.length-1;k++){var G=mt.distancePointLine(C,v[k],v[k+1]);if(G<this._minDistance){this._minDistance=G;var J=new Ci(v[k],v[k+1]).closestPoint(C);m[0]=new la(s,k,J),m[1]=new la(l,0,C)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof xn&&arguments[1]instanceof xn){var fe=arguments[0],pe=arguments[1],ot=arguments[2];if(fe.getEnvelopeInternal().distance(pe.getEnvelopeInternal())>this._minDistance)return null;for(var nt=fe.getCoordinates(),wt=pe.getCoordinates(),Pt=0;Pt<nt.length-1;Pt++)for(var $t=0;$t<wt.length-1;$t++){var Ft=mt.distanceLineLine(nt[Pt],nt[Pt+1],wt[$t],wt[$t+1]);if(Ft<this._minDistance){this._minDistance=Ft;var En=new Ci(nt[Pt],nt[Pt+1]),Dn=new Ci(wt[$t],wt[$t+1]),Ln=En.closestPoints(Dn);ot[0]=new la(fe,Pt,Ln[0]),ot[1]=new la(pe,$t,Ln[1])}if(this._minDistance<=this._terminateDistance)return null}}},io.prototype.computeMinDistancePoints=function(s,l,m){for(var v=0;v<s.size();v++)for(var C=s.get(v),k=0;k<l.size();k++){var G=l.get(k),J=C.getCoordinate().distance(G.getCoordinate());if(J<this._minDistance&&(this._minDistance=J,m[0]=new la(C,0,C.getCoordinate()),m[1]=new la(G,0,G.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},io.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new ye("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},io.prototype.computeMinDistanceLines=function(s,l,m){for(var v=0;v<s.size();v++)for(var C=s.get(v),k=0;k<l.size();k++){var G=l.get(k);if(this.computeMinDistance(C,G,m),this._minDistance<=this._terminateDistance)return null}},io.prototype.interfaces_=function(){return[]},io.prototype.getClass=function(){return io},io.distance=function(s,l){return new io(s,l).distance()},io.isWithinDistance=function(s,l,m){return new io(s,l,m).distance()<=m},io.nearestPoints=function(s,l){return new io(s,l).nearestPoints()};var wn=function(){this._pt=[new se,new se],this._distance=ce.NaN,this._isNull=!0};wn.prototype.getCoordinates=function(){return this._pt},wn.prototype.getCoordinate=function(s){return this._pt[s]},wn.prototype.setMinimum=function(){if(1===arguments.length){var s=arguments[0];this.setMinimum(s._pt[0],s._pt[1])}else if(2===arguments.length){var l=arguments[0],m=arguments[1];if(this._isNull)return this.initialize(l,m),null;var v=l.distance(m);v<this._distance&&this.initialize(l,m,v)}},wn.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var s=arguments[0],l=arguments[1];this._pt[0].setCoordinate(s),this._pt[1].setCoordinate(l),this._distance=s.distance(l),this._isNull=!1}else if(3===arguments.length){var v=arguments[1],C=arguments[2];this._pt[0].setCoordinate(arguments[0]),this._pt[1].setCoordinate(v),this._distance=C,this._isNull=!1}},wn.prototype.toString=function(){return It.toLineString(this._pt[0],this._pt[1])},wn.prototype.getDistance=function(){return this._distance},wn.prototype.setMaximum=function(){if(1===arguments.length){var s=arguments[0];this.setMaximum(s._pt[0],s._pt[1])}else if(2===arguments.length){var l=arguments[0],m=arguments[1];if(this._isNull)return this.initialize(l,m),null;var v=l.distance(m);v>this._distance&&this.initialize(l,m,v)}},wn.prototype.interfaces_=function(){return[]},wn.prototype.getClass=function(){return wn};var Tl=function(){};Tl.prototype.interfaces_=function(){return[]},Tl.prototype.getClass=function(){return Tl},Tl.computeDistance=function(){if(arguments[2]instanceof wn&&arguments[0]instanceof xn&&arguments[1]instanceof se)for(var s=arguments[0],l=arguments[1],m=arguments[2],v=new Ci,C=s.getCoordinates(),k=0;k<C.length-1;k++){v.setCoordinates(C[k],C[k+1]);var G=v.closestPoint(l);m.setMinimum(G,l)}else if(arguments[2]instanceof wn&&arguments[0]instanceof ii&&arguments[1]instanceof se){var J=arguments[0],fe=arguments[1],pe=arguments[2];Tl.computeDistance(J.getExteriorRing(),fe,pe);for(var ot=0;ot<J.getNumInteriorRing();ot++)Tl.computeDistance(J.getInteriorRingN(ot),fe,pe)}else if(arguments[2]instanceof wn&&arguments[0]instanceof sn&&arguments[1]instanceof se){var nt=arguments[0],wt=arguments[1],Pt=arguments[2];if(nt instanceof xn)Tl.computeDistance(nt,wt,Pt);else if(nt instanceof ii)Tl.computeDistance(nt,wt,Pt);else if(nt instanceof vt)for(var $t=nt,Ft=0;Ft<$t.getNumGeometries();Ft++){var En=$t.getGeometryN(Ft);Tl.computeDistance(En,wt,Pt)}else Pt.setMinimum(nt.getCoordinate(),wt)}else if(arguments[2]instanceof wn&&arguments[0]instanceof Ci&&arguments[1]instanceof se){var Ln=arguments[1],Zi=arguments[2],Qi=arguments[0].closestPoint(Ln);Zi.setMinimum(Qi,Ln)}};var ca=function(){this._g0=null,this._g1=null,this._ptDist=new wn,this._densifyFrac=0;var l=arguments[1];this._g0=arguments[0],this._g1=l},yc={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};ca.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},ca.prototype.setDensifyFraction=function(s){if(s>1||s<=0)throw new ye("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=s},ca.prototype.compute=function(s,l){this.computeOrientedDistance(s,l,this._ptDist),this.computeOrientedDistance(l,s,this._ptDist)},ca.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},ca.prototype.computeOrientedDistance=function(s,l,m){var v=new $c(l);if(s.apply(v),m.setMaximum(v.getMaxPointDistance()),this._densifyFrac>0){var C=new Un(l,this._densifyFrac);s.apply(C),m.setMaximum(C.getMaxPointDistance())}},ca.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},ca.prototype.interfaces_=function(){return[]},ca.prototype.getClass=function(){return ca},ca.distance=function(){if(2===arguments.length)return new ca(arguments[0],arguments[1]).distance();if(3===arguments.length){var C=arguments[2],k=new ca(arguments[0],arguments[1]);return k.setDensifyFraction(C),k.distance()}},yc.MaxPointDistanceFilter.get=function(){return $c},yc.MaxDensifiedByFractionDistanceFilter.get=function(){return Un},Object.defineProperties(ca,yc);var $c=function(){this._maxPtDist=new wn,this._minPtDist=new wn,this._euclideanDist=new Tl,this._geom=null,this._geom=arguments[0]};$c.prototype.filter=function(s){this._minPtDist.initialize(),Tl.computeDistance(this._geom,s,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},$c.prototype.getMaxPointDistance=function(){return this._maxPtDist},$c.prototype.interfaces_=function(){return[Ti]},$c.prototype.getClass=function(){return $c};var Un=function(){this._maxPtDist=new wn,this._minPtDist=new wn,this._geom=null,this._numSubSegs=0;var l=arguments[1];this._geom=arguments[0],this._numSubSegs=Math.trunc(Math.round(1/l))};Un.prototype.filter=function(s,l){if(0===l)return null;for(var m=s.getCoordinate(l-1),v=s.getCoordinate(l),C=(v.x-m.x)/this._numSubSegs,k=(v.y-m.y)/this._numSubSegs,G=0;G<this._numSubSegs;G++){var pe=new se(m.x+G*C,m.y+G*k);this._minPtDist.initialize(),Tl.computeDistance(this._geom,pe,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Un.prototype.isDone=function(){return!1},Un.prototype.isGeometryChanged=function(){return!1},Un.prototype.getMaxPointDistance=function(){return this._maxPtDist},Un.prototype.interfaces_=function(){return[Dt]},Un.prototype.getClass=function(){return Un};var ua=function(s,l,m){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=s||null,this._bufDistance=l||null,this._result=m||null},Hc={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};ua.prototype.checkMaximumDistance=function(s,l,m){var v=new ca(l,s);if(v.setDensifyFraction(.25),this._maxDistanceFound=v.orientedDistance(),this._maxDistanceFound>m){this._isValid=!1;var C=v.getCoordinates();this._errorLocation=C[1],this._errorIndicator=s.getFactory().createLineString(C),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+It.toLineString(C[0],C[1])+")"}},ua.prototype.isValid=function(){var s=Math.abs(this._bufDistance),l=ua.MAX_DISTANCE_DIFF_FRAC*s;return this._minValidDistance=s-l,this._maxValidDistance=s+l,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),ua.VERBOSE&&si.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},ua.prototype.checkNegativeValid=function(){if(!(this._input instanceof ii||this._input instanceof Wi||this._input instanceof vt))return null;var s=this.getPolygonLines(this._input);if(this.checkMinimumDistance(s,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(s,this._result,this._maxValidDistance)},ua.prototype.getErrorIndicator=function(){return this._errorIndicator},ua.prototype.checkMinimumDistance=function(s,l,m){var v=new io(s,l,m);if(this._minDistanceFound=v.distance(),this._minDistanceFound<m){this._isValid=!1;var C=v.nearestPoints();this._errorLocation=v.nearestPoints()[1],this._errorIndicator=s.getFactory().createLineString(C),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+It.toLineString(C[0],C[1])+" )"}},ua.prototype.checkPositiveValid=function(){var s=this._result.getBoundary();if(this.checkMinimumDistance(this._input,s,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,s,this._maxValidDistance)},ua.prototype.getErrorLocation=function(){return this._errorLocation},ua.prototype.getPolygonLines=function(s){for(var l=new dn,m=new vs(l),v=va.getPolygons(s).iterator();v.hasNext();)v.next().apply(m);return s.getFactory().buildGeometry(l)},ua.prototype.getErrorMessage=function(){return this._errMsg},ua.prototype.interfaces_=function(){return[]},ua.prototype.getClass=function(){return ua},Hc.VERBOSE.get=function(){return!1},Hc.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(ua,Hc);var wo=function(s,l,m){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=s||null,this._distance=l||null,this._result=m||null},jc={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};wo.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},wo.prototype.checkEnvelope=function(){if(this._distance<0)return null;var s=this._distance*wo.MAX_ENV_DIFF_FRAC;0===s&&(s=.001);var l=new hn(this._input.getEnvelopeInternal());l.expandBy(this._distance);var m=new hn(this._result.getEnvelopeInternal());m.expandBy(s),m.contains(l)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(m)),this.report("Envelope")},wo.prototype.checkDistance=function(){var s=new ua(this._input,this._distance,this._result);s.isValid()||(this._isValid=!1,this._errorMsg=s.getErrorMessage(),this._errorLocation=s.getErrorLocation(),this._errorIndicator=s.getErrorIndicator()),this.report("Distance")},wo.prototype.checkArea=function(){var s=this._input.getArea(),l=this._result.getArea();this._distance>0&&s>l&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&s<l&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},wo.prototype.checkPolygonal=function(){this._result instanceof ii||this._result instanceof Wi||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},wo.prototype.getErrorIndicator=function(){return this._errorIndicator},wo.prototype.getErrorLocation=function(){return this._errorLocation},wo.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},wo.prototype.report=function(s){if(!wo.VERBOSE)return null;si.out.println("Check "+s+": "+(this._isValid?"passed":"FAILED"))},wo.prototype.getErrorMessage=function(){return this._errorMsg},wo.prototype.interfaces_=function(){return[]},wo.prototype.getClass=function(){return wo},wo.isValidMsg=function(s,l,m){var v=new wo(s,l,m);return v.isValid()?null:v.getErrorMessage()},wo.isValid=function(s,l,m){return!!new wo(s,l,m).isValid()},jc.VERBOSE.get=function(){return!1},jc.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(wo,jc);var ba=function(){this._pts=null,this._data=null;var l=arguments[1];this._pts=arguments[0],this._data=l};ba.prototype.getCoordinates=function(){return this._pts},ba.prototype.size=function(){return this._pts.length},ba.prototype.getCoordinate=function(s){return this._pts[s]},ba.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},ba.prototype.getSegmentOctant=function(s){return s===this._pts.length-1?-1:su.octant(this.getCoordinate(s),this.getCoordinate(s+1))},ba.prototype.setData=function(s){this._data=s},ba.prototype.getData=function(){return this._data},ba.prototype.toString=function(){return It.toLineString(new ei(this._pts))},ba.prototype.interfaces_=function(){return[Sl]},ba.prototype.getClass=function(){return ba};var Ts=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new dn,this._intersectionCount=0,this._keepIntersections=!0,this._li=arguments[0],this._interiorIntersection=null};Ts.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Ts.prototype.setCheckEndSegmentsOnly=function(s){this._isCheckEndSegmentsOnly=s},Ts.prototype.getIntersectionSegments=function(){return this._intSegments},Ts.prototype.count=function(){return this._intersectionCount},Ts.prototype.getIntersections=function(){return this._intersections},Ts.prototype.setFindAllIntersections=function(s){this._findAllIntersections=s},Ts.prototype.setKeepIntersections=function(s){this._keepIntersections=s},Ts.prototype.processIntersections=function(s,l,m,v){if(!this._findAllIntersections&&this.hasIntersection()||s===m&&l===v||this._isCheckEndSegmentsOnly&&!this.isEndSegment(s,l)&&!this.isEndSegment(m,v))return null;var C=s.getCoordinates()[l],k=s.getCoordinates()[l+1],G=m.getCoordinates()[v],J=m.getCoordinates()[v+1];this._li.computeIntersection(C,k,G,J),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=C,this._intSegments[1]=k,this._intSegments[2]=G,this._intSegments[3]=J,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Ts.prototype.isEndSegment=function(s,l){return 0===l||l>=s.size()-2},Ts.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Ts.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Ts.prototype.interfaces_=function(){return[Pr]},Ts.prototype.getClass=function(){return Ts},Ts.createAllIntersectionsFinder=function(s){var l=new Ts(s);return l.setFindAllIntersections(!0),l},Ts.createAnyIntersectionFinder=function(s){return new Ts(s)},Ts.createIntersectionCounter=function(s){var l=new Ts(s);return l.setFindAllIntersections(!0),l.setKeepIntersections(!1),l};var fl=function(){this._li=new Yt,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0,this._segStrings=arguments[0]};fl.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},fl.prototype.getIntersections=function(){return this._segInt.getIntersections()},fl.prototype.isValid=function(){return this.execute(),this._isValid},fl.prototype.setFindAllIntersections=function(s){this._findAllIntersections=s},fl.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Ts(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var s=new gc;if(s.setSegmentIntersector(this._segInt),s.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},fl.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new zn(this.getErrorMessage(),this._segInt.getInteriorIntersection())},fl.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var s=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+It.toLineString(s[0],s[1])+" and "+It.toLineString(s[2],s[3])},fl.prototype.interfaces_=function(){return[]},fl.prototype.getClass=function(){return fl},fl.computeIntersections=function(s){var l=new fl(s);return l.setFindAllIntersections(!0),l.isValid(),l.getIntersections()};var pl=function s(){this._nv=null,this._nv=new fl(s.toSegmentStrings(arguments[0]))};pl.prototype.checkValid=function(){this._nv.checkValid()},pl.prototype.interfaces_=function(){return[]},pl.prototype.getClass=function(){return pl},pl.toSegmentStrings=function(s){for(var l=new dn,m=s.iterator();m.hasNext();){var v=m.next();l.add(new ba(v.getCoordinates(),v))}return l},pl.checkValid=function(s){new pl(s).checkValid()};var Al=function(s){this._mapOp=s};Al.prototype.map=function(s){for(var l=new dn,m=0;m<s.getNumGeometries();m++){var v=this._mapOp.map(s.getGeometryN(m));v.isEmpty()||l.add(v)}return s.getFactory().createGeometryCollection(Xi.toGeometryArray(l))},Al.prototype.interfaces_=function(){return[]},Al.prototype.getClass=function(){return Al},Al.map=function(s,l){return new Al(l).map(s)};var ml=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new dn,this._resultLineList=new dn;var l=arguments[1],m=arguments[2];this._op=arguments[0],this._geometryFactory=l,this._ptLocator=m};ml.prototype.collectLines=function(s){for(var l=this._op.getGraph().getEdgeEnds().iterator();l.hasNext();){var m=l.next();this.collectLineEdge(m,s,this._lineEdgesList),this.collectBoundaryTouchEdge(m,s,this._lineEdgesList)}},ml.prototype.labelIsolatedLine=function(s,l){var m=this._ptLocator.locate(s.getCoordinate(),this._op.getArgGeometry(l));s.getLabel().setLocation(l,m)},ml.prototype.build=function(s){return this.findCoveredLineEdges(),this.collectLines(s),this.buildLines(s),this._resultLineList},ml.prototype.collectLineEdge=function(s,l,m){var v=s.getLabel(),C=s.getEdge();s.isLineEdge()&&(s.isVisited()||!T.isResultOfOp(v,l)||C.isCovered()||(m.add(C),s.setVisitedEdge(!0)))},ml.prototype.findCoveredLineEdges=function(){for(var s=this._op.getGraph().getNodes().iterator();s.hasNext();)s.next().getEdges().findCoveredLineEdges();for(var l=this._op.getGraph().getEdgeEnds().iterator();l.hasNext();){var m=l.next(),v=m.getEdge();if(m.isLineEdge()&&!v.isCoveredSet()){var C=this._op.isCoveredByA(m.getCoordinate());v.setCovered(C)}}},ml.prototype.labelIsolatedLines=function(s){for(var l=s.iterator();l.hasNext();){var m=l.next(),v=m.getLabel();m.isIsolated()&&(v.isNull(0)?this.labelIsolatedLine(m,0):this.labelIsolatedLine(m,1))}},ml.prototype.buildLines=function(s){for(var l=this._lineEdgesList.iterator();l.hasNext();){var m=l.next(),v=this._geometryFactory.createLineString(m.getCoordinates());this._resultLineList.add(v),m.setInResult(!0)}},ml.prototype.collectBoundaryTouchEdge=function(s,l,m){var v=s.getLabel();return s.isLineEdge()||s.isVisited()||s.isInteriorAreaEdge()||s.getEdge().isInResult()?null:(ke.isTrue(!(s.isInResult()||s.getSym().isInResult())||!s.getEdge().isInResult()),void(T.isResultOfOp(v,l)&&l===T.INTERSECTION&&(m.add(s.getEdge()),s.setVisitedEdge(!0))))},ml.prototype.interfaces_=function(){return[]},ml.prototype.getClass=function(){return ml};var qc=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new dn;var l=arguments[1];this._op=arguments[0],this._geometryFactory=l};qc.prototype.filterCoveredNodeToPoint=function(s){var l=s.getCoordinate();if(!this._op.isCoveredByLA(l)){var m=this._geometryFactory.createPoint(l);this._resultPointList.add(m)}},qc.prototype.extractNonCoveredResultNodes=function(s){for(var l=this._op.getGraph().getNodes().iterator();l.hasNext();){var m=l.next();if(!(m.isInResult()||m.isIncidentEdgeInResult()||0!==m.getEdges().getDegree()&&s!==T.INTERSECTION)){var v=m.getLabel();T.isResultOfOp(v,s)&&this.filterCoveredNodeToPoint(m)}}},qc.prototype.build=function(s){return this.extractNonCoveredResultNodes(s),this._resultPointList},qc.prototype.interfaces_=function(){return[]},qc.prototype.getClass=function(){return qc};var xs=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};xs.prototype.transformPoint=function(s,l){return this._factory.createPoint(this.transformCoordinates(s.getCoordinateSequence(),s))},xs.prototype.transformPolygon=function(s,l){var m=!0,v=this.transformLinearRing(s.getExteriorRing(),s);null!==v&&v instanceof Mi&&!v.isEmpty()||(m=!1);for(var C=new dn,k=0;k<s.getNumInteriorRing();k++){var G=this.transformLinearRing(s.getInteriorRingN(k),s);null===G||G.isEmpty()||(G instanceof Mi||(m=!1),C.add(G))}if(m)return this._factory.createPolygon(v,C.toArray([]));var J=new dn;return null!==v&&J.add(v),J.addAll(C),this._factory.buildGeometry(J)},xs.prototype.createCoordinateSequence=function(s){return this._factory.getCoordinateSequenceFactory().create(s)},xs.prototype.getInputGeometry=function(){return this._inputGeom},xs.prototype.transformMultiLineString=function(s,l){for(var m=new dn,v=0;v<s.getNumGeometries();v++){var C=this.transformLineString(s.getGeometryN(v),s);null!==C&&(C.isEmpty()||m.add(C))}return this._factory.buildGeometry(m)},xs.prototype.transformCoordinates=function(s,l){return this.copy(s)},xs.prototype.transformLineString=function(s,l){return this._factory.createLineString(this.transformCoordinates(s.getCoordinateSequence(),s))},xs.prototype.transformMultiPoint=function(s,l){for(var m=new dn,v=0;v<s.getNumGeometries();v++){var C=this.transformPoint(s.getGeometryN(v),s);null!==C&&(C.isEmpty()||m.add(C))}return this._factory.buildGeometry(m)},xs.prototype.transformMultiPolygon=function(s,l){for(var m=new dn,v=0;v<s.getNumGeometries();v++){var C=this.transformPolygon(s.getGeometryN(v),s);null!==C&&(C.isEmpty()||m.add(C))}return this._factory.buildGeometry(m)},xs.prototype.copy=function(s){return s.copy()},xs.prototype.transformGeometryCollection=function(s,l){for(var m=new dn,v=0;v<s.getNumGeometries();v++){var C=this.transform(s.getGeometryN(v));null!==C&&(this._pruneEmptyGeometry&&C.isEmpty()||m.add(C))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(Xi.toGeometryArray(m)):this._factory.buildGeometry(m)},xs.prototype.transform=function(s){if(this._inputGeom=s,this._factory=s.getFactory(),s instanceof mi)return this.transformPoint(s,null);if(s instanceof Xn)return this.transformMultiPoint(s,null);if(s instanceof Mi)return this.transformLinearRing(s,null);if(s instanceof xn)return this.transformLineString(s,null);if(s instanceof Lt)return this.transformMultiLineString(s,null);if(s instanceof ii)return this.transformPolygon(s,null);if(s instanceof Wi)return this.transformMultiPolygon(s,null);if(s instanceof vt)return this.transformGeometryCollection(s,null);throw new ye("Unknown Geometry subtype: "+s.getClass().getName())},xs.prototype.transformLinearRing=function(s,l){var m=this.transformCoordinates(s.getCoordinateSequence(),s);if(null===m)return this._factory.createLinearRing(null);var v=m.size();return v>0&&v<4&&!this._preserveType?this._factory.createLineString(m):this._factory.createLinearRing(m)},xs.prototype.interfaces_=function(){return[]},xs.prototype.getClass=function(){return xs};var ds=function s(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new Ci,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof xn&&"number"==typeof arguments[1]){var m=arguments[1];s.call(this,arguments[0].getCoordinates(),m)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var v=arguments[0],C=arguments[1];this._srcPts=v,this._isClosed=s.isClosed(v),this._snapTolerance=C}};ds.prototype.snapVertices=function(s,l){for(var m=this._isClosed?s.size()-1:s.size(),v=0;v<m;v++){var C=s.get(v),k=this.findSnapForVertex(C,l);null!==k&&(s.set(v,new se(k)),0===v&&this._isClosed&&s.set(s.size()-1,new se(k)))}},ds.prototype.findSnapForVertex=function(s,l){for(var m=0;m<l.length;m++){if(s.equals2D(l[m]))return null;if(s.distance(l[m])<this._snapTolerance)return l[m]}return null},ds.prototype.snapTo=function(s){var l=new Lr(this._srcPts);return this.snapVertices(l,s),this.snapSegments(l,s),l.toCoordinateArray()},ds.prototype.snapSegments=function(s,l){if(0===l.length)return null;var m=l.length;l[0].equals2D(l[l.length-1])&&(m=l.length-1);for(var v=0;v<m;v++){var C=l[v],k=this.findSegmentIndexToSnap(C,s);k>=0&&s.add(k+1,new se(C),!1)}},ds.prototype.findSegmentIndexToSnap=function(s,l){for(var m=ce.MAX_VALUE,v=-1,C=0;C<l.size()-1;C++){if(this._seg.p0=l.get(C),this._seg.p1=l.get(C+1),this._seg.p0.equals2D(s)||this._seg.p1.equals2D(s)){if(this._allowSnappingToSourceVertices)continue;return-1}var k=this._seg.distance(s);k<this._snapTolerance&&k<m&&(m=k,v=C)}return v},ds.prototype.setAllowSnappingToSourceVertices=function(s){this._allowSnappingToSourceVertices=s},ds.prototype.interfaces_=function(){return[]},ds.prototype.getClass=function(){return ds},ds.isClosed=function(s){return!(s.length<=1)&&s[0].equals2D(s[s.length-1])};var ro=function(s){this._srcGeom=s||null},wd={SNAP_PRECISION_FACTOR:{configurable:!0}};ro.prototype.snapTo=function(s,l){var m=this.extractTargetCoordinates(s);return new vc(l,m).transform(this._srcGeom)},ro.prototype.snapToSelf=function(s,l){var m=this.extractTargetCoordinates(this._srcGeom),v=new vc(s,m,!0).transform(this._srcGeom),C=v;return l&&dt(C,lr)&&(C=v.buffer(0)),C},ro.prototype.computeSnapTolerance=function(s){return this.computeMinimumSegmentLength(s)/10},ro.prototype.extractTargetCoordinates=function(s){for(var l=new at,m=s.getCoordinates(),v=0;v<m.length;v++)l.add(m[v]);return l.toArray(new Array(0).fill(null))},ro.prototype.computeMinimumSegmentLength=function(s){for(var l=ce.MAX_VALUE,m=0;m<s.length-1;m++){var v=s[m].distance(s[m+1]);v<l&&(l=v)}return l},ro.prototype.interfaces_=function(){return[]},ro.prototype.getClass=function(){return ro},ro.snap=function(s,l,m){var v=new Array(2).fill(null),C=new ro(s);v[0]=C.snapTo(l,m);var k=new ro(l);return v[1]=k.snapTo(v[0],m),v},ro.computeOverlaySnapTolerance=function(){if(1===arguments.length){var s=arguments[0],l=ro.computeSizeBasedSnapTolerance(s),m=s.getPrecisionModel();if(m.getType()===ci.FIXED){var v=1/m.getScale()*2/1.415;v>l&&(l=v)}return l}if(2===arguments.length){var k=arguments[1];return Math.min(ro.computeOverlaySnapTolerance(arguments[0]),ro.computeOverlaySnapTolerance(k))}},ro.computeSizeBasedSnapTolerance=function(s){var l=s.getEnvelopeInternal();return Math.min(l.getHeight(),l.getWidth())*ro.SNAP_PRECISION_FACTOR},ro.snapToSelf=function(s,l,m){return new ro(s).snapToSelf(l,m)},wd.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(ro,wd);var vc=function(s){function l(m,v,C){s.call(this),this._snapTolerance=m||null,this._snapPts=v||null,this._isSelfSnap=void 0!==C&&C}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.snapLine=function(m,v){var C=new ds(m,this._snapTolerance);return C.setAllowSnappingToSourceVertices(this._isSelfSnap),C.snapTo(v)},l.prototype.transformCoordinates=function(m,v){var C=m.toCoordinateArray(),k=this.snapLine(C,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(k)},l.prototype.interfaces_=function(){return[]},l.prototype.getClass=function(){return l},l}(xs),Ks=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Ks.prototype.getCommon=function(){return ce.longBitsToDouble(this._commonBits)},Ks.prototype.add=function(s){var l=ce.doubleToLongBits(s);return this._isFirst?(this._commonBits=l,this._commonSignExp=Ks.signExpBits(this._commonBits),this._isFirst=!1,null):Ks.signExpBits(l)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Ks.numCommonMostSigMantissaBits(this._commonBits,l),void(this._commonBits=Ks.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Ks.prototype.toString=function(){if(1===arguments.length){var s=arguments[0],l=ce.longBitsToDouble(s),m="0000000000000000000000000000000000000000000000000000000000000000"+ce.toBinaryString(s),v=m.substring(m.length-64);return v.substring(0,1)+"  "+v.substring(1,12)+"(exp) "+v.substring(12)+" [ "+l+" ]"}},Ks.prototype.interfaces_=function(){return[]},Ks.prototype.getClass=function(){return Ks},Ks.getBit=function(s,l){return 0!=(s&1<<l)?1:0},Ks.signExpBits=function(s){return s>>52},Ks.zeroLowerBits=function(s,l){return s&~((1<<l)-1)},Ks.numCommonMostSigMantissaBits=function(s,l){for(var m=0,v=52;v>=0;v--){if(Ks.getBit(s,v)!==Ks.getBit(l,v))return m;m++}return 52};var Sa=function(){this._commonCoord=null,this._ccFilter=new Js},uu={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};Sa.prototype.addCommonBits=function(s){var l=new Gr(this._commonCoord);s.apply(l),s.geometryChanged()},Sa.prototype.removeCommonBits=function(s){if(0===this._commonCoord.x&&0===this._commonCoord.y)return s;var l=new se(this._commonCoord);l.x=-l.x,l.y=-l.y;var m=new Gr(l);return s.apply(m),s.geometryChanged(),s},Sa.prototype.getCommonCoordinate=function(){return this._commonCoord},Sa.prototype.add=function(s){s.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},Sa.prototype.interfaces_=function(){return[]},Sa.prototype.getClass=function(){return Sa},uu.CommonCoordinateFilter.get=function(){return Js},uu.Translater.get=function(){return Gr},Object.defineProperties(Sa,uu);var Js=function(){this._commonBitsX=new Ks,this._commonBitsY=new Ks};Js.prototype.filter=function(s){this._commonBitsX.add(s.x),this._commonBitsY.add(s.y)},Js.prototype.getCommonCoordinate=function(){return new se(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},Js.prototype.interfaces_=function(){return[Ti]},Js.prototype.getClass=function(){return Js};var Gr=function(){this.trans=null,this.trans=arguments[0]};Gr.prototype.filter=function(s,l){var m=s.getOrdinate(l,0)+this.trans.x,v=s.getOrdinate(l,1)+this.trans.y;s.setOrdinate(l,0,m),s.setOrdinate(l,1,v)},Gr.prototype.isDone=function(){return!1},Gr.prototype.isGeometryChanged=function(){return!0},Gr.prototype.interfaces_=function(){return[Dt]},Gr.prototype.getClass=function(){return Gr};var hs=function(s,l){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=s,this._geom[1]=l,this.computeSnapTolerance()};hs.prototype.selfSnap=function(s){return new ro(s).snapTo(s,this._snapTolerance)},hs.prototype.removeCommonBits=function(s){this._cbr=new Sa,this._cbr.add(s[0]),this._cbr.add(s[1]);var l=new Array(2).fill(null);return l[0]=this._cbr.removeCommonBits(s[0].copy()),l[1]=this._cbr.removeCommonBits(s[1].copy()),l},hs.prototype.prepareResult=function(s){return this._cbr.addCommonBits(s),s},hs.prototype.getResultGeometry=function(s){var l=this.snap(this._geom),m=T.overlayOp(l[0],l[1],s);return this.prepareResult(m)},hs.prototype.checkValid=function(s){s.isValid()||si.out.println("Snapped geometry is invalid")},hs.prototype.computeSnapTolerance=function(){this._snapTolerance=ro.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},hs.prototype.snap=function(s){var l=this.removeCommonBits(s);return ro.snap(l[0],l[1],this._snapTolerance)},hs.prototype.interfaces_=function(){return[]},hs.prototype.getClass=function(){return hs},hs.overlayOp=function(s,l,m){return new hs(s,l).getResultGeometry(m)},hs.union=function(s,l){return hs.overlayOp(s,l,T.UNION)},hs.intersection=function(s,l){return hs.overlayOp(s,l,T.INTERSECTION)},hs.symDifference=function(s,l){return hs.overlayOp(s,l,T.SYMDIFFERENCE)},hs.difference=function(s,l){return hs.overlayOp(s,l,T.DIFFERENCE)};var Ls=function(s,l){this._geom=new Array(2).fill(null),this._geom[0]=s,this._geom[1]=l};Ls.prototype.getResultGeometry=function(s){var l=null,m=!1,v=null;try{l=T.overlayOp(this._geom[0],this._geom[1],s),m=!0}catch(C){if(!(C instanceof je))throw C;v=C}if(!m)try{l=hs.overlayOp(this._geom[0],this._geom[1],s)}catch(C){throw C instanceof je?v:C}return l},Ls.prototype.interfaces_=function(){return[]},Ls.prototype.getClass=function(){return Ls},Ls.overlayOp=function(s,l,m){return new Ls(s,l).getResultGeometry(m)},Ls.union=function(s,l){return Ls.overlayOp(s,l,T.UNION)},Ls.intersection=function(s,l){return Ls.overlayOp(s,l,T.INTERSECTION)},Ls.symDifference=function(s,l){return Ls.overlayOp(s,l,T.SYMDIFFERENCE)},Ls.difference=function(s,l){return Ls.overlayOp(s,l,T.DIFFERENCE)};var Tc=function(){this.mce=null,this.chainIndex=null;var l=arguments[1];this.mce=arguments[0],this.chainIndex=l};Tc.prototype.computeIntersections=function(s,l){this.mce.computeIntersectsForChain(this.chainIndex,s.mce,s.chainIndex,l)},Tc.prototype.interfaces_=function(){return[]},Tc.prototype.getClass=function(){return Tc};var Da=function s(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var l=arguments[0],m=arguments[1];this._eventType=s.DELETE,this._xValue=l,this._insertEvent=m}else if(3===arguments.length){var v=arguments[0],C=arguments[1],k=arguments[2];this._eventType=s.INSERT,this._label=v,this._xValue=C,this._obj=k}},Ac={INSERT:{configurable:!0},DELETE:{configurable:!0}};Da.prototype.isDelete=function(){return this._eventType===Da.DELETE},Da.prototype.setDeleteEventIndex=function(s){this._deleteEventIndex=s},Da.prototype.getObject=function(){return this._obj},Da.prototype.compareTo=function(s){return this._xValue<s._xValue?-1:this._xValue>s._xValue?1:this._eventType<s._eventType?-1:this._eventType>s._eventType?1:0},Da.prototype.getInsertEvent=function(){return this._insertEvent},Da.prototype.isInsert=function(){return this._eventType===Da.INSERT},Da.prototype.isSameLabel=function(s){return null!==this._label&&this._label===s._label},Da.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},Da.prototype.interfaces_=function(){return[ve]},Da.prototype.getClass=function(){return Da},Ac.INSERT.get=function(){return 1},Ac.DELETE.get=function(){return 2},Object.defineProperties(Da,Ac);var du=function(){};du.prototype.interfaces_=function(){return[]},du.prototype.getClass=function(){return du};var lo=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var l=arguments[1],m=arguments[2];this._li=arguments[0],this._includeProper=l,this._recordIsolated=m};lo.prototype.isTrivialIntersection=function(s,l,m,v){if(s===m&&1===this._li.getIntersectionNum()){if(lo.isAdjacentSegments(l,v))return!0;if(s.isClosed()){var C=s.getNumPoints()-1;if(0===l&&v===C||0===v&&l===C)return!0}}return!1},lo.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},lo.prototype.setIsDoneIfProperInt=function(s){this._isDoneWhenProperInt=s},lo.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},lo.prototype.isBoundaryPointInternal=function(s,l){for(var m=l.iterator();m.hasNext();){var v=m.next().getCoordinate();if(s.isIntersection(v))return!0}return!1},lo.prototype.hasProperIntersection=function(){return this._hasProper},lo.prototype.hasIntersection=function(){return this._hasIntersection},lo.prototype.isDone=function(){return this._isDone},lo.prototype.isBoundaryPoint=function(s,l){return!(null===l||!this.isBoundaryPointInternal(s,l[0])&&!this.isBoundaryPointInternal(s,l[1]))},lo.prototype.setBoundaryNodes=function(s,l){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=s,this._bdyNodes[1]=l},lo.prototype.addIntersections=function(s,l,m,v){if(s===m&&l===v)return null;this.numTests++;var C=s.getCoordinates()[l],k=s.getCoordinates()[l+1],G=m.getCoordinates()[v],J=m.getCoordinates()[v+1];this._li.computeIntersection(C,k,G,J),this._li.hasIntersection()&&(this._recordIsolated&&(s.setIsolated(!1),m.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(s,l,m,v)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(s.addIntersections(this._li,l,0),m.addIntersections(this._li,v,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},lo.prototype.interfaces_=function(){return[]},lo.prototype.getClass=function(){return lo},lo.isAdjacentSegments=function(s,l){return 1===Math.abs(s-l)};var hu=function(s){function l(){s.call(this),this.events=new dn,this.nOverlaps=null}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.prepareEvents=function(){Cl.sort(this.events);for(var m=0;m<this.events.size();m++){var v=this.events.get(m);v.isDelete()&&v.getInsertEvent().setDeleteEventIndex(m)}},l.prototype.computeIntersections=function(){if(1===arguments.length){var m=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var v=0;v<this.events.size();v++){var C=this.events.get(v);if(C.isInsert()&&this.processOverlaps(v,C.getDeleteEventIndex(),C,m),m.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof lo&&dt(arguments[0],nr)&&dt(arguments[1],nr)){var k=arguments[0],G=arguments[1],J=arguments[2];this.addEdges(k,k),this.addEdges(G,G),this.computeIntersections(J)}else if("boolean"==typeof arguments[2]&&dt(arguments[0],nr)&&arguments[1]instanceof lo){var fe=arguments[0],pe=arguments[1];arguments[2]?this.addEdges(fe,null):this.addEdges(fe),this.computeIntersections(pe)}},l.prototype.addEdge=function(m,v){for(var C=m.getMonotoneChainEdge(),k=C.getStartIndexes(),G=0;G<k.length-1;G++){var J=new Tc(C,G),fe=new Da(v,C.getMinX(G),J);this.events.add(fe),this.events.add(new Da(C.getMaxX(G),fe))}},l.prototype.processOverlaps=function(m,v,C,k){for(var G=C.getObject(),J=m;J<v;J++){var fe=this.events.get(J);if(fe.isInsert()){var pe=fe.getObject();C.isSameLabel(fe)||(G.computeIntersections(pe,k),this.nOverlaps++)}}},l.prototype.addEdges=function(){if(1===arguments.length)for(var m=arguments[0].iterator();m.hasNext();){var v=m.next();this.addEdge(v,v)}else if(2===arguments.length)for(var k=arguments[1],G=arguments[0].iterator();G.hasNext();){var J=G.next();this.addEdge(J,k)}},l.prototype.interfaces_=function(){return[]},l.prototype.getClass=function(){return l},l}(du),Jn=function(){this._min=ce.POSITIVE_INFINITY,this._max=ce.NEGATIVE_INFINITY},Ui={NodeComparator:{configurable:!0}};Jn.prototype.getMin=function(){return this._min},Jn.prototype.intersects=function(s,l){return!(this._min>l||this._max<s)},Jn.prototype.getMax=function(){return this._max},Jn.prototype.toString=function(){return It.toLineString(new se(this._min,0),new se(this._max,0))},Jn.prototype.interfaces_=function(){return[]},Jn.prototype.getClass=function(){return Jn},Ui.NodeComparator.get=function(){return oc},Object.defineProperties(Jn,Ui);var oc=function(){};oc.prototype.compare=function(s,l){var C=(s._min+s._max)/2,k=(l._min+l._max)/2;return C<k?-1:C>k?1:0},oc.prototype.interfaces_=function(){return[Fe]},oc.prototype.getClass=function(){return oc};var Pl=function(s){function l(){s.call(this),this._item=null;var v=arguments[1],C=arguments[2];this._min=arguments[0],this._max=v,this._item=C}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.query=function(m,v,C){if(!this.intersects(m,v))return null;C.visitItem(this._item)},l.prototype.interfaces_=function(){return[]},l.prototype.getClass=function(){return l},l}(Jn),Yc=function(s){function l(){s.call(this),this._node1=null,this._node2=null;var v=arguments[1];this._node1=arguments[0],this._node2=v,this.buildExtent(this._node1,this._node2)}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.buildExtent=function(m,v){this._min=Math.min(m._min,v._min),this._max=Math.max(m._max,v._max)},l.prototype.query=function(m,v,C){if(!this.intersects(m,v))return null;null!==this._node1&&this._node1.query(m,v,C),null!==this._node2&&this._node2.query(m,v,C)},l.prototype.interfaces_=function(){return[]},l.prototype.getClass=function(){return l},l}(Jn),yo=function(){this._leaves=new dn,this._root=null,this._level=0};yo.prototype.buildTree=function(){Cl.sort(this._leaves,new Jn.NodeComparator);for(var s=this._leaves,l=null,m=new dn;;){if(this.buildLevel(s,m),1===m.size())return m.get(0);l=s,s=m,m=l}},yo.prototype.insert=function(s,l,m){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new Pl(s,l,m))},yo.prototype.query=function(s,l,m){this.init(),this._root.query(s,l,m)},yo.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},yo.prototype.printNode=function(s){si.out.println(It.toLineString(new se(s._min,this._level),new se(s._max,this._level)))},yo.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},yo.prototype.buildLevel=function(s,l){this._level++,l.clear();for(var m=0;m<s.size();m+=2){var v=s.get(m);if(null===(m+1<s.size()?s.get(m):null))l.add(v);else{var C=new Yc(s.get(m),s.get(m+1));l.add(C)}}},yo.prototype.interfaces_=function(){return[]},yo.prototype.getClass=function(){return yo};var tl=function(){this._items=new dn};tl.prototype.visitItem=function(s){this._items.add(s)},tl.prototype.getItems=function(){return this._items},tl.prototype.interfaces_=function(){return[mc]},tl.prototype.getClass=function(){return tl};var Ma=function(){this._index=null;var s=arguments[0];if(!dt(s,lr))throw new ye("Argument must be Polygonal");this._index=new Eo(s)},Du={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Ma.prototype.locate=function(s){var l=new un(s),m=new nl(l);return this._index.query(s.y,s.y,m),l.getLocation()},Ma.prototype.interfaces_=function(){return[Dc]},Ma.prototype.getClass=function(){return Ma},Du.SegmentVisitor.get=function(){return nl},Du.IntervalIndexedGeometry.get=function(){return Eo},Object.defineProperties(Ma,Du);var nl=function(){this._counter=null,this._counter=arguments[0]};nl.prototype.visitItem=function(s){var l=s;this._counter.countSegment(l.getCoordinate(0),l.getCoordinate(1))},nl.prototype.interfaces_=function(){return[mc]},nl.prototype.getClass=function(){return nl};var Eo=function(){this._index=new yo,this.init(arguments[0])};Eo.prototype.init=function(s){for(var l=vs.getLines(s).iterator();l.hasNext();){var m=l.next().getCoordinates();this.addLine(m)}},Eo.prototype.addLine=function(s){for(var l=1;l<s.length;l++){var m=new Ci(s[l-1],s[l]),v=Math.min(m.p0.y,m.p1.y),C=Math.max(m.p0.y,m.p1.y);this._index.insert(v,C,m)}},Eo.prototype.query=function(){if(2===arguments.length){var s=arguments[0],l=arguments[1],m=new tl;return this._index.query(s,l,m),m.getItems()}3===arguments.length&&this._index.query(arguments[0],arguments[1],arguments[2])},Eo.prototype.interfaces_=function(){return[]},Eo.prototype.getClass=function(){return Eo};var ls=function(s){function l(){if(s.call(this),this._parentGeom=null,this._lineEdgeMap=new hc,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Va,2===arguments.length){var v=arguments[1],C=Bi.OGC_SFS_BOUNDARY_RULE;this._argIndex=arguments[0],this._parentGeom=v,this._boundaryNodeRule=C,null!==v&&this.add(v)}else if(3===arguments.length){var G=arguments[1],J=arguments[2];this._argIndex=arguments[0],this._parentGeom=G,this._boundaryNodeRule=J,null!==G&&this.add(G)}}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.insertBoundaryPoint=function(m,v){var C=this._nodes.addNode(v).getLabel(),k=1;C.getLocation(m,ft.ON)===de.BOUNDARY&&k++;var G=l.determineBoundary(this._boundaryNodeRule,k);C.setLocation(m,G)},l.prototype.computeSelfNodes=function(){if(2===arguments.length)return this.computeSelfNodes(arguments[0],arguments[1],!1);if(3===arguments.length){var k=arguments[1],G=arguments[2],J=new lo(arguments[0],!0,!1);return J.setIsDoneIfProperInt(G),this.createEdgeSetIntersector().computeIntersections(this._edges,J,k||!(this._parentGeom instanceof Mi||this._parentGeom instanceof ii||this._parentGeom instanceof Wi)),this.addSelfIntersectionNodes(this._argIndex),J}},l.prototype.computeSplitEdges=function(m){for(var v=this._edges.iterator();v.hasNext();)v.next().eiList.addSplitEdges(m)},l.prototype.computeEdgeIntersections=function(m,v,C){var k=new lo(v,C,!0);return k.setBoundaryNodes(this.getBoundaryNodes(),m.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,m._edges,k),k},l.prototype.getGeometry=function(){return this._parentGeom},l.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},l.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},l.prototype.addPoint=function(){if(arguments[0]instanceof mi){var m=arguments[0].getCoordinate();this.insertPoint(this._argIndex,m,de.INTERIOR)}else arguments[0]instanceof se&&this.insertPoint(this._argIndex,arguments[0],de.INTERIOR)},l.prototype.addPolygon=function(m){this.addPolygonRing(m.getExteriorRing(),de.EXTERIOR,de.INTERIOR);for(var v=0;v<m.getNumInteriorRing();v++){var C=m.getInteriorRingN(v);this.addPolygonRing(C,de.INTERIOR,de.EXTERIOR)}},l.prototype.addEdge=function(m){this.insertEdge(m);var v=m.getCoordinates();this.insertPoint(this._argIndex,v[0],de.BOUNDARY),this.insertPoint(this._argIndex,v[v.length-1],de.BOUNDARY)},l.prototype.addLineString=function(m){var v=fi.removeRepeatedPoints(m.getCoordinates());if(v.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=v[0],null;var C=new nc(v,new tr(this._argIndex,de.INTERIOR));this._lineEdgeMap.put(m,C),this.insertEdge(C),ke.isTrue(v.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,v[0]),this.insertBoundaryPoint(this._argIndex,v[v.length-1])},l.prototype.getInvalidPoint=function(){return this._invalidPoint},l.prototype.getBoundaryPoints=function(){for(var m=this.getBoundaryNodes(),v=new Array(m.size()).fill(null),C=0,k=m.iterator();k.hasNext();){var G=k.next();v[C++]=G.getCoordinate().copy()}return v},l.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},l.prototype.addSelfIntersectionNode=function(m,v,C){if(this.isBoundaryNode(m,v))return null;C===de.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(m,v):this.insertPoint(m,v,C)},l.prototype.addPolygonRing=function(m,v,C){if(m.isEmpty())return null;var k=fi.removeRepeatedPoints(m.getCoordinates());if(k.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=k[0],null;var G=v,J=C;mt.isCCW(k)&&(G=C,J=v);var fe=new nc(k,new tr(this._argIndex,de.BOUNDARY,G,J));this._lineEdgeMap.put(m,fe),this.insertEdge(fe),this.insertPoint(this._argIndex,k[0],de.BOUNDARY)},l.prototype.insertPoint=function(m,v,C){var k=this._nodes.addNode(v),G=k.getLabel();null===G?k._label=new tr(m,C):G.setLocation(m,C)},l.prototype.createEdgeSetIntersector=function(){return new hu},l.prototype.addSelfIntersectionNodes=function(m){for(var v=this._edges.iterator();v.hasNext();)for(var C=v.next(),k=C.getLabel().getLocation(m),G=C.eiList.iterator();G.hasNext();){var J=G.next();this.addSelfIntersectionNode(m,J.coord,k)}},l.prototype.add=function(){if(1!==arguments.length)return s.prototype.add.apply(this,arguments);var m=arguments[0];if(m.isEmpty())return null;if(m instanceof Wi&&(this._useBoundaryDeterminationRule=!1),m instanceof ii)this.addPolygon(m);else if(m instanceof xn)this.addLineString(m);else if(m instanceof mi)this.addPoint(m);else if(m instanceof Xn)this.addCollection(m);else if(m instanceof Lt)this.addCollection(m);else if(m instanceof Wi)this.addCollection(m);else{if(!(m instanceof vt))throw new Error(m.getClass().getName());this.addCollection(m)}},l.prototype.addCollection=function(m){for(var v=0;v<m.getNumGeometries();v++){var C=m.getGeometryN(v);this.add(C)}},l.prototype.locate=function(m){return dt(this._parentGeom,lr)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new Ma(this._parentGeom)),this._areaPtLocator.locate(m)):this._ptLocator.locate(m,this._parentGeom)},l.prototype.findEdge=function(){return 1===arguments.length?this._lineEdgeMap.get(arguments[0]):s.prototype.findEdge.apply(this,arguments)},l.prototype.interfaces_=function(){return[]},l.prototype.getClass=function(){return l},l.determineBoundary=function(m,v){return m.isInBoundary(v)?de.BOUNDARY:de.INTERIOR},l}(os),Zc=function(){if(this._li=new Yt,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var s=arguments[0];this.setComputationPrecision(s.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new ls(0,s)}else if(2===arguments.length){var l=arguments[0],m=arguments[1],v=Bi.OGC_SFS_BOUNDARY_RULE;l.getPrecisionModel().compareTo(m.getPrecisionModel())>=0?this.setComputationPrecision(l.getPrecisionModel()):this.setComputationPrecision(m.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new ls(0,l,v),this._arg[1]=new ls(1,m,v)}else if(3===arguments.length){var C=arguments[0],k=arguments[1],G=arguments[2];C.getPrecisionModel().compareTo(k.getPrecisionModel())>=0?this.setComputationPrecision(C.getPrecisionModel()):this.setComputationPrecision(k.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new ls(0,C,G),this._arg[1]=new ls(1,k,G)}};Zc.prototype.getArgGeometry=function(s){return this._arg[s].getGeometry()},Zc.prototype.setComputationPrecision=function(s){this._resultPrecisionModel=s,this._li.setPrecisionModel(this._resultPrecisionModel)},Zc.prototype.interfaces_=function(){return[]},Zc.prototype.getClass=function(){return Zc};var gl=function(){};gl.prototype.interfaces_=function(){return[]},gl.prototype.getClass=function(){return gl},gl.map=function(){if(arguments[0]instanceof sn&&dt(arguments[1],gl.MapOp)){for(var s=arguments[0],l=arguments[1],m=new dn,v=0;v<s.getNumGeometries();v++){var C=l.map(s.getGeometryN(v));null!==C&&m.add(C)}return s.getFactory().buildGeometry(m)}if(dt(arguments[0],Mr)&&dt(arguments[1],gl.MapOp)){for(var k=arguments[0],G=arguments[1],J=new dn,fe=k.iterator();fe.hasNext();){var pe=fe.next(),ot=G.map(pe);null!==ot&&J.add(ot)}return J}},gl.MapOp=function(){};var T=function(s){function l(){var m=arguments[0];s.call(this,m,arguments[1]),this._ptLocator=new Va,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new _n,this._resultPolyList=new dn,this._resultLineList=new dn,this._resultPointList=new dn,this._graph=new os(new go),this._geomFact=m.getFactory()}return s&&(l.__proto__=s),(l.prototype=Object.create(s&&s.prototype)).constructor=l,l.prototype.insertUniqueEdge=function(m){var v=this._edgeList.findEqualEdge(m);if(null!==v){var C=v.getLabel(),k=m.getLabel();v.isPointwiseEqual(m)||(k=new tr(m.getLabel())).flip();var G=v.getDepth();G.isNull()&&G.add(C),G.add(k),C.merge(k)}else this._edgeList.add(m)},l.prototype.getGraph=function(){return this._graph},l.prototype.cancelDuplicateResultEdges=function(){for(var m=this._graph.getEdgeEnds().iterator();m.hasNext();){var v=m.next(),C=v.getSym();v.isInResult()&&C.isInResult()&&(v.setInResult(!1),C.setInResult(!1))}},l.prototype.isCoveredByLA=function(m){return!!this.isCovered(m,this._resultLineList)||!!this.isCovered(m,this._resultPolyList)},l.prototype.computeGeometry=function(m,v,C,k){var G=new dn;return G.addAll(m),G.addAll(v),G.addAll(C),G.isEmpty()?l.createEmptyResult(k,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(G)},l.prototype.mergeSymLabels=function(){for(var m=this._graph.getNodes().iterator();m.hasNext();)m.next().getEdges().mergeSymLabels()},l.prototype.isCovered=function(m,v){for(var C=v.iterator();C.hasNext();){var k=C.next();if(this._ptLocator.locate(m,k)!==de.EXTERIOR)return!0}return!1},l.prototype.replaceCollapsedEdges=function(){for(var m=new dn,v=this._edgeList.iterator();v.hasNext();){var C=v.next();C.isCollapsed()&&(v.remove(),m.add(C.getCollapsedEdge()))}this._edgeList.addAll(m)},l.prototype.updateNodeLabelling=function(){for(var m=this._graph.getNodes().iterator();m.hasNext();){var v=m.next(),C=v.getEdges().getLabel();v.getLabel().merge(C)}},l.prototype.getResultGeometry=function(m){return this.computeOverlay(m),this._resultGeom},l.prototype.insertUniqueEdges=function(m){for(var v=m.iterator();v.hasNext();){var C=v.next();this.insertUniqueEdge(C)}},l.prototype.computeOverlay=function(m){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var v=new dn;this._arg[0].computeSplitEdges(v),this._arg[1].computeSplitEdges(v),this.insertUniqueEdges(v),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),pl.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(m),this.cancelDuplicateResultEdges();var C=new Ws(this._geomFact);C.add(this._graph),this._resultPolyList=C.getPolygons();var k=new ml(this,this._geomFact,this._ptLocator);this._resultLineList=k.build(m);var G=new qc(this,this._geomFact,this._ptLocator);this._resultPointList=G.build(m),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,m)},l.prototype.labelIncompleteNode=function(m,v){var C=this._ptLocator.locate(m.getCoordinate(),this._arg[v].getGeometry());m.getLabel().setLocation(v,C)},l.prototype.copyPoints=function(m){for(var v=this._arg[m].getNodeIterator();v.hasNext();){var C=v.next();this._graph.addNode(C.getCoordinate()).setLabel(m,C.getLabel().getLocation(m))}},l.prototype.findResultAreaEdges=function(m){for(var v=this._graph.getEdgeEnds().iterator();v.hasNext();){var C=v.next(),k=C.getLabel();k.isArea()&&!C.isInteriorAreaEdge()&&l.isResultOfOp(k.getLocation(0,ft.RIGHT),k.getLocation(1,ft.RIGHT),m)&&C.setInResult(!0)}},l.prototype.computeLabelsFromDepths=function(){for(var m=this._edgeList.iterator();m.hasNext();){var v=m.next(),C=v.getLabel(),k=v.getDepth();if(!k.isNull()){k.normalize();for(var G=0;G<2;G++)C.isNull(G)||!C.isArea()||k.isNull(G)||(0===k.getDelta(G)?C.toLine(G):(ke.isTrue(!k.isNull(G,ft.LEFT),"depth of LEFT side has not been initialized"),C.setLocation(G,ft.LEFT,k.getLocation(G,ft.LEFT)),ke.isTrue(!k.isNull(G,ft.RIGHT),"depth of RIGHT side has not been initialized"),C.setLocation(G,ft.RIGHT,k.getLocation(G,ft.RIGHT))))}}},l.prototype.computeLabelling=function(){for(var m=this._graph.getNodes().iterator();m.hasNext();)m.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},l.prototype.labelIncompleteNodes=function(){for(var m=this._graph.getNodes().iterator();m.hasNext();){var v=m.next(),C=v.getLabel();v.isIsolated()&&(C.isNull(0)?this.labelIncompleteNode(v,0):this.labelIncompleteNode(v,1)),v.getEdges().updateLabelling(C)}},l.prototype.isCoveredByA=function(m){return!!this.isCovered(m,this._resultPolyList)},l.prototype.interfaces_=function(){return[]},l.prototype.getClass=function(){return l},l}(Zc);T.overlayOp=function(s,l,m){return new T(s,l).getResultGeometry(m)},T.intersection=function(s,l){if(s.isEmpty()||l.isEmpty())return T.createEmptyResult(T.INTERSECTION,s,l,s.getFactory());if(s.isGeometryCollection()){var m=l;return Al.map(s,{interfaces_:function(){return[gl.MapOp]},map:function(v){return v.intersection(m)}})}return s.checkNotGeometryCollection(s),s.checkNotGeometryCollection(l),Ls.overlayOp(s,l,T.INTERSECTION)},T.symDifference=function(s,l){if(s.isEmpty()||l.isEmpty()){if(s.isEmpty()&&l.isEmpty())return T.createEmptyResult(T.SYMDIFFERENCE,s,l,s.getFactory());if(s.isEmpty())return l.copy();if(l.isEmpty())return s.copy()}return s.checkNotGeometryCollection(s),s.checkNotGeometryCollection(l),Ls.overlayOp(s,l,T.SYMDIFFERENCE)},T.resultDimension=function(s,l,m){var v=l.getDimension(),C=m.getDimension(),k=-1;switch(s){case T.INTERSECTION:k=Math.min(v,C);break;case T.UNION:k=Math.max(v,C);break;case T.DIFFERENCE:k=v;break;case T.SYMDIFFERENCE:k=Math.max(v,C)}return k},T.createEmptyResult=function(s,l,m,v){var C=null;switch(T.resultDimension(s,l,m)){case-1:C=v.createGeometryCollection(new Array(0).fill(null));break;case 0:C=v.createPoint();break;case 1:C=v.createLineString();break;case 2:C=v.createPolygon()}return C},T.difference=function(s,l){return s.isEmpty()?T.createEmptyResult(T.DIFFERENCE,s,l,s.getFactory()):l.isEmpty()?s.copy():(s.checkNotGeometryCollection(s),s.checkNotGeometryCollection(l),Ls.overlayOp(s,l,T.DIFFERENCE))},T.isResultOfOp=function(){if(2===arguments.length){var s=arguments[0],l=arguments[1],m=s.getLocation(0),v=s.getLocation(1);return T.isResultOfOp(m,v,l)}if(3===arguments.length){var C=arguments[0],k=arguments[1];switch(C===de.BOUNDARY&&(C=de.INTERIOR),k===de.BOUNDARY&&(k=de.INTERIOR),arguments[2]){case T.INTERSECTION:return C===de.INTERIOR&&k===de.INTERIOR;case T.UNION:return C===de.INTERIOR||k===de.INTERIOR;case T.DIFFERENCE:return C===de.INTERIOR&&k!==de.INTERIOR;case T.SYMDIFFERENCE:return C===de.INTERIOR&&k!==de.INTERIOR||C!==de.INTERIOR&&k===de.INTERIOR}return!1}},T.INTERSECTION=1,T.UNION=2,T.DIFFERENCE=3,T.SYMDIFFERENCE=4;var u=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Va,this._seg=new Ci;var s=arguments[0],l=arguments[1];this._g=s,this._boundaryDistanceTolerance=l,this._linework=this.extractLinework(s)};u.prototype.isWithinToleranceOfBoundary=function(s){for(var l=0;l<this._linework.getNumGeometries();l++)for(var m=this._linework.getGeometryN(l).getCoordinateSequence(),v=0;v<m.size()-1;v++)if(m.getCoordinate(v,this._seg.p0),m.getCoordinate(v+1,this._seg.p1),this._seg.distance(s)<=this._boundaryDistanceTolerance)return!0;return!1},u.prototype.getLocation=function(s){return this.isWithinToleranceOfBoundary(s)?de.BOUNDARY:this._ptLocator.locate(s,this._g)},u.prototype.extractLinework=function(s){var l=new y;s.apply(l);var m=l.getLinework(),v=Xi.toLineStringArray(m);return s.getFactory().createMultiLineString(v)},u.prototype.interfaces_=function(){return[]},u.prototype.getClass=function(){return u};var y=function(){this._linework=null,this._linework=new dn};y.prototype.getLinework=function(){return this._linework},y.prototype.filter=function(s){if(s instanceof ii){var l=s;this._linework.add(l.getExteriorRing());for(var m=0;m<l.getNumInteriorRing();m++)this._linework.add(l.getInteriorRingN(m))}},y.prototype.interfaces_=function(){return[Ot]},y.prototype.getClass=function(){return y};var D=function(){this._g=null,this._doLeft=!0,this._doRight=!0,this._g=arguments[0]};D.prototype.extractPoints=function(s,l,m){for(var v=s.getCoordinates(),C=0;C<v.length-1;C++)this.computeOffsetPoints(v[C],v[C+1],l,m)},D.prototype.setSidesToGenerate=function(s,l){this._doLeft=s,this._doRight=l},D.prototype.getPoints=function(s){for(var l=new dn,m=vs.getLines(this._g).iterator();m.hasNext();){var v=m.next();this.extractPoints(v,s,l)}return l},D.prototype.computeOffsetPoints=function(s,l,m,v){var C=l.x-s.x,k=l.y-s.y,G=Math.sqrt(C*C+k*k),J=m*C/G,fe=m*k/G,pe=(l.x+s.x)/2,ot=(l.y+s.y)/2;if(this._doLeft){var nt=new se(pe-fe,ot+J);v.add(nt)}if(this._doRight){var wt=new se(pe+fe,ot-J);v.add(wt)}},D.prototype.interfaces_=function(){return[]},D.prototype.getClass=function(){return D};var A=function s(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=s.TOLERANCE,this._testCoords=new dn;var l=arguments[0],m=arguments[1],v=arguments[2];this._boundaryDistanceTolerance=s.computeBoundaryDistanceTolerance(l,m),this._geom=[l,m,v],this._locFinder=[new u(this._geom[0],this._boundaryDistanceTolerance),new u(this._geom[1],this._boundaryDistanceTolerance),new u(this._geom[2],this._boundaryDistanceTolerance)]},F={TOLERANCE:{configurable:!0}};A.prototype.reportResult=function(s,l,m){si.out.println("Overlay result invalid - A:"+de.toLocationSymbol(l[0])+" B:"+de.toLocationSymbol(l[1])+" expected:"+(m?"i":"e")+" actual:"+de.toLocationSymbol(l[2]))},A.prototype.isValid=function(s){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(s)},A.prototype.checkValid=function(){if(1===arguments.length){for(var s=arguments[0],l=0;l<this._testCoords.size();l++){var m=this._testCoords.get(l);if(!this.checkValid(s,m))return this._invalidLocation=m,!1}return!0}if(2===arguments.length){var v=arguments[0],C=arguments[1];return this._location[0]=this._locFinder[0].getLocation(C),this._location[1]=this._locFinder[1].getLocation(C),this._location[2]=this._locFinder[2].getLocation(C),!!A.hasLocation(this._location,de.BOUNDARY)||this.isValidResult(v,this._location)}},A.prototype.addTestPts=function(s){var l=new D(s);this._testCoords.addAll(l.getPoints(5*this._boundaryDistanceTolerance))},A.prototype.isValidResult=function(s,l){var m=T.isResultOfOp(l[0],l[1],s),v=!(m^l[2]===de.INTERIOR);return v||this.reportResult(s,l,m),v},A.prototype.getInvalidLocation=function(){return this._invalidLocation},A.prototype.interfaces_=function(){return[]},A.prototype.getClass=function(){return A},A.hasLocation=function(s,l){for(var m=0;m<3;m++)if(s[m]===l)return!0;return!1},A.computeBoundaryDistanceTolerance=function(s,l){return Math.min(ro.computeSizeBasedSnapTolerance(s),ro.computeSizeBasedSnapTolerance(l))},A.isValid=function(s,l,m,v){return new A(s,l,v).isValid(m)},F.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(A,F);var $=function s(l){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=s.extractFactory(l),this._inputGeoms=l};$.prototype.extractElements=function(s,l){if(null===s)return null;for(var m=0;m<s.getNumGeometries();m++){var v=s.getGeometryN(m);this._skipEmpty&&v.isEmpty()||l.add(v)}},$.prototype.combine=function(){for(var s=new dn,l=this._inputGeoms.iterator();l.hasNext();){var m=l.next();this.extractElements(m,s)}return 0===s.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(s)},$.prototype.interfaces_=function(){return[]},$.prototype.getClass=function(){return $},$.combine=function(){return 1===arguments.length?new $(arguments[0]).combine():2===arguments.length?new $($.createList(arguments[0],arguments[1])).combine():3===arguments.length?new $($.createList(arguments[0],arguments[1],arguments[2])).combine():void 0},$.extractFactory=function(s){return s.isEmpty()?null:s.iterator().next().getFactory()},$.createList=function(){if(2===arguments.length){var s=arguments[0],l=arguments[1],m=new dn;return m.add(s),m.add(l),m}if(3===arguments.length){var v=arguments[0],C=arguments[1],k=arguments[2],G=new dn;return G.add(v),G.add(C),G.add(k),G}};var Z=function(){this._inputPolys=null,this._geomFactory=null,this._inputPolys=arguments[0],null===this._inputPolys&&(this._inputPolys=new dn)},ee={STRTREE_NODE_CAPACITY:{configurable:!0}};Z.prototype.reduceToGeometries=function(s){for(var l=new dn,m=s.iterator();m.hasNext();){var v=m.next(),C=null;dt(v,nr)?C=this.unionTree(v):v instanceof sn&&(C=v),l.add(C)}return l},Z.prototype.extractByEnvelope=function(s,l,m){for(var v=new dn,C=0;C<l.getNumGeometries();C++){var k=l.getGeometryN(C);k.getEnvelopeInternal().intersects(s)?v.add(k):m.add(k)}return this._geomFactory.buildGeometry(v)},Z.prototype.unionOptimized=function(s,l){var m=s.getEnvelopeInternal(),v=l.getEnvelopeInternal();if(!m.intersects(v))return $.combine(s,l);if(s.getNumGeometries()<=1&&l.getNumGeometries()<=1)return this.unionActual(s,l);var C=m.intersection(v);return this.unionUsingEnvelopeIntersection(s,l,C)},Z.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var s=new bd(Z.STRTREE_NODE_CAPACITY),l=this._inputPolys.iterator();l.hasNext();){var m=l.next();s.insert(m.getEnvelopeInternal(),m)}this._inputPolys=null;var v=s.itemsTree();return this.unionTree(v)},Z.prototype.binaryUnion=function(){if(1===arguments.length){var s=arguments[0];return this.binaryUnion(s,0,s.size())}if(3===arguments.length){var l=arguments[0],m=arguments[1],v=arguments[2];if(v-m<=1){var C=Z.getGeometry(l,m);return this.unionSafe(C,null)}if(v-m==2)return this.unionSafe(Z.getGeometry(l,m),Z.getGeometry(l,m+1));var k=Math.trunc((v+m)/2),G=this.binaryUnion(l,m,k),J=this.binaryUnion(l,k,v);return this.unionSafe(G,J)}},Z.prototype.repeatedUnion=function(s){for(var l=null,m=s.iterator();m.hasNext();){var v=m.next();l=null===l?v.copy():l.union(v)}return l},Z.prototype.unionSafe=function(s,l){return null===s&&null===l?null:null===s?l.copy():null===l?s.copy():this.unionOptimized(s,l)},Z.prototype.unionActual=function(s,l){return Z.restrictToPolygons(s.union(l))},Z.prototype.unionTree=function(s){var l=this.reduceToGeometries(s);return this.binaryUnion(l)},Z.prototype.unionUsingEnvelopeIntersection=function(s,l,m){var v=new dn,C=this.extractByEnvelope(m,s,v),k=this.extractByEnvelope(m,l,v),G=this.unionActual(C,k);return v.add(G),$.combine(v)},Z.prototype.bufferUnion=function(){if(1===arguments.length){var s=arguments[0];return s.get(0).getFactory().buildGeometry(s).buffer(0)}if(2===arguments.length){var l=arguments[0],m=arguments[1];return l.getFactory().createGeometryCollection([l,m]).buffer(0)}},Z.prototype.interfaces_=function(){return[]},Z.prototype.getClass=function(){return Z},Z.restrictToPolygons=function(s){if(dt(s,lr))return s;var l=va.getPolygons(s);return 1===l.size()?l.get(0):s.getFactory().createMultiPolygon(Xi.toPolygonArray(l))},Z.getGeometry=function(s,l){return l>=s.size()?null:s.get(l)},Z.union=function(s){return new Z(s).union()},ee.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Z,ee);var ie=function(){};ie.prototype.interfaces_=function(){return[]},ie.prototype.getClass=function(){return ie},ie.union=function(s,l){if(s.isEmpty()||l.isEmpty()){if(s.isEmpty()&&l.isEmpty())return T.createEmptyResult(T.UNION,s,l,s.getFactory());if(s.isEmpty())return l.copy();if(l.isEmpty())return s.copy()}return s.checkNotGeometryCollection(s),s.checkNotGeometryCollection(l),Ls.overlayOp(s,l,T.UNION)},W.GeoJSONReader=ht,W.GeoJSONWriter=Jt,W.OverlayOp=T,W.UnionOp=ie,W.BufferOp=_s,Object.defineProperty(W,"__esModule",{value:!0})}(Pe)},655:(lt,Pe,W)=>{"use strict";function Se(de,Qe,dt,Me){var gt,ut=arguments.length,$e=ut<3?Qe:null===Me?Me=Object.getOwnPropertyDescriptor(Qe,dt):Me;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)$e=Reflect.decorate(de,Qe,dt,Me);else for(var Mt=de.length-1;Mt>=0;Mt--)(gt=de[Mt])&&($e=(ut<3?gt($e):ut>3?gt(Qe,dt,$e):gt(Qe,dt))||$e);return ut>3&&$e&&Object.defineProperty(Qe,dt,$e),$e}function Oe(de,Qe){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(de,Qe)}function Ne(de,Qe,dt,Me){return new(dt||(dt=Promise))(function($e,gt){function Mt(Vt){try{Bt(Me.next(Vt))}catch(rn){gt(rn)}}function tt(Vt){try{Bt(Me.throw(Vt))}catch(rn){gt(rn)}}function Bt(Vt){Vt.done?$e(Vt.value):function ut($e){return $e instanceof dt?$e:new dt(function(gt){gt($e)})}(Vt.value).then(Mt,tt)}Bt((Me=Me.apply(de,Qe||[])).next())})}function oe(de){return this instanceof oe?(this.v=de,this):new oe(de)}function ye(de,Qe,dt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ut,Me=dt.apply(de,Qe||[]),$e=[];return ut={},gt("next"),gt("throw"),gt("return"),ut[Symbol.asyncIterator]=function(){return this},ut;function gt(Gt){Me[Gt]&&(ut[Gt]=function(Vn){return new Promise(function(Bn,Sn){$e.push([Gt,Vn,Bn,Sn])>1||Mt(Gt,Vn)})})}function Mt(Gt,Vn){try{!function tt(Gt){Gt.value instanceof oe?Promise.resolve(Gt.value.v).then(Bt,Vt):rn($e[0][2],Gt)}(Me[Gt](Vn))}catch(Bn){rn($e[0][3],Bn)}}function Bt(Gt){Mt("next",Gt)}function Vt(Gt){Mt("throw",Gt)}function rn(Gt,Vn){Gt(Vn),$e.shift(),$e.length&&Mt($e[0][0],$e[0][1])}}function Re(de){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var dt,Qe=de[Symbol.asyncIterator];return Qe?Qe.call(de):(de=function Te(de){var Qe="function"==typeof Symbol&&Symbol.iterator,dt=Qe&&de[Qe],Me=0;if(dt)return dt.call(de);if(de&&"number"==typeof de.length)return{next:function(){return de&&Me>=de.length&&(de=void 0),{value:de&&de[Me++],done:!de}}};throw new TypeError(Qe?"Object is not iterable.":"Symbol.iterator is not defined.")}(de),dt={},Me("next"),Me("throw"),Me("return"),dt[Symbol.asyncIterator]=function(){return this},dt);function Me($e){dt[$e]=de[$e]&&function(gt){return new Promise(function(Mt,tt){!function ut($e,gt,Mt,tt){Promise.resolve(tt).then(function(Bt){$e({value:Bt,done:Mt})},gt)}(Mt,tt,(gt=de[$e](gt)).done,gt.value)})}}}W.d(Pe,{FC:()=>ye,KL:()=>Re,gn:()=>Se,mG:()=>Ne,qq:()=>oe,w6:()=>Oe})},1943:function(lt){lt.exports=function(){"use strict";var Pe,W,o;function me(E,Se){if(Pe)if(W){var he="var sharedChunk = {}; ("+Pe+")(sharedChunk); ("+W+")(sharedChunk);",Oe={};Pe(Oe),o=Se(Oe),typeof window<"u"&&(o.workerUrl=window.URL.createObjectURL(new Blob([he],{type:"text/javascript"})))}else W=Se;else Pe=Se}return me(0,function(E){var Se=he;function he(p,c,_,w){this.cx=3*p,this.bx=3*(_-p)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(w-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=p,this.p1y=c,this.p2x=_,this.p2y=w}function Oe(p,c,_,w){const P=new Se(p,c,_,w);return function(L){return P.solve(L)}}he.prototype={sampleCurveX:function(p){return((this.ax*p+this.bx)*p+this.cx)*p},sampleCurveY:function(p){return((this.ay*p+this.by)*p+this.cy)*p},sampleCurveDerivativeX:function(p){return(3*this.ax*p+2*this.bx)*p+this.cx},solveCurveX:function(p,c){if(void 0===c&&(c=1e-6),p<0)return 0;if(p>1)return 1;for(var _=p,w=0;w<8;w++){var P=this.sampleCurveX(_)-p;if(Math.abs(P)<c)return _;var L=this.sampleCurveDerivativeX(_);if(Math.abs(L)<1e-6)break;_-=P/L}var B=0,H=1;for(_=p,w=0;w<20&&(P=this.sampleCurveX(_),!(Math.abs(P-p)<c));w++)p>P?B=_:H=_,_=.5*(H-B)+B;return _},solve:function(p,c){return this.sampleCurveY(this.solveCurveX(p,c))}};const Ne=Oe(.25,.1,.25,1);function xe(p,c,_){return Math.min(_,Math.max(c,p))}function ct(p,c,_){const w=_-c,P=((p-c)%w+w)%w+c;return P===c?_:P}function Ke(p,...c){for(const _ of c)for(const w in _)p[w]=_[w];return p}let Te=1;function at(p,c){p.forEach(_=>{c[_]&&(c[_]=c[_].bind(c))})}function Ct(p,c,_){const w={};for(const P in p)w[P]=c.call(_||this,p[P],P,p);return w}function ue(p,c,_){const w={};for(const P in p)c.call(_||this,p[P],P,p)&&(w[P]=p[P]);return w}function De(p){return Array.isArray(p)?p.map(De):"object"==typeof p&&p?Ct(p,De):p}const oe={};function ye(p){oe[p]||(typeof console<"u"&&console.warn(p),oe[p]=!0)}function ce(p,c,_){return(_.y-p.y)*(c.x-p.x)>(c.y-p.y)*(_.x-p.x)}function Re(p){let c=0;for(let _,w,P=0,L=p.length,B=L-1;P<L;B=P++)_=p[P],w=p[B],c+=(w.x-_.x)*(_.y+w.y);return c}function ve(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function we(p){const c={};if(p.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(_,w,P,L)=>{const B=P||L;return c[w]=!B||B.toLowerCase(),""}),c["max-age"]){const _=parseInt(c["max-age"],10);isNaN(_)?delete c["max-age"]:c["max-age"]=_}return c}let Fe,se,_t=null;function Xe(p){if(null==_t){const c=p.navigator?p.navigator.userAgent:null;_t=!!p.safari||!(!c||!(/\b(iPad|iPhone|iPod)\b/.test(c)||c.match("Safari")&&!c.match("Chrome")))}return _t}function st(p){return typeof ImageBitmap<"u"&&p instanceof ImageBitmap}const de={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(p){const c=requestAnimationFrame(p);return{cancel:()=>cancelAnimationFrame(c)}},getImageData(p,c=0){const _=window.document.createElement("canvas"),w=_.getContext("2d");if(!w)throw new Error("failed to create canvas 2d context");return _.width=p.width,_.height=p.height,w.drawImage(p,0,0,p.width,p.height),w.getImageData(-c,-c,p.width+2*c,p.height+2*c)},resolveURL:p=>(Fe||(Fe=document.createElement("a")),Fe.href=p,Fe.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==se&&(se=matchMedia("(prefers-reduced-motion: reduce)")),se.matches)}};var Qe=dt;function dt(p,c){this.x=p,this.y=c}dt.prototype={clone:function(){return new dt(this.x,this.y)},add:function(p){return this.clone()._add(p)},sub:function(p){return this.clone()._sub(p)},multByPoint:function(p){return this.clone()._multByPoint(p)},divByPoint:function(p){return this.clone()._divByPoint(p)},mult:function(p){return this.clone()._mult(p)},div:function(p){return this.clone()._div(p)},rotate:function(p){return this.clone()._rotate(p)},rotateAround:function(p,c){return this.clone()._rotateAround(p,c)},matMult:function(p){return this.clone()._matMult(p)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(p){return this.x===p.x&&this.y===p.y},dist:function(p){return Math.sqrt(this.distSqr(p))},distSqr:function(p){var c=p.x-this.x,_=p.y-this.y;return c*c+_*_},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(p){return Math.atan2(this.y-p.y,this.x-p.x)},angleWith:function(p){return this.angleWithSep(p.x,p.y)},angleWithSep:function(p,c){return Math.atan2(this.x*c-this.y*p,this.x*p+this.y*c)},_matMult:function(p){var c=p[2]*this.x+p[3]*this.y;return this.x=p[0]*this.x+p[1]*this.y,this.y=c,this},_add:function(p){return this.x+=p.x,this.y+=p.y,this},_sub:function(p){return this.x-=p.x,this.y-=p.y,this},_mult:function(p){return this.x*=p,this.y*=p,this},_div:function(p){return this.x/=p,this.y/=p,this},_multByPoint:function(p){return this.x*=p.x,this.y*=p.y,this},_divByPoint:function(p){return this.x/=p.x,this.y/=p.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var p=this.y;return this.y=this.x,this.x=-p,this},_rotate:function(p){var c=Math.cos(p),_=Math.sin(p),w=_*this.x+c*this.y;return this.x=c*this.x-_*this.y,this.y=w,this},_rotateAround:function(p,c){var _=Math.cos(p),w=Math.sin(p),P=c.y+w*(this.x-c.x)+_*(this.y-c.y);return this.x=c.x+_*(this.x-c.x)-w*(this.y-c.y),this.y=P,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},dt.convert=function(p){return p instanceof dt?p:Array.isArray(p)?new dt(p[0],p[1]):p};const Me={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},ut="mapbox-tiles";let $e,Mt=500,tt=50;function Bt(){typeof caches>"u"||$e||($e=caches.open(ut))}let Vt=1/0;const rn={supported:!1,testSupport:function(p){!Bn&&Vn&&(Sn?si(p):Gt=p)}};let Gt,Vn,Bn=!1,Sn=!1;function si(p){const c=p.createTexture();p.bindTexture(p.TEXTURE_2D,c);try{if(p.texImage2D(p.TEXTURE_2D,0,p.RGBA,p.RGBA,p.UNSIGNED_BYTE,Vn),p.isContextLost())return;rn.supported=!0}catch{}p.deleteTexture(c),Bn=!0}typeof document<"u"&&(Vn=document.createElement("img"),Vn.onload=function(){Gt&&si(Gt),Gt=null,Sn=!0},Vn.onerror=function(){Bn=!0,Gt=null},Vn.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const $n={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze($n);class hn extends Error{constructor(c,_,w,P){super(`AJAXError: ${_} (${c}): ${w}`),this.status=c,this.statusText=_,this.url=w,this.body=P}}const jr=ve()?()=>self.worker&&self.worker.referrer:()=>("blob:"===window.location.protocol?window.parent:window).location.href;function sr(p,c){const _=new AbortController,w=new Request(p.url,{method:p.method||"GET",body:p.body,credentials:p.credentials,headers:p.headers,referrer:jr(),signal:_.signal});let P=!1,L=!1;return"json"===p.type&&w.headers.set("Accept","application/json"),((B,H,X)=>{if(L)return;const ne=Date.now();fetch(w).then(ge=>{return ge.ok?(Ie=ge,null,ne,void("arrayBuffer"===p.type?Ie.arrayBuffer():"json"===p.type?Ie.json():Ie.text()).then(We=>{L||(P=!0,c(null,We,Ie.headers.get("Cache-Control"),Ie.headers.get("Expires")))}).catch(We=>{L||c(new Error(We.message))})):ge.blob().then(Ie=>c(new hn(ge.status,ge.statusText,p.url,Ie)));var Ie}).catch(ge=>{20!==ge.code&&c(new Error(ge.message))})})(),{cancel:()=>{L=!0,P||_.abort()}}}const Fr=function(p,c){if(/:\/\//.test(p.url)&&!/^https?:|^file:/.test(p.url)){if(ve()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",p,c);if(!ve()){const w=p.url.substring(0,p.url.indexOf("://"));return(Me.REGISTERED_PROTOCOLS[w]||sr)(p,c)}}if(!(/^file:/.test(_=p.url)||/^file:/.test(jr())&&!/^\w+:/.test(_))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return sr(p,c);if(ve()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",p,c,void 0,!0)}var _;return function(w,P){const L=new XMLHttpRequest;L.open(w.method||"GET",w.url,!0),"arrayBuffer"===w.type&&(L.responseType="arraybuffer");for(const B in w.headers)L.setRequestHeader(B,w.headers[B]);return"json"===w.type&&(L.responseType="text",L.setRequestHeader("Accept","application/json")),L.withCredentials="include"===w.credentials,L.onerror=()=>{P(new Error(L.statusText))},L.onload=()=>{if((L.status>=200&&L.status<300||0===L.status)&&null!==L.response){let B=L.response;if("json"===w.type)try{B=JSON.parse(L.response)}catch(H){return P(H)}P(null,B,L.getResponseHeader("Cache-Control"),L.getResponseHeader("Expires"))}else{const B=new Blob([L.response],{type:L.getResponseHeader("Content-Type")});P(new hn(L.status,L.statusText,w.url,B))}},L.send(w.body),{cancel:()=>L.abort()}}(p,c)},yi=function(p,c){return Fr(Ke(p,{type:"arrayBuffer"}),c)};function Ri(p){const c=window.document.createElement("a");return c.href=p,c.protocol===window.document.location.protocol&&c.host===window.document.location.host}const It="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let je,Le;je=[],Le=0;const ke=function(p,c){if(rn.supported&&(p.headers||(p.headers={}),p.headers.accept="image/webp,*/*"),Le>=Me.MAX_PARALLEL_IMAGE_REQUESTS){const L={requestParameters:p,callback:c,cancelled:!1,cancel(){this.cancelled=!0}};return je.push(L),L}Le++;let _=!1;const w=()=>{if(!_)for(_=!0,Le--;je.length&&Le<Me.MAX_PARALLEL_IMAGE_REQUESTS;){const L=je.shift(),{requestParameters:B,callback:H,cancelled:X}=L;X||(L.cancel=ke(B,H).cancel)}},P=yi(p,(L,B,H,X)=>{var ne,ge;w(),L?c(L):B&&(ne=B,ge=(ne,ge)=>{null!=ne?c(ne):null!=ge&&c(null,ge,{cacheControl:H,expires:X})},"function"==typeof createImageBitmap?function(Ie,ze){const Ze=new Blob([new Uint8Array(Ie)],{type:"image/png"});createImageBitmap(Ze).then(We=>{ze(null,We)}).catch(We=>{ze(new Error(`Could not load image because of ${We.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(ne,ge):function(Ie,ze){const Ze=new Image;Ze.onload=()=>{ze(null,Ze),URL.revokeObjectURL(Ze.src),Ze.onload=null,window.requestAnimationFrame(()=>{Ze.src=It})},Ze.onerror=()=>ze(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const We=new Blob([new Uint8Array(Ie)],{type:"image/png"});Ze.src=Ie.byteLength?URL.createObjectURL(We):It}(ne,ge))});return{cancel:()=>{P.cancel(),w()}}};function Je(p,c,_){_[p]&&-1!==_[p].indexOf(c)||(_[p]=_[p]||[],_[p].push(c))}function Tt(p,c,_){if(_&&_[p]){const w=_[p].indexOf(c);-1!==w&&_[p].splice(w,1)}}class Yt{constructor(c,_={}){Ke(this,_),this.type=c}}class ln extends Yt{constructor(c,_={}){super("error",Ke({error:c},_))}}class un{on(c,_){return this._listeners=this._listeners||{},Je(c,_,this._listeners),this}off(c,_){return Tt(c,_,this._listeners),Tt(c,_,this._oneTimeListeners),this}once(c,_){return this._oneTimeListeners=this._oneTimeListeners||{},Je(c,_,this._oneTimeListeners),this}fire(c,_){"string"==typeof c&&(c=new Yt(c,_||{}));const w=c.type;if(this.listens(w)){c.target=this;const P=this._listeners&&this._listeners[w]?this._listeners[w].slice():[];for(const H of P)H.call(this,c);const L=this._oneTimeListeners&&this._oneTimeListeners[w]?this._oneTimeListeners[w].slice():[];for(const H of L)Tt(w,H,this._oneTimeListeners),H.call(this,c);const B=this._eventedParent;B&&(Ke(c,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),B.fire(c))}else c instanceof ln&&console.error(c.error);return this}listens(c){return this._listeners&&this._listeners[c]&&this._listeners[c].length>0||this._oneTimeListeners&&this._oneTimeListeners[c]&&this._oneTimeListeners[c].length>0||this._eventedParent&&this._eventedParent.listens(c)}setEventedParent(c,_){return this._eventedParent=c,this._eventedParentData=_,this}}var mt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class jt{constructor(c,_,w,P){this.message=(c?`${c}: `:"")+w,P&&(this.identifier=P),null!=_&&_.__line__&&(this.line=_.__line__)}}function In(p){const c=p.value;return c?[new jt(p.key,c,"constants have been deprecated as of v8")]:[]}function sn(p,...c){for(const _ of c)for(const w in _)p[w]=_[w];return p}function Fn(p){return p instanceof Number||p instanceof String||p instanceof Boolean?p.valueOf():p}function hr(p){if(Array.isArray(p))return p.map(hr);if(p instanceof Object&&!(p instanceof Number||p instanceof String||p instanceof Boolean)){const c={};for(const _ in p)c[_]=hr(p[_]);return c}return Fn(p)}class Ti extends Error{constructor(c,_){super(_),this.message=_,this.key=c}}class Bi{constructor(c,_=[]){this.parent=c,this.bindings={};for(const[w,P]of _)this.bindings[w]=P}concat(c){return new Bi(this,c)}get(c){if(this.bindings[c])return this.bindings[c];if(this.parent)return this.parent.get(c);throw new Error(`${c} not found in scope.`)}has(c){return!!this.bindings[c]||!!this.parent&&this.parent.has(c)}}const fr={kind:"null"},Cn={kind:"number"},qn={kind:"string"},hi={kind:"boolean"},Di={kind:"color"},Mr={kind:"object"},wi={kind:"value"},nr={kind:"collator"},dn={kind:"formatted"},wa={kind:"padding"},Lr={kind:"resolvedImage"};function fi(p,c){return{kind:"array",itemType:p,N:c}}function ar(p){if("array"===p.kind){const c=ar(p.itemType);return"number"==typeof p.N?`array<${c}, ${p.N}>`:"value"===p.itemType.kind?"array":`array<${c}>`}return p.kind}const Zs=[fr,Cn,qn,hi,Di,dn,Mr,fi(wi),wa,Lr];function Os(p,c){if("error"===c.kind)return null;if("array"===p.kind){if("array"===c.kind&&(0===c.N&&"value"===c.itemType.kind||!Os(p.itemType,c.itemType))&&("number"!=typeof p.N||p.N===c.N))return null}else{if(p.kind===c.kind)return null;if("value"===p.kind)for(const _ of Zs)if(!Os(_,c))return null}return`Expected ${ar(p)} but found ${ar(c)} instead.`}function na(p,c){return c.some(_=>_.kind===p.kind)}function ia(p,c){return c.some(_=>"null"===_?null===p:"array"===_?Array.isArray(p):"object"===_?p&&!Array.isArray(p)&&"object"==typeof p:_===typeof p)}var zs,dc={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function rt(p){return(p=Math.round(p))<0?0:p>255?255:p}function le(p){return rt("%"===p[p.length-1]?parseFloat(p)/100*255:parseInt(p))}function Ee(p){return(c="%"===p[p.length-1]?parseFloat(p)/100:parseFloat(p))<0?0:c>1?1:c;var c}function Ge(p,c,_){return _<0?_+=1:_>1&&(_-=1),6*_<1?p+(c-p)*_*6:2*_<1?c:3*_<2?p+(c-p)*(2/3-_)*6:p}try{zs={}.parseCSSColor=function(p){var c,_=p.replace(/ /g,"").toLowerCase();if(_ in dc)return dc[_].slice();if("#"===_[0])return 4===_.length?(c=parseInt(_.substr(1),16))>=0&&c<=4095?[(3840&c)>>4|(3840&c)>>8,240&c|(240&c)>>4,15&c|(15&c)<<4,1]:null:7===_.length&&(c=parseInt(_.substr(1),16))>=0&&c<=16777215?[(16711680&c)>>16,(65280&c)>>8,255&c,1]:null;var w=_.indexOf("("),P=_.indexOf(")");if(-1!==w&&P+1===_.length){var L=_.substr(0,w),B=_.substr(w+1,P-(w+1)).split(","),H=1;switch(L){case"rgba":if(4!==B.length)return null;H=Ee(B.pop());case"rgb":return 3!==B.length?null:[le(B[0]),le(B[1]),le(B[2]),H];case"hsla":if(4!==B.length)return null;H=Ee(B.pop());case"hsl":if(3!==B.length)return null;var X=(parseFloat(B[0])%360+360)%360/360,ne=Ee(B[1]),ge=Ee(B[2]),Ie=ge<=.5?ge*(ne+1):ge+ne-ge*ne,ze=2*ge-Ie;return[rt(255*Ge(ze,Ie,X+1/3)),rt(255*Ge(ze,Ie,X)),rt(255*Ge(ze,Ie,X-1/3)),H];default:return null}}return null}}catch{}class qe{constructor(c,_,w,P=1){this.r=c,this.g=_,this.b=w,this.a=P}static parse(c){if(!c)return;if(c instanceof qe)return c;if("string"!=typeof c)return;const _=zs(c);return _?new qe(_[0]/255*_[3],_[1]/255*_[3],_[2]/255*_[3],_[3]):void 0}toString(){const[c,_,w,P]=this.toArray();return`rgba(${Math.round(c)},${Math.round(_)},${Math.round(w)},${P})`}toArray(){const{r:c,g:_,b:w,a:P}=this;return 0===P?[0,0,0,0]:[255*c/P,255*_/P,255*w/P,P]}}qe.black=new qe(0,0,0,1),qe.white=new qe(1,1,1,1),qe.transparent=new qe(0,0,0,0),qe.red=new qe(1,0,0,1);class bt{constructor(c,_,w){this.sensitivity=c?_?"variant":"case":_?"accent":"base",this.locale=w,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(c,_){return this.collator.compare(c,_)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ot{constructor(c,_,w,P,L){this.text=c,this.image=_,this.scale=w,this.fontStack=P,this.textColor=L}}class Dt{constructor(c){this.sections=c}static fromString(c){return new Dt([new Ot(c,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(c=>0!==c.text.length||c.image&&0!==c.image.name.length)}static factory(c){return c instanceof Dt?c:Dt.fromString(c)}toString(){return 0===this.sections.length?"":this.sections.map(c=>c.text).join("")}}class vt{constructor(c){this.values=c.slice()}static parse(c){if(c instanceof vt)return c;if("number"==typeof c)return new vt([c,c,c,c]);if(Array.isArray(c)&&!(c.length<1||c.length>4)){for(const _ of c)if("number"!=typeof _)return;switch(c.length){case 1:c=[c[0],c[0],c[0],c[0]];break;case 2:c=[c[0],c[1],c[0],c[1]];break;case 3:c=[c[0],c[1],c[2],c[1]]}return new vt(c)}}toString(){return JSON.stringify(this.values)}}class Lt{constructor(c){this.name=c.name,this.available=c.available}toString(){return this.name}static fromString(c){return c?new Lt({name:c,available:!1}):null}}function Qt(p,c,_,w){return"number"==typeof p&&p>=0&&p<=255&&"number"==typeof c&&c>=0&&c<=255&&"number"==typeof _&&_>=0&&_<=255?void 0===w||"number"==typeof w&&w>=0&&w<=1?null:`Invalid rgba value [${[p,c,_,w].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof w?[p,c,_,w]:[p,c,_]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function mn(p){if(null===p||"string"==typeof p||"boolean"==typeof p||"number"==typeof p||p instanceof qe||p instanceof bt||p instanceof Dt||p instanceof vt||p instanceof Lt)return!0;if(Array.isArray(p)){for(const c of p)if(!mn(c))return!1;return!0}if("object"==typeof p){for(const c in p)if(!mn(p[c]))return!1;return!0}return!1}function Wt(p){if(null===p)return fr;if("string"==typeof p)return qn;if("boolean"==typeof p)return hi;if("number"==typeof p)return Cn;if(p instanceof qe)return Di;if(p instanceof bt)return nr;if(p instanceof Dt)return dn;if(p instanceof vt)return wa;if(p instanceof Lt)return Lr;if(Array.isArray(p)){const c=p.length;let _;for(const w of p){const P=Wt(w);if(_){if(_===P)continue;_=wi;break}_=P}return fi(_||wi,c)}return Mr}function li(p){const c=typeof p;return null===p?"":"string"===c||"number"===c||"boolean"===c?String(p):p instanceof qe||p instanceof Dt||p instanceof vt||p instanceof Lt?p.toString():JSON.stringify(p)}class Pn{constructor(c,_){this.type=c,this.value=_}static parse(c,_){if(2!==c.length)return _.error(`'literal' expression requires exactly one argument, but found ${c.length-1} instead.`);if(!mn(c[1]))return _.error("invalid value");const w=c[1];let P=Wt(w);const L=_.expectedType;return"array"!==P.kind||0!==P.N||!L||"array"!==L.kind||"number"==typeof L.N&&0!==L.N||(P=L),new Pn(P,w)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class xn{constructor(c){this.name="ExpressionEvaluationError",this.message=c}toJSON(){return this.message}}const Ii={string:qn,number:Cn,boolean:hi,object:Mr};class mi{constructor(c,_){this.type=c,this.args=_}static parse(c,_){if(c.length<2)return _.error("Expected at least one argument.");let w,P=1;const L=c[0];if("array"===L){let H,X;if(c.length>2){const ne=c[1];if("string"!=typeof ne||!(ne in Ii)||"object"===ne)return _.error('The item type argument of "array" must be one of string, number, boolean',1);H=Ii[ne],P++}else H=wi;if(c.length>3){if(null!==c[2]&&("number"!=typeof c[2]||c[2]<0||c[2]!==Math.floor(c[2])))return _.error('The length argument to "array" must be a positive integer literal',2);X=c[2],P++}w=fi(H,X)}else{if(!Ii[L])throw new Error(`Types doesn't contain name = ${L}`);w=Ii[L]}const B=[];for(;P<c.length;P++){const H=_.parse(c[P],P,wi);if(!H)return null;B.push(H)}return new mi(w,B)}evaluate(c){for(let _=0;_<this.args.length;_++){const w=this.args[_].evaluate(c);if(!Os(this.type,Wt(w)))return w;if(_===this.args.length-1)throw new xn(`Expected value to be of type ${ar(this.type)}, but found ${ar(Wt(w))} instead.`)}throw new Error}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every(c=>c.outputDefined())}}const lr={"to-boolean":hi,"to-color":Di,"to-number":Cn,"to-string":qn};class ii{constructor(c,_){this.type=c,this.args=_}static parse(c,_){if(c.length<2)return _.error("Expected at least one argument.");const w=c[0];if(!lr[w])throw new Error(`Can't parse ${w} as it is not part of the known types`);if(("to-boolean"===w||"to-string"===w)&&2!==c.length)return _.error("Expected one argument.");const P=lr[w],L=[];for(let B=1;B<c.length;B++){const H=_.parse(c[B],B,wi);if(!H)return null;L.push(H)}return new ii(P,L)}evaluate(c){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(c));if("color"===this.type.kind){let _,w;for(const P of this.args){if(_=P.evaluate(c),w=null,_ instanceof qe)return _;if("string"==typeof _){const L=c.parseColor(_);if(L)return L}else if(Array.isArray(_)&&(w=_.length<3||_.length>4?`Invalid rbga value ${JSON.stringify(_)}: expected an array containing either three or four numeric values.`:Qt(_[0],_[1],_[2],_[3]),!w))return new qe(_[0]/255,_[1]/255,_[2]/255,_[3])}throw new xn(w||`Could not parse color from value '${"string"==typeof _?_:JSON.stringify(_)}'`)}if("padding"===this.type.kind){let _;for(const w of this.args){_=w.evaluate(c);const P=vt.parse(_);if(P)return P}throw new xn(`Could not parse padding from value '${"string"==typeof _?_:JSON.stringify(_)}'`)}if("number"===this.type.kind){let _=null;for(const w of this.args){if(_=w.evaluate(c),null===_)return 0;const P=Number(_);if(!isNaN(P))return P}throw new xn(`Could not convert ${JSON.stringify(_)} to number.`)}return"formatted"===this.type.kind?Dt.fromString(li(this.args[0].evaluate(c))):"resolvedImage"===this.type.kind?Lt.fromString(li(this.args[0].evaluate(c))):li(this.args[0].evaluate(c))}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every(c=>c.outputDefined())}}const Xn=["Unknown","Point","LineString","Polygon"];class Mi{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Xn[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(c){let _=this._parseColorCache[c];return _||(_=this._parseColorCache[c]=qe.parse(c)),_}}class Wi{constructor(c,_,w,P){this.name=c,this.type=_,this._evaluate=w,this.args=P}evaluate(c){return this._evaluate(c,this.args)}eachChild(c){this.args.forEach(c)}outputDefined(){return!1}static parse(c,_){const w=c[0],P=Wi.definitions[w];if(!P)return _.error(`Unknown expression "${w}". If you wanted a literal array, use ["literal", [...]].`,0);const L=Array.isArray(P)?P[0]:P.type,B=Array.isArray(P)?[[P[1],P[2]]]:P.overloads,H=B.filter(([ne])=>!Array.isArray(ne)||ne.length===c.length-1);let X=null;for(const[ne,ge]of H){X=new ft(_.registry,_.path,null,_.scope);const Ie=[];let ze=!1;for(let Ze=1;Ze<c.length;Ze++){const We=c[Ze],St=Array.isArray(ne)?ne[Ze-1]:ne.type,Et=X.parse(We,1+Ie.length,St);if(!Et){ze=!0;break}Ie.push(Et)}if(!ze)if(Array.isArray(ne)&&ne.length!==Ie.length)X.error(`Expected ${ne.length} arguments, but found ${Ie.length} instead.`);else{for(let Ze=0;Ze<Ie.length;Ze++){const We=Array.isArray(ne)?ne[Ze]:ne.type,St=Ie[Ze];X.concat(Ze+1).checkSubtype(We,St.type)}if(0===X.errors.length)return new Wi(w,L,ge,Ie)}}if(1===H.length)_.errors.push(...X.errors);else{const ne=(H.length?H:B).map(([Ie])=>{return ze=Ie,Array.isArray(ze)?`(${ze.map(ar).join(", ")})`:`(${ar(ze.type)}...)`;var ze}).join(" | "),ge=[];for(let Ie=1;Ie<c.length;Ie++){const ze=_.parse(c[Ie],1+ge.length);if(!ze)return null;ge.push(ar(ze.type))}_.error(`Expected arguments of type ${ne}, but found (${ge.join(", ")}) instead.`)}return null}static register(c,_){Wi.definitions=_;for(const w in _)c[w]=Wi}}class qr{constructor(c,_,w){this.type=nr,this.locale=w,this.caseSensitive=c,this.diacriticSensitive=_}static parse(c,_){if(2!==c.length)return _.error("Expected one argument.");const w=c[1];if("object"!=typeof w||Array.isArray(w))return _.error("Collator options argument must be an object.");const P=_.parse(void 0!==w["case-sensitive"]&&w["case-sensitive"],1,hi);if(!P)return null;const L=_.parse(void 0!==w["diacritic-sensitive"]&&w["diacritic-sensitive"],1,hi);if(!L)return null;let B=null;return w.locale&&(B=_.parse(w.locale,1,qn),!B)?null:new qr(P,L,B)}evaluate(c){return new bt(this.caseSensitive.evaluate(c),this.diacriticSensitive.evaluate(c),this.locale?this.locale.evaluate(c):null)}eachChild(c){c(this.caseSensitive),c(this.diacriticSensitive),this.locale&&c(this.locale)}outputDefined(){return!1}}const yr=8192;function eo(p,c){p[0]=Math.min(p[0],c[0]),p[1]=Math.min(p[1],c[1]),p[2]=Math.max(p[2],c[0]),p[3]=Math.max(p[3],c[1])}function Qn(p,c){return!(p[0]<=c[0]||p[2]>=c[2]||p[1]<=c[1]||p[3]>=c[3])}function zi(p,c){const _=(180+p[0])/360,w=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+p[1]*Math.PI/360)))/360,P=Math.pow(2,c.z);return[Math.round(_*P*yr),Math.round(w*P*yr)]}function ei(p,c,_){const w=p[0]-c[0],P=p[1]-c[1],L=p[0]-_[0],B=p[1]-_[1];return w*B-L*P==0&&w*L<=0&&P*B<=0}function La(p,c){let _=!1;for(let B=0,H=c.length;B<H;B++){const X=c[B];for(let ne=0,ge=X.length;ne<ge-1;ne++){if(ei(p,X[ne],X[ne+1]))return!1;(P=X[ne])[1]>(w=p)[1]!=(L=X[ne+1])[1]>w[1]&&w[0]<(L[0]-P[0])*(w[1]-P[1])/(L[1]-P[1])+P[0]&&(_=!_)}}var w,P,L;return _}function rs(p,c){for(let _=0;_<c.length;_++)if(La(p,c[_]))return!0;return!1}function Cs(p,c,_,w){const P=w[0]-_[0],L=w[1]-_[1],B=(p[0]-_[0])*L-P*(p[1]-_[1]),H=(c[0]-_[0])*L-P*(c[1]-_[1]);return B>0&&H<0||B<0&&H>0}function hc(p,c,_){for(const ne of _)for(let ge=0;ge<ne.length-1;++ge)if((H=[(B=ne[ge+1])[0]-(L=ne[ge])[0],B[1]-L[1]])[0]*(X=[(P=c)[0]-(w=p)[0],P[1]-w[1]])[1]-H[1]*X[0]!=0&&Cs(w,P,L,B)&&Cs(L,B,w,P))return!0;var w,P,L,B,H,X;return!1}function ci(p,c){for(let _=0;_<p.length;++_)if(!La(p[_],c))return!1;for(let _=0;_<p.length-1;++_)if(hc(p[_],p[_+1],c))return!1;return!0}function Vc(p,c){for(let _=0;_<c.length;_++)if(ci(p,c[_]))return!0;return!1}function Us(p,c,_){const w=[];for(let P=0;P<p.length;P++){const L=[];for(let B=0;B<p[P].length;B++){const H=zi(p[P][B],_);eo(c,H),L.push(H)}w.push(L)}return w}function dr(p,c,_){const w=[];for(let P=0;P<p.length;P++){const L=Us(p[P],c,_);w.push(L)}return w}function Xi(p,c,_,w){if(p[0]<_[0]||p[0]>_[2]){const P=.5*w;let L=p[0]-_[0]>P?-w:_[0]-p[0]>P?w:0;0===L&&(L=p[0]-_[2]>P?-w:_[2]-p[0]>P?w:0),p[0]+=L}eo(c,p)}function An(p,c,_,w){const P=Math.pow(2,w.z)*yr,L=[w.x*yr,w.y*yr],B=[];for(const H of p)for(const X of H){const ne=[X.x+L[0],X.y+L[1]];Xi(ne,c,_,P),B.push(ne)}return B}function Xa(p,c,_,w){const P=Math.pow(2,w.z)*yr,L=[w.x*yr,w.y*yr],B=[];for(const X of p){const ne=[];for(const ge of X){const Ie=[ge.x+L[0],ge.y+L[1]];eo(c,Ie),ne.push(Ie)}B.push(ne)}if(c[2]-c[0]<=P/2){(H=c)[0]=H[1]=1/0,H[2]=H[3]=-1/0;for(const X of B)for(const ne of X)Xi(ne,c,_,P)}var H;return B}class ms{constructor(c,_){this.type=hi,this.geojson=c,this.geometries=_}static parse(c,_){if(2!==c.length)return _.error(`'within' expression requires exactly one argument, but found ${c.length-1} instead.`);if(mn(c[1])){const w=c[1];if("FeatureCollection"===w.type)for(let P=0;P<w.features.length;++P){const L=w.features[P].geometry.type;if("Polygon"===L||"MultiPolygon"===L)return new ms(w,w.features[P].geometry)}else if("Feature"===w.type){const P=w.geometry.type;if("Polygon"===P||"MultiPolygon"===P)return new ms(w,w.geometry)}else if("Polygon"===w.type||"MultiPolygon"===w.type)return new ms(w,w)}return _.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(c){if(null!=c.geometry()&&null!=c.canonicalID()){if("Point"===c.geometryType())return function(_,w){const P=[1/0,1/0,-1/0,-1/0],L=[1/0,1/0,-1/0,-1/0],B=_.canonicalID();if("Polygon"===w.type){const H=Us(w.coordinates,L,B),X=An(_.geometry(),P,L,B);if(!Qn(P,L))return!1;for(const ne of X)if(!La(ne,H))return!1}if("MultiPolygon"===w.type){const H=dr(w.coordinates,L,B),X=An(_.geometry(),P,L,B);if(!Qn(P,L))return!1;for(const ne of X)if(!rs(ne,H))return!1}return!0}(c,this.geometries);if("LineString"===c.geometryType())return function(_,w){const P=[1/0,1/0,-1/0,-1/0],L=[1/0,1/0,-1/0,-1/0],B=_.canonicalID();if("Polygon"===w.type){const H=Us(w.coordinates,L,B),X=Xa(_.geometry(),P,L,B);if(!Qn(P,L))return!1;for(const ne of X)if(!ci(ne,H))return!1}if("MultiPolygon"===w.type){const H=dr(w.coordinates,L,B),X=Xa(_.geometry(),P,L,B);if(!Qn(P,L))return!1;for(const ne of X)if(!Vc(ne,H))return!1}return!0}(c,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function ir(p){if(p instanceof Wi&&("get"===p.name&&1===p.args.length||"feature-state"===p.name||"has"===p.name&&1===p.args.length||"properties"===p.name||"geometry-type"===p.name||"id"===p.name||/^filter-/.test(p.name))||p instanceof ms)return!1;let c=!0;return p.eachChild(_=>{c&&!ir(_)&&(c=!1)}),c}function Ji(p){if(p instanceof Wi&&"feature-state"===p.name)return!1;let c=!0;return p.eachChild(_=>{c&&!Ji(_)&&(c=!1)}),c}function ht(p,c){if(p instanceof Wi&&c.indexOf(p.name)>=0)return!1;let _=!0;return p.eachChild(w=>{_&&!ht(w,c)&&(_=!1)}),_}class Jt{constructor(c,_){this.type=_.type,this.name=c,this.boundExpression=_}static parse(c,_){if(2!==c.length||"string"!=typeof c[1])return _.error("'var' expression requires exactly one string literal argument.");const w=c[1];return _.scope.has(w)?new Jt(w,_.scope.get(w)):_.error(`Unknown variable "${w}". Make sure "${w}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(c){return this.boundExpression.evaluate(c)}eachChild(){}outputDefined(){return!1}}class ft{constructor(c,_=[],w,P=new Bi,L=[]){this.registry=c,this.path=_,this.key=_.map(B=>`[${B}]`).join(""),this.scope=P,this.errors=L,this.expectedType=w}parse(c,_,w,P,L={}){return _?this.concat(_,w,P)._parse(c,L):this._parse(c,L)}_parse(c,_){function w(P,L,B){return"assert"===B?new mi(L,[P]):"coerce"===B?new ii(L,[P]):P}if(null!==c&&"string"!=typeof c&&"boolean"!=typeof c&&"number"!=typeof c||(c=["literal",c]),Array.isArray(c)){if(0===c.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const P=c[0];if("string"!=typeof P)return this.error(`Expression name must be a string, but found ${typeof P} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const L=this.registry[P];if(L){let B=L.parse(c,this);if(!B)return null;if(this.expectedType){const H=this.expectedType,X=B.type;if("string"!==H.kind&&"number"!==H.kind&&"boolean"!==H.kind&&"object"!==H.kind&&"array"!==H.kind||"value"!==X.kind)if("color"!==H.kind&&"formatted"!==H.kind&&"resolvedImage"!==H.kind||"value"!==X.kind&&"string"!==X.kind)if("padding"!==H.kind||"value"!==X.kind&&"number"!==X.kind&&"array"!==X.kind){if(this.checkSubtype(H,X))return null}else B=w(B,H,_.typeAnnotation||"coerce");else B=w(B,H,_.typeAnnotation||"coerce");else B=w(B,H,_.typeAnnotation||"assert")}if(!(B instanceof Pn)&&"resolvedImage"!==B.type.kind&&on(B)){const H=new Mi;try{B=new Pn(B.type,B.evaluate(H))}catch(X){return this.error(X.message),null}}return B}return this.error(`Unknown expression "${P}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===c?"'undefined' value invalid. Use null instead.":"object"==typeof c?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof c} instead.`)}concat(c,_,w){const P="number"==typeof c?this.path.concat(c):this.path,L=w?this.scope.concat(w):this.scope;return new ft(this.registry,P,_||null,L,this.errors)}error(c,..._){const w=`${this.key}${_.map(P=>`[${P}]`).join("")}`;this.errors.push(new Ti(w,c))}checkSubtype(c,_){const w=Os(c,_);return w&&this.error(w),w}}function on(p){if(p instanceof Jt)return on(p.boundExpression);if(p instanceof Wi&&"error"===p.name||p instanceof qr||p instanceof ms)return!1;const c=p instanceof ii||p instanceof mi;let _=!0;return p.eachChild(w=>{_=c?_&&on(w):_&&w instanceof Pn}),!!_&&ir(p)&&ht(p,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function gn(p,c){const _=p.length-1;let w,P,L=0,B=_,H=0;for(;L<=B;)if(H=Math.floor((L+B)/2),w=p[H],P=p[H+1],w<=c){if(H===_||c<P)return H;L=H+1}else{if(!(w>c))throw new xn("Input is not a number.");B=H-1}return 0}class zn{constructor(c,_,w){this.type=c,this.input=_,this.labels=[],this.outputs=[];for(const[P,L]of w)this.labels.push(P),this.outputs.push(L)}static parse(c,_){if(c.length-1<4)return _.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if((c.length-1)%2!=0)return _.error("Expected an even number of arguments.");const w=_.parse(c[1],1,Cn);if(!w)return null;const P=[];let L=null;_.expectedType&&"value"!==_.expectedType.kind&&(L=_.expectedType);for(let B=1;B<c.length;B+=2){const H=1===B?-1/0:c[B],X=c[B+1],ne=B,ge=B+1;if("number"!=typeof H)return _.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ne);if(P.length&&P[P.length-1][0]>=H)return _.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ne);const Ie=_.parse(X,ge,L);if(!Ie)return null;L=L||Ie.type,P.push([H,Ie])}return new zn(L,w,P)}evaluate(c){const _=this.labels,w=this.outputs;if(1===_.length)return w[0].evaluate(c);const P=this.input.evaluate(c);if(P<=_[0])return w[0].evaluate(c);const L=_.length;return P>=_[L-1]?w[L-1].evaluate(c):w[gn(_,P)].evaluate(c)}eachChild(c){c(this.input);for(const _ of this.outputs)c(_)}outputDefined(){return this.outputs.every(c=>c.outputDefined())}}function Ai(p,c,_){return p*(1-_)+c*_}var vr=Object.freeze({__proto__:null,number:Ai,color:function(p,c,_){return new qe(Ai(p.r,c.r,_),Ai(p.g,c.g,_),Ai(p.b,c.b,_),Ai(p.a,c.a,_))},array:function(p,c,_){return p.map((w,P)=>Ai(w,c[P],_))},padding:function(p,c,_){const w=p.values,P=c.values;return new vt([Ai(w[0],P[0],_),Ai(w[1],P[1],_),Ai(w[2],P[2],_),Ai(w[3],P[3],_)])}});const qi=4/29,fo=6/29,Nd=3*fo*fo,po=Math.PI/180,Ea=180/Math.PI;function ka(p){return p>.008856451679035631?Math.pow(p,1/3):p/Nd+qi}function Nr(p){return p>fo?p*p*p:Nd*(p-qi)}function fc(p){return 255*(p<=.0031308?12.92*p:1.055*Math.pow(p,1/2.4)-.055)}function so(p){return(p/=255)<=.04045?p/12.92:Math.pow((p+.055)/1.055,2.4)}function Xr(p){const c=so(p.r),_=so(p.g),w=so(p.b),P=ka((.4124564*c+.3575761*_+.1804375*w)/.95047),L=ka((.2126729*c+.7151522*_+.072175*w)/1);return{l:116*L-16,a:500*(P-L),b:200*(L-ka((.0193339*c+.119192*_+.9503041*w)/1.08883)),alpha:p.a}}function Cu(p){let c=(p.l+16)/116,_=isNaN(p.a)?c:c+p.a/500,w=isNaN(p.b)?c:c-p.b/200;return c=1*Nr(c),_=.95047*Nr(_),w=1.08883*Nr(w),new qe(fc(3.2404542*_-1.5371385*c-.4985314*w),fc(-.969266*_+1.8760108*c+.041556*w),fc(.0556434*_-.2040259*c+1.0572252*w),p.alpha)}function os(p,c,_){const w=c-p;return p+_*(w>180||w<-180?w-360*Math.round(w/360):w)}const Ws={forward:Xr,reverse:Cu,interpolate:function(p,c,_){return{l:Ai(p.l,c.l,_),a:Ai(p.a,c.a,_),b:Ai(p.b,c.b,_),alpha:Ai(p.alpha,c.alpha,_)}}},pc={forward:function(p){const{l:c,a:_,b:w}=Xr(p),P=Math.atan2(w,_)*Ea;return{h:P<0?P+360:P,c:Math.sqrt(_*_+w*w),l:c,alpha:p.a}},reverse:function(p){const c=p.h*po,_=p.c;return Cu({l:p.l,a:Math.cos(c)*_,b:Math.sin(c)*_,alpha:p.alpha})},interpolate:function(p,c,_){return{h:os(p.h,c.h,_),c:Ai(p.c,c.c,_),l:Ai(p.l,c.l,_),alpha:Ai(p.alpha,c.alpha,_)}}};var El=Object.freeze({__proto__:null,lab:Ws,hcl:pc});class Vs{constructor(c,_,w,P,L){this.type=c,this.operator=_,this.interpolation=w,this.input=P,this.labels=[],this.outputs=[];for(const[B,H]of L)this.labels.push(B),this.outputs.push(H)}static interpolationFactor(c,_,w,P){let L=0;if("exponential"===c.name)L=mc(_,c.base,w,P);else if("linear"===c.name)L=mc(_,1,w,P);else if("cubic-bezier"===c.name){const B=c.controlPoints;L=new Se(B[0],B[1],B[2],B[3]).solve(mc(_,1,w,P))}return L}static parse(c,_){let[w,P,L,...B]=c;if(!Array.isArray(P)||0===P.length)return _.error("Expected an interpolation type expression.",1);if("linear"===P[0])P={name:"linear"};else if("exponential"===P[0]){const ne=P[1];if("number"!=typeof ne)return _.error("Exponential interpolation requires a numeric base.",1,1);P={name:"exponential",base:ne}}else{if("cubic-bezier"!==P[0])return _.error(`Unknown interpolation type ${String(P[0])}`,1,0);{const ne=P.slice(1);if(4!==ne.length||ne.some(ge=>"number"!=typeof ge||ge<0||ge>1))return _.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);P={name:"cubic-bezier",controlPoints:ne}}}if(c.length-1<4)return _.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if((c.length-1)%2!=0)return _.error("Expected an even number of arguments.");if(L=_.parse(L,2,Cn),!L)return null;const H=[];let X=null;"interpolate-hcl"===w||"interpolate-lab"===w?X=Di:_.expectedType&&"value"!==_.expectedType.kind&&(X=_.expectedType);for(let ne=0;ne<B.length;ne+=2){const ge=B[ne],Ie=B[ne+1],ze=ne+3,Ze=ne+4;if("number"!=typeof ge)return _.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ze);if(H.length&&H[H.length-1][0]>=ge)return _.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ze);const We=_.parse(Ie,Ze,X);if(!We)return null;X=X||We.type,H.push([ge,We])}return"number"===X.kind||"color"===X.kind||"padding"===X.kind||"array"===X.kind&&"number"===X.itemType.kind&&"number"==typeof X.N?new Vs(X,w,P,L,H):_.error(`Type ${ar(X)} is not interpolatable.`)}evaluate(c){const _=this.labels,w=this.outputs;if(1===_.length)return w[0].evaluate(c);const P=this.input.evaluate(c);if(P<=_[0])return w[0].evaluate(c);const L=_.length;if(P>=_[L-1])return w[L-1].evaluate(c);const B=gn(_,P),H=Vs.interpolationFactor(this.interpolation,P,_[B],_[B+1]),X=w[B].evaluate(c),ne=w[B+1].evaluate(c);return"interpolate"===this.operator?vr[this.type.kind.toLowerCase()](X,ne,H):"interpolate-hcl"===this.operator?pc.reverse(pc.interpolate(pc.forward(X),pc.forward(ne),H)):Ws.reverse(Ws.interpolate(Ws.forward(X),Ws.forward(ne),H))}eachChild(c){c(this.input);for(const _ of this.outputs)c(_)}outputDefined(){return this.outputs.every(c=>c.outputDefined())}}function mc(p,c,_,w){const P=w-_,L=p-_;return 0===P?0:1===c?L/P:(Math.pow(c,L)-1)/(Math.pow(c,P)-1)}class tc{constructor(c,_){this.type=c,this.args=_}static parse(c,_){if(c.length<2)return _.error("Expectected at least one argument.");let w=null;const P=_.expectedType;P&&"value"!==P.kind&&(w=P);const L=[];for(const H of c.slice(1)){const X=_.parse(H,1+L.length,w,void 0,{typeAnnotation:"omit"});if(!X)return null;w=w||X.type,L.push(X)}if(!w)throw new Error("No output type");const B=P&&L.some(H=>Os(P,H.type));return new tc(B?wi:w,L)}evaluate(c){let _,w=null,P=0;for(const L of this.args)if(P++,w=L.evaluate(c),w&&w instanceof Lt&&!w.available&&(_||(_=w.name),w=null,P===this.args.length&&(w=_)),null!==w)break;return w}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every(c=>c.outputDefined())}}class ss{constructor(c,_){this.type=_.type,this.bindings=[].concat(c),this.result=_}evaluate(c){return this.result.evaluate(c)}eachChild(c){for(const _ of this.bindings)c(_[1]);c(this.result)}static parse(c,_){if(c.length<4)return _.error(`Expected at least 3 arguments, but found ${c.length-1} instead.`);const w=[];for(let L=1;L<c.length-1;L+=2){const B=c[L];if("string"!=typeof B)return _.error(`Expected string, but found ${typeof B} instead.`,L);if(/[^a-zA-Z0-9_]/.test(B))return _.error("Variable names must contain only alphanumeric characters or '_'.",L);const H=_.parse(c[L+1],L+1);if(!H)return null;w.push([B,H])}const P=_.parse(c[c.length-1],c.length-1,_.expectedType,w);return P?new ss(w,P):null}outputDefined(){return this.result.outputDefined()}}class Bd{constructor(c,_,w){this.type=c,this.index=_,this.input=w}static parse(c,_){if(3!==c.length)return _.error(`Expected 2 arguments, but found ${c.length-1} instead.`);const w=_.parse(c[1],1,Cn),P=_.parse(c[2],2,fi(_.expectedType||wi));return w&&P?new Bd(P.type.itemType,w,P):null}evaluate(c){const _=this.index.evaluate(c),w=this.input.evaluate(c);if(_<0)throw new xn(`Array index out of bounds: ${_} < 0.`);if(_>=w.length)throw new xn(`Array index out of bounds: ${_} > ${w.length-1}.`);if(_!==Math.floor(_))throw new xn(`Array index must be an integer, but found ${_} instead.`);return w[_]}eachChild(c){c(this.index),c(this.input)}outputDefined(){return!1}}class Cl{constructor(c,_){this.type=hi,this.needle=c,this.haystack=_}static parse(c,_){if(3!==c.length)return _.error(`Expected 2 arguments, but found ${c.length-1} instead.`);const w=_.parse(c[1],1,wi),P=_.parse(c[2],2,wi);return w&&P?na(w.type,[hi,qn,Cn,fr,wi])?new Cl(w,P):_.error(`Expected first argument to be of type boolean, string, number or null, but found ${ar(w.type)} instead`):null}evaluate(c){const _=this.needle.evaluate(c),w=this.haystack.evaluate(c);if(!w)return!1;if(!ia(_,["boolean","string","number","null"]))throw new xn(`Expected first argument to be of type boolean, string, number or null, but found ${ar(Wt(_))} instead.`);if(!ia(w,["string","array"]))throw new xn(`Expected second argument to be of type array or string, but found ${ar(Wt(w))} instead.`);return w.indexOf(_)>=0}eachChild(c){c(this.needle),c(this.haystack)}outputDefined(){return!0}}class Kr{constructor(c,_,w){this.type=Cn,this.needle=c,this.haystack=_,this.fromIndex=w}static parse(c,_){if(c.length<=2||c.length>=5)return _.error(`Expected 3 or 4 arguments, but found ${c.length-1} instead.`);const w=_.parse(c[1],1,wi),P=_.parse(c[2],2,wi);if(!w||!P)return null;if(!na(w.type,[hi,qn,Cn,fr,wi]))return _.error(`Expected first argument to be of type boolean, string, number or null, but found ${ar(w.type)} instead`);if(4===c.length){const L=_.parse(c[3],3,Cn);return L?new Kr(w,P,L):null}return new Kr(w,P)}evaluate(c){const _=this.needle.evaluate(c),w=this.haystack.evaluate(c);if(!ia(_,["boolean","string","number","null"]))throw new xn(`Expected first argument to be of type boolean, string, number or null, but found ${ar(Wt(_))} instead.`);if(!ia(w,["string","array"]))throw new xn(`Expected second argument to be of type array or string, but found ${ar(Wt(w))} instead.`);if(this.fromIndex){const P=this.fromIndex.evaluate(c);return w.indexOf(_,P)}return w.indexOf(_)}eachChild(c){c(this.needle),c(this.haystack),this.fromIndex&&c(this.fromIndex)}outputDefined(){return!1}}class Ss{constructor(c,_,w,P,L,B){this.inputType=c,this.type=_,this.input=w,this.cases=P,this.outputs=L,this.otherwise=B}static parse(c,_){if(c.length<5)return _.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if(c.length%2!=1)return _.error("Expected an even number of arguments.");let w,P;_.expectedType&&"value"!==_.expectedType.kind&&(P=_.expectedType);const L={},B=[];for(let ne=2;ne<c.length-1;ne+=2){let ge=c[ne];const Ie=c[ne+1];Array.isArray(ge)||(ge=[ge]);const ze=_.concat(ne);if(0===ge.length)return ze.error("Expected at least one branch label.");for(const We of ge){if("number"!=typeof We&&"string"!=typeof We)return ze.error("Branch labels must be numbers or strings.");if("number"==typeof We&&Math.abs(We)>Number.MAX_SAFE_INTEGER)return ze.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof We&&Math.floor(We)!==We)return ze.error("Numeric branch labels must be integer values.");if(w){if(ze.checkSubtype(w,Wt(We)))return null}else w=Wt(We);if(void 0!==L[String(We)])return ze.error("Branch labels must be unique.");L[String(We)]=B.length}const Ze=_.parse(Ie,ne,P);if(!Ze)return null;P=P||Ze.type,B.push(Ze)}const H=_.parse(c[1],1,wi);if(!H)return null;const X=_.parse(c[c.length-1],c.length-1,P);return X?"value"!==H.type.kind&&_.concat(1).checkSubtype(w,H.type)?null:new Ss(w,P,H,L,B,X):null}evaluate(c){const _=this.input.evaluate(c);return(Wt(_)===this.inputType&&this.outputs[this.cases[_]]||this.otherwise).evaluate(c)}eachChild(c){c(this.input),this.outputs.forEach(c),c(this.otherwise)}outputDefined(){return this.outputs.every(c=>c.outputDefined())&&this.otherwise.outputDefined()}}class Uu{constructor(c,_,w){this.type=c,this.branches=_,this.otherwise=w}static parse(c,_){if(c.length<4)return _.error(`Expected at least 3 arguments, but found only ${c.length-1}.`);if(c.length%2!=0)return _.error("Expected an odd number of arguments.");let w;_.expectedType&&"value"!==_.expectedType.kind&&(w=_.expectedType);const P=[];for(let B=1;B<c.length-1;B+=2){const H=_.parse(c[B],B,hi);if(!H)return null;const X=_.parse(c[B+1],B+1,w);if(!X)return null;P.push([H,X]),w=w||X.type}const L=_.parse(c[c.length-1],c.length-1,w);if(!L)return null;if(!w)throw new Error("Can't infer output type");return new Uu(w,P,L)}evaluate(c){for(const[_,w]of this.branches)if(_.evaluate(c))return w.evaluate(c);return this.otherwise.evaluate(c)}eachChild(c){for(const[_,w]of this.branches)c(_),c(w);c(this.otherwise)}outputDefined(){return this.branches.every(([c,_])=>_.outputDefined())&&this.otherwise.outputDefined()}}class zd{constructor(c,_,w,P){this.type=c,this.input=_,this.beginIndex=w,this.endIndex=P}static parse(c,_){if(c.length<=2||c.length>=5)return _.error(`Expected 3 or 4 arguments, but found ${c.length-1} instead.`);const w=_.parse(c[1],1,wi),P=_.parse(c[2],2,Cn);if(!w||!P)return null;if(!na(w.type,[fi(wi),qn,wi]))return _.error(`Expected first argument to be of type array or string, but found ${ar(w.type)} instead`);if(4===c.length){const L=_.parse(c[3],3,Cn);return L?new zd(w.type,w,P,L):null}return new zd(w.type,w,P)}evaluate(c){const _=this.input.evaluate(c),w=this.beginIndex.evaluate(c);if(!ia(_,["string","array"]))throw new xn(`Expected first argument to be of type array or string, but found ${ar(Wt(_))} instead.`);if(this.endIndex){const P=this.endIndex.evaluate(c);return _.slice(w,P)}return _.slice(w)}eachChild(c){c(this.input),c(this.beginIndex),this.endIndex&&c(this.endIndex)}outputDefined(){return!1}}function Gc(p,c){return"=="===p||"!="===p?"boolean"===c.kind||"string"===c.kind||"number"===c.kind||"null"===c.kind||"value"===c.kind:"string"===c.kind||"number"===c.kind||"value"===c.kind}function bd(p,c,_,w){return 0===w.compare(c,_)}function Vu(p,c,_){const w="=="!==p&&"!="!==p;return class $F{constructor(L,B,H){this.type=hi,this.lhs=L,this.rhs=B,this.collator=H,this.hasUntypedArgument="value"===L.type.kind||"value"===B.type.kind}static parse(L,B){if(3!==L.length&&4!==L.length)return B.error("Expected two or three arguments.");const H=L[0];let X=B.parse(L[1],1,wi);if(!X)return null;if(!Gc(H,X.type))return B.concat(1).error(`"${H}" comparisons are not supported for type '${ar(X.type)}'.`);let ne=B.parse(L[2],2,wi);if(!ne)return null;if(!Gc(H,ne.type))return B.concat(2).error(`"${H}" comparisons are not supported for type '${ar(ne.type)}'.`);if(X.type.kind!==ne.type.kind&&"value"!==X.type.kind&&"value"!==ne.type.kind)return B.error(`Cannot compare types '${ar(X.type)}' and '${ar(ne.type)}'.`);w&&("value"===X.type.kind&&"value"!==ne.type.kind?X=new mi(ne.type,[X]):"value"!==X.type.kind&&"value"===ne.type.kind&&(ne=new mi(X.type,[ne])));let ge=null;if(4===L.length){if("string"!==X.type.kind&&"string"!==ne.type.kind&&"value"!==X.type.kind&&"value"!==ne.type.kind)return B.error("Cannot use collator to compare non-string types.");if(ge=B.parse(L[3],3,nr),!ge)return null}return new $F(X,ne,ge)}evaluate(L){const B=this.lhs.evaluate(L),H=this.rhs.evaluate(L);if(w&&this.hasUntypedArgument){const X=Wt(B),ne=Wt(H);if(X.kind!==ne.kind||"string"!==X.kind&&"number"!==X.kind)throw new xn(`Expected arguments for "${p}" to be (string, string) or (number, number), but found (${X.kind}, ${ne.kind}) instead.`)}if(this.collator&&!w&&this.hasUntypedArgument){const X=Wt(B),ne=Wt(H);if("string"!==X.kind||"string"!==ne.kind)return c(L,B,H)}return this.collator?_(L,B,H,this.collator.evaluate(L)):c(L,B,H)}eachChild(L){L(this.lhs),L(this.rhs),this.collator&&L(this.collator)}outputDefined(){return!0}}}const Ka=Vu("==",function(p,c,_){return c===_},bd),ou=Vu("!=",function(p,c,_){return c!==_},function(p,c,_,w){return!bd(0,c,_,w)}),Ds=Vu("<",function(p,c,_){return c<_},function(p,c,_,w){return w.compare(c,_)<0}),su=Vu(">",function(p,c,_){return c>_},function(p,c,_,w){return w.compare(c,_)>0}),Sl=Vu("<=",function(p,c,_){return c<=_},function(p,c,_,w){return w.compare(c,_)<=0}),au=Vu(">=",function(p,c,_){return c>=_},function(p,c,_,w){return w.compare(c,_)>=0});class as{constructor(c,_,w,P,L){this.type=qn,this.number=c,this.locale=_,this.currency=w,this.minFractionDigits=P,this.maxFractionDigits=L}static parse(c,_){if(3!==c.length)return _.error("Expected two arguments.");const w=_.parse(c[1],1,Cn);if(!w)return null;const P=c[2];if("object"!=typeof P||Array.isArray(P))return _.error("NumberFormat options argument must be an object.");let L=null;if(P.locale&&(L=_.parse(P.locale,1,qn),!L))return null;let B=null;if(P.currency&&(B=_.parse(P.currency,1,qn),!B))return null;let H=null;if(P["min-fraction-digits"]&&(H=_.parse(P["min-fraction-digits"],1,Cn),!H))return null;let X=null;return P["max-fraction-digits"]&&(X=_.parse(P["max-fraction-digits"],1,Cn),!X)?null:new as(w,L,B,H,X)}evaluate(c){return new Intl.NumberFormat(this.locale?this.locale.evaluate(c):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(c):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(c):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(c):void 0}).format(this.number.evaluate(c))}eachChild(c){c(this.number),this.locale&&c(this.locale),this.currency&&c(this.currency),this.minFractionDigits&&c(this.minFractionDigits),this.maxFractionDigits&&c(this.maxFractionDigits)}outputDefined(){return!1}}class Ci{constructor(c){this.type=dn,this.sections=c}static parse(c,_){if(c.length<2)return _.error("Expected at least one argument.");const w=c[1];if(!Array.isArray(w)&&"object"==typeof w)return _.error("First argument must be an image or text section.");const P=[];let L=!1;for(let B=1;B<=c.length-1;++B){const H=c[B];if(L&&"object"==typeof H&&!Array.isArray(H)){L=!1;let X=null;if(H["font-scale"]&&(X=_.parse(H["font-scale"],1,Cn),!X))return null;let ne=null;if(H["text-font"]&&(ne=_.parse(H["text-font"],1,fi(qn)),!ne))return null;let ge=null;if(H["text-color"]&&(ge=_.parse(H["text-color"],1,Di),!ge))return null;const Ie=P[P.length-1];Ie.scale=X,Ie.font=ne,Ie.textColor=ge}else{const X=_.parse(c[B],1,wi);if(!X)return null;const ne=X.type.kind;if("string"!==ne&&"value"!==ne&&"null"!==ne&&"resolvedImage"!==ne)return _.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");L=!0,P.push({content:X,scale:null,font:null,textColor:null})}}return new Ci(P)}evaluate(c){return new Dt(this.sections.map(_=>{const w=_.content.evaluate(c);return Wt(w)===Lr?new Ot("",w,null,null,null):new Ot(li(w),null,_.scale?_.scale.evaluate(c):null,_.font?_.font.evaluate(c).join(","):null,_.textColor?_.textColor.evaluate(c):null)}))}eachChild(c){for(const _ of this.sections)c(_.content),_.scale&&c(_.scale),_.font&&c(_.font),_.textColor&&c(_.textColor)}outputDefined(){return!1}}class Su{constructor(c){this.type=Lr,this.input=c}static parse(c,_){if(2!==c.length)return _.error("Expected two arguments.");const w=_.parse(c[1],1,qn);return w?new Su(w):_.error("No image name provided.")}evaluate(c){const _=this.input.evaluate(c),w=Lt.fromString(_);return w&&c.availableImages&&(w.available=c.availableImages.indexOf(_)>-1),w}eachChild(c){c(this.input)}outputDefined(){return!1}}class lu{constructor(c){this.type=Cn,this.input=c}static parse(c,_){if(2!==c.length)return _.error(`Expected 1 argument, but found ${c.length-1} instead.`);const w=_.parse(c[1],1);return w?"array"!==w.type.kind&&"string"!==w.type.kind&&"value"!==w.type.kind?_.error(`Expected argument of type string or array, but found ${ar(w.type)} instead.`):new lu(w):null}evaluate(c){const _=this.input.evaluate(c);if("string"==typeof _||Array.isArray(_))return _.length;throw new xn(`Expected value to be of type string or array, but found ${ar(Wt(_))} instead.`)}eachChild(c){c(this.input)}outputDefined(){return!1}}const Ms={"==":Ka,"!=":ou,">":su,"<":Ds,">=":au,"<=":Sl,array:mi,at:Bd,boolean:mi,case:Uu,coalesce:tc,collator:qr,format:Ci,image:Su,in:Cl,"index-of":Kr,interpolate:Vs,"interpolate-hcl":Vs,"interpolate-lab":Vs,length:lu,let:ss,literal:Pn,match:Ss,number:mi,"number-format":as,object:mi,slice:zd,step:zn,string:mi,"to-boolean":ii,"to-color":ii,"to-number":ii,"to-string":ii,var:Jt,within:ms};function hl(p,[c,_,w,P]){c=c.evaluate(p),_=_.evaluate(p),w=w.evaluate(p);const L=P?P.evaluate(p):1,B=Qt(c,_,w,L);if(B)throw new xn(B);return new qe(c/255*L,_/255*L,w/255*L,L)}function Sc(p,c){return p in c}function ra(p,c){const _=c[p];return void 0===_?null:_}function gc(p){return{type:p}}function Gu(p){return{result:"success",value:p}}function ji(p){return{result:"error",value:p}}function Vr(p){return"data-driven"===p["property-type"]||"cross-faded-data-driven"===p["property-type"]}function mo(p){return!!p.expression&&p.expression.parameters.indexOf("zoom")>-1}function Ki(p){return!!p.expression&&p.expression.interpolated}function pr(p){return p instanceof Number?"number":p instanceof String?"string":p instanceof Boolean?"boolean":Array.isArray(p)?"array":null===p?"null":typeof p}function bo(p){return"object"==typeof p&&null!==p&&!Array.isArray(p)}function vi(p){return p}function Is(p,c){const _="color"===c.type,w=p.stops&&"object"==typeof p.stops[0][0],P=w||!(w||void 0!==p.property),L=p.type||(Ki(c)?"exponential":"interval");if(_||"padding"===c.type){const ne=_?qe.parse:vt.parse;(p=sn({},p)).stops&&(p.stops=p.stops.map(ge=>[ge[0],ne(ge[1])])),p.default=ne(p.default?p.default:c.default)}if(p.colorSpace&&"rgb"!==p.colorSpace&&!El[p.colorSpace])throw new Error(`Unknown color space: ${p.colorSpace}`);let B,H,X;if("exponential"===L)B=Ja;else if("interval"===L)B=Ca;else if("categorical"===L){B=cu,H=Object.create(null);for(const ne of p.stops)H[ne[0]]=ne[1];X=typeof p.stops[0][0]}else{if("identity"!==L)throw new Error(`Unknown function type "${L}"`);B=Ud}if(w){const ne={},ge=[];for(let Ze=0;Ze<p.stops.length;Ze++){const We=p.stops[Ze],St=We[0].zoom;void 0===ne[St]&&(ne[St]={zoom:St,type:p.type,property:p.property,default:p.default,stops:[]},ge.push(St)),ne[St].stops.push([We[0].value,We[1]])}const Ie=[];for(const Ze of ge)Ie.push([ne[Ze].zoom,Is(ne[Ze],c)]);const ze={name:"linear"};return{kind:"composite",interpolationType:ze,interpolationFactor:Vs.interpolationFactor.bind(void 0,ze),zoomStops:Ie.map(Ze=>Ze[0]),evaluate:({zoom:Ze},We)=>Ja({stops:Ie,base:p.base},c,Ze).evaluate(Ze,We)}}if(P){const ne="exponential"===L?{name:"exponential",base:void 0!==p.base?p.base:1}:null;return{kind:"camera",interpolationType:ne,interpolationFactor:Vs.interpolationFactor.bind(void 0,ne),zoomStops:p.stops.map(ge=>ge[0]),evaluate:({zoom:ge})=>B(p,c,ge,H,X)}}return{kind:"source",evaluate(ne,ge){const Ie=ge&&ge.properties?ge.properties[p.property]:void 0;return void 0===Ie?to(p.default,c.default):B(p,c,Ie,H,X)}}}function to(p,c,_){return void 0!==p?p:void 0!==c?c:void 0!==_?_:void 0}function cu(p,c,_,w,P){return to(typeof _===P?w[_]:void 0,p.default,c.default)}function Ca(p,c,_){if("number"!==pr(_))return to(p.default,c.default);const w=p.stops.length;if(1===w||_<=p.stops[0][0])return p.stops[0][1];if(_>=p.stops[w-1][0])return p.stops[w-1][1];const P=gn(p.stops.map(L=>L[0]),_);return p.stops[P][1]}function Ja(p,c,_){const w=void 0!==p.base?p.base:1;if("number"!==pr(_))return to(p.default,c.default);const P=p.stops.length;if(1===P||_<=p.stops[0][0])return p.stops[0][1];if(_>=p.stops[P-1][0])return p.stops[P-1][1];const L=gn(p.stops.map(ge=>ge[0]),_),B=function(ge,Ie,ze,Ze){const We=Ze-ze,St=ge-ze;return 0===We?0:1===Ie?St/We:(Math.pow(Ie,St)-1)/(Math.pow(Ie,We)-1)}(_,w,p.stops[L][0],p.stops[L+1][0]),H=p.stops[L][1],X=p.stops[L+1][1];let ne=vr[c.type]||vi;if(p.colorSpace&&"rgb"!==p.colorSpace){const ge=El[p.colorSpace];ne=(Ie,ze)=>ge.reverse(ge.interpolate(ge.forward(Ie),ge.forward(ze),B))}return"function"==typeof H.evaluate?{evaluate(...ge){const Ie=H.evaluate.apply(void 0,ge),ze=X.evaluate.apply(void 0,ge);if(void 0!==Ie&&void 0!==ze)return ne(Ie,ze,B)}}:ne(H,X,B)}function Ud(p,c,_){switch(c.type){case"color":_=qe.parse(_);break;case"formatted":_=Dt.fromString(_.toString());break;case"resolvedImage":_=Lt.fromString(_.toString());break;case"padding":_=vt.parse(_);break;default:pr(_)===c.type||"enum"===c.type&&c.values[_]||(_=void 0)}return to(_,p.default,c.default)}Wi.register(Ms,{error:[{kind:"error"},[qn],(p,[c])=>{throw new xn(c.evaluate(p))}],typeof:[qn,[wi],(p,[c])=>ar(Wt(c.evaluate(p)))],"to-rgba":[fi(Cn,4),[Di],(p,[c])=>c.evaluate(p).toArray()],rgb:[Di,[Cn,Cn,Cn],hl],rgba:[Di,[Cn,Cn,Cn,Cn],hl],has:{type:hi,overloads:[[[qn],(p,[c])=>Sc(c.evaluate(p),p.properties())],[[qn,Mr],(p,[c,_])=>Sc(c.evaluate(p),_.evaluate(p))]]},get:{type:wi,overloads:[[[qn],(p,[c])=>ra(c.evaluate(p),p.properties())],[[qn,Mr],(p,[c,_])=>ra(c.evaluate(p),_.evaluate(p))]]},"feature-state":[wi,[qn],(p,[c])=>ra(c.evaluate(p),p.featureState||{})],properties:[Mr,[],p=>p.properties()],"geometry-type":[qn,[],p=>p.geometryType()],id:[wi,[],p=>p.id()],zoom:[Cn,[],p=>p.globals.zoom],"heatmap-density":[Cn,[],p=>p.globals.heatmapDensity||0],"line-progress":[Cn,[],p=>p.globals.lineProgress||0],accumulated:[wi,[],p=>void 0===p.globals.accumulated?null:p.globals.accumulated],"+":[Cn,gc(Cn),(p,c)=>{let _=0;for(const w of c)_+=w.evaluate(p);return _}],"*":[Cn,gc(Cn),(p,c)=>{let _=1;for(const w of c)_*=w.evaluate(p);return _}],"-":{type:Cn,overloads:[[[Cn,Cn],(p,[c,_])=>c.evaluate(p)-_.evaluate(p)],[[Cn],(p,[c])=>-c.evaluate(p)]]},"/":[Cn,[Cn,Cn],(p,[c,_])=>c.evaluate(p)/_.evaluate(p)],"%":[Cn,[Cn,Cn],(p,[c,_])=>c.evaluate(p)%_.evaluate(p)],ln2:[Cn,[],()=>Math.LN2],pi:[Cn,[],()=>Math.PI],e:[Cn,[],()=>Math.E],"^":[Cn,[Cn,Cn],(p,[c,_])=>Math.pow(c.evaluate(p),_.evaluate(p))],sqrt:[Cn,[Cn],(p,[c])=>Math.sqrt(c.evaluate(p))],log10:[Cn,[Cn],(p,[c])=>Math.log(c.evaluate(p))/Math.LN10],ln:[Cn,[Cn],(p,[c])=>Math.log(c.evaluate(p))],log2:[Cn,[Cn],(p,[c])=>Math.log(c.evaluate(p))/Math.LN2],sin:[Cn,[Cn],(p,[c])=>Math.sin(c.evaluate(p))],cos:[Cn,[Cn],(p,[c])=>Math.cos(c.evaluate(p))],tan:[Cn,[Cn],(p,[c])=>Math.tan(c.evaluate(p))],asin:[Cn,[Cn],(p,[c])=>Math.asin(c.evaluate(p))],acos:[Cn,[Cn],(p,[c])=>Math.acos(c.evaluate(p))],atan:[Cn,[Cn],(p,[c])=>Math.atan(c.evaluate(p))],min:[Cn,gc(Cn),(p,c)=>Math.min(...c.map(_=>_.evaluate(p)))],max:[Cn,gc(Cn),(p,c)=>Math.max(...c.map(_=>_.evaluate(p)))],abs:[Cn,[Cn],(p,[c])=>Math.abs(c.evaluate(p))],round:[Cn,[Cn],(p,[c])=>{const _=c.evaluate(p);return _<0?-Math.round(-_):Math.round(_)}],floor:[Cn,[Cn],(p,[c])=>Math.floor(c.evaluate(p))],ceil:[Cn,[Cn],(p,[c])=>Math.ceil(c.evaluate(p))],"filter-==":[hi,[qn,wi],(p,[c,_])=>p.properties()[c.value]===_.value],"filter-id-==":[hi,[wi],(p,[c])=>p.id()===c.value],"filter-type-==":[hi,[qn],(p,[c])=>p.geometryType()===c.value],"filter-<":[hi,[qn,wi],(p,[c,_])=>{const w=p.properties()[c.value],P=_.value;return typeof w==typeof P&&w<P}],"filter-id-<":[hi,[wi],(p,[c])=>{const _=p.id(),w=c.value;return typeof _==typeof w&&_<w}],"filter->":[hi,[qn,wi],(p,[c,_])=>{const w=p.properties()[c.value],P=_.value;return typeof w==typeof P&&w>P}],"filter-id->":[hi,[wi],(p,[c])=>{const _=p.id(),w=c.value;return typeof _==typeof w&&_>w}],"filter-<=":[hi,[qn,wi],(p,[c,_])=>{const w=p.properties()[c.value],P=_.value;return typeof w==typeof P&&w<=P}],"filter-id-<=":[hi,[wi],(p,[c])=>{const _=p.id(),w=c.value;return typeof _==typeof w&&_<=w}],"filter->=":[hi,[qn,wi],(p,[c,_])=>{const w=p.properties()[c.value],P=_.value;return typeof w==typeof P&&w>=P}],"filter-id->=":[hi,[wi],(p,[c])=>{const _=p.id(),w=c.value;return typeof _==typeof w&&_>=w}],"filter-has":[hi,[wi],(p,[c])=>c.value in p.properties()],"filter-has-id":[hi,[],p=>null!==p.id()&&void 0!==p.id()],"filter-type-in":[hi,[fi(qn)],(p,[c])=>c.value.indexOf(p.geometryType())>=0],"filter-id-in":[hi,[fi(wi)],(p,[c])=>c.value.indexOf(p.id())>=0],"filter-in-small":[hi,[qn,fi(wi)],(p,[c,_])=>_.value.indexOf(p.properties()[c.value])>=0],"filter-in-large":[hi,[qn,fi(wi)],(p,[c,_])=>function(w,P,L,B){for(;L<=B;){const H=L+B>>1;if(P[H]===w)return!0;P[H]>w?B=H-1:L=H+1}return!1}(p.properties()[c.value],_.value,0,_.value.length-1)],all:{type:hi,overloads:[[[hi,hi],(p,[c,_])=>c.evaluate(p)&&_.evaluate(p)],[gc(hi),(p,c)=>{for(const _ of c)if(!_.evaluate(p))return!1;return!0}]]},any:{type:hi,overloads:[[[hi,hi],(p,[c,_])=>c.evaluate(p)||_.evaluate(p)],[gc(hi),(p,c)=>{for(const _ of c)if(_.evaluate(p))return!0;return!1}]]},"!":[hi,[hi],(p,[c])=>!c.evaluate(p)],"is-supported-script":[hi,[qn],(p,[c])=>{const _=p.globals&&p.globals.isSupportedScript;return!_||_(c.evaluate(p))}],upcase:[qn,[qn],(p,[c])=>c.evaluate(p).toUpperCase()],downcase:[qn,[qn],(p,[c])=>c.evaluate(p).toLowerCase()],concat:[qn,gc(wi),(p,c)=>c.map(_=>li(_.evaluate(p))).join("")],"resolved-locale":[qn,[nr],(p,[c])=>c.evaluate(p).resolvedLocale()]});class Dl{constructor(c,_){var w;this.expression=c,this._warningHistory={},this._evaluator=new Mi,this._defaultValue=_?"color"===(w=_).type&&bo(w.default)?new qe(0,0,0,0):"color"===w.type?qe.parse(w.default)||null:"padding"===w.type?vt.parse(w.default)||null:void 0===w.default?null:w.default:null,this._enumValues=_&&"enum"===_.type?_.values:null}evaluateWithoutErrorHandling(c,_,w,P,L,B){return this._evaluator.globals=c,this._evaluator.feature=_,this._evaluator.featureState=w,this._evaluator.canonical=P,this._evaluator.availableImages=L||null,this._evaluator.formattedSection=B,this.expression.evaluate(this._evaluator)}evaluate(c,_,w,P,L,B){this._evaluator.globals=c,this._evaluator.feature=_||null,this._evaluator.featureState=w||null,this._evaluator.canonical=P,this._evaluator.availableImages=L||null,this._evaluator.formattedSection=B||null;try{const H=this.expression.evaluate(this._evaluator);if(null==H||"number"==typeof H&&H!=H)return this._defaultValue;if(this._enumValues&&!(H in this._enumValues))throw new xn(`Expected value to be one of ${Object.keys(this._enumValues).map(X=>JSON.stringify(X)).join(", ")}, but found ${JSON.stringify(H)} instead.`);return H}catch(H){return this._warningHistory[H.message]||(this._warningHistory[H.message]=!0,typeof console<"u"&&console.warn(H.message)),this._defaultValue}}}function Yn(p){return Array.isArray(p)&&p.length>0&&"string"==typeof p[0]&&p[0]in Ms}function oa(p,c){const _=new ft(Ms,[],c?function(P){const L={color:Di,string:qn,number:Cn,enum:qn,boolean:hi,formatted:dn,padding:wa,resolvedImage:Lr};return"array"===P.type?fi(L[P.value]||wi,P.length):L[P.type]}(c):void 0),w=_.parse(p,void 0,void 0,void 0,c&&"string"===c.type?{typeAnnotation:"coerce"}:void 0);return w?Gu(new Dl(w,c)):ji(_.errors)}class Dc{constructor(c,_){this.kind=c,this._styleExpression=_,this.isStateDependent="constant"!==c&&!Ji(_.expression)}evaluateWithoutErrorHandling(c,_,w,P,L,B){return this._styleExpression.evaluateWithoutErrorHandling(c,_,w,P,L,B)}evaluate(c,_,w,P,L,B){return this._styleExpression.evaluate(c,_,w,P,L,B)}}class Ml{constructor(c,_,w,P){this.kind=c,this.zoomStops=w,this._styleExpression=_,this.isStateDependent="camera"!==c&&!Ji(_.expression),this.interpolationType=P}evaluateWithoutErrorHandling(c,_,w,P,L,B){return this._styleExpression.evaluateWithoutErrorHandling(c,_,w,P,L,B)}evaluate(c,_,w,P,L,B){return this._styleExpression.evaluate(c,_,w,P,L,B)}interpolationFactor(c,_,w){return this.interpolationType?Vs.interpolationFactor(this.interpolationType,c,_,w):0}}function Fa(p,c){const _=oa(p,c);if("error"===_.result)return _;const w=_.value.expression,P=ir(w);if(!P&&!Vr(c))return ji([new Ti("","data expressions not supported")]);const L=ht(w,["zoom"]);if(!L&&!mo(c))return ji([new Ti("","zoom expressions not supported")]);const B=$u(w);return B||L?B instanceof Ti?ji([B]):B instanceof Vs&&!Ki(c)?ji([new Ti("",'"interpolate" expressions cannot be used with this property')]):Gu(B?new Ml(P?"camera":"composite",_.value,B.labels,B instanceof Vs?B.interpolation:void 0):new Dc(P?"constant":"source",_.value)):ji([new Ti("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Gs{constructor(c,_){this._parameters=c,this._specification=_,sn(this,Is(this._parameters,this._specification))}static deserialize(c){return new Gs(c._parameters,c._specification)}static serialize(c){return{_parameters:c._parameters,_specification:c._specification}}}function $u(p){let c=null;if(p instanceof ss)c=$u(p.result);else if(p instanceof tc){for(const _ of p.args)if(c=$u(_),c)break}else(p instanceof zn||p instanceof Vs)&&p.input instanceof Wi&&"zoom"===p.input.name&&(c=p);return c instanceof Ti||p.eachChild(_=>{const w=$u(_);w instanceof Ti?c=w:!c&&w?c=new Ti("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):c&&w&&c!==w&&(c=new Ti("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),c}function go(p){const c=p.key,_=p.value,w=p.valueSpec||{},P=p.objectElementValidators||{},L=p.style,B=p.styleSpec;let H=[];const X=pr(_);if("object"!==X)return[new jt(c,_,`object expected, ${X} found`)];for(const ne in _){const ge=ne.split(".")[0],Ie=w[ge]||w["*"];let ze;if(P[ge])ze=P[ge];else if(w[ge])ze=aa;else if(P["*"])ze=P["*"];else{if(!w["*"]){H.push(new jt(c,_[ne],`unknown property "${ne}"`));continue}ze=aa}H=H.concat(ze({key:(c&&`${c}.`)+ne,value:_[ne],valueSpec:Ie,style:L,styleSpec:B,object:_,objectKey:ne},_))}for(const ne in w)P[ne]||w[ne].required&&void 0===w[ne].default&&void 0===_[ne]&&H.push(new jt(c,_,`missing required property "${ne}"`));return H}function Mc(p){const c=p.value,_=p.valueSpec,w=p.style,P=p.styleSpec,L=p.key,B=p.arrayElementValidator||aa;if("array"!==pr(c))return[new jt(L,c,`array expected, ${pr(c)} found`)];if(_.length&&c.length!==_.length)return[new jt(L,c,`array length ${_.length} expected, length ${c.length} found`)];if(_["min-length"]&&c.length<_["min-length"])return[new jt(L,c,`array length at least ${_["min-length"]} expected, length ${c.length} found`)];let H={type:_.value,values:_.values};P.$version<7&&(H.function=_.function),"object"===pr(_.value)&&(H=_.value);let X=[];for(let ne=0;ne<c.length;ne++)X=X.concat(B({array:c,arrayIndex:ne,value:c[ne],valueSpec:H,style:w,styleSpec:P,key:`${L}[${ne}]`}));return X}function _n(p){const c=p.key,_=p.value,w=p.valueSpec;let P=pr(_);return"number"===P&&_!=_&&(P="NaN"),"number"!==P?[new jt(c,_,`number expected, ${P} found`)]:"minimum"in w&&_<w.minimum?[new jt(c,_,`${_} is less than the minimum value ${w.minimum}`)]:"maximum"in w&&_>w.maximum?[new jt(c,_,`${_} is greater than the maximum value ${w.maximum}`)]:[]}function Pr(p){const c=p.valueSpec,_=Fn(p.value.type);let w,P,L,B={};const H="categorical"!==_&&void 0===p.value.property,X=!H,ne="array"===pr(p.value.stops)&&"array"===pr(p.value.stops[0])&&"object"===pr(p.value.stops[0][0]),ge=go({key:p.key,value:p.value,valueSpec:p.styleSpec.function,style:p.style,styleSpec:p.styleSpec,objectElementValidators:{stops:function(Ze){if("identity"===_)return[new jt(Ze.key,Ze.value,'identity function may not have a "stops" property')];let We=[];const St=Ze.value;return We=We.concat(Mc({key:Ze.key,value:St,valueSpec:Ze.valueSpec,style:Ze.style,styleSpec:Ze.styleSpec,arrayElementValidator:Ie})),"array"===pr(St)&&0===St.length&&We.push(new jt(Ze.key,St,"array must have at least one stop")),We},default:function(Ze){return aa({key:Ze.key,value:Ze.value,valueSpec:c,style:Ze.style,styleSpec:Ze.styleSpec})}}});return"identity"===_&&H&&ge.push(new jt(p.key,p.value,'missing required property "property"')),"identity"===_||p.value.stops||ge.push(new jt(p.key,p.value,'missing required property "stops"')),"exponential"===_&&p.valueSpec.expression&&!Ki(p.valueSpec)&&ge.push(new jt(p.key,p.value,"exponential functions not supported")),p.styleSpec.$version>=8&&(X&&!Vr(p.valueSpec)?ge.push(new jt(p.key,p.value,"property functions not supported")):H&&!mo(p.valueSpec)&&ge.push(new jt(p.key,p.value,"zoom functions not supported"))),"categorical"!==_&&!ne||void 0!==p.value.property||ge.push(new jt(p.key,p.value,'"property" property is required')),ge;function Ie(Ze){let We=[];const St=Ze.value,Et=Ze.key;if("array"!==pr(St))return[new jt(Et,St,`array expected, ${pr(St)} found`)];if(2!==St.length)return[new jt(Et,St,`array length 2 expected, length ${St.length} found`)];if(ne){if("object"!==pr(St[0]))return[new jt(Et,St,`object expected, ${pr(St[0])} found`)];if(void 0===St[0].zoom)return[new jt(Et,St,"object stop key must have zoom")];if(void 0===St[0].value)return[new jt(Et,St,"object stop key must have value")];if(L&&L>Fn(St[0].zoom))return[new jt(Et,St[0].zoom,"stop zoom values must appear in ascending order")];Fn(St[0].zoom)!==L&&(L=Fn(St[0].zoom),P=void 0,B={}),We=We.concat(go({key:`${Et}[0]`,value:St[0],valueSpec:{zoom:{}},style:Ze.style,styleSpec:Ze.styleSpec,objectElementValidators:{zoom:_n,value:ze}}))}else We=We.concat(ze({key:`${Et}[0]`,value:St[0],valueSpec:{},style:Ze.style,styleSpec:Ze.styleSpec},St));return Yn(hr(St[1]))?We.concat([new jt(`${Et}[1]`,St[1],"expressions are not allowed in function stops.")]):We.concat(aa({key:`${Et}[1]`,value:St[1],valueSpec:c,style:Ze.style,styleSpec:Ze.styleSpec}))}function ze(Ze,We){const St=pr(Ze.value),Et=Fn(Ze.value),Ht=null!==Ze.value?Ze.value:We;if(w){if(St!==w)return[new jt(Ze.key,Ht,`${St} stop domain type must match previous stop domain type ${w}`)]}else w=St;if("number"!==St&&"string"!==St&&"boolean"!==St)return[new jt(Ze.key,Ht,"stop domain value must be a number, string, or boolean")];if("number"!==St&&"categorical"!==_){let nn=`number expected, ${St} found`;return Vr(c)&&void 0===_&&(nn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new jt(Ze.key,Ht,nn)]}return"categorical"!==_||"number"!==St||isFinite(Et)&&Math.floor(Et)===Et?"categorical"!==_&&"number"===St&&void 0!==P&&Et<P?[new jt(Ze.key,Ht,"stop domain values must appear in ascending order")]:(P=Et,"categorical"===_&&Et in B?[new jt(Ze.key,Ht,"stop domain values must be unique")]:(B[Et]=!0,[])):[new jt(Ze.key,Ht,`integer expected, found ${Et}`)]}}function $s(p){const c=("property"===p.expressionContext?Fa:oa)(hr(p.value),p.valueSpec);if("error"===c.result)return c.value.map(w=>new jt(`${p.key}${w.key}`,p.value,w.message));const _=c.value.expression||c.value._styleExpression.expression;if("property"===p.expressionContext&&"text-font"===p.propertyKey&&!_.outputDefined())return[new jt(p.key,p.value,`Invalid data expression for "${p.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===p.expressionContext&&"layout"===p.propertyType&&!Ji(_))return[new jt(p.key,p.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===p.expressionContext&&!Ji(_))return[new jt(p.key,p.value,'"feature-state" data expressions are not supported with filters.')];if(p.expressionContext&&0===p.expressionContext.indexOf("cluster")){if(!ht(_,["zoom","feature-state"]))return[new jt(p.key,p.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===p.expressionContext&&!ir(_))return[new jt(p.key,p.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Na(p){const c=p.key,_=p.value,w=p.valueSpec,P=[];return Array.isArray(w.values)?-1===w.values.indexOf(Fn(_))&&P.push(new jt(c,_,`expected one of [${w.values.join(", ")}], ${JSON.stringify(_)} found`)):-1===Object.keys(w.values).indexOf(Fn(_))&&P.push(new jt(c,_,`expected one of [${Object.keys(w.values).join(", ")}], ${JSON.stringify(_)} found`)),P}function ao(p){if(!0===p||!1===p)return!0;if(!Array.isArray(p)||0===p.length)return!1;switch(p[0]){case"has":return p.length>=2&&"$id"!==p[1]&&"$type"!==p[1];case"in":return p.length>=3&&("string"!=typeof p[1]||Array.isArray(p[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==p.length||Array.isArray(p[1])||Array.isArray(p[2]);case"any":case"all":for(const c of p.slice(1))if(!ao(c)&&"boolean"!=typeof c)return!1;return!0;default:return!0}}const Ic={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ba(p){if(null==p)return{filter:()=>!0,needGeometry:!1};ao(p)||(p=nc(p));const c=oa(p,Ic);if("error"===c.result)throw new Error(c.value.map(_=>`${_.key}: ${_.message}`).join(", "));return{filter:(_,w,P)=>c.value.evaluate(_,w,{},P),needGeometry:xd(p)}}function xo(p,c){return p<c?-1:p>c?1:0}function xd(p){if(!Array.isArray(p))return!1;if("within"===p[0])return!0;for(let c=1;c<p.length;c++)if(xd(p[c]))return!0;return!1}function nc(p){if(!p)return!0;const c=p[0];return p.length<=1?"any"!==c:"=="===c?Xs(p[1],p[2],"=="):"!="===c?gs(Xs(p[1],p[2],"==")):"<"===c||">"===c||"<="===c||">="===c?Xs(p[1],p[2],c):"any"===c?(_=p.slice(1),["any"].concat(_.map(nc))):"all"===c?["all"].concat(p.slice(1).map(nc)):"none"===c?["all"].concat(p.slice(1).map(nc).map(gs)):"in"===c?ic(p[1],p.slice(2)):"!in"===c?gs(ic(p[1],p.slice(2))):"has"===c?sa(p[1]):"!has"===c?gs(sa(p[1])):"within"!==c||p;var _}function Xs(p,c,_){switch(p){case"$type":return[`filter-type-${_}`,c];case"$id":return[`filter-id-${_}`,c];default:return[`filter-${_}`,p,c]}}function ic(p,c){if(0===c.length)return!1;switch(p){case"$type":return["filter-type-in",["literal",c]];case"$id":return["filter-id-in",["literal",c]];default:return c.length>200&&!c.some(_=>typeof _!=typeof c[0])?["filter-in-large",p,["literal",c.sort(xo)]]:["filter-in-small",p,["literal",c]]}}function sa(p){switch(p){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",p]}}function gs(p){return["!",p]}function Qo(p){return ao(hr(p.value))?$s(sn({},p,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Vd(p)}function Vd(p){const c=p.value,_=p.key;if("array"!==pr(c))return[new jt(_,c,`array expected, ${pr(c)} found`)];const w=p.styleSpec;let P,L=[];if(c.length<1)return[new jt(_,c,"filter array must have at least 1 element")];switch(L=L.concat(Na({key:`${_}[0]`,value:c[0],valueSpec:w.filter_operator,style:p.style,styleSpec:p.styleSpec})),Fn(c[0])){case"<":case"<=":case">":case">=":c.length>=2&&"$type"===Fn(c[1])&&L.push(new jt(_,c,`"$type" cannot be use with operator "${c[0]}"`));case"==":case"!=":3!==c.length&&L.push(new jt(_,c,`filter array for operator "${c[0]}" must have 3 elements`));case"in":case"!in":c.length>=2&&(P=pr(c[1]),"string"!==P&&L.push(new jt(`${_}[1]`,c[1],`string expected, ${P} found`)));for(let B=2;B<c.length;B++)P=pr(c[B]),"$type"===Fn(c[1])?L=L.concat(Na({key:`${_}[${B}]`,value:c[B],valueSpec:w.geometry_type,style:p.style,styleSpec:p.styleSpec})):"string"!==P&&"number"!==P&&"boolean"!==P&&L.push(new jt(`${_}[${B}]`,c[B],`string, number, or boolean expected, ${P} found`));break;case"any":case"all":case"none":for(let B=1;B<c.length;B++)L=L.concat(Vd({key:`${_}[${B}]`,value:c[B],style:p.style,styleSpec:p.styleSpec}));break;case"has":case"!has":P=pr(c[1]),2!==c.length?L.push(new jt(_,c,`filter array for "${c[0]}" operator must have 2 elements`)):"string"!==P&&L.push(new jt(`${_}[1]`,c[1],`string expected, ${P} found`));break;case"within":P=pr(c[1]),2!==c.length?L.push(new jt(_,c,`filter array for "${c[0]}" operator must have 2 elements`)):"object"!==P&&L.push(new jt(`${_}[1]`,c[1],`object expected, ${P} found`))}return L}function Qa(p,c){const _=p.key,w=p.style,P=p.styleSpec,L=p.value,B=p.objectKey,H=P[`${c}_${p.layerType}`];if(!H)return[];const X=B.match(/^(.*)-transition$/);if("paint"===c&&X&&H[X[1]]&&H[X[1]].transition)return aa({key:_,value:L,valueSpec:P.transition,style:w,styleSpec:P});const ne=p.valueSpec||H[B];if(!ne)return[new jt(_,L,`unknown property "${B}"`)];let ge;if("string"===pr(L)&&Vr(ne)&&!ne.tokens&&(ge=/^{([^}]+)}$/.exec(L)))return[new jt(_,L,`"${B}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ge[1])} }\`.`)];const Ie=[];return"symbol"===p.layerType&&("text-field"===B&&w&&!w.glyphs&&Ie.push(new jt(_,L,'use of "text-field" requires a style "glyphs" property')),"text-font"===B&&bo(hr(L))&&"identity"===Fn(L.type)&&Ie.push(new jt(_,L,'"text-font" does not support identity functions'))),Ie.concat(aa({key:p.key,value:L,valueSpec:ne,style:w,styleSpec:P,expressionContext:"property",propertyType:c,propertyKey:B}))}function za(p){return Qa(p,"paint")}function wh(p){return Qa(p,"layout")}function Gd(p){let c=[];const _=p.value,w=p.key,P=p.style,L=p.styleSpec;_.type||_.ref||c.push(new jt(w,_,'either "type" or "ref" is required'));let B=Fn(_.type);const H=Fn(_.ref);if(_.id){const X=Fn(_.id);for(let ne=0;ne<p.arrayIndex;ne++){const ge=P.layers[ne];Fn(ge.id)===X&&c.push(new jt(w,_.id,`duplicate layer id "${_.id}", previously used at line ${ge.id.__line__}`))}}if("ref"in _){let X;["type","source","source-layer","filter","layout"].forEach(ne=>{ne in _&&c.push(new jt(w,_[ne],`"${ne}" is prohibited for ref layers`))}),P.layers.forEach(ne=>{Fn(ne.id)===H&&(X=ne)}),X?X.ref?c.push(new jt(w,_.ref,"ref cannot reference another ref layer")):B=Fn(X.type):c.push(new jt(w,_.ref,`ref layer "${H}" not found`))}else if("background"!==B)if(_.source){const X=P.sources&&P.sources[_.source],ne=X&&Fn(X.type);X?"vector"===ne&&"raster"===B?c.push(new jt(w,_.source,`layer "${_.id}" requires a raster source`)):"raster"===ne&&"raster"!==B?c.push(new jt(w,_.source,`layer "${_.id}" requires a vector source`)):"vector"!==ne||_["source-layer"]?"raster-dem"===ne&&"hillshade"!==B?c.push(new jt(w,_.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==B||!_.paint||!_.paint["line-gradient"]||"geojson"===ne&&X.lineMetrics||c.push(new jt(w,_,`layer "${_.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):c.push(new jt(w,_,`layer "${_.id}" must specify a "source-layer"`)):c.push(new jt(w,_.source,`source "${_.source}" not found`))}else c.push(new jt(w,_,'missing required property "source"'));return c=c.concat(go({key:w,value:_,valueSpec:L.layer,style:p.style,styleSpec:p.styleSpec,objectElementValidators:{"*":()=>[],type:()=>aa({key:`${w}.type`,value:_.type,valueSpec:L.layer.type,style:p.style,styleSpec:p.styleSpec,object:_,objectKey:"type"}),filter:Qo,layout:X=>go({layer:_,key:X.key,value:X.value,style:X.style,styleSpec:X.styleSpec,objectElementValidators:{"*":ne=>wh(sn({layerType:B},ne))}}),paint:X=>go({layer:_,key:X.key,value:X.value,style:X.style,styleSpec:X.styleSpec,objectElementValidators:{"*":ne=>za(sn({layerType:B},ne))}})}})),c}function $l(p){const c=p.value,_=p.key,w=pr(c);return"string"!==w?[new jt(_,c,`string expected, ${w} found`)]:[]}const Il={promoteId:function({key:p,value:c}){if("string"===pr(c))return $l({key:p,value:c});{const _=[];for(const w in c)_.push(...$l({key:`${p}.${w}`,value:c[w]}));return _}}};function _s(p){const c=p.value,_=p.key,w=p.styleSpec,P=p.style;if(!c.type)return[new jt(_,c,'"type" is required')];const L=Fn(c.type);let B;switch(L){case"vector":case"raster":case"raster-dem":return B=go({key:_,value:c,valueSpec:w[`source_${L.replace("-","_")}`],style:p.style,styleSpec:w,objectElementValidators:Il}),B;case"geojson":if(B=go({key:_,value:c,valueSpec:w.source_geojson,style:P,styleSpec:w,objectElementValidators:Il}),c.cluster)for(const H in c.clusterProperties){const[X,ne]=c.clusterProperties[H],ge="string"==typeof X?[X,["accumulated"],["get",H]]:X;B.push(...$s({key:`${_}.${H}.map`,value:ne,expressionContext:"cluster-map"})),B.push(...$s({key:`${_}.${H}.reduce`,value:ge,expressionContext:"cluster-reduce"}))}return B;case"video":return go({key:_,value:c,valueSpec:w.source_video,style:P,styleSpec:w});case"image":return go({key:_,value:c,valueSpec:w.source_image,style:P,styleSpec:w});case"canvas":return[new jt(_,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Na({key:`${_}.type`,value:c.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:P,styleSpec:w})}}function rc(p){const c=p.value,_=p.styleSpec,w=_.light,P=p.style;let L=[];const B=pr(c);if(void 0===c)return L;if("object"!==B)return L=L.concat([new jt("light",c,`object expected, ${B} found`)]),L;for(const H in c){const X=H.match(/^(.*)-transition$/);L=L.concat(X&&w[X[1]]&&w[X[1]].transition?aa({key:H,value:c[H],valueSpec:_.transition,style:P,styleSpec:_}):w[H]?aa({key:H,value:c[H],valueSpec:w[H],style:P,styleSpec:_}):[new jt(H,c[H],`unknown property "${H}"`)])}return L}function _o(p){const c=p.value,_=p.styleSpec,w=_.terrain,P=p.style;let L=[];const B=pr(c);if(void 0===c)return L;if("object"!==B)return L=L.concat([new jt("terrain",c,`object expected, ${B} found`)]),L;for(const H in c)L=L.concat(w[H]?aa({key:H,value:c[H],valueSpec:w[H],style:P,styleSpec:_}):[new jt(H,c[H],`unknown property "${H}"`)]);return L}const Ua={"*":()=>[],array:Mc,boolean:function(p){const c=p.value,_=p.key,w=pr(c);return"boolean"!==w?[new jt(_,c,`boolean expected, ${w} found`)]:[]},number:_n,color:function(p){const c=p.key,_=p.value,w=pr(_);return"string"!==w?[new jt(c,_,`color expected, ${w} found`)]:null===zs(_)?[new jt(c,_,`color expected, "${_}" found`)]:[]},constants:In,enum:Na,filter:Qo,function:Pr,layer:Gd,object:go,source:_s,light:rc,terrain:_o,string:$l,formatted:function(p){return 0===$l(p).length?[]:$s(p)},resolvedImage:function(p){return 0===$l(p).length?[]:$s(p)},padding:function(p){const c=p.key,_=p.value;if("array"===pr(_)){if(_.length<1||_.length>4)return[new jt(c,_,`padding requires 1 to 4 values; ${_.length} values found`)];const w={type:"number"};let P=[];for(let L=0;L<_.length;L++)P=P.concat(aa({key:`${c}[${L}]`,value:_[L],valueSpec:w}));return P}return _n({key:c,value:_,valueSpec:{}})}};function aa(p){const c=p.value,_=p.valueSpec,w=p.styleSpec;return _.expression&&bo(Fn(c))?Pr(p):_.expression&&Yn(hr(c))?$s(p):_.type&&Ua[_.type]?Ua[_.type](p):go(sn({},p,{valueSpec:_.type?w[_.type]:_}))}function $d(p){const c=p.value,_=p.key,w=$l(p);return w.length||(-1===c.indexOf("{fontstack}")&&w.push(new jt(_,c,'"glyphs" url must include a "{fontstack}" token')),-1===c.indexOf("{range}")&&w.push(new jt(_,c,'"glyphs" url must include a "{range}" token'))),w}function el(p,c=mt){let _=[];return _=_.concat(aa({key:"",value:p,valueSpec:c.$root,styleSpec:c,style:p,objectElementValidators:{glyphs:$d,"*":()=>[]}})),p.constants&&(_=_.concat(In({key:"constants",value:p.constants,style:p,styleSpec:c}))),_c(_)}function _c(p){return[].concat(p).sort((c,_)=>c.line-_.line)}function va(p){return function(...c){return _c(p.apply(this,c))}}el.source=va(_s),el.light=va(rc),el.terrain=va(_o),el.layer=va(Gd),el.filter=va(Qo),el.paintProperty=va(za),el.layoutProperty=va(wh);const vs=el,Va=vs.light,la=vs.paintProperty,Eh=vs.layoutProperty;function Hl(p,c){let _=!1;if(c&&c.length)for(const w of c)p.fire(new ln(new Error(w.message))),_=!0;return _}class bs{constructor(c,_,w){const P=this.cells=[];if(c instanceof ArrayBuffer){this.arrayBuffer=c;const B=new Int32Array(this.arrayBuffer);c=B[0],this.d=(_=B[1])+2*(w=B[2]);for(let X=0;X<this.d*this.d;X++){const ne=B[3+X],ge=B[3+X+1];P.push(ne===ge?null:B.subarray(ne,ge))}const H=B[3+P.length+1];this.keys=B.subarray(B[3+P.length],H),this.bboxes=B.subarray(H),this.insert=this._insertReadonly}else{this.d=_+2*w;for(let B=0;B<this.d*this.d;B++)P.push([]);this.keys=[],this.bboxes=[]}this.n=_,this.extent=c,this.padding=w,this.scale=_/c,this.uid=0;const L=w/_*c;this.min=-L,this.max=c+L}insert(c,_,w,P,L){this._forEachCell(_,w,P,L,this._insertCell,this.uid++,void 0,void 0),this.keys.push(c),this.bboxes.push(_),this.bboxes.push(w),this.bboxes.push(P),this.bboxes.push(L)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(c,_,w,P,L,B){this.cells[L].push(B)}query(c,_,w,P,L){const B=this.min,H=this.max;if(c<=B&&_<=B&&H<=w&&H<=P&&!L)return Array.prototype.slice.call(this.keys);{const X=[];return this._forEachCell(c,_,w,P,this._queryCell,X,{},L),X}}_queryCell(c,_,w,P,L,B,H,X){const ne=this.cells[L];if(null!==ne){const ge=this.keys,Ie=this.bboxes;for(let ze=0;ze<ne.length;ze++){const Ze=ne[ze];if(void 0===H[Ze]){const We=4*Ze;(X?X(Ie[We+0],Ie[We+1],Ie[We+2],Ie[We+3]):c<=Ie[We+2]&&_<=Ie[We+3]&&w>=Ie[We+0]&&P>=Ie[We+1])?(H[Ze]=!0,B.push(ge[Ze])):H[Ze]=!1}}}}_forEachCell(c,_,w,P,L,B,H,X){const ne=this._convertToCellCoord(c),ge=this._convertToCellCoord(_),Ie=this._convertToCellCoord(w),ze=this._convertToCellCoord(P);for(let Ze=ne;Ze<=Ie;Ze++)for(let We=ge;We<=ze;We++){const St=this.d*We+Ze;if((!X||X(this._convertFromCellCoord(Ze),this._convertFromCellCoord(We),this._convertFromCellCoord(Ze+1),this._convertFromCellCoord(We+1)))&&L.call(this,c,_,w,P,St,B,H,X))return}}_convertFromCellCoord(c){return(c-this.padding)/this.scale}_convertToCellCoord(c){return Math.max(0,Math.min(this.d-1,Math.floor(c*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const c=this.cells,_=3+this.cells.length+1+1;let w=0;for(let B=0;B<this.cells.length;B++)w+=this.cells[B].length;const P=new Int32Array(_+w+this.keys.length+this.bboxes.length);P[0]=this.extent,P[1]=this.n,P[2]=this.padding;let L=_;for(let B=0;B<c.length;B++){const H=c[B];P[3+B]=L,P.set(H,L),L+=H.length}return P[3+c.length]=L,P.set(this.keys,L),L+=this.keys.length,P[3+c.length+1]=L,P.set(this.bboxes,L),L+=this.bboxes.length,P.buffer}static serialize(c,_){const w=c.toArrayBuffer();return _&&_.push(w),{buffer:w}}static deserialize(c){return new bs(c.buffer)}}const io={};function wn(p,c,_={}){if(io[p])throw new Error(`${p} is already registered.`);Object.defineProperty(c,"_classRegistryKey",{value:p,writeable:!1}),io[p]={klass:c,omit:_.omit||[],shallow:_.shallow||[]}}wn("Object",Object),wn("TransferableGridIndex",bs),wn("Color",qe),wn("Error",Error),wn("AJAXError",hn),wn("ResolvedImage",Lt),wn("StylePropertyFunction",Gs),wn("StyleExpression",Dl,{omit:["_evaluator"]}),wn("ZoomDependentExpression",Ml),wn("ZoomConstantExpression",Dc),wn("CompoundExpression",Wi,{omit:["_evaluate"]});for(const p in Ms)Ms[p]._classRegistryKey||wn(`Expression_${p}`,Ms[p]);function Tl(p){return p&&typeof ArrayBuffer<"u"&&(p instanceof ArrayBuffer||p.constructor&&"ArrayBuffer"===p.constructor.name)}function ca(p,c){if(null==p||"boolean"==typeof p||"number"==typeof p||"string"==typeof p||p instanceof Boolean||p instanceof Number||p instanceof String||p instanceof Date||p instanceof RegExp||p instanceof Blob)return p;if(Tl(p)||st(p))return c&&c.push(p),p;if(ArrayBuffer.isView(p)){const _=p;return c&&c.push(_.buffer),_}if(p instanceof ImageData)return c&&c.push(p.data.buffer),p;if(Array.isArray(p)){const _=[];for(const w of p)_.push(ca(w,c));return _}if("object"==typeof p){const _=p.constructor,w=_._classRegistryKey;if(!w)throw new Error("can't serialize object of unregistered class");if(!io[w])throw new Error(`${w} is not registered.`);const P=_.serialize?_.serialize(p,c):{};if(_.serialize){if(c&&P===c[c.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const L in p){if(!p.hasOwnProperty(L)||io[w].omit.indexOf(L)>=0)continue;const B=p[L];P[L]=io[w].shallow.indexOf(L)>=0?B:ca(B,c)}p instanceof Error&&(P.message=p.message)}if(P.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==w&&(P.$name=w),P}throw new Error("can't serialize object of type "+typeof p)}function yc(p){if(null==p||"boolean"==typeof p||"number"==typeof p||"string"==typeof p||p instanceof Boolean||p instanceof Number||p instanceof String||p instanceof Date||p instanceof RegExp||p instanceof Blob||Tl(p)||st(p)||ArrayBuffer.isView(p)||p instanceof ImageData)return p;if(Array.isArray(p))return p.map(yc);if("object"==typeof p){const c=p.$name||"Object";if(!io[c])throw new Error(`can't deserialize unregistered class ${c}`);const{klass:_}=io[c];if(!_)throw new Error(`can't deserialize unregistered class ${c}`);if(_.deserialize)return _.deserialize(p);const w=Object.create(_.prototype);for(const P of Object.keys(p)){if("$name"===P)continue;const L=p[P];w[P]=io[c].shallow.indexOf(P)>=0?L:yc(L)}return w}throw new Error("can't deserialize object of type "+typeof p)}class $c{constructor(){this.first=!0}update(c,_){const w=Math.floor(c);return this.first?(this.first=!1,this.lastIntegerZoom=w,this.lastIntegerZoomTime=0,this.lastZoom=c,this.lastFloorZoom=w,!0):(this.lastFloorZoom>w?(this.lastIntegerZoom=w+1,this.lastIntegerZoomTime=_):this.lastFloorZoom<w&&(this.lastIntegerZoom=w,this.lastIntegerZoomTime=_),c!==this.lastZoom&&(this.lastZoom=c,this.lastFloorZoom=w,!0))}}const Un={"Latin-1 Supplement":p=>p>=128&&p<=255,Arabic:p=>p>=1536&&p<=1791,"Arabic Supplement":p=>p>=1872&&p<=1919,"Arabic Extended-A":p=>p>=2208&&p<=2303,"Hangul Jamo":p=>p>=4352&&p<=4607,"Unified Canadian Aboriginal Syllabics":p=>p>=5120&&p<=5759,Khmer:p=>p>=6016&&p<=6143,"Unified Canadian Aboriginal Syllabics Extended":p=>p>=6320&&p<=6399,"General Punctuation":p=>p>=8192&&p<=8303,"Letterlike Symbols":p=>p>=8448&&p<=8527,"Number Forms":p=>p>=8528&&p<=8591,"Miscellaneous Technical":p=>p>=8960&&p<=9215,"Control Pictures":p=>p>=9216&&p<=9279,"Optical Character Recognition":p=>p>=9280&&p<=9311,"Enclosed Alphanumerics":p=>p>=9312&&p<=9471,"Geometric Shapes":p=>p>=9632&&p<=9727,"Miscellaneous Symbols":p=>p>=9728&&p<=9983,"Miscellaneous Symbols and Arrows":p=>p>=11008&&p<=11263,"CJK Radicals Supplement":p=>p>=11904&&p<=12031,"Kangxi Radicals":p=>p>=12032&&p<=12255,"Ideographic Description Characters":p=>p>=12272&&p<=12287,"CJK Symbols and Punctuation":p=>p>=12288&&p<=12351,Hiragana:p=>p>=12352&&p<=12447,Katakana:p=>p>=12448&&p<=12543,Bopomofo:p=>p>=12544&&p<=12591,"Hangul Compatibility Jamo":p=>p>=12592&&p<=12687,Kanbun:p=>p>=12688&&p<=12703,"Bopomofo Extended":p=>p>=12704&&p<=12735,"CJK Strokes":p=>p>=12736&&p<=12783,"Katakana Phonetic Extensions":p=>p>=12784&&p<=12799,"Enclosed CJK Letters and Months":p=>p>=12800&&p<=13055,"CJK Compatibility":p=>p>=13056&&p<=13311,"CJK Unified Ideographs Extension A":p=>p>=13312&&p<=19903,"Yijing Hexagram Symbols":p=>p>=19904&&p<=19967,"CJK Unified Ideographs":p=>p>=19968&&p<=40959,"Yi Syllables":p=>p>=40960&&p<=42127,"Yi Radicals":p=>p>=42128&&p<=42191,"Hangul Jamo Extended-A":p=>p>=43360&&p<=43391,"Hangul Syllables":p=>p>=44032&&p<=55215,"Hangul Jamo Extended-B":p=>p>=55216&&p<=55295,"Private Use Area":p=>p>=57344&&p<=63743,"CJK Compatibility Ideographs":p=>p>=63744&&p<=64255,"Arabic Presentation Forms-A":p=>p>=64336&&p<=65023,"Vertical Forms":p=>p>=65040&&p<=65055,"CJK Compatibility Forms":p=>p>=65072&&p<=65103,"Small Form Variants":p=>p>=65104&&p<=65135,"Arabic Presentation Forms-B":p=>p>=65136&&p<=65279,"Halfwidth and Fullwidth Forms":p=>p>=65280&&p<=65519};function ua(p){for(const c of p)if(jc(c.charCodeAt(0)))return!0;return!1}function Hc(p){for(const c of p)if(!wo(c.charCodeAt(0)))return!1;return!0}function wo(p){return!(Un.Arabic(p)||Un["Arabic Supplement"](p)||Un["Arabic Extended-A"](p)||Un["Arabic Presentation Forms-A"](p)||Un["Arabic Presentation Forms-B"](p))}function jc(p){return!(746!==p&&747!==p&&(p<4352||!(Un["Bopomofo Extended"](p)||Un.Bopomofo(p)||Un["CJK Compatibility Forms"](p)&&!(p>=65097&&p<=65103)||Un["CJK Compatibility Ideographs"](p)||Un["CJK Compatibility"](p)||Un["CJK Radicals Supplement"](p)||Un["CJK Strokes"](p)||!(!Un["CJK Symbols and Punctuation"](p)||p>=12296&&p<=12305||p>=12308&&p<=12319||12336===p)||Un["CJK Unified Ideographs Extension A"](p)||Un["CJK Unified Ideographs"](p)||Un["Enclosed CJK Letters and Months"](p)||Un["Hangul Compatibility Jamo"](p)||Un["Hangul Jamo Extended-A"](p)||Un["Hangul Jamo Extended-B"](p)||Un["Hangul Jamo"](p)||Un["Hangul Syllables"](p)||Un.Hiragana(p)||Un["Ideographic Description Characters"](p)||Un.Kanbun(p)||Un["Kangxi Radicals"](p)||Un["Katakana Phonetic Extensions"](p)||Un.Katakana(p)&&12540!==p||!(!Un["Halfwidth and Fullwidth Forms"](p)||65288===p||65289===p||65293===p||p>=65306&&p<=65310||65339===p||65341===p||65343===p||p>=65371&&p<=65503||65507===p||p>=65512&&p<=65519)||!(!Un["Small Form Variants"](p)||p>=65112&&p<=65118||p>=65123&&p<=65126)||Un["Unified Canadian Aboriginal Syllabics"](p)||Un["Unified Canadian Aboriginal Syllabics Extended"](p)||Un["Vertical Forms"](p)||Un["Yijing Hexagram Symbols"](p)||Un["Yi Syllables"](p)||Un["Yi Radicals"](p))))}function ba(p){return!(jc(p)||(c=p,Un["Latin-1 Supplement"](c)&&(167===c||169===c||174===c||177===c||188===c||189===c||190===c||215===c||247===c)||Un["General Punctuation"](c)&&(8214===c||8224===c||8225===c||8240===c||8241===c||8251===c||8252===c||8258===c||8263===c||8264===c||8265===c||8273===c)||Un["Letterlike Symbols"](c)||Un["Number Forms"](c)||Un["Miscellaneous Technical"](c)&&(c>=8960&&c<=8967||c>=8972&&c<=8991||c>=8996&&c<=9e3||9003===c||c>=9085&&c<=9114||c>=9150&&c<=9165||9167===c||c>=9169&&c<=9179||c>=9186&&c<=9215)||Un["Control Pictures"](c)&&9251!==c||Un["Optical Character Recognition"](c)||Un["Enclosed Alphanumerics"](c)||Un["Geometric Shapes"](c)||Un["Miscellaneous Symbols"](c)&&!(c>=9754&&c<=9759)||Un["Miscellaneous Symbols and Arrows"](c)&&(c>=11026&&c<=11055||c>=11088&&c<=11097||c>=11192&&c<=11243)||Un["CJK Symbols and Punctuation"](c)||Un.Katakana(c)||Un["Private Use Area"](c)||Un["CJK Compatibility Forms"](c)||Un["Small Form Variants"](c)||Un["Halfwidth and Fullwidth Forms"](c)||8734===c||8756===c||8757===c||c>=9984&&c<=10087||c>=10102&&c<=10131||65532===c||65533===c));var c}function Ts(p){return p>=1424&&p<=2303||Un["Arabic Presentation Forms-A"](p)||Un["Arabic Presentation Forms-B"](p)}function fl(p,c){return!(!c&&Ts(p)||p>=2304&&p<=3583||p>=3840&&p<=4255||Un.Khmer(p))}function pl(p){for(const c of p)if(Ts(c.charCodeAt(0)))return!0;return!1}const Al="deferred",ml="loading",qc="loaded";let xs=null,ds="unavailable",ro=null;const wd=function(p){p&&"string"==typeof p&&p.indexOf("NetworkError")>-1&&(ds="error"),xs&&xs(p)};function vc(){Ks.fire(new Yt("pluginStateChange",{pluginStatus:ds,pluginURL:ro}))}const Ks=new un,Sa=function(){return ds},uu=function(){if(ds!==Al||!ro)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ds=ml,vc(),ro&&yi({url:ro},p=>{p?wd(p):(ds=qc,vc())})},Js={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>ds===qc||null!=Js.applyArabicShaping,isLoading:()=>ds===ml,setState(p){if(!ve())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");ds=p.pluginStatus,ro=p.pluginURL},isParsed(){if(!ve())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return null!=Js.applyArabicShaping&&null!=Js.processBidirectionalText&&null!=Js.processStyledBidirectionalText},getPluginURL(){if(!ve())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return ro}};class Gr{constructor(c,_){this.zoom=c,_?(this.now=_.now,this.fadeDuration=_.fadeDuration,this.zoomHistory=_.zoomHistory,this.transition=_.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new $c,this.transition={})}isSupportedScript(c){return function(_,w){for(const P of _)if(!fl(P.charCodeAt(0),w))return!1;return!0}(c,Js.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const c=this.zoom,_=c-Math.floor(c),w=this.crossFadingFactor();return c>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:_+(1-_)*w}:{fromScale:.5,toScale:1,t:1-(1-w)*_}}}class hs{constructor(c,_){this.property=c,this.value=_,this.expression=function(w,P){if(bo(w))return new Gs(w,P);if(Yn(w)){const L=Fa(w,P);if("error"===L.result)throw new Error(L.value.map(B=>`${B.key}: ${B.message}`).join(", "));return L.value}{let L=w;return"color"===P.type&&"string"==typeof w?L=qe.parse(w):"padding"!==P.type||"number"!=typeof w&&!Array.isArray(w)||(L=vt.parse(w)),{kind:"constant",evaluate:()=>L}}}(void 0===_?c.specification.default:_,c.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(c,_,w){return this.property.possiblyEvaluate(this,c,_,w)}}class Ls{constructor(c){this.property=c,this.value=new hs(c,void 0)}transitioned(c,_){return new Da(this.property,this.value,_,Ke({},c.transition,this.transition),c.now)}untransitioned(){return new Da(this.property,this.value,null,{},0)}}class Tc{constructor(c){this._properties=c,this._values=Object.create(c.defaultTransitionablePropertyValues)}getValue(c){return De(this._values[c].value.value)}setValue(c,_){Object.prototype.hasOwnProperty.call(this._values,c)||(this._values[c]=new Ls(this._values[c].property)),this._values[c].value=new hs(this._values[c].property,null===_?void 0:De(_))}getTransition(c){return De(this._values[c].transition)}setTransition(c,_){Object.prototype.hasOwnProperty.call(this._values,c)||(this._values[c]=new Ls(this._values[c].property)),this._values[c].transition=De(_)||void 0}serialize(){const c={};for(const _ of Object.keys(this._values)){const w=this.getValue(_);void 0!==w&&(c[_]=w);const P=this.getTransition(_);void 0!==P&&(c[`${_}-transition`]=P)}return c}transitioned(c,_){const w=new Ac(this._properties);for(const P of Object.keys(this._values))w._values[P]=this._values[P].transitioned(c,_._values[P]);return w}untransitioned(){const c=new Ac(this._properties);for(const _ of Object.keys(this._values))c._values[_]=this._values[_].untransitioned();return c}}class Da{constructor(c,_,w,P,L){this.property=c,this.value=_,this.begin=L+P.delay||0,this.end=this.begin+P.duration||0,c.specification.transition&&(P.delay||P.duration)&&(this.prior=w)}possiblyEvaluate(c,_,w){const P=c.now||0,L=this.value.possiblyEvaluate(c,_,w),B=this.prior;if(B){if(P>this.end)return this.prior=null,L;if(this.value.isDataDriven())return this.prior=null,L;if(P<this.begin)return B.possiblyEvaluate(c,_,w);{const H=(P-this.begin)/(this.end-this.begin);return this.property.interpolate(B.possiblyEvaluate(c,_,w),L,function(X){if(X<=0)return 0;if(X>=1)return 1;const ne=X*X,ge=ne*X;return 4*(X<.5?ge:3*(X-ne)+ge-.75)}(H))}}return L}}class Ac{constructor(c){this._properties=c,this._values=Object.create(c.defaultTransitioningPropertyValues)}possiblyEvaluate(c,_,w){const P=new hu(this._properties);for(const L of Object.keys(this._values))P._values[L]=this._values[L].possiblyEvaluate(c,_,w);return P}hasTransition(){for(const c of Object.keys(this._values))if(this._values[c].prior)return!0;return!1}}class du{constructor(c){this._properties=c,this._values=Object.create(c.defaultPropertyValues)}getValue(c){return De(this._values[c].value)}setValue(c,_){this._values[c]=new hs(this._values[c].property,null===_?void 0:De(_))}serialize(){const c={};for(const _ of Object.keys(this._values)){const w=this.getValue(_);void 0!==w&&(c[_]=w)}return c}possiblyEvaluate(c,_,w){const P=new hu(this._properties);for(const L of Object.keys(this._values))P._values[L]=this._values[L].possiblyEvaluate(c,_,w);return P}}class lo{constructor(c,_,w){this.property=c,this.value=_,this.parameters=w}isConstant(){return"constant"===this.value.kind}constantOr(c){return"constant"===this.value.kind?this.value.value:c}evaluate(c,_,w,P){return this.property.evaluate(this.value,this.parameters,c,_,w,P)}}class hu{constructor(c){this._properties=c,this._values=Object.create(c.defaultPossiblyEvaluatedValues)}get(c){return this._values[c]}}class Jn{constructor(c){this.specification=c}possiblyEvaluate(c,_){if(c.isDataDriven())throw new Error("Value should not be data driven");return c.expression.evaluate(_)}interpolate(c,_,w){const P=vr[this.specification.type];return P?P(c,_,w):c}}class Ui{constructor(c,_){this.specification=c,this.overrides=_}possiblyEvaluate(c,_,w,P){return new lo(this,"constant"===c.expression.kind||"camera"===c.expression.kind?{kind:"constant",value:c.expression.evaluate(_,null,{},w,P)}:c.expression,_)}interpolate(c,_,w){if("constant"!==c.value.kind||"constant"!==_.value.kind)return c;if(void 0===c.value.value||void 0===_.value.value)return new lo(this,{kind:"constant",value:void 0},c.parameters);const P=vr[this.specification.type];return P?new lo(this,{kind:"constant",value:P(c.value.value,_.value.value,w)},c.parameters):c}evaluate(c,_,w,P,L,B){return"constant"===c.kind?c.value:c.evaluate(_,w,P,L,B)}}class oc extends Ui{possiblyEvaluate(c,_,w,P){if(void 0===c.value)return new lo(this,{kind:"constant",value:void 0},_);if("constant"===c.expression.kind){const L=c.expression.evaluate(_,null,{},w,P),B="resolvedImage"===c.property.specification.type&&"string"!=typeof L?L.name:L,H=this._calculate(B,B,B,_);return new lo(this,{kind:"constant",value:H},_)}if("camera"===c.expression.kind){const L=this._calculate(c.expression.evaluate({zoom:_.zoom-1}),c.expression.evaluate({zoom:_.zoom}),c.expression.evaluate({zoom:_.zoom+1}),_);return new lo(this,{kind:"constant",value:L},_)}return new lo(this,c.expression,_)}evaluate(c,_,w,P,L,B){if("source"===c.kind){const H=c.evaluate(_,w,P,L,B);return this._calculate(H,H,H,_)}return"composite"===c.kind?this._calculate(c.evaluate({zoom:Math.floor(_.zoom)-1},w,P),c.evaluate({zoom:Math.floor(_.zoom)},w,P),c.evaluate({zoom:Math.floor(_.zoom)+1},w,P),_):c.value}_calculate(c,_,w,P){return P.zoom>P.zoomHistory.lastIntegerZoom?{from:c,to:_}:{from:w,to:_}}interpolate(c){return c}}class Pl{constructor(c){this.specification=c}possiblyEvaluate(c,_,w,P){if(void 0!==c.value){if("constant"===c.expression.kind){const L=c.expression.evaluate(_,null,{},w,P);return this._calculate(L,L,L,_)}return this._calculate(c.expression.evaluate(new Gr(Math.floor(_.zoom-1),_)),c.expression.evaluate(new Gr(Math.floor(_.zoom),_)),c.expression.evaluate(new Gr(Math.floor(_.zoom+1),_)),_)}}_calculate(c,_,w,P){return P.zoom>P.zoomHistory.lastIntegerZoom?{from:c,to:_}:{from:w,to:_}}interpolate(c){return c}}class Yc{constructor(c){this.specification=c}possiblyEvaluate(c,_,w,P){return!!c.expression.evaluate(_,null,{},w,P)}interpolate(){return!1}}class yo{constructor(c){this.properties=c,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const _ in c){const w=c[_];w.specification.overridable&&this.overridableProperties.push(_);const P=this.defaultPropertyValues[_]=new hs(w,void 0),L=this.defaultTransitionablePropertyValues[_]=new Ls(w);this.defaultTransitioningPropertyValues[_]=L.untransitioned(),this.defaultPossiblyEvaluatedValues[_]=P.possiblyEvaluate({})}}}wn("DataDrivenProperty",Ui),wn("DataConstantProperty",Jn),wn("CrossFadedDataDrivenProperty",oc),wn("CrossFadedProperty",Pl),wn("ColorRampProperty",Yc);const tl="-transition";class Ma extends un{constructor(c,_){if(super(),this.id=c.id,this.type=c.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==c.type&&(this.metadata=c.metadata,this.minzoom=c.minzoom,this.maxzoom=c.maxzoom,"background"!==c.type&&(this.source=c.source,this.sourceLayer=c["source-layer"],this.filter=c.filter),_.layout&&(this._unevaluatedLayout=new du(_.layout)),_.paint)){this._transitionablePaint=new Tc(_.paint);for(const w in c.paint)this.setPaintProperty(w,c.paint[w],{validate:!1});for(const w in c.layout)this.setLayoutProperty(w,c.layout[w],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new hu(_.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(c){return"visibility"===c?this.visibility:this._unevaluatedLayout.getValue(c)}setLayoutProperty(c,_,w={}){null!=_&&this._validate(Eh,`layers.${this.id}.layout.${c}`,c,_,w)||("visibility"!==c?this._unevaluatedLayout.setValue(c,_):this.visibility=_)}getPaintProperty(c){return c.endsWith(tl)?this._transitionablePaint.getTransition(c.slice(0,-tl.length)):this._transitionablePaint.getValue(c)}setPaintProperty(c,_,w={}){if(null!=_&&this._validate(la,`layers.${this.id}.paint.${c}`,c,_,w))return!1;if(c.endsWith(tl))return this._transitionablePaint.setTransition(c.slice(0,-tl.length),_||void 0),!1;{const P=this._transitionablePaint._values[c],L="cross-faded-data-driven"===P.property.specification["property-type"],B=P.value.isDataDriven(),H=P.value;this._transitionablePaint.setValue(c,_),this._handleSpecialPaintPropertyUpdate(c);const X=this._transitionablePaint._values[c].value;return X.isDataDriven()||B||L||this._handleOverridablePaintPropertyUpdate(c,H,X)}}_handleSpecialPaintPropertyUpdate(c){}_handleOverridablePaintPropertyUpdate(c,_,w){return!1}isHidden(c){return!!(this.minzoom&&c<this.minzoom)||!!(this.maxzoom&&c>=this.maxzoom)||"none"===this.visibility}updateTransitions(c){this._transitioningPaint=this._transitionablePaint.transitioned(c,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(c,_){c.getCrossfadeParameters&&(this._crossfadeParameters=c.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(c,void 0,_)),this.paint=this._transitioningPaint.possiblyEvaluate(c,void 0,_)}serialize(){const c={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(c.layout=c.layout||{},c.layout.visibility=this.visibility),ue(c,(_,w)=>!(void 0===_||"layout"===w&&!Object.keys(_).length||"paint"===w&&!Object.keys(_).length))}_validate(c,_,w,P,L={}){return(!L||!1!==L.validate)&&Hl(this,c.call(vs,{key:_,layerType:this.type,objectKey:w,value:P,styleSpec:mt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const c in this.paint._values){const _=this.paint.get(c);if(_ instanceof lo&&Vr(_.property.specification)&&("source"===_.value.kind||"composite"===_.value.kind)&&_.value.isStateDependent)return!0}return!1}}const Du={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class nl{constructor(c,_){this._structArray=c,this._pos1=_*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Eo{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(c,_){return c._trim(),_&&(c.isTransferred=!0,_.push(c.arrayBuffer)),{length:c.length,arrayBuffer:c.arrayBuffer}}static deserialize(c){const _=Object.create(this.prototype);return _.arrayBuffer=c.arrayBuffer,_.length=c.length,_.capacity=c.arrayBuffer.byteLength/_.bytesPerElement,_._refreshViews(),_}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(c){this.reserve(c),this.length=c}reserve(c){if(c>this.capacity){this.capacity=Math.max(c,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const _=this.uint8;this._refreshViews(),_&&this.uint8.set(_)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function ls(p,c=1){let _=0,w=0;return{members:p.map(P=>{const L=Du[P.type].BYTES_PER_ELEMENT,B=_=Zc(_,Math.max(c,L)),H=P.components||1;return w=Math.max(w,L),_+=L*H,{name:P.name,type:P.type,components:H,offset:B}}),size:Zc(_,Math.max(w,c)),alignment:c}}function Zc(p,c){return Math.ceil(p/c)*c}class gl extends Eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,_){const w=this.length;return this.resize(w+1),this.emplace(w,c,_)}emplace(c,_,w){const P=2*c;return this.int16[P+0]=_,this.int16[P+1]=w,c}}gl.prototype.bytesPerElement=4,wn("StructArrayLayout2i4",gl);class T extends Eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,_,w,P){const L=this.length;return this.resize(L+1),this.emplace(L,c,_,w,P)}emplace(c,_,w,P,L){const B=4*c;return this.int16[B+0]=_,this.int16[B+1]=w,this.int16[B+2]=P,this.int16[B+3]=L,c}}T.prototype.bytesPerElement=8,wn("StructArrayLayout4i8",T);class u extends Eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,_,w,P,L,B){const H=this.length;return this.resize(H+1),this.emplace(H,c,_,w,P,L,B)}emplace(c,_,w,P,L,B,H){const X=6*c;return this.int16[X+0]=_,this.int16[X+1]=w,this.int16[X+2]=P,this.int16[X+3]=L,this.int16[X+4]=B,this.int16[X+5]=H,c}}u.prototype.bytesPerElement=12,wn("StructArrayLayout2i4i12",u);class y extends Eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,_,w,P,L,B){const H=this.length;return this.resize(H+1),this.emplace(H,c,_,w,P,L,B)}emplace(c,_,w,P,L,B,H){const X=4*c,ne=8*c;return this.int16[X+0]=_,this.int16[X+1]=w,this.uint8[ne+4]=P,this.uint8[ne+5]=L,this.uint8[ne+6]=B,this.uint8[ne+7]=H,c}}y.prototype.bytesPerElement=8,wn("StructArrayLayout2i4ub8",y);class D extends Eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,_){const w=this.length;return this.resize(w+1),this.emplace(w,c,_)}emplace(c,_,w){const P=2*c;return this.float32[P+0]=_,this.float32[P+1]=w,c}}D.prototype.bytesPerElement=8,wn("StructArrayLayout2f8",D);class A extends Eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,_,w,P,L,B,H,X,ne,ge){const Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,c,_,w,P,L,B,H,X,ne,ge)}emplace(c,_,w,P,L,B,H,X,ne,ge,Ie){const ze=10*c;return this.uint16[ze+0]=_,this.uint16[ze+1]=w,this.uint16[ze+2]=P,this.uint16[ze+3]=L,this.uint16[ze+4]=B,this.uint16[ze+5]=H,this.uint16[ze+6]=X,this.uint16[ze+7]=ne,this.uint16[ze+8]=ge,this.uint16[ze+9]=Ie,c}}A.prototype.bytesPerElement=20,wn("StructArrayLayout10ui20",A);class F extends Eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,_,w,P,L,B,H,X,ne,ge,Ie,ze){const Ze=this.length;return this.resize(Ze+1),this.emplace(Ze,c,_,w,P,L,B,H,X,ne,ge,Ie,ze)}emplace(c,_,w,P,L,B,H,X,ne,ge,Ie,ze,Ze){const We=12*c;return this.int16[We+0]=_,this.int16[We+1]=w,this.int16[We+2]=P,this.int16[We+3]=L,this.uint16[We+4]=B,this.uint16[We+5]=H,this.uint16[We+6]=X,this.uint16[We+7]=ne,this.int16[We+8]=ge,this.int16[We+9]=Ie,this.int16[We+10]=ze,this.int16[We+11]=Ze,c}}F.prototype.bytesPerElement=24,wn("StructArrayLayout4i4ui4i24",F);class $ extends Eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,_,w){const P=this.length;return this.resize(P+1),this.emplace(P,c,_,w)}emplace(c,_,w,P){const L=3*c;return this.float32[L+0]=_,this.float32[L+1]=w,this.float32[L+2]=P,c}}$.prototype.bytesPerElement=12,wn("StructArrayLayout3f12",$);class Z extends Eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(c){const _=this.length;return this.resize(_+1),this.emplace(_,c)}emplace(c,_){return this.uint32[1*c+0]=_,c}}Z.prototype.bytesPerElement=4,wn("StructArrayLayout1ul4",Z);class ee extends Eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,_,w,P,L,B,H,X,ne){const ge=this.length;return this.resize(ge+1),this.emplace(ge,c,_,w,P,L,B,H,X,ne)}emplace(c,_,w,P,L,B,H,X,ne,ge){const Ie=10*c,ze=5*c;return this.int16[Ie+0]=_,this.int16[Ie+1]=w,this.int16[Ie+2]=P,this.int16[Ie+3]=L,this.int16[Ie+4]=B,this.int16[Ie+5]=H,this.uint32[ze+3]=X,this.uint16[Ie+8]=ne,this.uint16[Ie+9]=ge,c}}ee.prototype.bytesPerElement=20,wn("StructArrayLayout6i1ul2ui20",ee);class ie extends Eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,_,w,P,L,B){const H=this.length;return this.resize(H+1),this.emplace(H,c,_,w,P,L,B)}emplace(c,_,w,P,L,B,H){const X=6*c;return this.int16[X+0]=_,this.int16[X+1]=w,this.int16[X+2]=P,this.int16[X+3]=L,this.int16[X+4]=B,this.int16[X+5]=H,c}}ie.prototype.bytesPerElement=12,wn("StructArrayLayout2i2i2i12",ie);class s extends Eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,_,w,P,L){const B=this.length;return this.resize(B+1),this.emplace(B,c,_,w,P,L)}emplace(c,_,w,P,L,B){const H=4*c,X=8*c;return this.float32[H+0]=_,this.float32[H+1]=w,this.float32[H+2]=P,this.int16[X+6]=L,this.int16[X+7]=B,c}}s.prototype.bytesPerElement=16,wn("StructArrayLayout2f1f2i16",s);class l extends Eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,_,w,P){const L=this.length;return this.resize(L+1),this.emplace(L,c,_,w,P)}emplace(c,_,w,P,L){const B=12*c,H=3*c;return this.uint8[B+0]=_,this.uint8[B+1]=w,this.float32[H+1]=P,this.float32[H+2]=L,c}}l.prototype.bytesPerElement=12,wn("StructArrayLayout2ub2f12",l);class m extends Eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,_,w){const P=this.length;return this.resize(P+1),this.emplace(P,c,_,w)}emplace(c,_,w,P){const L=3*c;return this.uint16[L+0]=_,this.uint16[L+1]=w,this.uint16[L+2]=P,c}}m.prototype.bytesPerElement=6,wn("StructArrayLayout3ui6",m);class v extends Eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,_,w,P,L,B,H,X,ne,ge,Ie,ze,Ze,We,St,Et,Ht){const nn=this.length;return this.resize(nn+1),this.emplace(nn,c,_,w,P,L,B,H,X,ne,ge,Ie,ze,Ze,We,St,Et,Ht)}emplace(c,_,w,P,L,B,H,X,ne,ge,Ie,ze,Ze,We,St,Et,Ht,nn){const Ut=24*c,Xt=12*c,Zt=48*c;return this.int16[Ut+0]=_,this.int16[Ut+1]=w,this.uint16[Ut+2]=P,this.uint16[Ut+3]=L,this.uint32[Xt+2]=B,this.uint32[Xt+3]=H,this.uint32[Xt+4]=X,this.uint16[Ut+10]=ne,this.uint16[Ut+11]=ge,this.uint16[Ut+12]=Ie,this.float32[Xt+7]=ze,this.float32[Xt+8]=Ze,this.uint8[Zt+36]=We,this.uint8[Zt+37]=St,this.uint8[Zt+38]=Et,this.uint32[Xt+10]=Ht,this.int16[Ut+22]=nn,c}}v.prototype.bytesPerElement=48,wn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",v);class C extends Eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,_,w,P,L,B,H,X,ne,ge,Ie,ze,Ze,We,St,Et,Ht,nn,Ut,Xt,Zt,pn,oi,bi,ti,Hn,On,ni){const Zn=this.length;return this.resize(Zn+1),this.emplace(Zn,c,_,w,P,L,B,H,X,ne,ge,Ie,ze,Ze,We,St,Et,Ht,nn,Ut,Xt,Zt,pn,oi,bi,ti,Hn,On,ni)}emplace(c,_,w,P,L,B,H,X,ne,ge,Ie,ze,Ze,We,St,Et,Ht,nn,Ut,Xt,Zt,pn,oi,bi,ti,Hn,On,ni,Zn){const Tn=34*c,Vi=17*c;return this.int16[Tn+0]=_,this.int16[Tn+1]=w,this.int16[Tn+2]=P,this.int16[Tn+3]=L,this.int16[Tn+4]=B,this.int16[Tn+5]=H,this.int16[Tn+6]=X,this.int16[Tn+7]=ne,this.uint16[Tn+8]=ge,this.uint16[Tn+9]=Ie,this.uint16[Tn+10]=ze,this.uint16[Tn+11]=Ze,this.uint16[Tn+12]=We,this.uint16[Tn+13]=St,this.uint16[Tn+14]=Et,this.uint16[Tn+15]=Ht,this.uint16[Tn+16]=nn,this.uint16[Tn+17]=Ut,this.uint16[Tn+18]=Xt,this.uint16[Tn+19]=Zt,this.uint16[Tn+20]=pn,this.uint16[Tn+21]=oi,this.uint16[Tn+22]=bi,this.uint32[Vi+12]=ti,this.float32[Vi+13]=Hn,this.float32[Vi+14]=On,this.float32[Vi+15]=ni,this.float32[Vi+16]=Zn,c}}C.prototype.bytesPerElement=68,wn("StructArrayLayout8i15ui1ul4f68",C);class k extends Eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c){const _=this.length;return this.resize(_+1),this.emplace(_,c)}emplace(c,_){return this.float32[1*c+0]=_,c}}k.prototype.bytesPerElement=4,wn("StructArrayLayout1f4",k);class G extends Eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,_,w){const P=this.length;return this.resize(P+1),this.emplace(P,c,_,w)}emplace(c,_,w,P){const L=3*c;return this.int16[L+0]=_,this.int16[L+1]=w,this.int16[L+2]=P,c}}G.prototype.bytesPerElement=6,wn("StructArrayLayout3i6",G);class J extends Eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,_,w){const P=this.length;return this.resize(P+1),this.emplace(P,c,_,w)}emplace(c,_,w,P){const L=4*c;return this.uint32[2*c+0]=_,this.uint16[L+2]=w,this.uint16[L+3]=P,c}}J.prototype.bytesPerElement=8,wn("StructArrayLayout1ul2ui8",J);class fe extends Eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,_){const w=this.length;return this.resize(w+1),this.emplace(w,c,_)}emplace(c,_,w){const P=2*c;return this.uint16[P+0]=_,this.uint16[P+1]=w,c}}fe.prototype.bytesPerElement=4,wn("StructArrayLayout2ui4",fe);class pe extends Eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c){const _=this.length;return this.resize(_+1),this.emplace(_,c)}emplace(c,_){return this.uint16[1*c+0]=_,c}}pe.prototype.bytesPerElement=2,wn("StructArrayLayout1ui2",pe);class ot extends Eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,_,w,P){const L=this.length;return this.resize(L+1),this.emplace(L,c,_,w,P)}emplace(c,_,w,P,L){const B=4*c;return this.float32[B+0]=_,this.float32[B+1]=w,this.float32[B+2]=P,this.float32[B+3]=L,c}}ot.prototype.bytesPerElement=16,wn("StructArrayLayout4f16",ot);class nt extends nl{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new Qe(this.anchorPointX,this.anchorPointY)}}nt.prototype.size=20;class wt extends ee{get(c){return new nt(this,c)}}wn("CollisionBoxArray",wt);class Pt extends nl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(c){this._structArray.uint8[this._pos1+37]=c}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(c){this._structArray.uint8[this._pos1+38]=c}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(c){this._structArray.uint32[this._pos4+10]=c}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Pt.prototype.size=48;class $t extends v{get(c){return new Pt(this,c)}}wn("PlacedSymbolArray",$t);class Ft extends nl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(c){this._structArray.uint32[this._pos4+12]=c}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}Ft.prototype.size=68;class En extends C{get(c){return new Ft(this,c)}}wn("SymbolInstanceArray",En);class Dn extends k{getoffsetX(c){return this.float32[1*c+0]}}wn("GlyphOffsetArray",Dn);class Ln extends G{getx(c){return this.int16[3*c+0]}gety(c){return this.int16[3*c+1]}gettileUnitDistanceFromAnchor(c){return this.int16[3*c+2]}}wn("SymbolLineVertexArray",Ln);class Zi extends nl{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Zi.prototype.size=8;class Qi extends J{get(c){return new Zi(this,c)}}wn("FeatureIndexArray",Qi);class ki extends gl{}class cs extends gl{}class mr extends gl{}class Zr extends u{}class $r extends y{}class us extends D{}class fs extends A{}class Rl extends F{}class Pc extends ${}class bc extends Z{}class Rc extends ie{}class jl extends l{}class sc extends m{}class Wc extends fe{}const zf=ls([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ei}=zf;class Fi{constructor(c=[]){this.segments=c}prepareSegment(c,_,w,P){let L=this.segments[this.segments.length-1];return c>Fi.MAX_VERTEX_ARRAY_LENGTH&&ye(`Max vertices per segment is ${Fi.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${c}`),(!L||L.vertexLength+c>Fi.MAX_VERTEX_ARRAY_LENGTH||L.sortKey!==P)&&(L={vertexOffset:_.length,primitiveOffset:w.length,vertexLength:0,primitiveLength:0},void 0!==P&&(L.sortKey=P),this.segments.push(L)),L}get(){return this.segments}destroy(){for(const c of this.segments)for(const _ in c.vaos)c.vaos[_].destroy()}static simpleSegment(c,_,w,P){return new Fi([{vertexOffset:c,primitiveOffset:_,vertexLength:w,primitiveLength:P,vaos:{},sortKey:0}])}}function Jr(p,c){return 256*(p=xe(Math.floor(p),0,255))+xe(Math.floor(c),0,255)}Fi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,wn("SegmentVector",Fi);const da=ls([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Wr={exports:{}},Nn=function(p,c){var _,w,P,L,B,H,X,ne;for(w=p.length-(_=3&p.length),P=c,B=3432918353,H=461845907,ne=0;ne<w;)X=255&p.charCodeAt(ne)|(255&p.charCodeAt(++ne))<<8|(255&p.charCodeAt(++ne))<<16|(255&p.charCodeAt(++ne))<<24,++ne,P=27492+(65535&(L=5*(65535&(P=(P^=X=(65535&(X=(X=(65535&X)*B+(((X>>>16)*B&65535)<<16)&4294967295)<<15|X>>>17))*H+(((X>>>16)*H&65535)<<16)&4294967295)<<13|P>>>19))+((5*(P>>>16)&65535)<<16)&4294967295))+((58964+(L>>>16)&65535)<<16);switch(X=0,_){case 3:X^=(255&p.charCodeAt(ne+2))<<16;case 2:X^=(255&p.charCodeAt(ne+1))<<8;case 1:P^=X=(65535&(X=(X=(65535&(X^=255&p.charCodeAt(ne)))*B+(((X>>>16)*B&65535)<<16)&4294967295)<<15|X>>>17))*H+(((X>>>16)*H&65535)<<16)&4294967295}return P^=p.length,P=2246822507*(65535&(P^=P>>>16))+((2246822507*(P>>>16)&65535)<<16)&4294967295,P=3266489909*(65535&(P^=P>>>13))+((3266489909*(P>>>16)&65535)<<16)&4294967295,(P^=P>>>16)>>>0},an=function(p,c){for(var _,w=p.length,P=c^w,L=0;w>=4;)_=1540483477*(65535&(_=255&p.charCodeAt(L)|(255&p.charCodeAt(++L))<<8|(255&p.charCodeAt(++L))<<16|(255&p.charCodeAt(++L))<<24))+((1540483477*(_>>>16)&65535)<<16),P=1540483477*(65535&P)+((1540483477*(P>>>16)&65535)<<16)^(_=1540483477*(65535&(_^=_>>>24))+((1540483477*(_>>>16)&65535)<<16)),w-=4,++L;switch(w){case 3:P^=(255&p.charCodeAt(L+2))<<16;case 2:P^=(255&p.charCodeAt(L+1))<<8;case 1:P=1540483477*(65535&(P^=255&p.charCodeAt(L)))+((1540483477*(P>>>16)&65535)<<16)}return P=1540483477*(65535&(P^=P>>>13))+((1540483477*(P>>>16)&65535)<<16),(P^=P>>>15)>>>0};Wr.exports=Nn,Wr.exports.murmur3=Nn,Wr.exports.murmur2=an;class gr{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(c,_,w,P){this.ids.push(Rr(c)),this.positions.push(_,w,P)}getPositions(c){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const _=Rr(c);let w=0,P=this.ids.length-1;for(;w<P;){const B=w+P>>1;this.ids[B]>=_?P=B:w=B+1}const L=[];for(;this.ids[w]===_;)L.push({index:this.positions[3*w],start:this.positions[3*w+1],end:this.positions[3*w+2]}),w++;return L}static serialize(c,_){const w=new Float64Array(c.ids),P=new Uint32Array(c.positions);return rr(w,P,0,w.length-1),_&&_.push(w.buffer,P.buffer),{ids:w,positions:P}}static deserialize(c){const _=new gr;return _.ids=c.ids,_.positions=c.positions,_.indexed=!0,_}}function Rr(p){const c=+p;return!isNaN(c)&&c<=Number.MAX_SAFE_INTEGER?c:Wr.exports(String(p))}function rr(p,c,_,w){for(;_<w;){const P=p[_+w>>1];let L=_-1,B=w+1;for(;;){do{L++}while(p[L]<P);do{B--}while(p[B]>P);if(L>=B)break;vn(p,L,B),vn(c,3*L,3*B),vn(c,3*L+1,3*B+1),vn(c,3*L+2,3*B+2)}B-_<w-B?(rr(p,c,_,B),_=B+1):(rr(p,c,B+1,w),w=B)}}function vn(p,c,_){const w=p[c];p[c]=p[_],p[_]=w}wn("FeaturePositionMap",gr);class cn{constructor(c,_){this.gl=c.gl,this.location=_}}class kn extends cn{constructor(c,_){super(c,_),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1f(this.location,c))}}class oo extends cn{constructor(c,_){super(c,_),this.current=[0,0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]&&c[3]===this.current[3]||(this.current=c,this.gl.uniform4f(this.location,c[0],c[1],c[2],c[3]))}}class fu extends cn{constructor(c,_){super(c,_),this.current=qe.transparent}set(c){c.r===this.current.r&&c.g===this.current.g&&c.b===this.current.b&&c.a===this.current.a||(this.current=c,this.gl.uniform4f(this.location,c.r,c.g,c.b,c.a))}}const pu=new Float32Array(16);function Uf(p){return[Jr(255*p.r,255*p.g),Jr(255*p.b,255*p.a)]}class Hu{constructor(c,_,w){this.value=c,this.uniformNames=_.map(P=>`u_${P}`),this.type=w}setUniform(c,_,w){c.set(w.constantOr(this.value))}getBinding(c,_,w){return"color"===this.type?new fu(c,_):new kn(c,_)}}class ju{constructor(c,_){this.uniformNames=_.map(w=>`u_${w}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(c,_){this.pixelRatioFrom=_.pixelRatio,this.pixelRatioTo=c.pixelRatio,this.patternFrom=_.tlbr,this.patternTo=c.tlbr}setUniform(c,_,w,P){const L="u_pattern_to"===P?this.patternTo:"u_pattern_from"===P?this.patternFrom:"u_pixel_ratio_to"===P?this.pixelRatioTo:"u_pixel_ratio_from"===P?this.pixelRatioFrom:null;L&&c.set(L)}getBinding(c,_,w){return"u_pattern"===w.substr(0,9)?new oo(c,_):new kn(c,_)}}class ac{constructor(c,_,w,P){this.expression=c,this.type=w,this.maxValue=0,this.paintVertexAttributes=_.map(L=>({name:`a_${L}`,type:"Float32",components:"color"===w?2:1,offset:0})),this.paintVertexArray=new P}populatePaintArray(c,_,w,P,L){const B=this.paintVertexArray.length,H=this.expression.evaluate(new Gr(0),_,{},P,[],L);this.paintVertexArray.resize(c),this._setPaintValue(B,c,H)}updatePaintArray(c,_,w,P){const L=this.expression.evaluate({zoom:0},w,P);this._setPaintValue(c,_,L)}_setPaintValue(c,_,w){if("color"===this.type){const P=Uf(w);for(let L=c;L<_;L++)this.paintVertexArray.emplace(L,P[0],P[1])}else{for(let P=c;P<_;P++)this.paintVertexArray.emplace(P,w);this.maxValue=Math.max(this.maxValue,Math.abs(w))}}upload(c){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=c.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Xc{constructor(c,_,w,P,L,B){this.expression=c,this.uniformNames=_.map(H=>`u_${H}_t`),this.type=w,this.useIntegerZoom=P,this.zoom=L,this.maxValue=0,this.paintVertexAttributes=_.map(H=>({name:`a_${H}`,type:"Float32",components:"color"===w?4:2,offset:0})),this.paintVertexArray=new B}populatePaintArray(c,_,w,P,L){const B=this.expression.evaluate(new Gr(this.zoom),_,{},P,[],L),H=this.expression.evaluate(new Gr(this.zoom+1),_,{},P,[],L),X=this.paintVertexArray.length;this.paintVertexArray.resize(c),this._setPaintValue(X,c,B,H)}updatePaintArray(c,_,w,P){const L=this.expression.evaluate({zoom:this.zoom},w,P),B=this.expression.evaluate({zoom:this.zoom+1},w,P);this._setPaintValue(c,_,L,B)}_setPaintValue(c,_,w,P){if("color"===this.type){const L=Uf(w),B=Uf(P);for(let H=c;H<_;H++)this.paintVertexArray.emplace(H,L[0],L[1],B[0],B[1])}else{for(let L=c;L<_;L++)this.paintVertexArray.emplace(L,w,P);this.maxValue=Math.max(this.maxValue,Math.abs(w),Math.abs(P))}}upload(c){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=c.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(c,_){const w=this.useIntegerZoom?Math.floor(_.zoom):_.zoom,P=xe(this.expression.interpolationFactor(w,this.zoom,this.zoom+1),0,1);c.set(P)}getBinding(c,_,w){return new kn(c,_)}}class Ed{constructor(c,_,w,P,L,B){this.expression=c,this.type=_,this.useIntegerZoom=w,this.zoom=P,this.layerId=B,this.zoomInPaintVertexArray=new L,this.zoomOutPaintVertexArray=new L}populatePaintArray(c,_,w){const P=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(c),this.zoomOutPaintVertexArray.resize(c),this._setPaintValues(P,c,_.patterns&&_.patterns[this.layerId],w)}updatePaintArray(c,_,w,P,L){this._setPaintValues(c,_,w.patterns&&w.patterns[this.layerId],L)}_setPaintValues(c,_,w,P){if(!P||!w)return;const{min:L,mid:B,max:H}=w,X=P[L],ne=P[B],ge=P[H];if(X&&ne&&ge)for(let Ie=c;Ie<_;Ie++)this.zoomInPaintVertexArray.emplace(Ie,ne.tl[0],ne.tl[1],ne.br[0],ne.br[1],X.tl[0],X.tl[1],X.br[0],X.br[1],ne.pixelRatio,X.pixelRatio),this.zoomOutPaintVertexArray.emplace(Ie,ne.tl[0],ne.tl[1],ne.br[0],ne.br[1],ge.tl[0],ge.tl[1],ge.br[0],ge.br[1],ne.pixelRatio,ge.pixelRatio)}upload(c){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=c.createVertexBuffer(this.zoomInPaintVertexArray,da.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=c.createVertexBuffer(this.zoomOutPaintVertexArray,da.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Hd{constructor(c,_,w){this.binders={},this._buffers=[];const P=[];for(const L in c.paint._values){if(!w(L))continue;const B=c.paint.get(L);if(!(B instanceof lo&&Vr(B.property.specification)))continue;const H=Gm(L,c.type),X=B.value,ne=B.property.specification.type,ge=B.property.useIntegerZoom,Ie=B.property.specification["property-type"],ze="cross-faded"===Ie||"cross-faded-data-driven"===Ie;if("constant"===X.kind)this.binders[L]=ze?new ju(X.value,H):new Hu(X.value,H,ne),P.push(`/u_${L}`);else if("source"===X.kind||ze){const Ze=Ia(L,ne,"source");this.binders[L]=ze?new Ed(X,ne,ge,_,Ze,c.id):new ac(X,H,ne,Ze),P.push(`/a_${L}`)}else{const Ze=Ia(L,ne,"composite");this.binders[L]=new Xc(X,H,ne,ge,_,Ze),P.push(`/z_${L}`)}}this.cacheKey=P.sort().join("")}getMaxValue(c){const _=this.binders[c];return _ instanceof ac||_ instanceof Xc?_.maxValue:0}populatePaintArrays(c,_,w,P,L){for(const B in this.binders){const H=this.binders[B];(H instanceof ac||H instanceof Xc||H instanceof Ed)&&H.populatePaintArray(c,_,w,P,L)}}setConstantPatternPositions(c,_){for(const w in this.binders){const P=this.binders[w];P instanceof ju&&P.setConstantPatternPositions(c,_)}}updatePaintArrays(c,_,w,P,L){let B=!1;for(const H in c){const X=_.getPositions(H);for(const ne of X){const ge=w.feature(ne.index);for(const Ie in this.binders){const ze=this.binders[Ie];if((ze instanceof ac||ze instanceof Xc||ze instanceof Ed)&&!0===ze.expression.isStateDependent){const Ze=P.paint.get(Ie);ze.expression=Ze.value,ze.updatePaintArray(ne.start,ne.end,ge,c[H],L),B=!0}}}}return B}defines(){const c=[];for(const _ in this.binders){const w=this.binders[_];(w instanceof Hu||w instanceof ju)&&c.push(...w.uniformNames.map(P=>`#define HAS_UNIFORM_${P}`))}return c}getBinderAttributes(){const c=[];for(const _ in this.binders){const w=this.binders[_];if(w instanceof ac||w instanceof Xc)for(let P=0;P<w.paintVertexAttributes.length;P++)c.push(w.paintVertexAttributes[P].name);else if(w instanceof Ed)for(let P=0;P<da.members.length;P++)c.push(da.members[P].name)}return c}getBinderUniforms(){const c=[];for(const _ in this.binders){const w=this.binders[_];if(w instanceof Hu||w instanceof ju||w instanceof Xc)for(const P of w.uniformNames)c.push(P)}return c}getPaintVertexBuffers(){return this._buffers}getUniforms(c,_){const w=[];for(const P in this.binders){const L=this.binders[P];if(L instanceof Hu||L instanceof ju||L instanceof Xc)for(const B of L.uniformNames)if(_[B]){const H=L.getBinding(c,_[B],B);w.push({name:B,property:P,binding:H})}}return w}setUniforms(c,_,w,P){for(const{name:L,property:B,binding:H}of _)this.binders[B].setUniform(H,P,w.get(B),L)}updatePaintBuffers(c){this._buffers=[];for(const _ in this.binders){const w=this.binders[_];if(c&&w instanceof Ed){const P=2===c.fromScale?w.zoomInPaintVertexBuffer:w.zoomOutPaintVertexBuffer;P&&this._buffers.push(P)}else(w instanceof ac||w instanceof Xc)&&w.paintVertexBuffer&&this._buffers.push(w.paintVertexBuffer)}}upload(c){for(const _ in this.binders){const w=this.binders[_];(w instanceof ac||w instanceof Xc||w instanceof Ed)&&w.upload(c)}this.updatePaintBuffers()}destroy(){for(const c in this.binders){const _=this.binders[c];(_ instanceof ac||_ instanceof Xc||_ instanceof Ed)&&_.destroy()}}}class mu{constructor(c,_,w=(()=>!0)){this.programConfigurations={};for(const P of c)this.programConfigurations[P.id]=new Hd(P,_,w);this.needsUpload=!1,this._featureMap=new gr,this._bufferOffset=0}populatePaintArrays(c,_,w,P,L,B){for(const H in this.programConfigurations)this.programConfigurations[H].populatePaintArrays(c,_,P,L,B);void 0!==_.id&&this._featureMap.add(_.id,w,this._bufferOffset,c),this._bufferOffset=c,this.needsUpload=!0}updatePaintArrays(c,_,w,P){for(const L of w)this.needsUpload=this.programConfigurations[L.id].updatePaintArrays(c,this._featureMap,_,L,P)||this.needsUpload}get(c){return this.programConfigurations[c]}upload(c){if(this.needsUpload){for(const _ in this.programConfigurations)this.programConfigurations[_].upload(c);this.needsUpload=!1}}destroy(){for(const c in this.programConfigurations)this.programConfigurations[c].destroy()}}function Gm(p,c){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[p]||[p.replace(`${c}-`,"").replace(/-/g,"_")]}function Ia(p,c,_){const P={"line-pattern":{source:fs,composite:fs},"fill-pattern":{source:fs,composite:fs},"fill-extrusion-pattern":{source:fs,composite:fs}}[p];return P&&P[_]||{color:{source:D,composite:ot},number:{source:k,composite:D}}[c][_]}wn("ConstantBinder",Hu),wn("CrossFadedConstantBinder",ju),wn("SourceExpressionBinder",ac),wn("CrossFadedCompositeBinder",Ed),wn("CompositeExpressionBinder",Xc),wn("ProgramConfiguration",Hd,{omit:["_buffers"]}),wn("ProgramConfigurationSet",mu);var ks=8192;const Rp=Math.pow(2,14)-1,$m=-Rp-1;function jd(p){const c=ks/p.extent,_=p.loadGeometry();for(let w=0;w<_.length;w++){const P=_[w];for(let L=0;L<P.length;L++){const B=P[L],H=Math.round(B.x*c),X=Math.round(B.y*c);B.x=xe(H,$m,Rp),B.y=xe(X,$m,Rp),(H<B.x||H>B.x+1||X<B.y||X>B.y+1)&&ye("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return _}function Cd(p,c){return{type:p.type,id:p.id,properties:p.properties,geometry:c?jd(p):[]}}function Op(p,c,_,w,P){p.emplaceBack(2*c+(w+1)/2,2*_+(P+1)/2)}class Ch{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(_=>_.id),this.index=c.index,this.hasPattern=!1,this.layoutVertexArray=new cs,this.indexArray=new sc,this.segments=new Fi,this.programConfigurations=new mu(c.layers,c.zoom),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id)}populate(c,_,w){const P=this.layers[0],L=[];let B=null,H=!1;"circle"===P.type&&(B=P.layout.get("circle-sort-key"),H=!B.isConstant());for(const{feature:X,id:ne,index:ge,sourceLayerIndex:Ie}of c){const ze=this.layers[0]._featureFilter.needGeometry,Ze=Cd(X,ze);if(!this.layers[0]._featureFilter.filter(new Gr(this.zoom),Ze,w))continue;const We=H?B.evaluate(Ze,{},w):void 0,St={id:ne,properties:X.properties,type:X.type,sourceLayerIndex:Ie,index:ge,geometry:ze?Ze.geometry:jd(X),patterns:{},sortKey:We};L.push(St)}H&&L.sort((X,ne)=>X.sortKey-ne.sortKey);for(const X of L){const{geometry:ne,index:ge,sourceLayerIndex:Ie}=X,ze=c[ge].feature;this.addFeature(X,ne,ge,w),_.featureIndex.insert(ze,ne,ge,Ie,this.index)}}update(c,_,w){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,_,this.stateDependentLayers,w)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,Ei),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(c,_,w,P){for(const L of _)for(const B of L){const H=B.x,X=B.y;if(H<0||H>=ks||X<0||X>=ks)continue;const ne=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,c.sortKey),ge=ne.vertexLength;Op(this.layoutVertexArray,H,X,-1,-1),Op(this.layoutVertexArray,H,X,1,-1),Op(this.layoutVertexArray,H,X,1,1),Op(this.layoutVertexArray,H,X,-1,1),this.indexArray.emplaceBack(ge,ge+1,ge+2),this.indexArray.emplaceBack(ge,ge+3,ge+2),ne.vertexLength+=4,ne.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,w,{},P)}}function Qh(p,c){for(let _=0;_<p.length;_++)if(tf(c,p[_]))return!0;for(let _=0;_<c.length;_++)if(tf(p,c[_]))return!0;return!!Lp(p,c)}function Vf(p,c,_){return!!tf(p,c)||!!kp(c,p,_)}function Gf(p,c){if(1===p.length)return $f(c,p[0]);for(let _=0;_<c.length;_++){const w=c[_];for(let P=0;P<w.length;P++)if(tf(p,w[P]))return!0}for(let _=0;_<p.length;_++)if($f(c,p[_]))return!0;for(let _=0;_<c.length;_++)if(Lp(p,c[_]))return!0;return!1}function zy(p,c,_){if(p.length>1){if(Lp(p,c))return!0;for(let w=0;w<c.length;w++)if(kp(c[w],p,_))return!0}for(let w=0;w<p.length;w++)if(kp(p[w],c,_))return!0;return!1}function Lp(p,c){if(0===p.length||0===c.length)return!1;for(let _=0;_<p.length-1;_++){const w=p[_],P=p[_+1];for(let L=0;L<c.length-1;L++)if(Uy(w,P,c[L],c[L+1]))return!0}return!1}function Uy(p,c,_,w){return ce(p,_,w)!==ce(c,_,w)&&ce(p,c,_)!==ce(p,c,w)}function kp(p,c,_){const w=_*_;if(1===c.length)return p.distSqr(c[0])<w;for(let P=1;P<c.length;P++)if(ef(p,c[P-1],c[P])<w)return!0;return!1}function ef(p,c,_){const w=c.distSqr(_);if(0===w)return p.distSqr(c);const P=((p.x-c.x)*(_.x-c.x)+(p.y-c.y)*(_.y-c.y))/w;return p.distSqr(P<0?c:P>1?_:_.sub(c)._mult(P)._add(c))}function $f(p,c){let _,w,P,L=!1;for(let B=0;B<p.length;B++){_=p[B];for(let H=0,X=_.length-1;H<_.length;X=H++)w=_[H],P=_[X],w.y>c.y!=P.y>c.y&&c.x<(P.x-w.x)*(c.y-w.y)/(P.y-w.y)+w.x&&(L=!L)}return L}function tf(p,c){let _=!1;for(let w=0,P=p.length-1;w<p.length;P=w++){const L=p[w],B=p[P];L.y>c.y!=B.y>c.y&&c.x<(B.x-L.x)*(c.y-L.y)/(B.y-L.y)+L.x&&(_=!_)}return _}function Vy(p,c,_){const w=_[0],P=_[2];if(p.x<w.x&&c.x<w.x||p.x>P.x&&c.x>P.x||p.y<w.y&&c.y<w.y||p.y>P.y&&c.y>P.y)return!1;const L=ce(p,c,_[0]);return L!==ce(p,c,_[1])||L!==ce(p,c,_[2])||L!==ce(p,c,_[3])}function Sh(p,c,_){const w=c.paint.get(p).value;return"constant"===w.kind?w.value:_.programConfigurations.get(c.id).getMaxValue(p)}function nf(p){return Math.sqrt(p[0]*p[0]+p[1]*p[1])}function _l(p,c,_,w,P){if(!c[0]&&!c[1])return p;const L=Qe.convert(c)._mult(P);"viewport"===_&&L._rotate(-w);const B=[];for(let H=0;H<p.length;H++)B.push(p[H].sub(L));return B}wn("CircleBucket",Ch,{omit:["layers"]});const il=new yo({"circle-sort-key":new Ui(mt.layout_circle["circle-sort-key"])});var Gy={paint:new yo({"circle-radius":new Ui(mt.paint_circle["circle-radius"]),"circle-color":new Ui(mt.paint_circle["circle-color"]),"circle-blur":new Ui(mt.paint_circle["circle-blur"]),"circle-opacity":new Ui(mt.paint_circle["circle-opacity"]),"circle-translate":new Jn(mt.paint_circle["circle-translate"]),"circle-translate-anchor":new Jn(mt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Jn(mt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Jn(mt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ui(mt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ui(mt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ui(mt.paint_circle["circle-stroke-opacity"])}),layout:il},lc=1e-6,ql=typeof Float32Array<"u"?Float32Array:Array;function qd(){var p=new ql(9);return ql!=Float32Array&&(p[1]=0,p[2]=0,p[3]=0,p[5]=0,p[6]=0,p[7]=0),p[0]=1,p[4]=1,p[8]=1,p}function Yd(p){return p[0]=1,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=1,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=1,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p}function co(p,c,_){var w=c[0],P=c[1],L=c[2],B=c[3],H=c[4],X=c[5],ne=c[6],ge=c[7],Ie=c[8],ze=c[9],Ze=c[10],We=c[11],St=c[12],Et=c[13],Ht=c[14],nn=c[15],Ut=_[0],Xt=_[1],Zt=_[2],pn=_[3];return p[0]=Ut*w+Xt*H+Zt*Ie+pn*St,p[1]=Ut*P+Xt*X+Zt*ze+pn*Et,p[2]=Ut*L+Xt*ne+Zt*Ze+pn*Ht,p[3]=Ut*B+Xt*ge+Zt*We+pn*nn,p[4]=(Ut=_[4])*w+(Xt=_[5])*H+(Zt=_[6])*Ie+(pn=_[7])*St,p[5]=Ut*P+Xt*X+Zt*ze+pn*Et,p[6]=Ut*L+Xt*ne+Zt*Ze+pn*Ht,p[7]=Ut*B+Xt*ge+Zt*We+pn*nn,p[8]=(Ut=_[8])*w+(Xt=_[9])*H+(Zt=_[10])*Ie+(pn=_[11])*St,p[9]=Ut*P+Xt*X+Zt*ze+pn*Et,p[10]=Ut*L+Xt*ne+Zt*Ze+pn*Ht,p[11]=Ut*B+Xt*ge+Zt*We+pn*nn,p[12]=(Ut=_[12])*w+(Xt=_[13])*H+(Zt=_[14])*Ie+(pn=_[15])*St,p[13]=Ut*P+Xt*X+Zt*ze+pn*Et,p[14]=Ut*L+Xt*ne+Zt*Ze+pn*Ht,p[15]=Ut*B+Xt*ge+Zt*We+pn*nn,p}Math.hypot||(Math.hypot=function(){for(var p=0,c=arguments.length;c--;)p+=arguments[c]*arguments[c];return Math.sqrt(p)});var Co,p,Dh=co;function gu(){var p=new ql(3);return ql!=Float32Array&&(p[0]=0,p[1]=0,p[2]=0),p}function Mh(p,c,_){var w=new ql(3);return w[0]=p,w[1]=c,w[2]=_,w}function Hs(p,c,_){var w=c[0],P=c[1],L=c[2],B=c[3];return p[0]=_[0]*w+_[4]*P+_[8]*L+_[12]*B,p[1]=_[1]*w+_[5]*P+_[9]*L+_[13]*B,p[2]=_[2]*w+_[6]*P+_[10]*L+_[14]*B,p[3]=_[3]*w+_[7]*P+_[11]*L+_[15]*B,p}function rf(){var p=new ql(4);return ql!=Float32Array&&(p[0]=0,p[1]=0,p[2]=0),p[3]=1,p}function Yl(p,c){const _=Hs([],[p.x,p.y,0,1],c);return new Qe(_[0]/_[3],_[1]/_[3])}gu(),Co=new ql(4),ql!=Float32Array&&(Co[0]=0,Co[1]=0,Co[2]=0,Co[3]=0),gu(),Mh(1,0,0),Mh(0,1,0),rf(),rf(),qd(),p=new ql(2),ql!=Float32Array&&(p[0]=0,p[1]=0);class Ih extends Ch{}wn("HeatmapBucket",Ih,{omit:["layers"]});var Ga={paint:new yo({"heatmap-radius":new Ui(mt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ui(mt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Jn(mt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Yc(mt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Jn(mt.paint_heatmap["heatmap-opacity"])})};function Hm(p,{width:c,height:_},w,P){if(P){if(P instanceof Uint8ClampedArray)P=new Uint8Array(P.buffer);else if(P.length!==c*_*w)throw new RangeError(`mismatched image size. expected: ${P.length} but got: ${c*_*w}`)}else P=new Uint8Array(c*_*w);return p.width=c,p.height=_,p.data=P,p}function Zd(p,{width:c,height:_},w){if(c===p.width&&_===p.height)return;const P=Hm({},{width:c,height:_},w);sf(p,P,{x:0,y:0},{x:0,y:0},{width:Math.min(p.width,c),height:Math.min(p.height,_)},w),p.width=c,p.height=_,p.data=P.data}function sf(p,c,_,w,P,L){if(0===P.width||0===P.height)return c;if(P.width>p.width||P.height>p.height||_.x>p.width-P.width||_.y>p.height-P.height)throw new RangeError("out of range source coordinates for image copy");if(P.width>c.width||P.height>c.height||w.x>c.width-P.width||w.y>c.height-P.height)throw new RangeError("out of range destination coordinates for image copy");const B=p.data,H=c.data;if(B===H)throw new Error("srcData equals dstData, so image is already copied");for(let X=0;X<P.height;X++){const ne=((_.y+X)*p.width+_.x)*L,ge=((w.y+X)*c.width+w.x)*L;for(let Ie=0;Ie<P.width*L;Ie++)H[ge+Ie]=B[ne+Ie]}return c}class Th{constructor(c,_){Hm(this,c,1,_)}resize(c){Zd(this,c,1)}clone(){return new Th({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(c,_,w,P,L){sf(c,_,w,P,L,1)}}class Ol{constructor(c,_){Hm(this,c,4,_)}resize(c){Zd(this,c,4)}replace(c,_){_?this.data.set(c):this.data=c instanceof Uint8ClampedArray?new Uint8Array(c.buffer):c}clone(){return new Ol({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(c,_,w,P,L){sf(c,_,w,P,L,4)}}function Zl(p){const c={},_=p.resolution||256,w=p.clips?p.clips.length:1,P=p.image||new Ol({width:_,height:w});if(Math.log(_)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${_}`);const L=(B,H,X)=>{c[p.evaluationKey]=X;const ne=p.expression.evaluate(c);P.data[B+H+0]=Math.floor(255*ne.r/ne.a),P.data[B+H+1]=Math.floor(255*ne.g/ne.a),P.data[B+H+2]=Math.floor(255*ne.b/ne.a),P.data[B+H+3]=Math.floor(255*ne.a)};if(p.clips)for(let B=0,H=0;B<w;++B,H+=4*_)for(let X=0,ne=0;X<_;X++,ne+=4){const ge=X/(_-1),{start:Ie,end:ze}=p.clips[B];L(H,ne,Ie*(1-ge)+ze*ge)}else for(let B=0,H=0;B<_;B++,H+=4)L(0,H,B/(_-1));return P}wn("AlphaImage",Th),wn("RGBAImage",Ol);var _u={paint:new yo({"hillshade-illumination-direction":new Jn(mt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Jn(mt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Jn(mt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Jn(mt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Jn(mt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Jn(mt.paint_hillshade["hillshade-accent-color"])})};const af=ls([{name:"a_pos",components:2,type:"Int16"}],4),{members:qu}=af;var $a={exports:{}};function Kc(p,c,_){_=_||2;var w,P,L,B,H,X,ne,ge=c&&c.length,Ie=ge?c[0]*_:p.length,ze=lf(p,0,Ie,_,!0),Ze=[];if(!ze||ze.next===ze.prev)return Ze;if(ge&&(ze=function(St,Et,Ht,nn){var Ut,Xt,Zt,pn=[];for(Ut=0,Xt=Et.length;Ut<Xt;Ut++)(Zt=lf(St,Et[Ut]*nn,Ut<Xt-1?Et[Ut+1]*nn:St.length,nn,!1))===Zt.next&&(Zt.steiner=!0),pn.push(qm(Zt));for(pn.sort(jm),Ut=0;Ut<pn.length;Ut++)Ht=o_(pn[Ut],Ht);return Ht}(p,c,ze,_)),p.length>80*_){w=L=p[0],P=B=p[1];for(var We=_;We<Ie;We+=_)(H=p[We])<w&&(w=H),(X=p[We+1])<P&&(P=X),H>L&&(L=H),X>B&&(B=X);ne=0!==(ne=Math.max(L-w,B-P))?32767/ne:0}return Wd(ze,Ze,_,w,P,ne,0),Ze}function lf(p,c,_,w,P){var L,B;if(P===Wf(p,c,_,w)>0)for(L=c;L<_;L+=w)B=Zf(L,p[L],p[L+1],B);else for(L=_-w;L>=c;L-=w)B=Zf(L,p[L],p[L+1],B);return B&&qf(B,B.next)&&(df(B),B=B.next),B}function Sd(p,c){if(!p)return p;c||(c=p);var _,w=p;do{if(_=!1,w.steiner||!qf(w,w.next)&&0!==ha(w.prev,w,w.next))w=w.next;else{if(df(w),(w=c=w.prev)===w.next)break;_=!0}}while(_||w!==c);return c}function Wd(p,c,_,w,P,L,B){if(p){!B&&L&&function(ge,Ie,ze,Ze){var We=ge;do{0===We.z&&(We.z=Ll(We.x,We.y,Ie,ze,Ze)),We.prevZ=We.prev,We.nextZ=We.next,We=We.next}while(We!==ge);We.prevZ.nextZ=null,We.prevZ=null,function(St){var Et,Ht,nn,Ut,Xt,Zt,pn,oi,bi=1;do{for(Ht=St,St=null,Xt=null,Zt=0;Ht;){for(Zt++,nn=Ht,pn=0,Et=0;Et<bi&&(pn++,nn=nn.nextZ);Et++);for(oi=bi;pn>0||oi>0&&nn;)0!==pn&&(0===oi||!nn||Ht.z<=nn.z)?(Ut=Ht,Ht=Ht.nextZ,pn--):(Ut=nn,nn=nn.nextZ,oi--),Xt?Xt.nextZ=Ut:St=Ut,Ut.prevZ=Xt,Xt=Ut;Ht=nn}Xt.nextZ=null,bi*=2}while(Zt>1)}(We)}(p,w,P,L);for(var H,X,ne=p;p.prev!==p.next;)if(H=p.prev,X=p.next,L?Jc(p,w,P,L):Hf(p))c.push(H.i/_|0),c.push(p.i/_|0),c.push(X.i/_|0),df(p),p=X.next,ne=X.next;else if((p=X)===ne){B?1===B?Wd(p=jf(Sd(p),c,_),c,_,w,P,L,2):2===B&&r_(p,c,_,w,P,L):Wd(Sd(p),c,_,w,P,L,1);break}}}function Hf(p){var c=p.prev,_=p,w=p.next;if(ha(c,_,w)>=0)return!1;for(var P=c.x,L=_.x,B=w.x,H=c.y,X=_.y,ne=w.y,ge=P<L?P<B?P:B:L<B?L:B,Ie=H<X?H<ne?H:ne:X<ne?X:ne,ze=P>L?P>B?P:B:L>B?L:B,Ze=H>X?H>ne?H:ne:X>ne?X:ne,We=w.next;We!==c;){if(We.x>=ge&&We.x<=ze&&We.y>=Ie&&We.y<=Ze&&Mu(P,H,L,X,B,ne,We.x,We.y)&&ha(We.prev,We,We.next)>=0)return!1;We=We.next}return!0}function Jc(p,c,_,w){var P=p.prev,L=p,B=p.next;if(ha(P,L,B)>=0)return!1;for(var H=P.x,X=L.x,ne=B.x,ge=P.y,Ie=L.y,ze=B.y,Ze=H<X?H<ne?H:ne:X<ne?X:ne,We=ge<Ie?ge<ze?ge:ze:Ie<ze?Ie:ze,St=H>X?H>ne?H:ne:X>ne?X:ne,Et=ge>Ie?ge>ze?ge:ze:Ie>ze?Ie:ze,Ht=Ll(Ze,We,c,_,w),nn=Ll(St,Et,c,_,w),Ut=p.prevZ,Xt=p.nextZ;Ut&&Ut.z>=Ht&&Xt&&Xt.z<=nn;){if(Ut.x>=Ze&&Ut.x<=St&&Ut.y>=We&&Ut.y<=Et&&Ut!==P&&Ut!==B&&Mu(H,ge,X,Ie,ne,ze,Ut.x,Ut.y)&&ha(Ut.prev,Ut,Ut.next)>=0||(Ut=Ut.prevZ,Xt.x>=Ze&&Xt.x<=St&&Xt.y>=We&&Xt.y<=Et&&Xt!==P&&Xt!==B&&Mu(H,ge,X,Ie,ne,ze,Xt.x,Xt.y)&&ha(Xt.prev,Xt,Xt.next)>=0))return!1;Xt=Xt.nextZ}for(;Ut&&Ut.z>=Ht;){if(Ut.x>=Ze&&Ut.x<=St&&Ut.y>=We&&Ut.y<=Et&&Ut!==P&&Ut!==B&&Mu(H,ge,X,Ie,ne,ze,Ut.x,Ut.y)&&ha(Ut.prev,Ut,Ut.next)>=0)return!1;Ut=Ut.prevZ}for(;Xt&&Xt.z<=nn;){if(Xt.x>=Ze&&Xt.x<=St&&Xt.y>=We&&Xt.y<=Et&&Xt!==P&&Xt!==B&&Mu(H,ge,X,Ie,ne,ze,Xt.x,Xt.y)&&ha(Xt.prev,Xt,Xt.next)>=0)return!1;Xt=Xt.nextZ}return!0}function jf(p,c,_){var w=p;do{var P=w.prev,L=w.next.next;!qf(P,L)&&Fp(P,w,w.next,L)&&Iu(P,L)&&Iu(L,P)&&(c.push(P.i/_|0),c.push(w.i/_|0),c.push(L.i/_|0),df(w),df(w.next),w=p=L),w=w.next}while(w!==p);return Sd(w)}function r_(p,c,_,w,P,L){var B=p;do{for(var H=B.next.next;H!==B.prev;){if(B.i!==H.i&&cf(B,H)){var X=Yu(B,H);return B=Sd(B,B.next),X=Sd(X,X.next),Wd(B,c,_,w,P,L,0),void Wd(X,c,_,w,P,L,0)}H=H.next}B=B.next}while(B!==p)}function jm(p,c){return p.x-c.x}function o_(p,c){var _=function(P,L){var B,H=L,X=P.x,ne=P.y,ge=-1/0;do{if(ne<=H.y&&ne>=H.next.y&&H.next.y!==H.y){var Ie=H.x+(ne-H.y)*(H.next.x-H.x)/(H.next.y-H.y);if(Ie<=X&&Ie>ge&&(ge=Ie,B=H.x<H.next.x?H:H.next,Ie===X))return B}H=H.next}while(H!==L);if(!B)return null;var ze,Ze=B,We=B.x,St=B.y,Et=1/0;H=B;do{X>=H.x&&H.x>=We&&X!==H.x&&Mu(ne<St?X:ge,ne,We,St,ne<St?ge:X,ne,H.x,H.y)&&(ze=Math.abs(ne-H.y)/(X-H.x),Iu(H,P)&&(ze<Et||ze===Et&&(H.x>B.x||H.x===B.x&&s_(B,H)))&&(B=H,Et=ze)),H=H.next}while(H!==Ze);return B}(p,c);if(!_)return c;var w=Yu(_,p);return Sd(w,w.next),Sd(_,_.next)}function s_(p,c){return ha(p.prev,p,c.prev)<0&&ha(c.next,p,p.next)<0}function Ll(p,c,_,w,P){return(p=1431655765&((p=858993459&((p=252645135&((p=16711935&((p=(p-_)*P|0)|p<<8))|p<<4))|p<<2))|p<<1))|(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-w)*P|0)|c<<8))|c<<4))|c<<2))|c<<1))<<1}function qm(p){var c=p,_=p;do{(c.x<_.x||c.x===_.x&&c.y<_.y)&&(_=c),c=c.next}while(c!==p);return _}function Mu(p,c,_,w,P,L,B,H){return(P-B)*(c-H)>=(p-B)*(L-H)&&(p-B)*(w-H)>=(_-B)*(c-H)&&(_-B)*(L-H)>=(P-B)*(w-H)}function cf(p,c){return p.next.i!==c.i&&p.prev.i!==c.i&&!function(_,w){var P=_;do{if(P.i!==_.i&&P.next.i!==_.i&&P.i!==w.i&&P.next.i!==w.i&&Fp(P,P.next,_,w))return!0;P=P.next}while(P!==_);return!1}(p,c)&&(Iu(p,c)&&Iu(c,p)&&function(_,w){var P=_,L=!1,B=(_.x+w.x)/2,H=(_.y+w.y)/2;do{P.y>H!=P.next.y>H&&P.next.y!==P.y&&B<(P.next.x-P.x)*(H-P.y)/(P.next.y-P.y)+P.x&&(L=!L),P=P.next}while(P!==_);return L}(p,c)&&(ha(p.prev,p,c.prev)||ha(p,c.prev,c))||qf(p,c)&&ha(p.prev,p,p.next)>0&&ha(c.prev,c,c.next)>0)}function ha(p,c,_){return(c.y-p.y)*(_.x-c.x)-(c.x-p.x)*(_.y-c.y)}function qf(p,c){return p.x===c.x&&p.y===c.y}function Fp(p,c,_,w){var P=Yf(ha(p,c,_)),L=Yf(ha(p,c,w)),B=Yf(ha(_,w,p)),H=Yf(ha(_,w,c));return P!==L&&B!==H||!(0!==P||!uf(p,_,c))||!(0!==L||!uf(p,w,c))||!(0!==B||!uf(_,p,w))||!(0!==H||!uf(_,c,w))}function uf(p,c,_){return c.x<=Math.max(p.x,_.x)&&c.x>=Math.min(p.x,_.x)&&c.y<=Math.max(p.y,_.y)&&c.y>=Math.min(p.y,_.y)}function Yf(p){return p>0?1:p<0?-1:0}function Iu(p,c){return ha(p.prev,p,p.next)<0?ha(p,c,p.next)>=0&&ha(p,p.prev,c)>=0:ha(p,c,p.prev)<0||ha(p,p.next,c)<0}function Yu(p,c){var _=new Zu(p.i,p.x,p.y),w=new Zu(c.i,c.x,c.y),P=p.next,L=c.prev;return p.next=c,c.prev=p,_.next=P,P.prev=_,w.next=_,_.prev=w,L.next=w,w.prev=L,w}function Zf(p,c,_,w){var P=new Zu(p,c,_);return w?(P.next=w.next,P.prev=w,w.next.prev=P,w.next=P):(P.prev=P,P.next=P),P}function df(p){p.next.prev=p.prev,p.prev.next=p.next,p.prevZ&&(p.prevZ.nextZ=p.nextZ),p.nextZ&&(p.nextZ.prevZ=p.prevZ)}function Zu(p,c,_){this.i=p,this.x=c,this.y=_,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Wf(p,c,_,w){for(var P=0,L=c,B=_-w;L<_;L+=w)P+=(p[B]-p[L])*(p[L+1]+p[B+1]),B=L;return P}function a_(p,c,_,w,P){Ym(p,c,_||0,w||p.length-1,P||l_)}function Ym(p,c,_,w,P){for(;w>_;){if(w-_>600){var L=w-_+1,B=c-_+1,H=Math.log(L),X=.5*Math.exp(2*H/3),ne=.5*Math.sqrt(H*X*(L-X)/L)*(B-L/2<0?-1:1);Ym(p,c,Math.max(_,Math.floor(c-B*X/L+ne)),Math.min(w,Math.floor(c+(L-B)*X/L+ne)),P)}var ge=p[c],Ie=_,ze=w;for(hf(p,_,c),P(p[w],ge)>0&&hf(p,_,w);Ie<ze;){for(hf(p,Ie,ze),Ie++,ze--;P(p[Ie],ge)<0;)Ie++;for(;P(p[ze],ge)>0;)ze--}0===P(p[_],ge)?hf(p,_,ze):hf(p,++ze,w),ze<=c&&(_=ze+1),c<=ze&&(w=ze-1)}}function hf(p,c,_){var w=p[c];p[c]=p[_],p[_]=w}function l_(p,c){return p<c?-1:p>c?1:0}function Zm(p,c){const _=p.length;if(_<=1)return[p];const w=[];let P,L;for(let B=0;B<_;B++){const H=Re(p[B]);0!==H&&(p[B].area=Math.abs(H),void 0===L&&(L=H<0),L===H<0?(P&&w.push(P),P=[p[B]]):P.push(p[B]))}if(P&&w.push(P),c>1)for(let B=0;B<w.length;B++)w[B].length<=c||(a_(w[B],c,1,w[B].length-1,c_),w[B]=w[B].slice(0,c));return w}function c_(p,c){return c.area-p.area}function Xf(p,c,_){const w=_.patternDependencies;let P=!1;for(const L of c){const B=L.paint.get(`${p}-pattern`);B.isConstant()||(P=!0);const H=B.constantOr(null);H&&(P=!0,w[H.to]=!0,w[H.from]=!0)}return P}function Np(p,c,_,w,P){const L=P.patternDependencies;for(const B of c){const H=B.paint.get(`${p}-pattern`).value;if("constant"!==H.kind){let X=H.evaluate({zoom:w-1},_,{},P.availableImages),ne=H.evaluate({zoom:w},_,{},P.availableImages),ge=H.evaluate({zoom:w+1},_,{},P.availableImages);X=X&&X.name?X.name:X,ne=ne&&ne.name?ne.name:ne,ge=ge&&ge.name?ge.name:ge,L[X]=!0,L[ne]=!0,L[ge]=!0,_.patterns[B.id]={min:X,mid:ne,max:ge}}}return _}$a.exports=Kc,$a.exports.default=Kc,Kc.deviation=function(p,c,_,w){var P=c&&c.length,L=Math.abs(Wf(p,0,P?c[0]*_:p.length,_));if(P)for(var B=0,H=c.length;B<H;B++)L-=Math.abs(Wf(p,c[B]*_,B<H-1?c[B+1]*_:p.length,_));var X=0;for(B=0;B<w.length;B+=3){var ne=w[B]*_,ge=w[B+1]*_,Ie=w[B+2]*_;X+=Math.abs((p[ne]-p[Ie])*(p[ge+1]-p[ne+1])-(p[ne]-p[ge])*(p[Ie+1]-p[ne+1]))}return 0===L&&0===X?0:Math.abs((X-L)/L)},Kc.flatten=function(p){for(var c=p[0][0].length,_={vertices:[],holes:[],dimensions:c},w=0,P=0;P<p.length;P++){for(var L=0;L<p[P].length;L++)for(var B=0;B<c;B++)_.vertices.push(p[P][L][B]);P>0&&_.holes.push(w+=p[P-1].length)}return _};class Wu{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(_=>_.id),this.index=c.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new mr,this.indexArray=new sc,this.indexArray2=new Wc,this.programConfigurations=new mu(c.layers,c.zoom),this.segments=new Fi,this.segments2=new Fi,this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id)}populate(c,_,w){this.hasPattern=Xf("fill",this.layers,_);const P=this.layers[0].layout.get("fill-sort-key"),L=!P.isConstant(),B=[];for(const{feature:H,id:X,index:ne,sourceLayerIndex:ge}of c){const Ie=this.layers[0]._featureFilter.needGeometry,ze=Cd(H,Ie);if(!this.layers[0]._featureFilter.filter(new Gr(this.zoom),ze,w))continue;const Ze=L?P.evaluate(ze,{},w,_.availableImages):void 0,We={id:X,properties:H.properties,type:H.type,sourceLayerIndex:ge,index:ne,geometry:Ie?ze.geometry:jd(H),patterns:{},sortKey:Ze};B.push(We)}L&&B.sort((H,X)=>H.sortKey-X.sortKey);for(const H of B){const{geometry:X,index:ne,sourceLayerIndex:ge}=H;if(this.hasPattern){const Ie=Np("fill",this.layers,H,this.zoom,_);this.patternFeatures.push(Ie)}else this.addFeature(H,X,ne,w,{});_.featureIndex.insert(c[ne].feature,X,ne,ge,this.index)}}update(c,_,w){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,_,this.stateDependentLayers,w)}addFeatures(c,_,w){for(const P of this.patternFeatures)this.addFeature(P,P.geometry,P.index,_,w)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,qu),this.indexBuffer=c.createIndexBuffer(this.indexArray),this.indexBuffer2=c.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(c,_,w,P,L){for(const B of Zm(_,500)){let H=0;for(const Ze of B)H+=Ze.length;const X=this.segments.prepareSegment(H,this.layoutVertexArray,this.indexArray),ne=X.vertexLength,ge=[],Ie=[];for(const Ze of B){if(0===Ze.length)continue;Ze!==B[0]&&Ie.push(ge.length/2);const We=this.segments2.prepareSegment(Ze.length,this.layoutVertexArray,this.indexArray2),St=We.vertexLength;this.layoutVertexArray.emplaceBack(Ze[0].x,Ze[0].y),this.indexArray2.emplaceBack(St+Ze.length-1,St),ge.push(Ze[0].x),ge.push(Ze[0].y);for(let Et=1;Et<Ze.length;Et++)this.layoutVertexArray.emplaceBack(Ze[Et].x,Ze[Et].y),this.indexArray2.emplaceBack(St+Et-1,St+Et),ge.push(Ze[Et].x),ge.push(Ze[Et].y);We.vertexLength+=Ze.length,We.primitiveLength+=Ze.length}const ze=$a.exports(ge,Ie);for(let Ze=0;Ze<ze.length;Ze+=3)this.indexArray.emplaceBack(ne+ze[Ze],ne+ze[Ze+1],ne+ze[Ze+2]);X.vertexLength+=H,X.primitiveLength+=ze.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,w,L,P)}}wn("FillBucket",Wu,{omit:["layers","patternFeatures"]});const Wm=new yo({"fill-sort-key":new Ui(mt.layout_fill["fill-sort-key"])});var rl={paint:new yo({"fill-antialias":new Jn(mt.paint_fill["fill-antialias"]),"fill-opacity":new Ui(mt.paint_fill["fill-opacity"]),"fill-color":new Ui(mt.paint_fill["fill-color"]),"fill-outline-color":new Ui(mt.paint_fill["fill-outline-color"]),"fill-translate":new Jn(mt.paint_fill["fill-translate"]),"fill-translate-anchor":new Jn(mt.paint_fill["fill-translate-anchor"]),"fill-pattern":new oc(mt.paint_fill["fill-pattern"])}),layout:Wm};const u_=ls([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),d_=ls([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Xd}=u_;var Dd={},ff=Qe,Xm=pf;function pf(p,c,_,w,P){this.properties={},this.extent=_,this.type=0,this._pbf=p,this._geometry=-1,this._keys=w,this._values=P,p.readFields(Kf,this,c)}function Kf(p,c,_){1==p?c.id=_.readVarint():2==p?function(w,P){for(var L=w.readVarint()+w.pos;w.pos<L;){var B=P._keys[w.readVarint()],H=P._values[w.readVarint()];P.properties[B]=H}}(_,c):3==p?c.type=_.readVarint():4==p&&(c._geometry=_.pos)}function $y(p){for(var c,_,w=0,P=0,L=p.length,B=L-1;P<L;B=P++)w+=((_=p[B]).x-(c=p[P]).x)*(c.y+_.y);return w}pf.types=["Unknown","Point","LineString","Polygon"],pf.prototype.loadGeometry=function(){var p=this._pbf;p.pos=this._geometry;for(var c,_=p.readVarint()+p.pos,w=1,P=0,L=0,B=0,H=[];p.pos<_;){if(P<=0){var X=p.readVarint();w=7&X,P=X>>3}if(P--,1===w||2===w)L+=p.readSVarint(),B+=p.readSVarint(),1===w&&(c&&H.push(c),c=[]),c.push(new ff(L,B));else{if(7!==w)throw new Error("unknown command "+w);c&&c.push(c[0].clone())}}return c&&H.push(c),H},pf.prototype.bbox=function(){var p=this._pbf;p.pos=this._geometry;for(var c=p.readVarint()+p.pos,_=1,w=0,P=0,L=0,B=1/0,H=-1/0,X=1/0,ne=-1/0;p.pos<c;){if(w<=0){var ge=p.readVarint();_=7&ge,w=ge>>3}if(w--,1===_||2===_)(P+=p.readSVarint())<B&&(B=P),P>H&&(H=P),(L+=p.readSVarint())<X&&(X=L),L>ne&&(ne=L);else if(7!==_)throw new Error("unknown command "+_)}return[B,X,H,ne]},pf.prototype.toGeoJSON=function(p,c,_){var w,P,L=this.extent*Math.pow(2,_),B=this.extent*p,H=this.extent*c,X=this.loadGeometry(),ne=pf.types[this.type];function ge(Ze){for(var We=0;We<Ze.length;We++){var St=Ze[We];Ze[We]=[360*(St.x+B)/L-180,360/Math.PI*Math.atan(Math.exp((180-360*(St.y+H)/L)*Math.PI/180))-90]}}switch(this.type){case 1:var Ie=[];for(w=0;w<X.length;w++)Ie[w]=X[w][0];ge(X=Ie);break;case 2:for(w=0;w<X.length;w++)ge(X[w]);break;case 3:for(X=function(Ze){var We=Ze.length;if(We<=1)return[Ze];for(var St,Et,Ht=[],nn=0;nn<We;nn++){var Ut=$y(Ze[nn]);0!==Ut&&(void 0===Et&&(Et=Ut<0),Et===Ut<0?(St&&Ht.push(St),St=[Ze[nn]]):St.push(Ze[nn]))}return St&&Ht.push(St),Ht}(X),w=0;w<X.length;w++)for(P=0;P<X[w].length;P++)ge(X[w][P])}1===X.length?X=X[0]:ne="Multi"+ne;var ze={type:"Feature",geometry:{type:ne,coordinates:X},properties:this.properties};return"id"in this&&(ze.id=this.id),ze};var h_=Xm,Ah=Ph;function Ph(p,c){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=p,this._keys=[],this._values=[],this._features=[],p.readFields(Bp,this,c),this.length=this._features.length}function Bp(p,c,_){15===p?c.version=_.readVarint():1===p?c.name=_.readString():5===p?c.extent=_.readVarint():2===p?c._features.push(_.pos):3===p?c._keys.push(_.readString()):4===p&&c._values.push(function(w){for(var P=null,L=w.readVarint()+w.pos;w.pos<L;){var B=w.readVarint()>>3;P=1===B?w.readString():2===B?w.readFloat():3===B?w.readDouble():4===B?w.readVarint64():5===B?w.readVarint():6===B?w.readSVarint():7===B?w.readBoolean():null}return P}(_))}Ph.prototype.feature=function(p){if(p<0||p>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[p];var c=this._pbf.readVarint()+this._pbf.pos;return new h_(this._pbf,c,this.extent,this._keys,this._values)};var Km=Ah;function Jf(p,c,_){if(3===p){var w=new Km(_,_.readVarint()+_.pos);w.length&&(c[w.name]=w)}}Dd.VectorTile=function(p,c){this.layers=p.readFields(Jf,{},c)},Dd.VectorTileFeature=Xm,Dd.VectorTileLayer=Ah;const Qf=Dd.VectorTileFeature.types,mf=Math.pow(2,13);function Xu(p,c,_,w,P,L,B,H){p.emplaceBack(c,_,2*Math.floor(w*mf)+B,P*mf*2,L*mf*2,Math.round(H))}class Rh{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(_=>_.id),this.index=c.index,this.hasPattern=!1,this.layoutVertexArray=new Zr,this.centroidVertexArray=new ki,this.indexArray=new sc,this.programConfigurations=new mu(c.layers,c.zoom),this.segments=new Fi,this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id)}populate(c,_,w){this.features=[],this.hasPattern=Xf("fill-extrusion",this.layers,_);for(const{feature:P,id:L,index:B,sourceLayerIndex:H}of c){const X=this.layers[0]._featureFilter.needGeometry,ne=Cd(P,X);if(!this.layers[0]._featureFilter.filter(new Gr(this.zoom),ne,w))continue;const ge={id:L,sourceLayerIndex:H,index:B,geometry:X?ne.geometry:jd(P),properties:P.properties,type:P.type,patterns:{}};this.hasPattern?this.features.push(Np("fill-extrusion",this.layers,ge,this.zoom,_)):this.addFeature(ge,ge.geometry,B,w,{}),_.featureIndex.insert(P,ge.geometry,B,H,this.index,!0)}}addFeatures(c,_,w){for(const P of this.features){const{geometry:L}=P;this.addFeature(P,L,P.index,_,w)}}update(c,_,w){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,_,this.stateDependentLayers,w)}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,Xd),this.centroidVertexBuffer=c.createVertexBuffer(this.centroidVertexArray,d_.members,!0),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(c,_,w,P,L){const B={x:0,y:0,vertexCount:0};for(const H of Zm(_,500)){let X=0;for(const We of H)X+=We.length;let ne=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const We of H){if(0===We.length||ep(We))continue;let St=0;for(let Et=0;Et<We.length;Et++){const Ht=We[Et];if(Et>=1){const nn=We[Et-1];if(!gf(Ht,nn)){ne.vertexLength+4>Fi.MAX_VERTEX_ARRAY_LENGTH&&(ne=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Ut=Ht.sub(nn)._perp()._unit(),Xt=nn.dist(Ht);St+Xt>32768&&(St=0),Xu(this.layoutVertexArray,Ht.x,Ht.y,Ut.x,Ut.y,0,0,St),Xu(this.layoutVertexArray,Ht.x,Ht.y,Ut.x,Ut.y,0,1,St),B.x+=2*Ht.x,B.y+=2*Ht.y,B.vertexCount+=2,St+=Xt,Xu(this.layoutVertexArray,nn.x,nn.y,Ut.x,Ut.y,0,0,St),Xu(this.layoutVertexArray,nn.x,nn.y,Ut.x,Ut.y,0,1,St),B.x+=2*nn.x,B.y+=2*nn.y,B.vertexCount+=2;const Zt=ne.vertexLength;this.indexArray.emplaceBack(Zt,Zt+2,Zt+1),this.indexArray.emplaceBack(Zt+1,Zt+2,Zt+3),ne.vertexLength+=4,ne.primitiveLength+=2}}}}if(ne.vertexLength+X>Fi.MAX_VERTEX_ARRAY_LENGTH&&(ne=this.segments.prepareSegment(X,this.layoutVertexArray,this.indexArray)),"Polygon"!==Qf[c.type])continue;const ge=[],Ie=[],ze=ne.vertexLength;for(const We of H)if(0!==We.length){We!==H[0]&&Ie.push(ge.length/2);for(let St=0;St<We.length;St++){const Et=We[St];Xu(this.layoutVertexArray,Et.x,Et.y,0,0,1,1,0),B.x+=Et.x,B.y+=Et.y,B.vertexCount+=1,ge.push(Et.x),ge.push(Et.y)}}const Ze=$a.exports(ge,Ie);for(let We=0;We<Ze.length;We+=3)this.indexArray.emplaceBack(ze+Ze[We],ze+Ze[We+2],ze+Ze[We+1]);ne.primitiveLength+=Ze.length/3,ne.vertexLength+=X}for(let H=0;H<B.vertexCount;H++)this.centroidVertexArray.emplaceBack(Math.floor(B.x/B.vertexCount),Math.floor(B.y/B.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,w,L,P)}}function gf(p,c){return p.x===c.x&&(p.x<0||p.x>ks)||p.y===c.y&&(p.y<0||p.y>ks)}function ep(p){return p.every(c=>c.x<0)||p.every(c=>c.x>ks)||p.every(c=>c.y<0)||p.every(c=>c.y>ks)}wn("FillExtrusionBucket",Rh,{omit:["layers","features"]});var Hy={paint:new yo({"fill-extrusion-opacity":new Jn(mt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ui(mt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Jn(mt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Jn(mt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new oc(mt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ui(mt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ui(mt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Jn(mt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function _f(p,c){return p.x*c.x+p.y*c.y}function f_(p,c){if(1===p.length){let _=0;const w=c[_++];let P;for(;!P||w.equals(P);)if(P=c[_++],!P)return 1/0;for(;_<c.length;_++){const L=c[_],B=p[0],H=P.sub(w),X=L.sub(w),ne=B.sub(w),ge=_f(H,H),Ie=_f(H,X),ze=_f(X,X),Ze=_f(ne,H),We=_f(ne,X),St=ge*ze-Ie*Ie,Et=(ze*Ze-Ie*We)/St,Ht=(ge*We-Ie*Ze)/St,nn=w.z*(1-Et-Ht)+P.z*Et+L.z*Ht;if(isFinite(nn))return nn}return 1/0}{let _=1/0;for(const w of c)_=Math.min(_,w.z);return _}}const p_=ls([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:jy}=p_,m_=ls([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:g_}=m_,zp=Dd.VectorTileFeature.types,Jm=Math.cos(Math.PI/180*37.5),Kd=Math.pow(2,14)/.5;class Qm{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(_=>_.id),this.index=c.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(_=>{this.gradients[_.id]={}}),this.layoutVertexArray=new $r,this.layoutVertexArray2=new us,this.indexArray=new sc,this.programConfigurations=new mu(c.layers,c.zoom),this.segments=new Fi,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id)}populate(c,_,w){this.hasPattern=Xf("line",this.layers,_);const P=this.layers[0].layout.get("line-sort-key"),L=!P.isConstant(),B=[];for(const{feature:H,id:X,index:ne,sourceLayerIndex:ge}of c){const Ie=this.layers[0]._featureFilter.needGeometry,ze=Cd(H,Ie);if(!this.layers[0]._featureFilter.filter(new Gr(this.zoom),ze,w))continue;const Ze=L?P.evaluate(ze,{},w):void 0,We={id:X,properties:H.properties,type:H.type,sourceLayerIndex:ge,index:ne,geometry:Ie?ze.geometry:jd(H),patterns:{},sortKey:Ze};B.push(We)}L&&B.sort((H,X)=>H.sortKey-X.sortKey);for(const H of B){const{geometry:X,index:ne,sourceLayerIndex:ge}=H;if(this.hasPattern){const Ie=Np("line",this.layers,H,this.zoom,_);this.patternFeatures.push(Ie)}else this.addFeature(H,X,ne,w,{});_.featureIndex.insert(c[ne].feature,X,ne,ge,this.index)}}update(c,_,w){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,_,this.stateDependentLayers,w)}addFeatures(c,_,w){for(const P of this.patternFeatures)this.addFeature(P,P.geometry,P.index,_,w)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=c.createVertexBuffer(this.layoutVertexArray2,g_)),this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,jy),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(c){if(c.properties&&Object.prototype.hasOwnProperty.call(c.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(c.properties,"mapbox_clip_end"))return{start:+c.properties.mapbox_clip_start,end:+c.properties.mapbox_clip_end}}addFeature(c,_,w,P,L){const B=this.layers[0].layout,H=B.get("line-join").evaluate(c,{}),X=B.get("line-cap"),ne=B.get("line-miter-limit"),ge=B.get("line-round-limit");this.lineClips=this.lineFeatureClips(c);for(const Ie of _)this.addLine(Ie,c,H,X,ne,ge);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,w,L,P)}addLine(c,_,w,P,L,B){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ht=0;Ht<c.length-1;Ht++)this.totalDistance+=c[Ht].dist(c[Ht+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const H="Polygon"===zp[_.type];let X=c.length;for(;X>=2&&c[X-1].equals(c[X-2]);)X--;let ne=0;for(;ne<X-1&&c[ne].equals(c[ne+1]);)ne++;if(X<(H?3:2))return;"bevel"===w&&(L=1.05);const ge=this.overscaling<=16?122880/(512*this.overscaling):0,Ie=this.segments.prepareSegment(10*X,this.layoutVertexArray,this.indexArray);let ze,Ze,We,St,Et;this.e1=this.e2=-1,H&&(ze=c[X-2],Et=c[ne].sub(ze)._unit()._perp());for(let Ht=ne;Ht<X;Ht++){if(We=Ht===X-1?H?c[ne+1]:void 0:c[Ht+1],We&&c[Ht].equals(We))continue;Et&&(St=Et),ze&&(Ze=ze),ze=c[Ht],Et=We?We.sub(ze)._unit()._perp():St,St=St||Et;let nn=St.add(Et);0===nn.x&&0===nn.y||nn._unit();const Ut=St.x*Et.x+St.y*Et.y,Xt=nn.x*Et.x+nn.y*Et.y,Zt=0!==Xt?1/Xt:1/0,pn=2*Math.sqrt(2-2*Xt),oi=Xt<Jm&&Ze&&We,bi=St.x*Et.y-St.y*Et.x>0;if(oi&&Ht>ne){const On=ze.dist(Ze);if(On>2*ge){const ni=ze.sub(ze.sub(Ze)._mult(ge/On)._round());this.updateDistance(Ze,ni),this.addCurrentVertex(ni,St,0,0,Ie),Ze=ni}}const ti=Ze&&We;let Hn=ti?w:H?"butt":P;if(ti&&"round"===Hn&&(Zt<B?Hn="miter":Zt<=2&&(Hn="fakeround")),"miter"===Hn&&Zt>L&&(Hn="bevel"),"bevel"===Hn&&(Zt>2&&(Hn="flipbevel"),Zt<L&&(Hn="miter")),Ze&&this.updateDistance(Ze,ze),"miter"===Hn)nn._mult(Zt),this.addCurrentVertex(ze,nn,0,0,Ie);else if("flipbevel"===Hn){if(Zt>100)nn=Et.mult(-1);else{const On=Zt*St.add(Et).mag()/St.sub(Et).mag();nn._perp()._mult(On*(bi?-1:1))}this.addCurrentVertex(ze,nn,0,0,Ie),this.addCurrentVertex(ze,nn.mult(-1),0,0,Ie)}else if("bevel"===Hn||"fakeround"===Hn){const On=-Math.sqrt(Zt*Zt-1),ni=bi?On:0,Zn=bi?0:On;if(Ze&&this.addCurrentVertex(ze,St,ni,Zn,Ie),"fakeround"===Hn){const Tn=Math.round(180*pn/Math.PI/20);for(let Vi=1;Vi<Tn;Vi++){let Oi=Vi/Tn;if(.5!==Oi){const ws=Oi-.5;Oi+=Oi*ws*(Oi-1)*((1.0904+Ut*(Ut*(3.55645-1.43519*Ut)-3.2452))*ws*ws+(.848013+Ut*(.215638*Ut-1.06021)))}const Er=Et.sub(St)._mult(Oi)._add(St)._unit()._mult(bi?-1:1);this.addHalfVertex(ze,Er.x,Er.y,!1,bi,0,Ie)}}We&&this.addCurrentVertex(ze,Et,-ni,-Zn,Ie)}else if("butt"===Hn)this.addCurrentVertex(ze,nn,0,0,Ie);else if("square"===Hn){const On=Ze?1:-1;this.addCurrentVertex(ze,nn,On,On,Ie)}else"round"===Hn&&(Ze&&(this.addCurrentVertex(ze,St,0,0,Ie),this.addCurrentVertex(ze,St,1,1,Ie,!0)),We&&(this.addCurrentVertex(ze,Et,-1,-1,Ie,!0),this.addCurrentVertex(ze,Et,0,0,Ie)));if(oi&&Ht<X-1){const On=ze.dist(We);if(On>2*ge){const ni=ze.add(We.sub(ze)._mult(ge/On)._round());this.updateDistance(ze,ni),this.addCurrentVertex(ni,Et,0,0,Ie),ze=ni}}}}addCurrentVertex(c,_,w,P,L,B=!1){const H=_.y*P-_.x,X=-_.y-_.x*P;this.addHalfVertex(c,_.x+_.y*w,_.y-_.x*w,B,!1,w,L),this.addHalfVertex(c,H,X,B,!0,-P,L),this.distance>Kd/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(c,_,w,P,L,B))}addHalfVertex({x:c,y:_},w,P,L,B,H,X){const ne=.5*(this.lineClips?this.scaledDistance*(Kd-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((c<<1)+(L?1:0),(_<<1)+(B?1:0),Math.round(63*w)+128,Math.round(63*P)+128,1+(0===H?0:H<0?-1:1)|(63&ne)<<2,ne>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const ge=X.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,ge),X.primitiveLength++),B?this.e2=ge:this.e1=ge}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(c,_){this.distance+=c.dist(_),this.updateScaledDistance()}}wn("LineBucket",Qm,{omit:["layers","patternFeatures"]});const qy=new yo({"line-cap":new Jn(mt.layout_line["line-cap"]),"line-join":new Ui(mt.layout_line["line-join"]),"line-miter-limit":new Jn(mt.layout_line["line-miter-limit"]),"line-round-limit":new Jn(mt.layout_line["line-round-limit"]),"line-sort-key":new Ui(mt.layout_line["line-sort-key"])});var __={paint:new yo({"line-opacity":new Ui(mt.paint_line["line-opacity"]),"line-color":new Ui(mt.paint_line["line-color"]),"line-translate":new Jn(mt.paint_line["line-translate"]),"line-translate-anchor":new Jn(mt.paint_line["line-translate-anchor"]),"line-width":new Ui(mt.paint_line["line-width"]),"line-gap-width":new Ui(mt.paint_line["line-gap-width"]),"line-offset":new Ui(mt.paint_line["line-offset"]),"line-blur":new Ui(mt.paint_line["line-blur"]),"line-dasharray":new Pl(mt.paint_line["line-dasharray"]),"line-pattern":new oc(mt.paint_line["line-pattern"]),"line-gradient":new Yc(mt.paint_line["line-gradient"])}),layout:qy};const y_=new class extends Ui{possiblyEvaluate(p,c){return c=new Gr(Math.floor(c.zoom),{now:c.now,fadeDuration:c.fadeDuration,zoomHistory:c.zoomHistory,transition:c.transition}),super.possiblyEvaluate(p,c)}evaluate(p,c,_,w){return c=Ke({},c,{zoom:Math.floor(c.zoom)}),super.evaluate(p,c,_,w)}}(__.paint.properties["line-width"].specification);function Up(p,c){return c>0?c+2*p:p}y_.useIntegerZoom=!0;const Yy=ls([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),v_=ls([{name:"a_projected_pos",components:3,type:"Float32"}],4);ls([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const yf=ls([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);ls([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Vp=ls([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),b_=ls([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function x_(p,c,_){return p.sections.forEach(w=>{w.text=function(P,L,B){const H=L.layout.get("text-transform").evaluate(B,{});return"uppercase"===H?P=P.toLocaleUpperCase():"lowercase"===H&&(P=P.toLocaleLowerCase()),Js.applyArabicShaping&&(P=Js.applyArabicShaping(P)),P}(w.text,c,_)}),p}ls([{name:"triangle",components:3,type:"Uint16"}]),ls([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ls([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ls([{type:"Float32",name:"offsetX"}]),ls([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const vf={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};var eg=ps,w_=function(p,c,_,w,P){var L,B,H=8*P-w-1,X=(1<<H)-1,ne=X>>1,ge=-7,Ie=_?P-1:0,ze=_?-1:1,Ze=p[c+Ie];for(Ie+=ze,L=Ze&(1<<-ge)-1,Ze>>=-ge,ge+=H;ge>0;L=256*L+p[c+Ie],Ie+=ze,ge-=8);for(B=L&(1<<-ge)-1,L>>=-ge,ge+=w;ge>0;B=256*B+p[c+Ie],Ie+=ze,ge-=8);if(0===L)L=1-ne;else{if(L===X)return B?NaN:1/0*(Ze?-1:1);B+=Math.pow(2,w),L-=ne}return(Ze?-1:1)*B*Math.pow(2,L-w)},E_=function(p,c,_,w,P,L){var B,H,X,ne=8*L-P-1,ge=(1<<ne)-1,Ie=ge>>1,ze=23===P?Math.pow(2,-24)-Math.pow(2,-77):0,Ze=w?0:L-1,We=w?1:-1,St=c<0||0===c&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(H=isNaN(c)?1:0,B=ge):(B=Math.floor(Math.log(c)/Math.LN2),c*(X=Math.pow(2,-B))<1&&(B--,X*=2),(c+=B+Ie>=1?ze/X:ze*Math.pow(2,1-Ie))*X>=2&&(B++,X/=2),B+Ie>=ge?(H=0,B=ge):B+Ie>=1?(H=(c*X-1)*Math.pow(2,P),B+=Ie):(H=c*Math.pow(2,Ie-1)*Math.pow(2,P),B=0));P>=8;p[_+Ze]=255&H,Ze+=We,H/=256,P-=8);for(B=B<<P|H,ne+=P;ne>0;p[_+Ze]=255&B,Ze+=We,B/=256,ne-=8);p[_+Ze-We]|=128*St};function ps(p){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(p)?p:new Uint8Array(p||0),this.pos=0,this.type=0,this.length=this.buf.length}ps.Varint=0,ps.Fixed64=1,ps.Bytes=2,ps.Fixed32=5;var Jd,Tu=4294967296,Oh=1/Tu,C_=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Md(p){return p.type===ps.Bytes?p.readVarint()+p.pos:p.pos+1}function S_(p,c,_){var w=c<=16383?1:c<=2097151?2:c<=268435455?3:Math.floor(Math.log(c)/(7*Math.LN2));_.realloc(w);for(var P=_.pos-1;P>=p;P--)_.buf[P+w]=_.buf[P]}function Zy(p,c){for(var _=0;_<p.length;_++)c.writeVarint(p[_])}function Wy(p,c){for(var _=0;_<p.length;_++)c.writeSVarint(p[_])}function D_(p,c){for(var _=0;_<p.length;_++)c.writeFloat(p[_])}function Xy(p,c){for(var _=0;_<p.length;_++)c.writeDouble(p[_])}function Ky(p,c){for(var _=0;_<p.length;_++)c.writeBoolean(p[_])}function Jy(p,c){for(var _=0;_<p.length;_++)c.writeFixed32(p[_])}function Qy(p,c){for(var _=0;_<p.length;_++)c.writeSFixed32(p[_])}function Gp(p,c){for(var _=0;_<p.length;_++)c.writeFixed64(p[_])}function Ku(p,c){for(var _=0;_<p.length;_++)c.writeSFixed64(p[_])}function Id(p,c){return(p[c]|p[c+1]<<8|p[c+2]<<16)+16777216*p[c+3]}function Lh(p,c,_){p[_]=c,p[_+1]=c>>>8,p[_+2]=c>>>16,p[_+3]=c>>>24}function tg(p,c){return(p[c]|p[c+1]<<8|p[c+2]<<16)+(p[c+3]<<24)}function M_(p,c,_){1===p&&_.readMessage(rb,c)}function rb(p,c,_){if(3===p){const{id:w,bitmap:P,width:L,height:B,left:H,top:X,advance:ne}=_.readMessage(ob,{});c.push({id:w,bitmap:new Th({width:L+6,height:B+6},P),metrics:{width:L,height:B,left:H,top:X,advance:ne}})}}function ob(p,c,_){1===p?c.id=_.readVarint():2===p?c.bitmap=_.readBytes():3===p?c.width=_.readVarint():4===p?c.height=_.readVarint():5===p?c.left=_.readSVarint():6===p?c.top=_.readSVarint():7===p&&(c.advance=_.readVarint())}function ev(p){let c=0,_=0;for(const B of p)c+=B.w*B.h,_=Math.max(_,B.w);p.sort((B,H)=>H.h-B.h);const w=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(c/.95)),_),h:1/0}];let P=0,L=0;for(const B of p)for(let H=w.length-1;H>=0;H--){const X=w[H];if(!(B.w>X.w||B.h>X.h)){if(B.x=X.x,B.y=X.y,L=Math.max(L,B.y+B.h),P=Math.max(P,B.x+B.w),B.w===X.w&&B.h===X.h){const ne=w.pop();H<w.length&&(w[H]=ne)}else B.h===X.h?(X.x+=B.w,X.w-=B.w):B.w===X.w?(X.y+=B.h,X.h-=B.h):(w.push({x:X.x+B.w,y:X.y,w:X.w-B.w,h:B.h}),X.y+=B.h,X.h-=B.h);break}}return{w:P,h:L,fill:c/(P*L)||0}}ps.prototype={destroy:function(){this.buf=null},readFields:function(p,c,_){for(_=_||this.length;this.pos<_;){var w=this.readVarint(),P=w>>3,L=this.pos;this.type=7&w,p(P,c,this),this.pos===L&&this.skip(w)}return c},readMessage:function(p,c){return this.readFields(p,c,this.readVarint()+this.pos)},readFixed32:function(){var p=Id(this.buf,this.pos);return this.pos+=4,p},readSFixed32:function(){var p=tg(this.buf,this.pos);return this.pos+=4,p},readFixed64:function(){var p=Id(this.buf,this.pos)+Id(this.buf,this.pos+4)*Tu;return this.pos+=8,p},readSFixed64:function(){var p=Id(this.buf,this.pos)+tg(this.buf,this.pos+4)*Tu;return this.pos+=8,p},readFloat:function(){var p=w_(this.buf,this.pos,!0,23,4);return this.pos+=4,p},readDouble:function(){var p=w_(this.buf,this.pos,!0,52,8);return this.pos+=8,p},readVarint:function(p){var c,_,w=this.buf;return c=127&(_=w[this.pos++]),_<128?c:(c|=(127&(_=w[this.pos++]))<<7,_<128?c:(c|=(127&(_=w[this.pos++]))<<14,_<128?c:(c|=(127&(_=w[this.pos++]))<<21,_<128?c:function(P,L,B){var H,X,ne=B.buf;if(H=(112&(X=ne[B.pos++]))>>4,X<128||(H|=(127&(X=ne[B.pos++]))<<3,X<128)||(H|=(127&(X=ne[B.pos++]))<<10,X<128)||(H|=(127&(X=ne[B.pos++]))<<17,X<128)||(H|=(127&(X=ne[B.pos++]))<<24,X<128)||(H|=(1&(X=ne[B.pos++]))<<31,X<128))return function bf(p,c,_){return _?4294967296*c+(p>>>0):4294967296*(c>>>0)+(p>>>0)}(P,H,L);throw new Error("Expected varint not more than 10 bytes")}(c|=(15&(_=w[this.pos]))<<28,p,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var p=this.readVarint();return p%2==1?(p+1)/-2:p/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var p=this.readVarint()+this.pos,c=this.pos;return this.pos=p,p-c>=12&&C_?C_.decode(this.buf.subarray(c,p)):function(_,w,P){for(var L="",B=w;B<P;){var H,X,ne,ge=_[B],Ie=null,ze=ge>239?4:ge>223?3:ge>191?2:1;if(B+ze>P)break;1===ze?ge<128&&(Ie=ge):2===ze?128==(192&(H=_[B+1]))&&(Ie=(31&ge)<<6|63&H)<=127&&(Ie=null):3===ze?(X=_[B+2],128==(192&(H=_[B+1]))&&128==(192&X)&&((Ie=(15&ge)<<12|(63&H)<<6|63&X)<=2047||Ie>=55296&&Ie<=57343)&&(Ie=null)):4===ze&&(X=_[B+2],ne=_[B+3],128==(192&(H=_[B+1]))&&128==(192&X)&&128==(192&ne)&&((Ie=(15&ge)<<18|(63&H)<<12|(63&X)<<6|63&ne)<=65535||Ie>=1114112)&&(Ie=null)),null===Ie?(Ie=65533,ze=1):Ie>65535&&(Ie-=65536,L+=String.fromCharCode(Ie>>>10&1023|55296),Ie=56320|1023&Ie),L+=String.fromCharCode(Ie),B+=ze}return L}(this.buf,c,p)},readBytes:function(){var p=this.readVarint()+this.pos,c=this.buf.subarray(this.pos,p);return this.pos=p,c},readPackedVarint:function(p,c){if(this.type!==ps.Bytes)return p.push(this.readVarint(c));var _=Md(this);for(p=p||[];this.pos<_;)p.push(this.readVarint(c));return p},readPackedSVarint:function(p){if(this.type!==ps.Bytes)return p.push(this.readSVarint());var c=Md(this);for(p=p||[];this.pos<c;)p.push(this.readSVarint());return p},readPackedBoolean:function(p){if(this.type!==ps.Bytes)return p.push(this.readBoolean());var c=Md(this);for(p=p||[];this.pos<c;)p.push(this.readBoolean());return p},readPackedFloat:function(p){if(this.type!==ps.Bytes)return p.push(this.readFloat());var c=Md(this);for(p=p||[];this.pos<c;)p.push(this.readFloat());return p},readPackedDouble:function(p){if(this.type!==ps.Bytes)return p.push(this.readDouble());var c=Md(this);for(p=p||[];this.pos<c;)p.push(this.readDouble());return p},readPackedFixed32:function(p){if(this.type!==ps.Bytes)return p.push(this.readFixed32());var c=Md(this);for(p=p||[];this.pos<c;)p.push(this.readFixed32());return p},readPackedSFixed32:function(p){if(this.type!==ps.Bytes)return p.push(this.readSFixed32());var c=Md(this);for(p=p||[];this.pos<c;)p.push(this.readSFixed32());return p},readPackedFixed64:function(p){if(this.type!==ps.Bytes)return p.push(this.readFixed64());var c=Md(this);for(p=p||[];this.pos<c;)p.push(this.readFixed64());return p},readPackedSFixed64:function(p){if(this.type!==ps.Bytes)return p.push(this.readSFixed64());var c=Md(this);for(p=p||[];this.pos<c;)p.push(this.readSFixed64());return p},skip:function(p){var c=7&p;if(c===ps.Varint)for(;this.buf[this.pos++]>127;);else if(c===ps.Bytes)this.pos=this.readVarint()+this.pos;else if(c===ps.Fixed32)this.pos+=4;else{if(c!==ps.Fixed64)throw new Error("Unimplemented type: "+c);this.pos+=8}},writeTag:function(p,c){this.writeVarint(p<<3|c)},realloc:function(p){for(var c=this.length||16;c<this.pos+p;)c*=2;if(c!==this.length){var _=new Uint8Array(c);_.set(this.buf),this.buf=_,this.length=c}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(p){this.realloc(4),Lh(this.buf,p,this.pos),this.pos+=4},writeSFixed32:function(p){this.realloc(4),Lh(this.buf,p,this.pos),this.pos+=4},writeFixed64:function(p){this.realloc(8),Lh(this.buf,-1&p,this.pos),Lh(this.buf,Math.floor(p*Oh),this.pos+4),this.pos+=8},writeSFixed64:function(p){this.realloc(8),Lh(this.buf,-1&p,this.pos),Lh(this.buf,Math.floor(p*Oh),this.pos+4),this.pos+=8},writeVarint:function(p){(p=+p||0)>268435455||p<0?function(c,_){var w,P,L,H;if(c>=0?(w=c%4294967296|0,P=c/4294967296|0):(P=~(-c/4294967296),4294967295^(w=~(-c%4294967296))?w=w+1|0:(w=0,P=P+1|0)),c>=0x10000000000000000||c<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");_.realloc(10),L=w,(H=_).buf[H.pos++]=127&L|128,L>>>=7,H.buf[H.pos++]=127&L|128,L>>>=7,H.buf[H.pos++]=127&L|128,L>>>=7,H.buf[H.pos++]=127&L|128,H.buf[H.pos]=127&(L>>>=7),function(L,B){var H=(7&L)<<4;B.buf[B.pos++]|=H|((L>>>=3)?128:0),L&&(B.buf[B.pos++]=127&L|((L>>>=7)?128:0),L&&(B.buf[B.pos++]=127&L|((L>>>=7)?128:0),L&&(B.buf[B.pos++]=127&L|((L>>>=7)?128:0),L&&(B.buf[B.pos++]=127&L|((L>>>=7)?128:0),L&&(B.buf[B.pos++]=127&L)))))}(P,_)}(p,this):(this.realloc(4),this.buf[this.pos++]=127&p|(p>127?128:0),p<=127||(this.buf[this.pos++]=127&(p>>>=7)|(p>127?128:0),p<=127||(this.buf[this.pos++]=127&(p>>>=7)|(p>127?128:0),p<=127||(this.buf[this.pos++]=p>>>7&127))))},writeSVarint:function(p){this.writeVarint(p<0?2*-p-1:2*p)},writeBoolean:function(p){this.writeVarint(Boolean(p))},writeString:function(p){p=String(p),this.realloc(4*p.length),this.pos++;var c=this.pos;this.pos=function(w,P,L){for(var B,H,X=0;X<P.length;X++){if((B=P.charCodeAt(X))>55295&&B<57344){if(!H){B>56319||X+1===P.length?(w[L++]=239,w[L++]=191,w[L++]=189):H=B;continue}if(B<56320){w[L++]=239,w[L++]=191,w[L++]=189,H=B;continue}B=H-55296<<10|B-56320|65536,H=null}else H&&(w[L++]=239,w[L++]=191,w[L++]=189,H=null);B<128?w[L++]=B:(B<2048?w[L++]=B>>6|192:(B<65536?w[L++]=B>>12|224:(w[L++]=B>>18|240,w[L++]=B>>12&63|128),w[L++]=B>>6&63|128),w[L++]=63&B|128)}return L}(this.buf,p,this.pos);var _=this.pos-c;_>=128&&S_(c,_,this),this.pos=c-1,this.writeVarint(_),this.pos+=_},writeFloat:function(p){this.realloc(4),E_(this.buf,p,this.pos,!0,23,4),this.pos+=4},writeDouble:function(p){this.realloc(8),E_(this.buf,p,this.pos,!0,52,8),this.pos+=8},writeBytes:function(p){var c=p.length;this.writeVarint(c),this.realloc(c);for(var _=0;_<c;_++)this.buf[this.pos++]=p[_]},writeRawMessage:function(p,c){this.pos++;var _=this.pos;p(c,this);var w=this.pos-_;w>=128&&S_(_,w,this),this.pos=_-1,this.writeVarint(w),this.pos+=w},writeMessage:function(p,c,_){this.writeTag(p,ps.Bytes),this.writeRawMessage(c,_)},writePackedVarint:function(p,c){c.length&&this.writeMessage(p,Zy,c)},writePackedSVarint:function(p,c){c.length&&this.writeMessage(p,Wy,c)},writePackedBoolean:function(p,c){c.length&&this.writeMessage(p,Ky,c)},writePackedFloat:function(p,c){c.length&&this.writeMessage(p,D_,c)},writePackedDouble:function(p,c){c.length&&this.writeMessage(p,Xy,c)},writePackedFixed32:function(p,c){c.length&&this.writeMessage(p,Jy,c)},writePackedSFixed32:function(p,c){c.length&&this.writeMessage(p,Qy,c)},writePackedFixed64:function(p,c){c.length&&this.writeMessage(p,Gp,c)},writePackedSFixed64:function(p,c){c.length&&this.writeMessage(p,Ku,c)},writeBytesField:function(p,c){this.writeTag(p,ps.Bytes),this.writeBytes(c)},writeFixed32Field:function(p,c){this.writeTag(p,ps.Fixed32),this.writeFixed32(c)},writeSFixed32Field:function(p,c){this.writeTag(p,ps.Fixed32),this.writeSFixed32(c)},writeFixed64Field:function(p,c){this.writeTag(p,ps.Fixed64),this.writeFixed64(c)},writeSFixed64Field:function(p,c){this.writeTag(p,ps.Fixed64),this.writeSFixed64(c)},writeVarintField:function(p,c){this.writeTag(p,ps.Varint),this.writeVarint(c)},writeSVarintField:function(p,c){this.writeTag(p,ps.Varint),this.writeSVarint(c)},writeStringField:function(p,c){this.writeTag(p,ps.Bytes),this.writeString(c)},writeFloatField:function(p,c){this.writeTag(p,ps.Fixed32),this.writeFloat(c)},writeDoubleField:function(p,c){this.writeTag(p,ps.Fixed64),this.writeDouble(c)},writeBooleanField:function(p,c){this.writeVarintField(p,Boolean(c))}};class tp{constructor(c,{pixelRatio:_,version:w,stretchX:P,stretchY:L,content:B}){this.paddedRect=c,this.pixelRatio=_,this.stretchX=P,this.stretchY=L,this.content=B,this.version=w}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class $p{constructor(c,_){const w={},P={};this.haveRenderCallbacks=[];const L=[];this.addImages(c,w,L),this.addImages(_,P,L);const{w:B,h:H}=ev(L),X=new Ol({width:B||1,height:H||1});for(const ne in c){const ge=c[ne],Ie=w[ne].paddedRect;Ol.copy(ge.data,X,{x:0,y:0},{x:Ie.x+1,y:Ie.y+1},ge.data)}for(const ne in _){const ge=_[ne],Ie=P[ne].paddedRect,ze=Ie.x+1,Ze=Ie.y+1,We=ge.data.width,St=ge.data.height;Ol.copy(ge.data,X,{x:0,y:0},{x:ze,y:Ze},ge.data),Ol.copy(ge.data,X,{x:0,y:St-1},{x:ze,y:Ze-1},{width:We,height:1}),Ol.copy(ge.data,X,{x:0,y:0},{x:ze,y:Ze+St},{width:We,height:1}),Ol.copy(ge.data,X,{x:We-1,y:0},{x:ze-1,y:Ze},{width:1,height:St}),Ol.copy(ge.data,X,{x:0,y:0},{x:ze+We,y:Ze},{width:1,height:St})}this.image=X,this.iconPositions=w,this.patternPositions=P}addImages(c,_,w){for(const P in c){const L=c[P],B={x:0,y:0,w:L.data.width+2,h:L.data.height+2};w.push(B),_[P]=new tp(B,L),L.hasRenderCallback&&this.haveRenderCallbacks.push(P)}}patchUpdatedImages(c,_){c.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const w in c.updatedImages)this.patchUpdatedImage(this.iconPositions[w],c.getImage(w),_),this.patchUpdatedImage(this.patternPositions[w],c.getImage(w),_)}patchUpdatedImage(c,_,w){if(!c||!_||c.version===_.version)return;c.version=_.version;const[P,L]=c.tl;w.update(_.data,void 0,{x:P,y:L})}}wn("ImagePosition",tp),wn("ImageAtlas",$p),E.WritingMode=void 0,(Jd=E.WritingMode||(E.WritingMode={}))[Jd.none=0]="none",Jd[Jd.horizontal=1]="horizontal",Jd[Jd.vertical=2]="vertical",Jd[Jd.horizontalOnly=3]="horizontalOnly";class Hp{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(c,_){const w=new Hp;return w.scale=c||1,w.fontStack=_,w}static forImage(c){const _=new Hp;return _.imageName=c,_}}class kh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(c,_){const w=new kh;for(let P=0;P<c.sections.length;P++){const L=c.sections[P];L.image?w.addImageSection(L):w.addTextSection(L,_)}return w}length(){return this.text.length}getSection(c){return this.sections[this.sectionIndex[c]]}getSectionIndex(c){return this.sectionIndex[c]}getCharCode(c){return this.text.charCodeAt(c)}verticalizePunctuation(){this.text=function(c){let _="";for(let w=0;w<c.length;w++){const P=c.charCodeAt(w+1)||null,L=c.charCodeAt(w-1)||null;_+=P&&ba(P)&&!vf[c[w+1]]||L&&ba(L)&&!vf[c[w-1]]||!vf[c[w]]?c[w]:vf[c[w]]}return _}(this.text)}trim(){let c=0;for(let w=0;w<this.text.length&&qp[this.text.charCodeAt(w)];w++)c++;let _=this.text.length;for(let w=this.text.length-1;w>=0&&w>=c&&qp[this.text.charCodeAt(w)];w--)_--;this.text=this.text.substring(c,_),this.sectionIndex=this.sectionIndex.slice(c,_)}substring(c,_){const w=new kh;return w.text=this.text.substring(c,_),w.sectionIndex=this.sectionIndex.slice(c,_),w.sections=this.sections,w}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((c,_)=>Math.max(c,this.sections[_].scale),0)}addTextSection(c,_){this.text+=c.text,this.sections.push(Hp.forText(c.scale,c.fontStack||_));const w=this.sections.length-1;for(let P=0;P<c.text.length;++P)this.sectionIndex.push(w)}addImageSection(c){const _=c.image?c.image.name:"";if(0===_.length)return void ye("Can't add FormattedSection with an empty image.");const w=this.getNextImageSectionCharCode();w?(this.text+=String.fromCharCode(w),this.sections.push(Hp.forImage(_)),this.sectionIndex.push(this.sections.length-1)):ye("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function jp(p,c,_,w,P,L,B,H,X,ne,ge,Ie,ze,Ze,We,St){const Et=kh.fromFeature(p,P);let Ht;Ie===E.WritingMode.vertical&&Et.verticalizePunctuation();const{processBidirectionalText:nn,processStyledBidirectionalText:Ut}=Js;if(nn&&1===Et.sections.length){Ht=[];const pn=nn(Et.toString(),og(Et,ne,L,c,w,Ze,We));for(const oi of pn){const bi=new kh;bi.text=oi,bi.sections=Et.sections;for(let ti=0;ti<oi.length;ti++)bi.sectionIndex.push(0);Ht.push(bi)}}else if(Ut){Ht=[];const pn=Ut(Et.text,Et.sectionIndex,og(Et,ne,L,c,w,Ze,We));for(const oi of pn){const bi=new kh;bi.text=oi[0],bi.sectionIndex=oi[1],bi.sections=Et.sections,Ht.push(bi)}}else Ht=function(pn,oi){const bi=[],ti=pn.text;let Hn=0;for(const On of oi)bi.push(pn.substring(Hn,On)),Hn=On;return Hn<ti.length&&bi.push(pn.substring(Hn,ti.length)),bi}(Et,og(Et,ne,L,c,w,Ze,We));const Xt=[],Zt={positionedLines:Xt,text:Et.toString(),top:ge[1],bottom:ge[1],left:ge[0],right:ge[0],writingMode:Ie,iconsInText:!1,verticalizable:!1};return function(pn,oi,bi,ti,Hn,On,ni,Zn,Tn,Vi,Oi,Er){let ws=0,Do=-17,ea=0,Ta=0;const ol="right"===Zn?1:"left"===Zn?0:.5;let pa=0;for(const ta of Hn){ta.trim();const As=ta.getMaxScale(),br=24*(As-1),ma={positionedGlyphs:[],lineOffset:0};pn.positionedLines[pa]=ma;const ja=ma.positionedGlyphs;let Fl=0;if(!ta.length()){Do+=On,++pa;continue}for(let Aa=0;Aa<ta.length();Aa++){const Br=ta.getSection(Aa),Xl=ta.getSectionIndex(Aa),qa=ta.getCharCode(Aa);let al=0,Kl=null,nu=null,Lc=null,Pu=24;const Ec=!(Tn===E.WritingMode.horizontal||!Oi&&!jc(qa)||Oi&&(qp[qa]||(Ha=qa,Un.Arabic(Ha)||Un["Arabic Supplement"](Ha)||Un["Arabic Extended-A"](Ha)||Un["Arabic Presentation Forms-A"](Ha)||Un["Arabic Presentation Forms-B"](Ha))));if(Br.imageName){const Cc=ti[Br.imageName];if(!Cc)continue;Lc=Br.imageName,pn.iconsInText=pn.iconsInText||!0,nu=Cc.paddedRect;const yl=Cc.displaySize;Br.scale=24*Br.scale/Er,Kl={width:yl[0],height:yl[1],left:1,top:-3,advance:Ec?yl[1]:yl[0]},al=br+(24-yl[1]*Br.scale),Pu=Kl.advance;const nd=Ec?yl[0]*Br.scale-24*As:yl[1]*Br.scale-24*As;nd>0&&nd>Fl&&(Fl=nd)}else{const Cc=bi[Br.fontStack],yl=Cc&&Cc[qa];if(yl&&yl.rect)nu=yl.rect,Kl=yl.metrics;else{const nd=oi[Br.fontStack],Ad=nd&&nd[qa];if(!Ad)continue;Kl=Ad.metrics}al=24*(As-Br.scale)}Ec?(pn.verticalizable=!0,ja.push({glyph:qa,imageName:Lc,x:ws,y:Do+al,vertical:Ec,scale:Br.scale,fontStack:Br.fontStack,sectionIndex:Xl,metrics:Kl,rect:nu}),ws+=Pu*Br.scale+Vi):(ja.push({glyph:qa,imageName:Lc,x:ws,y:Do+al,vertical:Ec,scale:Br.scale,fontStack:Br.fontStack,sectionIndex:Xl,metrics:Kl,rect:nu}),ws+=Kl.advance*Br.scale+Vi)}0!==ja.length&&(ea=Math.max(ws-Vi,ea),T_(ja,0,ja.length-1,ol,Fl)),ws=0;const es=On*As+Fl;ma.lineOffset=Math.max(Fl,br),Do+=es,Ta=Math.max(es,Ta),++pa}var Ha;const sl=Do- -17,{horizontalAlign:kl,verticalAlign:Wl}=xa(ni);(function(ta,As,br,ma,ja,Fl,es,Aa,Br){const Xl=(As-br)*ja;let qa=0;qa=Fl!==es?-Aa*ma- -17:(-ma*Br+.5)*es;for(const al of ta)for(const Kl of al.positionedGlyphs)Kl.x+=Xl,Kl.y+=qa})(pn.positionedLines,ol,kl,Wl,ea,Ta,On,sl,Hn.length),pn.top+=-Wl*sl,pn.bottom=pn.top+sl,pn.left+=-kl*ea,pn.right=pn.left+ea}(Zt,c,_,w,Ht,B,H,X,Ie,ne,ze,St),!function(pn){for(const oi of pn)if(0!==oi.positionedGlyphs.length)return!1;return!0}(Xt)&&Zt}const qp={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},tv={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function I_(p,c,_,w,P,L){if(c.imageName){const B=w[c.imageName];return B?B.displaySize[0]*c.scale*24/L+P:0}{const B=_[c.fontStack],H=B&&B[p];return H?H.metrics.advance*c.scale+P:0}}function ig(p,c,_,w){const P=Math.pow(p-c,2);return w?p<c?P/2:2*P:P+Math.abs(_)*_}function Yp(p,c,_){let w=0;return 10===p&&(w-=1e4),_&&(w+=150),40!==p&&65288!==p||(w+=50),41!==c&&65289!==c||(w+=50),w}function rg(p,c,_,w,P,L){let B=null,H=ig(c,_,P,L);for(const X of w){const ne=ig(c-X.x,_,P,L)+X.badness;ne<=H&&(B=X,H=ne)}return{index:p,x:c,priorBreak:B,badness:H}}function Zp(p){return p?Zp(p.priorBreak).concat(p.index):[]}function og(p,c,_,w,P,L,B){if("point"!==L)return[];if(!p)return[];const H=[],X=function(ze,Ze,We,St,Et,Ht){let nn=0;for(let Ut=0;Ut<ze.length();Ut++){const Xt=ze.getSection(Ut);nn+=I_(ze.getCharCode(Ut),Xt,St,Et,Ze,Ht)}return nn/Math.max(1,Math.ceil(nn/We))}(p,c,_,w,P,B),ne=p.text.indexOf("\u200b")>=0;let ge=0;for(let ze=0;ze<p.length();ze++){const Ze=p.getSection(ze),We=p.getCharCode(ze);if(qp[We]||(ge+=I_(We,Ze,w,P,c,B)),ze<p.length()-1){const St=!((Ie=We)<11904||!(Un["Bopomofo Extended"](Ie)||Un.Bopomofo(Ie)||Un["CJK Compatibility Forms"](Ie)||Un["CJK Compatibility Ideographs"](Ie)||Un["CJK Compatibility"](Ie)||Un["CJK Radicals Supplement"](Ie)||Un["CJK Strokes"](Ie)||Un["CJK Symbols and Punctuation"](Ie)||Un["CJK Unified Ideographs Extension A"](Ie)||Un["CJK Unified Ideographs"](Ie)||Un["Enclosed CJK Letters and Months"](Ie)||Un["Halfwidth and Fullwidth Forms"](Ie)||Un.Hiragana(Ie)||Un["Ideographic Description Characters"](Ie)||Un["Kangxi Radicals"](Ie)||Un["Katakana Phonetic Extensions"](Ie)||Un.Katakana(Ie)||Un["Vertical Forms"](Ie)||Un["Yi Radicals"](Ie)||Un["Yi Syllables"](Ie)));(tv[We]||St||Ze.imageName)&&H.push(rg(ze+1,ge,X,H,Yp(We,p.getCharCode(ze+1),St&&ne),!1))}}var Ie;return Zp(rg(p.length(),ge,X,H,0,!0))}function xa(p){let c=.5,_=.5;switch(p){case"right":case"top-right":case"bottom-right":c=1;break;case"left":case"top-left":case"bottom-left":c=0}switch(p){case"bottom":case"bottom-right":case"bottom-left":_=1;break;case"top":case"top-right":case"top-left":_=0}return{horizontalAlign:c,verticalAlign:_}}function T_(p,c,_,w,P){if(!w&&!P)return;const L=p[_],B=(p[_].x+L.metrics.advance*L.scale)*w;for(let H=c;H<=_;H++)p[H].x-=B,p[H].y+=P}function nv(p,c,_){const{horizontalAlign:w,verticalAlign:P}=xa(_),L=c[0]-p.displaySize[0]*w,B=c[1]-p.displaySize[1]*P;return{image:p,top:B,bottom:B+p.displaySize[1],left:L,right:L+p.displaySize[0]}}function Wp(p,c,_,w,P,L){const B=p.image;let H;if(B.content){const Et=B.content,Ht=B.pixelRatio||1;H=[Et[0]/Ht,Et[1]/Ht,B.displaySize[0]-Et[2]/Ht,B.displaySize[1]-Et[3]/Ht]}const X=c.left*L,ne=c.right*L;let ge,Ie,ze,Ze;"width"===_||"both"===_?(Ze=P[0]+X-w[3],Ie=P[0]+ne+w[1]):(Ze=P[0]+(X+ne-B.displaySize[0])/2,Ie=Ze+B.displaySize[0]);const We=c.top*L,St=c.bottom*L;return"height"===_||"both"===_?(ge=P[1]+We-w[0],ze=P[1]+St+w[2]):(ge=P[1]+(We+St-B.displaySize[1])/2,ze=ge+B.displaySize[1]),{image:B,top:ge,right:Ie,bottom:ze,left:Ze,collisionPadding:H}}const Ju=128;function A_(p,c){const{expression:_}=c;if("constant"===_.kind)return{kind:"constant",layoutSize:_.evaluate(new Gr(p+1))};if("source"===_.kind)return{kind:"source"};{const{zoomStops:w,interpolationType:P}=_;let L=0;for(;L<w.length&&w[L]<=p;)L++;L=Math.max(0,L-1);let B=L;for(;B<w.length&&w[B]<p+1;)B++;B=Math.min(w.length-1,B);const H=w[L],X=w[B];return"composite"===_.kind?{kind:"composite",minZoom:H,maxZoom:X,interpolationType:P}:{kind:"camera",minZoom:H,maxZoom:X,minSize:_.evaluate(new Gr(H)),maxSize:_.evaluate(new Gr(X)),interpolationType:P}}}class Qd extends Qe{constructor(c,_,w,P){super(c,_),this.angle=w,void 0!==P&&(this.segment=P)}clone(){return new Qd(this.x,this.y,this.angle,this.segment)}}function P_(p,c,_,w,P){if(void 0===c.segment)return!0;let L=c,B=c.segment+1,H=0;for(;H>-_/2;){if(B--,B<0)return!1;H-=p[B].dist(L),L=p[B]}H+=p[B].dist(p[B+1]),B++;const X=[];let ne=0;for(;H<_/2;){const ge=p[B],Ie=p[B+1];if(!Ie)return!1;let ze=p[B-1].angleTo(ge)-ge.angleTo(Ie);for(ze=Math.abs((ze+3*Math.PI)%(2*Math.PI)-Math.PI),X.push({distance:H,angleDelta:ze}),ne+=ze;H-X[0].distance>w;)ne-=X.shift().angleDelta;if(ne>P)return!1;B++,H+=ge.dist(Ie)}return!0}function R_(p){let c=0;for(let _=0;_<p.length-1;_++)c+=p[_].dist(p[_+1]);return c}function sg(p,c,_){return p?.6*c*_:0}function iv(p,c){return Math.max(p?p.right-p.left:0,c?c.right-c.left:0)}function sb(p,c,_,w,P,L){const B=sg(_,P,L),H=iv(_,w)*L;let X=0;const ne=R_(p)/2;for(let ge=0;ge<p.length-1;ge++){const Ie=p[ge],ze=p[ge+1],Ze=Ie.dist(ze);if(X+Ze>ne){const We=(ne-X)/Ze,St=Ai(Ie.x,ze.x,We),Et=Ai(Ie.y,ze.y,We),Ht=new Qd(St,Et,ze.angleTo(Ie),ge);return Ht._round(),!B||P_(p,Ht,H,B,c)?Ht:void 0}X+=Ze}}function np(p,c,_,w,P,L,B,H,X){const ne=sg(w,L,B),ge=iv(w,P),Ie=ge*B,ze=0===p[0].x||p[0].x===X||0===p[0].y||p[0].y===X;return c-Ie<c/4&&(c=Ie+c/4),Xp(p,ze?c/2*H%c:(ge/2+2*L)*B*H%c,c,ne,_,Ie,ze,!1,X)}function Xp(p,c,_,w,P,L,B,H,X){const ne=L/2,ge=R_(p);let Ie=0,ze=c-_,Ze=[];for(let We=0;We<p.length-1;We++){const St=p[We],Et=p[We+1],Ht=St.dist(Et),nn=Et.angleTo(St);for(;ze+_<Ie+Ht;){ze+=_;const Ut=(ze-Ie)/Ht,Xt=Ai(St.x,Et.x,Ut),Zt=Ai(St.y,Et.y,Ut);if(Xt>=0&&Xt<X&&Zt>=0&&Zt<X&&ze-ne>=0&&ze+ne<=ge){const pn=new Qd(Xt,Zt,nn,We);pn._round(),w&&!P_(p,pn,L,w,P)||Ze.push(pn)}}Ie+=Ht}return H||Ze.length||B||(Ze=Xp(p,Ie/2,_,w,P,L,B,!0,X)),Ze}function ag(p,c,_,w,P){const L=[];for(let B=0;B<p.length;B++){const H=p[B];let X;for(let ne=0;ne<H.length-1;ne++){let ge=H[ne],Ie=H[ne+1];ge.x<c&&Ie.x<c||(ge.x<c?ge=new Qe(c,ge.y+(c-ge.x)/(Ie.x-ge.x)*(Ie.y-ge.y))._round():Ie.x<c&&(Ie=new Qe(c,ge.y+(c-ge.x)/(Ie.x-ge.x)*(Ie.y-ge.y))._round()),ge.y<_&&Ie.y<_||(ge.y<_?ge=new Qe(ge.x+(_-ge.y)/(Ie.y-ge.y)*(Ie.x-ge.x),_)._round():Ie.y<_&&(Ie=new Qe(ge.x+(_-ge.y)/(Ie.y-ge.y)*(Ie.x-ge.x),_)._round()),ge.x>=w&&Ie.x>=w||(ge.x>=w?ge=new Qe(w,ge.y+(w-ge.x)/(Ie.x-ge.x)*(Ie.y-ge.y))._round():Ie.x>=w&&(Ie=new Qe(w,ge.y+(w-ge.x)/(Ie.x-ge.x)*(Ie.y-ge.y))._round()),ge.y>=P&&Ie.y>=P||(ge.y>=P?ge=new Qe(ge.x+(P-ge.y)/(Ie.y-ge.y)*(Ie.x-ge.x),P)._round():Ie.y>=P&&(Ie=new Qe(ge.x+(P-ge.y)/(Ie.y-ge.y)*(Ie.x-ge.x),P)._round()),X&&ge.equals(X[X.length-1])||(X=[ge],L.push(X)),X.push(Ie)))))}}return L}function lg(p,c,_,w){const P=[],L=p.image,B=L.pixelRatio,H=L.paddedRect.w-2,X=L.paddedRect.h-2,ne=p.right-p.left,ge=p.bottom-p.top,Ie=L.stretchX||[[0,H]],ze=L.stretchY||[[0,X]],Ze=(On,ni)=>On+ni[1]-ni[0],We=Ie.reduce(Ze,0),St=ze.reduce(Ze,0),Et=H-We,Ht=X-St;let nn=0,Ut=We,Xt=0,Zt=St,pn=0,oi=Et,bi=0,ti=Ht;if(L.content&&w){const On=L.content;nn=ip(Ie,0,On[0]),Xt=ip(ze,0,On[1]),Ut=ip(Ie,On[0],On[2]),Zt=ip(ze,On[1],On[3]),pn=On[0]-nn,bi=On[1]-Xt,oi=On[2]-On[0]-Ut,ti=On[3]-On[1]-Zt}const Hn=(On,ni,Zn,Tn)=>{const Vi=Kp(On.stretch-nn,Ut,ne,p.left),Oi=rp(On.fixed-pn,oi,On.stretch,We),Er=Kp(ni.stretch-Xt,Zt,ge,p.top),ws=rp(ni.fixed-bi,ti,ni.stretch,St),Do=Kp(Zn.stretch-nn,Ut,ne,p.left),ea=rp(Zn.fixed-pn,oi,Zn.stretch,We),Ta=Kp(Tn.stretch-Xt,Zt,ge,p.top),ol=rp(Tn.fixed-bi,ti,Tn.stretch,St),pa=new Qe(Vi,Er),Ha=new Qe(Do,Er),sl=new Qe(Do,Ta),kl=new Qe(Vi,Ta),Wl=new Qe(Oi/B,ws/B),ta=new Qe(ea/B,ol/B),As=c*Math.PI/180;if(As){const ja=Math.sin(As),Fl=Math.cos(As),es=[Fl,-ja,ja,Fl];pa._matMult(es),Ha._matMult(es),kl._matMult(es),sl._matMult(es)}const br=On.stretch+On.fixed,ma=ni.stretch+ni.fixed;return{tl:pa,tr:Ha,bl:kl,br:sl,tex:{x:L.paddedRect.x+1+br,y:L.paddedRect.y+1+ma,w:Zn.stretch+Zn.fixed-br,h:Tn.stretch+Tn.fixed-ma},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Wl,pixelOffsetBR:ta,minFontScaleX:oi/B/ne,minFontScaleY:ti/B/ge,isSDF:_}};if(w&&(L.stretchX||L.stretchY)){const On=O_(Ie,Et,We),ni=O_(ze,Ht,St);for(let Zn=0;Zn<On.length-1;Zn++){const Tn=On[Zn],Vi=On[Zn+1];for(let Oi=0;Oi<ni.length-1;Oi++)P.push(Hn(Tn,ni[Oi],Vi,ni[Oi+1]))}}else P.push(Hn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:H+1},{fixed:0,stretch:X+1}));return P}function ip(p,c,_){let w=0;for(const P of p)w+=Math.max(c,Math.min(_,P[1]))-Math.max(c,Math.min(_,P[0]));return w}function O_(p,c,_){const w=[{fixed:-1,stretch:0}];for(const[P,L]of p){const B=w[w.length-1];w.push({fixed:P-B.stretch,stretch:B.stretch}),w.push({fixed:P-B.stretch,stretch:B.stretch+(L-P)})}return w.push({fixed:c+1,stretch:_}),w}function Kp(p,c,_,w){return p/c*_+w}function rp(p,c,_,w){return p-c*_/w}wn("Anchor",Qd);class op{constructor(c,_,w,P,L,B,H,X,ne,ge){if(this.boxStartIndex=c.length,ne){let Ie=B.top,ze=B.bottom;const Ze=B.collisionPadding;Ze&&(Ie-=Ze[1],ze+=Ze[3]);let We=ze-Ie;We>0&&(We=Math.max(10,We),this.circleDiameter=We)}else{let Ie=B.top*H-X[0],ze=B.bottom*H+X[2],Ze=B.left*H-X[3],We=B.right*H+X[1];const St=B.collisionPadding;if(St&&(Ze-=St[0]*H,Ie-=St[1]*H,We+=St[2]*H,ze+=St[3]*H),ge){const Et=new Qe(Ze,Ie),Ht=new Qe(We,Ie),nn=new Qe(Ze,ze),Ut=new Qe(We,ze),Xt=ge*Math.PI/180;Et._rotate(Xt),Ht._rotate(Xt),nn._rotate(Xt),Ut._rotate(Xt),Ze=Math.min(Et.x,Ht.x,nn.x,Ut.x),We=Math.max(Et.x,Ht.x,nn.x,Ut.x),Ie=Math.min(Et.y,Ht.y,nn.y,Ut.y),ze=Math.max(Et.y,Ht.y,nn.y,Ut.y)}c.emplaceBack(_.x,_.y,Ze,Ie,We,ze,w,P,L)}this.boxEndIndex=c.length}}class cg{constructor(c=[],_=ab){if(this.data=c,this.length=this.data.length,this.compare=_,this.length>0)for(let w=(this.length>>1)-1;w>=0;w--)this._down(w)}push(c){this.data.push(c),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const c=this.data[0],_=this.data.pop();return this.length--,this.length>0&&(this.data[0]=_,this._down(0)),c}peek(){return this.data[0]}_up(c){const{data:_,compare:w}=this,P=_[c];for(;c>0;){const L=c-1>>1,B=_[L];if(w(P,B)>=0)break;_[c]=B,c=L}_[c]=P}_down(c){const{data:_,compare:w}=this,P=this.length>>1,L=_[c];for(;c<P;){let B=1+(c<<1),H=_[B];const X=B+1;if(X<this.length&&w(_[X],H)<0&&(B=X,H=_[X]),w(H,L)>=0)break;_[c]=H,c=B}_[c]=L}}function ab(p,c){return p<c?-1:p>c?1:0}function ug(p,c=1,_=!1){let w=1/0,P=1/0,L=-1/0,B=-1/0;const H=p[0];for(let Ze=0;Ze<H.length;Ze++){const We=H[Ze];(!Ze||We.x<w)&&(w=We.x),(!Ze||We.y<P)&&(P=We.y),(!Ze||We.x>L)&&(L=We.x),(!Ze||We.y>B)&&(B=We.y)}const X=Math.min(L-w,B-P);let ne=X/2;const ge=new cg([],rv);if(0===X)return new Qe(w,P);for(let Ze=w;Ze<L;Ze+=X)for(let We=P;We<B;We+=X)ge.push(new eh(Ze+ne,We+ne,ne,p));let Ie=function(Ze){let We=0,St=0,Et=0;const Ht=Ze[0];for(let nn=0,Ut=Ht.length,Xt=Ut-1;nn<Ut;Xt=nn++){const Zt=Ht[nn],pn=Ht[Xt],oi=Zt.x*pn.y-pn.x*Zt.y;St+=(Zt.x+pn.x)*oi,Et+=(Zt.y+pn.y)*oi,We+=3*oi}return new eh(St/We,Et/We,0,Ze)}(p),ze=ge.length;for(;ge.length;){const Ze=ge.pop();(Ze.d>Ie.d||!Ie.d)&&(Ie=Ze,_&&console.log("found best %d after %d probes",Math.round(1e4*Ze.d)/1e4,ze)),Ze.max-Ie.d<=c||(ne=Ze.h/2,ge.push(new eh(Ze.p.x-ne,Ze.p.y-ne,ne,p)),ge.push(new eh(Ze.p.x+ne,Ze.p.y-ne,ne,p)),ge.push(new eh(Ze.p.x-ne,Ze.p.y+ne,ne,p)),ge.push(new eh(Ze.p.x+ne,Ze.p.y+ne,ne,p)),ze+=4)}return _&&(console.log(`num probes: ${ze}`),console.log(`best distance: ${Ie.d}`)),Ie.p}function rv(p,c){return c.max-p.max}function eh(p,c,_,w){this.p=new Qe(p,c),this.h=_,this.d=function(P,L){let B=!1,H=1/0;for(let X=0;X<L.length;X++){const ne=L[X];for(let ge=0,Ie=ne.length,ze=Ie-1;ge<Ie;ze=ge++){const Ze=ne[ge],We=ne[ze];Ze.y>P.y!=We.y>P.y&&P.x<(We.x-Ze.x)*(P.y-Ze.y)/(We.y-Ze.y)+Ze.x&&(B=!B),H=Math.min(H,ef(P,Ze,We))}}return(B?1:-1)*Math.sqrt(H)}(this.p,w),this.max=this.d+this.h*Math.SQRT2}const Jp=Number.POSITIVE_INFINITY;function dg(p,c){return c[1]!==Jp?function(_,w,P){let L=0,B=0;switch(w=Math.abs(w),P=Math.abs(P),_){case"top-right":case"top-left":case"top":B=P-7;break;case"bottom-right":case"bottom-left":case"bottom":B=7-P}switch(_){case"top-right":case"bottom-right":case"right":L=-w;break;case"top-left":case"bottom-left":case"left":L=w}return[L,B]}(p,c[0],c[1]):function(_,w){let P=0,L=0;w<0&&(w=0);const B=w/Math.sqrt(2);switch(_){case"top-right":case"top-left":L=B-7;break;case"bottom-right":case"bottom-left":L=7-B;break;case"bottom":L=7-w;break;case"top":L=w-7}switch(_){case"top-right":case"bottom-right":P=-B;break;case"top-left":case"bottom-left":P=B;break;case"left":P=w;break;case"right":P=-w}return[P,L]}(p,c[0])}function Td(p){switch(p){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function ov(p,c,_,w,P,L,B,H,X,ne,ge){let Ie=L.textMaxSize.evaluate(c,{});void 0===Ie&&(Ie=B);const ze=p.layers[0].layout,Ze=ze.get("icon-offset").evaluate(c,{},ge),We=L_(_.horizontal),St=B/24,Et=p.tilePixelRatio*St,Ht=p.tilePixelRatio*Ie/24,nn=p.tilePixelRatio*H,Ut=p.tilePixelRatio*ze.get("symbol-spacing"),Xt=ze.get("text-padding")*p.tilePixelRatio,Zt=function(Tn,Vi,Oi,Er=1){const ws=Tn.get("icon-padding").evaluate(Vi,{},Oi),Do=ws&&ws.values;return[Do[0]*Er,Do[1]*Er,Do[2]*Er,Do[3]*Er]}(ze,c,ge,p.tilePixelRatio),pn=ze.get("text-max-angle")/180*Math.PI,oi="viewport"!==ze.get("text-rotation-alignment")&&"point"!==ze.get("symbol-placement"),bi="map"===ze.get("icon-rotation-alignment")&&"point"!==ze.get("symbol-placement"),ti=ze.get("symbol-placement"),Hn=Ut/2,On=ze.get("icon-text-fit");let ni;w&&"none"!==On&&(p.allowVerticalPlacement&&_.vertical&&(ni=Wp(w,_.vertical,On,ze.get("icon-text-fit-padding"),Ze,St)),We&&(w=Wp(w,We,On,ze.get("icon-text-fit-padding"),Ze,St)));const Zn=(Tn,Vi)=>{Vi.x<0||Vi.x>=ks||Vi.y<0||Vi.y>=ks||function(Oi,Er,ws,Do,ea,Ta,ol,pa,Ha,sl,kl,Wl,ta,As,br,ma,ja,Fl,es,Aa,Br,Xl,qa,al,Kl){const nu=Oi.addToLineVertexArray(Er,ws);let Lc,Pu,Ec,Cc,yl=0,nd=0,Ad=0,Sf=0,mg=-1,Ru=-1;const Ou={};let Df=Wr.exports(""),Mf=0,rh=0;if(void 0===pa._unevaluatedLayout.getValue("text-radial-offset")?[Mf,rh]=pa.layout.get("text-offset").evaluate(Br,{},al).map(Nl=>24*Nl):(Mf=24*pa.layout.get("text-radial-offset").evaluate(Br,{},al),rh=Jp),Oi.allowVerticalPlacement&&Do.vertical){const Nl=pa.layout.get("text-rotate").evaluate(Br,{},al)+90;Ec=new op(Ha,Er,sl,kl,Wl,Do.vertical,ta,As,br,Nl),ol&&(Cc=new op(Ha,Er,sl,kl,Wl,ol,ja,Fl,br,Nl))}if(ea){const Nl=pa.layout.get("icon-rotate").evaluate(Br,{}),Fc="none"!==pa.layout.get("icon-text-fit"),Tf=lg(ea,Nl,qa,Fc),Vh=ol?lg(ol,Nl,qa,Fc):void 0;Pu=new op(Ha,Er,sl,kl,Wl,ea,ja,Fl,!1,Nl),yl=4*Tf.length;const mp=Oi.iconSizeData;let Lu=null;"source"===mp.kind?(Lu=[Ju*pa.layout.get("icon-size").evaluate(Br,{})],Lu[0]>Qu&&ye(`${Oi.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===mp.kind&&(Lu=[Ju*Xl.compositeIconSizes[0].evaluate(Br,{},al),Ju*Xl.compositeIconSizes[1].evaluate(Br,{},al)],(Lu[0]>Qu||Lu[1]>Qu)&&ye(`${Oi.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Oi.addSymbols(Oi.icon,Tf,Lu,Aa,es,Br,E.WritingMode.none,Er,nu.lineStartIndex,nu.lineLength,-1,al),mg=Oi.icon.placedSymbolArray.length-1,Vh&&(nd=4*Vh.length,Oi.addSymbols(Oi.icon,Vh,Lu,Aa,es,Br,E.WritingMode.vertical,Er,nu.lineStartIndex,nu.lineLength,-1,al),Ru=Oi.icon.placedSymbolArray.length-1)}const am=Object.keys(Do.horizontal);for(const Nl of am){const Fc=Do.horizontal[Nl];if(!Lc){Df=Wr.exports(Fc.text);const Vh=pa.layout.get("text-rotate").evaluate(Br,{},al);Lc=new op(Ha,Er,sl,kl,Wl,Fc,ta,As,br,Vh)}const Tf=1===Fc.positionedLines.length;if(Ad+=sp(Oi,Er,Fc,Ta,pa,br,Br,ma,nu,Do.vertical?E.WritingMode.horizontal:E.WritingMode.horizontalOnly,Tf?am:[Nl],Ou,mg,Xl,al),Tf)break}Do.vertical&&(Sf+=sp(Oi,Er,Do.vertical,Ta,pa,br,Br,ma,nu,E.WritingMode.vertical,["vertical"],Ou,Ru,Xl,al));const If=Lc?Lc.boxStartIndex:Oi.collisionBoxArray.length,Uh=Lc?Lc.boxEndIndex:Oi.collisionBoxArray.length,gg=Ec?Ec.boxStartIndex:Oi.collisionBoxArray.length,dp=Ec?Ec.boxEndIndex:Oi.collisionBoxArray.length,oh=Pu?Pu.boxStartIndex:Oi.collisionBoxArray.length,hp=Pu?Pu.boxEndIndex:Oi.collisionBoxArray.length,lm=Cc?Cc.boxStartIndex:Oi.collisionBoxArray.length,fp=Cc?Cc.boxEndIndex:Oi.collisionBoxArray.length;let kc=-1;const sh=(Nl,Fc)=>Nl&&Nl.circleDiameter?Math.max(Nl.circleDiameter,Fc):Fc;kc=sh(Lc,kc),kc=sh(Ec,kc),kc=sh(Pu,kc),kc=sh(Cc,kc);const pp=kc>-1?1:0;pp&&(kc*=Kl/24),Oi.glyphOffsetArray.length>=Hr.MAX_GLYPHS&&ye("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Br.sortKey&&Oi.addToSortKeyRanges(Oi.symbolInstances.length,Br.sortKey),Oi.symbolInstances.emplaceBack(Er.x,Er.y,Ou.right>=0?Ou.right:-1,Ou.center>=0?Ou.center:-1,Ou.left>=0?Ou.left:-1,Ou.vertical||-1,mg,Ru,Df,If,Uh,gg,dp,oh,hp,lm,fp,sl,Ad,Sf,yl,nd,pp,0,ta,Mf,rh,kc)}(p,Vi,Tn,_,w,P,ni,p.layers[0],p.collisionBoxArray,c.index,c.sourceLayerIndex,p.index,Et,[Xt,Xt,Xt,Xt],oi,X,nn,Zt,bi,Ze,c,L,ne,ge,B)};if("line"===ti)for(const Tn of ag(c.geometry,0,0,ks,ks)){const Vi=np(Tn,Ut,pn,_.vertical||We,w,24,Ht,p.overscaling,ks);for(const Oi of Vi){const Er=We;Er&&Qp(p,Er.text,Hn,Oi)||Zn(Tn,Oi)}}else if("line-center"===ti){for(const Tn of c.geometry)if(Tn.length>1){const Vi=sb(Tn,pn,_.vertical||We,w,24,Ht);Vi&&Zn(Tn,Vi)}}else if("Polygon"===c.type)for(const Tn of Zm(c.geometry,0)){const Vi=ug(Tn,16);Zn(Tn[0],new Qd(Vi.x,Vi.y,0))}else if("LineString"===c.type)for(const Tn of c.geometry)Zn(Tn,new Qd(Tn[0].x,Tn[0].y,0));else if("Point"===c.type)for(const Tn of c.geometry)for(const Vi of Tn)Zn([Vi],new Qd(Vi.x,Vi.y,0))}const Qu=32640;function sp(p,c,_,w,P,L,B,H,X,ne,ge,Ie,ze,Ze,We){const St=function(nn,Ut,Xt,Zt,pn,oi,bi,ti){const Hn=Zt.layout.get("text-rotate").evaluate(oi,{})*Math.PI/180,On=[];for(const ni of Ut.positionedLines)for(const Zn of ni.positionedGlyphs){if(!Zn.rect)continue;const Tn=Zn.rect||{};let Vi=4,Oi=!0,Er=1,ws=0;const Do=(pn||ti)&&Zn.vertical,ea=Zn.metrics.advance*Zn.scale/2;if(ti&&Ut.verticalizable){const es=24*(Zn.scale-1),Aa=(24-Zn.metrics.width*Zn.scale)/2;ws=ni.lineOffset/2-(Zn.imageName?-Aa:es)}if(Zn.imageName){const es=bi[Zn.imageName];Oi=es.sdf,Er=es.pixelRatio,Vi=1/Er}const Ta=pn?[Zn.x+ea,Zn.y]:[0,0];let ol=pn?[0,0]:[Zn.x+ea+Xt[0],Zn.y+Xt[1]-ws],pa=[0,0];Do&&(pa=ol,ol=[0,0]);const Ha=(Zn.metrics.left-Vi)*Zn.scale-ea+ol[0],sl=(-Zn.metrics.top-Vi)*Zn.scale+ol[1],kl=Ha+Tn.w*Zn.scale/Er,Wl=sl+Tn.h*Zn.scale/Er,ta=new Qe(Ha,sl),As=new Qe(kl,sl),br=new Qe(Ha,Wl),ma=new Qe(kl,Wl);if(Do){const es=new Qe(-ea,ea- -17),Aa=-Math.PI/2,Br=12-ea,Xl=new Qe(22-Br,-(Zn.imageName?Br:0)),qa=new Qe(...pa);ta._rotateAround(Aa,es)._add(Xl)._add(qa),As._rotateAround(Aa,es)._add(Xl)._add(qa),br._rotateAround(Aa,es)._add(Xl)._add(qa),ma._rotateAround(Aa,es)._add(Xl)._add(qa)}if(Hn){const es=Math.sin(Hn),Aa=Math.cos(Hn),Br=[Aa,-es,es,Aa];ta._matMult(Br),As._matMult(Br),br._matMult(Br),ma._matMult(Br)}const ja=new Qe(0,0),Fl=new Qe(0,0);On.push({tl:ta,tr:As,bl:br,br:ma,tex:Tn,writingMode:Ut.writingMode,glyphOffset:Ta,sectionIndex:Zn.sectionIndex,isSDF:Oi,pixelOffsetTL:ja,pixelOffsetBR:Fl,minFontScaleX:0,minFontScaleY:0})}return On}(0,_,H,P,L,B,w,p.allowVerticalPlacement),Et=p.textSizeData;let Ht=null;"source"===Et.kind?(Ht=[Ju*P.layout.get("text-size").evaluate(B,{})],Ht[0]>Qu&&ye(`${p.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===Et.kind&&(Ht=[Ju*Ze.compositeTextSizes[0].evaluate(B,{},We),Ju*Ze.compositeTextSizes[1].evaluate(B,{},We)],(Ht[0]>Qu||Ht[1]>Qu)&&ye(`${p.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),p.addSymbols(p.text,St,Ht,H,L,B,ne,c,X.lineStartIndex,X.lineLength,ze,We);for(const nn of ge)Ie[nn]=p.text.placedSymbolArray.length-1;return 4*St.length}function L_(p){for(const c in p)return p[c];return null}function Qp(p,c,_,w){const P=p.compareText;if(c in P){const L=P[c];for(let B=L.length-1;B>=0;B--)if(w.dist(L[B])<_)return!0}else P[c]=[];return P[c].push(w),!1}const Qc=Dd.VectorTileFeature.types,eu=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function no(p,c,_,w,P,L,B,H,X,ne,ge,Ie,ze){const Ze=H?Math.min(Qu,Math.round(H[0])):0,We=H?Math.min(Qu,Math.round(H[1])):0;p.emplaceBack(c,_,Math.round(32*w),Math.round(32*P),L,B,(Ze<<1)+(X?1:0),We,16*ne,16*ge,256*Ie,256*ze)}function Wn(p,c,_){p.emplaceBack(c.x,c.y,_),p.emplaceBack(c.x,c.y,_),p.emplaceBack(c.x,c.y,_),p.emplaceBack(c.x,c.y,_)}function uo(p){for(const c of p.sections)if(pl(c.text))return!0;return!1}class ed{constructor(c){this.layoutVertexArray=new Rl,this.indexArray=new sc,this.programConfigurations=c,this.segments=new Fi,this.dynamicLayoutVertexArray=new Pc,this.opacityVertexArray=new bc,this.placedSymbolArray=new $t}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(c,_,w,P){this.isEmpty()||(w&&(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,Yy.members),this.indexBuffer=c.createIndexBuffer(this.indexArray,_),this.dynamicLayoutVertexBuffer=c.createVertexBuffer(this.dynamicLayoutVertexArray,v_.members,!0),this.opacityVertexBuffer=c.createVertexBuffer(this.opacityVertexArray,eu,!0),this.opacityVertexBuffer.itemSize=1),(w||P)&&this.programConfigurations.upload(c))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}wn("SymbolBuffers",ed);class fa{constructor(c,_,w){this.layoutVertexArray=new c,this.layoutAttributes=_,this.indexArray=new w,this.segments=new Fi,this.collisionVertexArray=new jl}upload(c){this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=c.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=c.createVertexBuffer(this.collisionVertexArray,yf.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}wn("CollisionBuffers",fa);class Hr{constructor(c){this.collisionBoxArray=c.collisionBoxArray,this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(B=>B.id),this.index=c.index,this.pixelRatio=c.pixelRatio,this.sourceLayerIndex=c.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Yd([]),this.placementViewportMatrix=Yd([]);const _=this.layers[0]._unevaluatedLayout._values;this.textSizeData=A_(this.zoom,_["text-size"]),this.iconSizeData=A_(this.zoom,_["icon-size"]);const w=this.layers[0].layout,P=w.get("symbol-sort-key"),L=w.get("symbol-z-order");this.canOverlap="never"!==nm(w,"text-overlap","text-allow-overlap")||"never"!==nm(w,"icon-overlap","icon-allow-overlap")||w.get("text-ignore-placement")||w.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==L&&!P.isConstant(),this.sortFeaturesByY=("viewport-y"===L||"auto"===L&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===w.get("symbol-placement")&&(this.writingModes=w.get("text-writing-mode").map(B=>E.WritingMode[B])),this.stateDependentLayerIds=this.layers.filter(B=>B.isStateDependent()).map(B=>B.id),this.sourceID=c.sourceID}createArrays(){this.text=new ed(new mu(this.layers,this.zoom,c=>/^text/.test(c))),this.icon=new ed(new mu(this.layers,this.zoom,c=>/^icon/.test(c))),this.glyphOffsetArray=new Dn,this.lineVertexArray=new Ln,this.symbolInstances=new En}calculateGlyphDependencies(c,_,w,P,L){for(let B=0;B<c.length;B++)if(_[c.charCodeAt(B)]=!0,(w||P)&&L){const H=vf[c.charAt(B)];H&&(_[H.charCodeAt(0)]=!0)}}populate(c,_,w){const P=this.layers[0],L=P.layout,B=L.get("text-font"),H=L.get("text-field"),X=L.get("icon-image"),ne=("constant"!==H.value.kind||H.value.value instanceof Dt&&!H.value.value.isEmpty()||H.value.value.toString().length>0)&&("constant"!==B.value.kind||B.value.value.length>0),ge="constant"!==X.value.kind||!!X.value.value||Object.keys(X.parameters).length>0,Ie=L.get("symbol-sort-key");if(this.features=[],!ne&&!ge)return;const ze=_.iconDependencies,Ze=_.glyphDependencies,We=_.availableImages,St=new Gr(this.zoom);for(const{feature:Et,id:Ht,index:nn,sourceLayerIndex:Ut}of c){const Xt=P._featureFilter.needGeometry,Zt=Cd(Et,Xt);if(!P._featureFilter.filter(St,Zt,w))continue;let pn,oi;if(Xt||(Zt.geometry=jd(Et)),ne){const ti=P.getValueAndResolveTokens("text-field",Zt,w,We),Hn=Dt.factory(ti);uo(Hn)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Sa()||this.hasRTLText&&Js.isParsed())&&(pn=x_(Hn,P,Zt))}if(ge){const ti=P.getValueAndResolveTokens("icon-image",Zt,w,We);oi=ti instanceof Lt?ti:Lt.fromString(ti)}if(!pn&&!oi)continue;const bi=this.sortFeaturesByKey?Ie.evaluate(Zt,{},w):void 0;if(this.features.push({id:Ht,text:pn,icon:oi,index:nn,sourceLayerIndex:Ut,geometry:Zt.geometry,properties:Et.properties,type:Qc[Et.type],sortKey:bi}),oi&&(ze[oi.name]=!0),pn){const ti=B.evaluate(Zt,{},w).join(","),Hn="viewport"!==L.get("text-rotation-alignment")&&"point"!==L.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(E.WritingMode.vertical)>=0;for(const On of pn.sections)if(On.image)ze[On.image.name]=!0;else{const ni=ua(pn.toString()),Zn=On.fontStack||ti,Tn=Ze[Zn]=Ze[Zn]||{};this.calculateGlyphDependencies(On.text,Tn,Hn,this.allowVerticalPlacement,ni)}}}"line"===L.get("symbol-placement")&&(this.features=function(Et){const Ht={},nn={},Ut=[];let Xt=0;function Zt(ti){Ut.push(Et[ti]),Xt++}function pn(ti,Hn,On){const ni=nn[ti];return delete nn[ti],nn[Hn]=ni,Ut[ni].geometry[0].pop(),Ut[ni].geometry[0]=Ut[ni].geometry[0].concat(On[0]),ni}function oi(ti,Hn,On){const ni=Ht[Hn];return delete Ht[Hn],Ht[ti]=ni,Ut[ni].geometry[0].shift(),Ut[ni].geometry[0]=On[0].concat(Ut[ni].geometry[0]),ni}function bi(ti,Hn,On){const ni=On?Hn[0][Hn[0].length-1]:Hn[0][0];return`${ti}:${ni.x}:${ni.y}`}for(let ti=0;ti<Et.length;ti++){const Hn=Et[ti],On=Hn.geometry,ni=Hn.text?Hn.text.toString():null;if(!ni){Zt(ti);continue}const Zn=bi(ni,On),Tn=bi(ni,On,!0);if(Zn in nn&&Tn in Ht&&nn[Zn]!==Ht[Tn]){const Vi=oi(Zn,Tn,On),Oi=pn(Zn,Tn,Ut[Vi].geometry);delete Ht[Zn],delete nn[Tn],nn[bi(ni,Ut[Oi].geometry,!0)]=Oi,Ut[Vi].geometry=null}else Zn in nn?pn(Zn,Tn,On):Tn in Ht?oi(Zn,Tn,On):(Zt(ti),Ht[Zn]=Xt-1,nn[Tn]=Xt-1)}return Ut.filter(ti=>ti.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Et,Ht)=>Et.sortKey-Ht.sortKey)}update(c,_,w){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(c,_,this.layers,w),this.icon.programConfigurations.updatePaintArrays(c,_,this.layers,w))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(c){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(c),this.iconCollisionBox.upload(c)),this.text.upload(c,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(c,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(c,_){const w=this.lineVertexArray.length;if(void 0!==c.segment){let P=c.dist(_[c.segment+1]),L=c.dist(_[c.segment]);const B={};for(let H=c.segment+1;H<_.length;H++)B[H]={x:_[H].x,y:_[H].y,tileUnitDistanceFromAnchor:P},H<_.length-1&&(P+=_[H+1].dist(_[H]));for(let H=c.segment||0;H>=0;H--)B[H]={x:_[H].x,y:_[H].y,tileUnitDistanceFromAnchor:L},H>0&&(L+=_[H-1].dist(_[H]));for(let H=0;H<_.length;H++){const X=B[H];this.lineVertexArray.emplaceBack(X.x,X.y,X.tileUnitDistanceFromAnchor)}}return{lineStartIndex:w,lineLength:this.lineVertexArray.length-w}}addSymbols(c,_,w,P,L,B,H,X,ne,ge,Ie,ze){const Ze=c.indexArray,We=c.layoutVertexArray,St=c.segments.prepareSegment(4*_.length,We,Ze,this.canOverlap?B.sortKey:void 0),Et=this.glyphOffsetArray.length,Ht=St.vertexLength,nn=this.allowVerticalPlacement&&H===E.WritingMode.vertical?Math.PI/2:0,Ut=B.text&&B.text.sections;for(let Xt=0;Xt<_.length;Xt++){const{tl:Zt,tr:pn,bl:oi,br:bi,tex:ti,pixelOffsetTL:Hn,pixelOffsetBR:On,minFontScaleX:ni,minFontScaleY:Zn,glyphOffset:Tn,isSDF:Vi,sectionIndex:Oi}=_[Xt],Er=St.vertexLength,ws=Tn[1];no(We,X.x,X.y,Zt.x,ws+Zt.y,ti.x,ti.y,w,Vi,Hn.x,Hn.y,ni,Zn),no(We,X.x,X.y,pn.x,ws+pn.y,ti.x+ti.w,ti.y,w,Vi,On.x,Hn.y,ni,Zn),no(We,X.x,X.y,oi.x,ws+oi.y,ti.x,ti.y+ti.h,w,Vi,Hn.x,On.y,ni,Zn),no(We,X.x,X.y,bi.x,ws+bi.y,ti.x+ti.w,ti.y+ti.h,w,Vi,On.x,On.y,ni,Zn),Wn(c.dynamicLayoutVertexArray,X,nn),Ze.emplaceBack(Er,Er+1,Er+2),Ze.emplaceBack(Er+1,Er+2,Er+3),St.vertexLength+=4,St.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Tn[0]),Xt!==_.length-1&&Oi===_[Xt+1].sectionIndex||c.programConfigurations.populatePaintArrays(We.length,B,B.index,{},ze,Ut&&Ut[Oi])}c.placedSymbolArray.emplaceBack(X.x,X.y,Et,this.glyphOffsetArray.length-Et,Ht,ne,ge,X.segment,w?w[0]:0,w?w[1]:0,P[0],P[1],H,0,!1,0,Ie)}_addCollisionDebugVertex(c,_,w,P,L,B){return _.emplaceBack(0,0),c.emplaceBack(w.x,w.y,P,L,Math.round(B.x),Math.round(B.y))}addCollisionDebugVertices(c,_,w,P,L,B,H){const X=L.segments.prepareSegment(4,L.layoutVertexArray,L.indexArray),ne=X.vertexLength,ge=L.layoutVertexArray,Ie=L.collisionVertexArray,ze=H.anchorX,Ze=H.anchorY;this._addCollisionDebugVertex(ge,Ie,B,ze,Ze,new Qe(c,_)),this._addCollisionDebugVertex(ge,Ie,B,ze,Ze,new Qe(w,_)),this._addCollisionDebugVertex(ge,Ie,B,ze,Ze,new Qe(w,P)),this._addCollisionDebugVertex(ge,Ie,B,ze,Ze,new Qe(c,P)),X.vertexLength+=4;const We=L.indexArray;We.emplaceBack(ne,ne+1),We.emplaceBack(ne+1,ne+2),We.emplaceBack(ne+2,ne+3),We.emplaceBack(ne+3,ne),X.primitiveLength+=4}addDebugCollisionBoxes(c,_,w,P){for(let L=c;L<_;L++){const B=this.collisionBoxArray.get(L);this.addCollisionDebugVertices(B.x1,B.y1,B.x2,B.y2,P?this.textCollisionBox:this.iconCollisionBox,B.anchorPoint,w)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new fa(Rc,Vp.members,Wc),this.iconCollisionBox=new fa(Rc,Vp.members,Wc);for(let c=0;c<this.symbolInstances.length;c++){const _=this.symbolInstances.get(c);this.addDebugCollisionBoxes(_.textBoxStartIndex,_.textBoxEndIndex,_,!0),this.addDebugCollisionBoxes(_.verticalTextBoxStartIndex,_.verticalTextBoxEndIndex,_,!0),this.addDebugCollisionBoxes(_.iconBoxStartIndex,_.iconBoxEndIndex,_,!1),this.addDebugCollisionBoxes(_.verticalIconBoxStartIndex,_.verticalIconBoxEndIndex,_,!1)}}_deserializeCollisionBoxesForSymbol(c,_,w,P,L,B,H,X,ne){const ge={};for(let Ie=_;Ie<w;Ie++){const ze=c.get(Ie);ge.textBox={x1:ze.x1,y1:ze.y1,x2:ze.x2,y2:ze.y2,anchorPointX:ze.anchorPointX,anchorPointY:ze.anchorPointY},ge.textFeatureIndex=ze.featureIndex;break}for(let Ie=P;Ie<L;Ie++){const ze=c.get(Ie);ge.verticalTextBox={x1:ze.x1,y1:ze.y1,x2:ze.x2,y2:ze.y2,anchorPointX:ze.anchorPointX,anchorPointY:ze.anchorPointY},ge.verticalTextFeatureIndex=ze.featureIndex;break}for(let Ie=B;Ie<H;Ie++){const ze=c.get(Ie);ge.iconBox={x1:ze.x1,y1:ze.y1,x2:ze.x2,y2:ze.y2,anchorPointX:ze.anchorPointX,anchorPointY:ze.anchorPointY},ge.iconFeatureIndex=ze.featureIndex;break}for(let Ie=X;Ie<ne;Ie++){const ze=c.get(Ie);ge.verticalIconBox={x1:ze.x1,y1:ze.y1,x2:ze.x2,y2:ze.y2,anchorPointX:ze.anchorPointX,anchorPointY:ze.anchorPointY},ge.verticalIconFeatureIndex=ze.featureIndex;break}return ge}deserializeCollisionBoxes(c){this.collisionArrays=[];for(let _=0;_<this.symbolInstances.length;_++){const w=this.symbolInstances.get(_);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(c,w.textBoxStartIndex,w.textBoxEndIndex,w.verticalTextBoxStartIndex,w.verticalTextBoxEndIndex,w.iconBoxStartIndex,w.iconBoxEndIndex,w.verticalIconBoxStartIndex,w.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(c,_){const w=c.placedSymbolArray.get(_),P=w.vertexStartIndex+4*w.numGlyphs;for(let L=w.vertexStartIndex;L<P;L+=4)c.indexArray.emplaceBack(L,L+1,L+2),c.indexArray.emplaceBack(L+1,L+2,L+3)}getSortedSymbolIndexes(c){if(this.sortedAngle===c&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const _=Math.sin(c),w=Math.cos(c),P=[],L=[],B=[];for(let H=0;H<this.symbolInstances.length;++H){B.push(H);const X=this.symbolInstances.get(H);P.push(0|Math.round(_*X.anchorX+w*X.anchorY)),L.push(X.featureIndex)}return B.sort((H,X)=>P[H]-P[X]||L[X]-L[H]),B}addToSortKeyRanges(c,_){const w=this.sortKeyRanges[this.sortKeyRanges.length-1];w&&w.sortKey===_?w.symbolInstanceEnd=c+1:this.sortKeyRanges.push({sortKey:_,symbolInstanceStart:c,symbolInstanceEnd:c+1})}sortFeatures(c){if(this.sortFeaturesByY&&this.sortedAngle!==c&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(c),this.sortedAngle=c,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const _ of this.symbolInstanceIndexes){const w=this.symbolInstances.get(_);this.featureSortOrder.push(w.featureIndex),[w.rightJustifiedTextSymbolIndex,w.centerJustifiedTextSymbolIndex,w.leftJustifiedTextSymbolIndex].forEach((P,L,B)=>{P>=0&&B.indexOf(P)===L&&this.addIndicesForPlacedSymbol(this.text,P)}),w.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,w.verticalPlacedTextSymbolIndex),w.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,w.placedIconSymbolIndex),w.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,w.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}wn("SymbolBucket",Hr,{omit:["layers","collisionBoxArray","features","compareText"]}),Hr.MAX_GLYPHS=65535,Hr.addDynamicAttributes=Wn;const td=new yo({"symbol-placement":new Jn(mt.layout_symbol["symbol-placement"]),"symbol-spacing":new Jn(mt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Jn(mt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ui(mt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Jn(mt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Jn(mt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Jn(mt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Jn(mt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Jn(mt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Jn(mt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ui(mt.layout_symbol["icon-size"]),"icon-text-fit":new Jn(mt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Jn(mt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ui(mt.layout_symbol["icon-image"]),"icon-rotate":new Ui(mt.layout_symbol["icon-rotate"]),"icon-padding":new Ui(mt.layout_symbol["icon-padding"]),"icon-keep-upright":new Jn(mt.layout_symbol["icon-keep-upright"]),"icon-offset":new Ui(mt.layout_symbol["icon-offset"]),"icon-anchor":new Ui(mt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Jn(mt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Jn(mt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Jn(mt.layout_symbol["text-rotation-alignment"]),"text-field":new Ui(mt.layout_symbol["text-field"]),"text-font":new Ui(mt.layout_symbol["text-font"]),"text-size":new Ui(mt.layout_symbol["text-size"]),"text-max-width":new Ui(mt.layout_symbol["text-max-width"]),"text-line-height":new Jn(mt.layout_symbol["text-line-height"]),"text-letter-spacing":new Ui(mt.layout_symbol["text-letter-spacing"]),"text-justify":new Ui(mt.layout_symbol["text-justify"]),"text-radial-offset":new Ui(mt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Jn(mt.layout_symbol["text-variable-anchor"]),"text-anchor":new Ui(mt.layout_symbol["text-anchor"]),"text-max-angle":new Jn(mt.layout_symbol["text-max-angle"]),"text-writing-mode":new Jn(mt.layout_symbol["text-writing-mode"]),"text-rotate":new Ui(mt.layout_symbol["text-rotate"]),"text-padding":new Jn(mt.layout_symbol["text-padding"]),"text-keep-upright":new Jn(mt.layout_symbol["text-keep-upright"]),"text-transform":new Ui(mt.layout_symbol["text-transform"]),"text-offset":new Ui(mt.layout_symbol["text-offset"]),"text-allow-overlap":new Jn(mt.layout_symbol["text-allow-overlap"]),"text-overlap":new Jn(mt.layout_symbol["text-overlap"]),"text-ignore-placement":new Jn(mt.layout_symbol["text-ignore-placement"]),"text-optional":new Jn(mt.layout_symbol["text-optional"])});var em={paint:new yo({"icon-opacity":new Ui(mt.paint_symbol["icon-opacity"]),"icon-color":new Ui(mt.paint_symbol["icon-color"]),"icon-halo-color":new Ui(mt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ui(mt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ui(mt.paint_symbol["icon-halo-blur"]),"icon-translate":new Jn(mt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Jn(mt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ui(mt.paint_symbol["text-opacity"]),"text-color":new Ui(mt.paint_symbol["text-color"],{runtimeType:Di,getOverride:p=>p.textColor,hasOverride:p=>!!p.textColor}),"text-halo-color":new Ui(mt.paint_symbol["text-halo-color"]),"text-halo-width":new Ui(mt.paint_symbol["text-halo-width"]),"text-halo-blur":new Ui(mt.paint_symbol["text-halo-blur"]),"text-translate":new Jn(mt.paint_symbol["text-translate"]),"text-translate-anchor":new Jn(mt.paint_symbol["text-translate-anchor"])}),layout:td};class tm{constructor(c){if(void 0===c.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=c.property.overrides?c.property.overrides.runtimeType:fr,this.defaultValue=c}evaluate(c){if(c.formattedSection){const _=this.defaultValue.property.overrides;if(_&&_.hasOverride(c.formattedSection))return _.getOverride(c.formattedSection)}return c.feature&&c.featureState?this.defaultValue.evaluate(c.feature,c.featureState):this.defaultValue.property.specification.default}eachChild(c){this.defaultValue.isConstant()||c(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}wn("FormatSectionOverride",tm,{omit:["defaultValue"]});class Fh extends Ma{constructor(c){super(c,em)}recalculate(c,_){if(super.recalculate(c,_),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const w=this.layout.get("text-writing-mode");if(w){const P=[];for(const L of w)P.indexOf(L)<0&&P.push(L);this.layout._values["text-writing-mode"]=P}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(c,_,w,P){const L=this.layout.get(c).evaluate(_,{},w,P),B=this._unevaluatedLayout._values[c];return B.isDataDriven()||Yn(B.value)||!L?L:(H=_.properties,L.replace(/{([^{}]+)}/g,(ne,ge)=>ge in H?String(H[ge]):""));var H}createBucket(c){return new Hr(c)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const c of em.paint.overridableProperties){if(!Fh.hasPaintOverride(this.layout,c))continue;const _=this.paint.get(c),w=new tm(_),P=new Dl(w,_.property.specification);let L=null;L="constant"===_.value.kind||"source"===_.value.kind?new Dc("source",P):new Ml("composite",P,_.value.zoomStops),this.paint._values[c]=new lo(_.property,L,_.parameters)}}_handleOverridablePaintPropertyUpdate(c,_,w){return!(!this.layout||_.isDataDriven()||w.isDataDriven())&&Fh.hasPaintOverride(this.layout,c)}static hasPaintOverride(c,_){const w=c.get("text-field"),P=em.paint.properties[_];let L=!1;const B=H=>{for(const X of H)if(P.overrides&&P.overrides.hasOverride(X))return void(L=!0)};if("constant"===w.value.kind&&w.value.value instanceof Dt)B(w.value.value.sections);else if("source"===w.value.kind){const H=ne=>{L||(ne instanceof Pn&&Wt(ne.value)===dn?B(ne.value.sections):ne instanceof Ci?B(ne.sections):ne.eachChild(H))},X=w.value;X._styleExpression&&H(X._styleExpression.expression)}return L}}function nm(p,c,_){let w="never";const P=p.get(c);return P?w=P:p.get(_)&&(w="always"),w}var hg={paint:new yo({"background-color":new Jn(mt.paint_background["background-color"]),"background-pattern":new Pl(mt.paint_background["background-pattern"]),"background-opacity":new Jn(mt.paint_background["background-opacity"])})},k_={paint:new yo({"raster-opacity":new Jn(mt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Jn(mt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Jn(mt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Jn(mt.paint_raster["raster-brightness-max"]),"raster-saturation":new Jn(mt.paint_raster["raster-saturation"]),"raster-contrast":new Jn(mt.paint_raster["raster-contrast"]),"raster-resampling":new Jn(mt.paint_raster["raster-resampling"]),"raster-fade-duration":new Jn(mt.paint_raster["raster-fade-duration"])})};class im extends Ma{constructor(c){super(c,{}),this.onAdd=_=>{this.implementation.onAdd&&this.implementation.onAdd(_,_.painter.context.gl)},this.onRemove=_=>{this.implementation.onRemove&&this.implementation.onRemove(_,_.painter.context.gl)},this.implementation=c}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const sv={circle:class extends Ma{constructor(p){super(p,Gy)}createBucket(p){return new Ch(p)}queryRadius(p){const c=p;return Sh("circle-radius",this,c)+Sh("circle-stroke-width",this,c)+nf(this.paint.get("circle-translate"))}queryIntersectsFeature(p,c,_,w,P,L,B,H){const X=_l(p,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),L.angle,B),ne=this.paint.get("circle-radius").evaluate(c,_)+this.paint.get("circle-stroke-width").evaluate(c,_),ge="map"===this.paint.get("circle-pitch-alignment"),Ie=ge?X:(We=H,X.map(St=>Yl(St,We))),ze=ge?ne*B:ne;var We;for(const Ze of w)for(const We of Ze){const St=ge?We:Yl(We,H);let Et=ze;const Ht=Hs([],[We.x,We.y,0,1],H);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?Et*=Ht[3]/L.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(Et*=L.cameraToCenterDistance/Ht[3]),Vf(Ie,St,Et))return!0}return!1}},heatmap:class extends Ma{constructor(p){super(p,Ga),this._updateColorRamp()}createBucket(p){return new Ih(p)}_handleSpecialPaintPropertyUpdate(p){"heatmap-color"===p&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Zl({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}},hillshade:class extends Ma{constructor(p){super(p,_u)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}},fill:class extends Ma{constructor(p){super(p,rl)}recalculate(p,c){super.recalculate(p,c);const _=this.paint._values["fill-outline-color"];"constant"===_.value.kind&&void 0===_.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(p){return new Wu(p)}queryRadius(){return nf(this.paint.get("fill-translate"))}queryIntersectsFeature(p,c,_,w,P,L,B){return Gf(_l(p,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),L.angle,B),w)}isTileClipped(){return!0}},"fill-extrusion":class extends Ma{constructor(p){super(p,Hy)}createBucket(p){return new Rh(p)}queryRadius(){return nf(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(p,c,_,w,P,L,B,H){const X=_l(p,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),L.angle,B),ne=this.paint.get("fill-extrusion-height").evaluate(c,_),ge=this.paint.get("fill-extrusion-base").evaluate(c,_),Ie=function(Ze,We,St,Et){const Ht=[];for(const nn of Ze){const Ut=[nn.x,nn.y,0,1];Hs(Ut,Ut,We),Ht.push(new Qe(Ut[0]/Ut[3],Ut[1]/Ut[3]))}return Ht}(X,H),ze=function(Ze,We,St,Et){const Ht=[],nn=[],Ut=Et[8]*We,Xt=Et[9]*We,Zt=Et[10]*We,pn=Et[11]*We,oi=Et[8]*St,bi=Et[9]*St,ti=Et[10]*St,Hn=Et[11]*St;for(const On of Ze){const ni=[],Zn=[];for(const Tn of On){const Vi=Tn.x,Oi=Tn.y,Er=Et[0]*Vi+Et[4]*Oi+Et[12],ws=Et[1]*Vi+Et[5]*Oi+Et[13],Do=Et[2]*Vi+Et[6]*Oi+Et[14],ea=Et[3]*Vi+Et[7]*Oi+Et[15],Ta=Do+Zt,ol=ea+pn,pa=Er+oi,Ha=ws+bi,sl=Do+ti,kl=ea+Hn,Wl=new Qe((Er+Ut)/ol,(ws+Xt)/ol);Wl.z=Ta/ol,ni.push(Wl);const ta=new Qe(pa/kl,Ha/kl);ta.z=sl/kl,Zn.push(ta)}Ht.push(ni),nn.push(Zn)}return[Ht,nn]}(w,ge,ne,H);return function(Ze,We,St){let Et=1/0;Gf(St,We)&&(Et=f_(St,We[0]));for(let Ht=0;Ht<We.length;Ht++){const nn=We[Ht],Ut=Ze[Ht];for(let Xt=0;Xt<nn.length-1;Xt++){const Zt=nn[Xt],pn=[Zt,nn[Xt+1],Ut[Xt+1],Ut[Xt],Zt];Qh(St,pn)&&(Et=Math.min(Et,f_(St,pn)))}}return Et!==1/0&&Et}(ze[0],ze[1],Ie)}},line:class extends Ma{constructor(p){super(p,__),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(p){"line-gradient"===p&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof zn,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(p,c){super.recalculate(p,c),this.paint._values["line-floorwidth"]=y_.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,p)}createBucket(p){return new Qm(p)}queryRadius(p){const c=p,_=Up(Sh("line-width",this,c),Sh("line-gap-width",this,c)),w=Sh("line-offset",this,c);return _/2+Math.abs(w)+nf(this.paint.get("line-translate"))}queryIntersectsFeature(p,c,_,w,P,L,B){const H=_l(p,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),L.angle,B),X=B/2*Up(this.paint.get("line-width").evaluate(c,_),this.paint.get("line-gap-width").evaluate(c,_)),ne=this.paint.get("line-offset").evaluate(c,_);return ne&&(w=function(ge,Ie){const ze=[];for(let Ze=0;Ze<ge.length;Ze++){const We=ge[Ze],St=[];for(let Et=0;Et<We.length;Et++){const Ht=We[Et-1],nn=We[Et],Ut=We[Et+1],Xt=0===Et?new Qe(0,0):nn.sub(Ht)._unit()._perp(),Zt=Et===We.length-1?new Qe(0,0):Ut.sub(nn)._unit()._perp(),pn=Xt._add(Zt)._unit(),oi=pn.x*Zt.x+pn.y*Zt.y;0!==oi&&pn._mult(1/oi),St.push(pn._mult(Ie)._add(nn))}ze.push(St)}return ze}(w,ne*B)),function(ge,Ie,ze){for(let Ze=0;Ze<Ie.length;Ze++){const We=Ie[Ze];if(ge.length>=3)for(let St=0;St<We.length;St++)if(tf(ge,We[St]))return!0;if(zy(ge,We,ze))return!0}return!1}(H,w,X)}isTileClipped(){return!0}},symbol:Fh,background:class extends Ma{constructor(p){super(p,hg)}},raster:class extends Ma{constructor(p){super(p,k_)}}};class fg{constructor(c){this._callback=c,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Nh=6371008.8;class So{constructor(c,_){if(isNaN(c)||isNaN(_))throw new Error(`Invalid LngLat object: (${c}, ${_})`);if(this.lng=+c,this.lat=+_,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new So(ct(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(c){const _=Math.PI/180,w=this.lat*_,P=c.lat*_,L=Math.sin(w)*Math.sin(P)+Math.cos(w)*Math.cos(P)*Math.cos((c.lng-this.lng)*_);return Nh*Math.acos(Math.min(L,1))}toBounds(c=0){const _=360*c/40075017,w=_/Math.cos(Math.PI/180*this.lat);return new tu(new So(this.lng-w,this.lat-_),new So(this.lng+w,this.lat+_))}static convert(c){if(c instanceof So)return c;if(Array.isArray(c)&&(2===c.length||3===c.length))return new So(Number(c[0]),Number(c[1]));if(!Array.isArray(c)&&"object"==typeof c&&null!==c)return new So(Number("lng"in c?c.lng:c.lon),Number(c.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class tu{constructor(c,_){c&&(_?this.setSouthWest(c).setNorthEast(_):4===c.length?this.setSouthWest([c[0],c[1]]).setNorthEast([c[2],c[3]]):this.setSouthWest(c[0]).setNorthEast(c[1]))}setNorthEast(c){return this._ne=c instanceof So?new So(c.lng,c.lat):So.convert(c),this}setSouthWest(c){return this._sw=c instanceof So?new So(c.lng,c.lat):So.convert(c),this}extend(c){const _=this._sw,w=this._ne;let P,L;if(c instanceof So)P=c,L=c;else{if(!(c instanceof tu))return Array.isArray(c)?4===c.length||c.every(Array.isArray)?this.extend(tu.convert(c)):this.extend(So.convert(c)):this;if(P=c._sw,L=c._ne,!P||!L)return this}return _||w?(_.lng=Math.min(P.lng,_.lng),_.lat=Math.min(P.lat,_.lat),w.lng=Math.max(L.lng,w.lng),w.lat=Math.max(L.lat,w.lat)):(this._sw=new So(P.lng,P.lat),this._ne=new So(L.lng,L.lat)),this}getCenter(){return new So((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new So(this.getWest(),this.getNorth())}getSouthEast(){return new So(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(c){const{lng:_,lat:w}=So.convert(c);let P=this._sw.lng<=_&&_<=this._ne.lng;return this._sw.lng>this._ne.lng&&(P=this._sw.lng>=_&&_>=this._ne.lng),this._sw.lat<=w&&w<=this._ne.lat&&P}static convert(c){return c instanceof tu?c:c&&new tu(c)}}const th=2*Math.PI*Nh;function F_(p){return th*Math.cos(p*Math.PI/180)}function ap(p){return(180+p)/360}function nh(p){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+p*Math.PI/360)))/360}function pg(p,c){return p/F_(c)}function rm(p){return 360/Math.PI*Math.atan(Math.exp((180-360*p)*Math.PI/180))-90}class xf{constructor(c,_,w=0){this.x=+c,this.y=+_,this.z=+w}static fromLngLat(c,_=0){const w=So.convert(c);return new xf(ap(w.lng),nh(w.lat),pg(_,w.lat))}toLngLat(){return new So(360*this.x-180,rm(this.y))}toAltitude(){return this.z*F_(rm(this.y))}meterInMercatorCoordinateUnits(){return 1/th*(c=rm(this.y),1/Math.cos(c*Math.PI/180));var c}}function lp(p,c,_){var w=2*Math.PI*6378137/256/Math.pow(2,_);return[p*w-2*Math.PI*6378137/2,c*w-2*Math.PI*6378137/2]}class Bh{constructor(c,_,w){if(c<0||c>25||w<0||w>=Math.pow(2,c)||_<0||_>=Math.pow(2,c))throw new Error(`x=${_}, y=${w}, z=${c} outside of bounds. 0<=x<${Math.pow(2,c)}, 0<=y<${Math.pow(2,c)} 0<=z<=25 `);this.z=c,this.x=_,this.y=w,this.key=ih(0,c,c,_,w)}equals(c){return this.z===c.z&&this.x===c.x&&this.y===c.y}url(c,_,w){const P=(B=this.y,H=this.z,X=lp(256*(L=this.x),256*(B=Math.pow(2,H)-B-1),H),ne=lp(256*(L+1),256*(B+1),H),X[0]+","+X[1]+","+ne[0]+","+ne[1]);var L,B,H,X,ne;const ge=function(Ie,ze,Ze){let We,St="";for(let Et=Ie;Et>0;Et--)We=1<<Et-1,St+=(ze&We?1:0)+(Ze&We?2:0);return St}(this.z,this.x,this.y);return c[(this.x+this.y)%c.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===w?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,_>1?"@2x":"").replace(/{quadkey}/g,ge).replace(/{bbox-epsg-3857}/g,P)}isChildOf(c){const _=this.z-c.z;return _>0&&c.x===this.x>>_&&c.y===this.y>>_}getTilePoint(c){const _=Math.pow(2,this.z);return new Qe((c.x*_-this.x)*ks,(c.y*_-this.y)*ks)}toString(){return`${this.z}/${this.x}/${this.y}`}}class cp{constructor(c,_){this.wrap=c,this.canonical=_,this.key=ih(c,_.z,_.z,_.x,_.y)}}class xc{constructor(c,_,w,P,L){if(c<w)throw new Error(`overscaledZ should be >= z; overscaledZ = ${c}; z = ${w}`);this.overscaledZ=c,this.wrap=_,this.canonical=new Bh(w,+P,+L),this.key=ih(_,c,w,P,L)}clone(){return new xc(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(c){return this.overscaledZ===c.overscaledZ&&this.wrap===c.wrap&&this.canonical.equals(c.canonical)}scaledTo(c){if(c>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${c}; overscaledZ = ${this.overscaledZ}`);const _=this.canonical.z-c;return c>this.canonical.z?new xc(c,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new xc(c,this.wrap,c,this.canonical.x>>_,this.canonical.y>>_)}calculateScaledKey(c,_){if(c>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${c}; overscaledZ = ${this.overscaledZ}`);const w=this.canonical.z-c;return c>this.canonical.z?ih(this.wrap*+_,c,this.canonical.z,this.canonical.x,this.canonical.y):ih(this.wrap*+_,c,c,this.canonical.x>>w,this.canonical.y>>w)}isChildOf(c){if(c.wrap!==this.wrap)return!1;const _=this.canonical.z-c.canonical.z;return 0===c.overscaledZ||c.overscaledZ<this.overscaledZ&&c.canonical.x===this.canonical.x>>_&&c.canonical.y===this.canonical.y>>_}children(c){if(this.overscaledZ>=c)return[new xc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const _=this.canonical.z+1,w=2*this.canonical.x,P=2*this.canonical.y;return[new xc(_,this.wrap,_,w,P),new xc(_,this.wrap,_,w+1,P),new xc(_,this.wrap,_,w,P+1),new xc(_,this.wrap,_,w+1,P+1)]}isLessThan(c){return this.wrap<c.wrap||!(this.wrap>c.wrap)&&(this.overscaledZ<c.overscaledZ||!(this.overscaledZ>c.overscaledZ)&&(this.canonical.x<c.canonical.x||!(this.canonical.x>c.canonical.x)&&this.canonical.y<c.canonical.y))}wrapped(){return new xc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(c){return new xc(this.overscaledZ,c,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new cp(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(c){return this.canonical.getTilePoint(new xf(c.x-this.wrap,c.y))}}function ih(p,c,_,w,P){(p*=2)<0&&(p=-1*p-1);const L=1<<_;return(L*L*p+L*P+w).toString(36)+_.toString(36)+c.toString(36)}wn("CanonicalTileID",Bh),wn("OverscaledTileID",xc,{omit:["posMatrix"]});class zh{constructor(c,_,w){if(this.uid=c,_.height!==_.width)throw new RangeError("DEM tiles must be square");if(w&&"mapbox"!==w&&"terrarium"!==w)return void ye(`"${w}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=_.height;const P=this.dim=_.height-2;this.data=new Uint32Array(_.data.buffer),this.encoding=w||"mapbox";for(let L=0;L<P;L++)this.data[this._idx(-1,L)]=this.data[this._idx(0,L)],this.data[this._idx(P,L)]=this.data[this._idx(P-1,L)],this.data[this._idx(L,-1)]=this.data[this._idx(L,0)],this.data[this._idx(L,P)]=this.data[this._idx(L,P-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(P,-1)]=this.data[this._idx(P-1,0)],this.data[this._idx(-1,P)]=this.data[this._idx(0,P-1)],this.data[this._idx(P,P)]=this.data[this._idx(P-1,P-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let L=0;L<P;L++)for(let B=0;B<P;B++){const H=this.get(L,B);H>this.max&&(this.max=H),H<this.min&&(this.min=H)}}get(c,_){const w=new Uint8Array(this.data.buffer),P=4*this._idx(c,_);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(w[P],w[P+1],w[P+2])}getUnpackVector(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(c,_){if(c<-1||c>=this.dim+1||_<-1||_>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(_+1)*this.stride+(c+1)}_unpackMapbox(c,_,w){return(256*c*256+256*_+w)/10-1e4}_unpackTerrarium(c,_,w){return 256*c+_+w/256-32768}getPixels(){return new Ol({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(c,_,w){if(this.dim!==c.dim)throw new Error("dem dimension mismatch");let P=_*this.dim,L=_*this.dim+this.dim,B=w*this.dim,H=w*this.dim+this.dim;switch(_){case-1:P=L-1;break;case 1:L=P+1}switch(w){case-1:B=H-1;break;case 1:H=B+1}const X=-_*this.dim,ne=-w*this.dim;for(let ge=B;ge<H;ge++)for(let Ie=P;Ie<L;Ie++)this.data[this._idx(Ie,ge)]=c.data[this._idx(Ie+X,ge+ne)]}}wn("DEMData",zh);class wf{constructor(c){this._stringToNumber={},this._numberToString=[];for(let _=0;_<c.length;_++){const w=c[_];this._stringToNumber[w]=_,this._numberToString[_]=w}}encode(c){return this._stringToNumber[c]}decode(c){if(c>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${c} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[c]}}class N_{constructor(c,_,w,P,L){this.type="Feature",this._vectorTileFeature=c,c._z=_,c._x=w,c._y=P,this.properties=c.properties,this.id=L}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(c){this._geometry=c}toJSON(){const c={geometry:this.geometry};for(const _ in this)"_geometry"!==_&&"_vectorTileFeature"!==_&&(c[_]=this[_]);return c}}class om{constructor(c,_){this.tileID=c,this.x=c.canonical.x,this.y=c.canonical.y,this.z=c.canonical.z,this.grid=new bs(ks,16,0),this.grid3D=new bs(ks,16,0),this.featureIndexArray=new Qi,this.promoteId=_}insert(c,_,w,P,L,B){const H=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(w,P,L);const X=B?this.grid3D:this.grid;for(let ne=0;ne<_.length;ne++){const ge=_[ne],Ie=[1/0,1/0,-1/0,-1/0];for(let ze=0;ze<ge.length;ze++){const Ze=ge[ze];Ie[0]=Math.min(Ie[0],Ze.x),Ie[1]=Math.min(Ie[1],Ze.y),Ie[2]=Math.max(Ie[2],Ze.x),Ie[3]=Math.max(Ie[3],Ze.y)}Ie[0]<ks&&Ie[1]<ks&&Ie[2]>=0&&Ie[3]>=0&&X.insert(H,Ie[0],Ie[1],Ie[2],Ie[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Dd.VectorTile(new eg(this.rawTileData)).layers,this.sourceLayerCoder=new wf(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(c,_,w,P){this.loadVTLayers();const L=c.params||{},B=ks/c.tileSize/c.scale,H=Ba(L.filter),X=c.queryGeometry,ne=c.queryPadding*B,ge=up(X),Ie=this.grid.query(ge.minX-ne,ge.minY-ne,ge.maxX+ne,ge.maxY+ne),ze=up(c.cameraQueryGeometry),Ze=this.grid3D.query(ze.minX-ne,ze.minY-ne,ze.maxX+ne,ze.maxY+ne,(Et,Ht,nn,Ut)=>function(Xt,Zt,pn,oi,bi){for(const Hn of Xt)if(Zt<=Hn.x&&pn<=Hn.y&&oi>=Hn.x&&bi>=Hn.y)return!0;const ti=[new Qe(Zt,pn),new Qe(Zt,bi),new Qe(oi,bi),new Qe(oi,pn)];if(Xt.length>2)for(const Hn of ti)if(tf(Xt,Hn))return!0;for(let Hn=0;Hn<Xt.length-1;Hn++)if(Vy(Xt[Hn],Xt[Hn+1],ti))return!0;return!1}(c.cameraQueryGeometry,Et-ne,Ht-ne,nn+ne,Ut+ne));for(const Et of Ze)Ie.push(Et);Ie.sort(B_);const We={};let St;for(let Et=0;Et<Ie.length;Et++){const Ht=Ie[Et];if(Ht===St)continue;St=Ht;const nn=this.featureIndexArray.get(Ht);let Ut=null;this.loadMatchingFeature(We,nn.bucketIndex,nn.sourceLayerIndex,nn.featureIndex,H,L.layers,L.availableImages,_,w,P,(Xt,Zt,pn)=>(Ut||(Ut=jd(Xt)),Zt.queryIntersectsFeature(X,Xt,pn,Ut,this.z,c.transform,B,c.pixelPosMatrix)))}return We}loadMatchingFeature(c,_,w,P,L,B,H,X,ne,ge,Ie){const ze=this.bucketLayerIDs[_];if(B&&!function(Et,Ht){for(let nn=0;nn<Et.length;nn++)if(Ht.indexOf(Et[nn])>=0)return!0;return!1}(B,ze))return;const Ze=this.sourceLayerCoder.decode(w),We=this.vtLayers[Ze].feature(P);if(L.needGeometry){const Et=Cd(We,!0);if(!L.filter(new Gr(this.tileID.overscaledZ),Et,this.tileID.canonical))return}else if(!L.filter(new Gr(this.tileID.overscaledZ),We))return;const St=this.getId(We,Ze);for(let Et=0;Et<ze.length;Et++){const Ht=ze[Et];if(B&&B.indexOf(Ht)<0)continue;const nn=X[Ht];if(!nn)continue;let Ut={};St&&ge&&(Ut=ge.getState(nn.sourceLayer||"_geojsonTileLayer",St));const Xt=Ke({},ne[Ht]);Xt.paint=Ef(Xt.paint,nn.paint,We,Ut,H),Xt.layout=Ef(Xt.layout,nn.layout,We,Ut,H);const Zt=!Ie||Ie(We,nn,Ut);if(!Zt)continue;const pn=new N_(We,this.z,this.x,this.y,St);pn.layer=Xt;let oi=c[Ht];void 0===oi&&(oi=c[Ht]=[]),oi.push({featureIndex:P,feature:pn,intersectionZ:Zt})}}lookupSymbolFeatures(c,_,w,P,L,B,H,X){const ne={};this.loadVTLayers();const ge=Ba(L);for(const Ie of c)this.loadMatchingFeature(ne,w,P,Ie,ge,B,H,X,_);return ne}hasLayer(c){for(const _ of this.bucketLayerIDs)for(const w of _)if(c===w)return!0;return!1}getId(c,_){let w=c.id;return this.promoteId&&(w=c.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[_]],"boolean"==typeof w&&(w=Number(w))),w}}function Ef(p,c,_,w,P){return Ct(p,(L,B)=>{const H=c instanceof hu?c.get(B):null;return H&&H.evaluate?H.evaluate(_,w,P):H})}function up(p){let c=1/0,_=1/0,w=-1/0,P=-1/0;for(const L of p)c=Math.min(c,L.x),_=Math.min(_,L.y),w=Math.max(w,L.x),P=Math.max(P,L.y);return{minX:c,minY:_,maxX:w,maxY:P}}function B_(p,c){return c-p}var Cf;wn("FeatureIndex",om,{omit:["rawTileData","sourceLayerCoder"]}),E.PerformanceMarkers=void 0,(Cf=E.PerformanceMarkers||(E.PerformanceMarkers={})).create="create",Cf.load="load",Cf.fullLoad="fullLoad";let Au=null,wc=[];const sm=1e3/30,z_={mark(p){performance.mark(p)},frame(p){const c=p;null!=Au&&wc.push(c-Au),Au=c},clearMetrics(){Au=null,wc=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const p in E.PerformanceMarkers)performance.clearMarks(E.PerformanceMarkers[p])},getPerformanceMetrics(){performance.measure("loadTime",E.PerformanceMarkers.create,E.PerformanceMarkers.load),performance.measure("fullLoadTime",E.PerformanceMarkers.create,E.PerformanceMarkers.fullLoad);const p=performance.getEntriesByName("loadTime")[0].duration,c=performance.getEntriesByName("fullLoadTime")[0].duration,_=wc.length,w=1/(wc.reduce((L,B)=>L+B,0)/_/1e3),P=wc.filter(L=>L>sm).reduce((L,B)=>L+(B-sm)/sm,0);return{loadTime:p,fullLoadTime:c,fps:w,percentDroppedFrames:P/(_+P)*100}}};E.AJAXError=hn,E.ARRAY_TYPE=ql,E.Actor=class{constructor(p,c,_){this.target=p,this.parent=c,this.mapId=_,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},at(["receive","process"],this),this.invoker=new fg(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ve()?p:window}send(p,c,_,w,P=!1){const L=Math.round(1e18*Math.random()).toString(36).substring(0,10);_&&(this.callbacks[L]=_);const B=Xe(this.globalScope)?void 0:[];return this.target.postMessage({id:L,type:p,hasCallback:!!_,targetMapId:w,mustQueue:P,sourceMapId:this.mapId,data:ca(c,B)},B),{cancel:()=>{_&&delete this.callbacks[L],this.target.postMessage({id:L,type:"<cancel>",targetMapId:w,sourceMapId:this.mapId})}}}receive(p){const c=p.data,_=c.id;if(_&&(!c.targetMapId||this.mapId===c.targetMapId))if("<cancel>"===c.type){delete this.tasks[_];const w=this.cancelCallbacks[_];delete this.cancelCallbacks[_],w&&w()}else ve()||c.mustQueue?(this.tasks[_]=c,this.taskQueue.push(_),this.invoker.trigger()):this.processTask(_,c)}process(){if(!this.taskQueue.length)return;const p=this.taskQueue.shift(),c=this.tasks[p];delete this.tasks[p],this.taskQueue.length&&this.invoker.trigger(),c&&this.processTask(p,c)}processTask(p,c){if("<response>"===c.type){const _=this.callbacks[p];delete this.callbacks[p],_&&(c.error?_(yc(c.error)):_(null,yc(c.data)))}else{let _=!1;const w=Xe(this.globalScope)?void 0:[],P=c.hasCallback?(H,X)=>{_=!0,delete this.cancelCallbacks[p],this.target.postMessage({id:p,type:"<response>",sourceMapId:this.mapId,error:H?ca(H):null,data:ca(X,w)},w)}:H=>{_=!0};let L=null;const B=yc(c.data);if(this.parent[c.type])L=this.parent[c.type](c.sourceMapId,B,P);else if(this.parent.getWorkerSource){const H=c.type.split(".");L=this.parent.getWorkerSource(c.sourceMapId,H[0],B.source)[H[1]](B,P)}else P(new Error(`Could not find function ${c.type}`));!_&&L&&L.cancel&&(this.cancelCallbacks[p]=L.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},E.AlphaImage=Th,E.CanonicalTileID=Bh,E.CollisionBoxArray=wt,E.CollisionCircleLayoutArray=class extends s{},E.Color=qe,E.DEMData=zh,E.DataConstantProperty=Jn,E.DictionaryCoder=wf,E.EXTENT=ks,E.ErrorEvent=ln,E.EvaluationParameters=Gr,E.Event=Yt,E.Evented=un,E.FeatureIndex=om,E.FillBucket=Wu,E.FillExtrusionBucket=Rh,E.GeoJSONFeature=N_,E.ImageAtlas=$p,E.ImagePosition=tp,E.LineBucket=Qm,E.LineStripIndexArray=class extends pe{},E.LngLat=So,E.LngLatBounds=tu,E.MercatorCoordinate=xf,E.ONE_EM=24,E.OverscaledTileID=xc,E.PerformanceUtils=z_,E.PosArray=ki,E.Properties=yo,E.QuadTriangleArray=class extends m{},E.RGBAImage=Ol,E.RasterBoundsArray=class extends T{},E.RequestPerformance=class{constructor(p){this._marks={start:[p.url,"start"].join("#"),end:[p.url,"end"].join("#"),measure:p.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let p=performance.getEntriesByName(this._marks.measure);return 0===p.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),p=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),p}},E.ResourceType=$n,E.SegmentVector=Fi,E.SymbolBucket=Hr,E.Transitionable=Tc,E.TriangleIndexArray=sc,E.Uniform1f=kn,E.Uniform1i=class extends cn{constructor(p,c){super(p,c),this.current=0}set(p){this.current!==p&&(this.current=p,this.gl.uniform1i(this.location,p))}},E.Uniform2f=class extends cn{constructor(p,c){super(p,c),this.current=[0,0]}set(p){p[0]===this.current[0]&&p[1]===this.current[1]||(this.current=p,this.gl.uniform2f(this.location,p[0],p[1]))}},E.Uniform3f=class extends cn{constructor(p,c){super(p,c),this.current=[0,0,0]}set(p){p[0]===this.current[0]&&p[1]===this.current[1]&&p[2]===this.current[2]||(this.current=p,this.gl.uniform3f(this.location,p[0],p[1],p[2]))}},E.Uniform4f=oo,E.UniformColor=fu,E.UniformMatrix4f=class extends cn{constructor(p,c){super(p,c),this.current=pu}set(p){if(p[12]!==this.current[12]||p[0]!==this.current[0])return this.current=p,void this.gl.uniformMatrix4fv(this.location,!1,p);for(let c=1;c<16;c++)if(p[c]!==this.current[c]){this.current=p,this.gl.uniformMatrix4fv(this.location,!1,p);break}}},E.UnwrappedTileID=cp,E.ValidationError=jt,E.ZoomHistory=$c,E.add=function(p,c,_){return p[0]=c[0]+_[0],p[1]=c[1]+_[1],p[2]=c[2]+_[2],p},E.addDynamicAttributes=Wn,E.asyncAll=function(p,c,_){if(!p.length)return _(null,[]);let w=p.length;const P=new Array(p.length);let L=null;p.forEach((B,H)=>{c(B,(X,ne)=>{X&&(L=X),P[H]=ne,0==--w&&_(L,P)})})},E.bezier=Oe,E.bindAll=at,E.cacheEntryPossiblyAdded=function(p){Vt++,Vt>tt&&(p.getActor().send("enforceCacheSizeLimit",Mt),Vt=0)},E.clamp=xe,E.clearTileCache=function(p){const c=caches.delete(ut);p&&c.catch(p).then(()=>p())},E.clipLine=ag,E.clone=function(p){var c=new ql(16);return c[0]=p[0],c[1]=p[1],c[2]=p[2],c[3]=p[3],c[4]=p[4],c[5]=p[5],c[6]=p[6],c[7]=p[7],c[8]=p[8],c[9]=p[9],c[10]=p[10],c[11]=p[11],c[12]=p[12],c[13]=p[13],c[14]=p[14],c[15]=p[15],c},E.clone$1=De,E.clone$2=function(p){var c=new ql(3);return c[0]=p[0],c[1]=p[1],c[2]=p[2],c},E.collisionCircleLayout=b_,E.config=Me,E.copy=function(p,c){return p[0]=c[0],p[1]=c[1],p[2]=c[2],p[3]=c[3],p[4]=c[4],p[5]=c[5],p[6]=c[6],p[7]=c[7],p[8]=c[8],p[9]=c[9],p[10]=c[10],p[11]=c[11],p[12]=c[12],p[13]=c[13],p[14]=c[14],p[15]=c[15],p},E.create=function(){var p=new ql(16);return ql!=Float32Array&&(p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[11]=0,p[12]=0,p[13]=0,p[14]=0),p[0]=1,p[5]=1,p[10]=1,p[15]=1,p},E.create$1=qd,E.createExpression=oa,E.createFilter=Ba,E.createLayout=ls,E.createStyleLayer=function(p){return"custom"===p.type?new im(p):new sv[p.type](p)},E.cross=function(p,c,_){var w=c[0],P=c[1],L=c[2],B=_[0],H=_[1],X=_[2];return p[0]=P*X-L*H,p[1]=L*B-w*X,p[2]=w*H-P*B,p},E.dot=function(p,c){return p[0]*c[0]+p[1]*c[1]+p[2]*c[2]},E.dot$1=function(p,c){return p[0]*c[0]+p[1]*c[1]+p[2]*c[2]+p[3]*c[3]},E.ease=Ne,E.emitValidationErrors=Hl,E.enforceCacheSizeLimit=function(p){Bt(),$e&&$e.then(c=>{c.keys().then(_=>{for(let w=0;w<_.length-p;w++)c.delete(_[w])})})},E.equals=function(p,c){var _=p[0],w=p[1],P=p[2],L=p[3],B=p[4],H=p[5],X=p[6],ne=p[7],ge=p[8],Ie=p[9],ze=p[10],Ze=p[11],We=p[12],St=p[13],Et=p[14],Ht=p[15],nn=c[0],Ut=c[1],Xt=c[2],Zt=c[3],pn=c[4],oi=c[5],bi=c[6],ti=c[7],Hn=c[8],On=c[9],ni=c[10],Zn=c[11],Tn=c[12],Vi=c[13],Oi=c[14],Er=c[15];return Math.abs(_-nn)<=lc*Math.max(1,Math.abs(_),Math.abs(nn))&&Math.abs(w-Ut)<=lc*Math.max(1,Math.abs(w),Math.abs(Ut))&&Math.abs(P-Xt)<=lc*Math.max(1,Math.abs(P),Math.abs(Xt))&&Math.abs(L-Zt)<=lc*Math.max(1,Math.abs(L),Math.abs(Zt))&&Math.abs(B-pn)<=lc*Math.max(1,Math.abs(B),Math.abs(pn))&&Math.abs(H-oi)<=lc*Math.max(1,Math.abs(H),Math.abs(oi))&&Math.abs(X-bi)<=lc*Math.max(1,Math.abs(X),Math.abs(bi))&&Math.abs(ne-ti)<=lc*Math.max(1,Math.abs(ne),Math.abs(ti))&&Math.abs(ge-Hn)<=lc*Math.max(1,Math.abs(ge),Math.abs(Hn))&&Math.abs(Ie-On)<=lc*Math.max(1,Math.abs(Ie),Math.abs(On))&&Math.abs(ze-ni)<=lc*Math.max(1,Math.abs(ze),Math.abs(ni))&&Math.abs(Ze-Zn)<=lc*Math.max(1,Math.abs(Ze),Math.abs(Zn))&&Math.abs(We-Tn)<=lc*Math.max(1,Math.abs(We),Math.abs(Tn))&&Math.abs(St-Vi)<=lc*Math.max(1,Math.abs(St),Math.abs(Vi))&&Math.abs(Et-Oi)<=lc*Math.max(1,Math.abs(Et),Math.abs(Oi))&&Math.abs(Ht-Er)<=lc*Math.max(1,Math.abs(Ht),Math.abs(Er))},E.evaluateSizeForFeature=function(p,{uSize:c,uSizeT:_},{lowerSize:w,upperSize:P}){return"source"===p.kind?w/Ju:"composite"===p.kind?Ai(w/Ju,P/Ju,_):c},E.evaluateSizeForZoom=function(p,c){let _=0,w=0;if("constant"===p.kind)w=p.layoutSize;else if("source"!==p.kind){const{interpolationType:P,minZoom:L,maxZoom:B}=p,H=P?xe(Vs.interpolationFactor(P,c,L,B),0,1):0;"camera"===p.kind?w=Ai(p.minSize,p.maxSize,H):_=H}return{uSizeT:_,uSize:w}},E.evaluateVariableOffset=dg,E.evented=Ks,E.exported=de,E.exported$1=rn,E.extend=Ke,E.filterObject=ue,E.fromRotation=function(p,c){var _=Math.sin(c),w=Math.cos(c);return p[0]=w,p[1]=_,p[2]=0,p[3]=-_,p[4]=w,p[5]=0,p[6]=0,p[7]=0,p[8]=1,p},E.fromScaling=function(p,c){return p[0]=c[0],p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=c[1],p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=c[2],p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p},E.getAnchorAlignment=xa,E.getAnchorJustification=Td,E.getArrayBuffer=yi,E.getImage=ke,E.getJSON=function(p,c){return Fr(Ke(p,{type:"json"}),c)},E.getOverlapMode=nm,E.getRTLTextPluginStatus=Sa,E.getReferrer=jr,E.getVideo=function(p,c){const _=window.document.createElement("video");_.muted=!0,_.onloadstart=function(){c(null,_)};for(let w=0;w<p.length;w++){const P=window.document.createElement("source");Ri(p[w])||(_.crossOrigin="Anonymous"),P.src=p[w],_.appendChild(P)}return{cancel:()=>{}}},E.identity=Yd,E.invert=function(p,c){var _=c[0],w=c[1],P=c[2],L=c[3],B=c[4],H=c[5],X=c[6],ne=c[7],ge=c[8],Ie=c[9],ze=c[10],Ze=c[11],We=c[12],St=c[13],Et=c[14],Ht=c[15],nn=_*H-w*B,Ut=_*X-P*B,Xt=_*ne-L*B,Zt=w*X-P*H,pn=w*ne-L*H,oi=P*ne-L*X,bi=ge*St-Ie*We,ti=ge*Et-ze*We,Hn=ge*Ht-Ze*We,On=Ie*Et-ze*St,ni=Ie*Ht-Ze*St,Zn=ze*Ht-Ze*Et,Tn=nn*Zn-Ut*ni+Xt*On+Zt*Hn-pn*ti+oi*bi;return Tn?(p[0]=(H*Zn-X*ni+ne*On)*(Tn=1/Tn),p[1]=(P*ni-w*Zn-L*On)*Tn,p[2]=(St*oi-Et*pn+Ht*Zt)*Tn,p[3]=(ze*pn-Ie*oi-Ze*Zt)*Tn,p[4]=(X*Hn-B*Zn-ne*ti)*Tn,p[5]=(_*Zn-P*Hn+L*ti)*Tn,p[6]=(Et*Xt-We*oi-Ht*Ut)*Tn,p[7]=(ge*oi-ze*Xt+Ze*Ut)*Tn,p[8]=(B*ni-H*Hn+ne*bi)*Tn,p[9]=(w*Hn-_*ni-L*bi)*Tn,p[10]=(We*pn-St*Xt+Ht*nn)*Tn,p[11]=(Ie*Xt-ge*pn-Ze*nn)*Tn,p[12]=(H*ti-B*On-X*bi)*Tn,p[13]=(_*On-w*ti+P*bi)*Tn,p[14]=(St*Ut-We*Zt-Et*nn)*Tn,p[15]=(ge*Zt-Ie*Ut+ze*nn)*Tn,p):null},E.isImageBitmap=st,E.isSafari=Xe,E.isWorker=ve,E.keysDifference=function(p,c){const _=[];for(const w in p)w in c||_.push(w);return _},E.lazyLoadRTLTextPlugin=function(){Js.isLoading()||Js.isLoaded()||"deferred"!==Sa()||uu()},E.makeRequest=Fr,E.mapObject=Ct,E.mercatorXfromLng=ap,E.mercatorYfromLat=nh,E.mercatorZfromAltitude=pg,E.mul=Dh,E.mul$1=function(p,c,_){return p[0]=c[0]*_[0],p[1]=c[1]*_[1],p[2]=c[2]*_[2],p[3]=c[3]*_[3],p},E.multiply=co,E.nextPowerOfTwo=function(p){return p<=1?1:Math.pow(2,Math.ceil(Math.log(p)/Math.LN2))},E.normalize=function(p,c){var _=c[0],w=c[1],P=c[2],L=_*_+w*w+P*P;return L>0&&(L=1/Math.sqrt(L)),p[0]=c[0]*L,p[1]=c[1]*L,p[2]=c[2]*L,p},E.number=Ai,E.ortho=function(p,c,_,w,P,L,B){var H=1/(c-_),X=1/(w-P),ne=1/(L-B);return p[0]=-2*H,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=-2*X,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=2*ne,p[11]=0,p[12]=(c+_)*H,p[13]=(P+w)*X,p[14]=(B+L)*ne,p[15]=1,p},E.parseCacheControl=we,E.parseGlyphPbf=function(p){return new eg(p).readFields(M_,[])},E.pbf=eg,E.performSymbolLayout=function(p){p.bucket.createArrays(),p.bucket.tilePixelRatio=ks/(512*p.bucket.overscaling),p.bucket.compareText={},p.bucket.iconsNeedLinear=!1;const c=p.bucket.layers[0].layout,_=p.bucket.layers[0]._unevaluatedLayout._values,w={layoutIconSize:_["icon-size"].possiblyEvaluate(new Gr(p.bucket.zoom+1),p.canonical),layoutTextSize:_["text-size"].possiblyEvaluate(new Gr(p.bucket.zoom+1),p.canonical),textMaxSize:_["text-size"].possiblyEvaluate(new Gr(18))};if("composite"===p.bucket.textSizeData.kind){const{minZoom:X,maxZoom:ne}=p.bucket.textSizeData;w.compositeTextSizes=[_["text-size"].possiblyEvaluate(new Gr(X),p.canonical),_["text-size"].possiblyEvaluate(new Gr(ne),p.canonical)]}if("composite"===p.bucket.iconSizeData.kind){const{minZoom:X,maxZoom:ne}=p.bucket.iconSizeData;w.compositeIconSizes=[_["icon-size"].possiblyEvaluate(new Gr(X),p.canonical),_["icon-size"].possiblyEvaluate(new Gr(ne),p.canonical)]}const P=24*c.get("text-line-height"),L="viewport"!==c.get("text-rotation-alignment")&&"point"!==c.get("symbol-placement"),B=c.get("text-keep-upright"),H=c.get("text-size");for(const X of p.bucket.features){const ne=c.get("text-font").evaluate(X,{},p.canonical).join(","),ge=H.evaluate(X,{},p.canonical),Ie=w.layoutTextSize.evaluate(X,{},p.canonical),ze=w.layoutIconSize.evaluate(X,{},p.canonical),Ze={horizontal:{},vertical:void 0},We=X.text;let St,Et=[0,0];if(We){const Ut=We.toString(),Xt=24*c.get("text-letter-spacing").evaluate(X,{},p.canonical),Zt=Hc(Ut)?Xt:0,pn=c.get("text-anchor").evaluate(X,{},p.canonical),oi=c.get("text-variable-anchor");if(!oi){const ni=c.get("text-radial-offset").evaluate(X,{},p.canonical);Et=ni?dg(pn,[24*ni,Jp]):c.get("text-offset").evaluate(X,{},p.canonical).map(Zn=>24*Zn)}let bi=L?"center":c.get("text-justify").evaluate(X,{},p.canonical);const ti=c.get("symbol-placement"),Hn="point"===ti?24*c.get("text-max-width").evaluate(X,{},p.canonical):0,On=()=>{p.bucket.allowVerticalPlacement&&ua(Ut)&&(Ze.vertical=jp(We,p.glyphMap,p.glyphPositions,p.imagePositions,ne,Hn,P,pn,"left",Zt,Et,E.WritingMode.vertical,!0,ti,Ie,ge))};if(!L&&oi){const ni="auto"===bi?oi.map(Tn=>Td(Tn)):[bi];let Zn=!1;for(let Tn=0;Tn<ni.length;Tn++){const Vi=ni[Tn];if(!Ze.horizontal[Vi])if(Zn)Ze.horizontal[Vi]=Ze.horizontal[0];else{const Oi=jp(We,p.glyphMap,p.glyphPositions,p.imagePositions,ne,Hn,P,"center",Vi,Zt,Et,E.WritingMode.horizontal,!1,ti,Ie,ge);Oi&&(Ze.horizontal[Vi]=Oi,Zn=1===Oi.positionedLines.length)}}On()}else{"auto"===bi&&(bi=Td(pn));const ni=jp(We,p.glyphMap,p.glyphPositions,p.imagePositions,ne,Hn,P,pn,bi,Zt,Et,E.WritingMode.horizontal,!1,ti,Ie,ge);ni&&(Ze.horizontal[bi]=ni),On(),ua(Ut)&&L&&B&&(Ze.vertical=jp(We,p.glyphMap,p.glyphPositions,p.imagePositions,ne,Hn,P,pn,bi,Zt,Et,E.WritingMode.vertical,!1,ti,Ie,ge))}}let Ht=!1;if(X.icon&&X.icon.name){const Ut=p.imageMap[X.icon.name];Ut&&(St=nv(p.imagePositions[X.icon.name],c.get("icon-offset").evaluate(X,{},p.canonical),c.get("icon-anchor").evaluate(X,{},p.canonical)),Ht=!!Ut.sdf,void 0===p.bucket.sdfIcons?p.bucket.sdfIcons=Ht:p.bucket.sdfIcons!==Ht&&ye("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ut.pixelRatio!==p.bucket.pixelRatio||0!==c.get("icon-rotate").constantOr(1))&&(p.bucket.iconsNeedLinear=!0))}const nn=L_(Ze.horizontal)||Ze.vertical;p.bucket.iconsInText=!!nn&&nn.iconsInText,(nn||St)&&ov(p.bucket,X,Ze,St,p.imageMap,w,Ie,ze,Et,Ht,p.canonical)}p.showCollisionBoxes&&p.bucket.generateCollisionDebugBuffers()},E.perspective=function(p,c,_,w,P){var L,B=1/Math.tan(c/2);return p[0]=B/_,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=B,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[11]=-1,p[12]=0,p[13]=0,p[15]=0,null!=P&&P!==1/0?(p[10]=(P+w)*(L=1/(w-P)),p[14]=2*P*w*L):(p[10]=-1,p[14]=-2*w),p},E.pick=function(p,c){const _={};for(let w=0;w<c.length;w++){const P=c[w];P in p&&(_[P]=p[P])}return _},E.plugin=Js,E.pointGeometry=Qe,E.polygonIntersectsPolygon=Qh,E.potpack=ev,E.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],E.register=wn,E.registerForPluginStateChange=function(p){return p({pluginStatus:ds,pluginURL:ro}),Ks.on("pluginStateChange",p),p},E.renderColorRamp=Zl,E.rotateX=function(p,c,_){var w=Math.sin(_),P=Math.cos(_),L=c[4],B=c[5],H=c[6],X=c[7],ne=c[8],ge=c[9],Ie=c[10],ze=c[11];return c!==p&&(p[0]=c[0],p[1]=c[1],p[2]=c[2],p[3]=c[3],p[12]=c[12],p[13]=c[13],p[14]=c[14],p[15]=c[15]),p[4]=L*P+ne*w,p[5]=B*P+ge*w,p[6]=H*P+Ie*w,p[7]=X*P+ze*w,p[8]=ne*P-L*w,p[9]=ge*P-B*w,p[10]=Ie*P-H*w,p[11]=ze*P-X*w,p},E.rotateZ=function(p,c,_){var w=Math.sin(_),P=Math.cos(_),L=c[0],B=c[1],H=c[2],X=c[3],ne=c[4],ge=c[5],Ie=c[6],ze=c[7];return c!==p&&(p[8]=c[8],p[9]=c[9],p[10]=c[10],p[11]=c[11],p[12]=c[12],p[13]=c[13],p[14]=c[14],p[15]=c[15]),p[0]=L*P+ne*w,p[1]=B*P+ge*w,p[2]=H*P+Ie*w,p[3]=X*P+ze*w,p[4]=ne*P-L*w,p[5]=ge*P-B*w,p[6]=Ie*P-H*w,p[7]=ze*P-X*w,p},E.scale=function(p,c,_){var w=_[0],P=_[1],L=_[2];return p[0]=c[0]*w,p[1]=c[1]*w,p[2]=c[2]*w,p[3]=c[3]*w,p[4]=c[4]*P,p[5]=c[5]*P,p[6]=c[6]*P,p[7]=c[7]*P,p[8]=c[8]*L,p[9]=c[9]*L,p[10]=c[10]*L,p[11]=c[11]*L,p[12]=c[12],p[13]=c[13],p[14]=c[14],p[15]=c[15],p},E.scale$1=function(p,c,_){return p[0]=c[0]*_,p[1]=c[1]*_,p[2]=c[2]*_,p},E.setCacheLimits=function(p,c){Mt=p,tt=c},E.setRTLTextPlugin=function(p,c,_=!1){if(ds===Al||ds===ml||ds===qc)throw new Error("setRTLTextPlugin cannot be called multiple times.");ro=de.resolveURL(p),ds=Al,xs=c,vc(),_||uu()},E.spec=mt,E.sphericalToCartesian=function([p,c,_]){return c+=90,c*=Math.PI/180,_*=Math.PI/180,{x:p*Math.cos(c)*Math.sin(_),y:p*Math.sin(c)*Math.sin(_),z:p*Math.cos(_)}},E.sqrLen=function(p){var c=p[0],_=p[1];return c*c+_*_},E.sub=function(p,c,_){return p[0]=c[0]-_[0],p[1]=c[1]-_[1],p[2]=c[2]-_[2],p},E.toEvaluationFeature=Cd,E.transformMat3=function(p,c,_){var w=c[0],P=c[1],L=c[2];return p[0]=w*_[0]+P*_[3]+L*_[6],p[1]=w*_[1]+P*_[4]+L*_[7],p[2]=w*_[2]+P*_[5]+L*_[8],p},E.transformMat4=Hs,E.transformMat4$1=function(p,c,_){var w=c[0],P=c[1];return p[0]=_[0]*w+_[4]*P+_[12],p[1]=_[1]*w+_[5]*P+_[13],p},E.translate=function(p,c,_){var w,P,L,B,H,X,ne,ge,Ie,ze,Ze,We,St=_[0],Et=_[1],Ht=_[2];return c===p?(p[12]=c[0]*St+c[4]*Et+c[8]*Ht+c[12],p[13]=c[1]*St+c[5]*Et+c[9]*Ht+c[13],p[14]=c[2]*St+c[6]*Et+c[10]*Ht+c[14],p[15]=c[3]*St+c[7]*Et+c[11]*Ht+c[15]):(P=c[1],L=c[2],B=c[3],H=c[4],X=c[5],ne=c[6],ge=c[7],Ie=c[8],ze=c[9],Ze=c[10],We=c[11],p[0]=w=c[0],p[1]=P,p[2]=L,p[3]=B,p[4]=H,p[5]=X,p[6]=ne,p[7]=ge,p[8]=Ie,p[9]=ze,p[10]=Ze,p[11]=We,p[12]=w*St+H*Et+Ie*Ht+c[12],p[13]=P*St+X*Et+ze*Ht+c[13],p[14]=L*St+ne*Et+Ze*Ht+c[14],p[15]=B*St+ge*Et+We*Ht+c[15]),p},E.triggerPluginCompletionEvent=wd,E.unicodeBlockLookup=Un,E.uniqueId=function(){return Te++},E.validateCustomStyleLayer=function(p){const c=[],_=p.id;return void 0===_&&c.push({message:`layers.${_}: missing required property "id"`}),void 0===p.render&&c.push({message:`layers.${_}: missing required method "render"`}),p.renderingMode&&"2d"!==p.renderingMode&&"3d"!==p.renderingMode&&c.push({message:`layers.${_}: property "renderingMode" must be either "2d" or "3d"`}),c},E.validateLight=Va,E.validateStyle=vs,E.vectorTile=Dd,E.warnOnce=ye,E.wrap=ct}),me(0,function(E){function Se(rt){const le=typeof rt;if("number"===le||"boolean"===le||"string"===le||null==rt)return JSON.stringify(rt);if(Array.isArray(rt)){let qe="[";for(const bt of rt)qe+=`${Se(bt)},`;return`${qe}]`}const Ee=Object.keys(rt).sort();let Ge="{";for(let qe=0;qe<Ee.length;qe++)Ge+=`${JSON.stringify(Ee[qe])}:${Se(rt[Ee[qe]])},`;return`${Ge}}`}function he(rt){let le="";for(const Ee of E.refProperties)le+=`/${Se(rt[Ee])}`;return le}class Oe{constructor(le){this.keyCache={},le&&this.replace(le)}replace(le){this._layerConfigs={},this._layers={},this.update(le,[])}update(le,Ee){for(const qe of le){this._layerConfigs[qe.id]=qe;const bt=this._layers[qe.id]=E.createStyleLayer(qe);bt._featureFilter=E.createFilter(bt.filter),this.keyCache[qe.id]&&delete this.keyCache[qe.id]}for(const qe of Ee)delete this.keyCache[qe],delete this._layerConfigs[qe],delete this._layers[qe];this.familiesBySource={};const Ge=function(qe,bt){const Ot={};for(let vt=0;vt<qe.length;vt++){const Lt=bt&&bt[qe[vt].id]||he(qe[vt]);bt&&(bt[qe[vt].id]=Lt);let Qt=Ot[Lt];Qt||(Qt=Ot[Lt]=[]),Qt.push(qe[vt])}const Dt=[];for(const vt in Ot)Dt.push(Ot[vt]);return Dt}(Object.values(this._layerConfigs),this.keyCache);for(const qe of Ge){const bt=qe.map(mn=>this._layers[mn.id]),Ot=bt[0];if("none"===Ot.visibility)continue;const Dt=Ot.source||"";let vt=this.familiesBySource[Dt];vt||(vt=this.familiesBySource[Dt]={});const Lt=Ot.sourceLayer||"_geojsonTileLayer";let Qt=vt[Lt];Qt||(Qt=vt[Lt]=[]),Qt.push(bt)}}}class Ne{constructor(le){const Ee={},Ge=[];for(const Dt in le){const vt=le[Dt],Lt=Ee[Dt]={};for(const Qt in vt){const mn=vt[+Qt];if(!mn||0===mn.bitmap.width||0===mn.bitmap.height)continue;const Wt={x:0,y:0,w:mn.bitmap.width+2,h:mn.bitmap.height+2};Ge.push(Wt),Lt[Qt]={rect:Wt,metrics:mn.metrics}}}const{w:qe,h:bt}=E.potpack(Ge),Ot=new E.AlphaImage({width:qe||1,height:bt||1});for(const Dt in le){const vt=le[Dt];for(const Lt in vt){const Qt=vt[+Lt];if(!Qt||0===Qt.bitmap.width||0===Qt.bitmap.height)continue;const mn=Ee[Dt][Lt].rect;E.AlphaImage.copy(Qt.bitmap,Ot,{x:0,y:0},{x:mn.x+1,y:mn.y+1},Qt.bitmap)}}this.image=Ot,this.positions=Ee}}E.register("GlyphAtlas",Ne);class xe{constructor(le){this.tileID=new E.OverscaledTileID(le.tileID.overscaledZ,le.tileID.wrap,le.tileID.canonical.z,le.tileID.canonical.x,le.tileID.canonical.y),this.uid=le.uid,this.zoom=le.zoom,this.pixelRatio=le.pixelRatio,this.tileSize=le.tileSize,this.source=le.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=le.showCollisionBoxes,this.collectResourceTiming=!!le.collectResourceTiming,this.returnDependencies=!!le.returnDependencies,this.promoteId=le.promoteId}parse(le,Ee,Ge,qe,bt){this.status="parsing",this.data=le,this.collisionBoxArray=new E.CollisionBoxArray;const Ot=new E.DictionaryCoder(Object.keys(le.layers).sort()),Dt=new E.FeatureIndex(this.tileID,this.promoteId);Dt.bucketLayerIDs=[];const vt={},Lt={featureIndex:Dt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ge},Qt=Ee.familiesBySource[this.source];for(const ii in Qt){const Xn=le.layers[ii];if(!Xn)continue;1===Xn.version&&E.warnOnce(`Vector tile source "${this.source}" layer "${ii}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Mi=Ot.encode(ii),Wi=[];for(let qr=0;qr<Xn.length;qr++){const yr=Xn.feature(qr),eo=Dt.getId(yr,ii);Wi.push({feature:yr,id:eo,index:qr,sourceLayerIndex:Mi})}for(const qr of Qt[ii]){const yr=qr[0];yr.source!==this.source&&E.warnOnce(`layer.source = ${yr.source} does not equal this.source = ${this.source}`),yr.minzoom&&this.zoom<Math.floor(yr.minzoom)||yr.maxzoom&&this.zoom>=yr.maxzoom||"none"!==yr.visibility&&(ct(qr,this.zoom,Ge),(vt[yr.id]=yr.createBucket({index:Dt.bucketLayerIDs.length,layers:qr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Mi,sourceID:this.source})).populate(Wi,Lt,this.tileID.canonical),Dt.bucketLayerIDs.push(qr.map(eo=>eo.id)))}}let mn,Wt,li,Pn;const xn=E.mapObject(Lt.glyphDependencies,ii=>Object.keys(ii).map(Number));Object.keys(xn).length?qe.send("getGlyphs",{uid:this.uid,stacks:xn},(ii,Xn)=>{mn||(mn=ii,Wt=Xn,lr.call(this))}):Wt={};const Ii=Object.keys(Lt.iconDependencies);Ii.length?qe.send("getImages",{icons:Ii,source:this.source,tileID:this.tileID,type:"icons"},(ii,Xn)=>{mn||(mn=ii,li=Xn,lr.call(this))}):li={};const mi=Object.keys(Lt.patternDependencies);function lr(){if(mn)return bt(mn);if(Wt&&li&&Pn){const ii=new Ne(Wt),Xn=new E.ImageAtlas(li,Pn);for(const Mi in vt){const Wi=vt[Mi];Wi instanceof E.SymbolBucket?(ct(Wi.layers,this.zoom,Ge),E.performSymbolLayout({bucket:Wi,glyphMap:Wt,glyphPositions:ii.positions,imageMap:li,imagePositions:Xn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Wi.hasPattern&&(Wi instanceof E.LineBucket||Wi instanceof E.FillBucket||Wi instanceof E.FillExtrusionBucket)&&(ct(Wi.layers,this.zoom,Ge),Wi.addFeatures(Lt,this.tileID.canonical,Xn.patternPositions))}this.status="done",bt(null,{buckets:Object.values(vt).filter(Mi=>!Mi.isEmpty()),featureIndex:Dt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ii.image,imageAtlas:Xn,glyphMap:this.returnDependencies?Wt:null,iconMap:this.returnDependencies?li:null,glyphPositions:this.returnDependencies?ii.positions:null})}}mi.length?qe.send("getImages",{icons:mi,source:this.source,tileID:this.tileID,type:"patterns"},(ii,Xn)=>{mn||(mn=ii,Pn=Xn,lr.call(this))}):Pn={},lr.call(this)}}function ct(rt,le,Ee){const Ge=new E.EvaluationParameters(le);for(const qe of rt)qe.recalculate(Ge,Ee)}function Ke(rt,le){const Ee=E.getArrayBuffer(rt.request,(Ge,qe,bt,Ot)=>{Ge?le(Ge):qe&&le(null,{vectorTile:new E.vectorTile.VectorTile(new E.pbf(qe)),rawData:qe,cacheControl:bt,expires:Ot})});return()=>{Ee.cancel(),le()}}class Te{constructor(le,Ee,Ge,qe){this.actor=le,this.layerIndex=Ee,this.availableImages=Ge,this.loadVectorData=qe||Ke,this.loading={},this.loaded={}}loadTile(le,Ee){const Ge=le.uid;this.loading||(this.loading={});const qe=!!(le&&le.request&&le.request.collectResourceTiming)&&new E.RequestPerformance(le.request),bt=this.loading[Ge]=new xe(le);bt.abort=this.loadVectorData(le,(Ot,Dt)=>{if(delete this.loading[Ge],Ot||!Dt)return bt.status="done",this.loaded[Ge]=bt,Ee(Ot);const vt=Dt.rawData,Lt={};Dt.expires&&(Lt.expires=Dt.expires),Dt.cacheControl&&(Lt.cacheControl=Dt.cacheControl);const Qt={};if(qe){const mn=qe.finish();mn&&(Qt.resourceTiming=JSON.parse(JSON.stringify(mn)))}bt.vectorTile=Dt.vectorTile,bt.parse(Dt.vectorTile,this.layerIndex,this.availableImages,this.actor,(mn,Wt)=>{if(mn||!Wt)return Ee(mn);Ee(null,E.extend({rawTileData:vt.slice(0)},Wt,Lt,Qt))}),this.loaded=this.loaded||{},this.loaded[Ge]=bt})}reloadTile(le,Ee){const Ge=this.loaded,qe=le.uid,bt=this;if(Ge&&Ge[qe]){const Ot=Ge[qe];Ot.showCollisionBoxes=le.showCollisionBoxes;const Dt=(vt,Lt)=>{const Qt=Ot.reloadCallback;Qt&&(delete Ot.reloadCallback,Ot.parse(Ot.vectorTile,bt.layerIndex,this.availableImages,bt.actor,Qt)),Ee(vt,Lt)};"parsing"===Ot.status?Ot.reloadCallback=Dt:"done"===Ot.status&&(Ot.vectorTile?Ot.parse(Ot.vectorTile,this.layerIndex,this.availableImages,this.actor,Dt):Dt())}}abortTile(le,Ee){const Ge=this.loading,qe=le.uid;Ge&&Ge[qe]&&Ge[qe].abort&&(Ge[qe].abort(),delete Ge[qe]),Ee()}removeTile(le,Ee){const Ge=this.loaded,qe=le.uid;Ge&&Ge[qe]&&delete Ge[qe],Ee()}}class at{constructor(){this.loaded={}}loadTile(le,Ee){const{uid:Ge,encoding:qe,rawImageData:bt}=le,Ot=E.isImageBitmap(bt)?this.getImageData(bt):bt,Dt=new E.DEMData(Ge,Ot,qe);this.loaded=this.loaded||{},this.loaded[Ge]=Dt,Ee(null,Dt)}getImageData(le){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(le.width,le.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=le.width,this.offscreenCanvas.height=le.height,this.offscreenCanvasContext.drawImage(le,0,0,le.width,le.height);const Ee=this.offscreenCanvasContext.getImageData(-1,-1,le.width+2,le.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new E.RGBAImage({width:Ee.width,height:Ee.height},Ee.data)}removeTile(le){const Ee=this.loaded,Ge=le.uid;Ee&&Ee[Ge]&&delete Ee[Ge]}}var Ct=function rt(le,Ee){var Ge,qe=le&&le.type;if("FeatureCollection"===qe)for(Ge=0;Ge<le.features.length;Ge++)rt(le.features[Ge],Ee);else if("GeometryCollection"===qe)for(Ge=0;Ge<le.geometries.length;Ge++)rt(le.geometries[Ge],Ee);else if("Feature"===qe)rt(le.geometry,Ee);else if("Polygon"===qe)ue(le.coordinates,Ee);else if("MultiPolygon"===qe)for(Ge=0;Ge<le.coordinates.length;Ge++)ue(le.coordinates[Ge],Ee);return le};function ue(rt,le){if(0!==rt.length){De(rt[0],le);for(var Ee=1;Ee<rt.length;Ee++)De(rt[Ee],!le)}}function De(rt,le){for(var Ee=0,Ge=0,qe=0,bt=rt.length,Ot=bt-1;qe<bt;Ot=qe++){var Dt=(rt[qe][0]-rt[Ot][0])*(rt[Ot][1]+rt[qe][1]),vt=Ee+Dt;Ge+=Math.abs(Ee)>=Math.abs(Dt)?Ee-vt+Dt:Dt-vt+Ee,Ee=vt}Ee+Ge>=0!=!!le&&rt.reverse()}const oe=E.vectorTile.VectorTileFeature.prototype.toGeoJSON;class ye{constructor(le){this._feature=le,this.extent=E.EXTENT,this.type=le.type,this.properties=le.tags,"id"in le&&!isNaN(le.id)&&(this.id=parseInt(le.id,10))}loadGeometry(){if(1===this._feature.type){const le=[];for(const Ee of this._feature.geometry)le.push([new E.pointGeometry(Ee[0],Ee[1])]);return le}{const le=[];for(const Ee of this._feature.geometry){const Ge=[];for(const qe of Ee)Ge.push(new E.pointGeometry(qe[0],qe[1]));le.push(Ge)}return le}}toGeoJSON(le,Ee,Ge){return oe.call(this,le,Ee,Ge)}}class ce{constructor(le){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=E.EXTENT,this.length=le.length,this._features=le}feature(le){return new ye(this._features[le])}}var Re={exports:{}},ve=E.pointGeometry,we=E.vectorTile.VectorTileFeature,Fe=se;function se(rt,le){this.options=le||{},this.features=rt,this.length=rt.length}function _t(rt,le){this.id="number"==typeof rt.id?rt.id:void 0,this.type=rt.type,this.rawGeometry=1===rt.type?[rt.geometry]:rt.geometry,this.properties=rt.tags,this.extent=le||4096}se.prototype.feature=function(rt){return new _t(this.features[rt],this.options.extent)},_t.prototype.loadGeometry=function(){var rt=this.rawGeometry;this.geometry=[];for(var le=0;le<rt.length;le++){for(var Ee=rt[le],Ge=[],qe=0;qe<Ee.length;qe++)Ge.push(new ve(Ee[qe][0],Ee[qe][1]));this.geometry.push(Ge)}return this.geometry},_t.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var rt=this.geometry,le=1/0,Ee=-1/0,Ge=1/0,qe=-1/0,bt=0;bt<rt.length;bt++)for(var Ot=rt[bt],Dt=0;Dt<Ot.length;Dt++){var vt=Ot[Dt];le=Math.min(le,vt.x),Ee=Math.max(Ee,vt.x),Ge=Math.min(Ge,vt.y),qe=Math.max(qe,vt.y)}return[le,Ge,Ee,qe]},_t.prototype.toGeoJSON=we.prototype.toGeoJSON;var Xe=E.pbf,st=Fe;function de(rt){var le=new Xe;return function(Ee,Ge){for(var qe in Ee.layers)Ge.writeMessage(3,Qe,Ee.layers[qe])}(rt,le),le.finish()}function Qe(rt,le){var Ee;le.writeVarintField(15,rt.version||1),le.writeStringField(1,rt.name||""),le.writeVarintField(5,rt.extent||4096);var Ge={keys:[],values:[],keycache:{},valuecache:{}};for(Ee=0;Ee<rt.length;Ee++)Ge.feature=rt.feature(Ee),le.writeMessage(2,dt,Ge);var qe=Ge.keys;for(Ee=0;Ee<qe.length;Ee++)le.writeStringField(3,qe[Ee]);var bt=Ge.values;for(Ee=0;Ee<bt.length;Ee++)le.writeMessage(4,Mt,bt[Ee])}function dt(rt,le){var Ee=rt.feature;void 0!==Ee.id&&le.writeVarintField(1,Ee.id),le.writeMessage(2,Me,rt),le.writeVarintField(3,Ee.type),le.writeMessage(4,gt,Ee)}function Me(rt,le){var Ee=rt.feature,Ge=rt.keys,qe=rt.values,bt=rt.keycache,Ot=rt.valuecache;for(var Dt in Ee.properties){var vt=Ee.properties[Dt],Lt=bt[Dt];if(null!==vt){void 0===Lt&&(Ge.push(Dt),bt[Dt]=Lt=Ge.length-1),le.writeVarint(Lt);var Qt=typeof vt;"string"!==Qt&&"boolean"!==Qt&&"number"!==Qt&&(vt=JSON.stringify(vt));var mn=Qt+":"+vt,Wt=Ot[mn];void 0===Wt&&(qe.push(vt),Ot[mn]=Wt=qe.length-1),le.writeVarint(Wt)}}}function ut(rt,le){return(le<<3)+(7&rt)}function $e(rt){return rt<<1^rt>>31}function gt(rt,le){for(var Ee=rt.loadGeometry(),Ge=rt.type,qe=0,bt=0,Ot=Ee.length,Dt=0;Dt<Ot;Dt++){var vt=Ee[Dt],Lt=1;1===Ge&&(Lt=vt.length),le.writeVarint(ut(1,Lt));for(var Qt=3===Ge?vt.length-1:vt.length,mn=0;mn<Qt;mn++){1===mn&&1!==Ge&&le.writeVarint(ut(2,Qt-1));var Wt=vt[mn].x-qe,li=vt[mn].y-bt;le.writeVarint($e(Wt)),le.writeVarint($e(li)),qe+=Wt,bt+=li}3===Ge&&le.writeVarint(ut(7,1))}}function Mt(rt,le){var Ee=typeof rt;"string"===Ee?le.writeStringField(1,rt):"boolean"===Ee?le.writeBooleanField(7,rt):"number"===Ee&&(rt%1!=0?le.writeDoubleField(3,rt):rt<0?le.writeSVarintField(6,rt):le.writeVarintField(5,rt))}function tt(rt,le,Ee,Ge,qe,bt){if(qe-Ge<=Ee)return;const Ot=Ge+qe>>1;Bt(rt,le,Ot,Ge,qe,bt%2),tt(rt,le,Ee,Ge,Ot-1,bt+1),tt(rt,le,Ee,Ot+1,qe,bt+1)}function Bt(rt,le,Ee,Ge,qe,bt){for(;qe>Ge;){if(qe-Ge>600){const Lt=qe-Ge+1,Qt=Ee-Ge+1,mn=Math.log(Lt),Wt=.5*Math.exp(2*mn/3),li=.5*Math.sqrt(mn*Wt*(Lt-Wt)/Lt)*(Qt-Lt/2<0?-1:1);Bt(rt,le,Ee,Math.max(Ge,Math.floor(Ee-Qt*Wt/Lt+li)),Math.min(qe,Math.floor(Ee+(Lt-Qt)*Wt/Lt+li)),bt)}const Ot=le[2*Ee+bt];let Dt=Ge,vt=qe;for(Vt(rt,le,Ge,Ee),le[2*qe+bt]>Ot&&Vt(rt,le,Ge,qe);Dt<vt;){for(Vt(rt,le,Dt,vt),Dt++,vt--;le[2*Dt+bt]<Ot;)Dt++;for(;le[2*vt+bt]>Ot;)vt--}le[2*Ge+bt]===Ot?Vt(rt,le,Ge,vt):(vt++,Vt(rt,le,vt,qe)),vt<=Ee&&(Ge=vt+1),Ee<=vt&&(qe=vt-1)}}function Vt(rt,le,Ee,Ge){rn(rt,Ee,Ge),rn(le,2*Ee,2*Ge),rn(le,2*Ee+1,2*Ge+1)}function rn(rt,le,Ee){const Ge=rt[le];rt[le]=rt[Ee],rt[Ee]=Ge}function Gt(rt,le,Ee,Ge){const qe=rt-Ee,bt=le-Ge;return qe*qe+bt*bt}Re.exports=de,Re.exports.fromVectorTileJs=de,Re.exports.fromGeojsonVt=function(rt,le){le=le||{};var Ee={};for(var Ge in rt)Ee[Ge]=new st(rt[Ge].features,le),Ee[Ge].name=Ge,Ee[Ge].version=le.version,Ee[Ge].extent=le.extent;return de({layers:Ee})},Re.exports.GeoJSONWrapper=st;const Vn=rt=>rt[0],Bn=rt=>rt[1];class Sn{constructor(le,Ee=Vn,Ge=Bn,qe=64,bt=Float64Array){this.nodeSize=qe,this.points=le;const Ot=le.length<65536?Uint16Array:Uint32Array,Dt=this.ids=new Ot(le.length),vt=this.coords=new bt(2*le.length);for(let Lt=0;Lt<le.length;Lt++)Dt[Lt]=Lt,vt[2*Lt]=Ee(le[Lt]),vt[2*Lt+1]=Ge(le[Lt]);tt(Dt,vt,qe,0,Dt.length-1,0)}range(le,Ee,Ge,qe){return function(bt,Ot,Dt,vt,Lt,Qt,mn){const Wt=[0,bt.length-1,0],li=[];let Pn,xn;for(;Wt.length;){const Ii=Wt.pop(),mi=Wt.pop(),lr=Wt.pop();if(mi-lr<=mn){for(let Mi=lr;Mi<=mi;Mi++)Pn=Ot[2*Mi],xn=Ot[2*Mi+1],Pn>=Dt&&Pn<=Lt&&xn>=vt&&xn<=Qt&&li.push(bt[Mi]);continue}const ii=Math.floor((lr+mi)/2);Pn=Ot[2*ii],xn=Ot[2*ii+1],Pn>=Dt&&Pn<=Lt&&xn>=vt&&xn<=Qt&&li.push(bt[ii]);const Xn=(Ii+1)%2;(0===Ii?Dt<=Pn:vt<=xn)&&(Wt.push(lr),Wt.push(ii-1),Wt.push(Xn)),(0===Ii?Lt>=Pn:Qt>=xn)&&(Wt.push(ii+1),Wt.push(mi),Wt.push(Xn))}return li}(this.ids,this.coords,le,Ee,Ge,qe,this.nodeSize)}within(le,Ee,Ge){return function(qe,bt,Ot,Dt,vt,Lt){const Qt=[0,qe.length-1,0],mn=[],Wt=vt*vt;for(;Qt.length;){const li=Qt.pop(),Pn=Qt.pop(),xn=Qt.pop();if(Pn-xn<=Lt){for(let Xn=xn;Xn<=Pn;Xn++)Gt(bt[2*Xn],bt[2*Xn+1],Ot,Dt)<=Wt&&mn.push(qe[Xn]);continue}const Ii=Math.floor((xn+Pn)/2),mi=bt[2*Ii],lr=bt[2*Ii+1];Gt(mi,lr,Ot,Dt)<=Wt&&mn.push(qe[Ii]);const ii=(li+1)%2;(0===li?Ot-vt<=mi:Dt-vt<=lr)&&(Qt.push(xn),Qt.push(Ii-1),Qt.push(ii)),(0===li?Ot+vt>=mi:Dt+vt>=lr)&&(Qt.push(Ii+1),Qt.push(Pn),Qt.push(ii))}return mn}(this.ids,this.coords,le,Ee,Ge,this.nodeSize)}}const si={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:rt=>rt},$n=Math.fround||(hn=new Float32Array(1),rt=>(hn[0]=+rt,hn[0]));var hn;class jr{constructor(le){this.options=ke(Object.create(si),le),this.trees=new Array(this.options.maxZoom+1)}load(le){const{log:Ee,minZoom:Ge,maxZoom:qe,nodeSize:bt}=this.options;Ee&&console.time("total time");const Ot=`prepare ${le.length} points`;Ee&&console.time(Ot),this.points=le;let Dt=[];for(let vt=0;vt<le.length;vt++)le[vt].geometry&&Dt.push(Fr(le[vt],vt));this.trees[qe+1]=new Sn(Dt,Je,Tt,bt,Float32Array),Ee&&console.timeEnd(Ot);for(let vt=qe;vt>=Ge;vt--){const Lt=+Date.now();Dt=this._cluster(Dt,vt),this.trees[vt]=new Sn(Dt,Je,Tt,bt,Float32Array),Ee&&console.log("z%d: %d clusters in %dms",vt,Dt.length,+Date.now()-Lt)}return Ee&&console.timeEnd("total time"),this}getClusters(le,Ee){let Ge=((le[0]+180)%360+360)%360-180;const qe=Math.max(-90,Math.min(90,le[1]));let bt=180===le[2]?180:((le[2]+180)%360+360)%360-180;const Ot=Math.max(-90,Math.min(90,le[3]));if(le[2]-le[0]>=360)Ge=-180,bt=180;else if(Ge>bt){const Qt=this.getClusters([Ge,qe,180,Ot],Ee),mn=this.getClusters([-180,qe,bt,Ot],Ee);return Qt.concat(mn)}const Dt=this.trees[this._limitZoom(Ee)],vt=Dt.range(It(Ge),je(Ot),It(bt),je(qe)),Lt=[];for(const Qt of vt){const mn=Dt.points[Qt];Lt.push(mn.numPoints?yi(mn):this.points[mn.index])}return Lt}getChildren(le){const Ee=this._getOriginId(le),Ge=this._getOriginZoom(le),qe="No cluster with the specified id.",bt=this.trees[Ge];if(!bt)throw new Error(qe);const Ot=bt.points[Ee];if(!Ot)throw new Error(qe);const Dt=this.options.radius/(this.options.extent*Math.pow(2,Ge-1)),vt=bt.within(Ot.x,Ot.y,Dt),Lt=[];for(const Qt of vt){const mn=bt.points[Qt];mn.parentId===le&&Lt.push(mn.numPoints?yi(mn):this.points[mn.index])}if(0===Lt.length)throw new Error(qe);return Lt}getLeaves(le,Ee,Ge){const qe=[];return this._appendLeaves(qe,le,Ee=Ee||10,Ge=Ge||0,0),qe}getTile(le,Ee,Ge){const qe=this.trees[this._limitZoom(le)],bt=Math.pow(2,le),{extent:Ot,radius:Dt}=this.options,vt=Dt/Ot,Lt=(Ge-vt)/bt,Qt=(Ge+1+vt)/bt,mn={features:[]};return this._addTileFeatures(qe.range((Ee-vt)/bt,Lt,(Ee+1+vt)/bt,Qt),qe.points,Ee,Ge,bt,mn),0===Ee&&this._addTileFeatures(qe.range(1-vt/bt,Lt,1,Qt),qe.points,bt,Ge,bt,mn),Ee===bt-1&&this._addTileFeatures(qe.range(0,Lt,vt/bt,Qt),qe.points,-1,Ge,bt,mn),mn.features.length?mn:null}getClusterExpansionZoom(le){let Ee=this._getOriginZoom(le)-1;for(;Ee<=this.options.maxZoom;){const Ge=this.getChildren(le);if(Ee++,1!==Ge.length)break;le=Ge[0].properties.cluster_id}return Ee}_appendLeaves(le,Ee,Ge,qe,bt){const Ot=this.getChildren(Ee);for(const Dt of Ot){const vt=Dt.properties;if(vt&&vt.cluster?bt+vt.point_count<=qe?bt+=vt.point_count:bt=this._appendLeaves(le,vt.cluster_id,Ge,qe,bt):bt<qe?bt++:le.push(Dt),le.length===Ge)break}return bt}_addTileFeatures(le,Ee,Ge,qe,bt,Ot){for(const Dt of le){const vt=Ee[Dt],Lt=vt.numPoints;let Qt,mn,Wt;if(Lt)Qt=Ri(vt),mn=vt.x,Wt=vt.y;else{const xn=this.points[vt.index];Qt=xn.properties,mn=It(xn.geometry.coordinates[0]),Wt=je(xn.geometry.coordinates[1])}const li={type:1,geometry:[[Math.round(this.options.extent*(mn*bt-Ge)),Math.round(this.options.extent*(Wt*bt-qe))]],tags:Qt};let Pn;Lt?Pn=vt.id:this.options.generateId?Pn=vt.index:this.points[vt.index].id&&(Pn=this.points[vt.index].id),void 0!==Pn&&(li.id=Pn),Ot.features.push(li)}}_limitZoom(le){return Math.max(this.options.minZoom,Math.min(Math.floor(+le),this.options.maxZoom+1))}_cluster(le,Ee){const Ge=[],{radius:qe,extent:bt,reduce:Ot,minPoints:Dt}=this.options,vt=qe/(bt*Math.pow(2,Ee));for(let Lt=0;Lt<le.length;Lt++){const Qt=le[Lt];if(Qt.zoom<=Ee)continue;Qt.zoom=Ee;const mn=this.trees[Ee+1],Wt=mn.within(Qt.x,Qt.y,vt),li=Qt.numPoints||1;let Pn=li;for(const xn of Wt){const Ii=mn.points[xn];Ii.zoom>Ee&&(Pn+=Ii.numPoints||1)}if(Pn>li&&Pn>=Dt){let xn=Qt.x*li,Ii=Qt.y*li,mi=Ot&&li>1?this._map(Qt,!0):null;const lr=(Lt<<5)+(Ee+1)+this.points.length;for(const ii of Wt){const Xn=mn.points[ii];if(Xn.zoom<=Ee)continue;Xn.zoom=Ee;const Mi=Xn.numPoints||1;xn+=Xn.x*Mi,Ii+=Xn.y*Mi,Xn.parentId=lr,Ot&&(mi||(mi=this._map(Qt,!0)),Ot(mi,this._map(Xn)))}Qt.parentId=lr,Ge.push(sr(xn/Pn,Ii/Pn,lr,Pn,mi))}else if(Ge.push(Qt),Pn>1)for(const xn of Wt){const Ii=mn.points[xn];Ii.zoom<=Ee||(Ii.zoom=Ee,Ge.push(Ii))}}return Ge}_getOriginId(le){return le-this.points.length>>5}_getOriginZoom(le){return(le-this.points.length)%32}_map(le,Ee){if(le.numPoints)return Ee?ke({},le.properties):le.properties;const Ge=this.points[le.index].properties,qe=this.options.map(Ge);return Ee&&qe===Ge?ke({},qe):qe}}function sr(rt,le,Ee,Ge,qe){return{x:$n(rt),y:$n(le),zoom:1/0,id:Ee,parentId:-1,numPoints:Ge,properties:qe}}function Fr(rt,le){const[Ee,Ge]=rt.geometry.coordinates;return{x:$n(It(Ee)),y:$n(je(Ge)),zoom:1/0,index:le,parentId:-1}}function yi(rt){return{type:"Feature",id:rt.id,properties:Ri(rt),geometry:{type:"Point",coordinates:[(le=rt.x,360*(le-.5)),Le(rt.y)]}};var le}function Ri(rt){const le=rt.numPoints,Ee=le>=1e4?`${Math.round(le/1e3)}k`:le>=1e3?Math.round(le/100)/10+"k":le;return ke(ke({},rt.properties),{cluster:!0,cluster_id:rt.id,point_count:le,point_count_abbreviated:Ee})}function It(rt){return rt/360+.5}function je(rt){const le=Math.sin(rt*Math.PI/180),Ee=.5-.25*Math.log((1+le)/(1-le))/Math.PI;return Ee<0?0:Ee>1?1:Ee}function Le(rt){const le=(180-360*rt)*Math.PI/180;return 360*Math.atan(Math.exp(le))/Math.PI-90}function ke(rt,le){for(const Ee in le)rt[Ee]=le[Ee];return rt}function Je(rt){return rt.x}function Tt(rt){return rt.y}function Yt(rt,le,Ee,Ge){for(var qe,bt=Ge,Ot=Ee-le>>1,Dt=Ee-le,vt=rt[le],Lt=rt[le+1],Qt=rt[Ee],mn=rt[Ee+1],Wt=le+3;Wt<Ee;Wt+=3){var li=ln(rt[Wt],rt[Wt+1],vt,Lt,Qt,mn);if(li>bt)qe=Wt,bt=li;else if(li===bt){var Pn=Math.abs(Wt-Ot);Pn<Dt&&(qe=Wt,Dt=Pn)}}bt>Ge&&(qe-le>3&&Yt(rt,le,qe,Ge),rt[qe+2]=bt,Ee-qe>3&&Yt(rt,qe,Ee,Ge))}function ln(rt,le,Ee,Ge,qe,bt){var Ot=qe-Ee,Dt=bt-Ge;if(0!==Ot||0!==Dt){var vt=((rt-Ee)*Ot+(le-Ge)*Dt)/(Ot*Ot+Dt*Dt);vt>1?(Ee=qe,Ge=bt):vt>0&&(Ee+=Ot*vt,Ge+=Dt*vt)}return(Ot=rt-Ee)*Ot+(Dt=le-Ge)*Dt}function un(rt,le,Ee,Ge){var qe={id:void 0===rt?null:rt,type:le,geometry:Ee,tags:Ge,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(bt){var Ot=bt.geometry,Dt=bt.type;if("Point"===Dt||"MultiPoint"===Dt||"LineString"===Dt)mt(bt,Ot);else if("Polygon"===Dt||"MultiLineString"===Dt)for(var vt=0;vt<Ot.length;vt++)mt(bt,Ot[vt]);else if("MultiPolygon"===Dt)for(vt=0;vt<Ot.length;vt++)for(var Lt=0;Lt<Ot[vt].length;Lt++)mt(bt,Ot[vt][Lt])}(qe),qe}function mt(rt,le){for(var Ee=0;Ee<le.length;Ee+=3)rt.minX=Math.min(rt.minX,le[Ee]),rt.minY=Math.min(rt.minY,le[Ee+1]),rt.maxX=Math.max(rt.maxX,le[Ee]),rt.maxY=Math.max(rt.maxY,le[Ee+1])}function jt(rt,le,Ee,Ge){if(le.geometry){var qe=le.geometry.coordinates,bt=le.geometry.type,Ot=Math.pow(Ee.tolerance/((1<<Ee.maxZoom)*Ee.extent),2),Dt=[],vt=le.id;if(Ee.promoteId?vt=le.properties[Ee.promoteId]:Ee.generateId&&(vt=Ge||0),"Point"===bt)In(qe,Dt);else if("MultiPoint"===bt)for(var Lt=0;Lt<qe.length;Lt++)In(qe[Lt],Dt);else if("LineString"===bt)sn(qe,Dt,Ot,!1);else if("MultiLineString"===bt){if(Ee.lineMetrics){for(Lt=0;Lt<qe.length;Lt++)sn(qe[Lt],Dt=[],Ot,!1),rt.push(un(vt,"LineString",Dt,le.properties));return}Fn(qe,Dt,Ot,!1)}else if("Polygon"===bt)Fn(qe,Dt,Ot,!0);else{if("MultiPolygon"!==bt){if("GeometryCollection"===bt){for(Lt=0;Lt<le.geometry.geometries.length;Lt++)jt(rt,{id:vt,geometry:le.geometry.geometries[Lt],properties:le.properties},Ee,Ge);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Lt=0;Lt<qe.length;Lt++){var Qt=[];Fn(qe[Lt],Qt,Ot,!0),Dt.push(Qt)}}rt.push(un(vt,bt,Dt,le.properties))}}function In(rt,le){le.push(hr(rt[0])),le.push(Ti(rt[1])),le.push(0)}function sn(rt,le,Ee,Ge){for(var qe,bt,Ot=0,Dt=0;Dt<rt.length;Dt++){var vt=hr(rt[Dt][0]),Lt=Ti(rt[Dt][1]);le.push(vt),le.push(Lt),le.push(0),Dt>0&&(Ot+=Ge?(qe*Lt-vt*bt)/2:Math.sqrt(Math.pow(vt-qe,2)+Math.pow(Lt-bt,2))),qe=vt,bt=Lt}var Qt=le.length-3;le[2]=1,Yt(le,0,Qt,Ee),le[Qt+2]=1,le.size=Math.abs(Ot),le.start=0,le.end=le.size}function Fn(rt,le,Ee,Ge){for(var qe=0;qe<rt.length;qe++){var bt=[];sn(rt[qe],bt,Ee,Ge),le.push(bt)}}function hr(rt){return rt/360+.5}function Ti(rt){var le=Math.sin(rt*Math.PI/180),Ee=.5-.25*Math.log((1+le)/(1-le))/Math.PI;return Ee<0?0:Ee>1?1:Ee}function Bi(rt,le,Ee,Ge,qe,bt,Ot,Dt){if(Ge/=le,bt>=(Ee/=le)&&Ot<Ge)return rt;if(Ot<Ee||bt>=Ge)return null;for(var vt=[],Lt=0;Lt<rt.length;Lt++){var Qt=rt[Lt],mn=Qt.geometry,Wt=Qt.type,li=0===qe?Qt.minX:Qt.minY,Pn=0===qe?Qt.maxX:Qt.maxY;if(li>=Ee&&Pn<Ge)vt.push(Qt);else if(!(Pn<Ee||li>=Ge)){var xn=[];if("Point"===Wt||"MultiPoint"===Wt)fr(mn,xn,Ee,Ge,qe);else if("LineString"===Wt)Cn(mn,xn,Ee,Ge,qe,!1,Dt.lineMetrics);else if("MultiLineString"===Wt)hi(mn,xn,Ee,Ge,qe,!1);else if("Polygon"===Wt)hi(mn,xn,Ee,Ge,qe,!0);else if("MultiPolygon"===Wt)for(var Ii=0;Ii<mn.length;Ii++){var mi=[];hi(mn[Ii],mi,Ee,Ge,qe,!0),mi.length&&xn.push(mi)}if(xn.length){if(Dt.lineMetrics&&"LineString"===Wt){for(Ii=0;Ii<xn.length;Ii++)vt.push(un(Qt.id,Wt,xn[Ii],Qt.tags));continue}"LineString"!==Wt&&"MultiLineString"!==Wt||(1===xn.length?(Wt="LineString",xn=xn[0]):Wt="MultiLineString"),"Point"!==Wt&&"MultiPoint"!==Wt||(Wt=3===xn.length?"Point":"MultiPoint"),vt.push(un(Qt.id,Wt,xn,Qt.tags))}}}return vt.length?vt:null}function fr(rt,le,Ee,Ge,qe){for(var bt=0;bt<rt.length;bt+=3){var Ot=rt[bt+qe];Ot>=Ee&&Ot<=Ge&&(le.push(rt[bt]),le.push(rt[bt+1]),le.push(rt[bt+2]))}}function Cn(rt,le,Ee,Ge,qe,bt,Ot){for(var Dt,vt,Lt=qn(rt),Qt=0===qe?Mr:wi,mn=rt.start,Wt=0;Wt<rt.length-3;Wt+=3){var li=rt[Wt],Pn=rt[Wt+1],xn=rt[Wt+2],Ii=rt[Wt+3],mi=rt[Wt+4],lr=0===qe?li:Pn,ii=0===qe?Ii:mi,Xn=!1;Ot&&(Dt=Math.sqrt(Math.pow(li-Ii,2)+Math.pow(Pn-mi,2))),lr<Ee?ii>Ee&&(vt=Qt(Lt,li,Pn,Ii,mi,Ee),Ot&&(Lt.start=mn+Dt*vt)):lr>Ge?ii<Ge&&(vt=Qt(Lt,li,Pn,Ii,mi,Ge),Ot&&(Lt.start=mn+Dt*vt)):Di(Lt,li,Pn,xn),ii<Ee&&lr>=Ee&&(vt=Qt(Lt,li,Pn,Ii,mi,Ee),Xn=!0),ii>Ge&&lr<=Ge&&(vt=Qt(Lt,li,Pn,Ii,mi,Ge),Xn=!0),!bt&&Xn&&(Ot&&(Lt.end=mn+Dt*vt),le.push(Lt),Lt=qn(rt)),Ot&&(mn+=Dt)}var Mi=rt.length-3;li=rt[Mi],Pn=rt[Mi+1],xn=rt[Mi+2],(lr=0===qe?li:Pn)>=Ee&&lr<=Ge&&Di(Lt,li,Pn,xn),Mi=Lt.length-3,bt&&Mi>=3&&(Lt[Mi]!==Lt[0]||Lt[Mi+1]!==Lt[1])&&Di(Lt,Lt[0],Lt[1],Lt[2]),Lt.length&&le.push(Lt)}function qn(rt){var le=[];return le.size=rt.size,le.start=rt.start,le.end=rt.end,le}function hi(rt,le,Ee,Ge,qe,bt){for(var Ot=0;Ot<rt.length;Ot++)Cn(rt[Ot],le,Ee,Ge,qe,bt,!1)}function Di(rt,le,Ee,Ge){rt.push(le),rt.push(Ee),rt.push(Ge)}function Mr(rt,le,Ee,Ge,qe,bt){var Ot=(bt-le)/(Ge-le);return rt.push(bt),rt.push(Ee+(qe-Ee)*Ot),rt.push(1),Ot}function wi(rt,le,Ee,Ge,qe,bt){var Ot=(bt-Ee)/(qe-Ee);return rt.push(le+(Ge-le)*Ot),rt.push(bt),rt.push(1),Ot}function nr(rt,le){for(var Ee=[],Ge=0;Ge<rt.length;Ge++){var qe,bt=rt[Ge],Ot=bt.type;if("Point"===Ot||"MultiPoint"===Ot||"LineString"===Ot)qe=dn(bt.geometry,le);else if("MultiLineString"===Ot||"Polygon"===Ot){qe=[];for(var Dt=0;Dt<bt.geometry.length;Dt++)qe.push(dn(bt.geometry[Dt],le))}else if("MultiPolygon"===Ot)for(qe=[],Dt=0;Dt<bt.geometry.length;Dt++){for(var vt=[],Lt=0;Lt<bt.geometry[Dt].length;Lt++)vt.push(dn(bt.geometry[Dt][Lt],le));qe.push(vt)}Ee.push(un(bt.id,Ot,qe,bt.tags))}return Ee}function dn(rt,le){var Ee=[];Ee.size=rt.size,void 0!==rt.start&&(Ee.start=rt.start,Ee.end=rt.end);for(var Ge=0;Ge<rt.length;Ge+=3)Ee.push(rt[Ge]+le,rt[Ge+1],rt[Ge+2]);return Ee}function wa(rt,le){if(rt.transformed)return rt;var Ee,Ge,qe,bt=1<<rt.z,Ot=rt.x,Dt=rt.y;for(Ee=0;Ee<rt.features.length;Ee++){var vt=rt.features[Ee],Lt=vt.geometry,Qt=vt.type;if(vt.geometry=[],1===Qt)for(Ge=0;Ge<Lt.length;Ge+=2)vt.geometry.push(Lr(Lt[Ge],Lt[Ge+1],le,bt,Ot,Dt));else for(Ge=0;Ge<Lt.length;Ge++){var mn=[];for(qe=0;qe<Lt[Ge].length;qe+=2)mn.push(Lr(Lt[Ge][qe],Lt[Ge][qe+1],le,bt,Ot,Dt));vt.geometry.push(mn)}}return rt.transformed=!0,rt}function Lr(rt,le,Ee,Ge,qe,bt){return[Math.round(Ee*(rt*Ge-qe)),Math.round(Ee*(le*Ge-bt))]}function fi(rt,le,Ee,Ge,qe){for(var bt=le===qe.maxZoom?0:qe.tolerance/((1<<le)*qe.extent),Ot={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Ee,y:Ge,z:le,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Dt=0;Dt<rt.length;Dt++){Ot.numFeatures++,ar(Ot,rt[Dt],bt,qe);var vt=rt[Dt].minX,Lt=rt[Dt].minY,Qt=rt[Dt].maxX,mn=rt[Dt].maxY;vt<Ot.minX&&(Ot.minX=vt),Lt<Ot.minY&&(Ot.minY=Lt),Qt>Ot.maxX&&(Ot.maxX=Qt),mn>Ot.maxY&&(Ot.maxY=mn)}return Ot}function ar(rt,le,Ee,Ge){var qe=le.geometry,bt=le.type,Ot=[];if("Point"===bt||"MultiPoint"===bt)for(var Dt=0;Dt<qe.length;Dt+=3)Ot.push(qe[Dt]),Ot.push(qe[Dt+1]),rt.numPoints++,rt.numSimplified++;else if("LineString"===bt)Zs(Ot,qe,rt,Ee,!1,!1);else if("MultiLineString"===bt||"Polygon"===bt)for(Dt=0;Dt<qe.length;Dt++)Zs(Ot,qe[Dt],rt,Ee,"Polygon"===bt,0===Dt);else if("MultiPolygon"===bt)for(var vt=0;vt<qe.length;vt++){var Lt=qe[vt];for(Dt=0;Dt<Lt.length;Dt++)Zs(Ot,Lt[Dt],rt,Ee,!0,0===Dt)}if(Ot.length){var Qt=le.tags||null;if("LineString"===bt&&Ge.lineMetrics){for(var mn in Qt={},le.tags)Qt[mn]=le.tags[mn];Qt.mapbox_clip_start=qe.start/qe.size,Qt.mapbox_clip_end=qe.end/qe.size}var Wt={geometry:Ot,type:"Polygon"===bt||"MultiPolygon"===bt?3:"LineString"===bt||"MultiLineString"===bt?2:1,tags:Qt};null!==le.id&&(Wt.id=le.id),rt.features.push(Wt)}}function Zs(rt,le,Ee,Ge,qe,bt){var Ot=Ge*Ge;if(Ge>0&&le.size<(qe?Ot:Ge))Ee.numPoints+=le.length/3;else{for(var Dt=[],vt=0;vt<le.length;vt+=3)(0===Ge||le[vt+2]>Ot)&&(Ee.numSimplified++,Dt.push(le[vt]),Dt.push(le[vt+1])),Ee.numPoints++;qe&&function(Lt,Qt){for(var mn=0,Wt=0,li=Lt.length,Pn=li-2;Wt<li;Pn=Wt,Wt+=2)mn+=(Lt[Wt]-Lt[Pn])*(Lt[Wt+1]+Lt[Pn+1]);if(mn>0===Qt)for(Wt=0,li=Lt.length;Wt<li/2;Wt+=2){var xn=Lt[Wt],Ii=Lt[Wt+1];Lt[Wt]=Lt[li-2-Wt],Lt[Wt+1]=Lt[li-1-Wt],Lt[li-2-Wt]=xn,Lt[li-1-Wt]=Ii}}(Dt,bt),rt.push(Dt)}}function Os(rt,le){var Ee=(le=this.options=function(qe,bt){for(var Ot in bt)qe[Ot]=bt[Ot];return qe}(Object.create(this.options),le)).debug;if(Ee&&console.time("preprocess data"),le.maxZoom<0||le.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(le.promoteId&&le.generateId)throw new Error("promoteId and generateId cannot be used together.");var qe,bt,Ot,Dt,vt,Lt,Ge=function(qe,bt){var Ot=[];if("FeatureCollection"===qe.type)for(var Dt=0;Dt<qe.features.length;Dt++)jt(Ot,qe.features[Dt],bt,Dt);else jt(Ot,"Feature"===qe.type?qe:{geometry:qe},bt);return Ot}(rt,le);this.tiles={},this.tileCoords=[],Ee&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",le.indexMaxZoom,le.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Dt=qe=Ge,vt=Bi(qe,1,-1-(Ot=(bt=le).buffer/bt.extent),Ot,0,-1,2,bt),Lt=Bi(qe,1,1-Ot,2+Ot,0,-1,2,bt),(vt||Lt)&&(Dt=Bi(qe,1,-Ot,1+Ot,0,-1,2,bt)||[],vt&&(Dt=nr(vt,1).concat(Dt)),Lt&&(Dt=Dt.concat(nr(Lt,-1)))),(Ge=Dt).length&&this.splitTile(Ge,0,0,0),Ee&&(Ge.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function na(rt,le,Ee){return 32*((1<<rt)*Ee+le)+rt}function ia(rt,le){const Ee=rt.tileID.canonical;if(!this._geoJSONIndex)return le(null,null);const Ge=this._geoJSONIndex.getTile(Ee.z,Ee.x,Ee.y);if(!Ge)return le(null,null);const qe=new ce(Ge.features);let bt=Re.exports(qe);0===bt.byteOffset&&bt.byteLength===bt.buffer.byteLength||(bt=new Uint8Array(bt)),le(null,{vectorTile:qe,rawData:bt.buffer})}Os.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Os.prototype.splitTile=function(rt,le,Ee,Ge,qe,bt,Ot){for(var Dt=[rt,le,Ee,Ge],vt=this.options,Lt=vt.debug;Dt.length;){Ge=Dt.pop(),Ee=Dt.pop(),le=Dt.pop(),rt=Dt.pop();var Qt=1<<le,mn=na(le,Ee,Ge),Wt=this.tiles[mn];if(!Wt&&(Lt>1&&console.time("creation"),Wt=this.tiles[mn]=fi(rt,le,Ee,Ge,vt),this.tileCoords.push({z:le,x:Ee,y:Ge}),Lt)){Lt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",le,Ee,Ge,Wt.numFeatures,Wt.numPoints,Wt.numSimplified),console.timeEnd("creation"));var li="z"+le;this.stats[li]=(this.stats[li]||0)+1,this.total++}if(Wt.source=rt,qe){if(le===vt.maxZoom||le===qe)continue;var Pn=1<<qe-le;if(Ee!==Math.floor(bt/Pn)||Ge!==Math.floor(Ot/Pn))continue}else if(le===vt.indexMaxZoom||Wt.numPoints<=vt.indexMaxPoints)continue;if(Wt.source=null,0!==rt.length){Lt>1&&console.time("clipping");var xn,Ii,mi,lr,ii,Xn,Mi=.5*vt.buffer/vt.extent,Wi=.5-Mi,qr=.5+Mi,yr=1+Mi;xn=Ii=mi=lr=null,ii=Bi(rt,Qt,Ee-Mi,Ee+qr,0,Wt.minX,Wt.maxX,vt),Xn=Bi(rt,Qt,Ee+Wi,Ee+yr,0,Wt.minX,Wt.maxX,vt),rt=null,ii&&(xn=Bi(ii,Qt,Ge-Mi,Ge+qr,1,Wt.minY,Wt.maxY,vt),Ii=Bi(ii,Qt,Ge+Wi,Ge+yr,1,Wt.minY,Wt.maxY,vt),ii=null),Xn&&(mi=Bi(Xn,Qt,Ge-Mi,Ge+qr,1,Wt.minY,Wt.maxY,vt),lr=Bi(Xn,Qt,Ge+Wi,Ge+yr,1,Wt.minY,Wt.maxY,vt),Xn=null),Lt>1&&console.timeEnd("clipping"),Dt.push(xn||[],le+1,2*Ee,2*Ge),Dt.push(Ii||[],le+1,2*Ee,2*Ge+1),Dt.push(mi||[],le+1,2*Ee+1,2*Ge),Dt.push(lr||[],le+1,2*Ee+1,2*Ge+1)}}},Os.prototype.getTile=function(rt,le,Ee){var Ge=this.options,qe=Ge.extent,bt=Ge.debug;if(rt<0||rt>24)return null;var Ot=1<<rt,Dt=na(rt,le=(le%Ot+Ot)%Ot,Ee);if(this.tiles[Dt])return wa(this.tiles[Dt],qe);bt>1&&console.log("drilling down to z%d-%d-%d",rt,le,Ee);for(var vt,Lt=rt,Qt=le,mn=Ee;!vt&&Lt>0;)Lt--,Qt=Math.floor(Qt/2),mn=Math.floor(mn/2),vt=this.tiles[na(Lt,Qt,mn)];return vt&&vt.source?(bt>1&&console.log("found parent tile z%d-%d-%d",Lt,Qt,mn),bt>1&&console.time("drilling down"),this.splitTile(vt.source,Lt,Qt,mn,rt,le,Ee),bt>1&&console.timeEnd("drilling down"),this.tiles[Dt]?wa(this.tiles[Dt],qe):null):null};class zs extends Te{constructor(le,Ee,Ge,qe){super(le,Ee,Ge,ia),qe&&(this.loadGeoJSON=qe)}loadData(le,Ee){var Ge;null===(Ge=this._pendingRequest)||void 0===Ge||Ge.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const qe=!!(le&&le.request&&le.request.collectResourceTiming)&&new E.RequestPerformance(le.request);this._pendingCallback=Ee,this._pendingRequest=this.loadGeoJSON(le,(bt,Ot)=>{if(delete this._pendingCallback,delete this._pendingRequest,bt||!Ot)return Ee(bt);if("object"!=typeof Ot)return Ee(new Error(`Input data given to '${le.source}' is not a valid GeoJSON object.`));{Ct(Ot,!0);try{if(le.filter){const vt=E.createExpression(le.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===vt.result)throw new Error(vt.value.map(Qt=>`${Qt.key}: ${Qt.message}`).join(", "));Ot={type:"FeatureCollection",features:Ot.features.filter(Qt=>vt.value.evaluate({zoom:0},Qt))}}this._geoJSONIndex=le.cluster?new jr(function({superclusterOptions:vt,clusterProperties:Lt}){if(!Lt||!vt)return vt;const Qt={},mn={},Wt={accumulated:null,zoom:0},li={properties:null},Pn=Object.keys(Lt);for(const xn of Pn){const[Ii,mi]=Lt[xn],lr=E.createExpression(mi),ii=E.createExpression("string"==typeof Ii?[Ii,["accumulated"],["get",xn]]:Ii);Qt[xn]=lr.value,mn[xn]=ii.value}return vt.map=xn=>{li.properties=xn;const Ii={};for(const mi of Pn)Ii[mi]=Qt[mi].evaluate(Wt,li);return Ii},vt.reduce=(xn,Ii)=>{li.properties=Ii;for(const mi of Pn)Wt.accumulated=xn[mi],xn[mi]=mn[mi].evaluate(Wt,li)},vt}(le)).load(Ot.features):new Os(vt=Ot,le.geojsonVtOptions)}catch(vt){return Ee(vt)}this.loaded={};const Dt={};if(qe){const vt=qe.finish();vt&&(Dt.resourceTiming={},Dt.resourceTiming[le.source]=JSON.parse(JSON.stringify(vt)))}Ee(null,Dt)}var vt})}reloadTile(le,Ee){const Ge=this.loaded;return Ge&&Ge[le.uid]?super.reloadTile(le,Ee):this.loadTile(le,Ee)}loadGeoJSON(le,Ee){if(le.request)return E.getJSON(le.request,Ee);if("string"==typeof le.data)try{Ee(null,JSON.parse(le.data))}catch{Ee(new Error(`Input data given to '${le.source}' is not a valid GeoJSON object.`))}else Ee(new Error(`Input data given to '${le.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(le,Ee){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Ee()}getClusterExpansionZoom(le,Ee){try{Ee(null,this._geoJSONIndex.getClusterExpansionZoom(le.clusterId))}catch(Ge){Ee(Ge)}}getClusterChildren(le,Ee){try{Ee(null,this._geoJSONIndex.getChildren(le.clusterId))}catch(Ge){Ee(Ge)}}getClusterLeaves(le,Ee){try{Ee(null,this._geoJSONIndex.getLeaves(le.clusterId,le.limit,le.offset))}catch(Ge){Ee(Ge)}}}class dc{constructor(le){this.self=le,this.actor=new E.Actor(le,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:Te,geojson:zs},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Ee,Ge)=>{if(this.workerSourceTypes[Ee])throw new Error(`Worker source with name "${Ee}" already registered.`);this.workerSourceTypes[Ee]=Ge},this.self.registerRTLTextPlugin=Ee=>{if(E.plugin.isParsed())throw new Error("RTL text plugin already registered.");E.plugin.applyArabicShaping=Ee.applyArabicShaping,E.plugin.processBidirectionalText=Ee.processBidirectionalText,E.plugin.processStyledBidirectionalText=Ee.processStyledBidirectionalText}}setReferrer(le,Ee){this.referrer=Ee}setImages(le,Ee,Ge){this.availableImages[le]=Ee;for(const qe in this.workerSources[le]){const bt=this.workerSources[le][qe];for(const Ot in bt)bt[Ot].availableImages=Ee}Ge()}setLayers(le,Ee,Ge){this.getLayerIndex(le).replace(Ee),Ge()}updateLayers(le,Ee,Ge){this.getLayerIndex(le).update(Ee.layers,Ee.removedIds),Ge()}loadTile(le,Ee,Ge){this.getWorkerSource(le,Ee.type,Ee.source).loadTile(Ee,Ge)}loadDEMTile(le,Ee,Ge){this.getDEMWorkerSource(le,Ee.source).loadTile(Ee,Ge)}reloadTile(le,Ee,Ge){this.getWorkerSource(le,Ee.type,Ee.source).reloadTile(Ee,Ge)}abortTile(le,Ee,Ge){this.getWorkerSource(le,Ee.type,Ee.source).abortTile(Ee,Ge)}removeTile(le,Ee,Ge){this.getWorkerSource(le,Ee.type,Ee.source).removeTile(Ee,Ge)}removeDEMTile(le,Ee){this.getDEMWorkerSource(le,Ee.source).removeTile(Ee)}removeSource(le,Ee,Ge){if(!this.workerSources[le]||!this.workerSources[le][Ee.type]||!this.workerSources[le][Ee.type][Ee.source])return;const qe=this.workerSources[le][Ee.type][Ee.source];delete this.workerSources[le][Ee.type][Ee.source],void 0!==qe.removeSource?qe.removeSource(Ee,Ge):Ge()}loadWorkerSource(le,Ee,Ge){try{this.self.importScripts(Ee.url),Ge()}catch(qe){Ge(qe.toString())}}syncRTLPluginState(le,Ee,Ge){try{E.plugin.setState(Ee);const qe=E.plugin.getPluginURL();if(E.plugin.isLoaded()&&!E.plugin.isParsed()&&null!=qe){this.self.importScripts(qe);const bt=E.plugin.isParsed();Ge(bt?void 0:new Error(`RTL Text Plugin failed to import scripts from ${qe}`),bt)}}catch(qe){Ge(qe.toString())}}getAvailableImages(le){let Ee=this.availableImages[le];return Ee||(Ee=[]),Ee}getLayerIndex(le){let Ee=this.layerIndexes[le];return Ee||(Ee=this.layerIndexes[le]=new Oe),Ee}getWorkerSource(le,Ee,Ge){return this.workerSources[le]||(this.workerSources[le]={}),this.workerSources[le][Ee]||(this.workerSources[le][Ee]={}),this.workerSources[le][Ee][Ge]||(this.workerSources[le][Ee][Ge]=new this.workerSourceTypes[Ee]({send:(bt,Ot,Dt)=>{this.actor.send(bt,Ot,Dt,le)}},this.getLayerIndex(le),this.getAvailableImages(le))),this.workerSources[le][Ee][Ge]}getDEMWorkerSource(le,Ee){return this.demWorkerSources[le]||(this.demWorkerSources[le]={}),this.demWorkerSources[le][Ee]||(this.demWorkerSources[le][Ee]=new at),this.demWorkerSources[le][Ee]}enforceCacheSizeLimit(le,Ee){E.enforceCacheSizeLimit(Ee)}}return E.isWorker()&&(self.worker=new dc(self)),dc}),me(0,function(E){var Se=he;function he(T){return u=T,!(typeof window>"u"||typeof document>"u"||!(Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray)||!Function.prototype||!Function.prototype.bind||!(Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions)||!("JSON"in window&&"parse"in JSON&&"stringify"in JSON)||!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var D,A,F=new Blob([""],{type:"text/javascript"}),$=URL.createObjectURL(F);try{A=new Worker($),D=!0}catch{D=!1}return A&&A.terminate(),URL.revokeObjectURL($),D}()||!("Uint8ClampedArray"in window)||!ArrayBuffer.isView||!function(){var D=document.createElement("canvas");D.width=D.height=1;var A=D.getContext("2d");if(!A)return!1;var F=A.getImageData(0,0,1,1);return F&&F.width===D.width}()||(void 0===Oe[y=u&&u.failIfMajorPerformanceCaveat]&&(Oe[y]=function(D){var A,$,Z,ee,F=($=D,Z=document.createElement("canvas"),(ee=Object.create(he.webGLContextAttributes)).failIfMajorPerformanceCaveat=$,Z.getContext("webgl",ee)||Z.getContext("experimental-webgl",ee));if(!F)return!1;try{A=F.createShader(F.VERTEX_SHADER)}catch{return!1}return!(!A||F.isContextLost())&&(F.shaderSource(A,"void main() {}"),F.compileShader(A),!0===F.getShaderParameter(A,F.COMPILE_STATUS))}(y)),!Oe[y]||document.documentMode));var u,y}var Oe={};function Ne(T,u){if(Array.isArray(T)){if(!Array.isArray(u)||T.length!==u.length)return!1;for(let y=0;y<T.length;y++)if(!Ne(T[y],u[y]))return!1;return!0}if("object"==typeof T&&null!==T&&null!==u){if("object"!=typeof u||Object.keys(T).length!==Object.keys(u).length)return!1;for(const y in T)if(!Ne(T[y],u[y]))return!1;return!0}return T===u}he.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class xe{static testProp(u){if(!xe.docStyle)return u[0];for(let y=0;y<u.length;y++)if(u[y]in xe.docStyle)return u[y];return u[0]}static create(u,y,D){const A=window.document.createElement(u);return void 0!==y&&(A.className=y),D&&D.appendChild(A),A}static createNS(u,y){return window.document.createElementNS(u,y)}static disableDrag(){xe.docStyle&&xe.selectProp&&(xe.userSelect=xe.docStyle[xe.selectProp],xe.docStyle[xe.selectProp]="none")}static enableDrag(){xe.docStyle&&xe.selectProp&&(xe.docStyle[xe.selectProp]=xe.userSelect)}static setTransform(u,y){u.style[xe.transformProp]=y}static addEventListener(u,y,D,A={}){u.addEventListener(y,D,"passive"in A?A:A.capture)}static removeEventListener(u,y,D,A={}){u.removeEventListener(y,D,"passive"in A?A:A.capture)}static suppressClickInternal(u){u.preventDefault(),u.stopPropagation(),window.removeEventListener("click",xe.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",xe.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",xe.suppressClickInternal,!0)},0)}static mousePos(u,y){const D=u.getBoundingClientRect();return new E.pointGeometry(y.clientX-D.left-u.clientLeft,y.clientY-D.top-u.clientTop)}static touchPos(u,y){const D=u.getBoundingClientRect(),A=[];for(let F=0;F<y.length;F++)A.push(new E.pointGeometry(y[F].clientX-D.left-u.clientLeft,y[F].clientY-D.top-u.clientTop));return A}static mouseButton(u){return u.button}static remove(u){u.parentNode&&u.parentNode.removeChild(u)}}xe.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,xe.selectProp=xe.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),xe.transformProp=xe.testProp(["transform","WebkitTransform"]);class ct{constructor(u){this._transformRequestFn=u}transformRequest(u,y){return this._transformRequestFn&&this._transformRequestFn(u,y)||{url:u}}normalizeSpriteURL(u,y,D){const A=function(F){const $=F.match(Ke);if(!$)throw new Error(`Unable to parse URL "${F}"`);return{protocol:$[1],authority:$[2],path:$[3]||"/",params:$[4]?$[4].split("&"):[]}}(u);return A.path+=`${y}${D}`,function(F){const $=F.params.length?`?${F.params.join("&")}`:"";return`${F.protocol}://${F.authority}${F.path}${$}`}(A)}setTransformRequest(u){this._transformRequestFn=u}}const Ke=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class Te{constructor(u,y,D,A){this.context=u,this.format=D,this.texture=u.gl.createTexture(),this.update(y,A)}update(u,y,D){const{width:A,height:F}=u,$=!(this.size&&this.size[0]===A&&this.size[1]===F||D),{context:Z}=this,{gl:ee}=Z;if(this.useMipmap=Boolean(y&&y.useMipmap),ee.bindTexture(ee.TEXTURE_2D,this.texture),Z.pixelStoreUnpackFlipY.set(!1),Z.pixelStoreUnpack.set(1),Z.pixelStoreUnpackPremultiplyAlpha.set(this.format===ee.RGBA&&(!y||!1!==y.premultiply)),$)this.size=[A,F],u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||E.isImageBitmap(u)?ee.texImage2D(ee.TEXTURE_2D,0,this.format,this.format,ee.UNSIGNED_BYTE,u):ee.texImage2D(ee.TEXTURE_2D,0,this.format,A,F,0,this.format,ee.UNSIGNED_BYTE,u.data);else{const{x:ie,y:s}=D||{x:0,y:0};u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||E.isImageBitmap(u)?ee.texSubImage2D(ee.TEXTURE_2D,0,ie,s,ee.RGBA,ee.UNSIGNED_BYTE,u):ee.texSubImage2D(ee.TEXTURE_2D,0,ie,s,A,F,ee.RGBA,ee.UNSIGNED_BYTE,u.data)}this.useMipmap&&this.isSizePowerOfTwo()&&ee.generateMipmap(ee.TEXTURE_2D)}bind(u,y,D){const{context:A}=this,{gl:F}=A;F.bindTexture(F.TEXTURE_2D,this.texture),D!==F.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(D=F.LINEAR),u!==this.filter&&(F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MAG_FILTER,u),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MIN_FILTER,D||u),this.filter=u),y!==this.wrap&&(F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_S,y),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_T,y),this.wrap=y)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:u}=this.context;u.deleteTexture(this.texture),this.texture=null}}function at(T){const{userImage:u}=T;return!!(u&&u.render&&u.render())&&(T.data.replace(new Uint8Array(u.data.buffer)),!0)}class Ct extends E.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new E.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(u){if(this.loaded!==u&&(this.loaded=u,u)){for(const{ids:y,callback:D}of this.requestors)this._notify(y,D);this.requestors=[]}}getImage(u){return this.images[u]}addImage(u,y){if(this.images[u])throw new Error(`Image id ${u} already exist, use updateImage instead`);this._validate(u,y)&&(this.images[u]=y)}_validate(u,y){let D=!0;return this._validateStretch(y.stretchX,y.data&&y.data.width)||(this.fire(new E.ErrorEvent(new Error(`Image "${u}" has invalid "stretchX" value`))),D=!1),this._validateStretch(y.stretchY,y.data&&y.data.height)||(this.fire(new E.ErrorEvent(new Error(`Image "${u}" has invalid "stretchY" value`))),D=!1),this._validateContent(y.content,y)||(this.fire(new E.ErrorEvent(new Error(`Image "${u}" has invalid "content" value`))),D=!1),D}_validateStretch(u,y){if(!u)return!0;let D=0;for(const A of u){if(A[0]<D||A[1]<A[0]||y<A[1])return!1;D=A[1]}return!0}_validateContent(u,y){return!(u&&(4!==u.length||u[0]<0||y.data.width<u[0]||u[1]<0||y.data.height<u[1]||u[2]<0||y.data.width<u[2]||u[3]<0||y.data.height<u[3]||u[2]<u[0]||u[3]<u[1]))}updateImage(u,y){const D=this.images[u];if(D.data.width!==y.data.width||D.data.height!==y.data.height)throw new Error(`size mismatch between old image (${D.data.width}x${D.data.height}) and new image (${y.data.width}x${y.data.height}).`);y.version=D.version+1,this.images[u]=y,this.updatedImages[u]=!0}removeImage(u){const y=this.images[u];delete this.images[u],delete this.patterns[u],y.userImage&&y.userImage.onRemove&&y.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(u,y){let D=!0;if(!this.isLoaded())for(const A of u)this.images[A]||(D=!1);this.isLoaded()||D?this._notify(u,y):this.requestors.push({ids:u,callback:y})}_notify(u,y){const D={};for(const A of u){this.images[A]||this.fire(new E.Event("styleimagemissing",{id:A}));const F=this.images[A];F?D[A]={data:F.data.clone(),pixelRatio:F.pixelRatio,sdf:F.sdf,version:F.version,stretchX:F.stretchX,stretchY:F.stretchY,content:F.content,hasRenderCallback:Boolean(F.userImage&&F.userImage.render)}:E.warnOnce(`Image "${A}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}y(null,D)}getPixelSize(){const{width:u,height:y}=this.atlasImage;return{width:u,height:y}}getPattern(u){const y=this.patterns[u],D=this.getImage(u);if(!D)return null;if(y&&y.position.version===D.version)return y.position;if(y)y.position.version=D.version;else{const A={w:D.data.width+2,h:D.data.height+2,x:0,y:0},F=new E.ImagePosition(A,D);this.patterns[u]={bin:A,position:F}}return this._updatePatternAtlas(),this.patterns[u].position}bind(u){const y=u.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Te(u,this.atlasImage,y.RGBA),this.atlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE)}_updatePatternAtlas(){const u=[];for(const F in this.patterns)u.push(this.patterns[F].bin);const{w:y,h:D}=E.potpack(u),A=this.atlasImage;A.resize({width:y||1,height:D||1});for(const F in this.patterns){const{bin:$}=this.patterns[F],Z=$.x+1,ee=$.y+1,ie=this.images[F].data,s=ie.width,l=ie.height;E.RGBAImage.copy(ie,A,{x:0,y:0},{x:Z,y:ee},{width:s,height:l}),E.RGBAImage.copy(ie,A,{x:0,y:l-1},{x:Z,y:ee-1},{width:s,height:1}),E.RGBAImage.copy(ie,A,{x:0,y:0},{x:Z,y:ee+l},{width:s,height:1}),E.RGBAImage.copy(ie,A,{x:s-1,y:0},{x:Z-1,y:ee},{width:1,height:l}),E.RGBAImage.copy(ie,A,{x:0,y:0},{x:Z+s,y:ee},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(u){for(const y of u){if(this.callbackDispatchedThisFrame[y])continue;this.callbackDispatchedThisFrame[y]=!0;const D=this.images[y];D||E.warnOnce(`Image with ID: "${y}" was not found`),at(D)&&this.updateImage(y,D)}}}const ue=1e20;function De(T,u,y,D,A,F,$,Z,ee){for(let ie=u;ie<u+D;ie++)oe(T,y*F+ie,F,A,$,Z,ee);for(let ie=y;ie<y+A;ie++)oe(T,ie*F+u,1,D,$,Z,ee)}function oe(T,u,y,D,A,F,$){F[0]=0,$[0]=-ue,$[1]=ue,A[0]=T[u];for(let Z=1,ee=0,ie=0;Z<D;Z++){A[Z]=T[u+Z*y];const s=Z*Z;do{const l=F[ee];ie=(A[Z]-A[l]+s-l*l)/(Z-l)/2}while(ie<=$[ee]&&--ee>-1);ee++,F[ee]=Z,$[ee]=ie,$[ee+1]=ue}for(let Z=0,ee=0;Z<D;Z++){for(;$[ee+1]<Z;)ee++;const ie=F[ee],s=Z-ie;T[u+Z*y]=A[ie]+s*s}}class ye{constructor(u,y){this.requestManager=u,this.localIdeographFontFamily=y,this.entries={}}setURL(u){this.url=u}getGlyphs(u,y){const D=[];for(const A in u)for(const F of u[A])D.push({stack:A,id:F});E.asyncAll(D,({stack:A,id:F},$)=>{let Z=this.entries[A];Z||(Z=this.entries[A]={glyphs:{},requests:{},ranges:{}});let ee=Z.glyphs[F];if(void 0!==ee)return void $(null,{stack:A,id:F,glyph:ee});if(ee=this._tinySDF(Z,A,F),ee)return Z.glyphs[F]=ee,void $(null,{stack:A,id:F,glyph:ee});const ie=Math.floor(F/256);if(256*ie>65535)return void $(new Error("glyphs > 65535 not supported"));if(Z.ranges[ie])return void $(null,{stack:A,id:F,glyph:ee});let s=Z.requests[ie];s||(s=Z.requests[ie]=[],ye.loadGlyphRange(A,ie,this.url,this.requestManager,(l,m)=>{if(m){for(const v in m)this._doesCharSupportLocalGlyph(+v)||(Z.glyphs[+v]=m[+v]);Z.ranges[ie]=!0}for(const v of s)v(l,m);delete Z.requests[ie]})),s.push((l,m)=>{l?$(l):m&&$(null,{stack:A,id:F,glyph:m[F]||null})})},(A,F)=>{if(A)y(A);else if(F){const $={};for(const{stack:Z,id:ee,glyph:ie}of F)($[Z]||($[Z]={}))[ee]=ie&&{id:ie.id,bitmap:ie.bitmap.clone(),metrics:ie.metrics};y(null,$)}})}_doesCharSupportLocalGlyph(u){return!!this.localIdeographFontFamily&&(E.unicodeBlockLookup["CJK Unified Ideographs"](u)||E.unicodeBlockLookup["Hangul Syllables"](u)||E.unicodeBlockLookup.Hiragana(u)||E.unicodeBlockLookup.Katakana(u))}_tinySDF(u,y,D){const A=this.localIdeographFontFamily;if(!A||!this._doesCharSupportLocalGlyph(D))return;let F=u.tinySDF;if(!F){let Z="400";/bold/i.test(y)?Z="900":/medium/i.test(y)?Z="500":/light/i.test(y)&&(Z="200"),F=u.tinySDF=new ye.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:A,fontWeight:Z})}const $=F.draw(String.fromCharCode(D));return{id:D,bitmap:new E.AlphaImage({width:$.width||30,height:$.height||30},$.data),metrics:{width:$.glyphWidth||24,height:$.glyphHeight||24,left:$.glyphLeft||0,top:$.glyphTop-27||-8,advance:$.glyphAdvance||24}}}}ye.loadGlyphRange=function(T,u,y,D,A){const F=256*u,$=F+255,Z=D.transformRequest(y.replace("{fontstack}",T).replace("{range}",`${F}-${$}`),E.ResourceType.Glyphs);E.getArrayBuffer(Z,(ee,ie)=>{if(ee)A(ee);else if(ie){const s={};for(const l of E.parseGlyphPbf(ie))s[l.id]=l;A(null,s)}})},ye.TinySDF=class{constructor({fontSize:T=24,buffer:u=3,radius:y=8,cutoff:D=.25,fontFamily:A="sans-serif",fontWeight:F="normal",fontStyle:$="normal"}={}){this.buffer=u,this.cutoff=D,this.radius=y;const Z=this.size=T+4*u,ee=this._createCanvas(Z),ie=this.ctx=ee.getContext("2d",{willReadFrequently:!0});ie.font=`${$} ${F} ${T}px ${A}`,ie.textBaseline="alphabetic",ie.textAlign="left",ie.fillStyle="black",this.gridOuter=new Float64Array(Z*Z),this.gridInner=new Float64Array(Z*Z),this.f=new Float64Array(Z),this.z=new Float64Array(Z+1),this.v=new Uint16Array(Z)}_createCanvas(T){const u=document.createElement("canvas");return u.width=u.height=T,u}draw(T){const{width:u,actualBoundingBoxAscent:y,actualBoundingBoxDescent:D,actualBoundingBoxLeft:A,actualBoundingBoxRight:F}=this.ctx.measureText(T),$=Math.ceil(y),Z=Math.min(this.size-this.buffer,Math.ceil(F-A)),ee=Math.min(this.size-this.buffer,$+Math.ceil(D)),ie=Z+2*this.buffer,s=ee+2*this.buffer,l=Math.max(ie*s,0),m=new Uint8ClampedArray(l),v={data:m,width:ie,height:s,glyphWidth:Z,glyphHeight:ee,glyphTop:$,glyphLeft:0,glyphAdvance:u};if(0===Z||0===ee)return v;const{ctx:C,buffer:k,gridInner:G,gridOuter:J}=this;C.clearRect(k,k,Z,ee),C.fillText(T,k,k+$);const fe=C.getImageData(k,k,Z,ee);J.fill(ue,0,l),G.fill(0,0,l);for(let pe=0;pe<ee;pe++)for(let ot=0;ot<Z;ot++){const nt=fe.data[4*(pe*Z+ot)+3]/255;if(0===nt)continue;const wt=(pe+k)*ie+ot+k;if(1===nt)J[wt]=0,G[wt]=ue;else{const Pt=.5-nt;J[wt]=Pt>0?Pt*Pt:0,G[wt]=Pt<0?Pt*Pt:0}}De(J,0,0,ie,s,ie,this.f,this.v,this.z),De(G,k,k,Z,ee,ie,this.f,this.v,this.z);for(let pe=0;pe<l;pe++){const ot=Math.sqrt(J[pe])-Math.sqrt(G[pe]);m[pe]=Math.round(255-255*(ot/this.radius+this.cutoff))}return v}};const ce=new E.Properties({anchor:new E.DataConstantProperty(E.spec.light.anchor),position:new class{constructor(){this.specification=E.spec.light.position}possiblyEvaluate(T,u){return E.sphericalToCartesian(T.expression.evaluate(u))}interpolate(T,u,y){return{x:E.number(T.x,u.x,y),y:E.number(T.y,u.y,y),z:E.number(T.z,u.z,y)}}},color:new E.DataConstantProperty(E.spec.light.color),intensity:new E.DataConstantProperty(E.spec.light.intensity)}),Re="-transition";class ve extends E.Evented{constructor(u){super(),this._transitionable=new E.Transitionable(ce),this.setLight(u),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(u,y={}){if(!this._validate(E.validateLight,u,y))for(const D in u){const A=u[D];D.endsWith(Re)?this._transitionable.setTransition(D.slice(0,-Re.length),A):this._transitionable.setValue(D,A)}}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,y,D){return(!D||!1!==D.validate)&&E.emitValidationErrors(this,u.call(E.validateStyle,E.extend({value:y,style:{glyphs:!0,sprite:!0},styleSpec:E.spec})))}}class we{constructor(u,y){this.width=u,this.height=y,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(u,y){const D=u.join(",")+String(y);return this.dashEntry[D]||(this.dashEntry[D]=this.addDash(u,y)),this.dashEntry[D]}getDashRanges(u,y,D){const A=[];let F=u.length%2==1?-u[u.length-1]*D:0,$=u[0]*D,Z=!0;A.push({left:F,right:$,isDash:Z,zeroLength:0===u[0]});let ee=u[0];for(let ie=1;ie<u.length;ie++){Z=!Z;const s=u[ie];F=ee*D,ee+=s,$=ee*D,A.push({left:F,right:$,isDash:Z,zeroLength:0===s})}return A}addRoundDash(u,y,D){const A=y/2;for(let F=-D;F<=D;F++){const $=this.width*(this.nextRow+D+F);let Z=0,ee=u[Z];for(let ie=0;ie<this.width;ie++){ie/ee.right>1&&(ee=u[++Z]);const s=Math.abs(ie-ee.left),l=Math.abs(ie-ee.right),m=Math.min(s,l);let v;const C=F/D*(A+1);if(ee.isDash){const k=A-Math.abs(C);v=Math.sqrt(m*m+k*k)}else v=A-Math.sqrt(m*m+C*C);this.data[$+ie]=Math.max(0,Math.min(255,v+128))}}}addRegularDash(u){for(let Z=u.length-1;Z>=0;--Z){const ee=u[Z],ie=u[Z+1];ee.zeroLength?u.splice(Z,1):ie&&ie.isDash===ee.isDash&&(ie.left=ee.left,u.splice(Z,1))}const y=u[0],D=u[u.length-1];y.isDash===D.isDash&&(y.left=D.left-this.width,D.right=y.right+this.width);const A=this.width*this.nextRow;let F=0,$=u[F];for(let Z=0;Z<this.width;Z++){Z/$.right>1&&($=u[++F]);const ee=Math.abs(Z-$.left),ie=Math.abs(Z-$.right),s=Math.min(ee,ie);this.data[A+Z]=Math.max(0,Math.min(255,($.isDash?s:-s)+128))}}addDash(u,y){const D=y?7:0,A=2*D+1;if(this.nextRow+A>this.height)return E.warnOnce("LineAtlas out of space"),null;let F=0;for(let Z=0;Z<u.length;Z++)F+=u[Z];if(0!==F){const Z=this.width/F,ee=this.getDashRanges(u,this.width,Z);y?this.addRoundDash(ee,Z,D):this.addRegularDash(ee)}const $={y:(this.nextRow+D+.5)/this.height,height:2*D/this.height,width:F};return this.nextRow+=A,this.dirty=!0,$}bind(u){const y=u.gl;this.texture?(y.bindTexture(y.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,y.texSubImage2D(y.TEXTURE_2D,0,0,0,this.width,this.height,y.ALPHA,y.UNSIGNED_BYTE,this.data))):(this.texture=y.createTexture(),y.bindTexture(y.TEXTURE_2D,this.texture),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.REPEAT),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.REPEAT),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.LINEAR),y.texImage2D(y.TEXTURE_2D,0,y.ALPHA,this.width,this.height,0,y.ALPHA,y.UNSIGNED_BYTE,this.data))}}class Fe{constructor(u,y){this.workerPool=u,this.actors=[],this.currentActor=0,this.id=E.uniqueId();const D=this.workerPool.acquire(this.id);for(let A=0;A<D.length;A++){const F=new Fe.Actor(D[A],y,this.id);F.name=`Worker ${A}`,this.actors.push(F)}if(!this.actors.length)throw new Error("No actors found")}broadcast(u,y,D){E.asyncAll(this.actors,(A,F)=>{A.send(u,y,F)},D=D||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(u=>{u.remove()}),this.actors=[],this.workerPool.release(this.id)}}function se(T,u,y){const D=function(A,F){if(A)return y(A);if(F){const $=E.pick(E.extend(F,T),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);F.vector_layers&&($.vectorLayers=F.vector_layers,$.vectorLayerIds=$.vectorLayers.map(Z=>Z.id)),y(null,$)}};return T.url?E.getJSON(u.transformRequest(T.url,E.ResourceType.Source),D):E.exported.frame(()=>D(null,T))}Fe.Actor=E.Actor;class _t{constructor(u,y,D){this.bounds=E.LngLatBounds.convert(this.validateBounds(u)),this.minzoom=y||0,this.maxzoom=D||24}validateBounds(u){return Array.isArray(u)&&4===u.length?[Math.max(-180,u[0]),Math.max(-90,u[1]),Math.min(180,u[2]),Math.min(90,u[3])]:[-180,-90,180,90]}contains(u){const y=Math.pow(2,u.z),D=Math.floor(E.mercatorXfromLng(this.bounds.getWest())*y),A=Math.floor(E.mercatorYfromLat(this.bounds.getNorth())*y),F=Math.ceil(E.mercatorXfromLng(this.bounds.getEast())*y),$=Math.ceil(E.mercatorYfromLat(this.bounds.getSouth())*y);return u.x>=D&&u.x<F&&u.y>=A&&u.y<$}}class Xe extends E.Evented{constructor(u,y,D,A){if(super(),this.id=u,this.dispatcher=D,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,E.extend(this,E.pick(y,["url","scheme","tileSize","promoteId"])),this._options=E.extend({type:"vector"},y),this._collectResourceTiming=y.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(A)}load(){this._loaded=!1,this.fire(new E.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=se(this._options,this.map._requestManager,(u,y)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),u?this.fire(new E.ErrorEvent(u)):y&&(E.extend(this,y),y.bounds&&(this.tileBounds=new _t(y.bounds,this.minzoom,this.maxzoom)),this.fire(new E.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new E.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}onAdd(u){this.map=u,this.load()}setSourceProperty(u){this._tileJSONRequest&&this._tileJSONRequest.cancel(),u(),this.load()}setTiles(u){return this.setSourceProperty(()=>{this._options.tiles=u}),this}setUrl(u){return this.setSourceProperty(()=>{this.url=u,this._options.url=u}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return E.extend({},this._options)}loadTile(u,y){const D=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),A={request:this.map._requestManager.transformRequest(D,E.ResourceType.Tile),uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,tileSize:this.tileSize*u.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function F($,Z){return delete u.request,u.aborted?y(null):$&&404!==$.status?y($):(Z&&Z.resourceTiming&&(u.resourceTiming=Z.resourceTiming),this.map._refreshExpiredTiles&&Z&&u.setExpiryData(Z),u.loadVectorData(Z,this.map.painter),E.cacheEntryPossiblyAdded(this.dispatcher),y(null),void(u.reloadCallback&&(this.loadTile(u,u.reloadCallback),u.reloadCallback=null)))}A.request.collectResourceTiming=this._collectResourceTiming,u.actor&&"expired"!==u.state?"loading"===u.state?u.reloadCallback=y:u.request=u.actor.send("reloadTile",A,F.bind(this)):(u.actor=this.dispatcher.getActor(),u.request=u.actor.send("loadTile",A,F.bind(this)))}abortTile(u){u.request&&(u.request.cancel(),delete u.request),u.actor&&u.actor.send("abortTile",{uid:u.uid,type:this.type,source:this.id},void 0)}unloadTile(u){u.unloadVectorData(),u.actor&&u.actor.send("removeTile",{uid:u.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class st extends E.Evented{constructor(u,y,D,A){super(),this.id=u,this.dispatcher=D,this.setEventedParent(A),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=E.extend({type:"raster"},y),E.extend(this,E.pick(y,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new E.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=se(this._options,this.map._requestManager,(u,y)=>{this._tileJSONRequest=null,this._loaded=!0,u?this.fire(new E.ErrorEvent(u)):y&&(E.extend(this,y),y.bounds&&(this.tileBounds=new _t(y.bounds,this.minzoom,this.maxzoom)),this.fire(new E.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new E.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(u){this.map=u,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return E.extend({},this._options)}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}loadTile(u,y){const D=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);u.request=E.getImage(this.map._requestManager.transformRequest(D,E.ResourceType.Tile),(A,F,$)=>{if(delete u.request,u.aborted)u.state="unloaded",y(null);else if(A)u.state="errored",y(A);else if(F){this.map._refreshExpiredTiles&&u.setExpiryData($);const Z=this.map.painter.context,ee=Z.gl;u.texture=this.map.painter.getTileTexture(F.width),u.texture?u.texture.update(F,{useMipmap:!0}):(u.texture=new Te(Z,F,ee.RGBA,{useMipmap:!0}),u.texture.bind(ee.LINEAR,ee.CLAMP_TO_EDGE,ee.LINEAR_MIPMAP_NEAREST),Z.extTextureFilterAnisotropic&&ee.texParameterf(ee.TEXTURE_2D,Z.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Z.extTextureFilterAnisotropicMax)),u.state="loaded",E.cacheEntryPossiblyAdded(this.dispatcher),y(null)}})}abortTile(u,y){u.request&&(u.request.cancel(),delete u.request),y()}unloadTile(u,y){u.texture&&this.map.painter.saveTileTexture(u.texture),y()}hasTransition(){return!1}}let de;class Qe extends st{constructor(u,y,D,A){super(u,y,D,A),this.type="raster-dem",this.maxzoom=22,this._options=E.extend({type:"raster-dem"},y),this.encoding=y.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(u,y){const D=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function A(F,$){F&&(u.state="errored",y(F)),$&&(u.dem=$,u.needsHillshadePrepare=!0,u.needsTerrainPrepare=!0,u.state="loaded",y(null))}u.request=E.getImage(this.map._requestManager.transformRequest(D,E.ResourceType.Tile),function(F,$){if(delete u.request,u.aborted)u.state="unloaded",y(null);else if(F)u.state="errored",y(F);else if($){this.map._refreshExpiredTiles&&u.setExpiryData($),delete $.cacheControl,delete $.expires;const Z=E.isImageBitmap($)&&(null==de&&(de=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),de)?$:E.exported.getImageData($,1),ee={uid:u.uid,coord:u.tileID,source:this.id,rawImageData:Z,encoding:this.encoding};u.actor&&"expired"!==u.state||(u.actor=this.dispatcher.getActor(),u.actor.send("loadDEMTile",ee,A.bind(this)))}}.bind(this)),u.neighboringTiles=this._getNeighboringTiles(u.tileID)}_getNeighboringTiles(u){const y=u.canonical,D=Math.pow(2,y.z),A=(y.x-1+D)%D,F=0===y.x?u.wrap-1:u.wrap,$=(y.x+1+D)%D,Z=y.x+1===D?u.wrap+1:u.wrap,ee={};return ee[new E.OverscaledTileID(u.overscaledZ,F,y.z,A,y.y).key]={backfilled:!1},ee[new E.OverscaledTileID(u.overscaledZ,Z,y.z,$,y.y).key]={backfilled:!1},y.y>0&&(ee[new E.OverscaledTileID(u.overscaledZ,F,y.z,A,y.y-1).key]={backfilled:!1},ee[new E.OverscaledTileID(u.overscaledZ,u.wrap,y.z,y.x,y.y-1).key]={backfilled:!1},ee[new E.OverscaledTileID(u.overscaledZ,Z,y.z,$,y.y-1).key]={backfilled:!1}),y.y+1<D&&(ee[new E.OverscaledTileID(u.overscaledZ,F,y.z,A,y.y+1).key]={backfilled:!1},ee[new E.OverscaledTileID(u.overscaledZ,u.wrap,y.z,y.x,y.y+1).key]={backfilled:!1},ee[new E.OverscaledTileID(u.overscaledZ,Z,y.z,$,y.y+1).key]={backfilled:!1}),ee}unloadTile(u){u.demTexture&&this.map.painter.saveTileTexture(u.demTexture),u.fbo&&(u.fbo.destroy(),delete u.fbo),u.dem&&delete u.dem,delete u.neighboringTiles,u.state="unloaded",u.actor&&u.actor.send("removeDEMTile",{uid:u.uid,source:this.id})}}class dt extends E.Evented{constructor(u,y,D,A){super(),this.id=u,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=D.getActor(),this.setEventedParent(A),this._data=y.data,this._options=E.extend({},y),this._collectResourceTiming=y.collectResourceTiming,void 0!==y.maxzoom&&(this.maxzoom=y.maxzoom),y.type&&(this.type=y.type),y.attribution&&(this.attribution=y.attribution),this.promoteId=y.promoteId;const F=E.EXTENT/this.tileSize;this.workerOptions=E.extend({source:this.id,cluster:y.cluster||!1,geojsonVtOptions:{buffer:(void 0!==y.buffer?y.buffer:128)*F,tolerance:(void 0!==y.tolerance?y.tolerance:.375)*F,extent:E.EXTENT,maxZoom:this.maxzoom,lineMetrics:y.lineMetrics||!1,generateId:y.generateId||!1},superclusterOptions:{maxZoom:void 0!==y.clusterMaxZoom?y.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,y.clusterMinPoints||2),extent:E.EXTENT,radius:(y.clusterRadius||50)*F,log:!1,generateId:y.generateId||!1},clusterProperties:y.clusterProperties,filter:y.filter},y.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(u){this.map=u,this.load()}setData(u){return this._data=u,this._updateWorkerData("content"),this}getClusterExpansionZoom(u,y){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:u,source:this.id},y),this}getClusterChildren(u,y){return this.actor.send("geojson.getClusterChildren",{clusterId:u,source:this.id},y),this}getClusterLeaves(u,y,D,A){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:u,limit:y,offset:D},A),this}_updateWorkerData(u){const y=E.extend({},this.workerOptions),D=this._data;"string"==typeof D?(y.request=this.map._requestManager.transformRequest(E.exported.resolveURL(D),E.ResourceType.Source),y.request.collectResourceTiming=this._collectResourceTiming):y.data=JSON.stringify(D),this._pendingLoads++,this.fire(new E.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,y,(A,F)=>{if(this._pendingLoads--,this._removed||F&&F.abandoned)return void this.fire(new E.Event("dataabort",{dataType:"source",sourceDataType:u}));let $=null;if(F&&F.resourceTiming&&F.resourceTiming[this.id]&&($=F.resourceTiming[this.id].slice(0)),A)return void this.fire(new E.ErrorEvent(A));const Z={dataType:"source",sourceDataType:u};this._collectResourceTiming&&$&&$.length>0&&E.extend(Z,{resourceTiming:$}),this.fire(new E.Event("data",Z))})}loaded(){return 0===this._pendingLoads}loadTile(u,y){const D=u.actor?"reloadTile":"loadTile";u.actor=this.actor;const A={type:this.type,uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};u.request=this.actor.send(D,A,(F,$)=>(delete u.request,u.unloadVectorData(),u.aborted?y(null):F?y(F):(u.loadVectorData($,this.map.painter,"reloadTile"===D),y(null))))}abortTile(u){u.request&&(u.request.cancel(),delete u.request),u.aborted=!0}unloadTile(u){u.unloadVectorData(),this.actor.send("removeTile",{uid:u.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return E.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Me=E.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class ut extends E.Evented{constructor(u,y,D,A){super(),this.id=u,this.dispatcher=D,this.coordinates=y.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(A),this.options=y}load(u,y){this._loaded=!1,this.fire(new E.Event("dataloading",{dataType:"source"})),this.url=this.options.url,E.getImage(this.map._requestManager.transformRequest(this.url,E.ResourceType.Image),(D,A)=>{this._loaded=!0,D?this.fire(new E.ErrorEvent(D)):A&&(this.image=A,u&&(this.coordinates=u),y&&y(),this._finishLoading())})}loaded(){return this._loaded}updateImage(u){return this.image&&u.url?(this.options.url=u.url,this.load(u.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new E.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(u){this.map=u,this.load()}setCoordinates(u){this.coordinates=u;const y=u.map(E.MercatorCoordinate.fromLngLat);this.tileID=function(A){let F=1/0,$=1/0,Z=-1/0,ee=-1/0;for(const m of A)F=Math.min(F,m.x),$=Math.min($,m.y),Z=Math.max(Z,m.x),ee=Math.max(ee,m.y);const ie=Math.max(Z-F,ee-$),s=Math.max(0,Math.floor(-Math.log(ie)/Math.LN2)),l=Math.pow(2,s);return new E.CanonicalTileID(s,Math.floor((F+Z)/2*l),Math.floor(($+ee)/2*l))}(y),this.minzoom=this.maxzoom=this.tileID.z;const D=y.map(A=>this.tileID.getTilePoint(A)._round());return this._boundsArray=new E.RasterBoundsArray,this._boundsArray.emplaceBack(D[0].x,D[0].y,0,0),this._boundsArray.emplaceBack(D[1].x,D[1].y,E.EXTENT,0),this._boundsArray.emplaceBack(D[3].x,D[3].y,0,E.EXTENT),this._boundsArray.emplaceBack(D[2].x,D[2].y,E.EXTENT,E.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new E.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const u=this.map.painter.context,y=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,Me.members)),this.boundsSegments||(this.boundsSegments=E.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Te(u,this.image,y.RGBA),this.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE));for(const D in this.tiles){const A=this.tiles[D];"loaded"!==A.state&&(A.state="loaded",A.texture=this.texture)}}loadTile(u,y){this.tileID&&this.tileID.equals(u.tileID.canonical)?(this.tiles[String(u.tileID.wrap)]=u,u.buckets={},y(null)):(u.state="errored",y(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class $e extends ut{constructor(u,y,D,A){super(u,y,D,A),this.roundZoom=!0,this.type="video",this.options=y}load(){this._loaded=!1;const u=this.options;this.urls=[];for(const y of u.urls)this.urls.push(this.map._requestManager.transformRequest(y,E.ResourceType.Source).url);E.getVideo(this.urls,(y,D)=>{this._loaded=!0,y?this.fire(new E.ErrorEvent(y)):D&&(this.video=D,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(u){if(this.video){const y=this.video.seekable;u<y.start(0)||u>y.end(0)?this.fire(new E.ErrorEvent(new E.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${y.start(0)} and ${y.end(0)}-second mark.`))):this.video.currentTime=u}}getVideo(){return this.video}onAdd(u){this.map||(this.map=u,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const u=this.map.painter.context,y=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,Me.members)),this.boundsSegments||(this.boundsSegments=E.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE),y.texSubImage2D(y.TEXTURE_2D,0,0,0,y.RGBA,y.UNSIGNED_BYTE,this.video)):(this.texture=new Te(u,this.video,y.RGBA),this.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE));for(const D in this.tiles){const A=this.tiles[D];"loaded"!==A.state&&(A.state="loaded",A.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class gt extends ut{constructor(u,y,D,A){super(u,y,D,A),y.coordinates?Array.isArray(y.coordinates)&&4===y.coordinates.length&&!y.coordinates.some(F=>!Array.isArray(F)||2!==F.length||F.some($=>"number"!=typeof $))||this.fire(new E.ErrorEvent(new E.ValidationError(`sources.${u}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new E.ErrorEvent(new E.ValidationError(`sources.${u}`,null,'missing required property "coordinates"'))),y.animate&&"boolean"!=typeof y.animate&&this.fire(new E.ErrorEvent(new E.ValidationError(`sources.${u}`,null,'optional "animate" property must be a boolean value'))),y.canvas?"string"==typeof y.canvas||y.canvas instanceof HTMLCanvasElement||this.fire(new E.ErrorEvent(new E.ValidationError(`sources.${u}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new E.ErrorEvent(new E.ValidationError(`sources.${u}`,null,'missing required property "canvas"'))),this.options=y,this.animate=void 0===y.animate||y.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new E.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(u){this.map=u,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let u=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,u=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,u=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const y=this.map.painter.context,D=y.gl;this.boundsBuffer||(this.boundsBuffer=y.createVertexBuffer(this._boundsArray,Me.members)),this.boundsSegments||(this.boundsSegments=E.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(u||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Te(y,this.canvas,D.RGBA,{premultiply:!0});for(const A in this.tiles){const F=this.tiles[A];"loaded"!==F.state&&(F.state="loaded",F.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const u of[this.canvas.width,this.canvas.height])if(isNaN(u)||u<=0)return!0;return!1}}const Mt={vector:Xe,raster:st,"raster-dem":Qe,geojson:dt,video:$e,image:ut,canvas:gt};function tt(T,u){const y=E.create();return E.translate(y,y,[1,1,0]),E.scale(y,y,[.5*T.width,.5*T.height,1]),E.multiply(y,y,T.calculatePosMatrix(u.toUnwrapped()))}function Bt(T,u,y,D,A,F){const $=function(l,m,v){if(l)for(const C of l){const k=m[C];if(k&&k.source===v&&"fill-extrusion"===k.type)return!0}else for(const C in m){const k=m[C];if(k.source===v&&"fill-extrusion"===k.type)return!0}return!1}(A&&A.layers,u,T.id),Z=F.maxPitchScaleFactor(),ee=T.tilesIn(D,Z,$);ee.sort(Vt);const ie=[];for(const l of ee)ie.push({wrappedTileID:l.tileID.wrapped().key,queryResults:l.tile.queryRenderedFeatures(u,y,T._state,l.queryGeometry,l.cameraQueryGeometry,l.scale,A,F,Z,tt(T.transform,l.tileID))});const s=function(l){const m={},v={};for(const C of l){const k=C.queryResults,G=C.wrappedTileID,J=v[G]=v[G]||{};for(const fe in k){const pe=k[fe],ot=J[fe]=J[fe]||{},nt=m[fe]=m[fe]||[];for(const wt of pe)ot[wt.featureIndex]||(ot[wt.featureIndex]=!0,nt.push(wt))}}return m}(ie);for(const l in s)s[l].forEach(m=>{const v=m.feature,C=T.getFeatureState(v.layer["source-layer"],v.id);v.source=v.layer.source,v.layer["source-layer"]&&(v.sourceLayer=v.layer["source-layer"]),v.state=C});return s}function Vt(T,u){const y=T.tileID,D=u.tileID;return y.overscaledZ-D.overscaledZ||y.canonical.y-D.canonical.y||y.wrap-D.wrap||y.canonical.x-D.canonical.x}class rn{constructor(u,y){this.tileID=u,this.uid=E.uniqueId(),this.uses=0,this.tileSize=y,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(u){const y=u+this.timeAdded;y<E.exported.now()||this.fadeEndTime&&y<this.fadeEndTime||(this.fadeEndTime=y)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}clearTextures(u){this.demTexture&&u.saveTileTexture(this.demTexture),this.textures.forEach(y=>u.saveTileTexture(y)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(u,y,D){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",u){u.featureIndex&&(this.latestFeatureIndex=u.featureIndex,u.rawTileData?(this.latestRawTileData=u.rawTileData,this.latestFeatureIndex.rawTileData=u.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=u.collisionBoxArray,this.buckets=function(A,F){const $={};if(!F)return $;for(const Z of A){const ee=Z.layerIds.map(ie=>F.getLayer(ie)).filter(Boolean);if(0!==ee.length){Z.layers=ee,Z.stateDependentLayerIds&&(Z.stateDependentLayers=Z.stateDependentLayerIds.map(ie=>ee.filter(s=>s.id===ie)[0]));for(const ie of ee)$[ie.id]=Z}}return $}(u.buckets,y.style),this.hasSymbolBuckets=!1;for(const A in this.buckets){const F=this.buckets[A];if(F instanceof E.SymbolBucket){if(this.hasSymbolBuckets=!0,!D)break;F.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const A in this.buckets){const F=this.buckets[A];if(F instanceof E.SymbolBucket&&F.hasRTLText){this.hasRTLText=!0,E.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const A in this.buckets){const F=this.buckets[A];this.queryPadding=Math.max(this.queryPadding,y.style.getLayer(A).queryRadius(F))}u.imageAtlas&&(this.imageAtlas=u.imageAtlas),u.glyphAtlasImage&&(this.glyphAtlasImage=u.glyphAtlasImage)}else this.collisionBoxArray=new E.CollisionBoxArray}unloadVectorData(){for(const u in this.buckets)this.buckets[u].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(u){return this.buckets[u.id]}upload(u){for(const D in this.buckets){const A=this.buckets[D];A.uploadPending()&&A.upload(u)}const y=u.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Te(u,this.imageAtlas.image,y.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Te(u,this.glyphAtlasImage,y.ALPHA),this.glyphAtlasImage=null)}prepare(u){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(u,this.imageAtlasTexture)}queryRenderedFeatures(u,y,D,A,F,$,Z,ee,ie,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:A,cameraQueryGeometry:F,scale:$,tileSize:this.tileSize,pixelPosMatrix:s,transform:ee,params:Z,queryPadding:this.queryPadding*ie},u,y,D):{}}querySourceFeatures(u,y){const D=this.latestFeatureIndex;if(!D||!D.rawTileData)return;const A=D.loadVTLayers(),F=y?y.sourceLayer:"",$=A._geojsonTileLayer||A[F];if(!$)return;const Z=E.createFilter(y&&y.filter),{z:ee,x:ie,y:s}=this.tileID.canonical,l={z:ee,x:ie,y:s};for(let m=0;m<$.length;m++){const v=$.feature(m);if(Z.needGeometry){const G=E.toEvaluationFeature(v,!0);if(!Z.filter(new E.EvaluationParameters(this.tileID.overscaledZ),G,this.tileID.canonical))continue}else if(!Z.filter(new E.EvaluationParameters(this.tileID.overscaledZ),v))continue;const C=D.getId(v,F),k=new E.GeoJSONFeature(v,ee,ie,s,C);k.tile=l,u.push(k)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(u){const y=this.expirationTime;if(u.cacheControl){const D=E.parseCacheControl(u.cacheControl);D["max-age"]&&(this.expirationTime=Date.now()+1e3*D["max-age"])}else u.expires&&(this.expirationTime=new Date(u.expires).getTime());if(this.expirationTime){const D=Date.now();let A=!1;if(this.expirationTime>D)A=!1;else if(y)if(this.expirationTime<y)A=!0;else{const F=this.expirationTime-y;F?this.expirationTime=D+Math.max(F,3e4):A=!0}else A=!0;A?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(u,y){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(u).length)return;const D=this.latestFeatureIndex.loadVTLayers();for(const A in this.buckets){if(!y.style.hasLayer(A))continue;const F=this.buckets[A],$=F.layers[0].sourceLayer||"_geojsonTileLayer",Z=D[$],ee=u[$];if(!Z||!ee||0===Object.keys(ee).length)continue;F.update(ee,Z,this.imageAtlas&&this.imageAtlas.patternPositions||{});const ie=y&&y.style&&y.style.getLayer(A);ie&&(this.queryPadding=Math.max(this.queryPadding,ie.queryRadius(F)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<E.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(u){this.symbolFadeHoldUntil=E.exported.now()+u}setDependencies(u,y){const D={};for(const A of y)D[A]=!0;this.dependencies[u]=D}hasDependency(u,y){for(const D of u){const A=this.dependencies[D];if(A)for(const F of y)if(A[F])return!0}return!1}}class Gt{constructor(u,y){this.max=u,this.onRemove=y,this.reset()}reset(){for(const u in this.data)for(const y of this.data[u])y.timeout&&clearTimeout(y.timeout),this.onRemove(y.value);return this.data={},this.order=[],this}add(u,y,D){const A=u.wrapped().key;void 0===this.data[A]&&(this.data[A]=[]);const F={value:y,timeout:void 0};if(void 0!==D&&(F.timeout=setTimeout(()=>{this.remove(u,F)},D)),this.data[A].push(F),this.order.push(A),this.order.length>this.max){const $=this._getAndRemoveByKey(this.order[0]);$&&this.onRemove($)}return this}has(u){return u.wrapped().key in this.data}getAndRemove(u){return this.has(u)?this._getAndRemoveByKey(u.wrapped().key):null}_getAndRemoveByKey(u){const y=this.data[u].shift();return y.timeout&&clearTimeout(y.timeout),0===this.data[u].length&&delete this.data[u],this.order.splice(this.order.indexOf(u),1),y.value}getByKey(u){const y=this.data[u];return y?y[0].value:null}get(u){return this.has(u)?this.data[u.wrapped().key][0].value:null}remove(u,y){if(!this.has(u))return this;const D=u.wrapped().key,A=void 0===y?0:this.data[D].indexOf(y),F=this.data[D][A];return this.data[D].splice(A,1),F.timeout&&clearTimeout(F.timeout),0===this.data[D].length&&delete this.data[D],this.onRemove(F.value),this.order.splice(this.order.indexOf(D),1),this}setMaxSize(u){for(this.max=u;this.order.length>this.max;){const y=this._getAndRemoveByKey(this.order[0]);y&&this.onRemove(y)}return this}filter(u){const y=[];for(const D in this.data)for(const A of this.data[D])u(A.value)||y.push(A);for(const D of y)this.remove(D.value.tileID,D)}}class Vn{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(u,y,D){const A=String(y);if(this.stateChanges[u]=this.stateChanges[u]||{},this.stateChanges[u][A]=this.stateChanges[u][A]||{},E.extend(this.stateChanges[u][A],D),null===this.deletedStates[u]){this.deletedStates[u]={};for(const F in this.state[u])F!==A&&(this.deletedStates[u][F]=null)}else if(this.deletedStates[u]&&null===this.deletedStates[u][A]){this.deletedStates[u][A]={};for(const F in this.state[u][A])D[F]||(this.deletedStates[u][A][F]=null)}else for(const F in D)this.deletedStates[u]&&this.deletedStates[u][A]&&null===this.deletedStates[u][A][F]&&delete this.deletedStates[u][A][F]}removeFeatureState(u,y,D){if(null===this.deletedStates[u])return;const A=String(y);if(this.deletedStates[u]=this.deletedStates[u]||{},D&&void 0!==y)null!==this.deletedStates[u][A]&&(this.deletedStates[u][A]=this.deletedStates[u][A]||{},this.deletedStates[u][A][D]=null);else if(void 0!==y)if(this.stateChanges[u]&&this.stateChanges[u][A])for(D in this.deletedStates[u][A]={},this.stateChanges[u][A])this.deletedStates[u][A][D]=null;else this.deletedStates[u][A]=null;else this.deletedStates[u]=null}getState(u,y){const D=String(y),A=E.extend({},(this.state[u]||{})[D],(this.stateChanges[u]||{})[D]);if(null===this.deletedStates[u])return{};if(this.deletedStates[u]){const F=this.deletedStates[u][y];if(null===F)return{};for(const $ in F)delete A[$]}return A}initializeTileState(u,y){u.setFeatureState(this.state,y)}coalesceChanges(u,y){const D={};for(const A in this.stateChanges){this.state[A]=this.state[A]||{};const F={};for(const $ in this.stateChanges[A])this.state[A][$]||(this.state[A][$]={}),E.extend(this.state[A][$],this.stateChanges[A][$]),F[$]=this.state[A][$];D[A]=F}for(const A in this.deletedStates){this.state[A]=this.state[A]||{};const F={};if(null===this.deletedStates[A])for(const $ in this.state[A])F[$]={},this.state[A][$]={};else for(const $ in this.deletedStates[A]){if(null===this.deletedStates[A][$])this.state[A][$]={};else for(const Z of Object.keys(this.deletedStates[A][$]))delete this.state[A][$][Z];F[$]=this.state[A][$]}D[A]=D[A]||{},E.extend(D[A],F)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(D).length)for(const A in u)u[A].setFeatureState(D,y)}}class Bn extends E.Evented{constructor(u,y,D){super(),this.id=u,this.dispatcher=D,this.on("data",A=>{"source"===A.dataType&&"metadata"===A.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===A.dataType&&"content"===A.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(A,F,$,Z){const ee=new Mt[F.type](A,F,$,Z);if(ee.id!==A)throw new Error(`Expected Source id to be ${A} instead of ${ee.id}`);return E.bindAll(["load","abort","unload","serialize","prepare"],ee),ee}(u,y,D,this),this._tiles={},this._cache=new Gt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Vn}onAdd(u){this.map=u,this._maxTileCacheSize=u?u._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(u)}onRemove(u){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(u)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const u in this._tiles){const y=this._tiles[u];if("loaded"!==y.state&&"errored"!==y.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const u=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,u&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(u,y){return this._source.loadTile(u,y)}_unloadTile(u){if(this._source.unloadTile)return this._source.unloadTile(u,()=>{})}_abortTile(u){this._source.abortTile&&this._source.abortTile(u,()=>{}),this._source.fire(new E.Event("dataabort",{tile:u,coord:u.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(u){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const y in this._tiles){const D=this._tiles[y];D.upload(u),D.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(u=>u.tileID).sort(Sn).map(u=>u.key)}getRenderableIds(u){const y=[];for(const D in this._tiles)this._isIdRenderable(D,u)&&y.push(this._tiles[D]);return u?y.sort((D,A)=>{const F=D.tileID,$=A.tileID,Z=new E.pointGeometry(F.canonical.x,F.canonical.y)._rotate(this.transform.angle),ee=new E.pointGeometry($.canonical.x,$.canonical.y)._rotate(this.transform.angle);return F.overscaledZ-$.overscaledZ||ee.y-Z.y||ee.x-Z.x}).map(D=>D.tileID.key):y.map(D=>D.tileID).sort(Sn).map(D=>D.key)}hasRenderableParent(u){const y=this.findLoadedParent(u,0);return!!y&&this._isIdRenderable(y.tileID.key)}_isIdRenderable(u,y){return this._tiles[u]&&this._tiles[u].hasData()&&!this._coveredTiles[u]&&(y||!this._tiles[u].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const u in this._tiles)"errored"!==this._tiles[u].state&&this._reloadTile(u,"reloading")}}_reloadTile(u,y){const D=this._tiles[u];D&&("loading"!==D.state&&(D.state=y),this._loadTile(D,this._tileLoaded.bind(this,D,u,y)))}_tileLoaded(u,y,D,A){if(A)return u.state="errored",void(404!==A.status?this._source.fire(new E.ErrorEvent(A,{tile:u})):this.update(this.transform,this.terrain));u.timeAdded=E.exported.now(),"expired"===D&&(u.refreshedUponExpiration=!0),this._setTileReloadTimer(y,u),"raster-dem"===this.getSource().type&&u.dem&&this._backfillDEM(u),this._state.initializeTileState(u,this.map?this.map.painter:null),u.aborted||this._source.fire(new E.Event("data",{dataType:"source",tile:u,coord:u.tileID}))}_backfillDEM(u){const y=this.getRenderableIds();for(let A=0;A<y.length;A++){const F=y[A];if(u.neighboringTiles&&u.neighboringTiles[F]){const $=this.getTileByID(F);D(u,$),D($,u)}}function D(A,F){A.needsHillshadePrepare=!0,A.needsTerrainPrepare=!0;let $=F.tileID.canonical.x-A.tileID.canonical.x;const Z=F.tileID.canonical.y-A.tileID.canonical.y,ee=Math.pow(2,A.tileID.canonical.z),ie=F.tileID.key;0===$&&0===Z||Math.abs(Z)>1||(Math.abs($)>1&&(1===Math.abs($+ee)?$+=ee:1===Math.abs($-ee)&&($-=ee)),F.dem&&A.dem&&(A.dem.backfillBorder(F.dem,$,Z),A.neighboringTiles&&A.neighboringTiles[ie]&&(A.neighboringTiles[ie].backfilled=!0)))}}getTile(u){return this.getTileByID(u.key)}getTileByID(u){return this._tiles[u]}_retainLoadedChildren(u,y,D,A){for(const F in this._tiles){let $=this._tiles[F];if(A[F]||!$.hasData()||$.tileID.overscaledZ<=y||$.tileID.overscaledZ>D)continue;let Z=$.tileID;for(;$&&$.tileID.overscaledZ>y+1;){const ie=$.tileID.scaledTo($.tileID.overscaledZ-1);$=this._tiles[ie.key],$&&$.hasData()&&(Z=ie)}let ee=Z;for(;ee.overscaledZ>y;)if(ee=ee.scaledTo(ee.overscaledZ-1),u[ee.key]){A[Z.key]=Z;break}}}findLoadedParent(u,y){if(u.key in this._loadedParentTiles){const D=this._loadedParentTiles[u.key];return D&&D.tileID.overscaledZ>=y?D:null}for(let D=u.overscaledZ-1;D>=y;D--){const A=u.scaledTo(D),F=this._getLoadedTile(A);if(F)return F}}_getLoadedTile(u){const y=this._tiles[u.key];return y&&y.hasData()?y:this._cache.getByKey(u.wrapped().key)}updateCacheSize(u){const y=Math.ceil(u.width/this._source.tileSize)+1,D=Math.ceil(u.height/this._source.tileSize)+1,A=Math.floor(y*D*5),F="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,A):A;this._cache.setMaxSize(F)}handleWrapJump(u){const y=Math.round((u-(void 0===this._prevLng?u:this._prevLng))/360);if(this._prevLng=u,y){const D={};for(const A in this._tiles){const F=this._tiles[A];F.tileID=F.tileID.unwrapTo(F.tileID.wrap+y),D[F.tileID.key]=F}this._tiles=D;for(const A in this._timers)clearTimeout(this._timers[A]),delete this._timers[A];for(const A in this._tiles)this._setTileReloadTimer(A,this._tiles[A])}}update(u,y){if(this.transform=u,this.terrain=y,!this._sourceLoaded||this._paused)return;let D;this.updateCacheSize(u),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?D=u.getVisibleUnwrappedCoordinates(this._source.tileID).map(ie=>new E.OverscaledTileID(ie.canonical.z,ie.wrap,ie.canonical.z,ie.canonical.x,ie.canonical.y)):(D=u.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:y}),this._source.hasTile&&(D=D.filter(ie=>this._source.hasTile(ie)))):D=[];const A=u.coveringZoomLevel(this._source),F=Math.max(A-Bn.maxOverzooming,this._source.minzoom),$=Math.max(A+Bn.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const ie={};for(const s of D)if(s.canonical.z>this._source.minzoom){const l=s.scaledTo(s.canonical.z-1);ie[l.key]=l;const m=s.scaledTo(Math.max(this._source.minzoom,Math.min(s.canonical.z,5)));ie[m.key]=m}D=D.concat(Object.values(ie))}const Z=this._updateRetainedTiles(D,A);if(si(this._source.type)){const ie={},s={},l=Object.keys(Z);for(const m of l){const v=Z[m],C=this._tiles[m];if(!C||C.fadeEndTime&&C.fadeEndTime<=E.exported.now())continue;const k=this.findLoadedParent(v,F);k&&(this._addTile(k.tileID),ie[k.tileID.key]=k.tileID),s[m]=v}this._retainLoadedChildren(s,A,$,Z);for(const m in ie)Z[m]||(this._coveredTiles[m]=!0,Z[m]=ie[m]);if(y){const m={},v={};for(const C of D)this._tiles[C.key].hasData()?m[C.key]=C:v[C.key]=C;for(const C in v){const k=v[C].children(this._source.maxzoom);this._tiles[k[0].key]&&this._tiles[k[1].key]&&this._tiles[k[2].key]&&this._tiles[k[3].key]&&(m[k[0].key]=Z[k[0].key]=k[0],m[k[1].key]=Z[k[1].key]=k[1],m[k[2].key]=Z[k[2].key]=k[2],m[k[3].key]=Z[k[3].key]=k[3],delete v[C])}for(const C in v){const k=this.findLoadedParent(v[C],this._source.minzoom);if(k){m[k.tileID.key]=Z[k.tileID.key]=k.tileID;for(const G in m)m[G].isChildOf(k.tileID)&&delete m[G]}}for(const C in this._tiles)m[C]||(this._coveredTiles[C]=!0)}}for(const ie in Z)this._tiles[ie].clearFadeHold();const ee=E.keysDifference(this._tiles,Z);for(const ie of ee){const s=this._tiles[ie];s.hasSymbolBuckets&&!s.holdingForFade()?s.setHoldDuration(this.map._fadeDuration):s.hasSymbolBuckets&&!s.symbolFadeFinished()||this._removeTile(ie)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const u in this._tiles)this._tiles[u].holdingForFade()&&this._removeTile(u)}_updateRetainedTiles(u,y){const D={},A={},F=Math.max(y-Bn.maxOverzooming,this._source.minzoom),$=Math.max(y+Bn.maxUnderzooming,this._source.minzoom),Z={};for(const ee of u){const ie=this._addTile(ee);D[ee.key]=ee,ie.hasData()||y<this._source.maxzoom&&(Z[ee.key]=ee)}this._retainLoadedChildren(Z,y,$,D);for(const ee of u){let ie=this._tiles[ee.key];if(ie.hasData())continue;if(y+1>this._source.maxzoom){const l=ee.children(this._source.maxzoom)[0],m=this.getTile(l);if(m&&m.hasData()){D[l.key]=l;continue}}else{const l=ee.children(this._source.maxzoom);if(D[l[0].key]&&D[l[1].key]&&D[l[2].key]&&D[l[3].key])continue}let s=ie.wasRequested();for(let l=ee.overscaledZ-1;l>=F;--l){const m=ee.scaledTo(l);if(A[m.key]||(A[m.key]=!0,ie=this.getTile(m),!ie&&s&&(ie=this._addTile(m)),ie&&(D[m.key]=m,s=ie.wasRequested(),ie.hasData())))break}}return D}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const u in this._tiles){const y=[];let D,A=this._tiles[u].tileID;for(;A.overscaledZ>0;){if(A.key in this._loadedParentTiles){D=this._loadedParentTiles[A.key];break}y.push(A.key);const F=A.scaledTo(A.overscaledZ-1);if(D=this._getLoadedTile(F),D)break;A=F}for(const F of y)this._loadedParentTiles[F]=D}}_addTile(u){let y=this._tiles[u.key];if(y)return y;y=this._cache.getAndRemove(u),y&&(this._setTileReloadTimer(u.key,y),y.tileID=u,this._state.initializeTileState(y,this.map?this.map.painter:null),this._cacheTimers[u.key]&&(clearTimeout(this._cacheTimers[u.key]),delete this._cacheTimers[u.key],this._setTileReloadTimer(u.key,y)));const D=y;return y||(y=new rn(u,this._source.tileSize*u.overscaleFactor()),this._loadTile(y,this._tileLoaded.bind(this,y,u.key,y.state))),y.uses++,this._tiles[u.key]=y,D||this._source.fire(new E.Event("dataloading",{tile:y,coord:y.tileID,dataType:"source"})),y}_setTileReloadTimer(u,y){u in this._timers&&(clearTimeout(this._timers[u]),delete this._timers[u]);const D=y.getExpiryTimeout();D&&(this._timers[u]=setTimeout(()=>{this._reloadTile(u,"expired"),delete this._timers[u]},D))}_removeTile(u){const y=this._tiles[u];y&&(y.uses--,delete this._tiles[u],this._timers[u]&&(clearTimeout(this._timers[u]),delete this._timers[u]),y.uses>0||(y.hasData()&&"reloading"!==y.state?this._cache.add(y.tileID,y,y.getExpiryTimeout()):(y.aborted=!0,this._abortTile(y),this._unloadTile(y))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const u in this._tiles)this._removeTile(u);this._cache.reset()}tilesIn(u,y,D){const A=[],F=this.transform;if(!F)return A;const $=D?F.getCameraQueryGeometry(u):u,Z=u.map(C=>F.pointCoordinate(C,this.terrain)),ee=$.map(C=>F.pointCoordinate(C,this.terrain)),ie=this.getIds();let s=1/0,l=1/0,m=-1/0,v=-1/0;for(const C of ee)s=Math.min(s,C.x),l=Math.min(l,C.y),m=Math.max(m,C.x),v=Math.max(v,C.y);for(let C=0;C<ie.length;C++){const k=this._tiles[ie[C]];if(k.holdingForFade())continue;const G=k.tileID,J=Math.pow(2,F.zoom-k.tileID.overscaledZ),fe=y*k.queryPadding*E.EXTENT/k.tileSize/J,pe=[G.getTilePoint(new E.MercatorCoordinate(s,l)),G.getTilePoint(new E.MercatorCoordinate(m,v))];if(pe[0].x-fe<E.EXTENT&&pe[0].y-fe<E.EXTENT&&pe[1].x+fe>=0&&pe[1].y+fe>=0){const ot=Z.map(wt=>G.getTilePoint(wt)),nt=ee.map(wt=>G.getTilePoint(wt));A.push({tile:k,tileID:G,queryGeometry:ot,cameraQueryGeometry:nt,scale:J})}}return A}getVisibleCoordinates(u){const y=this.getRenderableIds(u).map(D=>this._tiles[D].tileID);for(const D of y)D.posMatrix=this.transform.calculatePosMatrix(D.toUnwrapped());return y}hasTransition(){if(this._source.hasTransition())return!0;if(si(this._source.type))for(const u in this._tiles){const y=this._tiles[u];if(void 0!==y.fadeEndTime&&y.fadeEndTime>=E.exported.now())return!0}return!1}setFeatureState(u,y,D){this._state.updateState(u=u||"_geojsonTileLayer",y,D)}removeFeatureState(u,y,D){this._state.removeFeatureState(u=u||"_geojsonTileLayer",y,D)}getFeatureState(u,y){return this._state.getState(u=u||"_geojsonTileLayer",y)}setDependencies(u,y,D){const A=this._tiles[u];A&&A.setDependencies(y,D)}reloadTilesForDependencies(u,y){for(const D in this._tiles)this._tiles[D].hasDependency(u,y)&&this._reloadTile(D,"reloading");this._cache.filter(D=>!D.hasDependency(u,y))}}function Sn(T,u){const y=Math.abs(2*T.wrap)-+(T.wrap<0),D=Math.abs(2*u.wrap)-+(u.wrap<0);return T.overscaledZ-u.overscaledZ||D-y||u.canonical.y-T.canonical.y||u.canonical.x-T.canonical.x}function si(T){return"raster"===T||"image"===T||"video"===T}Bn.maxOverzooming=10,Bn.maxUnderzooming=3;const $n="mapboxgl_preloaded_worker_pool";class hn{constructor(){this.active={}}acquire(u){if(!this.workers)for(this.workers=[];this.workers.length<hn.workerCount;)this.workers.push(new Worker(gl.workerUrl));return this.active[u]=!0,this.workers.slice()}release(u){delete this.active[u],0===this.numActive()&&(this.workers.forEach(y=>{y.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[$n]}numActive(){return Object.keys(this.active).length}}const jr=Math.floor(E.exported.hardwareConcurrency/2);let sr;function Fr(){return sr||(sr=new hn),sr}function yi(T,u){const y={};for(const D in T)"ref"!==D&&(y[D]=T[D]);return E.refProperties.forEach(D=>{D in u&&(y[D]=u[D])}),y}function Ri(T){T=T.slice();const u=Object.create(null);for(let y=0;y<T.length;y++)u[T[y].id]=T[y];for(let y=0;y<T.length;y++)"ref"in T[y]&&(T[y]=yi(T[y],u[T[y].ref]));return T}hn.workerCount=Math.max(Math.min(jr,6),1);const It={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function je(T,u,y){y.push({command:It.addSource,args:[T,u[T]]})}function Le(T,u,y){u.push({command:It.removeSource,args:[T]}),y[T]=!0}function ke(T,u,y,D){Le(T,y,D),je(T,u,y)}function Je(T,u,y){let D;for(D in T[y])if(Object.prototype.hasOwnProperty.call(T[y],D)&&"data"!==D&&!Ne(T[y][D],u[y][D]))return!1;for(D in u[y])if(Object.prototype.hasOwnProperty.call(u[y],D)&&"data"!==D&&!Ne(T[y][D],u[y][D]))return!1;return!0}function Tt(T,u,y,D,A,F){let $;for($ in u=u||{},T=T||{})Object.prototype.hasOwnProperty.call(T,$)&&(Ne(T[$],u[$])||y.push({command:F,args:[D,$,u[$],A]}));for($ in u)Object.prototype.hasOwnProperty.call(u,$)&&!Object.prototype.hasOwnProperty.call(T,$)&&(Ne(T[$],u[$])||y.push({command:F,args:[D,$,u[$],A]}))}function Yt(T){return T.id}function ln(T,u){return T[u.id]=u,T}class un{constructor(u,y){this.reset(u,y)}reset(u,y){this.points=u||[],this._distances=[0];for(let D=1;D<this.points.length;D++)this._distances[D]=this._distances[D-1]+this.points[D].dist(this.points[D-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(y||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(u){if(1===this.points.length)return this.points[0];u=E.clamp(u,0,1);let y=1,D=this._distances[y];const A=u*this.paddedLength+this.padding;for(;D<A&&y<this._distances.length;)D=this._distances[++y];const F=y-1,$=this._distances[F],Z=D-$,ee=Z>0?(A-$)/Z:0;return this.points[F].mult(1-ee).add(this.points[y].mult(ee))}}function mt(T,u){let y=!0;return"always"===T||"never"!==T&&"never"!==u||(y=!1),y}class jt{constructor(u,y,D){const A=this.boxCells=[],F=this.circleCells=[];this.xCellCount=Math.ceil(u/D),this.yCellCount=Math.ceil(y/D);for(let $=0;$<this.xCellCount*this.yCellCount;$++)A.push([]),F.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=u,this.height=y,this.xScale=this.xCellCount/u,this.yScale=this.yCellCount/y,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(u,y,D,A,F){this._forEachCell(y,D,A,F,this._insertBoxCell,this.boxUid++),this.boxKeys.push(u),this.bboxes.push(y),this.bboxes.push(D),this.bboxes.push(A),this.bboxes.push(F)}insertCircle(u,y,D,A){this._forEachCell(y-A,D-A,y+A,D+A,this._insertCircleCell,this.circleUid++),this.circleKeys.push(u),this.circles.push(y),this.circles.push(D),this.circles.push(A)}_insertBoxCell(u,y,D,A,F,$){this.boxCells[F].push($)}_insertCircleCell(u,y,D,A,F,$){this.circleCells[F].push($)}_query(u,y,D,A,F,$,Z){if(D<0||u>this.width||A<0||y>this.height)return[];const ee=[];if(u<=0&&y<=0&&this.width<=D&&this.height<=A){if(F)return[{key:null,x1:u,y1:y,x2:D,y2:A}];for(let ie=0;ie<this.boxKeys.length;ie++)ee.push({key:this.boxKeys[ie],x1:this.bboxes[4*ie],y1:this.bboxes[4*ie+1],x2:this.bboxes[4*ie+2],y2:this.bboxes[4*ie+3]});for(let ie=0;ie<this.circleKeys.length;ie++){const s=this.circles[3*ie],l=this.circles[3*ie+1],m=this.circles[3*ie+2];ee.push({key:this.circleKeys[ie],x1:s-m,y1:l-m,x2:s+m,y2:l+m})}}else this._forEachCell(u,y,D,A,this._queryCell,ee,{hitTest:F,overlapMode:$,seenUids:{box:{},circle:{}}},Z);return ee}query(u,y,D,A){return this._query(u,y,D,A,!1,null)}hitTest(u,y,D,A,F,$){return this._query(u,y,D,A,!0,F,$).length>0}hitTestCircle(u,y,D,A,F){const $=u-D,Z=u+D,ee=y-D,ie=y+D;if(Z<0||$>this.width||ie<0||ee>this.height)return!1;const s=[];return this._forEachCell($,ee,Z,ie,this._queryCellCircle,s,{hitTest:!0,overlapMode:A,circle:{x:u,y,radius:D},seenUids:{box:{},circle:{}}},F),s.length>0}_queryCell(u,y,D,A,F,$,Z,ee){const{seenUids:ie,hitTest:s,overlapMode:l}=Z,m=this.boxCells[F];if(null!==m){const C=this.bboxes;for(const k of m)if(!ie.box[k]){ie.box[k]=!0;const G=4*k,J=this.boxKeys[k];if(u<=C[G+2]&&y<=C[G+3]&&D>=C[G+0]&&A>=C[G+1]&&(!ee||ee(J))&&(!s||!mt(l,J.overlapMode))&&($.push({key:J,x1:C[G],y1:C[G+1],x2:C[G+2],y2:C[G+3]}),s))return!0}}const v=this.circleCells[F];if(null!==v){const C=this.circles;for(const k of v)if(!ie.circle[k]){ie.circle[k]=!0;const G=3*k,J=this.circleKeys[k];if(this._circleAndRectCollide(C[G],C[G+1],C[G+2],u,y,D,A)&&(!ee||ee(J))&&(!s||!mt(l,J.overlapMode))){const fe=C[G],pe=C[G+1],ot=C[G+2];if($.push({key:J,x1:fe-ot,y1:pe-ot,x2:fe+ot,y2:pe+ot}),s)return!0}}}return!1}_queryCellCircle(u,y,D,A,F,$,Z,ee){const{circle:ie,seenUids:s,overlapMode:l}=Z,m=this.boxCells[F];if(null!==m){const C=this.bboxes;for(const k of m)if(!s.box[k]){s.box[k]=!0;const G=4*k,J=this.boxKeys[k];if(this._circleAndRectCollide(ie.x,ie.y,ie.radius,C[G+0],C[G+1],C[G+2],C[G+3])&&(!ee||ee(J))&&!mt(l,J.overlapMode))return $.push(!0),!0}}const v=this.circleCells[F];if(null!==v){const C=this.circles;for(const k of v)if(!s.circle[k]){s.circle[k]=!0;const G=3*k,J=this.circleKeys[k];if(this._circlesCollide(C[G],C[G+1],C[G+2],ie.x,ie.y,ie.radius)&&(!ee||ee(J))&&!mt(l,J.overlapMode))return $.push(!0),!0}}}_forEachCell(u,y,D,A,F,$,Z,ee){const ie=this._convertToXCellCoord(u),s=this._convertToYCellCoord(y),l=this._convertToXCellCoord(D),m=this._convertToYCellCoord(A);for(let v=ie;v<=l;v++)for(let C=s;C<=m;C++)if(F.call(this,u,y,D,A,this.xCellCount*C+v,$,Z,ee))return}_convertToXCellCoord(u){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(u*this.xScale)))}_convertToYCellCoord(u){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(u*this.yScale)))}_circlesCollide(u,y,D,A,F,$){const Z=A-u,ee=F-y,ie=D+$;return ie*ie>Z*Z+ee*ee}_circleAndRectCollide(u,y,D,A,F,$,Z){const ee=($-A)/2,ie=Math.abs(u-(A+ee));if(ie>ee+D)return!1;const s=(Z-F)/2,l=Math.abs(y-(F+s));if(l>s+D)return!1;if(ie<=ee||l<=s)return!0;const m=ie-ee,v=l-s;return m*m+v*v<=D*D}}function In(T,u,y,D,A){const F=E.create();return u?(E.scale(F,F,[1/A,1/A,1]),y||E.rotateZ(F,F,D.angle)):E.multiply(F,D.labelPlaneMatrix,T),F}function sn(T,u,y,D,A){if(u){const F=E.clone(T);return E.scale(F,F,[A,A,1]),y||E.rotateZ(F,F,-D.angle),F}return D.glCoordMatrix}function Fn(T,u,y){let D;y?(D=[T.x,T.y,y(T.x,T.y),1],E.transformMat4(D,D,u)):(D=[T.x,T.y,0,1],nr(D,D,u));const A=D[3];return{point:new E.pointGeometry(D[0]/A,D[1]/A),signedDistanceFromCamera:A}}function hr(T,u){return.5+T/u*.5}function Ti(T,u){const y=T[0]/T[3],D=T[1]/T[3];return y>=-u[0]&&y<=u[0]&&D>=-u[1]&&D<=u[1]}function Bi(T,u,y,D,A,F,$,Z,ee,ie){const s=D?T.textSizeData:T.iconSizeData,l=E.evaluateSizeForZoom(s,y.transform.zoom),m=[256/y.width*2+1,256/y.height*2+1],v=D?T.text.dynamicLayoutVertexArray:T.icon.dynamicLayoutVertexArray;v.clear();const C=T.lineVertexArray,k=D?T.text.placedSymbolArray:T.icon.placedSymbolArray,G=y.transform.width/y.transform.height;let J=!1;for(let fe=0;fe<k.length;fe++){const pe=k.get(fe);if(pe.hidden||pe.writingMode===E.WritingMode.vertical&&!J){wi(pe.numGlyphs,v);continue}let ot;if(J=!1,ie?(ot=[pe.anchorX,pe.anchorY,ie(pe.anchorX,pe.anchorY),1],E.transformMat4(ot,ot,u)):(ot=[pe.anchorX,pe.anchorY,0,1],nr(ot,ot,u)),!Ti(ot,m)){wi(pe.numGlyphs,v);continue}const nt=hr(y.transform.cameraToCenterDistance,ot[3]),wt=E.evaluateSizeForFeature(s,l,pe),Pt=$?wt/nt:wt*nt,$t=new E.pointGeometry(pe.anchorX,pe.anchorY),Ft=Fn($t,A,ie).point,En={},Dn=qn(pe,Pt,!1,Z,u,A,F,T.glyphOffsetArray,C,v,Ft,$t,En,G,ee,ie);J=Dn.useVertical,(Dn.notEnoughRoom||J||Dn.needsFlipping&&qn(pe,Pt,!0,Z,u,A,F,T.glyphOffsetArray,C,v,Ft,$t,En,G,ee,ie).notEnoughRoom)&&wi(pe.numGlyphs,v)}D?T.text.dynamicLayoutVertexBuffer.updateData(v):T.icon.dynamicLayoutVertexBuffer.updateData(v)}function fr(T,u,y,D,A,F,$,Z,ee,ie,s,l,m){const v=Z.glyphStartIndex+Z.numGlyphs,C=Z.lineStartIndex,k=Z.lineStartIndex+Z.lineLength,G=u.getoffsetX(Z.glyphStartIndex),J=u.getoffsetX(v-1),fe=Di(T*G,y,D,A,F,$,Z.segment,C,k,ee,ie,s,l,m);if(!fe)return null;const pe=Di(T*J,y,D,A,F,$,Z.segment,C,k,ee,ie,s,l,m);return pe?{first:fe,last:pe}:null}function Cn(T,u,y,D){return T===E.WritingMode.horizontal&&Math.abs(y.y-u.y)>Math.abs(y.x-u.x)*D?{useVertical:!0}:(T===E.WritingMode.vertical?u.y<y.y:u.x>y.x)?{needsFlipping:!0}:null}function qn(T,u,y,D,A,F,$,Z,ee,ie,s,l,m,v,C,k){const G=u/24,J=T.lineOffsetX*G,fe=T.lineOffsetY*G;let pe;if(T.numGlyphs>1){const ot=T.glyphStartIndex+T.numGlyphs,nt=T.lineStartIndex,wt=T.lineStartIndex+T.lineLength,Pt=fr(G,Z,J,fe,y,s,l,T,ee,F,m,C,k);if(!Pt)return{notEnoughRoom:!0};const $t=Fn(Pt.first.point,$,k).point,Ft=Fn(Pt.last.point,$,k).point;if(D&&!y){const En=Cn(T.writingMode,$t,Ft,v);if(En)return En}pe=[Pt.first];for(let En=T.glyphStartIndex+1;En<ot-1;En++)pe.push(Di(G*Z.getoffsetX(En),J,fe,y,s,l,T.segment,nt,wt,ee,F,m,C,k));pe.push(Pt.last)}else{if(D&&!y){const nt=Fn(l,A,k).point,wt=T.lineStartIndex+T.segment+1,Pt=new E.pointGeometry(ee.getx(wt),ee.gety(wt)),$t=Fn(Pt,A,k),Ft=$t.signedDistanceFromCamera>0?$t.point:hi(l,Pt,nt,1,A,k),En=Cn(T.writingMode,nt,Ft,v);if(En)return En}const ot=Di(G*Z.getoffsetX(T.glyphStartIndex),J,fe,y,s,l,T.segment,T.lineStartIndex,T.lineStartIndex+T.lineLength,ee,F,m,C,k);if(!ot)return{notEnoughRoom:!0};pe=[ot]}for(const ot of pe)E.addDynamicAttributes(ie,ot.point,ot.angle);return{}}function hi(T,u,y,D,A,F){const $=Fn(T.add(T.sub(u)._unit()),A,F).point,Z=y.sub($);return y.add(Z._mult(D/Z.mag()))}function Di(T,u,y,D,A,F,$,Z,ee,ie,s,l,m,v){const C=D?T-u:T+u;let k=C>0?1:-1,G=0;D&&(k*=-1,G=Math.PI),k<0&&(G+=Math.PI);let J=k>0?Z+$:Z+$+1,fe=A,pe=A,ot=0,nt=0;const wt=Math.abs(C),Pt=[];for(;ot+nt<=wt;){if(J+=k,J<Z||J>=ee)return null;if(pe=fe,Pt.push(fe),fe=l[J],void 0===fe){const Ln=new E.pointGeometry(ie.getx(J),ie.gety(J)),Zi=Fn(Ln,s,v);if(Zi.signedDistanceFromCamera>0)fe=l[J]=Zi.point;else{const Qi=J-k;fe=hi(0===ot?F:new E.pointGeometry(ie.getx(Qi),ie.gety(Qi)),Ln,pe,wt-ot+1,s,v)}}ot+=nt,nt=pe.dist(fe)}const $t=(wt-ot)/nt,Ft=fe.sub(pe),En=Ft.mult($t)._add(pe);En._add(Ft._unit()._perp()._mult(y*k));const Dn=G+Math.atan2(fe.y-pe.y,fe.x-pe.x);return Pt.push(En),{point:En,angle:m?Dn:0,path:Pt}}const Mr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function wi(T,u){for(let y=0;y<T;y++){const D=u.length;u.resize(D+4),u.float32.set(Mr,3*D)}}function nr(T,u,y){const D=u[0],A=u[1];return T[0]=y[0]*D+y[4]*A+y[12],T[1]=y[1]*D+y[5]*A+y[13],T[3]=y[3]*D+y[7]*A+y[15],T}const dn=100;class wa{constructor(u,y=new jt(u.width+200,u.height+200,25),D=new jt(u.width+200,u.height+200,25)){this.transform=u,this.grid=y,this.ignoredGrid=D,this.pitchfactor=Math.cos(u._pitch)*u.cameraToCenterDistance,this.screenRightBoundary=u.width+dn,this.screenBottomBoundary=u.height+dn,this.gridRightBoundary=u.width+200,this.gridBottomBoundary=u.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(u,y,D,A,F,$){const Z=this.projectAndGetPerspectiveRatio(A,u.anchorPointX,u.anchorPointY,$),ee=D*Z.perspectiveRatio,ie=u.x1*ee+Z.point.x,s=u.y1*ee+Z.point.y,l=u.x2*ee+Z.point.x,m=u.y2*ee+Z.point.y;return!this.isInsideGrid(ie,s,l,m)||"always"!==y&&this.grid.hitTest(ie,s,l,m,y,F)||Z.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[ie,s,l,m],offscreen:this.isOffscreen(ie,s,l,m)}}placeCollisionCircles(u,y,D,A,F,$,Z,ee,ie,s,l,m,v,C){const k=[],G=new E.pointGeometry(y.anchorX,y.anchorY),J=Fn(G,$,C),fe=hr(this.transform.cameraToCenterDistance,J.signedDistanceFromCamera),pe=(s?F/fe:F*fe)/E.ONE_EM,ot=Fn(G,Z,C).point,nt=fr(pe,A,y.lineOffsetX*pe,y.lineOffsetY*pe,!1,ot,G,y,D,Z,{},!1,C);let wt=!1,Pt=!1,$t=!0;if(nt){const Ft=.5*m*fe+v,En=new E.pointGeometry(-100,-100),Dn=new E.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),Ln=new un,Zi=nt.first,Qi=nt.last;let ki=[];for(let Zr=Zi.path.length-1;Zr>=1;Zr--)ki.push(Zi.path[Zr]);for(let Zr=1;Zr<Qi.path.length;Zr++)ki.push(Qi.path[Zr]);const cs=2.5*Ft;if(ee){const Zr=ki.map($r=>Fn($r,ee,C));ki=Zr.some($r=>$r.signedDistanceFromCamera<=0)?[]:Zr.map($r=>$r.point)}let mr=[];if(ki.length>0){const Zr=ki[0].clone(),$r=ki[0].clone();for(let us=1;us<ki.length;us++)Zr.x=Math.min(Zr.x,ki[us].x),Zr.y=Math.min(Zr.y,ki[us].y),$r.x=Math.max($r.x,ki[us].x),$r.y=Math.max($r.y,ki[us].y);mr=Zr.x>=En.x&&$r.x<=Dn.x&&Zr.y>=En.y&&$r.y<=Dn.y?[ki]:$r.x<En.x||Zr.x>Dn.x||$r.y<En.y||Zr.y>Dn.y?[]:E.clipLine([ki],En.x,En.y,Dn.x,Dn.y)}for(const Zr of mr){Ln.reset(Zr,.25*Ft);let $r=0;$r=Ln.length<=.5*Ft?1:Math.ceil(Ln.paddedLength/cs)+1;for(let us=0;us<$r;us++){const fs=us/Math.max($r-1,1),Rl=Ln.lerp(fs),Pc=Rl.x+dn,bc=Rl.y+dn;k.push(Pc,bc,Ft,0);const Rc=Pc-Ft,jl=bc-Ft,sc=Pc+Ft,Wc=bc+Ft;if($t=$t&&this.isOffscreen(Rc,jl,sc,Wc),Pt=Pt||this.isInsideGrid(Rc,jl,sc,Wc),"always"!==u&&this.grid.hitTestCircle(Pc,bc,Ft,u,l)&&(wt=!0,!ie))return{circles:[],offscreen:!1,collisionDetected:wt}}}}return{circles:!ie&&wt||!Pt||fe<this.perspectiveRatioCutoff?[]:k,offscreen:$t,collisionDetected:wt}}queryRenderedSymbols(u){if(0===u.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const y=[];let D=1/0,A=1/0,F=-1/0,$=-1/0;for(const s of u){const l=new E.pointGeometry(s.x+dn,s.y+dn);D=Math.min(D,l.x),A=Math.min(A,l.y),F=Math.max(F,l.x),$=Math.max($,l.y),y.push(l)}const Z=this.grid.query(D,A,F,$).concat(this.ignoredGrid.query(D,A,F,$)),ee={},ie={};for(const s of Z){const l=s.key;if(void 0===ee[l.bucketInstanceId]&&(ee[l.bucketInstanceId]={}),ee[l.bucketInstanceId][l.featureIndex])continue;const m=[new E.pointGeometry(s.x1,s.y1),new E.pointGeometry(s.x2,s.y1),new E.pointGeometry(s.x2,s.y2),new E.pointGeometry(s.x1,s.y2)];E.polygonIntersectsPolygon(y,m)&&(ee[l.bucketInstanceId][l.featureIndex]=!0,void 0===ie[l.bucketInstanceId]&&(ie[l.bucketInstanceId]=[]),ie[l.bucketInstanceId].push(l.featureIndex))}return ie}insertCollisionBox(u,y,D,A,F,$){(D?this.ignoredGrid:this.grid).insert({bucketInstanceId:A,featureIndex:F,collisionGroupID:$,overlapMode:y},u[0],u[1],u[2],u[3])}insertCollisionCircles(u,y,D,A,F,$){const Z=D?this.ignoredGrid:this.grid,ee={bucketInstanceId:A,featureIndex:F,collisionGroupID:$,overlapMode:y};for(let ie=0;ie<u.length;ie+=4)Z.insertCircle(ee,u[ie],u[ie+1],u[ie+2])}projectAndGetPerspectiveRatio(u,y,D,A){let F;return A?(F=[y,D,A(y,D),1],E.transformMat4(F,F,u)):(F=[y,D,0,1],nr(F,F,u)),{point:new E.pointGeometry((F[0]/F[3]+1)/2*this.transform.width+dn,(-F[1]/F[3]+1)/2*this.transform.height+dn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/F[3]*.5}}isOffscreen(u,y,D,A){return D<dn||u>=this.screenRightBoundary||A<dn||y>this.screenBottomBoundary}isInsideGrid(u,y,D,A){return D>=0&&u<this.gridRightBoundary&&A>=0&&y<this.gridBottomBoundary}getViewportMatrix(){const u=E.identity([]);return E.translate(u,u,[-100,-100,0]),u}}function Lr(T,u,y){return u*(E.EXTENT/(T.tileSize*Math.pow(2,y-T.tileID.overscaledZ)))}class fi{constructor(u,y,D,A){this.opacity=u?Math.max(0,Math.min(1,u.opacity+(u.placed?y:-y))):A&&D?1:0,this.placed=D}isHidden(){return 0===this.opacity&&!this.placed}}class ar{constructor(u,y,D,A,F){this.text=new fi(u?u.text:null,y,D,F),this.icon=new fi(u?u.icon:null,y,A,F)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Zs{constructor(u,y,D){this.text=u,this.icon=y,this.skipFade=D}}class Os{constructor(){this.invProjMatrix=E.create(),this.viewportMatrix=E.create(),this.circles=[]}}class na{constructor(u,y,D,A,F){this.bucketInstanceId=u,this.featureIndex=y,this.sourceLayerIndex=D,this.bucketIndex=A,this.tileID=F}}class ia{constructor(u){this.crossSourceCollisions=u,this.maxGroupID=0,this.collisionGroups={}}get(u){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[u]){const y=++this.maxGroupID;this.collisionGroups[u]={ID:y,predicate:D=>D.collisionGroupID===y}}return this.collisionGroups[u]}}function zs(T,u,y,D,A){const{horizontalAlign:F,verticalAlign:$}=E.getAnchorAlignment(T),Z=-(F-.5)*u,ee=-($-.5)*y,ie=E.evaluateVariableOffset(T,D);return new E.pointGeometry(Z+ie[0]*A,ee+ie[1]*A)}function dc(T,u,y,D,A,F){const{x1:$,x2:Z,y1:ee,y2:ie,anchorPointX:s,anchorPointY:l}=T,m=new E.pointGeometry(u,y);return D&&m._rotate(A?F:-F),{x1:$+m.x,y1:ee+m.y,x2:Z+m.x,y2:ie+m.y,anchorPointX:s,anchorPointY:l}}class rt{constructor(u,y,D,A,F){this.transform=u.clone(),this.terrain=y,this.collisionIndex=new wa(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=D,this.retainedQueryData={},this.collisionGroups=new ia(A),this.collisionCircleArrays={},this.prevPlacement=F,F&&(F.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(u,y,D,A){const F=D.getBucket(y),$=D.latestFeatureIndex;if(!F||!$||y.id!==F.layerIds[0])return;const Z=D.collisionBoxArray,ee=F.layers[0].layout,ie=Math.pow(2,this.transform.zoom-D.tileID.overscaledZ),s=D.tileSize/E.EXTENT,l=this.transform.calculatePosMatrix(D.tileID.toUnwrapped()),m="map"===ee.get("text-pitch-alignment"),v="map"===ee.get("text-rotation-alignment"),C=Lr(D,1,this.transform.zoom),k=In(l,m,v,this.transform,C);let G=null;if(m){const fe=sn(l,m,v,this.transform,C);G=E.multiply([],this.transform.labelPlaneMatrix,fe)}this.retainedQueryData[F.bucketInstanceId]=new na(F.bucketInstanceId,$,F.sourceLayerIndex,F.index,D.tileID);const J={bucket:F,layout:ee,posMatrix:l,textLabelPlaneMatrix:k,labelToScreenMatrix:G,scale:ie,textPixelRatio:s,holdingForFade:D.holdingForFade(),collisionBoxArray:Z,partiallyEvaluatedTextSize:E.evaluateSizeForZoom(F.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(F.sourceID)};if(A)for(const fe of F.sortKeyRanges){const{sortKey:pe,symbolInstanceStart:ot,symbolInstanceEnd:nt}=fe;u.push({sortKey:pe,symbolInstanceStart:ot,symbolInstanceEnd:nt,parameters:J})}else u.push({symbolInstanceStart:0,symbolInstanceEnd:F.symbolInstances.length,parameters:J})}attemptAnchorPlacement(u,y,D,A,F,$,Z,ee,ie,s,l,m,v,C,k,G){const J=[m.textOffset0,m.textOffset1],fe=zs(u,D,A,J,F),pe=this.collisionIndex.placeCollisionBox(dc(y,fe.x,fe.y,$,Z,this.transform.angle),l,ee,ie,s.predicate,G);if((!k||0!==this.collisionIndex.placeCollisionBox(dc(k,fe.x,fe.y,$,Z,this.transform.angle),l,ee,ie,s.predicate,G).box.length)&&pe.box.length>0){let ot;if(this.prevPlacement&&this.prevPlacement.variableOffsets[m.crossTileID]&&this.prevPlacement.placements[m.crossTileID]&&this.prevPlacement.placements[m.crossTileID].text&&(ot=this.prevPlacement.variableOffsets[m.crossTileID].anchor),0===m.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[m.crossTileID]={textOffset:J,width:D,height:A,anchor:u,textBoxScale:F,prevAnchor:ot},this.markUsedJustification(v,u,m,C),v.allowVerticalPlacement&&(this.markUsedOrientation(v,C,m),this.placedOrientations[m.crossTileID]=C),{shift:fe,placedGlyphBoxes:pe}}}placeLayerBucketPart(u,y,D){const{bucket:A,layout:F,posMatrix:$,textLabelPlaneMatrix:Z,labelToScreenMatrix:ee,textPixelRatio:ie,holdingForFade:s,collisionBoxArray:l,partiallyEvaluatedTextSize:m,collisionGroup:v}=u.parameters,C=F.get("text-optional"),k=F.get("icon-optional"),G=E.getOverlapMode(F,"text-overlap","text-allow-overlap"),J="always"===G,fe=E.getOverlapMode(F,"icon-overlap","icon-allow-overlap"),pe="always"===fe,ot="map"===F.get("text-rotation-alignment"),nt="map"===F.get("text-pitch-alignment"),wt="none"!==F.get("icon-text-fit"),Pt="viewport-y"===F.get("symbol-z-order"),$t=J&&(pe||!A.hasIconData()||k),Ft=pe&&(J||!A.hasTextData()||C);!A.collisionArrays&&l&&A.deserializeCollisionBoxes(l);const En=(Dn,Ln)=>{if(y[Dn.crossTileID])return;if(s)return void(this.placements[Dn.crossTileID]=new Zs(!1,!1,!1));let Zi=!1,Qi=!1,ki=!0,cs=null,mr={box:null,offscreen:null},Zr={box:null,offscreen:null},$r=null,us=null,fs=null,Rl=0,Pc=0,bc=0;Ln.textFeatureIndex?Rl=Ln.textFeatureIndex:Dn.useRuntimeCollisionCircles&&(Rl=Dn.featureIndex),Ln.verticalTextFeatureIndex&&(Pc=Ln.verticalTextFeatureIndex);const Rc=this.retainedQueryData[A.bucketInstanceId].tileID,jl=this.terrain?(Ei,Fi)=>this.terrain.getElevation(Rc,Ei,Fi):null;for(const Ei of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const Fi=Ln[Ei];Fi&&(Fi.elevation=jl?jl(Fi.anchorPointX,Fi.anchorPointY):0)}const sc=Ln.textBox;if(sc){const Ei=Jr=>{let da=E.WritingMode.horizontal;if(A.allowVerticalPlacement&&!Jr&&this.prevPlacement){const Wr=this.prevPlacement.placedOrientations[Dn.crossTileID];Wr&&(this.placedOrientations[Dn.crossTileID]=Wr,da=Wr,this.markUsedOrientation(A,da,Dn))}return da},Fi=(Jr,da)=>{if(A.allowVerticalPlacement&&Dn.numVerticalGlyphVertices>0&&Ln.verticalTextBox){for(const Wr of A.writingModes)if(Wr===E.WritingMode.vertical?(mr=da(),Zr=mr):mr=Jr(),mr&&mr.box&&mr.box.length)break}else mr=Jr()};if(F.get("text-variable-anchor")){let Jr=F.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Dn.crossTileID]){const wr=this.prevPlacement.variableOffsets[Dn.crossTileID];Jr.indexOf(wr.anchor)>0&&(Jr=Jr.filter(Oc=>Oc!==wr.anchor),Jr.unshift(wr.anchor))}const da=(wr,Oc,Nn)=>{const an=wr.x2-wr.x1,gr=wr.y2-wr.y1,Rr=Dn.textBoxScale,rr=wt&&"never"===fe?Oc:null;let vn={box:[],offscreen:!1};const cn="never"!==G?2*Jr.length:Jr.length;for(let kn=0;kn<cn;++kn){const oo=this.attemptAnchorPlacement(Jr[kn%Jr.length],wr,an,gr,Rr,ot,nt,ie,$,v,kn>=Jr.length?G:"never",Dn,A,Nn,rr,jl);if(oo&&(vn=oo.placedGlyphBoxes,vn&&vn.box&&vn.box.length)){Zi=!0,cs=oo.shift;break}}return vn};Fi(()=>da(sc,Ln.iconBox,E.WritingMode.horizontal),()=>{const wr=Ln.verticalTextBox;return A.allowVerticalPlacement&&!(mr&&mr.box&&mr.box.length)&&Dn.numVerticalGlyphVertices>0&&wr?da(wr,Ln.verticalIconBox,E.WritingMode.vertical):{box:null,offscreen:null}}),mr&&(Zi=mr.box,ki=mr.offscreen);const Wr=Ei(mr&&mr.box);if(!Zi&&this.prevPlacement){const wr=this.prevPlacement.variableOffsets[Dn.crossTileID];wr&&(this.variableOffsets[Dn.crossTileID]=wr,this.markUsedJustification(A,wr.anchor,Dn,Wr))}}else{const Jr=(da,Wr)=>{const wr=this.collisionIndex.placeCollisionBox(da,G,ie,$,v.predicate,jl);return wr&&wr.box&&wr.box.length&&(this.markUsedOrientation(A,Wr,Dn),this.placedOrientations[Dn.crossTileID]=Wr),wr};Fi(()=>Jr(sc,E.WritingMode.horizontal),()=>{const da=Ln.verticalTextBox;return A.allowVerticalPlacement&&Dn.numVerticalGlyphVertices>0&&da?Jr(da,E.WritingMode.vertical):{box:null,offscreen:null}}),Ei(mr&&mr.box&&mr.box.length)}}if($r=mr,Zi=$r&&$r.box&&$r.box.length>0,ki=$r&&$r.offscreen,Dn.useRuntimeCollisionCircles){const Ei=A.text.placedSymbolArray.get(Dn.centerJustifiedTextSymbolIndex),Fi=E.evaluateSizeForFeature(A.textSizeData,m,Ei),Jr=F.get("text-padding");us=this.collisionIndex.placeCollisionCircles(G,Ei,A.lineVertexArray,A.glyphOffsetArray,Fi,$,Z,ee,D,nt,v.predicate,Dn.collisionCircleDiameter,Jr,jl),us.circles.length&&us.collisionDetected&&!D&&E.warnOnce("Collisions detected, but collision boxes are not shown"),Zi=J||us.circles.length>0&&!us.collisionDetected,ki=ki&&us.offscreen}if(Ln.iconFeatureIndex&&(bc=Ln.iconFeatureIndex),Ln.iconBox){const Ei=Fi=>{const Jr=wt&&cs?dc(Fi,cs.x,cs.y,ot,nt,this.transform.angle):Fi;return this.collisionIndex.placeCollisionBox(Jr,fe,ie,$,v.predicate,jl)};Zr&&Zr.box&&Zr.box.length&&Ln.verticalIconBox?(fs=Ei(Ln.verticalIconBox),Qi=fs.box.length>0):(fs=Ei(Ln.iconBox),Qi=fs.box.length>0),ki=ki&&fs.offscreen}const Wc=C||0===Dn.numHorizontalGlyphVertices&&0===Dn.numVerticalGlyphVertices,zf=k||0===Dn.numIconVertices;if(Wc||zf?zf?Wc||(Qi=Qi&&Zi):Zi=Qi&&Zi:Qi=Zi=Qi&&Zi,Zi&&$r&&$r.box&&this.collisionIndex.insertCollisionBox($r.box,G,F.get("text-ignore-placement"),A.bucketInstanceId,Zr&&Zr.box&&Pc?Pc:Rl,v.ID),Qi&&fs&&this.collisionIndex.insertCollisionBox(fs.box,fe,F.get("icon-ignore-placement"),A.bucketInstanceId,bc,v.ID),us&&(Zi&&this.collisionIndex.insertCollisionCircles(us.circles,G,F.get("text-ignore-placement"),A.bucketInstanceId,Rl,v.ID),D)){const Ei=A.bucketInstanceId;let Fi=this.collisionCircleArrays[Ei];void 0===Fi&&(Fi=this.collisionCircleArrays[Ei]=new Os);for(let Jr=0;Jr<us.circles.length;Jr+=4)Fi.circles.push(us.circles[Jr+0]),Fi.circles.push(us.circles[Jr+1]),Fi.circles.push(us.circles[Jr+2]),Fi.circles.push(us.collisionDetected?1:0)}if(0===Dn.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");if(0===A.bucketInstanceId)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Dn.crossTileID]=new Zs(Zi||$t,Qi||Ft,ki||A.justReloaded),y[Dn.crossTileID]=!0};if(Pt){if(0!==u.symbolInstanceStart)throw new Error("bucket.bucketInstanceId should be 0");const Dn=A.getSortedSymbolIndexes(this.transform.angle);for(let Ln=Dn.length-1;Ln>=0;--Ln){const Zi=Dn[Ln];En(A.symbolInstances.get(Zi),A.collisionArrays[Zi])}}else for(let Dn=u.symbolInstanceStart;Dn<u.symbolInstanceEnd;Dn++)En(A.symbolInstances.get(Dn),A.collisionArrays[Dn]);if(D&&A.bucketInstanceId in this.collisionCircleArrays){const Dn=this.collisionCircleArrays[A.bucketInstanceId];E.invert(Dn.invProjMatrix,$),Dn.viewportMatrix=this.collisionIndex.getViewportMatrix()}A.justReloaded=!1}markUsedJustification(u,y,D,A){let F;F=A===E.WritingMode.vertical?D.verticalPlacedTextSymbolIndex:{left:D.leftJustifiedTextSymbolIndex,center:D.centerJustifiedTextSymbolIndex,right:D.rightJustifiedTextSymbolIndex}[E.getAnchorJustification(y)];const $=[D.leftJustifiedTextSymbolIndex,D.centerJustifiedTextSymbolIndex,D.rightJustifiedTextSymbolIndex,D.verticalPlacedTextSymbolIndex];for(const Z of $)Z>=0&&(u.text.placedSymbolArray.get(Z).crossTileID=F>=0&&Z!==F?0:D.crossTileID)}markUsedOrientation(u,y,D){const A=y===E.WritingMode.horizontal||y===E.WritingMode.horizontalOnly?y:0,F=y===E.WritingMode.vertical?y:0,$=[D.leftJustifiedTextSymbolIndex,D.centerJustifiedTextSymbolIndex,D.rightJustifiedTextSymbolIndex];for(const Z of $)u.text.placedSymbolArray.get(Z).placedOrientation=A;D.verticalPlacedTextSymbolIndex&&(u.text.placedSymbolArray.get(D.verticalPlacedTextSymbolIndex).placedOrientation=F)}commit(u){this.commitTime=u,this.zoomAtLastRecencyCheck=this.transform.zoom;const y=this.prevPlacement;let D=!1;this.prevZoomAdjustment=y?y.zoomAdjustment(this.transform.zoom):0;const A=y?y.symbolFadeChange(u):1,F=y?y.opacities:{},$=y?y.variableOffsets:{},Z=y?y.placedOrientations:{};for(const ee in this.placements){const ie=this.placements[ee],s=F[ee];s?(this.opacities[ee]=new ar(s,A,ie.text,ie.icon),D=D||ie.text!==s.text.placed||ie.icon!==s.icon.placed):(this.opacities[ee]=new ar(null,A,ie.text,ie.icon,ie.skipFade),D=D||ie.text||ie.icon)}for(const ee in F){const ie=F[ee];if(!this.opacities[ee]){const s=new ar(ie,A,!1,!1);s.isHidden()||(this.opacities[ee]=s,D=D||ie.text.placed||ie.icon.placed)}}for(const ee in $)this.variableOffsets[ee]||!this.opacities[ee]||this.opacities[ee].isHidden()||(this.variableOffsets[ee]=$[ee]);for(const ee in Z)this.placedOrientations[ee]||!this.opacities[ee]||this.opacities[ee].isHidden()||(this.placedOrientations[ee]=Z[ee]);if(y&&void 0===y.lastPlacementChangeTime)throw new Error("Last placement time for previous placement is not defined");D?this.lastPlacementChangeTime=u:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=y?y.lastPlacementChangeTime:u)}updateLayerOpacities(u,y){const D={};for(const A of y){const F=A.getBucket(u);F&&A.latestFeatureIndex&&u.id===F.layerIds[0]&&this.updateBucketOpacities(F,D,A.collisionBoxArray)}}updateBucketOpacities(u,y,D){u.hasTextData()&&u.text.opacityVertexArray.clear(),u.hasIconData()&&u.icon.opacityVertexArray.clear(),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexArray.clear(),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexArray.clear();const A=u.layers[0].layout,F=new ar(null,0,!1,!1,!0),$=A.get("text-allow-overlap"),Z=A.get("icon-allow-overlap"),ee=A.get("text-variable-anchor"),ie="map"===A.get("text-rotation-alignment"),s="map"===A.get("text-pitch-alignment"),l="none"!==A.get("icon-text-fit"),m=new ar(null,0,$&&(Z||!u.hasIconData()||A.get("icon-optional")),Z&&($||!u.hasTextData()||A.get("text-optional")),!0);!u.collisionArrays&&D&&(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData())&&u.deserializeCollisionBoxes(D);const v=(C,k,G)=>{for(let J=0;J<k/4;J++)C.opacityVertexArray.emplaceBack(G)};for(let C=0;C<u.symbolInstances.length;C++){const k=u.symbolInstances.get(C),{numHorizontalGlyphVertices:G,numVerticalGlyphVertices:J,crossTileID:fe}=k;let pe=this.opacities[fe];y[fe]?pe=F:pe||(pe=m,this.opacities[fe]=pe),y[fe]=!0;const ot=k.numIconVertices>0,nt=this.placedOrientations[k.crossTileID],wt=nt===E.WritingMode.vertical,Pt=nt===E.WritingMode.horizontal||nt===E.WritingMode.horizontalOnly;if(G>0||J>0){const $t=Lt(pe.text);v(u.text,G,wt?Qt:$t),v(u.text,J,Pt?Qt:$t);const Ft=pe.text.isHidden();[k.rightJustifiedTextSymbolIndex,k.centerJustifiedTextSymbolIndex,k.leftJustifiedTextSymbolIndex].forEach(Ln=>{Ln>=0&&(u.text.placedSymbolArray.get(Ln).hidden=Ft||wt?1:0)}),k.verticalPlacedTextSymbolIndex>=0&&(u.text.placedSymbolArray.get(k.verticalPlacedTextSymbolIndex).hidden=Ft||Pt?1:0);const En=this.variableOffsets[k.crossTileID];En&&this.markUsedJustification(u,En.anchor,k,nt);const Dn=this.placedOrientations[k.crossTileID];Dn&&(this.markUsedJustification(u,"left",k,Dn),this.markUsedOrientation(u,Dn,k))}if(ot){const $t=Lt(pe.icon),Ft=!(l&&k.verticalPlacedIconSymbolIndex&&wt);k.placedIconSymbolIndex>=0&&(v(u.icon,k.numIconVertices,Ft?$t:Qt),u.icon.placedSymbolArray.get(k.placedIconSymbolIndex).hidden=pe.icon.isHidden()),k.verticalPlacedIconSymbolIndex>=0&&(v(u.icon,k.numVerticalIconVertices,Ft?Qt:$t),u.icon.placedSymbolArray.get(k.verticalPlacedIconSymbolIndex).hidden=pe.icon.isHidden())}if(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData()){const $t=u.collisionArrays[C];if($t){let Ft=new E.pointGeometry(0,0);if($t.textBox||$t.verticalTextBox){let Dn=!0;if(ee){const Ln=this.variableOffsets[fe];Ln?(Ft=zs(Ln.anchor,Ln.width,Ln.height,Ln.textOffset,Ln.textBoxScale),ie&&Ft._rotate(s?this.transform.angle:-this.transform.angle)):Dn=!1}$t.textBox&&le(u.textCollisionBox.collisionVertexArray,pe.text.placed,!Dn||wt,Ft.x,Ft.y),$t.verticalTextBox&&le(u.textCollisionBox.collisionVertexArray,pe.text.placed,!Dn||Pt,Ft.x,Ft.y)}const En=Boolean(!Pt&&$t.verticalIconBox);$t.iconBox&&le(u.iconCollisionBox.collisionVertexArray,pe.icon.placed,En,l?Ft.x:0,l?Ft.y:0),$t.verticalIconBox&&le(u.iconCollisionBox.collisionVertexArray,pe.icon.placed,!En,l?Ft.x:0,l?Ft.y:0)}}}if(u.sortFeatures(this.transform.angle),this.retainedQueryData[u.bucketInstanceId]&&(this.retainedQueryData[u.bucketInstanceId].featureSortOrder=u.featureSortOrder),u.hasTextData()&&u.text.opacityVertexBuffer&&u.text.opacityVertexBuffer.updateData(u.text.opacityVertexArray),u.hasIconData()&&u.icon.opacityVertexBuffer&&u.icon.opacityVertexBuffer.updateData(u.icon.opacityVertexArray),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexBuffer&&u.iconCollisionBox.collisionVertexBuffer.updateData(u.iconCollisionBox.collisionVertexArray),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexBuffer&&u.textCollisionBox.collisionVertexBuffer.updateData(u.textCollisionBox.collisionVertexArray),u.text.opacityVertexArray.length!==u.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${u.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${u.text.layoutVertexArray.length}) / 4`);if(u.icon.opacityVertexArray.length!==u.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${u.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${u.icon.layoutVertexArray.length}) / 4`);if(u.bucketInstanceId in this.collisionCircleArrays){const C=this.collisionCircleArrays[u.bucketInstanceId];u.placementInvProjMatrix=C.invProjMatrix,u.placementViewportMatrix=C.viewportMatrix,u.collisionCircleArray=C.circles,delete this.collisionCircleArrays[u.bucketInstanceId]}}symbolFadeChange(u){return 0===this.fadeDuration?1:(u-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(u){return Math.max(0,(this.transform.zoom-u)/1.5)}hasTransitions(u){return this.stale||u-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(u,y){const D=this.zoomAtLastRecencyCheck===y?1-this.zoomAdjustment(y):1;return this.zoomAtLastRecencyCheck=y,this.commitTime+this.fadeDuration*D>u}setStale(){this.stale=!0}}function le(T,u,y,D,A){T.emplaceBack(u?1:0,y?1:0,D||0,A||0),T.emplaceBack(u?1:0,y?1:0,D||0,A||0),T.emplaceBack(u?1:0,y?1:0,D||0,A||0),T.emplaceBack(u?1:0,y?1:0,D||0,A||0)}const Ee=Math.pow(2,25),Ge=Math.pow(2,24),qe=Math.pow(2,17),bt=Math.pow(2,16),Ot=Math.pow(2,9),Dt=Math.pow(2,8),vt=Math.pow(2,1);function Lt(T){if(0===T.opacity&&!T.placed)return 0;if(1===T.opacity&&T.placed)return 4294967295;const u=T.placed?1:0,y=Math.floor(127*T.opacity);return y*Ee+u*Ge+y*qe+u*bt+y*Ot+u*Dt+y*vt+u}const Qt=0;class mn{constructor(u){this._sortAcrossTiles="viewport-y"!==u.layout.get("symbol-z-order")&&!u.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(u,y,D,A,F){const $=this._bucketParts;for(;this._currentTileIndex<u.length;)if(y.getBucketParts($,A,u[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,F())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,$.sort((Z,ee)=>Z.sortKey-ee.sortKey));this._currentPartIndex<$.length;)if(y.placeLayerBucketPart($[this._currentPartIndex],this._seenCrossTileIDs,D),this._currentPartIndex++,F())return!0;return!1}}class Wt{constructor(u,y,D,A,F,$,Z,ee){this.placement=new rt(u,y,$,Z,ee),this._currentPlacementIndex=D.length-1,this._forceFullPlacement=A,this._showCollisionBoxes=F,this._done=!1}isDone(){return this._done}continuePlacement(u,y,D){const A=E.exported.now(),F=()=>{const $=E.exported.now()-A;return!this._forceFullPlacement&&$>2};for(;this._currentPlacementIndex>=0;){const $=y[u[this._currentPlacementIndex]],Z=this.placement.collisionIndex.transform.zoom;if("symbol"===$.type&&(!$.minzoom||$.minzoom<=Z)&&(!$.maxzoom||$.maxzoom>Z)){if(this._inProgressLayer||(this._inProgressLayer=new mn($)),this._inProgressLayer.continuePlacement(D[$.source],this.placement,this._showCollisionBoxes,$,F))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(u){return this.placement.commit(u),this.placement}}const li=512/E.EXTENT/2;class Pn{constructor(u,y,D){this.tileID=u,this.indexedSymbolInstances={},this.bucketInstanceId=D;for(let A=0;A<y.length;A++){const F=y.get(A),$=F.key;this.indexedSymbolInstances[$]||(this.indexedSymbolInstances[$]=[]),this.indexedSymbolInstances[$].push({crossTileID:F.crossTileID,coord:this.getScaledCoordinates(F,u)})}}getScaledCoordinates(u,y){const D=li/Math.pow(2,y.canonical.z-this.tileID.canonical.z);return{x:Math.floor((y.canonical.x*E.EXTENT+u.anchorX)*D),y:Math.floor((y.canonical.y*E.EXTENT+u.anchorY)*D)}}findMatches(u,y,D){const A=this.tileID.canonical.z<y.canonical.z?1:Math.pow(2,this.tileID.canonical.z-y.canonical.z);for(let F=0;F<u.length;F++){const $=u.get(F);if($.crossTileID)continue;const Z=this.indexedSymbolInstances[$.key];if(!Z)continue;const ee=this.getScaledCoordinates($,y);for(const ie of Z)if(Math.abs(ie.coord.x-ee.x)<=A&&Math.abs(ie.coord.y-ee.y)<=A&&!D[ie.crossTileID]){D[ie.crossTileID]=!0,$.crossTileID=ie.crossTileID;break}}}}class xn{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ii{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(u){const y=Math.round((u-this.lng)/360);if(0!==y)for(const D in this.indexes){const A=this.indexes[D],F={};for(const $ in A){const Z=A[$];Z.tileID=Z.tileID.unwrapTo(Z.tileID.wrap+y),F[Z.tileID.key]=Z}this.indexes[D]=F}this.lng=u}addBucket(u,y,D){if(this.indexes[u.overscaledZ]&&this.indexes[u.overscaledZ][u.key]){if(this.indexes[u.overscaledZ][u.key].bucketInstanceId===y.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(u.overscaledZ,this.indexes[u.overscaledZ][u.key])}for(let F=0;F<y.symbolInstances.length;F++)y.symbolInstances.get(F).crossTileID=0;this.usedCrossTileIDs[u.overscaledZ]||(this.usedCrossTileIDs[u.overscaledZ]={});const A=this.usedCrossTileIDs[u.overscaledZ];for(const F in this.indexes){const $=this.indexes[F];if(Number(F)>u.overscaledZ)for(const Z in $){const ee=$[Z];ee.tileID.isChildOf(u)&&ee.findMatches(y.symbolInstances,u,A)}else{const Z=$[u.scaledTo(Number(F)).key];Z&&Z.findMatches(y.symbolInstances,u,A)}}for(let F=0;F<y.symbolInstances.length;F++){const $=y.symbolInstances.get(F);$.crossTileID||($.crossTileID=D.generate(),A[$.crossTileID]=!0)}return void 0===this.indexes[u.overscaledZ]&&(this.indexes[u.overscaledZ]={}),this.indexes[u.overscaledZ][u.key]=new Pn(u,y.symbolInstances,y.bucketInstanceId),!0}removeBucketCrossTileIDs(u,y){for(const D in y.indexedSymbolInstances)for(const A of y.indexedSymbolInstances[D])delete this.usedCrossTileIDs[u][A.crossTileID]}removeStaleBuckets(u){let y=!1;for(const D in this.indexes){const A=this.indexes[D];for(const F in A)u[A[F].bucketInstanceId]||(this.removeBucketCrossTileIDs(D,A[F]),delete A[F],y=!0)}return y}}class mi{constructor(){this.layerIndexes={},this.crossTileIDs=new xn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(u,y,D){let A=this.layerIndexes[u.id];void 0===A&&(A=this.layerIndexes[u.id]=new Ii);let F=!1;const $={};A.handleWrapJump(D);for(const Z of y){const ee=Z.getBucket(u);ee&&u.id===ee.layerIds[0]&&(ee.bucketInstanceId||(ee.bucketInstanceId=++this.maxBucketInstanceId),A.addBucket(Z.tileID,ee,this.crossTileIDs)&&(F=!0),$[ee.bucketInstanceId]=!0)}return A.removeStaleBuckets($)&&(F=!0),F}pruneUnusedLayers(u){const y={};u.forEach(D=>{y[D]=!0});for(const D in this.layerIndexes)y[D]||delete this.layerIndexes[D]}}var lr=E.createLayout([{name:"a_pos",type:"Int16",components:2}]);class ii extends E.Evented{constructor(u){super(),this.sourceCache=u,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=u._cache.max,u.usedForTerrain=!0,u.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const u in this._tiles){const y=this._tiles[u];y.textures.forEach(D=>D.destroy()),y.textures=[]}}update(u,y){this.sourceCache.update(u,y),this._renderableTilesKeys=[];for(const D of u.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:y}))this._renderableTilesKeys.push(D.key),this._tiles[D.key]||(D.posMatrix=new Float64Array(16),E.ortho(D.posMatrix,0,E.EXTENT,0,E.EXTENT,0,1),this._tiles[D.key]=new rn(D,this.tileSize))}removeOutdated(u){const y={};this.renderHistory=this.renderHistory.filter((D,A)=>this.renderHistory.indexOf(D)===A).slice(0,this.renderHistorySize);for(const D of this._renderableTilesKeys)y[D]=!0;for(const D of this.renderHistory)y[D]=!0;for(const D in this._tiles)y[D]||(this._tiles[D].clearTextures(u),delete this._tiles[D])}getRenderableTiles(){return this._renderableTilesKeys.map(u=>this.getTileByID(u))}getTileByID(u){return this._tiles[u]}getTerrainCoords(u){const y={};for(const D of this._renderableTilesKeys){const A=this._tiles[D].tileID;if(A.canonical.equals(u.canonical)){const F=u.clone();F.posMatrix=new Float64Array(16),E.ortho(F.posMatrix,0,E.EXTENT,0,E.EXTENT,0,1),y[D]=F}else if(A.canonical.isChildOf(u.canonical)){const F=u.clone();F.posMatrix=new Float64Array(16);const $=A.canonical.z-u.canonical.z,Z=A.canonical.x-(A.canonical.x>>$<<$),ee=A.canonical.y-(A.canonical.y>>$<<$),ie=E.EXTENT>>$;E.ortho(F.posMatrix,0,ie,0,ie,0,1),E.translate(F.posMatrix,F.posMatrix,[-Z*ie,-ee*ie,0]),y[D]=F}else if(u.canonical.isChildOf(A.canonical)){const F=u.clone();F.posMatrix=new Float64Array(16);const $=u.canonical.z-A.canonical.z,Z=u.canonical.x-(u.canonical.x>>$<<$),ee=u.canonical.y-(u.canonical.y>>$<<$),ie=E.EXTENT>>$;E.ortho(F.posMatrix,0,E.EXTENT,0,E.EXTENT,0,1),E.translate(F.posMatrix,F.posMatrix,[Z*ie,ee*ie,0]),E.scale(F.posMatrix,F.posMatrix,[1/2**$,1/2**$,0]),y[D]=F}}return y}getSourceTile(u,y){const D=this.sourceCache._source;let A=u.overscaledZ-this.deltaZoom;if(A>D.maxzoom&&(A=D.maxzoom),A<D.minzoom)return null;this._sourceTileCache[u.key]||(this._sourceTileCache[u.key]=u.scaledTo(A).key);let F=this.sourceCache.getTileByID(this._sourceTileCache[u.key]);if((!F||!F.dem)&&y)for(;A>=D.minzoom&&(!F||!F.dem);)F=this.sourceCache.getTileByID(u.scaledTo(A--).key);return F}tilesAfterTime(u=Date.now()){return Object.values(this._tiles).filter(y=>y.timeLoaded>=u)}}class Xn{constructor(u,y,D){this.style=u,this.sourceCache=new ii(y),this.options=D,this.exaggeration="number"==typeof D.exaggeration?D.exaggeration:1,this.elevationOffset="number"==typeof D.elevationOffset?D.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(u,y,D,A=E.EXTENT){if(!(y>=0&&y<A&&D>=0&&D<A))return this.elevationOffset;let F=0;const $=this.getTerrainData(u);if($.tile&&$.tile.dem){const Z=E.transformMat4$1([],[y/A*E.EXTENT,D/A*E.EXTENT],$.u_terrain_matrix),ee=[Z[0]*$.tile.dem.dim,Z[1]*$.tile.dem.dim],ie=[Math.floor(ee[0]),Math.floor(ee[1])],s=$.tile.dem.get(ie[0],ie[1]),l=$.tile.dem.get(ie[0],ie[1]+1),m=$.tile.dem.get(ie[0]+1,ie[1]),v=$.tile.dem.get(ie[0]+1,ie[1]+1);F=E.number(E.number(s,l,ee[0]-ie[0]),E.number(m,v,ee[0]-ie[0]),ee[1]-ie[1])}return F}rememberForRerender(u,y){for(const D in this.sourceCache._tiles){const A=this.sourceCache._tiles[D];(A.tileID.equals(y)||A.tileID.isChildOf(y))&&(u===this.sourceCache.sourceCache.id&&(A.timeLoaded=Date.now()),this._rerender[u]=this._rerender[u]||{},this._rerender[u][A.tileID.key]=!0)}}needsRerender(u,y){return this._rerender[u]&&this._rerender[u][y.key]}clearRerenderCache(){this._rerender={}}getElevation(u,y,D,A=E.EXTENT){return(this.getDEMElevation(u,y,D,A)+this.elevationOffset)*this.exaggeration}getTerrainData(u){if(!this._emptyDemTexture){const A=this.style.map.painter.context,F=new E.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Te(A,F,A.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Te(A,new E.RGBAImage({width:1,height:1}),A.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(A.gl.NEAREST,A.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=E.identity([])}const y=this.sourceCache.getSourceTile(u,!0);if(y&&y.dem&&(!y.demTexture||y.needsTerrainPrepare)){const A=this.style.map.painter.context;y.demTexture=this.style.map.painter.getTileTexture(y.dem.stride),y.demTexture?y.demTexture.update(y.dem.getPixels(),{premultiply:!1}):y.demTexture=new Te(A,y.dem.getPixels(),A.gl.RGBA,{premultiply:!1}),y.demTexture.bind(A.gl.NEAREST,A.gl.CLAMP_TO_EDGE),y.needsTerrainPrepare=!1}const D=y&&y+y.tileID.key+u.key;if(D&&!this._demMatrixCache[D]){const A=this.sourceCache.sourceCache._source.maxzoom;let F=u.canonical.z-y.tileID.canonical.z;u.overscaledZ>u.canonical.z&&(u.canonical.z>=A?F=u.canonical.z-A:E.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const $=u.canonical.x-(u.canonical.x>>F<<F),Z=u.canonical.y-(u.canonical.y>>F<<F),ee=E.fromScaling(new Float64Array(16),[1/(E.EXTENT<<F),1/(E.EXTENT<<F),0]);E.translate(ee,ee,[$*E.EXTENT,Z*E.EXTENT,0]),this._demMatrixCache[u.key]={matrix:ee,coord:u}}return{u_depth:2,u_terrain:3,u_terrain_dim:y&&y.dem&&y.dem.dim||1,u_terrain_matrix:D?this._demMatrixCache[u.key].matrix:this._emptyDemMatrix,u_terrain_unpack:y&&y.dem&&y.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(y&&y.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:y}}getRTTFramebuffer(){const u=this.style.map.painter;if(!this._rttFramebuffer){const y=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=u.context.createFramebuffer(y,y,!0),this._rttFramebuffer.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,y,y))}return this._rttFramebuffer}getFramebuffer(u){const y=this.style.map.painter,D=y.width/devicePixelRatio,A=y.height/devicePixelRatio;return!this._fbo||this._fbo.width===D&&this._fbo.height===A||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Te(y.context,{width:D,height:A,data:null},y.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(y.context.gl.NEAREST,y.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Te(y.context,{width:D,height:A,data:null},y.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(y.context.gl.NEAREST,y.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=y.context.createFramebuffer(D,A,!0),this._fbo.depthAttachment.set(y.context.createRenderbuffer(y.context.gl.DEPTH_COMPONENT16,D,A))),this._fbo.colorAttachment.set("coords"===u?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const u=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const y=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let F=0,$=0;F<this._coordsTextureSize;F++)for(let Z=0;Z<this._coordsTextureSize;Z++,$+=4)y[$+0]=255&Z,y[$+1]=255&F,y[$+2]=Z>>8<<4|F>>8,y[$+3]=0;const D=new E.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(y.buffer)),A=new Te(u,D,u.gl.RGBA,{premultiply:!1});return A.bind(u.gl.NEAREST,u.gl.CLAMP_TO_EDGE),this._coordsTexture=A,A}pointCoordinate(u){const y=new Uint8Array(4),D=this.style.map.painter,A=D.context,F=A.gl;A.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),F.readPixels(u.x,D.height/devicePixelRatio-u.y-1,1,1,F.RGBA,F.UNSIGNED_BYTE,y),A.bindFramebuffer.set(null);const $=y[0]+(y[2]>>4<<8),Z=y[1]+((15&y[2])<<8),ee=this.coordsIndex[255-y[3]],ie=ee&&this.sourceCache.getTileByID(ee);if(!ie)return null;const s=this._coordsTextureSize,l=(1<<ie.tileID.canonical.z)*s;return new E.MercatorCoordinate((ie.tileID.canonical.x*s+$)/l,(ie.tileID.canonical.y*s+Z)/l,this.getElevation(ie.tileID,$,Z,s))}getTerrainMesh(){if(this._mesh)return this._mesh;const u=this.style.map.painter.context,y=new E.PosArray,D=new E.TriangleIndexArray,A=this.meshSize,F=E.EXTENT/A,$=A*A;for(let Z=0;Z<=A;Z++)for(let ee=0;ee<=A;ee++)y.emplaceBack(ee*F,Z*F);for(let Z=0;Z<$;Z+=A+1)for(let ee=0;ee<A;ee++)D.emplaceBack(ee+Z,A+ee+Z+1,A+ee+Z+2),D.emplaceBack(ee+Z,A+ee+Z+2,ee+Z+1);return this._mesh={indexBuffer:u.createIndexBuffer(D),vertexBuffer:u.createVertexBuffer(y,lr.members),segments:E.SegmentVector.simpleSegment(0,0,y.length,D.length)},this._mesh}getMinMaxElevation(u){const y=this.getTerrainData(u).tile,D={minElevation:null,maxElevation:null};return y&&y.dem&&(D.minElevation=(y.dem.min+this.elevationOffset)*this.exaggeration,D.maxElevation=(y.dem.max+this.elevationOffset)*this.exaggeration),D}}const Mi=(T,u)=>E.emitValidationErrors(T,u&&u.filter(y=>"source.canvas"!==y.identifier)),Wi=E.pick(It,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),qr=E.pick(It,["setCenter","setZoom","setBearing","setPitch"]),yr=function(){const T={},u=E.spec.$version;for(const y in E.spec.$root){const D=E.spec.$root[y];if(D.required){let A=null;A="version"===y?u:"array"===D.type?[]:{},null!=A&&(T[y]=A)}}return T}();class eo extends E.Evented{constructor(u,y={}){super(),this.map=u,this.dispatcher=new Fe(Fr(),this),this.imageManager=new Ct,this.imageManager.setEventedParent(this),this.glyphManager=new ye(u._requestManager,y.localIdeographFontFamily),this.lineAtlas=new we(256,512),this.crossTileSymbolIndex=new mi,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new E.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",E.getReferrer());const D=this;this._rtlTextPluginCallback=eo.registerForPluginStateChange(A=>{D.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:A.pluginStatus,pluginURL:A.pluginURL},(F,$)=>{if(E.triggerPluginCompletionEvent(F),$&&$.every(Z=>Z))for(const Z in D.sourceCaches)D.sourceCaches[Z].reload()})}),this.on("data",A=>{if("source"!==A.dataType||"metadata"!==A.sourceDataType)return;const F=this.sourceCaches[A.sourceId];if(!F)return;const $=F.getSource();if($&&$.vectorLayerIds)for(const Z in this._layers){const ee=this._layers[Z];ee.source===$.id&&this._validateLayer(ee)}})}loadURL(u,y={}){this.fire(new E.Event("dataloading",{dataType:"style"}));const D="boolean"!=typeof y.validate||y.validate,A=this.map._requestManager.transformRequest(u,E.ResourceType.Style);this._request=E.getJSON(A,(F,$)=>{this._request=null,F?this.fire(new E.ErrorEvent(F)):$&&this._load($,D)})}loadJSON(u,y={}){this.fire(new E.Event("dataloading",{dataType:"style"})),this._request=E.exported.frame(()=>{this._request=null,this._load(u,!1!==y.validate)})}loadEmpty(){this.fire(new E.Event("dataloading",{dataType:"style"})),this._load(yr,!1)}_load(u,y){if(y&&Mi(this,E.validateStyle(u)))return;this._loaded=!0,this.stylesheet=u;for(const A in u.sources)this.addSource(A,u.sources[A],{validate:!1});u.sprite?this._loadSprite(u.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(u.glyphs);const D=Ri(this.stylesheet.layers);this._order=D.map(A=>A.id),this._layers={},this._serializedLayers={};for(let A of D)A=E.createStyleLayer(A),A.setEventedParent(this,{layer:{id:A.id}}),this._layers[A.id]=A,this._serializedLayers[A.id]=A.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new ve(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new E.Event("data",{dataType:"style"})),this.fire(new E.Event("style.load"))}_loadSprite(u){this._spriteRequest=function(y,D,A,F){let $,Z,ee;const ie=A>1?"@2x":"";let s=E.getJSON(D.transformRequest(D.normalizeSpriteURL(y,ie,".json"),E.ResourceType.SpriteJSON),(v,C)=>{s=null,ee||(ee=v,$=C,m())}),l=E.getImage(D.transformRequest(D.normalizeSpriteURL(y,ie,".png"),E.ResourceType.SpriteImage),(v,C)=>{l=null,ee||(ee=v,Z=C,m())});function m(){if(ee)F(ee);else if($&&Z){const v=E.exported.getImageData(Z),C={};for(const k in $){const{width:G,height:J,x:fe,y:pe,sdf:ot,pixelRatio:nt,stretchX:wt,stretchY:Pt,content:$t}=$[k],Ft=new E.RGBAImage({width:G,height:J});E.RGBAImage.copy(v,Ft,{x:fe,y:pe},{x:0,y:0},{width:G,height:J}),C[k]={data:Ft,pixelRatio:nt,sdf:ot,stretchX:wt,stretchY:Pt,content:$t}}F(null,C)}}return{cancel(){s&&(s.cancel(),s=null),l&&(l.cancel(),l=null)}}}(u,this.map._requestManager,this.map.getPixelRatio(),(y,D)=>{if(this._spriteRequest=null,y)this.fire(new E.ErrorEvent(y));else if(D)for(const A in D)this.imageManager.addImage(A,D[A]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new E.Event("data",{dataType:"style"}))})}_validateLayer(u){const y=this.sourceCaches[u.source];if(!y)return;const D=u.sourceLayer;if(!D)return;const A=y.getSource();("geojson"===A.type||A.vectorLayerIds&&-1===A.vectorLayerIds.indexOf(D))&&this.fire(new E.ErrorEvent(new Error(`Source layer "${D}" does not exist on source "${A.id}" as specified by style layer "${u.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const u in this.sourceCaches)if(!this.sourceCaches[u].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(u){const y=[];for(const D of u){const A=this._layers[D];"custom"!==A.type&&y.push(A.serialize())}return y}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const u in this.sourceCaches)if(this.sourceCaches[u].hasTransition())return!0;for(const u in this._layers)if(this._layers[u].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(u){if(!this._loaded)return;const y=this._changed;if(this._changed){const A=Object.keys(this._updatedLayers),F=Object.keys(this._removedLayers);(A.length||F.length)&&this._updateWorkerLayers(A,F);for(const $ in this._updatedSources){const Z=this._updatedSources[$];if("reload"===Z)this._reloadSource($);else{if("clear"!==Z)throw new Error(`Invalid action ${Z}`);this._clearSource($)}}this._updateTilesForChangedImages();for(const $ in this._updatedPaintProps)this._layers[$].updateTransitions(u);this.light.updateTransitions(u),this._resetUpdates()}const D={};for(const A in this.sourceCaches){const F=this.sourceCaches[A];D[A]=F.used,F.used=!1}for(const A of this._order){const F=this._layers[A];F.recalculate(u,this._availableImages),!F.isHidden(u.zoom)&&F.source&&(this.sourceCaches[F.source].used=!0)}for(const A in D){const F=this.sourceCaches[A];D[A]!==F.used&&F.fire(new E.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:A}))}this.light.recalculate(u),this.z=u.zoom,y&&this.fire(new E.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const u=Object.keys(this._changedImages);if(u.length){for(const y in this.sourceCaches)this.sourceCaches[y].reloadTilesForDependencies(["icons","patterns"],u);this._changedImages={}}}_updateWorkerLayers(u,y){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(u),removedIds:y})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(u){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),u){const y=this.sourceCaches[u.source];if(!y)throw new Error(`cannot load terrain, because there exists no source with ID: ${u.source}`);this.terrain=new Xn(this,y,u),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=D=>{D.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=D=>{D.tile&&(D.sourceId===u.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(D.sourceId,D.tile.tileID)):"geojson"===D.source.type&&this.terrain.rememberForRerender(D.sourceId,D.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new E.Event("terrain",{terrain:u}))}setState(u){if(this._checkLoaded(),Mi(this,E.validateStyle(u)))return!1;(u=E.clone$1(u)).layers=Ri(u.layers);const y=function(A,F){if(!A)return[{command:It.setStyle,args:[F]}];let $=[];try{if(!Ne(A.version,F.version))return[{command:It.setStyle,args:[F]}];Ne(A.center,F.center)||$.push({command:It.setCenter,args:[F.center]}),Ne(A.zoom,F.zoom)||$.push({command:It.setZoom,args:[F.zoom]}),Ne(A.bearing,F.bearing)||$.push({command:It.setBearing,args:[F.bearing]}),Ne(A.pitch,F.pitch)||$.push({command:It.setPitch,args:[F.pitch]}),Ne(A.sprite,F.sprite)||$.push({command:It.setSprite,args:[F.sprite]}),Ne(A.glyphs,F.glyphs)||$.push({command:It.setGlyphs,args:[F.glyphs]}),Ne(A.transition,F.transition)||$.push({command:It.setTransition,args:[F.transition]}),Ne(A.light,F.light)||$.push({command:It.setLight,args:[F.light]});const Z={},ee=[];!function(s,l,m,v){let C;for(C in l=l||{},s=s||{})Object.prototype.hasOwnProperty.call(s,C)&&(Object.prototype.hasOwnProperty.call(l,C)||Le(C,m,v));for(C in l)Object.prototype.hasOwnProperty.call(l,C)&&(Object.prototype.hasOwnProperty.call(s,C)?Ne(s[C],l[C])||("geojson"===s[C].type&&"geojson"===l[C].type&&Je(s,l,C)?m.push({command:It.setGeoJSONSourceData,args:[C,l[C].data]}):ke(C,l,m,v)):je(C,l,m))}(A.sources,F.sources,ee,Z);const ie=[];A.layers&&A.layers.forEach(s=>{Z[s.source]?$.push({command:It.removeLayer,args:[s.id]}):ie.push(s)}),$=$.concat(ee),function(s,l,m){l=l||[];const v=(s=s||[]).map(Yt),C=l.map(Yt),k=s.reduce(ln,{}),G=l.reduce(ln,{}),J=v.slice(),fe=Object.create(null);let pe,ot,nt,wt,Pt,$t,Ft;for(pe=0,ot=0;pe<v.length;pe++)nt=v[pe],Object.prototype.hasOwnProperty.call(G,nt)?ot++:(m.push({command:It.removeLayer,args:[nt]}),J.splice(J.indexOf(nt,ot),1));for(pe=0,ot=0;pe<C.length;pe++)nt=C[C.length-1-pe],J[J.length-1-pe]!==nt&&(Object.prototype.hasOwnProperty.call(k,nt)?(m.push({command:It.removeLayer,args:[nt]}),J.splice(J.lastIndexOf(nt,J.length-ot),1)):ot++,$t=J[J.length-pe],m.push({command:It.addLayer,args:[G[nt],$t]}),J.splice(J.length-pe,0,nt),fe[nt]=!0);for(pe=0;pe<C.length;pe++)if(nt=C[pe],wt=k[nt],Pt=G[nt],!fe[nt]&&!Ne(wt,Pt))if(Ne(wt.source,Pt.source)&&Ne(wt["source-layer"],Pt["source-layer"])&&Ne(wt.type,Pt.type)){for(Ft in Tt(wt.layout,Pt.layout,m,nt,null,It.setLayoutProperty),Tt(wt.paint,Pt.paint,m,nt,null,It.setPaintProperty),Ne(wt.filter,Pt.filter)||m.push({command:It.setFilter,args:[nt,Pt.filter]}),Ne(wt.minzoom,Pt.minzoom)&&Ne(wt.maxzoom,Pt.maxzoom)||m.push({command:It.setLayerZoomRange,args:[nt,Pt.minzoom,Pt.maxzoom]}),wt)Object.prototype.hasOwnProperty.call(wt,Ft)&&"layout"!==Ft&&"paint"!==Ft&&"filter"!==Ft&&"metadata"!==Ft&&"minzoom"!==Ft&&"maxzoom"!==Ft&&(0===Ft.indexOf("paint.")?Tt(wt[Ft],Pt[Ft],m,nt,Ft.slice(6),It.setPaintProperty):Ne(wt[Ft],Pt[Ft])||m.push({command:It.setLayerProperty,args:[nt,Ft,Pt[Ft]]}));for(Ft in Pt)Object.prototype.hasOwnProperty.call(Pt,Ft)&&!Object.prototype.hasOwnProperty.call(wt,Ft)&&"layout"!==Ft&&"paint"!==Ft&&"filter"!==Ft&&"metadata"!==Ft&&"minzoom"!==Ft&&"maxzoom"!==Ft&&(0===Ft.indexOf("paint.")?Tt(wt[Ft],Pt[Ft],m,nt,Ft.slice(6),It.setPaintProperty):Ne(wt[Ft],Pt[Ft])||m.push({command:It.setLayerProperty,args:[nt,Ft,Pt[Ft]]}))}else m.push({command:It.removeLayer,args:[nt]}),$t=J[J.lastIndexOf(nt)+1],m.push({command:It.addLayer,args:[Pt,$t]})}(ie,F.layers,$)}catch(Z){console.warn("Unable to compute style diff:",Z),$=[{command:It.setStyle,args:[F]}]}return $}(this.serialize(),u).filter(A=>!(A.command in qr));if(0===y.length)return!1;const D=y.filter(A=>!(A.command in Wi));if(D.length>0)throw new Error(`Unimplemented: ${D.map(A=>A.command).join(", ")}.`);return y.forEach(A=>{"setTransition"!==A.command&&this[A.command].apply(this,A.args)}),this.stylesheet=u,!0}addImage(u,y){if(this.getImage(u))return this.fire(new E.ErrorEvent(new Error(`An image named "${u}" already exists.`)));this.imageManager.addImage(u,y),this._afterImageUpdated(u)}updateImage(u,y){this.imageManager.updateImage(u,y)}getImage(u){return this.imageManager.getImage(u)}removeImage(u){if(!this.getImage(u))return this.fire(new E.ErrorEvent(new Error(`An image named "${u}" does not exist.`)));this.imageManager.removeImage(u),this._afterImageUpdated(u)}_afterImageUpdated(u){this._availableImages=this.imageManager.listImages(),this._changedImages[u]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new E.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(u,y,D={}){if(this._checkLoaded(),void 0!==this.sourceCaches[u])throw new Error(`Source "${u}" already exists.`);if(!y.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(y).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(y.type)>=0&&this._validate(E.validateStyle.source,`sources.${u}`,y,null,D))return;this.map&&this.map._collectResourceTiming&&(y.collectResourceTiming=!0);const A=this.sourceCaches[u]=new Bn(u,y,this.dispatcher);A.style=this,A.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:A.serialize(),sourceId:u})),A.onAdd(this.map),this._changed=!0}removeSource(u){if(this._checkLoaded(),void 0===this.sourceCaches[u])throw new Error("There is no source with this ID");for(const D in this._layers)if(this._layers[D].source===u)return this.fire(new E.ErrorEvent(new Error(`Source "${u}" cannot be removed while layer "${D}" is using it.`)));const y=this.sourceCaches[u];delete this.sourceCaches[u],delete this._updatedSources[u],y.fire(new E.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:u})),y.setEventedParent(null),y.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(u,y){if(this._checkLoaded(),void 0===this.sourceCaches[u])throw new Error(`There is no source with this ID=${u}`);const D=this.sourceCaches[u].getSource();if("geojson"!==D.type)throw new Error(`geojsonSource.type is ${D.type}, which is !== 'geojson`);D.setData(y),this._changed=!0}getSource(u){return this.sourceCaches[u]&&this.sourceCaches[u].getSource()}addLayer(u,y,D={}){this._checkLoaded();const A=u.id;if(this.getLayer(A))return void this.fire(new E.ErrorEvent(new Error(`Layer "${A}" already exists on this map.`)));let F;if("custom"===u.type){if(Mi(this,E.validateCustomStyleLayer(u)))return;F=E.createStyleLayer(u)}else{if("object"==typeof u.source&&(this.addSource(A,u.source),u=E.clone$1(u),u=E.extend(u,{source:A})),this._validate(E.validateStyle.layer,`layers.${A}`,u,{arrayIndex:-1},D))return;F=E.createStyleLayer(u),this._validateLayer(F),F.setEventedParent(this,{layer:{id:A}}),this._serializedLayers[F.id]=F.serialize()}const $=y?this._order.indexOf(y):this._order.length;if(y&&-1===$)this.fire(new E.ErrorEvent(new Error(`Cannot add layer "${A}" before non-existing layer "${y}".`)));else{if(this._order.splice($,0,A),this._layerOrderChanged=!0,this._layers[A]=F,this._removedLayers[A]&&F.source&&"custom"!==F.type){const Z=this._removedLayers[A];delete this._removedLayers[A],Z.type!==F.type?this._updatedSources[F.source]="clear":(this._updatedSources[F.source]="reload",this.sourceCaches[F.source].pause())}this._updateLayer(F),F.onAdd&&F.onAdd(this.map)}}moveLayer(u,y){if(this._checkLoaded(),this._changed=!0,!this._layers[u])return void this.fire(new E.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be moved.`)));if(u===y)return;const D=this._order.indexOf(u);this._order.splice(D,1);const A=y?this._order.indexOf(y):this._order.length;y&&-1===A?this.fire(new E.ErrorEvent(new Error(`Cannot move layer "${u}" before non-existing layer "${y}".`))):(this._order.splice(A,0,u),this._layerOrderChanged=!0)}removeLayer(u){this._checkLoaded();const y=this._layers[u];if(!y)return void this.fire(new E.ErrorEvent(new Error(`Cannot remove non-existing layer "${u}".`)));y.setEventedParent(null);const D=this._order.indexOf(u);this._order.splice(D,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[u]=y,delete this._layers[u],delete this._serializedLayers[u],delete this._updatedLayers[u],delete this._updatedPaintProps[u],y.onRemove&&y.onRemove(this.map)}getLayer(u){return this._layers[u]}hasLayer(u){return u in this._layers}setLayerZoomRange(u,y,D){this._checkLoaded();const A=this.getLayer(u);A?A.minzoom===y&&A.maxzoom===D||(null!=y&&(A.minzoom=y),null!=D&&(A.maxzoom=D),this._updateLayer(A)):this.fire(new E.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${u}".`)))}setFilter(u,y,D={}){this._checkLoaded();const A=this.getLayer(u);if(A){if(!Ne(A.filter,y))return null==y?(A.filter=void 0,void this._updateLayer(A)):void(this._validate(E.validateStyle.filter,`layers.${A.id}.filter`,y,null,D)||(A.filter=E.clone$1(y),this._updateLayer(A)))}else this.fire(new E.ErrorEvent(new Error(`Cannot filter non-existing layer "${u}".`)))}getFilter(u){return E.clone$1(this.getLayer(u).filter)}setLayoutProperty(u,y,D,A={}){this._checkLoaded();const F=this.getLayer(u);F?Ne(F.getLayoutProperty(y),D)||(F.setLayoutProperty(y,D,A),this._updateLayer(F)):this.fire(new E.ErrorEvent(new Error(`Cannot style non-existing layer "${u}".`)))}getLayoutProperty(u,y){const D=this.getLayer(u);if(D)return D.getLayoutProperty(y);this.fire(new E.ErrorEvent(new Error(`Cannot get style of non-existing layer "${u}".`)))}setPaintProperty(u,y,D,A={}){this._checkLoaded();const F=this.getLayer(u);F?Ne(F.getPaintProperty(y),D)||(F.setPaintProperty(y,D,A)&&this._updateLayer(F),this._changed=!0,this._updatedPaintProps[u]=!0):this.fire(new E.ErrorEvent(new Error(`Cannot style non-existing layer "${u}".`)))}getPaintProperty(u,y){return this.getLayer(u).getPaintProperty(y)}setFeatureState(u,y){this._checkLoaded();const D=u.source,A=u.sourceLayer,F=this.sourceCaches[D];if(void 0===F)return void this.fire(new E.ErrorEvent(new Error(`The source '${D}' does not exist in the map's style.`)));const $=F.getSource().type;"geojson"===$&&A?this.fire(new E.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==$||A?(void 0===u.id&&this.fire(new E.ErrorEvent(new Error("The feature id parameter must be provided."))),F.setFeatureState(A,u.id,y)):this.fire(new E.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(u,y){this._checkLoaded();const D=u.source,A=this.sourceCaches[D];if(void 0===A)return void this.fire(new E.ErrorEvent(new Error(`The source '${D}' does not exist in the map's style.`)));const F=A.getSource().type,$="vector"===F?u.sourceLayer:void 0;"vector"!==F||$?y&&"string"!=typeof u.id&&"number"!=typeof u.id?this.fire(new E.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):A.removeFeatureState($,u.id,y):this.fire(new E.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(u){this._checkLoaded();const y=u.source,D=u.sourceLayer,A=this.sourceCaches[y];if(void 0!==A)return"vector"!==A.getSource().type||D?(void 0===u.id&&this.fire(new E.ErrorEvent(new Error("The feature id parameter must be provided."))),A.getFeatureState(D,u.id)):void this.fire(new E.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new E.ErrorEvent(new Error(`The source '${y}' does not exist in the map's style.`)))}getTransition(){return E.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return E.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:E.mapObject(this.sourceCaches,u=>u.serialize()),layers:this._serializeLayers(this._order)},u=>void 0!==u)}_updateLayer(u){this._updatedLayers[u.id]=!0,u.source&&!this._updatedSources[u.source]&&"raster"!==this.sourceCaches[u.source].getSource().type&&(this._updatedSources[u.source]="reload",this.sourceCaches[u.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(u){const y=$=>"fill-extrusion"===this._layers[$].type,D={},A=[];for(let $=this._order.length-1;$>=0;$--){const Z=this._order[$];if(y(Z)){D[Z]=$;for(const ee of u){const ie=ee[Z];if(ie)for(const s of ie)A.push(s)}}}A.sort(($,Z)=>Z.intersectionZ-$.intersectionZ);const F=[];for(let $=this._order.length-1;$>=0;$--){const Z=this._order[$];if(y(Z))for(let ee=A.length-1;ee>=0;ee--){const ie=A[ee].feature;if(D[ie.layer.id]<$)break;F.push(ie),A.pop()}else for(const ee of u){const ie=ee[Z];if(ie)for(const s of ie)F.push(s.feature)}}return F}queryRenderedFeatures(u,y,D){y&&y.filter&&this._validate(E.validateStyle.filter,"queryRenderedFeatures.filter",y.filter,null,y);const A={};if(y&&y.layers){if(!Array.isArray(y.layers))return this.fire(new E.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const $ of y.layers){const Z=this._layers[$];if(!Z)return this.fire(new E.ErrorEvent(new Error(`The layer '${$}' does not exist in the map's style and cannot be queried for features.`))),[];A[Z.source]=!0}}const F=[];y.availableImages=this._availableImages;for(const $ in this.sourceCaches)y.layers&&!A[$]||F.push(Bt(this.sourceCaches[$],this._layers,this._serializedLayers,u,y,D));return this.placement&&F.push(function($,Z,ee,ie,s,l,m){const v={},C=l.queryRenderedSymbols(ie),k=[];for(const G of Object.keys(C).map(Number))k.push(m[G]);k.sort(Vt);for(const G of k){const J=G.featureIndex.lookupSymbolFeatures(C[G.bucketInstanceId],Z,G.bucketIndex,G.sourceLayerIndex,s.filter,s.layers,s.availableImages,$);for(const fe in J){const pe=v[fe]=v[fe]||[],ot=J[fe];ot.sort((nt,wt)=>{const Pt=G.featureSortOrder;if(Pt){const $t=Pt.indexOf(nt.featureIndex);return Pt.indexOf(wt.featureIndex)-$t}return wt.featureIndex-nt.featureIndex});for(const nt of ot)pe.push(nt)}}for(const G in v)v[G].forEach(J=>{const fe=J.feature,pe=ee[$[G].source].getFeatureState(fe.layer["source-layer"],fe.id);fe.source=fe.layer.source,fe.layer["source-layer"]&&(fe.sourceLayer=fe.layer["source-layer"]),fe.state=pe});return v}(this._layers,this._serializedLayers,this.sourceCaches,u,y,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(F)}querySourceFeatures(u,y){y&&y.filter&&this._validate(E.validateStyle.filter,"querySourceFeatures.filter",y.filter,null,y);const D=this.sourceCaches[u];return D?function(A,F){const $=A.getRenderableIds().map(ie=>A.getTileByID(ie)),Z=[],ee={};for(let ie=0;ie<$.length;ie++){const s=$[ie],l=s.tileID.canonical.key;ee[l]||(ee[l]=!0,s.querySourceFeatures(Z,F))}return Z}(D,y):[]}addSourceType(u,y,D){return eo.getSourceType(u)?D(new Error(`A source type called "${u}" already exists.`)):(eo.setSourceType(u,y),y.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:u,url:y.workerSourceURL},D):D(null,null))}getLight(){return this.light.getLight()}setLight(u,y={}){this._checkLoaded();const D=this.light.getLight();let A=!1;for(const $ in u)if(!Ne(u[$],D[$])){A=!0;break}if(!A)return;const F={now:E.exported.now(),transition:E.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(u,y),this.light.updateTransitions(F)}_validate(u,y,D,A,F={}){return(!F||!1!==F.validate)&&Mi(this,u.call(E.validateStyle,E.extend({key:y,style:this.serialize(),value:D,styleSpec:E.spec},A)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),E.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const y=this.sourceCaches[u];y.setEventedParent(null),y.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(u){this.sourceCaches[u].clearTiles()}_reloadSource(u){this.sourceCaches[u].resume(),this.sourceCaches[u].reload()}_updateSources(u){for(const y in this.sourceCaches)this.sourceCaches[y].update(u,this.terrain)}_generateCollisionBoxes(){for(const u in this.sourceCaches)this._reloadSource(u)}_updatePlacement(u,y,D,A,F=!1){let $=!1,Z=!1;const ee={};for(const ie of this._order){const s=this._layers[ie];if("symbol"!==s.type)continue;if(!ee[s.source]){const m=this.sourceCaches[s.source];ee[s.source]=m.getRenderableIds(!0).map(v=>m.getTileByID(v)).sort((v,C)=>C.tileID.overscaledZ-v.tileID.overscaledZ||(v.tileID.isLessThan(C.tileID)?-1:1))}const l=this.crossTileSymbolIndex.addLayer(s,ee[s.source],u.center.lng);$=$||l}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((F=F||this._layerOrderChanged||0===D)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(E.exported.now(),u.zoom))&&(this.pauseablePlacement=new Wt(u,this.terrain,this._order,F,y,D,A,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,ee),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(E.exported.now()),Z=!0),$&&this.pauseablePlacement.placement.setStale()),Z||$)for(const ie of this._order){const s=this._layers[ie];"symbol"===s.type&&this.placement.updateLayerOpacities(s,ee[s.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(E.exported.now())}_releaseSymbolFadeTiles(){for(const u in this.sourceCaches)this.sourceCaches[u].releaseSymbolFadeTiles()}getImages(u,y,D){this.imageManager.getImages(y.icons,D),this._updateTilesForChangedImages();const A=this.sourceCaches[y.source];A&&A.setDependencies(y.tileID.key,y.type,y.icons)}getGlyphs(u,y,D){this.glyphManager.getGlyphs(y.stacks,D)}getResource(u,y,D){return E.makeRequest(y,D)}}eo.getSourceType=function(T){return Mt[T]},eo.setSourceType=function(T,u){Mt[T]=u},eo.registerForPluginStateChange=E.registerForPluginStateChange;var Qn="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const zi={prelude:ei("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}"),background:ei("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:ei("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:ei("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:ei("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:ei("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:ei("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:ei("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:ei("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:ei("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:ei("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:ei("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:ei("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:ei("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:ei("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat baseDelta=10.0;float ele=get_elevation(a_centroid);\n#else\nfloat baseDelta=0.0;float ele=0.0;\n#endif\nbase=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:ei("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat baseDelta=10.0;float ele=get_elevation(a_centroid);\n#else\nfloat baseDelta=0.0;float ele=0.0;\n#endif\nbase=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:ei("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ei("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:ei("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:ei("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:ei("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:ei("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:ei("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:ei("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:ei("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:ei("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:ei("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Qn),terrainDepth:ei("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Qn),terrainCoords:ei("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Qn)};function ei(T,u){const y=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,D=u.match(/attribute ([\w]+) ([\w]+)/g),A=T.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),F=u.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),$=F?F.concat(A):A,Z={};return{fragmentSource:T=T.replace(y,(ee,ie,s,l,m)=>(Z[m]=!0,"define"===ie?`\n#ifndef HAS_UNIFORM_u_${m}\nvarying ${s} ${l} ${m};\n#else\nuniform ${s} ${l} u_${m};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${m}\n    ${s} ${l} ${m} = u_${m};\n#endif\n`)),vertexSource:u=u.replace(y,(ee,ie,s,l,m)=>{const v="float"===l?"vec2":"vec4",C=m.match(/color/)?"color":v;return Z[m]?"define"===ie?`\n#ifndef HAS_UNIFORM_u_${m}\nuniform lowp float u_${m}_t;\nattribute ${s} ${v} a_${m};\nvarying ${s} ${l} ${m};\n#else\nuniform ${s} ${l} u_${m};\n#endif\n`:"vec4"===C?`\n#ifndef HAS_UNIFORM_u_${m}\n    ${m} = a_${m};\n#else\n    ${s} ${l} ${m} = u_${m};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${m}\n    ${m} = unpack_mix_${C}(a_${m}, u_${m}_t);\n#else\n    ${s} ${l} ${m} = u_${m};\n#endif\n`:"define"===ie?`\n#ifndef HAS_UNIFORM_u_${m}\nuniform lowp float u_${m}_t;\nattribute ${s} ${v} a_${m};\n#else\nuniform ${s} ${l} u_${m};\n#endif\n`:"vec4"===C?`\n#ifndef HAS_UNIFORM_u_${m}\n    ${s} ${l} ${m} = a_${m};\n#else\n    ${s} ${l} ${m} = u_${m};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${m}\n    ${s} ${l} ${m} = unpack_mix_${C}(a_${m}, u_${m}_t);\n#else\n    ${s} ${l} ${m} = u_${m};\n#endif\n`}),staticAttributes:D,staticUniforms:$}}class La{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(u,y,D,A,F,$,Z,ee,ie){this.context=u;let s=this.boundPaintVertexBuffers.length!==A.length;for(let l=0;!s&&l<A.length;l++)this.boundPaintVertexBuffers[l]!==A[l]&&(s=!0);u.extVertexArrayObject&&this.vao&&this.boundProgram===y&&this.boundLayoutVertexBuffer===D&&!s&&this.boundIndexBuffer===F&&this.boundVertexOffset===$&&this.boundDynamicVertexBuffer===Z&&this.boundDynamicVertexBuffer2===ee&&this.boundDynamicVertexBuffer3===ie?(u.bindVertexArrayOES.set(this.vao),Z&&Z.bind(),F&&F.dynamicDraw&&F.bind(),ee&&ee.bind(),ie&&ie.bind()):this.freshBind(y,D,A,F,$,Z,ee,ie)}freshBind(u,y,D,A,F,$,Z,ee){let ie;const s=u.numAttributes,l=this.context,m=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),ie=0,this.boundProgram=u,this.boundLayoutVertexBuffer=y,this.boundPaintVertexBuffers=D,this.boundIndexBuffer=A,this.boundVertexOffset=F,this.boundDynamicVertexBuffer=$,this.boundDynamicVertexBuffer2=Z,this.boundDynamicVertexBuffer3=ee;else{ie=l.currentNumAttributes||0;for(let v=s;v<ie;v++)m.disableVertexAttribArray(v)}y.enableAttributes(m,u);for(const v of D)v.enableAttributes(m,u);$&&$.enableAttributes(m,u),Z&&Z.enableAttributes(m,u),ee&&ee.enableAttributes(m,u),y.bind(),y.setVertexAttribPointers(m,u,F);for(const v of D)v.bind(),v.setVertexAttribPointers(m,u,F);$&&($.bind(),$.setVertexAttribPointers(m,u,F)),A&&A.bind(),Z&&(Z.bind(),Z.setVertexAttribPointers(m,u,F)),ee&&(ee.bind(),ee.setVertexAttribPointers(m,u,F)),l.currentNumAttributes=s}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function rs(T){const u=[];for(let y=0;y<T.length;y++){if(null===T[y])continue;const D=T[y].split(" ");u.push(D.pop())}return u}class Cs{constructor(u,y,D,A,F,$,Z){const ee=u.gl;this.program=ee.createProgram();const ie=rs(D.staticAttributes),s=A?A.getBinderAttributes():[],l=ie.concat(s),m=zi.prelude.staticUniforms?rs(zi.prelude.staticUniforms):[],v=D.staticUniforms?rs(D.staticUniforms):[],C=A?A.getBinderUniforms():[],k=m.concat(v).concat(C),G=[];for(const Pt of k)G.indexOf(Pt)<0&&G.push(Pt);const J=A?A.defines():[];$&&J.push("#define OVERDRAW_INSPECTOR;"),Z&&J.push("#define TERRAIN3D;");const fe=J.concat(zi.prelude.fragmentSource,D.fragmentSource).join("\n"),pe=J.concat(zi.prelude.vertexSource,D.vertexSource).join("\n"),ot=ee.createShader(ee.FRAGMENT_SHADER);if(ee.isContextLost())return void(this.failedToCreate=!0);ee.shaderSource(ot,fe),ee.compileShader(ot),ee.attachShader(this.program,ot);const nt=ee.createShader(ee.VERTEX_SHADER);if(ee.isContextLost())return void(this.failedToCreate=!0);ee.shaderSource(nt,pe),ee.compileShader(nt),ee.attachShader(this.program,nt),this.attributes={};const wt={};this.numAttributes=l.length;for(let Pt=0;Pt<this.numAttributes;Pt++)l[Pt]&&(ee.bindAttribLocation(this.program,Pt,l[Pt]),this.attributes[l[Pt]]=Pt);ee.linkProgram(this.program),ee.deleteShader(nt),ee.deleteShader(ot);for(let Pt=0;Pt<G.length;Pt++){const $t=G[Pt];if($t&&!wt[$t]){const Ft=ee.getUniformLocation(this.program,$t);Ft&&(wt[$t]=Ft)}}var Pt,$t;this.fixedUniforms=F(u,wt),this.terrainUniforms={u_depth:new E.Uniform1i(Pt=u,($t=wt).u_depth),u_terrain:new E.Uniform1i(Pt,$t.u_terrain),u_terrain_dim:new E.Uniform1f(Pt,$t.u_terrain_dim),u_terrain_matrix:new E.UniformMatrix4f(Pt,$t.u_terrain_matrix),u_terrain_unpack:new E.Uniform4f(Pt,$t.u_terrain_unpack),u_terrain_offset:new E.Uniform1f(Pt,$t.u_terrain_offset),u_terrain_exaggeration:new E.Uniform1f(Pt,$t.u_terrain_exaggeration)},this.binderUniforms=A?A.getUniforms(u,wt):[]}draw(u,y,D,A,F,$,Z,ee,ie,s,l,m,v,C,k,G,J,fe){const pe=u.gl;if(this.failedToCreate)return;if(u.program.set(this.program),u.setDepthMode(D),u.setStencilMode(A),u.setColorMode(F),u.setCullFace($),ee){u.activeTexture.set(pe.TEXTURE2),pe.bindTexture(pe.TEXTURE_2D,ee.depthTexture),u.activeTexture.set(pe.TEXTURE3),pe.bindTexture(pe.TEXTURE_2D,ee.texture);for(const nt in this.terrainUniforms)this.terrainUniforms[nt].set(ee[nt])}for(const nt in this.fixedUniforms)this.fixedUniforms[nt].set(Z[nt]);k&&k.setUniforms(u,this.binderUniforms,v,{zoom:C});let ot=0;switch(y){case pe.LINES:ot=2;break;case pe.TRIANGLES:ot=3;break;case pe.LINE_STRIP:ot=1}for(const nt of m.get()){const wt=nt.vaos||(nt.vaos={});(wt[ie]||(wt[ie]=new La)).bind(u,this,s,k?k.getPaintVertexBuffers():[],l,nt.vertexOffset,G,J,fe),pe.drawElements(y,nt.primitiveLength*ot,pe.UNSIGNED_SHORT,nt.primitiveOffset*ot*2)}}}function hc(T,u,y){const D=1/Lr(y,1,u.transform.tileZoom),A=Math.pow(2,y.tileID.overscaledZ),F=y.tileSize*Math.pow(2,u.transform.tileZoom)/A,$=F*(y.tileID.canonical.x+y.tileID.wrap*A),Z=F*y.tileID.canonical.y;return{u_image:0,u_texsize:y.imageAtlasTexture.size,u_scale:[D,T.fromScale,T.toScale],u_fade:T.t,u_pixel_coord_upper:[$>>16,Z>>16],u_pixel_coord_lower:[65535&$,65535&Z]}}const ci=(T,u,y,D)=>{const A=u.style.light,F=A.properties.get("position"),$=[F.x,F.y,F.z],Z=E.create$1();"viewport"===A.properties.get("anchor")&&E.fromRotation(Z,-u.transform.angle),E.transformMat3($,$,Z);const ee=A.properties.get("color");return{u_matrix:T,u_lightpos:$,u_lightintensity:A.properties.get("intensity"),u_lightcolor:[ee.r,ee.g,ee.b],u_vertical_gradient:+y,u_opacity:D}},Vc=(T,u,y,D,A,F,$)=>E.extend(ci(T,u,y,D),hc(F,u,$),{u_height_factor:-Math.pow(2,A.overscaledZ)/$.tileSize/8}),Us=T=>({u_matrix:T}),dr=(T,u,y,D)=>E.extend(Us(T),hc(y,u,D)),Xi=(T,u)=>({u_matrix:T,u_world:u}),An=(T,u,y,D,A)=>E.extend(dr(T,u,y,D),{u_world:A}),Xa=(T,u,y,D)=>{const A=T.transform;let F,$;if("map"===D.paint.get("circle-pitch-alignment")){const Z=Lr(y,1,A.zoom);F=!0,$=[Z,Z]}else F=!1,$=A.pixelsToGLUnits;return{u_camera_to_center_distance:A.cameraToCenterDistance,u_scale_with_map:+("map"===D.paint.get("circle-pitch-scale")),u_matrix:T.translatePosMatrix(u.posMatrix,y,D.paint.get("circle-translate"),D.paint.get("circle-translate-anchor")),u_pitch_with_map:+F,u_device_pixel_ratio:T.pixelRatio,u_extrude_scale:$}},ms=(T,u,y)=>{const D=Lr(y,1,u.zoom),A=Math.pow(2,u.zoom-y.tileID.overscaledZ),F=y.tileID.overscaleFactor();return{u_matrix:T,u_camera_to_center_distance:u.cameraToCenterDistance,u_pixels_to_tile_units:D,u_extrude_scale:[u.pixelsToGLUnits[0]/(D*A),u.pixelsToGLUnits[1]/(D*A)],u_overscale_factor:F}},ir=(T,u,y=1)=>({u_matrix:T,u_color:u,u_overlay:0,u_overlay_scale:y}),Ji=T=>({u_matrix:T}),ht=(T,u,y,D)=>({u_matrix:T,u_extrude_scale:Lr(u,1,y),u_intensity:D});function Jt(T,u){const y=Math.pow(2,u.canonical.z),D=u.canonical.y;return[new E.MercatorCoordinate(0,D/y).toLngLat().lat,new E.MercatorCoordinate(0,(D+1)/y).toLngLat().lat]}const ft=(T,u,y,D)=>{const A=T.transform;return{u_matrix:vr(T,u,y,D),u_ratio:1/Lr(u,1,A.zoom),u_device_pixel_ratio:T.pixelRatio,u_units_to_pixels:[1/A.pixelsToGLUnits[0],1/A.pixelsToGLUnits[1]]}},on=(T,u,y,D,A)=>E.extend(ft(T,u,y,A),{u_image:0,u_image_height:D}),gn=(T,u,y,D,A)=>{const F=T.transform,$=Ai(u,F);return{u_matrix:vr(T,u,y,A),u_texsize:u.imageAtlasTexture.size,u_ratio:1/Lr(u,1,F.zoom),u_device_pixel_ratio:T.pixelRatio,u_image:0,u_scale:[$,D.fromScale,D.toScale],u_fade:D.t,u_units_to_pixels:[1/F.pixelsToGLUnits[0],1/F.pixelsToGLUnits[1]]}},zn=(T,u,y,D,A,F)=>{const $=T.lineAtlas,Z=Ai(u,T.transform),ee="round"===y.layout.get("line-cap"),ie=$.getDash(D.from,ee),s=$.getDash(D.to,ee),l=ie.width*A.fromScale,m=s.width*A.toScale;return E.extend(ft(T,u,y,F),{u_patternscale_a:[Z/l,-ie.height/2],u_patternscale_b:[Z/m,-s.height/2],u_sdfgamma:$.width/(256*Math.min(l,m)*T.pixelRatio)/2,u_image:0,u_tex_y_a:ie.y,u_tex_y_b:s.y,u_mix:A.t})};function Ai(T,u){return 1/Lr(T,1,u.tileZoom)}function vr(T,u,y,D){return T.translatePosMatrix(D?D.posMatrix:u.tileID.posMatrix,u,y.paint.get("line-translate"),y.paint.get("line-translate-anchor"))}const Hi=(T,u,y,D,A)=>{return{u_matrix:T,u_tl_parent:u,u_scale_parent:y,u_buffer_scale:1,u_fade_t:D.mix,u_opacity:D.opacity*A.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:A.paint.get("raster-brightness-min"),u_brightness_high:A.paint.get("raster-brightness-max"),u_saturation_factor:($=A.paint.get("raster-saturation"),$>0?1-1/(1.001-$):-$),u_contrast_factor:(F=A.paint.get("raster-contrast"),F>0?1/(1-F):1+F),u_spin_weights:tr(A.paint.get("raster-hue-rotate"))};var F,$};function tr(T){T*=Math.PI/180;const u=Math.sin(T),y=Math.cos(T);return[(2*y+1)/3,(-Math.sqrt(3)*u-y+1)/3,(Math.sqrt(3)*u-y+1)/3]}const qi=(T,u,y,D,A,F,$,Z,ee,ie)=>{const s=A.transform;return{u_is_size_zoom_constant:+("constant"===T||"source"===T),u_is_size_feature_constant:+("constant"===T||"camera"===T),u_size_t:u?u.uSizeT:0,u_size:u?u.uSize:0,u_camera_to_center_distance:s.cameraToCenterDistance,u_pitch:s.pitch/360*2*Math.PI,u_rotate_symbol:+y,u_aspect_ratio:s.width/s.height,u_fade_change:A.options.fadeDuration?A.symbolFadeChange:1,u_matrix:F,u_label_plane_matrix:$,u_coord_matrix:Z,u_is_text:+ee,u_pitch_with_map:+D,u_texsize:ie,u_texture:0}},fo=(T,u,y,D,A,F,$,Z,ee,ie,s)=>{const l=A.transform;return E.extend(qi(T,u,y,D,A,F,$,Z,ee,ie),{u_gamma_scale:D?Math.cos(l._pitch)*l.cameraToCenterDistance:1,u_device_pixel_ratio:A.pixelRatio,u_is_halo:+s})},Nd=(T,u,y,D,A,F,$,Z,ee,ie)=>E.extend(fo(T,u,y,D,A,F,$,Z,!0,ee,!0),{u_texsize_icon:ie,u_texture_icon:1}),po=(T,u,y)=>({u_matrix:T,u_opacity:u,u_color:y}),Ea=(T,u,y,D,A,F)=>E.extend(function($,Z,ee,ie){const s=ee.imageManager.getPattern($.from.toString()),l=ee.imageManager.getPattern($.to.toString()),{width:m,height:v}=ee.imageManager.getPixelSize(),C=Math.pow(2,ie.tileID.overscaledZ),k=ie.tileSize*Math.pow(2,ee.transform.tileZoom)/C,G=k*(ie.tileID.canonical.x+ie.tileID.wrap*C),J=k*ie.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:s.tl,u_pattern_br_a:s.br,u_pattern_tl_b:l.tl,u_pattern_br_b:l.br,u_texsize:[m,v],u_mix:Z.t,u_pattern_size_a:s.displaySize,u_pattern_size_b:l.displaySize,u_scale_a:Z.fromScale,u_scale_b:Z.toScale,u_tile_units_to_pixels:1/Lr(ie,1,ee.transform.tileZoom),u_pixel_coord_upper:[G>>16,J>>16],u_pixel_coord_lower:[65535&G,65535&J]}}(D,F,y,A),{u_matrix:T,u_opacity:u}),ka={fillExtrusion:(T,u)=>({u_matrix:new E.UniformMatrix4f(T,u.u_matrix),u_lightpos:new E.Uniform3f(T,u.u_lightpos),u_lightintensity:new E.Uniform1f(T,u.u_lightintensity),u_lightcolor:new E.Uniform3f(T,u.u_lightcolor),u_vertical_gradient:new E.Uniform1f(T,u.u_vertical_gradient),u_opacity:new E.Uniform1f(T,u.u_opacity)}),fillExtrusionPattern:(T,u)=>({u_matrix:new E.UniformMatrix4f(T,u.u_matrix),u_lightpos:new E.Uniform3f(T,u.u_lightpos),u_lightintensity:new E.Uniform1f(T,u.u_lightintensity),u_lightcolor:new E.Uniform3f(T,u.u_lightcolor),u_vertical_gradient:new E.Uniform1f(T,u.u_vertical_gradient),u_height_factor:new E.Uniform1f(T,u.u_height_factor),u_image:new E.Uniform1i(T,u.u_image),u_texsize:new E.Uniform2f(T,u.u_texsize),u_pixel_coord_upper:new E.Uniform2f(T,u.u_pixel_coord_upper),u_pixel_coord_lower:new E.Uniform2f(T,u.u_pixel_coord_lower),u_scale:new E.Uniform3f(T,u.u_scale),u_fade:new E.Uniform1f(T,u.u_fade),u_opacity:new E.Uniform1f(T,u.u_opacity)}),fill:(T,u)=>({u_matrix:new E.UniformMatrix4f(T,u.u_matrix)}),fillPattern:(T,u)=>({u_matrix:new E.UniformMatrix4f(T,u.u_matrix),u_image:new E.Uniform1i(T,u.u_image),u_texsize:new E.Uniform2f(T,u.u_texsize),u_pixel_coord_upper:new E.Uniform2f(T,u.u_pixel_coord_upper),u_pixel_coord_lower:new E.Uniform2f(T,u.u_pixel_coord_lower),u_scale:new E.Uniform3f(T,u.u_scale),u_fade:new E.Uniform1f(T,u.u_fade)}),fillOutline:(T,u)=>({u_matrix:new E.UniformMatrix4f(T,u.u_matrix),u_world:new E.Uniform2f(T,u.u_world)}),fillOutlinePattern:(T,u)=>({u_matrix:new E.UniformMatrix4f(T,u.u_matrix),u_world:new E.Uniform2f(T,u.u_world),u_image:new E.Uniform1i(T,u.u_image),u_texsize:new E.Uniform2f(T,u.u_texsize),u_pixel_coord_upper:new E.Uniform2f(T,u.u_pixel_coord_upper),u_pixel_coord_lower:new E.Uniform2f(T,u.u_pixel_coord_lower),u_scale:new E.Uniform3f(T,u.u_scale),u_fade:new E.Uniform1f(T,u.u_fade)}),circle:(T,u)=>({u_camera_to_center_distance:new E.Uniform1f(T,u.u_camera_to_center_distance),u_scale_with_map:new E.Uniform1i(T,u.u_scale_with_map),u_pitch_with_map:new E.Uniform1i(T,u.u_pitch_with_map),u_extrude_scale:new E.Uniform2f(T,u.u_extrude_scale),u_device_pixel_ratio:new E.Uniform1f(T,u.u_device_pixel_ratio),u_matrix:new E.UniformMatrix4f(T,u.u_matrix)}),collisionBox:(T,u)=>({u_matrix:new E.UniformMatrix4f(T,u.u_matrix),u_camera_to_center_distance:new E.Uniform1f(T,u.u_camera_to_center_distance),u_pixels_to_tile_units:new E.Uniform1f(T,u.u_pixels_to_tile_units),u_extrude_scale:new E.Uniform2f(T,u.u_extrude_scale),u_overscale_factor:new E.Uniform1f(T,u.u_overscale_factor)}),collisionCircle:(T,u)=>({u_matrix:new E.UniformMatrix4f(T,u.u_matrix),u_inv_matrix:new E.UniformMatrix4f(T,u.u_inv_matrix),u_camera_to_center_distance:new E.Uniform1f(T,u.u_camera_to_center_distance),u_viewport_size:new E.Uniform2f(T,u.u_viewport_size)}),debug:(T,u)=>({u_color:new E.UniformColor(T,u.u_color),u_matrix:new E.UniformMatrix4f(T,u.u_matrix),u_overlay:new E.Uniform1i(T,u.u_overlay),u_overlay_scale:new E.Uniform1f(T,u.u_overlay_scale)}),clippingMask:(T,u)=>({u_matrix:new E.UniformMatrix4f(T,u.u_matrix)}),heatmap:(T,u)=>({u_extrude_scale:new E.Uniform1f(T,u.u_extrude_scale),u_intensity:new E.Uniform1f(T,u.u_intensity),u_matrix:new E.UniformMatrix4f(T,u.u_matrix)}),heatmapTexture:(T,u)=>({u_matrix:new E.UniformMatrix4f(T,u.u_matrix),u_world:new E.Uniform2f(T,u.u_world),u_image:new E.Uniform1i(T,u.u_image),u_color_ramp:new E.Uniform1i(T,u.u_color_ramp),u_opacity:new E.Uniform1f(T,u.u_opacity)}),hillshade:(T,u)=>({u_matrix:new E.UniformMatrix4f(T,u.u_matrix),u_image:new E.Uniform1i(T,u.u_image),u_latrange:new E.Uniform2f(T,u.u_latrange),u_light:new E.Uniform2f(T,u.u_light),u_shadow:new E.UniformColor(T,u.u_shadow),u_highlight:new E.UniformColor(T,u.u_highlight),u_accent:new E.UniformColor(T,u.u_accent)}),hillshadePrepare:(T,u)=>({u_matrix:new E.UniformMatrix4f(T,u.u_matrix),u_image:new E.Uniform1i(T,u.u_image),u_dimension:new E.Uniform2f(T,u.u_dimension),u_zoom:new E.Uniform1f(T,u.u_zoom),u_unpack:new E.Uniform4f(T,u.u_unpack)}),line:(T,u)=>({u_matrix:new E.UniformMatrix4f(T,u.u_matrix),u_ratio:new E.Uniform1f(T,u.u_ratio),u_device_pixel_ratio:new E.Uniform1f(T,u.u_device_pixel_ratio),u_units_to_pixels:new E.Uniform2f(T,u.u_units_to_pixels)}),lineGradient:(T,u)=>({u_matrix:new E.UniformMatrix4f(T,u.u_matrix),u_ratio:new E.Uniform1f(T,u.u_ratio),u_device_pixel_ratio:new E.Uniform1f(T,u.u_device_pixel_ratio),u_units_to_pixels:new E.Uniform2f(T,u.u_units_to_pixels),u_image:new E.Uniform1i(T,u.u_image),u_image_height:new E.Uniform1f(T,u.u_image_height)}),linePattern:(T,u)=>({u_matrix:new E.UniformMatrix4f(T,u.u_matrix),u_texsize:new E.Uniform2f(T,u.u_texsize),u_ratio:new E.Uniform1f(T,u.u_ratio),u_device_pixel_ratio:new E.Uniform1f(T,u.u_device_pixel_ratio),u_image:new E.Uniform1i(T,u.u_image),u_units_to_pixels:new E.Uniform2f(T,u.u_units_to_pixels),u_scale:new E.Uniform3f(T,u.u_scale),u_fade:new E.Uniform1f(T,u.u_fade)}),lineSDF:(T,u)=>({u_matrix:new E.UniformMatrix4f(T,u.u_matrix),u_ratio:new E.Uniform1f(T,u.u_ratio),u_device_pixel_ratio:new E.Uniform1f(T,u.u_device_pixel_ratio),u_units_to_pixels:new E.Uniform2f(T,u.u_units_to_pixels),u_patternscale_a:new E.Uniform2f(T,u.u_patternscale_a),u_patternscale_b:new E.Uniform2f(T,u.u_patternscale_b),u_sdfgamma:new E.Uniform1f(T,u.u_sdfgamma),u_image:new E.Uniform1i(T,u.u_image),u_tex_y_a:new E.Uniform1f(T,u.u_tex_y_a),u_tex_y_b:new E.Uniform1f(T,u.u_tex_y_b),u_mix:new E.Uniform1f(T,u.u_mix)}),raster:(T,u)=>({u_matrix:new E.UniformMatrix4f(T,u.u_matrix),u_tl_parent:new E.Uniform2f(T,u.u_tl_parent),u_scale_parent:new E.Uniform1f(T,u.u_scale_parent),u_buffer_scale:new E.Uniform1f(T,u.u_buffer_scale),u_fade_t:new E.Uniform1f(T,u.u_fade_t),u_opacity:new E.Uniform1f(T,u.u_opacity),u_image0:new E.Uniform1i(T,u.u_image0),u_image1:new E.Uniform1i(T,u.u_image1),u_brightness_low:new E.Uniform1f(T,u.u_brightness_low),u_brightness_high:new E.Uniform1f(T,u.u_brightness_high),u_saturation_factor:new E.Uniform1f(T,u.u_saturation_factor),u_contrast_factor:new E.Uniform1f(T,u.u_contrast_factor),u_spin_weights:new E.Uniform3f(T,u.u_spin_weights)}),symbolIcon:(T,u)=>({u_is_size_zoom_constant:new E.Uniform1i(T,u.u_is_size_zoom_constant),u_is_size_feature_constant:new E.Uniform1i(T,u.u_is_size_feature_constant),u_size_t:new E.Uniform1f(T,u.u_size_t),u_size:new E.Uniform1f(T,u.u_size),u_camera_to_center_distance:new E.Uniform1f(T,u.u_camera_to_center_distance),u_pitch:new E.Uniform1f(T,u.u_pitch),u_rotate_symbol:new E.Uniform1i(T,u.u_rotate_symbol),u_aspect_ratio:new E.Uniform1f(T,u.u_aspect_ratio),u_fade_change:new E.Uniform1f(T,u.u_fade_change),u_matrix:new E.UniformMatrix4f(T,u.u_matrix),u_label_plane_matrix:new E.UniformMatrix4f(T,u.u_label_plane_matrix),u_coord_matrix:new E.UniformMatrix4f(T,u.u_coord_matrix),u_is_text:new E.Uniform1i(T,u.u_is_text),u_pitch_with_map:new E.Uniform1i(T,u.u_pitch_with_map),u_texsize:new E.Uniform2f(T,u.u_texsize),u_texture:new E.Uniform1i(T,u.u_texture)}),symbolSDF:(T,u)=>({u_is_size_zoom_constant:new E.Uniform1i(T,u.u_is_size_zoom_constant),u_is_size_feature_constant:new E.Uniform1i(T,u.u_is_size_feature_constant),u_size_t:new E.Uniform1f(T,u.u_size_t),u_size:new E.Uniform1f(T,u.u_size),u_camera_to_center_distance:new E.Uniform1f(T,u.u_camera_to_center_distance),u_pitch:new E.Uniform1f(T,u.u_pitch),u_rotate_symbol:new E.Uniform1i(T,u.u_rotate_symbol),u_aspect_ratio:new E.Uniform1f(T,u.u_aspect_ratio),u_fade_change:new E.Uniform1f(T,u.u_fade_change),u_matrix:new E.UniformMatrix4f(T,u.u_matrix),u_label_plane_matrix:new E.UniformMatrix4f(T,u.u_label_plane_matrix),u_coord_matrix:new E.UniformMatrix4f(T,u.u_coord_matrix),u_is_text:new E.Uniform1i(T,u.u_is_text),u_pitch_with_map:new E.Uniform1i(T,u.u_pitch_with_map),u_texsize:new E.Uniform2f(T,u.u_texsize),u_texture:new E.Uniform1i(T,u.u_texture),u_gamma_scale:new E.Uniform1f(T,u.u_gamma_scale),u_device_pixel_ratio:new E.Uniform1f(T,u.u_device_pixel_ratio),u_is_halo:new E.Uniform1i(T,u.u_is_halo)}),symbolTextAndIcon:(T,u)=>({u_is_size_zoom_constant:new E.Uniform1i(T,u.u_is_size_zoom_constant),u_is_size_feature_constant:new E.Uniform1i(T,u.u_is_size_feature_constant),u_size_t:new E.Uniform1f(T,u.u_size_t),u_size:new E.Uniform1f(T,u.u_size),u_camera_to_center_distance:new E.Uniform1f(T,u.u_camera_to_center_distance),u_pitch:new E.Uniform1f(T,u.u_pitch),u_rotate_symbol:new E.Uniform1i(T,u.u_rotate_symbol),u_aspect_ratio:new E.Uniform1f(T,u.u_aspect_ratio),u_fade_change:new E.Uniform1f(T,u.u_fade_change),u_matrix:new E.UniformMatrix4f(T,u.u_matrix),u_label_plane_matrix:new E.UniformMatrix4f(T,u.u_label_plane_matrix),u_coord_matrix:new E.UniformMatrix4f(T,u.u_coord_matrix),u_is_text:new E.Uniform1i(T,u.u_is_text),u_pitch_with_map:new E.Uniform1i(T,u.u_pitch_with_map),u_texsize:new E.Uniform2f(T,u.u_texsize),u_texsize_icon:new E.Uniform2f(T,u.u_texsize_icon),u_texture:new E.Uniform1i(T,u.u_texture),u_texture_icon:new E.Uniform1i(T,u.u_texture_icon),u_gamma_scale:new E.Uniform1f(T,u.u_gamma_scale),u_device_pixel_ratio:new E.Uniform1f(T,u.u_device_pixel_ratio),u_is_halo:new E.Uniform1i(T,u.u_is_halo)}),background:(T,u)=>({u_matrix:new E.UniformMatrix4f(T,u.u_matrix),u_opacity:new E.Uniform1f(T,u.u_opacity),u_color:new E.UniformColor(T,u.u_color)}),backgroundPattern:(T,u)=>({u_matrix:new E.UniformMatrix4f(T,u.u_matrix),u_opacity:new E.Uniform1f(T,u.u_opacity),u_image:new E.Uniform1i(T,u.u_image),u_pattern_tl_a:new E.Uniform2f(T,u.u_pattern_tl_a),u_pattern_br_a:new E.Uniform2f(T,u.u_pattern_br_a),u_pattern_tl_b:new E.Uniform2f(T,u.u_pattern_tl_b),u_pattern_br_b:new E.Uniform2f(T,u.u_pattern_br_b),u_texsize:new E.Uniform2f(T,u.u_texsize),u_mix:new E.Uniform1f(T,u.u_mix),u_pattern_size_a:new E.Uniform2f(T,u.u_pattern_size_a),u_pattern_size_b:new E.Uniform2f(T,u.u_pattern_size_b),u_scale_a:new E.Uniform1f(T,u.u_scale_a),u_scale_b:new E.Uniform1f(T,u.u_scale_b),u_pixel_coord_upper:new E.Uniform2f(T,u.u_pixel_coord_upper),u_pixel_coord_lower:new E.Uniform2f(T,u.u_pixel_coord_lower),u_tile_units_to_pixels:new E.Uniform1f(T,u.u_tile_units_to_pixels)}),terrain:(T,u)=>({u_matrix:new E.UniformMatrix4f(T,u.u_matrix),u_texture:new E.Uniform1i(T,u.u_texture)}),terrainDepth:(T,u)=>({u_matrix:new E.UniformMatrix4f(T,u.u_matrix)}),terrainCoords:(T,u)=>({u_matrix:new E.UniformMatrix4f(T,u.u_matrix),u_texture:new E.Uniform1i(T,u.u_texture),u_terrain_coords_id:new E.Uniform1f(T,u.u_terrain_coords_id)})};class Nr{constructor(u,y,D){this.context=u;const A=u.gl;this.buffer=A.createBuffer(),this.dynamicDraw=Boolean(D),this.context.unbindVAO(),u.bindElementBuffer.set(this.buffer),A.bufferData(A.ELEMENT_ARRAY_BUFFER,y.arrayBuffer,this.dynamicDraw?A.DYNAMIC_DRAW:A.STATIC_DRAW),this.dynamicDraw||delete y.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(u){const y=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),y.bufferSubData(y.ELEMENT_ARRAY_BUFFER,0,u.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const fc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class so{constructor(u,y,D,A){this.length=y.length,this.attributes=D,this.itemSize=y.bytesPerElement,this.dynamicDraw=A,this.context=u;const F=u.gl;this.buffer=F.createBuffer(),u.bindVertexBuffer.set(this.buffer),F.bufferData(F.ARRAY_BUFFER,y.arrayBuffer,this.dynamicDraw?F.DYNAMIC_DRAW:F.STATIC_DRAW),this.dynamicDraw||delete y.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(u){if(u.length!==this.length)throw new Error(`Length of new data is ${u.length}, which doesn't match current length of ${this.length}`);const y=this.context.gl;this.bind(),y.bufferSubData(y.ARRAY_BUFFER,0,u.arrayBuffer)}enableAttributes(u,y){for(let D=0;D<this.attributes.length;D++){const A=y.attributes[this.attributes[D].name];void 0!==A&&u.enableVertexAttribArray(A)}}setVertexAttribPointers(u,y,D){for(let A=0;A<this.attributes.length;A++){const F=this.attributes[A],$=y.attributes[F.name];void 0!==$&&u.vertexAttribPointer($,F.components,u[fc[F.type]],!1,this.itemSize,F.offset+this.itemSize*(D||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Xr{constructor(u){this.gl=u.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(u){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Cu extends Xr{getDefault(){return E.Color.transparent}set(u){const y=this.current;(u.r!==y.r||u.g!==y.g||u.b!==y.b||u.a!==y.a||this.dirty)&&(this.gl.clearColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class os extends Xr{getDefault(){return 1}set(u){(u!==this.current||this.dirty)&&(this.gl.clearDepth(u),this.current=u,this.dirty=!1)}}class Ws extends Xr{getDefault(){return 0}set(u){(u!==this.current||this.dirty)&&(this.gl.clearStencil(u),this.current=u,this.dirty=!1)}}class pc extends Xr{getDefault(){return[!0,!0,!0,!0]}set(u){const y=this.current;(u[0]!==y[0]||u[1]!==y[1]||u[2]!==y[2]||u[3]!==y[3]||this.dirty)&&(this.gl.colorMask(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class El extends Xr{getDefault(){return!0}set(u){(u!==this.current||this.dirty)&&(this.gl.depthMask(u),this.current=u,this.dirty=!1)}}class Vs extends Xr{getDefault(){return 255}set(u){(u!==this.current||this.dirty)&&(this.gl.stencilMask(u),this.current=u,this.dirty=!1)}}class mc extends Xr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(u){const y=this.current;(u.func!==y.func||u.ref!==y.ref||u.mask!==y.mask||this.dirty)&&(this.gl.stencilFunc(u.func,u.ref,u.mask),this.current=u,this.dirty=!1)}}class tc extends Xr{getDefault(){const u=this.gl;return[u.KEEP,u.KEEP,u.KEEP]}set(u){const y=this.current;(u[0]!==y[0]||u[1]!==y[1]||u[2]!==y[2]||this.dirty)&&(this.gl.stencilOp(u[0],u[1],u[2]),this.current=u,this.dirty=!1)}}class ss extends Xr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const y=this.gl;u?y.enable(y.STENCIL_TEST):y.disable(y.STENCIL_TEST),this.current=u,this.dirty=!1}}class Bd extends Xr{getDefault(){return[0,1]}set(u){const y=this.current;(u[0]!==y[0]||u[1]!==y[1]||this.dirty)&&(this.gl.depthRange(u[0],u[1]),this.current=u,this.dirty=!1)}}class Cl extends Xr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const y=this.gl;u?y.enable(y.DEPTH_TEST):y.disable(y.DEPTH_TEST),this.current=u,this.dirty=!1}}class Kr extends Xr{getDefault(){return this.gl.LESS}set(u){(u!==this.current||this.dirty)&&(this.gl.depthFunc(u),this.current=u,this.dirty=!1)}}class Ss extends Xr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const y=this.gl;u?y.enable(y.BLEND):y.disable(y.BLEND),this.current=u,this.dirty=!1}}class Uu extends Xr{getDefault(){const u=this.gl;return[u.ONE,u.ZERO]}set(u){const y=this.current;(u[0]!==y[0]||u[1]!==y[1]||this.dirty)&&(this.gl.blendFunc(u[0],u[1]),this.current=u,this.dirty=!1)}}class zd extends Xr{getDefault(){return E.Color.transparent}set(u){const y=this.current;(u.r!==y.r||u.g!==y.g||u.b!==y.b||u.a!==y.a||this.dirty)&&(this.gl.blendColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class Gc extends Xr{getDefault(){return this.gl.FUNC_ADD}set(u){(u!==this.current||this.dirty)&&(this.gl.blendEquation(u),this.current=u,this.dirty=!1)}}class bd extends Xr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const y=this.gl;u?y.enable(y.CULL_FACE):y.disable(y.CULL_FACE),this.current=u,this.dirty=!1}}class Vu extends Xr{getDefault(){return this.gl.BACK}set(u){(u!==this.current||this.dirty)&&(this.gl.cullFace(u),this.current=u,this.dirty=!1)}}class Ka extends Xr{getDefault(){return this.gl.CCW}set(u){(u!==this.current||this.dirty)&&(this.gl.frontFace(u),this.current=u,this.dirty=!1)}}class ou extends Xr{getDefault(){return null}set(u){(u!==this.current||this.dirty)&&(this.gl.useProgram(u),this.current=u,this.dirty=!1)}}class Ds extends Xr{getDefault(){return this.gl.TEXTURE0}set(u){(u!==this.current||this.dirty)&&(this.gl.activeTexture(u),this.current=u,this.dirty=!1)}}class su extends Xr{getDefault(){const u=this.gl;return[0,0,u.drawingBufferWidth,u.drawingBufferHeight]}set(u){const y=this.current;(u[0]!==y[0]||u[1]!==y[1]||u[2]!==y[2]||u[3]!==y[3]||this.dirty)&&(this.gl.viewport(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class Sl extends Xr{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const y=this.gl;y.bindFramebuffer(y.FRAMEBUFFER,u),this.current=u,this.dirty=!1}}class au extends Xr{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const y=this.gl;y.bindRenderbuffer(y.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class as extends Xr{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const y=this.gl;y.bindTexture(y.TEXTURE_2D,u),this.current=u,this.dirty=!1}}class Ci extends Xr{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const y=this.gl;y.bindBuffer(y.ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class Su extends Xr{getDefault(){return null}set(u){const y=this.gl;y.bindBuffer(y.ELEMENT_ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class lu extends Xr{constructor(u){super(u),this.vao=u.extVertexArrayObject}getDefault(){return null}set(u){this.vao&&(u!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(u),this.current=u,this.dirty=!1)}}class Ms extends Xr{getDefault(){return 4}set(u){if(u===this.current&&!this.dirty)return;const y=this.gl;y.pixelStorei(y.UNPACK_ALIGNMENT,u),this.current=u,this.dirty=!1}}class hl extends Xr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const y=this.gl;y.pixelStorei(y.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u),this.current=u,this.dirty=!1}}class Sc extends Xr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const y=this.gl;y.pixelStorei(y.UNPACK_FLIP_Y_WEBGL,u),this.current=u,this.dirty=!1}}class ra extends Xr{constructor(u,y){super(u),this.context=u,this.parent=y}getDefault(){return null}}class gc extends ra{setDirty(){this.dirty=!0}set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const y=this.gl;y.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,u,0),this.current=u,this.dirty=!1}}class Gu extends ra{set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const y=this.gl;y.framebufferRenderbuffer(y.FRAMEBUFFER,y.DEPTH_ATTACHMENT,y.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class ji{constructor(u,y,D,A){this.context=u,this.width=y,this.height=D;const F=u.gl,$=this.framebuffer=F.createFramebuffer();if(this.colorAttachment=new gc(u,$),A&&(this.depthAttachment=new Gu(u,$)),F.checkFramebufferStatus(F.FRAMEBUFFER)!==F.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const u=this.context.gl,y=this.colorAttachment.get();if(y&&u.deleteTexture(y),this.depthAttachment){const D=this.depthAttachment.get();D&&u.deleteRenderbuffer(D)}u.deleteFramebuffer(this.framebuffer)}}class Vr{constructor(u,y,D){this.blendFunction=u,this.blendColor=y,this.mask=D}}Vr.Replace=[1,0],Vr.disabled=new Vr(Vr.Replace,E.Color.transparent,[!1,!1,!1,!1]),Vr.unblended=new Vr(Vr.Replace,E.Color.transparent,[!0,!0,!0,!0]),Vr.alphaBlended=new Vr([1,771],E.Color.transparent,[!0,!0,!0,!0]);class mo{constructor(u){this.gl=u,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Cu(this),this.clearDepth=new os(this),this.clearStencil=new Ws(this),this.colorMask=new pc(this),this.depthMask=new El(this),this.stencilMask=new Vs(this),this.stencilFunc=new mc(this),this.stencilOp=new tc(this),this.stencilTest=new ss(this),this.depthRange=new Bd(this),this.depthTest=new Cl(this),this.depthFunc=new Kr(this),this.blend=new Ss(this),this.blendFunc=new Uu(this),this.blendColor=new zd(this),this.blendEquation=new Gc(this),this.cullFace=new bd(this),this.cullFaceSide=new Vu(this),this.frontFace=new Ka(this),this.program=new ou(this),this.activeTexture=new Ds(this),this.viewport=new su(this),this.bindFramebuffer=new Sl(this),this.bindRenderbuffer=new au(this),this.bindTexture=new as(this),this.bindVertexBuffer=new Ci(this),this.bindElementBuffer=new Su(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new lu(this),this.pixelStoreUnpack=new Ms(this),this.pixelStoreUnpackPremultiplyAlpha=new hl(this),this.pixelStoreUnpackFlipY=new Sc(this),this.extTextureFilterAnisotropic=u.getExtension("EXT_texture_filter_anisotropic")||u.getExtension("MOZ_EXT_texture_filter_anisotropic")||u.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=u.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=u.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(u.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=u.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=u.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=u.getParameter(u.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(u,y){return new Nr(this,u,y)}createVertexBuffer(u,y,D){return new so(this,u,y,D)}createRenderbuffer(u,y,D){const A=this.gl,F=A.createRenderbuffer();return this.bindRenderbuffer.set(F),A.renderbufferStorage(A.RENDERBUFFER,u,y,D),this.bindRenderbuffer.set(null),F}createFramebuffer(u,y,D){return new ji(this,u,y,D)}clear({color:u,depth:y}){const D=this.gl;let A=0;u&&(A|=D.COLOR_BUFFER_BIT,this.clearColor.set(u),this.colorMask.set([!0,!0,!0,!0])),void 0!==y&&(A|=D.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(y),this.depthMask.set(!0)),D.clear(A)}setCullFace(u){!1===u.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(u.mode),this.frontFace.set(u.frontFace))}setDepthMode(u){u.func!==this.gl.ALWAYS||u.mask?(this.depthTest.set(!0),this.depthFunc.set(u.func),this.depthMask.set(u.mask),this.depthRange.set(u.range)):this.depthTest.set(!1)}setStencilMode(u){u.test.func!==this.gl.ALWAYS||u.mask?(this.stencilTest.set(!0),this.stencilMask.set(u.mask),this.stencilOp.set([u.fail,u.depthFail,u.pass]),this.stencilFunc.set({func:u.test.func,ref:u.ref,mask:u.test.mask})):this.stencilTest.set(!1)}setColorMode(u){Ne(u.blendFunction,Vr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(u.blendFunction),this.blendColor.set(u.blendColor)),this.colorMask.set(u.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Ki{constructor(u,y,D){this.func=u,this.mask=y,this.range=D}}Ki.ReadOnly=!1,Ki.ReadWrite=!0,Ki.disabled=new Ki(519,Ki.ReadOnly,[0,1]);class bo{constructor(u,y,D,A,F,$){this.test=u,this.ref=y,this.mask=D,this.fail=A,this.depthFail=F,this.pass=$}}bo.disabled=new bo({func:519,mask:0},0,0,7680,7680,7680);class vi{constructor(u,y,D){this.enable=u,this.mode=y,this.frontFace=D}}let Is;function to(T,u,y,D,A,F,$){const Z=T.context,ee=Z.gl,ie=T.useProgram("collisionBox"),s=[];let l=0,m=0;for(let pe=0;pe<D.length;pe++){const ot=D[pe],nt=u.getTile(ot),wt=nt.getBucket(y);if(!wt)continue;let Pt=ot.posMatrix;0===A[0]&&0===A[1]||(Pt=T.translatePosMatrix(ot.posMatrix,nt,A,F));const $t=$?wt.textCollisionBox:wt.iconCollisionBox,Ft=wt.collisionCircleArray;if(Ft.length>0){const En=E.create(),Dn=Pt;E.mul(En,wt.placementInvProjMatrix,T.transform.glCoordMatrix),E.mul(En,En,wt.placementViewportMatrix),s.push({circleArray:Ft,circleOffset:m,transform:Dn,invTransform:En,coord:ot}),l+=Ft.length/4,m=l}$t&&ie.draw(Z,ee.LINES,Ki.disabled,bo.disabled,T.colorModeForRenderPass(),vi.disabled,ms(Pt,T.transform,nt),T.style.terrain&&T.style.terrain.getTerrainData(ot),y.id,$t.layoutVertexBuffer,$t.indexBuffer,$t.segments,null,T.transform.zoom,null,null,$t.collisionVertexBuffer)}if(!$||!s.length)return;const v=T.useProgram("collisionCircle"),C=new E.CollisionCircleLayoutArray;C.resize(4*l),C._trim();let k=0;for(const pe of s)for(let ot=0;ot<pe.circleArray.length/4;ot++){const nt=4*ot,wt=pe.circleArray[nt+0],Pt=pe.circleArray[nt+1],$t=pe.circleArray[nt+2],Ft=pe.circleArray[nt+3];C.emplace(k++,wt,Pt,$t,Ft,0),C.emplace(k++,wt,Pt,$t,Ft,1),C.emplace(k++,wt,Pt,$t,Ft,2),C.emplace(k++,wt,Pt,$t,Ft,3)}(!Is||Is.length<2*l)&&(Is=function(pe){const ot=2*pe,nt=new E.QuadTriangleArray;nt.resize(ot),nt._trim();for(let wt=0;wt<ot;wt++){const Pt=6*wt;nt.uint16[Pt+0]=4*wt+0,nt.uint16[Pt+1]=4*wt+1,nt.uint16[Pt+2]=4*wt+2,nt.uint16[Pt+3]=4*wt+2,nt.uint16[Pt+4]=4*wt+3,nt.uint16[Pt+5]=4*wt+0}return nt}(l));const G=Z.createIndexBuffer(Is,!0),J=Z.createVertexBuffer(C,E.collisionCircleLayout.members,!0);for(const pe of s){const ot={u_matrix:pe.transform,u_inv_matrix:pe.invTransform,u_camera_to_center_distance:(fe=T.transform).cameraToCenterDistance,u_viewport_size:[fe.width,fe.height]};v.draw(Z,ee.TRIANGLES,Ki.disabled,bo.disabled,T.colorModeForRenderPass(),vi.disabled,ot,T.style.terrain&&T.style.terrain.getTerrainData(pe.coord),y.id,J,G,E.SegmentVector.simpleSegment(0,2*pe.circleOffset,pe.circleArray.length,pe.circleArray.length/2),null,T.transform.zoom,null,null,null)}var fe;J.destroy(),G.destroy()}vi.disabled=new vi(!1,1029,2305),vi.backCCW=new vi(!0,1029,2305);const cu=E.identity(new Float32Array(16));function Ca(T,u,y,D,A,F){const{horizontalAlign:$,verticalAlign:Z}=E.getAnchorAlignment(T),ee=-($-.5)*u,ie=-(Z-.5)*y,s=E.evaluateVariableOffset(T,D);return new E.pointGeometry((ee/A+s[0])*F,(ie/A+s[1])*F)}function Ja(T,u,y,D,A,F,$,Z,ee,ie,s){const l=T.text.placedSymbolArray,m=T.text.dynamicLayoutVertexArray,v=T.icon.dynamicLayoutVertexArray,C={};m.clear();for(let k=0;k<l.length;k++){const G=l.get(k),J=T.allowVerticalPlacement&&!G.placedOrientation,fe=G.hidden||!G.crossTileID||J?null:D[G.crossTileID];if(fe){const pe=new E.pointGeometry(G.anchorX,G.anchorY),ot=Fn(pe,y?$:F,s),nt=hr(A.cameraToCenterDistance,ot.signedDistanceFromCamera);let wt=E.evaluateSizeForFeature(T.textSizeData,ee,G)*nt/E.ONE_EM;y&&(wt*=T.tilePixelRatio/Z);const{width:Pt,height:$t,anchor:Ft,textOffset:En,textBoxScale:Dn}=fe,Ln=Ca(Ft,Pt,$t,En,Dn,wt),Zi=y?Fn(pe.add(Ln),F,s).point:ot.point.add(u?Ln.rotate(-A.angle):Ln),Qi=T.allowVerticalPlacement&&G.placedOrientation===E.WritingMode.vertical?Math.PI/2:0;for(let ki=0;ki<G.numGlyphs;ki++)E.addDynamicAttributes(m,Zi,Qi);ie&&G.associatedIconIndex>=0&&(C[G.associatedIconIndex]={shiftedAnchor:Zi,angle:Qi})}else wi(G.numGlyphs,m)}if(ie){v.clear();const k=T.icon.placedSymbolArray;for(let G=0;G<k.length;G++){const J=k.get(G);if(J.hidden)wi(J.numGlyphs,v);else{const fe=C[G];if(fe)for(let pe=0;pe<J.numGlyphs;pe++)E.addDynamicAttributes(v,fe.shiftedAnchor,fe.angle);else wi(J.numGlyphs,v)}}T.icon.dynamicLayoutVertexBuffer.updateData(v)}T.text.dynamicLayoutVertexBuffer.updateData(m)}function Ud(T,u,y){return y.iconsInText&&u?"symbolTextAndIcon":T?"symbolSDF":"symbolIcon"}function Dl(T,u,y,D,A,F,$,Z,ee,ie,s,l){const m=T.context,v=m.gl,C=T.transform,k="map"===Z,G="map"===ee,J="viewport"!==Z&&"point"!==y.layout.get("symbol-placement"),fe=k&&!G&&!J,pe=!y.layout.get("symbol-sort-key").isConstant();let ot=!1;const nt=T.depthModeForSublayer(0,Ki.ReadOnly),wt=y.layout.get("text-variable-anchor"),Pt=[];for(const $t of D){const Ft=u.getTile($t),En=Ft.getBucket(y);if(!En)continue;const Dn=A?En.text:En.icon;if(!Dn||!Dn.segments.get().length)continue;const Ln=Dn.programConfigurations.get(y.id),Zi=A||En.sdfIcons,Qi=A?En.textSizeData:En.iconSizeData,ki=G||0!==C.pitch,cs=T.useProgram(Ud(Zi,A,En),Ln),mr=E.evaluateSizeForZoom(Qi,C.zoom),Zr=T.style.terrain&&T.style.terrain.getTerrainData($t);let $r,us,fs,Rl,Pc=[0,0],bc=null;if(A){if(us=Ft.glyphAtlasTexture,fs=v.LINEAR,$r=Ft.glyphAtlasTexture.size,En.iconsInText){Pc=Ft.imageAtlasTexture.size,bc=Ft.imageAtlasTexture;const Oc="composite"===Qi.kind||"camera"===Qi.kind;Rl=ki||T.options.rotating||T.options.zooming||Oc?v.LINEAR:v.NEAREST}}else{const Oc=1!==y.layout.get("icon-size").constantOr(0)||En.iconsNeedLinear;us=Ft.imageAtlasTexture,fs=Zi||T.options.rotating||T.options.zooming||Oc||ki?v.LINEAR:v.NEAREST,$r=Ft.imageAtlasTexture.size}const Rc=Lr(Ft,1,T.transform.zoom),jl=In($t.posMatrix,G,k,T.transform,Rc),sc=sn($t.posMatrix,G,k,T.transform,Rc),Wc=wt&&En.hasTextData(),zf="none"!==y.layout.get("icon-text-fit")&&Wc&&En.hasIconData();if(J){const Oc=T.style.terrain?(an,gr)=>T.style.terrain.getElevation($t,an,gr):null,Nn="map"===y.layout.get("text-rotation-alignment");Bi(En,$t.posMatrix,T,A,jl,sc,G,ie,Nn,Oc)}const Ei=T.translatePosMatrix($t.posMatrix,Ft,F,$),Fi=J||A&&wt||zf?cu:jl,Jr=T.translatePosMatrix(sc,Ft,F,$,!0),da=Zi&&0!==y.paint.get(A?"text-halo-width":"icon-halo-width").constantOr(1);let Wr;Wr=Zi?En.iconsInText?Nd(Qi.kind,mr,fe,G,T,Ei,Fi,Jr,$r,Pc):fo(Qi.kind,mr,fe,G,T,Ei,Fi,Jr,A,$r,!0):qi(Qi.kind,mr,fe,G,T,Ei,Fi,Jr,A,$r);const wr={program:cs,buffers:Dn,uniformValues:Wr,atlasTexture:us,atlasTextureIcon:bc,atlasInterpolation:fs,atlasInterpolationIcon:Rl,isSDF:Zi,hasHalo:da};if(pe&&En.canOverlap){ot=!0;const Oc=Dn.segments.get();for(const Nn of Oc)Pt.push({segments:new E.SegmentVector([Nn]),sortKey:Nn.sortKey,state:wr,terrainData:Zr})}else Pt.push({segments:Dn.segments,sortKey:0,state:wr,terrainData:Zr})}ot&&Pt.sort(($t,Ft)=>$t.sortKey-Ft.sortKey);for(const $t of Pt){const Ft=$t.state;if(m.activeTexture.set(v.TEXTURE0),Ft.atlasTexture.bind(Ft.atlasInterpolation,v.CLAMP_TO_EDGE),Ft.atlasTextureIcon&&(m.activeTexture.set(v.TEXTURE1),Ft.atlasTextureIcon&&Ft.atlasTextureIcon.bind(Ft.atlasInterpolationIcon,v.CLAMP_TO_EDGE)),Ft.isSDF){const En=Ft.uniformValues;Ft.hasHalo&&(En.u_is_halo=1,Yn(Ft.buffers,$t.segments,y,T,Ft.program,nt,s,l,En,$t.terrainData)),En.u_is_halo=0}Yn(Ft.buffers,$t.segments,y,T,Ft.program,nt,s,l,Ft.uniformValues,$t.terrainData)}}function Yn(T,u,y,D,A,F,$,Z,ee,ie){const s=D.context;A.draw(s,s.gl.TRIANGLES,F,$,Z,vi.disabled,ee,ie,y.id,T.layoutVertexBuffer,T.indexBuffer,u,y.paint,D.transform.zoom,T.programConfigurations.get(y.id),T.dynamicLayoutVertexBuffer,T.opacityVertexBuffer)}function oa(T,u,y,D,A,F,$){const Z=T.context.gl,ee=y.paint.get("fill-pattern"),ie=ee&&ee.constantOr(1),s=y.getCrossfadeParameters();let l,m,v,C,k;$?(m=ie&&!y.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",l=Z.LINES):(m=ie?"fillPattern":"fill",l=Z.TRIANGLES);for(const G of D){const J=u.getTile(G);if(ie&&!J.patternsLoaded())continue;const fe=J.getBucket(y);if(!fe)continue;const pe=fe.programConfigurations.get(y.id),ot=T.useProgram(m,pe),nt=T.style.terrain&&T.style.terrain.getTerrainData(G);ie&&(T.context.activeTexture.set(Z.TEXTURE0),J.imageAtlasTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),pe.updatePaintBuffers(s));const wt=ee.constantOr(null);if(wt&&J.imageAtlas){const Ft=J.imageAtlas,En=Ft.patternPositions[wt.to.toString()],Dn=Ft.patternPositions[wt.from.toString()];En&&Dn&&pe.setConstantPatternPositions(En,Dn)}const Pt=nt?G:null,$t=T.translatePosMatrix(Pt?Pt.posMatrix:G.posMatrix,J,y.paint.get("fill-translate"),y.paint.get("fill-translate-anchor"));if($){C=fe.indexBuffer2,k=fe.segments2;const Ft=[Z.drawingBufferWidth,Z.drawingBufferHeight];v="fillOutlinePattern"===m&&ie?An($t,T,s,J,Ft):Xi($t,Ft)}else C=fe.indexBuffer,k=fe.segments,v=ie?dr($t,T,s,J):Us($t);ot.draw(T.context,l,A,T.stencilModeForClipping(G),F,vi.disabled,v,nt,y.id,fe.layoutVertexBuffer,C,k,y.paint,T.transform.zoom,pe)}}function Dc(T,u,y,D,A,F,$){const Z=T.context,ee=Z.gl,ie=y.paint.get("fill-extrusion-pattern"),s=ie.constantOr(1),l=y.getCrossfadeParameters(),m=y.paint.get("fill-extrusion-opacity");for(const v of D){const C=u.getTile(v),k=C.getBucket(y);if(!k)continue;const G=T.style.terrain&&T.style.terrain.getTerrainData(v),J=k.programConfigurations.get(y.id),fe=T.useProgram(s?"fillExtrusionPattern":"fillExtrusion",J);s&&(T.context.activeTexture.set(ee.TEXTURE0),C.imageAtlasTexture.bind(ee.LINEAR,ee.CLAMP_TO_EDGE),J.updatePaintBuffers(l));const pe=ie.constantOr(null);if(pe&&C.imageAtlas){const Pt=C.imageAtlas,$t=Pt.patternPositions[pe.to.toString()],Ft=Pt.patternPositions[pe.from.toString()];$t&&Ft&&J.setConstantPatternPositions($t,Ft)}const ot=T.translatePosMatrix(v.posMatrix,C,y.paint.get("fill-extrusion-translate"),y.paint.get("fill-extrusion-translate-anchor")),nt=y.paint.get("fill-extrusion-vertical-gradient"),wt=s?Vc(ot,T,nt,m,v,l,C):ci(ot,T,nt,m);fe.draw(Z,Z.gl.TRIANGLES,A,F,$,vi.backCCW,wt,G,y.id,k.layoutVertexBuffer,k.indexBuffer,k.segments,y.paint,T.transform.zoom,J,T.style.terrain&&k.centroidVertexBuffer)}}function Ml(T,u,y,D,A,F,$){const Z=T.context,ee=Z.gl,ie=y.fbo;if(!ie)return;const s=T.useProgram("hillshade"),l=T.style.terrain&&T.style.terrain.getTerrainData(u);Z.activeTexture.set(ee.TEXTURE0),ee.bindTexture(ee.TEXTURE_2D,ie.colorAttachment.get()),s.draw(Z,ee.TRIANGLES,A,F,$,vi.disabled,((m,v,C,k)=>{const G=C.paint.get("hillshade-shadow-color"),J=C.paint.get("hillshade-highlight-color"),fe=C.paint.get("hillshade-accent-color");let pe=C.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===C.paint.get("hillshade-illumination-anchor")&&(pe-=m.transform.angle);const ot=!m.options.moving;return{u_matrix:k?k.posMatrix:m.transform.calculatePosMatrix(v.tileID.toUnwrapped(),ot),u_image:0,u_latrange:Jt(0,v.tileID),u_light:[C.paint.get("hillshade-exaggeration"),pe],u_shadow:G,u_highlight:J,u_accent:fe}})(T,y,D,l?u:null),l,D.id,T.rasterBoundsBuffer,T.quadTriangleIndexBuffer,T.rasterBoundsSegments)}function Fa(T,u,y,D,A,F){const $=T.context,Z=$.gl,ee=u.dem;if(ee&&ee.data){const ie=ee.dim,s=ee.stride,l=ee.getPixels();if($.activeTexture.set(Z.TEXTURE1),$.pixelStoreUnpackPremultiplyAlpha.set(!1),u.demTexture=u.demTexture||T.getTileTexture(s),u.demTexture){const v=u.demTexture;v.update(l,{premultiply:!1}),v.bind(Z.NEAREST,Z.CLAMP_TO_EDGE)}else u.demTexture=new Te($,l,Z.RGBA,{premultiply:!1}),u.demTexture.bind(Z.NEAREST,Z.CLAMP_TO_EDGE);$.activeTexture.set(Z.TEXTURE0);let m=u.fbo;if(!m){const v=new Te($,{width:ie,height:ie,data:null},Z.RGBA);v.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),m=u.fbo=$.createFramebuffer(ie,ie,!0),m.colorAttachment.set(v.texture)}$.bindFramebuffer.set(m.framebuffer),$.viewport.set([0,0,ie,ie]),T.useProgram("hillshadePrepare").draw($,Z.TRIANGLES,D,A,F,vi.disabled,((v,C)=>{const k=C.stride,G=E.create();return E.ortho(G,0,E.EXTENT,-E.EXTENT,0,0,1),E.translate(G,G,[0,-E.EXTENT,0]),{u_matrix:G,u_image:1,u_dimension:[k,k],u_zoom:v.overscaledZ,u_unpack:C.getUnpackVector()}})(u.tileID,ee),null,y.id,T.rasterBoundsBuffer,T.quadTriangleIndexBuffer,T.rasterBoundsSegments),u.needsHillshadePrepare=!1}}function Gs(T,u,y,D,A,F){const $=D.paint.get("raster-fade-duration");if(!F&&$>0){const Z=E.exported.now(),ee=(Z-T.timeAdded)/$,ie=u?(Z-u.timeAdded)/$:-1,s=y.getSource(),l=A.coveringZoomLevel({tileSize:s.tileSize,roundZoom:s.roundZoom}),m=!u||Math.abs(u.tileID.overscaledZ-l)>Math.abs(T.tileID.overscaledZ-l),v=m&&T.refreshedUponExpiration?1:E.clamp(m?ee:1-ie,0,1);return T.refreshedUponExpiration&&ee>=1&&(T.refreshedUponExpiration=!1),u?{opacity:1,mix:1-v}:{opacity:v,mix:0}}return{opacity:1,mix:0}}const $u=new E.Color(1,0,0,1),go=new E.Color(0,1,0,1),Mc=new E.Color(0,0,1,1),_n=new E.Color(1,0,1,1),Pr=new E.Color(0,1,1,1);function $s(T,u,y,D){ao(T,0,u+y/2,T.transform.width,y,D)}function Na(T,u,y,D){ao(T,u-y/2,0,y,T.transform.height,D)}function ao(T,u,y,D,A,F){const $=T.context,Z=$.gl;Z.enable(Z.SCISSOR_TEST),Z.scissor(u*T.pixelRatio,y*T.pixelRatio,D*T.pixelRatio,A*T.pixelRatio),$.clear({color:F}),Z.disable(Z.SCISSOR_TEST)}function Ic(T,u,y){const D=T.context,A=D.gl,F=y.posMatrix,$=T.useProgram("debug"),Z=Ki.disabled,ee=bo.disabled,ie=T.colorModeForRenderPass(),s="$debug",l=T.style.terrain&&T.style.terrain.getTerrainData(y);D.activeTexture.set(A.TEXTURE0),T.emptyTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE);const m=u.getTileByID(y.key).latestRawTileData,v=Math.floor((m&&m.byteLength||0)/1024),C=u.getTile(y).tileSize,k=512/Math.min(C,512)*(y.overscaledZ/T.transform.zoom)*.5;let G=y.canonical.toString();y.overscaledZ!==y.canonical.z&&(G+=` => ${y.overscaledZ}`),function(J,fe){J.initDebugOverlayCanvas();const pe=J.debugOverlayCanvas,ot=J.context.gl,nt=J.debugOverlayCanvas.getContext("2d");nt.clearRect(0,0,pe.width,pe.height),nt.shadowColor="white",nt.shadowBlur=2,nt.lineWidth=1.5,nt.strokeStyle="white",nt.textBaseline="top",nt.font="bold 36px Open Sans, sans-serif",nt.fillText(fe,5,5),nt.strokeText(fe,5,5),J.debugOverlayTexture.update(pe),J.debugOverlayTexture.bind(ot.LINEAR,ot.CLAMP_TO_EDGE)}(T,`${G} ${v}kB`),$.draw(D,A.TRIANGLES,Z,ee,Vr.alphaBlended,vi.disabled,ir(F,E.Color.transparent,k),null,s,T.debugBuffer,T.quadTriangleIndexBuffer,T.debugSegments),$.draw(D,A.LINE_STRIP,Z,ee,ie,vi.disabled,ir(F,E.Color.red),l,s,T.debugBuffer,T.tileBorderIndexBuffer,T.debugSegments)}function Ba(T,u,y){const D=T.context,A=D.gl,F=T.colorModeForRenderPass(),$=new Ki(A.LEQUAL,Ki.ReadWrite,T.depthRangeFor3D),Z=T.useProgram("terrain"),ee=u.getTerrainMesh(),ie=u.getTerrainData(y.tileID);D.bindFramebuffer.set(null),D.viewport.set([0,0,T.width,T.height]),D.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,u.getRTTFramebuffer().colorAttachment.get());const s=T.transform.calculatePosMatrix(y.tileID.toUnwrapped());Z.draw(D,A.TRIANGLES,$,bo.disabled,F,vi.backCCW,{u_matrix:s,u_texture:0},ie,"terrain",ee.vertexBuffer,ee.indexBuffer,ee.segments)}function xo(T,u,y,D){const A=T.context,F=y.tileSize*u.qualityFactor;y.textures[D]||(y.textures[D]=T.getTileTexture(F)||new Te(A,{width:F,height:F,data:null},A.gl.RGBA),y.textures[D].bind(A.gl.LINEAR,A.gl.CLAMP_TO_EDGE),0===D&&u.sourceCache.renderHistory.unshift(y.tileID.key));const $=u.getRTTFramebuffer();$.colorAttachment.set(y.textures[D].texture),A.bindFramebuffer.set($.framebuffer),A.viewport.set([0,0,F,F])}class xd{constructor(u){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=u,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=u.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const u=this.painter.style,y=u.terrain;for(const D in u.sourceCaches){this._coordsDescendingInv[D]={};const A=u.sourceCaches[D].getVisibleCoordinates();for(const F of A){const $=y.sourceCache.getTerrainCoords(F);for(const Z in $)this._coordsDescendingInv[D][Z]||(this._coordsDescendingInv[D][Z]=[]),this._coordsDescendingInv[D][Z].push($[Z])}}for(const D of u._order){const A=u._layers[D],F=A.source;if(this._renderToTexture[A.type]&&!this._coordsDescendingInvStr[F]){this._coordsDescendingInvStr[F]={};for(const $ in this._coordsDescendingInv[F])this._coordsDescendingInvStr[F][$]=this._coordsDescendingInv[F][$].map(Z=>Z.key).sort().join()}}return this._renderableTiles.forEach(D=>{for(const A in this._coordsDescendingInvStr){const F=this._coordsDescendingInvStr[A][D.tileID.key];F&&F!==D.textureCoords[A]&&D.clearTextures(this.painter),y.needsRerender(A,D.tileID)&&D.clearTextures(this.painter)}this._rerender[D.tileID.key]=!D.textures.length}),y.clearRerenderCache(),y.sourceCache.removeOutdated(this.painter),this}renderLayer(u){const y=u.type,D=this.painter,A=D.style._order,F=D.currentLayer,$=F+1===A.length;if(this._renderToTexture[y]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=y,this._stacks[this._stacks.length-1].push(A[F]),!$))return!0;if(this._renderToTexture[this._prevType]||"hillshade"===y||this._renderToTexture[y]&&$){this._prevType=y;const Z=this._stacks.length-1,ee=this._stacks[Z]||[];for(const ie of this._renderableTiles){if(xo(D,D.style.terrain,ie,Z),this._rerender[ie.tileID.key]){D.context.clear({color:E.Color.transparent});for(let s=0;s<ee.length;s++){const l=D.style._layers[ee[s]],m=l.source?this._coordsDescendingInv[l.source][ie.tileID.key]:[ie.tileID];D._renderTileClippingMasks(l,m),D.renderLayer(D,D.style.sourceCaches[l.source],l,m),l.source&&(ie.textureCoords[l.source]=this._coordsDescendingInvStr[l.source][ie.tileID.key])}}Ba(D,D.style.terrain,ie)}if("hillshade"===y){this._stacks.push([A[F]]);for(const ie of this._renderableTiles){const s=this._coordsDescendingInv[u.source][ie.tileID.key];xo(D,D.style.terrain,ie,this._stacks.length-1),D.context.clear({color:E.Color.transparent}),D._renderTileClippingMasks(u,s),D.renderLayer(D,D.style.sourceCaches[u.source],u,s),Ba(D,D.style.terrain,ie)}return!0}return this._renderToTexture[y]}return!1}}const nc={symbol:function(T,u,y,D,A){if("translucent"!==T.renderPass)return;const F=bo.disabled,$=T.colorModeForRenderPass();y.layout.get("text-variable-anchor")&&function(Z,ee,ie,s,l,m,v){const C=ee.transform,k="map"===l,G="map"===m;for(const J of Z){const fe=s.getTile(J),pe=fe.getBucket(ie);if(!pe||!pe.text||!pe.text.segments.get().length)continue;const ot=E.evaluateSizeForZoom(pe.textSizeData,C.zoom),nt=Lr(fe,1,ee.transform.zoom),wt=In(J.posMatrix,G,k,ee.transform,nt),Pt="none"!==ie.layout.get("icon-text-fit")&&pe.hasIconData();if(ot){const $t=Math.pow(2,C.zoom-fe.tileID.overscaledZ);Ja(pe,k,G,v,C,wt,J.posMatrix,$t,ot,Pt,ee.style.terrain?(Ft,En)=>ee.style.terrain.getElevation(J,Ft,En):null)}}}(D,T,y,u,y.layout.get("text-rotation-alignment"),y.layout.get("text-pitch-alignment"),A),0!==y.paint.get("icon-opacity").constantOr(1)&&Dl(T,u,y,D,!1,y.paint.get("icon-translate"),y.paint.get("icon-translate-anchor"),y.layout.get("icon-rotation-alignment"),y.layout.get("icon-pitch-alignment"),y.layout.get("icon-keep-upright"),F,$),0!==y.paint.get("text-opacity").constantOr(1)&&Dl(T,u,y,D,!0,y.paint.get("text-translate"),y.paint.get("text-translate-anchor"),y.layout.get("text-rotation-alignment"),y.layout.get("text-pitch-alignment"),y.layout.get("text-keep-upright"),F,$),u.map.showCollisionBoxes&&(to(T,u,y,D,y.paint.get("text-translate"),y.paint.get("text-translate-anchor"),!0),to(T,u,y,D,y.paint.get("icon-translate"),y.paint.get("icon-translate-anchor"),!1))},circle:function(T,u,y,D){if("translucent"!==T.renderPass)return;const A=y.paint.get("circle-opacity"),F=y.paint.get("circle-stroke-width"),$=y.paint.get("circle-stroke-opacity"),Z=!y.layout.get("circle-sort-key").isConstant();if(0===A.constantOr(1)&&(0===F.constantOr(1)||0===$.constantOr(1)))return;const ee=T.context,ie=ee.gl,s=T.depthModeForSublayer(0,Ki.ReadOnly),l=bo.disabled,m=T.colorModeForRenderPass(),v=[];for(let C=0;C<D.length;C++){const k=D[C],G=u.getTile(k),J=G.getBucket(y);if(!J)continue;const fe=J.programConfigurations.get(y.id),pe=T.useProgram("circle",fe),ot=J.layoutVertexBuffer,nt=J.indexBuffer,wt=T.style.terrain&&T.style.terrain.getTerrainData(k),Pt={programConfiguration:fe,program:pe,layoutVertexBuffer:ot,indexBuffer:nt,uniformValues:Xa(T,k,G,y),terrainData:wt};if(Z){const $t=J.segments.get();for(const Ft of $t)v.push({segments:new E.SegmentVector([Ft]),sortKey:Ft.sortKey,state:Pt})}else v.push({segments:J.segments,sortKey:0,state:Pt})}Z&&v.sort((C,k)=>C.sortKey-k.sortKey);for(const C of v){const{programConfiguration:k,program:G,layoutVertexBuffer:J,indexBuffer:fe,uniformValues:pe,terrainData:ot}=C.state;G.draw(ee,ie.TRIANGLES,s,l,m,vi.disabled,pe,ot,y.id,J,fe,C.segments,y.paint,T.transform.zoom,k)}},heatmap:function(T,u,y,D){if(0!==y.paint.get("heatmap-opacity"))if("offscreen"===T.renderPass){const A=T.context,F=A.gl,$=bo.disabled,Z=new Vr([F.ONE,F.ONE],E.Color.transparent,[!0,!0,!0,!0]);(function(ee,ie,s){const l=ee.gl;ee.activeTexture.set(l.TEXTURE1),ee.viewport.set([0,0,ie.width/4,ie.height/4]);let m=s.heatmapFbo;if(m)l.bindTexture(l.TEXTURE_2D,m.colorAttachment.get()),ee.bindFramebuffer.set(m.framebuffer);else{const v=l.createTexture();l.bindTexture(l.TEXTURE_2D,v),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),m=s.heatmapFbo=ee.createFramebuffer(ie.width/4,ie.height/4,!1),function(C,k,G,J){const fe=C.gl;fe.texImage2D(fe.TEXTURE_2D,0,fe.RGBA,k.width/4,k.height/4,0,fe.RGBA,C.extRenderToTextureHalfFloat?C.extTextureHalfFloat.HALF_FLOAT_OES:fe.UNSIGNED_BYTE,null),J.colorAttachment.set(G)}(ee,ie,v,m)}})(A,T,y),A.clear({color:E.Color.transparent});for(let ee=0;ee<D.length;ee++){const ie=D[ee];if(u.hasRenderableParent(ie))continue;const s=u.getTile(ie),l=s.getBucket(y);if(!l)continue;const m=l.programConfigurations.get(y.id),v=T.useProgram("heatmap",m),{zoom:C}=T.transform;v.draw(A,F.TRIANGLES,Ki.disabled,$,Z,vi.disabled,ht(ie.posMatrix,s,C,y.paint.get("heatmap-intensity")),null,y.id,l.layoutVertexBuffer,l.indexBuffer,l.segments,y.paint,T.transform.zoom,m)}A.viewport.set([0,0,T.width,T.height])}else"translucent"===T.renderPass&&(T.context.setColorMode(T.colorModeForRenderPass()),function(A,F){const $=A.context,Z=$.gl,ee=F.heatmapFbo;if(!ee)return;$.activeTexture.set(Z.TEXTURE0),Z.bindTexture(Z.TEXTURE_2D,ee.colorAttachment.get()),$.activeTexture.set(Z.TEXTURE1);let ie=F.colorRampTexture;ie||(ie=F.colorRampTexture=new Te($,F.colorRamp,Z.RGBA)),ie.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),A.useProgram("heatmapTexture").draw($,Z.TRIANGLES,Ki.disabled,bo.disabled,A.colorModeForRenderPass(),vi.disabled,((s,l,m,v)=>{const C=E.create();E.ortho(C,0,s.width,s.height,0,0,1);const k=s.context.gl;return{u_matrix:C,u_world:[k.drawingBufferWidth,k.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:l.paint.get("heatmap-opacity")}})(A,F),null,F.id,A.viewportBuffer,A.quadTriangleIndexBuffer,A.viewportSegments,F.paint,A.transform.zoom)}(T,y))},line:function(T,u,y,D){if("translucent"!==T.renderPass)return;const A=y.paint.get("line-opacity"),F=y.paint.get("line-width");if(0===A.constantOr(1)||0===F.constantOr(1))return;const $=T.depthModeForSublayer(0,Ki.ReadOnly),Z=T.colorModeForRenderPass(),ee=y.paint.get("line-dasharray"),ie=y.paint.get("line-pattern"),s=ie.constantOr(1),l=y.paint.get("line-gradient"),m=y.getCrossfadeParameters(),v=s?"linePattern":ee?"lineSDF":l?"lineGradient":"line",C=T.context,k=C.gl;let G=!0;for(const J of D){const fe=u.getTile(J);if(s&&!fe.patternsLoaded())continue;const pe=fe.getBucket(y);if(!pe)continue;const ot=pe.programConfigurations.get(y.id),nt=T.context.program.get(),wt=T.useProgram(v,ot),Pt=G||wt.program!==nt,$t=T.style.terrain&&T.style.terrain.getTerrainData(J),Ft=ie.constantOr(null);if(Ft&&fe.imageAtlas){const Ln=fe.imageAtlas,Zi=Ln.patternPositions[Ft.to.toString()],Qi=Ln.patternPositions[Ft.from.toString()];Zi&&Qi&&ot.setConstantPatternPositions(Zi,Qi)}const En=$t?J:null,Dn=s?gn(T,fe,y,m,En):ee?zn(T,fe,y,ee,m,En):l?on(T,fe,y,pe.lineClipsArray.length,En):ft(T,fe,y,En);if(s)C.activeTexture.set(k.TEXTURE0),fe.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),ot.updatePaintBuffers(m);else if(ee&&(Pt||T.lineAtlas.dirty))C.activeTexture.set(k.TEXTURE0),T.lineAtlas.bind(C);else if(l){const Ln=pe.gradients[y.id];let Zi=Ln.texture;if(y.gradientVersion!==Ln.version){let Qi=256;if(y.stepInterpolant){const ki=u.getSource().maxzoom,cs=J.canonical.z===ki?Math.ceil(1<<T.transform.maxZoom-J.canonical.z):1;Qi=E.clamp(E.nextPowerOfTwo(pe.maxLineLength/E.EXTENT*1024*cs),256,C.maxTextureSize)}Ln.gradient=E.renderColorRamp({expression:y.gradientExpression(),evaluationKey:"lineProgress",resolution:Qi,image:Ln.gradient||void 0,clips:pe.lineClipsArray}),Ln.texture?Ln.texture.update(Ln.gradient):Ln.texture=new Te(C,Ln.gradient,k.RGBA),Ln.version=y.gradientVersion,Zi=Ln.texture}C.activeTexture.set(k.TEXTURE0),Zi.bind(y.stepInterpolant?k.NEAREST:k.LINEAR,k.CLAMP_TO_EDGE)}wt.draw(C,k.TRIANGLES,$,T.stencilModeForClipping(J),Z,vi.disabled,Dn,$t,y.id,pe.layoutVertexBuffer,pe.indexBuffer,pe.segments,y.paint,T.transform.zoom,ot,pe.layoutVertexBuffer2),G=!1}},fill:function(T,u,y,D){const A=y.paint.get("fill-color"),F=y.paint.get("fill-opacity");if(0===F.constantOr(1))return;const $=T.colorModeForRenderPass(),Z=y.paint.get("fill-pattern"),ee=T.opaquePassEnabledForLayer()&&!Z.constantOr(1)&&1===A.constantOr(E.Color.transparent).a&&1===F.constantOr(0)?"opaque":"translucent";if(T.renderPass===ee){const ie=T.depthModeForSublayer(1,"opaque"===T.renderPass?Ki.ReadWrite:Ki.ReadOnly);oa(T,u,y,D,ie,$,!1)}if("translucent"===T.renderPass&&y.paint.get("fill-antialias")){const ie=T.depthModeForSublayer(y.getPaintProperty("fill-outline-color")?2:0,Ki.ReadOnly);oa(T,u,y,D,ie,$,!0)}},"fill-extrusion":function(T,u,y,D){const A=y.paint.get("fill-extrusion-opacity");if(0!==A&&"translucent"===T.renderPass){const F=new Ki(T.context.gl.LEQUAL,Ki.ReadWrite,T.depthRangeFor3D);if(1!==A||y.paint.get("fill-extrusion-pattern").constantOr(1))Dc(T,u,y,D,F,bo.disabled,Vr.disabled),Dc(T,u,y,D,F,T.stencilModeFor3D(),T.colorModeForRenderPass());else{const $=T.colorModeForRenderPass();Dc(T,u,y,D,F,bo.disabled,$)}}},hillshade:function(T,u,y,D){if("offscreen"!==T.renderPass&&"translucent"!==T.renderPass)return;const A=T.context,F=T.depthModeForSublayer(0,Ki.ReadOnly),$=T.colorModeForRenderPass(),[Z,ee]="translucent"===T.renderPass?T.stencilConfigForOverlap(D):[{},D];for(const ie of ee){const s=u.getTile(ie);void 0!==s.needsHillshadePrepare&&s.needsHillshadePrepare&&"offscreen"===T.renderPass?Fa(T,s,y,F,bo.disabled,$):"translucent"===T.renderPass&&Ml(T,ie,s,y,F,Z[ie.overscaledZ],$)}A.viewport.set([0,0,T.width,T.height])},raster:function(T,u,y,D){if("translucent"!==T.renderPass||0===y.paint.get("raster-opacity")||!D.length)return;const A=T.context,F=A.gl,$=u.getSource(),Z=T.useProgram("raster"),ee=T.colorModeForRenderPass(),[ie,s]=$ instanceof ut?[{},D]:T.stencilConfigForOverlap(D),l=s[s.length-1].overscaledZ,m=!T.options.moving;for(const v of s){const C=T.depthModeForSublayer(v.overscaledZ-l,1===y.paint.get("raster-opacity")?Ki.ReadWrite:Ki.ReadOnly,F.LESS),k=u.getTile(v);k.registerFadeDuration(y.paint.get("raster-fade-duration"));const G=u.findLoadedParent(v,0),J=Gs(k,G,u,y,T.transform,T.style.terrain);let fe,pe;const ot="nearest"===y.paint.get("raster-resampling")?F.NEAREST:F.LINEAR;A.activeTexture.set(F.TEXTURE0),k.texture.bind(ot,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST),A.activeTexture.set(F.TEXTURE1),G?(G.texture.bind(ot,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST),fe=Math.pow(2,G.tileID.overscaledZ-k.tileID.overscaledZ),pe=[k.tileID.canonical.x*fe%1,k.tileID.canonical.y*fe%1]):k.texture.bind(ot,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST);const nt=T.style.terrain&&T.style.terrain.getTerrainData(v),wt=nt?v:null,Pt=wt?wt.posMatrix:T.transform.calculatePosMatrix(v.toUnwrapped(),m),$t=Hi(Pt,pe||[0,0],fe||1,J,y);$ instanceof ut?Z.draw(A,F.TRIANGLES,C,bo.disabled,ee,vi.disabled,$t,nt,y.id,$.boundsBuffer,T.quadTriangleIndexBuffer,$.boundsSegments):Z.draw(A,F.TRIANGLES,C,ie[v.overscaledZ],ee,vi.disabled,$t,nt,y.id,T.rasterBoundsBuffer,T.quadTriangleIndexBuffer,T.rasterBoundsSegments)}},background:function(T,u,y,D){const A=y.paint.get("background-color"),F=y.paint.get("background-opacity");if(0===F)return;const $=T.context,Z=$.gl,ee=T.transform,ie=ee.tileSize,s=y.paint.get("background-pattern");if(T.isPatternMissing(s))return;const l=!s&&1===A.a&&1===F&&T.opaquePassEnabledForLayer()?"opaque":"translucent";if(T.renderPass!==l)return;const m=bo.disabled,v=T.depthModeForSublayer(0,"opaque"===l?Ki.ReadWrite:Ki.ReadOnly),C=T.colorModeForRenderPass(),k=T.useProgram(s?"backgroundPattern":"background"),G=D||ee.coveringTiles({tileSize:ie,terrain:T.style.terrain});s&&($.activeTexture.set(Z.TEXTURE0),T.imageManager.bind(T.context));const J=y.getCrossfadeParameters();for(const fe of G){const pe=D?fe.posMatrix:T.transform.calculatePosMatrix(fe.toUnwrapped()),ot=s?Ea(pe,F,T,s,{tileID:fe,tileSize:ie},J):po(pe,F,A),nt=T.style.terrain&&T.style.terrain.getTerrainData(fe);k.draw($,Z.TRIANGLES,v,m,C,vi.disabled,ot,nt,y.id,T.tileExtentBuffer,T.quadTriangleIndexBuffer,T.tileExtentSegments)}},debug:function(T,u,y){for(let D=0;D<y.length;D++)Ic(T,u,y[D])},custom:function(T,u,y){const D=T.context,A=y.implementation;if("offscreen"===T.renderPass){const F=A.prerender;F&&(T.setCustomLayerDefaults(),D.setColorMode(T.colorModeForRenderPass()),F.call(A,D.gl,T.transform.customLayerMatrix()),D.setDirty(),T.setBaseState())}else if("translucent"===T.renderPass){T.setCustomLayerDefaults(),D.setColorMode(T.colorModeForRenderPass()),D.setStencilMode(bo.disabled);const F="3d"===A.renderingMode?new Ki(T.context.gl.LEQUAL,Ki.ReadWrite,T.depthRangeFor3D):T.depthModeForSublayer(0,Ki.ReadOnly);D.setDepthMode(F),A.render(D.gl,T.transform.customLayerMatrix()),D.setDirty(),T.setBaseState(),D.bindFramebuffer.set(null)}}};class Xs{constructor(u,y){this.context=new mo(u),this.transform=y,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:E.create(),renderTime:0},this.setup(),this.numSublayers=Bn.maxUnderzooming+Bn.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new mi,this.gpuTimers={}}resize(u,y,D){if(this.width=u*D,this.height=y*D,this.pixelRatio=D,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const A of this.style._order)this.style._layers[A].resize()}setup(){const u=this.context,y=new E.PosArray;y.emplaceBack(0,0),y.emplaceBack(E.EXTENT,0),y.emplaceBack(0,E.EXTENT),y.emplaceBack(E.EXTENT,E.EXTENT),this.tileExtentBuffer=u.createVertexBuffer(y,lr.members),this.tileExtentSegments=E.SegmentVector.simpleSegment(0,0,4,2);const D=new E.PosArray;D.emplaceBack(0,0),D.emplaceBack(E.EXTENT,0),D.emplaceBack(0,E.EXTENT),D.emplaceBack(E.EXTENT,E.EXTENT),this.debugBuffer=u.createVertexBuffer(D,lr.members),this.debugSegments=E.SegmentVector.simpleSegment(0,0,4,5);const A=new E.RasterBoundsArray;A.emplaceBack(0,0,0,0),A.emplaceBack(E.EXTENT,0,E.EXTENT,0),A.emplaceBack(0,E.EXTENT,0,E.EXTENT),A.emplaceBack(E.EXTENT,E.EXTENT,E.EXTENT,E.EXTENT),this.rasterBoundsBuffer=u.createVertexBuffer(A,Me.members),this.rasterBoundsSegments=E.SegmentVector.simpleSegment(0,0,4,2);const F=new E.PosArray;F.emplaceBack(0,0),F.emplaceBack(1,0),F.emplaceBack(0,1),F.emplaceBack(1,1),this.viewportBuffer=u.createVertexBuffer(F,lr.members),this.viewportSegments=E.SegmentVector.simpleSegment(0,0,4,2);const $=new E.LineStripIndexArray;$.emplaceBack(0),$.emplaceBack(1),$.emplaceBack(3),$.emplaceBack(2),$.emplaceBack(0),this.tileBorderIndexBuffer=u.createIndexBuffer($);const Z=new E.TriangleIndexArray;Z.emplaceBack(0,1,2),Z.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=u.createIndexBuffer(Z),this.emptyTexture=new Te(u,{width:1,height:1,data:new Uint8Array([0,0,0,0])},u.gl.RGBA);const ee=this.context.gl;this.stencilClearMode=new bo({func:ee.ALWAYS,mask:0},0,255,ee.ZERO,ee.ZERO,ee.ZERO)}clearStencil(){const u=this.context,y=u.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const D=E.create();E.ortho(D,0,this.width,this.height,0,0,1),E.scale(D,D,[y.drawingBufferWidth,y.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(u,y.TRIANGLES,Ki.disabled,this.stencilClearMode,Vr.disabled,vi.disabled,Ji(D),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(u,y){if(this.currentStencilSource===u.source||!u.isTileClipped()||!y||!y.length)return;this.currentStencilSource=u.source;const D=this.context,A=D.gl;this.nextStencilID+y.length>256&&this.clearStencil(),D.setColorMode(Vr.disabled),D.setDepthMode(Ki.disabled);const F=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const $ of y){const Z=this._tileClippingMaskIDs[$.key]=this.nextStencilID++,ee=this.style.terrain&&this.style.terrain.getTerrainData($);F.draw(D,A.TRIANGLES,Ki.disabled,new bo({func:A.ALWAYS,mask:0},Z,255,A.KEEP,A.KEEP,A.REPLACE),Vr.disabled,vi.disabled,Ji($.posMatrix),ee,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const u=this.nextStencilID++,y=this.context.gl;return new bo({func:y.NOTEQUAL,mask:255},u,255,y.KEEP,y.KEEP,y.REPLACE)}stencilModeForClipping(u){const y=this.context.gl;return new bo({func:y.EQUAL,mask:255},this._tileClippingMaskIDs[u.key],0,y.KEEP,y.KEEP,y.REPLACE)}stencilConfigForOverlap(u){const y=this.context.gl,D=u.sort(($,Z)=>Z.overscaledZ-$.overscaledZ),A=D[D.length-1].overscaledZ,F=D[0].overscaledZ-A+1;if(F>1){this.currentStencilSource=void 0,this.nextStencilID+F>256&&this.clearStencil();const $={};for(let Z=0;Z<F;Z++)$[Z+A]=new bo({func:y.GEQUAL,mask:255},Z+this.nextStencilID,255,y.KEEP,y.KEEP,y.REPLACE);return this.nextStencilID+=F,[$,D]}return[{[A]:bo.disabled},D]}colorModeForRenderPass(){const u=this.context.gl;return this._showOverdrawInspector?new Vr([u.CONSTANT_COLOR,u.ONE],new E.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Vr.unblended:Vr.alphaBlended}depthModeForSublayer(u,y,D){if(!this.opaquePassEnabledForLayer())return Ki.disabled;const A=1-((1+this.currentLayer)*this.numSublayers+u)*this.depthEpsilon;return new Ki(D||this.context.gl.LEQUAL,y,[A,A])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(u,y){this.style=u,this.options=y,this.lineAtlas=u.lineAtlas,this.imageManager=u.imageManager,this.glyphManager=u.glyphManager,this.symbolFadeChange=u.placement.symbolFadeChange(E.exported.now()),this.imageManager.beginFrame();const D=this.style._order,A=this.style.sourceCaches,F=this.style.terrain&&new xd(this);for(const ie in A){const s=A[ie];s.used&&s.prepare(this.context)}const $={},Z={},ee={};for(const ie in A){const s=A[ie];$[ie]=s.getVisibleCoordinates(),Z[ie]=$[ie].slice().reverse(),ee[ie]=s.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let ie=0;ie<D.length;ie++)if(this.style._layers[D[ie]].is3D()){this.opaquePassCutoff=ie;break}if(F){this.opaquePassCutoff=0;const ie=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!E.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||ie.length)&&(E.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(s,l){const m=s.context,v=m.gl,C=Vr.unblended,k=new Ki(v.LEQUAL,Ki.ReadWrite,[0,1]),G=l.getTerrainMesh(),J=l.sourceCache.getRenderableTiles(),fe=s.useProgram("terrainDepth");m.bindFramebuffer.set(l.getFramebuffer("depth").framebuffer),m.viewport.set([0,0,s.width/devicePixelRatio,s.height/devicePixelRatio]),m.clear({color:E.Color.transparent,depth:1});for(const pe of J){const ot=l.getTerrainData(pe.tileID),nt=s.transform.calculatePosMatrix(pe.tileID.toUnwrapped());fe.draw(m,v.TRIANGLES,k,bo.disabled,C,vi.backCCW,{u_matrix:nt},ot,"terrain",G.vertexBuffer,G.indexBuffer,G.segments)}m.bindFramebuffer.set(null),m.viewport.set([0,0,s.width,s.height])}(this,this.style.terrain),function(s,l){const m=s.context,v=m.gl,C=Vr.unblended,k=new Ki(v.LEQUAL,Ki.ReadWrite,[0,1]),G=l.getTerrainMesh(),J=l.getCoordsTexture(),fe=l.sourceCache.getRenderableTiles(),pe=s.useProgram("terrainCoords");m.bindFramebuffer.set(l.getFramebuffer("coords").framebuffer),m.viewport.set([0,0,s.width/devicePixelRatio,s.height/devicePixelRatio]),m.clear({color:E.Color.transparent,depth:1}),l.coordsIndex=[];for(const ot of fe){const nt=l.getTerrainData(ot.tileID);m.activeTexture.set(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,J.texture);const wt=s.transform.calculatePosMatrix(ot.tileID.toUnwrapped());pe.draw(m,v.TRIANGLES,k,bo.disabled,C,vi.backCCW,{u_matrix:wt,u_terrain_coords_id:(255-l.coordsIndex.length)/255,u_texture:0},nt,"terrain",G.vertexBuffer,G.indexBuffer,G.segments),l.coordsIndex.push(ot.tileID.key)}m.bindFramebuffer.set(null),m.viewport.set([0,0,s.width,s.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const ie of D){const s=this.style._layers[ie];if(!s.hasOffscreenPass()||s.isHidden(this.transform.zoom))continue;const l=Z[s.source];("custom"===s.type||l.length)&&this.renderLayer(this,A[s.source],s,l)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:y.showOverdrawInspector?E.Color.black:E.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=y.showOverdrawInspector,this.depthRangeFor3D=[0,1-(u._order.length+2)*this.numSublayers*this.depthEpsilon],!F)for(this.renderPass="opaque",this.currentLayer=D.length-1;this.currentLayer>=0;this.currentLayer--){const ie=this.style._layers[D[this.currentLayer]],s=A[ie.source],l=$[ie.source];this._renderTileClippingMasks(ie,l),this.renderLayer(this,s,ie,l)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<D.length;this.currentLayer++){const ie=this.style._layers[D[this.currentLayer]],s=A[ie.source];if(F&&F.renderLayer(ie))continue;const l=("symbol"===ie.type?ee:Z)[ie.source];this._renderTileClippingMasks(ie,$[ie.source]),this.renderLayer(this,s,ie,l)}if(this.options.showTileBoundaries){let ie,s;Object.values(this.style._layers).forEach(l=>{l.source&&!l.isHidden(this.transform.zoom)&&(l.source!==(s&&s.id)&&(s=this.style.sourceCaches[l.source]),(!ie||ie.getSource().maxzoom<s.getSource().maxzoom)&&(ie=s))}),ie&&nc.debug(this,ie,ie.getVisibleCoordinates())}this.options.showPadding&&function(ie){const s=ie.transform.padding;$s(ie,ie.transform.height-(s.top||0),3,$u),$s(ie,s.bottom||0,3,go),Na(ie,s.left||0,3,Mc),Na(ie,ie.transform.width-(s.right||0),3,_n);const l=ie.transform.centerPoint;var m,v,C,k;ao(m=ie,(v=l.x)-1,(C=ie.transform.height-l.y)-10,2,20,k=Pr),ao(m,v-10,C-1,20,2,k)}(this),this.context.setDefault()}renderLayer(u,y,D,A){D.isHidden(this.transform.zoom)||("background"===D.type||"custom"===D.type||(A||[]).length)&&(this.id=D.id,this.gpuTimingStart(D),nc[D.type](u,y,D,A,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(u){if(!this.options.gpuTiming)return;const y=this.context.extTimerQuery;let D=this.gpuTimers[u.id];D||(D=this.gpuTimers[u.id]={calls:0,cpuTime:0,query:y.createQueryEXT()}),D.calls++,y.beginQueryEXT(y.TIME_ELAPSED_EXT,D.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const u=this.context.extTimerQuery;u.endQueryEXT(u.TIME_ELAPSED_EXT)}collectGpuTimers(){const u=this.gpuTimers;return this.gpuTimers={},u}queryGpuTimers(u){const y={};for(const D in u){const A=u[D],F=this.context.extTimerQuery,$=F.getQueryObjectEXT(A.query,F.QUERY_RESULT_EXT)/1e6;F.deleteQueryEXT(A.query),y[D]=$}return y}translatePosMatrix(u,y,D,A,F){if(!D[0]&&!D[1])return u;const $=F?"map"===A?this.transform.angle:0:"viewport"===A?-this.transform.angle:0;if($){const ie=Math.sin($),s=Math.cos($);D=[D[0]*s-D[1]*ie,D[0]*ie+D[1]*s]}const Z=[F?D[0]:Lr(y,D[0],this.transform.zoom),F?D[1]:Lr(y,D[1],this.transform.zoom),0],ee=new Float32Array(16);return E.translate(ee,u,Z),ee}saveTileTexture(u){const y=this._tileTextures[u.size[0]];y?y.push(u):this._tileTextures[u.size[0]]=[u]}getTileTexture(u){const y=this._tileTextures[u];return y&&y.length>0?y.pop():null}isPatternMissing(u){if(!u)return!1;if(!u.from||!u.to)return!0;const y=this.imageManager.getPattern(u.from.toString()),D=this.imageManager.getPattern(u.to.toString());return!y||!D}useProgram(u,y){this.cache=this.cache||{};const D=u+(y?y.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[D]||(this.cache[D]=new Cs(this.context,u,zi[u],y,ka[u],this._showOverdrawInspector,this.style.terrain)),this.cache[D]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const u=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(u.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Te(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class ic{constructor(u,y){this.points=u,this.planes=y}static fromInvProjectionMatrix(u,y,D){const A=Math.pow(2,D),F=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(Z=>{const ee=1/(Z=E.transformMat4([],Z,u))[3]/y*A;return E.mul$1(Z,Z,[ee,ee,1/Z[3],ee])}),$=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(Z=>{const ee=E.sub([],F[Z[0]],F[Z[1]]),ie=E.sub([],F[Z[2]],F[Z[1]]),s=E.normalize([],E.cross([],ee,ie)),l=-E.dot(s,F[Z[1]]);return s.concat(l)});return new ic(F,$)}}class sa{constructor(u,y){this.min=u,this.max=y,this.center=E.scale$1([],E.add([],this.min,this.max),.5)}quadrant(u){const y=[u%2==0,u<2],D=E.clone$2(this.min),A=E.clone$2(this.max);for(let F=0;F<y.length;F++)D[F]=y[F]?this.min[F]:this.center[F],A[F]=y[F]?this.center[F]:this.max[F];return A[2]=this.max[2],new sa(D,A)}distanceX(u){return Math.max(Math.min(this.max[0],u[0]),this.min[0])-u[0]}distanceY(u){return Math.max(Math.min(this.max[1],u[1]),this.min[1])-u[1]}intersects(u){const y=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let D=!0;for(let A=0;A<u.planes.length;A++){const F=u.planes[A];let $=0;for(let Z=0;Z<y.length;Z++)E.dot$1(F,y[Z])>=0&&$++;if(0===$)return 0;$!==y.length&&(D=!1)}if(D)return 2;for(let A=0;A<3;A++){let F=Number.MAX_VALUE,$=-Number.MAX_VALUE;for(let Z=0;Z<u.points.length;Z++){const ee=u.points[Z][A]-this.min[A];F=Math.min(F,ee),$=Math.max($,ee)}if($<0||F>this.max[A]-this.min[A])return 0}return 1}}class gs{constructor(u=0,y=0,D=0,A=0){if(isNaN(u)||u<0||isNaN(y)||y<0||isNaN(D)||D<0||isNaN(A)||A<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=u,this.bottom=y,this.left=D,this.right=A}interpolate(u,y,D){return null!=y.top&&null!=u.top&&(this.top=E.number(u.top,y.top,D)),null!=y.bottom&&null!=u.bottom&&(this.bottom=E.number(u.bottom,y.bottom,D)),null!=y.left&&null!=u.left&&(this.left=E.number(u.left,y.left,D)),null!=y.right&&null!=u.right&&(this.right=E.number(u.right,y.right,D)),this}getCenter(u,y){const D=E.clamp((this.left+u-this.right)/2,0,u),A=E.clamp((this.top+y-this.bottom)/2,0,y);return new E.pointGeometry(D,A)}equals(u){return this.top===u.top&&this.bottom===u.bottom&&this.left===u.left&&this.right===u.right}clone(){return new gs(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Qo{constructor(u,y,D,A,F){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=void 0===F||!!F,this._minZoom=u||0,this._maxZoom=y||22,this._minPitch=D??0,this._maxPitch=A??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new E.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new gs,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const u=new Qo(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return u.tileSize=this.tileSize,u.latRange=this.latRange,u.width=this.width,u.height=this.height,u._center=this._center,u._elevation=this._elevation,u.zoom=this.zoom,u.angle=this.angle,u._fov=this._fov,u._pitch=this._pitch,u._unmodified=this._unmodified,u._edgeInsets=this._edgeInsets.clone(),u._calcMatrices(),u}get minZoom(){return this._minZoom}set minZoom(u){this._minZoom!==u&&(this._minZoom=u,this.zoom=Math.max(this.zoom,u))}get maxZoom(){return this._maxZoom}set maxZoom(u){this._maxZoom!==u&&(this._maxZoom=u,this.zoom=Math.min(this.zoom,u))}get minPitch(){return this._minPitch}set minPitch(u){this._minPitch!==u&&(this._minPitch=u,this.pitch=Math.max(this.pitch,u))}get maxPitch(){return this._maxPitch}set maxPitch(u){this._maxPitch!==u&&(this._maxPitch=u,this.pitch=Math.min(this.pitch,u))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(u){void 0===u?u=!0:null===u&&(u=!1),this._renderWorldCopies=u}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new E.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(u){const y=-E.wrap(u,-180,180)*Math.PI/180;var D,A,F,$,Z,ee,ie,s,l,m;this.angle!==y&&(this._unmodified=!1,this.angle=y,this._calcMatrices(),this.rotationMatrix=(D=new E.ARRAY_TYPE(4),E.ARRAY_TYPE!=Float32Array&&(D[1]=0,D[2]=0),D[0]=1,D[3]=1,D),A=this.rotationMatrix,$=this.angle,Z=(F=this.rotationMatrix)[0],ee=F[1],ie=F[2],s=F[3],l=Math.sin($),m=Math.cos($),A[0]=Z*m+ie*l,A[1]=ee*m+s*l,A[2]=Z*-l+ie*m,A[3]=ee*-l+s*m)}get pitch(){return this._pitch/Math.PI*180}set pitch(u){const y=E.clamp(u,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==y&&(this._unmodified=!1,this._pitch=y,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(u){u=Math.max(.01,Math.min(60,u)),this._fov!==u&&(this._unmodified=!1,this._fov=u/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(u){const y=Math.min(Math.max(u,this.minZoom),this.maxZoom);this._zoom!==y&&(this._unmodified=!1,this._zoom=y,this.scale=this.zoomScale(y),this.tileZoom=Math.floor(y),this.zoomFraction=y-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(u){u.lat===this._center.lat&&u.lng===this._center.lng||(this._unmodified=!1,this._center=u,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(u){u!==this._elevation&&(this._elevation=u,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(u){this._edgeInsets.equals(u)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,u,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(u){return this._edgeInsets.equals(u)}interpolatePadding(u,y,D){this._unmodified=!1,this._edgeInsets.interpolate(u,y,D),this._constrain(),this._calcMatrices()}coveringZoomLevel(u){const y=(u.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/u.tileSize));return Math.max(0,y)}getVisibleUnwrappedCoordinates(u){const y=[new E.UnwrappedTileID(0,u)];if(this._renderWorldCopies){const D=this.pointCoordinate(new E.pointGeometry(0,0)),A=this.pointCoordinate(new E.pointGeometry(this.width,0)),F=this.pointCoordinate(new E.pointGeometry(this.width,this.height)),$=this.pointCoordinate(new E.pointGeometry(0,this.height)),Z=Math.floor(Math.min(D.x,A.x,F.x,$.x)),ee=Math.floor(Math.max(D.x,A.x,F.x,$.x)),ie=1;for(let s=Z-ie;s<=ee+ie;s++)0!==s&&y.push(new E.UnwrappedTileID(s,u))}return y}coveringTiles(u){var y,D;let A=this.coveringZoomLevel(u);const F=A;if(void 0!==u.minzoom&&A<u.minzoom)return[];void 0!==u.maxzoom&&A>u.maxzoom&&(A=u.maxzoom);const $=this.pointCoordinate(this.getCameraPoint()),Z=E.MercatorCoordinate.fromLngLat(this.center),ee=Math.pow(2,A),ie=[ee*$.x,ee*$.y,0],s=[ee*Z.x,ee*Z.y,0],l=ic.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,A);let m=u.minzoom||0;!u.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(m=A);const v=u.terrain?2/Math.min(this.tileSize,u.tileSize)*this.tileSize:3,C=pe=>({aabb:new sa([pe*ee,0,0],[(pe+1)*ee,ee,0]),zoom:0,x:0,y:0,wrap:pe,fullyVisible:!1}),k=[],G=[],J=A,fe=u.reparseOverscaled?F:A;if(this._renderWorldCopies)for(let pe=1;pe<=3;pe++)k.push(C(-pe)),k.push(C(pe));for(k.push(C(0));k.length>0;){const pe=k.pop(),ot=pe.x,nt=pe.y;let wt=pe.fullyVisible;if(!wt){const Ln=pe.aabb.intersects(l);if(0===Ln)continue;wt=2===Ln}const Pt=u.terrain?ie:s,$t=pe.aabb.distanceX(Pt),Ft=pe.aabb.distanceY(Pt),En=Math.max(Math.abs($t),Math.abs(Ft)),Dn=v+(1<<J-pe.zoom)-2;if(pe.zoom===J||En>Dn&&pe.zoom>=m){const Ln=J-pe.zoom,Zi=ie[0]-.5-(ot<<Ln),Qi=ie[1]-.5-(nt<<Ln);G.push({tileID:new E.OverscaledTileID(pe.zoom===J?fe:pe.zoom,pe.wrap,pe.zoom,ot,nt),distanceSq:E.sqrLen([s[0]-.5-ot,s[1]-.5-nt]),tileDistanceToCamera:Math.sqrt(Zi*Zi+Qi*Qi)})}else for(let Ln=0;Ln<4;Ln++){const Zi=(ot<<1)+Ln%2,Qi=(nt<<1)+(Ln>>1),ki=pe.zoom+1;let cs=pe.aabb.quadrant(Ln);if(u.terrain){const mr=new E.OverscaledTileID(ki,pe.wrap,ki,Zi,Qi),Zr=u.terrain.getMinMaxElevation(mr),$r=null!==(y=Zr.minElevation)&&void 0!==y?y:this.elevation,us=null!==(D=Zr.maxElevation)&&void 0!==D?D:this.elevation;cs=new sa([cs.min[0],cs.min[1],$r],[cs.max[0],cs.max[1],us])}k.push({aabb:cs,zoom:ki,x:Zi,y:Qi,wrap:pe.wrap,fullyVisible:wt})}}return G.sort((pe,ot)=>pe.distanceSq-ot.distanceSq).map(pe=>pe.tileID)}resize(u,y){this.width=u,this.height=y,this.pixelsToGLUnits=[2/u,-2/y],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(u){return Math.pow(2,u)}scaleZoom(u){return Math.log(u)/Math.LN2}project(u){const y=E.clamp(u.lat,-this.maxValidLatitude,this.maxValidLatitude);return new E.pointGeometry(E.mercatorXfromLng(u.lng)*this.worldSize,E.mercatorYfromLat(y)*this.worldSize)}unproject(u){return new E.MercatorCoordinate(u.x/this.worldSize,u.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(u){this.freezeElevation||(this.elevation=u?this.getElevation(this._center,u):0)}getElevation(u,y){const D=E.MercatorCoordinate.fromLngLat(u),A=(1<<this.tileZoom)*E.EXTENT,F=D.x*A,$=D.y*A,Z=Math.floor(F/E.EXTENT),ee=Math.floor($/E.EXTENT),ie=new E.OverscaledTileID(this.tileZoom,0,this.tileZoom,Z,ee);return y.getElevation(ie,F%E.EXTENT,$%E.EXTENT,E.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(u){const y=this.pointLocation(this.centerPoint,u),D=this.getElevation(y,u);if(!(this.elevation-D))return;const A=this.getCameraPosition(),F=E.MercatorCoordinate.fromLngLat(A.lngLat,A.altitude),$=E.MercatorCoordinate.fromLngLat(y,D),Z=F.x-$.x,ee=F.y-$.y,ie=F.z-$.z,s=Math.sqrt(Z*Z+ee*ee+ie*ie),l=this.scaleZoom(this.cameraToCenterDistance/s/this.tileSize);this._elevation=D,this._center=y,this.zoom=l}setLocationAtPoint(u,y){const D=this.pointCoordinate(y),A=this.pointCoordinate(this.centerPoint),F=this.locationCoordinate(u),$=new E.MercatorCoordinate(F.x-(D.x-A.x),F.y-(D.y-A.y));this.center=this.coordinateLocation($),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(u,y){return y?this.coordinatePoint(this.locationCoordinate(u),this.getElevation(u,y),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(u))}pointLocation(u,y){return this.coordinateLocation(this.pointCoordinate(u,y))}locationCoordinate(u){return E.MercatorCoordinate.fromLngLat(u)}coordinateLocation(u){return u&&u.toLngLat()}pointCoordinate(u,y){if(y){const m=y.pointCoordinate(u);if(null!=m)return m}const D=[u.x,u.y,0,1],A=[u.x,u.y,1,1];E.transformMat4(D,D,this.pixelMatrixInverse),E.transformMat4(A,A,this.pixelMatrixInverse);const F=D[3],$=A[3],Z=D[1]/F,ee=A[1]/$,ie=D[2]/F,s=A[2]/$,l=ie===s?0:(0-ie)/(s-ie);return new E.MercatorCoordinate(E.number(D[0]/F,A[0]/$,l)/this.worldSize,E.number(Z,ee,l)/this.worldSize)}coordinatePoint(u,y=0,D=this.pixelMatrix){const A=[u.x*this.worldSize,u.y*this.worldSize,y,1];return E.transformMat4(A,A,D),new E.pointGeometry(A[0]/A[3],A[1]/A[3])}getBounds(){const u=Math.max(0,this.height/2-this.getHorizon());return(new E.LngLatBounds).extend(this.pointLocation(new E.pointGeometry(0,u))).extend(this.pointLocation(new E.pointGeometry(this.width,u))).extend(this.pointLocation(new E.pointGeometry(this.width,this.height))).extend(this.pointLocation(new E.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new E.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(u){u?(this.lngRange=[u.getWest(),u.getEast()],this.latRange=[u.getSouth(),u.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(u,y=!1){const D=u.key,A=y?this._alignedPosMatrixCache:this._posMatrixCache;if(A[D])return A[D];const F=u.canonical,$=this.worldSize/this.zoomScale(F.z),Z=F.x+Math.pow(2,F.z)*u.wrap,ee=E.identity(new Float64Array(16));return E.translate(ee,ee,[Z*$,F.y*$,0]),E.scale(ee,ee,[$/E.EXTENT,$/E.EXTENT,1]),E.multiply(ee,y?this.alignedProjMatrix:this.projMatrix,ee),A[D]=new Float32Array(ee),A[D]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let u,y,D,A,F=-90,$=90,Z=-180,ee=180;const ie=this.size,s=this._unmodified;if(this.latRange){const v=this.latRange;F=E.mercatorYfromLat(v[1])*this.worldSize,$=E.mercatorYfromLat(v[0])*this.worldSize,u=$-F<ie.y?ie.y/($-F):0}if(this.lngRange){const v=this.lngRange;Z=E.wrap(E.mercatorXfromLng(v[0])*this.worldSize,0,this.worldSize),ee=E.wrap(E.mercatorXfromLng(v[1])*this.worldSize,0,this.worldSize),ee<Z&&(ee+=this.worldSize),y=ee-Z<ie.x?ie.x/(ee-Z):0}const l=this.point,m=Math.max(y||0,u||0);if(m)return this.center=this.unproject(new E.pointGeometry(y?(ee+Z)/2:l.x,u?($+F)/2:l.y)),this.zoom+=this.scaleZoom(m),this._unmodified=s,void(this._constraining=!1);if(this.latRange){const v=l.y,C=ie.y/2;v-C<F&&(A=F+C),v+C>$&&(A=$-C)}if(this.lngRange){const v=(Z+ee)/2,C=E.wrap(l.x,v-this.worldSize/2,v+this.worldSize/2),k=ie.x/2;C-k<Z&&(D=Z+k),C+k>ee&&(D=ee-k)}void 0===D&&void 0===A||(this.center=this.unproject(new E.pointGeometry(void 0!==D?D:l.x,void 0!==A?A:l.y)).wrap()),this._unmodified=s,this._constraining=!1}_calcMatrices(){if(!this.height)return;const u=this.centerOffset,y=this.point.x,D=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=E.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let A=E.identity(new Float64Array(16));E.scale(A,A,[this.width/2,-this.height/2,1]),E.translate(A,A,[1,-1,0]),this.labelPlaneMatrix=A,A=E.identity(new Float64Array(16)),E.scale(A,A,[1,-1,1]),E.translate(A,A,[-1,-1,0]),E.scale(A,A,[2/this.width,2/this.height,1]),this.glCoordMatrix=A,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const F=Math.PI/2+this._pitch,$=this._fov*(.5+u.y/this.height),Z=Math.sin($)*this.cameraToSeaLevelDistance/Math.sin(E.clamp(Math.PI-F-$,.01,Math.PI-.01)),ee=this.getHorizon(),ie=2*Math.atan(ee/this.cameraToCenterDistance)*(.5+u.y/(2*ee)),s=Math.sin(ie)*this.cameraToSeaLevelDistance/Math.sin(E.clamp(Math.PI-F-ie,.01,Math.PI-.01)),l=Math.cos(Math.PI/2-this._pitch)*Z+this.cameraToSeaLevelDistance,m=Math.cos(Math.PI/2-this._pitch)*s+this.cameraToSeaLevelDistance,v=1.01*Math.min(l,m),C=this.height/50;A=new Float64Array(16),E.perspective(A,this._fov,this.width/this.height,C,v),A[8]=2*-u.x/this.width,A[9]=2*u.y/this.height,E.scale(A,A,[1,-1,1]),E.translate(A,A,[0,0,-this.cameraToCenterDistance]),E.rotateX(A,A,this._pitch),E.rotateZ(A,A,this.angle),E.translate(A,A,[-y,-D,0]),this.mercatorMatrix=E.scale([],A,[this.worldSize,this.worldSize,this.worldSize]),E.scale(A,A,[1,1,this._pixelPerMeter]),this.pixelMatrix=E.multiply(new Float64Array(16),this.labelPlaneMatrix,A),E.translate(A,A,[0,0,-this.elevation]),this.projMatrix=A,this.invProjMatrix=E.invert([],A),this.pixelMatrix3D=E.multiply(new Float64Array(16),this.labelPlaneMatrix,A);const k=this.width%2/2,G=this.height%2/2,J=Math.cos(this.angle),fe=Math.sin(this.angle),pe=y-Math.round(y)+J*k+fe*G,ot=D-Math.round(D)+J*G+fe*k,nt=new Float64Array(A);if(E.translate(nt,nt,[pe>.5?pe-1:pe,ot>.5?ot-1:ot,0]),this.alignedProjMatrix=nt,A=E.invert(new Float64Array(16),this.pixelMatrix),!A)throw new Error("failed to invert matrix");this.pixelMatrixInverse=A,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const u=this.pointCoordinate(new E.pointGeometry(0,0)),y=[u.x*this.worldSize,u.y*this.worldSize,0,1];return E.transformMat4(y,y,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const u=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new E.pointGeometry(0,u))}getCameraQueryGeometry(u){const y=this.getCameraPoint();if(1===u.length)return[u[0],y];{let D=y.x,A=y.y,F=y.x,$=y.y;for(const Z of u)D=Math.min(D,Z.x),A=Math.min(A,Z.y),F=Math.max(F,Z.x),$=Math.max($,Z.y);return[new E.pointGeometry(D,A),new E.pointGeometry(F,A),new E.pointGeometry(F,$),new E.pointGeometry(D,$),new E.pointGeometry(D,A)]}}}class Vd{constructor(u){this._hashName=u&&encodeURIComponent(u),E.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(y,D){let A=!1,F=null;const $=()=>{F=null,A&&(y(),F=setTimeout($,300),A=!1)};return()=>(A=!0,F||$(),F)}(this._updateHashUnthrottled.bind(this))}addTo(u){return this._map=u,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(u){const y=this._map.getCenter(),D=Math.round(100*this._map.getZoom())/100,A=Math.ceil((D*Math.LN2+Math.log(512/360/.5))/Math.LN10),F=Math.pow(10,A),$=Math.round(y.lng*F)/F,Z=Math.round(y.lat*F)/F,ee=this._map.getBearing(),ie=this._map.getPitch();let s="";if(s+=u?`/${$}/${Z}/${D}`:`${D}/${Z}/${$}`,(ee||ie)&&(s+="/"+Math.round(10*ee)/10),ie&&(s+=`/${Math.round(ie)}`),this._hashName){const l=this._hashName;let m=!1;const v=window.location.hash.slice(1).split("&").map(C=>{const k=C.split("=")[0];return k===l?(m=!0,`${k}=${s}`):C}).filter(C=>C);return m||v.push(`${l}=${s}`),`#${v.join("&")}`}return`#${s}`}_getCurrentHash(){const u=window.location.hash.replace("#","");if(this._hashName){let y;return u.split("&").map(D=>D.split("=")).forEach(D=>{D[0]===this._hashName&&(y=D)}),(y&&y[1]||"").split("/")}return u.split("/")}_onHashChange(){const u=this._getCurrentHash();if(u.length>=3&&!u.some(y=>isNaN(y))){const y=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:y,pitch:+(u[4]||0)}),!0}return!1}_updateHashUnthrottled(){const u=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,u)}catch{}}}const Qa={linearity:.3,easing:E.bezier(0,0,.3,1)},za=E.extend({deceleration:2500,maxSpeed:1400},Qa),wh=E.extend({deceleration:20,maxSpeed:1400},Qa),Gd=E.extend({deceleration:1e3,maxSpeed:360},Qa),$l=E.extend({deceleration:1e3,maxSpeed:90},Qa);class Il{constructor(u){this._map=u,this.clear()}clear(){this._inertiaBuffer=[]}record(u){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:E.exported.now(),settings:u})}_drainInertiaBuffer(){const u=this._inertiaBuffer,y=E.exported.now();for(;u.length>0&&y-u[0].time>160;)u.shift()}_onMoveEnd(u){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const y={zoom:0,bearing:0,pitch:0,pan:new E.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:F}of this._inertiaBuffer)y.zoom+=F.zoomDelta||0,y.bearing+=F.bearingDelta||0,y.pitch+=F.pitchDelta||0,F.panDelta&&y.pan._add(F.panDelta),F.around&&(y.around=F.around),F.pinchAround&&(y.pinchAround=F.pinchAround);const D=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,A={};if(y.pan.mag()){const F=rc(y.pan.mag(),D,E.extend({},za,u||{}));A.offset=y.pan.mult(F.amount/y.pan.mag()),A.center=this._map.transform.center,_s(A,F)}if(y.zoom){const F=rc(y.zoom,D,wh);A.zoom=this._map.transform.zoom+F.amount,_s(A,F)}if(y.bearing){const F=rc(y.bearing,D,Gd);A.bearing=this._map.transform.bearing+E.clamp(F.amount,-179,179),_s(A,F)}if(y.pitch){const F=rc(y.pitch,D,$l);A.pitch=this._map.transform.pitch+F.amount,_s(A,F)}if(A.zoom||A.bearing){const F=void 0===y.pinchAround?y.around:y.pinchAround;A.around=F?this._map.unproject(F):this._map.getCenter()}return this.clear(),E.extend(A,{noMoveStart:!0})}}function _s(T,u){(!T.duration||T.duration<u.duration)&&(T.duration=u.duration,T.easing=u.easing)}function rc(T,u,y){const{maxSpeed:D,linearity:A,deceleration:F}=y,$=E.clamp(T*A/(u/1e3),-D,D),Z=Math.abs($)/(F*A);return{easing:y.easing,duration:1e3*Z,amount:$*(Z/2)}}class _o extends E.Event{constructor(u,y,D,A={}){const F=xe.mousePos(y.getCanvasContainer(),D),$=y.unproject(F);super(u,E.extend({point:F,lngLat:$,originalEvent:D},A)),this._defaultPrevented=!1,this.target=y}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Ua extends E.Event{constructor(u,y,D){const A="touchend"===u?D.changedTouches:D.touches,F=xe.touchPos(y.getCanvasContainer(),A),$=F.map(ee=>y.unproject(ee)),Z=F.reduce((ee,ie,s,l)=>ee.add(ie.div(l.length)),new E.pointGeometry(0,0));super(u,{points:F,point:Z,lngLats:$,lngLat:y.unproject(Z),originalEvent:D}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class aa extends E.Event{constructor(u,y,D){super(u,{originalEvent:D}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class $d{constructor(u,y){this._map=u,this._clickTolerance=y.clickTolerance}reset(){delete this._mousedownPos}wheel(u){return this._firePreventable(new aa(u.type,this._map,u))}mousedown(u,y){return this._mousedownPos=y,this._firePreventable(new _o(u.type,this._map,u))}mouseup(u){this._map.fire(new _o(u.type,this._map,u))}click(u,y){this._mousedownPos&&this._mousedownPos.dist(y)>=this._clickTolerance||this._map.fire(new _o(u.type,this._map,u))}dblclick(u){return this._firePreventable(new _o(u.type,this._map,u))}mouseover(u){this._map.fire(new _o(u.type,this._map,u))}mouseout(u){this._map.fire(new _o(u.type,this._map,u))}touchstart(u){return this._firePreventable(new Ua(u.type,this._map,u))}touchmove(u){this._map.fire(new Ua(u.type,this._map,u))}touchend(u){this._map.fire(new Ua(u.type,this._map,u))}touchcancel(u){this._map.fire(new Ua(u.type,this._map,u))}_firePreventable(u){if(this._map.fire(u),u.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class el{constructor(u){this._map=u}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(u){this._map.fire(new _o(u.type,this._map,u))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new _o("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(u){this._delayContextMenu?this._contextMenuEvent=u:this._ignoreContextMenu||this._map.fire(new _o(u.type,this._map,u)),this._map.listens("contextmenu")&&u.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class _c{constructor(u,y){this._map=u,this._el=u.getCanvasContainer(),this._container=u.getContainer(),this._clickTolerance=y.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(u,y){this.isEnabled()&&u.shiftKey&&0===u.button&&(xe.disableDrag(),this._startPos=this._lastPos=y,this._active=!0)}mousemoveWindow(u,y){if(!this._active)return;const D=y;if(this._lastPos.equals(D)||!this._box&&D.dist(this._startPos)<this._clickTolerance)return;const A=this._startPos;this._lastPos=D,this._box||(this._box=xe.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",u));const F=Math.min(A.x,D.x),$=Math.max(A.x,D.x),Z=Math.min(A.y,D.y),ee=Math.max(A.y,D.y);xe.setTransform(this._box,`translate(${F}px,${Z}px)`),this._box.style.width=$-F+"px",this._box.style.height=ee-Z+"px"}mouseupWindow(u,y){if(!this._active||0!==u.button)return;const D=this._startPos,A=y;if(this.reset(),xe.suppressClick(),D.x!==A.x||D.y!==A.y)return this._map.fire(new E.Event("boxzoomend",{originalEvent:u})),{cameraAnimation:F=>F.fitScreenCoordinates(D,A,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",u)}keydown(u){this._active&&27===u.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",u))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(xe.remove(this._box),this._box=null),xe.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(u,y){return this._map.fire(new E.Event(u,{originalEvent:y}))}}function va(T,u){if(T.length!==u.length)throw new Error(`The number of touches and points are not equal - touches ${T.length}, points ${u.length}`);const y={};for(let D=0;D<T.length;D++)y[T[D].identifier]=u[D];return y}class vs{constructor(u){this.reset(),this.numTouches=u.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(u,y,D){(this.centroid||D.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=u.timeStamp),D.length===this.numTouches&&(this.centroid=function(A){const F=new E.pointGeometry(0,0);for(const $ of A)F._add($);return F.div(A.length)}(y),this.touches=va(D,y)))}touchmove(u,y,D){if(this.aborted||!this.centroid)return;const A=va(D,y);for(const F in this.touches){const $=this.touches[F],Z=A[F];(!Z||Z.dist($)>30)&&(this.aborted=!0)}}touchend(u,y,D){if((!this.centroid||u.timeStamp-this.startTime>500)&&(this.aborted=!0),0===D.length){const A=!this.aborted&&this.centroid;if(this.reset(),A)return A}}}class Va{constructor(u){this.singleTap=new vs(u),this.numTaps=u.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(u,y,D){this.singleTap.touchstart(u,y,D)}touchmove(u,y,D){this.singleTap.touchmove(u,y,D)}touchend(u,y,D){const A=this.singleTap.touchend(u,y,D);if(A){const F=u.timeStamp-this.lastTime<500,$=!this.lastTap||this.lastTap.dist(A)<30;if(F&&$||this.reset(),this.count++,this.lastTime=u.timeStamp,this.lastTap=A,this.count===this.numTaps)return this.reset(),A}}}class la{constructor(){this._zoomIn=new Va({numTouches:1,numTaps:2}),this._zoomOut=new Va({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(u,y,D){this._zoomIn.touchstart(u,y,D),this._zoomOut.touchstart(u,y,D)}touchmove(u,y,D){this._zoomIn.touchmove(u,y,D),this._zoomOut.touchmove(u,y,D)}touchend(u,y,D){const A=this._zoomIn.touchend(u,y,D),F=this._zoomOut.touchend(u,y,D);return A?(this._active=!0,u.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:$=>$.easeTo({duration:300,zoom:$.getZoom()+1,around:$.unproject(A)},{originalEvent:u})}):F?(this._active=!0,u.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:$=>$.easeTo({duration:300,zoom:$.getZoom()-1,around:$.unproject(F)},{originalEvent:u})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Eh={0:1,2:2};class Hl{constructor(u){this.reset(),this._clickTolerance=u.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(u,y){return!1}_move(u,y){return{}}mousedown(u,y){if(this._lastPoint)return;const D=xe.mouseButton(u);this._correctButton(u,D)&&(this._lastPoint=y,this._eventButton=D)}mousemoveWindow(u,y){const D=this._lastPoint;if(D)if(u.preventDefault(),function(A,F){const $=Eh[F];return void 0===A.buttons||(A.buttons&$)!==$}(u,this._eventButton))this.reset();else if(this._moved||!(y.dist(D)<this._clickTolerance))return this._moved=!0,this._lastPoint=y,this._move(D,y)}mouseupWindow(u){this._lastPoint&&xe.mouseButton(u)===this._eventButton&&(this._moved&&xe.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class bs extends Hl{mousedown(u,y){super.mousedown(u,y),this._lastPoint&&(this._active=!0)}_correctButton(u,y){return 0===y&&!u.ctrlKey}_move(u,y){return{around:y,panDelta:y.sub(u)}}}class io extends Hl{_correctButton(u,y){return 0===y&&u.ctrlKey||2===y}_move(u,y){const D=.8*(y.x-u.x);if(D)return this._active=!0,{bearingDelta:D}}contextmenu(u){u.preventDefault()}}class wn extends Hl{_correctButton(u,y){return 0===y&&u.ctrlKey||2===y}_move(u,y){const D=-.5*(y.y-u.y);if(D)return this._active=!0,{pitchDelta:D}}contextmenu(u){u.preventDefault()}}class Tl{constructor(u,y){this._minTouches=u.cooperativeGestures?2:1,this._clickTolerance=u.clickTolerance||1,this._map=y,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new E.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(u,y,D){return this._calculateTransform(u,y,D)}touchmove(u,y,D){if(this._map._cooperativeGestures&&(2===this._minTouches&&D.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(u,!1,D.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(D.length<this._minTouches))return u.preventDefault(),this._calculateTransform(u,y,D)}touchend(u,y,D){this._calculateTransform(u,y,D),this._active&&D.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(u,y,D){D.length>0&&(this._active=!0);const A=va(D,y),F=new E.pointGeometry(0,0),$=new E.pointGeometry(0,0);let Z=0;for(const ie in A){const s=A[ie],l=this._touches[ie];l&&(F._add(s),$._add(s.sub(l)),Z++,A[ie]=s)}if(this._touches=A,Z<this._minTouches||!$.mag())return;const ee=$.div(Z);return this._sum._add(ee),this._sum.mag()<this._clickTolerance?void 0:{around:F.div(Z),panDelta:ee}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ca{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(u){}_move(u,y,D){return{}}touchstart(u,y,D){this._firstTwoTouches||D.length<2||(this._firstTwoTouches=[D[0].identifier,D[1].identifier],this._start([y[0],y[1]]))}touchmove(u,y,D){if(!this._firstTwoTouches)return;u.preventDefault();const[A,F]=this._firstTwoTouches,$=yc(D,y,A),Z=yc(D,y,F);if(!$||!Z)return;const ee=this._aroundCenter?null:$.add(Z).div(2);return this._move([$,Z],ee,u)}touchend(u,y,D){if(!this._firstTwoTouches)return;const[A,F]=this._firstTwoTouches,$=yc(D,y,A),Z=yc(D,y,F);$&&Z||(this._active&&xe.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(u){this._enabled=!0,this._aroundCenter=!!u&&"center"===u.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function yc(T,u,y){for(let D=0;D<T.length;D++)if(T[D].identifier===y)return u[D]}function $c(T,u){return Math.log(T/u)/Math.LN2}class Un extends ca{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(u){this._startDistance=this._distance=u[0].dist(u[1])}_move(u,y){const D=this._distance;if(this._distance=u[0].dist(u[1]),this._active||!(Math.abs($c(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:$c(this._distance,D),pinchAround:y}}}function ua(T,u){return 180*T.angleWith(u)/Math.PI}class Hc extends ca{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(u){this._startVector=this._vector=u[0].sub(u[1]),this._minDiameter=u[0].dist(u[1])}_move(u,y){const D=this._vector;if(this._vector=u[0].sub(u[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ua(this._vector,D),pinchAround:y}}_isBelowThreshold(u){this._minDiameter=Math.min(this._minDiameter,u.mag());const y=25/(Math.PI*this._minDiameter)*360,D=ua(u,this._startVector);return Math.abs(D)<y}}function wo(T){return Math.abs(T.y)>Math.abs(T.x)}class jc extends ca{constructor(u){super(),this._map=u}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(u,y,D){super.touchstart(u,y,D),this._currentTouchCount=D.length}_start(u){this._lastPoints=u,wo(u[0].sub(u[1]))&&(this._valid=!1)}_move(u,y,D){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const A=u[0].sub(this._lastPoints[0]),F=u[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(A,F,D.timeStamp),this._valid?(this._lastPoints=u,this._active=!0,{pitchDelta:(A.y+F.y)/2*-.5}):void 0}gestureBeginsVertically(u,y,D){if(void 0!==this._valid)return this._valid;const A=u.mag()>=2,F=y.mag()>=2;if(!A&&!F)return;if(!A||!F)return void 0===this._firstMove&&(this._firstMove=D),D-this._firstMove<100&&void 0;const $=u.y>0==y.y>0;return wo(u)&&wo(y)&&$}}const ba={panStep:100,bearingStep:15,pitchStep:10};class Ts{constructor(){const u=ba;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(u){if(u.altKey||u.ctrlKey||u.metaKey)return;let y=0,D=0,A=0,F=0,$=0;switch(u.keyCode){case 61:case 107:case 171:case 187:y=1;break;case 189:case 109:case 173:y=-1;break;case 37:u.shiftKey?D=-1:(u.preventDefault(),F=-1);break;case 39:u.shiftKey?D=1:(u.preventDefault(),F=1);break;case 38:u.shiftKey?A=1:(u.preventDefault(),$=-1);break;case 40:u.shiftKey?A=-1:(u.preventDefault(),$=1);break;default:return}return this._rotationDisabled&&(D=0,A=0),{cameraAnimation:Z=>{const ee=Z.getZoom();Z.easeTo({duration:300,easeId:"keyboardHandler",easing:fl,zoom:y?Math.round(ee)+y*(u.shiftKey?2:1):ee,bearing:Z.getBearing()+D*this._bearingStep,pitch:Z.getPitch()+A*this._pitchStep,offset:[-F*this._panStep,-$*this._panStep],center:Z.getCenter()},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function fl(T){return T*(2-T)}const pl=4.000244140625;class Al{constructor(u,y){this._map=u,this._el=u.getCanvasContainer(),this._handler=y,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,E.bindAll(["_onTimeout"],this)}setZoomRate(u){this._defaultZoomRate=u}setWheelZoomRate(u){this._wheelZoomRate=u}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(u){this.isEnabled()||(this._enabled=!0,this._aroundCenter=u&&"center"===u.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(u){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;u.preventDefault()}let y=u.deltaMode===WheelEvent.DOM_DELTA_LINE?40*u.deltaY:u.deltaY;const D=E.exported.now(),A=D-(this._lastWheelEventTime||0);this._lastWheelEventTime=D,0!==y&&y%pl==0?this._type="wheel":0!==y&&Math.abs(y)<4?this._type="trackpad":A>400?(this._type=null,this._lastValue=y,this._timeout=setTimeout(this._onTimeout,40,u)):this._type||(this._type=Math.abs(A*y)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,y+=this._lastValue)),u.shiftKey&&y&&(y/=4),this._type&&(this._lastWheelEvent=u,this._delta-=y,this._active||this._start(u)),u.preventDefault()}_onTimeout(u){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(u)}_start(u){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const y=xe.mousePos(this._el,u);this._around=E.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(y)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const u=this._map.transform;if(0!==this._delta){const Z="wheel"===this._type&&Math.abs(this._delta)>pl?this._wheelZoomRate:this._defaultZoomRate;let ee=2/(1+Math.exp(-Math.abs(this._delta*Z)));this._delta<0&&0!==ee&&(ee=1/ee);const ie="number"==typeof this._targetZoom?u.zoomScale(this._targetZoom):u.scale;this._targetZoom=Math.min(u.maxZoom,Math.max(u.minZoom,u.scaleZoom(ie*ee))),"wheel"===this._type&&(this._startZoom=u.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const y="number"==typeof this._targetZoom?this._targetZoom:u.zoom,D=this._startZoom,A=this._easing;let F,$=!1;if("wheel"===this._type&&D&&A){const Z=Math.min((E.exported.now()-this._lastWheelEventTime)/200,1),ee=A(Z);F=E.number(D,y,ee),Z<1?this._frameId||(this._frameId=!0):$=!0}else F=y,$=!0;return this._active=!0,$&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!$,zoomDelta:F-u.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(u){let y=E.ease;if(this._prevEase){const D=this._prevEase,A=(E.exported.now()-D.start)/D.duration,F=D.easing(A+.01)-D.easing(A),$=.27/Math.sqrt(F*F+1e-4)*.01,Z=Math.sqrt(.0729-$*$);y=E.bezier($,Z,.25,1)}return this._prevEase={start:E.exported.now(),duration:u,easing:y},y}reset(){this._active=!1}}class ml{constructor(u,y){this._clickZoom=u,this._tapZoom=y}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class qc{constructor(){this.reset()}reset(){this._active=!1}dblclick(u,y){return u.preventDefault(),{cameraAnimation:D=>{D.easeTo({duration:300,zoom:D.getZoom()+(u.shiftKey?-1:1),around:D.unproject(y)},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xs{constructor(){this._tap=new Va({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(u,y,D){this._swipePoint||(this._tapTime&&u.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?D.length>0&&(this._swipePoint=y[0],this._swipeTouch=D[0].identifier):this._tap.touchstart(u,y,D))}touchmove(u,y,D){if(this._tapTime){if(this._swipePoint){if(D[0].identifier!==this._swipeTouch)return;const A=y[0],F=A.y-this._swipePoint.y;return this._swipePoint=A,u.preventDefault(),this._active=!0,{zoomDelta:F/128}}}else this._tap.touchmove(u,y,D)}touchend(u,y,D){this._tapTime?this._swipePoint&&0===D.length&&this.reset():this._tap.touchend(u,y,D)&&(this._tapTime=u.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ds{constructor(u,y,D){this._el=u,this._mousePan=y,this._touchPan=D}enable(u){this._inertiaOptions=u||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ro{constructor(u,y,D){this._pitchWithRotate=u.pitchWithRotate,this._mouseRotate=y,this._mousePitch=D}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class wd{constructor(u,y,D,A){this._el=u,this._touchZoom=y,this._touchRotate=D,this._tapDragZoom=A,this._rotationDisabled=!1,this._enabled=!0}enable(u){this._touchZoom.enable(u),this._rotationDisabled||this._touchRotate.enable(u),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const vc=T=>T.zoom||T.drag||T.pitch||T.rotate;class Ks extends E.Event{}function Sa(T){return T.panDelta&&T.panDelta.mag()||T.zoomDelta||T.bearingDelta||T.pitchDelta}class uu{constructor(u,y){this._map=u,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Il(u),this._bearingSnap=y.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(y),E.bindAll(["handleEvent","handleWindowEvent"],this);const D=this._el;this._listeners=[[D,"touchstart",{passive:!0}],[D,"touchmove",{passive:!1}],[D,"touchend",void 0],[D,"touchcancel",void 0],[D,"mousedown",void 0],[D,"mousemove",void 0],[D,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[D,"mouseover",void 0],[D,"mouseout",void 0],[D,"dblclick",void 0],[D,"click",void 0],[D,"keydown",{capture:!1}],[D,"keyup",void 0],[D,"wheel",{passive:!1}],[D,"contextmenu",void 0],[window,"blur",void 0]];for(const[A,F,$]of this._listeners)xe.addEventListener(A,F,A===document?this.handleWindowEvent:this.handleEvent,$)}destroy(){for(const[u,y,D]of this._listeners)xe.removeEventListener(u,y,u===document?this.handleWindowEvent:this.handleEvent,D)}_addDefaultHandlers(u){const y=this._map,D=y.getCanvasContainer();this._add("mapEvent",new $d(y,u));const A=y.boxZoom=new _c(y,u);this._add("boxZoom",A);const F=new la,$=new qc;y.doubleClickZoom=new ml($,F),this._add("tapZoom",F),this._add("clickZoom",$);const Z=new xs;this._add("tapDragZoom",Z);const ee=y.touchPitch=new jc(y);this._add("touchPitch",ee);const ie=new io(u),s=new wn(u);y.dragRotate=new ro(u,ie,s),this._add("mouseRotate",ie,["mousePitch"]),this._add("mousePitch",s,["mouseRotate"]);const l=new bs(u),m=new Tl(u,y);y.dragPan=new ds(D,l,m),this._add("mousePan",l),this._add("touchPan",m,["touchZoom","touchRotate"]);const v=new Hc,C=new Un;y.touchZoomRotate=new wd(D,C,v,Z),this._add("touchRotate",v,["touchPan","touchZoom"]),this._add("touchZoom",C,["touchPan","touchRotate"]);const k=y.scrollZoom=new Al(y,this);this._add("scrollZoom",k,["mousePan"]);const G=y.keyboard=new Ts;this._add("keyboard",G),this._add("blockableMapEvent",new el(y));for(const J of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])u.interactive&&u[J]&&y[J].enable(u[J])}_add(u,y,D){this._handlers.push({handlerName:u,handler:y,allowed:D}),this._handlersById[u]=y}stop(u){if(!this._updatingCamera){for(const{handler:y}of this._handlers)y.reset();this._inertia.clear(),this._fireEvents({},{},u),this._changes=[]}}isActive(){for(const{handler:u}of this._handlers)if(u.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(vc(this._eventsInProgress))||this.isZooming()}_blockedByActive(u,y,D){for(const A in u)if(A!==D&&(!y||y.indexOf(A)<0))return!0;return!1}handleWindowEvent(u){this.handleEvent(u,`${u.type}Window`)}_getMapTouches(u){const y=[];for(const D of u)this._el.contains(D.target)&&y.push(D);return y}handleEvent(u,y){if("blur"===u.type)return void this.stop(!0);this._updatingCamera=!0;const D="renderFrame"===u.type?void 0:u,A={needsRenderFrame:!1},F={},$={},Z=u.touches,ee=Z?this._getMapTouches(Z):void 0,ie=ee?xe.touchPos(this._el,ee):xe.mousePos(this._el,u);for(const{handlerName:m,handler:v,allowed:C}of this._handlers){if(!v.isEnabled())continue;let k;this._blockedByActive($,C,m)?v.reset():v[y||u.type]&&(k=v[y||u.type](u,ie,ee),this.mergeHandlerResult(A,F,k,m,D),k&&k.needsRenderFrame&&this._triggerRenderFrame()),(k||v.isActive())&&($[m]=v)}const s={};for(const m in this._previousActiveHandlers)$[m]||(s[m]=D);this._previousActiveHandlers=$,(Object.keys(s).length||Sa(A))&&(this._changes.push([A,F,s]),this._triggerRenderFrame()),(Object.keys($).length||Sa(A))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:l}=A;l&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],l(this._map))}mergeHandlerResult(u,y,D,A,F){if(!D)return;E.extend(u,D);const $={handlerName:A,originalEvent:D.originalEvent||F};void 0!==D.zoomDelta&&(y.zoom=$),void 0!==D.panDelta&&(y.drag=$),void 0!==D.pitchDelta&&(y.pitch=$),void 0!==D.bearingDelta&&(y.rotate=$)}_applyChanges(){const u={},y={},D={};for(const[A,F,$]of this._changes)A.panDelta&&(u.panDelta=(u.panDelta||new E.pointGeometry(0,0))._add(A.panDelta)),A.zoomDelta&&(u.zoomDelta=(u.zoomDelta||0)+A.zoomDelta),A.bearingDelta&&(u.bearingDelta=(u.bearingDelta||0)+A.bearingDelta),A.pitchDelta&&(u.pitchDelta=(u.pitchDelta||0)+A.pitchDelta),void 0!==A.around&&(u.around=A.around),void 0!==A.pinchAround&&(u.pinchAround=A.pinchAround),A.noInertia&&(u.noInertia=A.noInertia),E.extend(y,F),E.extend(D,$);this._updateMapTransform(u,y,D),this._changes=[]}_updateMapTransform(u,y,D){const A=this._map,F=A.transform,$=A.style&&A.style.terrain;if(!(Sa(u)||$&&this._drag))return this._fireEvents(y,D,!0);let{panDelta:Z,zoomDelta:ee,bearingDelta:ie,pitchDelta:s,around:l,pinchAround:m}=u;void 0!==m&&(l=m),A._stop(!0),l=l||A.transform.centerPoint;const v=F.pointLocation(Z?l.sub(Z):l);ie&&(F.bearing+=ie),s&&(F.pitch+=s),ee&&(F.zoom+=ee),$?y.drag&&!this._drag?(this._drag={center:F.centerPoint,lngLat:F.pointLocation(l),point:l,handlerName:y.drag.handlerName},A.fire(new E.Event("freezeElevation",{freeze:!0}))):this._drag&&D[this._drag.handlerName]?(A.fire(new E.Event("freezeElevation",{freeze:!1})),this._drag=null):y.drag&&this._drag&&(F.center=F.pointLocation(F.centerPoint.sub(Z))):F.setLocationAtPoint(v,l),this._map._update(),u.noInertia||this._inertia.record(u),this._fireEvents(y,D,!0)}_fireEvents(u,y,D){const A=vc(this._eventsInProgress),F=vc(u),$={};for(const s in u){const{originalEvent:l}=u[s];this._eventsInProgress[s]||($[`${s}start`]=l),this._eventsInProgress[s]=u[s]}!A&&F&&this._fireEvent("movestart",F.originalEvent);for(const s in $)this._fireEvent(s,$[s]);F&&this._fireEvent("move",F.originalEvent);for(const s in u){const{originalEvent:l}=u[s];this._fireEvent(s,l)}const Z={};let ee;for(const s in this._eventsInProgress){const{handlerName:l,originalEvent:m}=this._eventsInProgress[s];this._handlersById[l].isActive()||(delete this._eventsInProgress[s],ee=y[l]||m,Z[`${s}end`]=ee)}for(const s in Z)this._fireEvent(s,Z[s]);const ie=vc(this._eventsInProgress);if(D&&(A||F)&&!ie){this._updatingCamera=!0;const s=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),l=m=>0!==m&&-this._bearingSnap<m&&m<this._bearingSnap;s?(l(s.bearing||this._map.getBearing())&&(s.bearing=0),this._map.easeTo(s,{originalEvent:ee})):(this._map.fire(new E.Event("moveend",{originalEvent:ee})),l(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(u,y){this._map.fire(new E.Event(u,y?{originalEvent:y}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(u=>{delete this._frameId,this.handleEvent(new Ks("renderFrame",{timeStamp:u})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Js={extend:(T,...u)=>E.extend(T,...u),run(T){T()},logToElement(T,u=!1,y="log"){const D=window.document.getElementById(y);D&&(u&&(D.innerHTML=""),D.innerHTML+=`<br>${T}`)}};class Gr extends E.Evented{constructor(u,y){super(),this._moving=!1,this._zooming=!1,this.transform=u,this._bearingSnap=y.bearingSnap,E.bindAll(["_renderFrameCallback"],this)}getCenter(){return new E.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(u,y){return this.jumpTo({center:u},y)}panBy(u,y,D){return u=E.pointGeometry.convert(u).mult(-1),this.panTo(this.transform.center,E.extend({offset:u},y),D)}panTo(u,y,D){return this.easeTo(E.extend({center:u},y),D)}getZoom(){return this.transform.zoom}setZoom(u,y){return this.jumpTo({zoom:u},y),this}zoomTo(u,y,D){return this.easeTo(E.extend({zoom:u},y),D)}zoomIn(u,y){return this.zoomTo(this.getZoom()+1,u,y),this}zoomOut(u,y){return this.zoomTo(this.getZoom()-1,u,y),this}getBearing(){return this.transform.bearing}setBearing(u,y){return this.jumpTo({bearing:u},y),this}getPadding(){return this.transform.padding}setPadding(u,y){return this.jumpTo({padding:u},y),this}rotateTo(u,y,D){return this.easeTo(E.extend({bearing:u},y),D)}resetNorth(u,y){return this.rotateTo(0,E.extend({duration:1e3},u),y),this}resetNorthPitch(u,y){return this.easeTo(E.extend({bearing:0,pitch:0,duration:1e3},u),y),this}snapToNorth(u,y){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(u,y):this}getPitch(){return this.transform.pitch}setPitch(u,y){return this.jumpTo({pitch:u},y),this}cameraForBounds(u,y){u=E.LngLatBounds.convert(u);const D=y&&y.bearing||0;return this._cameraForBoxAndBearing(u.getNorthWest(),u.getSouthEast(),D,y)}_cameraForBoxAndBearing(u,y,D,A){const F={top:0,bottom:0,right:0,left:0};if("number"==typeof(A=E.extend({padding:F,offset:[0,0],maxZoom:this.transform.maxZoom},A)).padding){const nt=A.padding;A.padding={top:nt,bottom:nt,right:nt,left:nt}}A.padding=E.extend(F,A.padding);const $=this.transform,Z=$.padding,ee=$.project(E.LngLat.convert(u)),ie=$.project(E.LngLat.convert(y)),s=ee.rotate(-D*Math.PI/180),l=ie.rotate(-D*Math.PI/180),m=new E.pointGeometry(Math.max(s.x,l.x),Math.max(s.y,l.y)),v=new E.pointGeometry(Math.min(s.x,l.x),Math.min(s.y,l.y)),C=m.sub(v),k=($.width-(Z.left+Z.right+A.padding.left+A.padding.right))/C.x,G=($.height-(Z.top+Z.bottom+A.padding.top+A.padding.bottom))/C.y;if(G<0||k<0)return void E.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const J=Math.min($.scaleZoom($.scale*Math.min(k,G)),A.maxZoom),fe=E.pointGeometry.convert(A.offset),pe=new E.pointGeometry((A.padding.left-A.padding.right)/2,(A.padding.top-A.padding.bottom)/2).rotate(D*Math.PI/180),ot=fe.add(pe).mult($.scale/$.zoomScale(J));return{center:$.unproject(ee.add(ie).div(2).sub(ot)),zoom:J,bearing:D}}fitBounds(u,y,D){return this._fitInternal(this.cameraForBounds(u,y),y,D)}fitScreenCoordinates(u,y,D,A,F){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(E.pointGeometry.convert(u)),this.transform.pointLocation(E.pointGeometry.convert(y)),D,A),A,F)}_fitInternal(u,y,D){return u?(delete(y=E.extend(u,y)).padding,y.linear?this.easeTo(y,D):this.flyTo(y,D)):this}jumpTo(u,y){this.stop();const D=this.transform;let A=!1,F=!1,$=!1;return"zoom"in u&&D.zoom!==+u.zoom&&(A=!0,D.zoom=+u.zoom),void 0!==u.center&&(D.center=E.LngLat.convert(u.center)),"bearing"in u&&D.bearing!==+u.bearing&&(F=!0,D.bearing=+u.bearing),"pitch"in u&&D.pitch!==+u.pitch&&($=!0,D.pitch=+u.pitch),null==u.padding||D.isPaddingEqual(u.padding)||(D.padding=u.padding),this.fire(new E.Event("movestart",y)).fire(new E.Event("move",y)),A&&this.fire(new E.Event("zoomstart",y)).fire(new E.Event("zoom",y)).fire(new E.Event("zoomend",y)),F&&this.fire(new E.Event("rotatestart",y)).fire(new E.Event("rotate",y)).fire(new E.Event("rotateend",y)),$&&this.fire(new E.Event("pitchstart",y)).fire(new E.Event("pitch",y)).fire(new E.Event("pitchend",y)),this.fire(new E.Event("moveend",y))}calculateCameraOptionsFromTo(u,y,D,A=0){const F=E.MercatorCoordinate.fromLngLat(u,y),$=E.MercatorCoordinate.fromLngLat(D,A),Z=$.x-F.x,ee=$.y-F.y,ie=$.z-F.z,s=Math.hypot(Z,ee,ie);if(0===s)throw new Error("Can't calculate camera options with same From and To");const l=Math.hypot(Z,ee),m=this.transform.scaleZoom(this.transform.cameraToCenterDistance/s/this.transform.tileSize),v=180*Math.atan2(Z,-ee)/Math.PI;let C=180*Math.acos(l/s)/Math.PI;return C=ie<0?90-C:90+C,{center:$.toLngLat(),zoom:m,pitch:C,bearing:v}}easeTo(u,y){this._stop(!1,u.easeId),(!1===(u=E.extend({offset:[0,0],duration:500,easing:E.ease},u)).animate||!u.essential&&E.exported.prefersReducedMotion)&&(u.duration=0);const D=this.transform,A=this.getZoom(),F=this.getBearing(),$=this.getPitch(),Z=this.getPadding(),ee="zoom"in u?+u.zoom:A,ie="bearing"in u?this._normalizeBearing(u.bearing,F):F,s="pitch"in u?+u.pitch:$,l="padding"in u?u.padding:D.padding,m=E.pointGeometry.convert(u.offset);let v=D.centerPoint.add(m);const C=D.pointLocation(v),k=E.LngLat.convert(u.center||C);this._normalizeCenter(k);const G=D.project(C),J=D.project(k).sub(G),fe=D.zoomScale(ee-A);let pe,ot;u.around&&(pe=E.LngLat.convert(u.around),ot=D.locationPoint(pe));const nt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ee!==A,this._rotating=this._rotating||F!==ie,this._pitching=this._pitching||s!==$,this._padding=!D.isPaddingEqual(l),this._easeId=u.easeId,this._prepareEase(y,u.noMoveStart,nt),this._ease(wt=>{if(this._zooming&&(D.zoom=E.number(A,ee,wt)),this._rotating&&(D.bearing=E.number(F,ie,wt)),this._pitching&&(D.pitch=E.number($,s,wt)),this._padding&&(D.interpolatePadding(Z,l,wt),v=D.centerPoint.add(m)),pe)D.setLocationAtPoint(pe,ot);else{const Pt=D.zoomScale(D.zoom-A),$t=ee>A?Math.min(2,fe):Math.max(.5,fe),Ft=Math.pow($t,1-wt),En=D.unproject(G.add(J.mult(wt*Ft)).mult(Pt));D.setLocationAtPoint(D.renderWorldCopies?En.wrap():En,v)}this._fireMoveEvents(y)},wt=>{this._afterEase(y,wt)},u),this}_prepareEase(u,y,D={}){this._moving=!0,this.fire(new E.Event("freezeElevation",{freeze:!0})),y||D.moving||this.fire(new E.Event("movestart",u)),this._zooming&&!D.zooming&&this.fire(new E.Event("zoomstart",u)),this._rotating&&!D.rotating&&this.fire(new E.Event("rotatestart",u)),this._pitching&&!D.pitching&&this.fire(new E.Event("pitchstart",u))}_fireMoveEvents(u){this.fire(new E.Event("move",u)),this._zooming&&this.fire(new E.Event("zoom",u)),this._rotating&&this.fire(new E.Event("rotate",u)),this._pitching&&this.fire(new E.Event("pitch",u))}_afterEase(u,y){if(this._easeId&&y&&this._easeId===y)return;delete this._easeId,this.fire(new E.Event("freezeElevation",{freeze:!1}));const D=this._zooming,A=this._rotating,F=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,D&&this.fire(new E.Event("zoomend",u)),A&&this.fire(new E.Event("rotateend",u)),F&&this.fire(new E.Event("pitchend",u)),this.fire(new E.Event("moveend",u))}flyTo(u,y){if(!u.essential&&E.exported.prefersReducedMotion){const ki=E.pick(u,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ki,y)}this.stop(),u=E.extend({offset:[0,0],speed:1.2,curve:1.42,easing:E.ease},u);const D=this.transform,A=this.getZoom(),F=this.getBearing(),$=this.getPitch(),Z=this.getPadding(),ee="zoom"in u?E.clamp(+u.zoom,D.minZoom,D.maxZoom):A,ie="bearing"in u?this._normalizeBearing(u.bearing,F):F,s="pitch"in u?+u.pitch:$,l="padding"in u?u.padding:D.padding,m=D.zoomScale(ee-A),v=E.pointGeometry.convert(u.offset);let C=D.centerPoint.add(v);const k=D.pointLocation(C),G=E.LngLat.convert(u.center||k);this._normalizeCenter(G);const J=D.project(k),fe=D.project(G).sub(J);let pe=u.curve;const ot=Math.max(D.width,D.height),nt=ot/m,wt=fe.mag();if("minZoom"in u){const ki=E.clamp(Math.min(u.minZoom,A,ee),D.minZoom,D.maxZoom),cs=ot/D.zoomScale(ki-A);pe=Math.sqrt(cs/wt*2)}const Pt=pe*pe;function $t(ki){const cs=(nt*nt-ot*ot+(ki?-1:1)*Pt*Pt*wt*wt)/(2*(ki?nt:ot)*Pt*wt);return Math.log(Math.sqrt(cs*cs+1)-cs)}function Ft(ki){return(Math.exp(ki)-Math.exp(-ki))/2}function En(ki){return(Math.exp(ki)+Math.exp(-ki))/2}const Dn=$t(0);let Ln=function(ki){return En(Dn)/En(Dn+pe*ki)},Zi=function(ki){return ot*((En(Dn)*(Ft(cs=Dn+pe*ki)/En(cs))-Ft(Dn))/Pt)/wt;var cs},Qi=($t(1)-Dn)/pe;if(Math.abs(wt)<1e-6||!isFinite(Qi)){if(Math.abs(ot-nt)<1e-6)return this.easeTo(u,y);const ki=nt<ot?-1:1;Qi=Math.abs(Math.log(nt/ot))/pe,Zi=function(){return 0},Ln=function(cs){return Math.exp(ki*pe*cs)}}return u.duration="duration"in u?+u.duration:1e3*Qi/("screenSpeed"in u?+u.screenSpeed/pe:+u.speed),u.maxDuration&&u.duration>u.maxDuration&&(u.duration=0),this._zooming=!0,this._rotating=F!==ie,this._pitching=s!==$,this._padding=!D.isPaddingEqual(l),this._prepareEase(y,!1),this._ease(ki=>{const cs=ki*Qi,mr=1/Ln(cs);D.zoom=1===ki?ee:A+D.scaleZoom(mr),this._rotating&&(D.bearing=E.number(F,ie,ki)),this._pitching&&(D.pitch=E.number($,s,ki)),this._padding&&(D.interpolatePadding(Z,l,ki),C=D.centerPoint.add(v));const Zr=1===ki?G:D.unproject(J.add(fe.mult(Zi(cs))).mult(mr));D.setLocationAtPoint(D.renderWorldCopies?Zr.wrap():Zr,C),this._fireMoveEvents(y)},()=>this._afterEase(y),u),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(u,y){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const D=this._onEaseEnd;delete this._onEaseEnd,D.call(this,y)}if(!u){const D=this.handlers;D&&D.stop(!1)}return this}_ease(u,y,D){!1===D.animate||0===D.duration?(u(1),y()):(this._easeStart=E.exported.now(),this._easeOptions=D,this._onEaseFrame=u,this._onEaseEnd=y,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const u=Math.min((E.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(u)),u<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(u,y){u=E.wrap(u,-180,180);const D=Math.abs(u-y);return Math.abs(u-360-y)<D&&(u-=360),Math.abs(u+360-y)<D&&(u+=360),u}_normalizeCenter(u){const y=this.transform;if(!y.renderWorldCopies||y.lngRange)return;const D=u.lng-y.center.lng;u.lng+=D>180?-360:D<-180?360:0}}class hs{constructor(u={}){this.options=u,E.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(u){return this._map=u,this._compact=this.options&&this.options.compact,this._container=xe.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=xe.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=xe.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){xe.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(u,y){const D=this._map._getUIString(`AttributionControl.${y}`);u.title=D,u.setAttribute("aria-label",D)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(u){!u||"metadata"!==u.sourceDataType&&"visibility"!==u.sourceDataType&&"style"!==u.dataType&&"terrain"!==u.type||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let u=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?u=u.concat(this.options.customAttribution.map(A=>"string"!=typeof A?"":A)):"string"==typeof this.options.customAttribution&&u.push(this.options.customAttribution)),this._map.style.stylesheet){const A=this._map.style.stylesheet;this.styleOwner=A.owner,this.styleId=A.id}const y=this._map.style.sourceCaches;for(const A in y){const F=y[A];if(F.used||F.usedForTerrain){const $=F.getSource();$.attribution&&u.indexOf($.attribution)<0&&u.push($.attribution)}}u=u.filter(A=>String(A).trim()),u.sort((A,F)=>A.length-F.length),u=u.filter((A,F)=>{for(let $=F+1;$<u.length;$++)if(u[$].indexOf(A)>=0)return!1;return!0});const D=u.join(" | ");D!==this._attribHTML&&(this._attribHTML=D,u.length?(this._innerContainer.innerHTML=D,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class Ls{constructor(u={}){this.options=u,E.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(u){this._map=u,this._compact=this.options&&this.options.compact,this._container=xe.create("div","maplibregl-ctrl mapboxgl-ctrl");const y=xe.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return y.target="_blank",y.rel="noopener nofollow",y.href="https://maplibre.org/",y.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),y.setAttribute("rel","noopener nofollow"),this._container.appendChild(y),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){xe.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const u=this._container.children;if(u.length){const y=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&y.classList.add("maplibregl-compact","mapboxgl-compact"):y.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class Tc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(u){const y=++this._id;return this._queue.push({callback:u,id:y,cancelled:!1}),y}remove(u){const y=this._currentlyRunning,D=y?this._queue.concat(y):this._queue;for(const A of D)if(A.id===u)return void(A.cancelled=!0)}run(u=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const y=this._currentlyRunning=this._queue;this._queue=[];for(const D of y)if(!D.cancelled&&(D.callback(u),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Da={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},Ac={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},du={showCompass:!0,showZoom:!0,visualizePitch:!1};class lo{constructor(u,y,D=!1){this._clickTolerance=10,this.element=y,this.mouseRotate=new io({clickTolerance:u.dragRotate._mouseRotate._clickTolerance}),this.map=u,D&&(this.mousePitch=new wn({clickTolerance:u.dragRotate._mousePitch._clickTolerance})),E.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),xe.addEventListener(y,"mousedown",this.mousedown),xe.addEventListener(y,"touchstart",this.touchstart,{passive:!1}),xe.addEventListener(y,"touchmove",this.touchmove),xe.addEventListener(y,"touchend",this.touchend),xe.addEventListener(y,"touchcancel",this.reset)}down(u,y){this.mouseRotate.mousedown(u,y),this.mousePitch&&this.mousePitch.mousedown(u,y),xe.disableDrag()}move(u,y){const D=this.map,A=this.mouseRotate.mousemoveWindow(u,y);if(A&&A.bearingDelta&&D.setBearing(D.getBearing()+A.bearingDelta),this.mousePitch){const F=this.mousePitch.mousemoveWindow(u,y);F&&F.pitchDelta&&D.setPitch(D.getPitch()+F.pitchDelta)}}off(){const u=this.element;xe.removeEventListener(u,"mousedown",this.mousedown),xe.removeEventListener(u,"touchstart",this.touchstart,{passive:!1}),xe.removeEventListener(u,"touchmove",this.touchmove),xe.removeEventListener(u,"touchend",this.touchend),xe.removeEventListener(u,"touchcancel",this.reset),this.offTemp()}offTemp(){xe.enableDrag(),xe.removeEventListener(window,"mousemove",this.mousemove),xe.removeEventListener(window,"mouseup",this.mouseup)}mousedown(u){this.down(E.extend({},u,{ctrlKey:!0,preventDefault:()=>u.preventDefault()}),xe.mousePos(this.element,u)),xe.addEventListener(window,"mousemove",this.mousemove),xe.addEventListener(window,"mouseup",this.mouseup)}mousemove(u){this.move(u,xe.mousePos(this.element,u))}mouseup(u){this.mouseRotate.mouseupWindow(u),this.mousePitch&&this.mousePitch.mouseupWindow(u),this.offTemp()}touchstart(u){1!==u.targetTouches.length?this.reset():(this._startPos=this._lastPos=xe.touchPos(this.element,u.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>u.preventDefault()},this._startPos))}touchmove(u){1!==u.targetTouches.length?this.reset():(this._lastPos=xe.touchPos(this.element,u.targetTouches)[0],this.move({preventDefault:()=>u.preventDefault()},this._lastPos))}touchend(u){0===u.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function hu(T,u,y){if(T=new E.LngLat(T.lng,T.lat),u){const D=new E.LngLat(T.lng-360,T.lat),A=new E.LngLat(T.lng+360,T.lat),F=y.locationPoint(T).distSqr(u);y.locationPoint(D).distSqr(u)<F?T=D:y.locationPoint(A).distSqr(u)<F&&(T=A)}for(;Math.abs(T.lng-y.center.lng)>180;){const D=y.locationPoint(T);if(D.x>=0&&D.y>=0&&D.x<=y.width&&D.y<=y.height)break;T.lng>y.center.lng?T.lng-=360:T.lng+=360}return T}const Jn={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ui(T,u,y){const D=T.classList;for(const A in Jn)D.remove(`maplibregl-${y}-anchor-${A}`,`mapboxgl-${y}-anchor-${A}`);D.add(`maplibregl-${y}-anchor-${u}`,`mapboxgl-${y}-anchor-${u}`)}class oc extends E.Evented{constructor(u,y){if(super(),(u instanceof HTMLElement||y)&&(u=E.extend({element:u},y)),E.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=u&&u.anchor||"center",this._color=u&&u.color||"#3FB1CE",this._scale=u&&u.scale||1,this._draggable=u&&u.draggable||!1,this._clickTolerance=u&&u.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=u&&u.rotation||0,this._rotationAlignment=u&&u.rotationAlignment||"auto",this._pitchAlignment=u&&u.pitchAlignment&&"auto"!==u.pitchAlignment?u.pitchAlignment:this._rotationAlignment,u&&u.element)this._element=u.element,this._offset=E.pointGeometry.convert(u&&u.offset||[0,0]);else{this._defaultMarker=!0,this._element=xe.create("div"),this._element.setAttribute("aria-label","Map marker");const D=xe.createNS("http://www.w3.org/2000/svg","svg"),A=41,F=27;D.setAttributeNS(null,"display","block"),D.setAttributeNS(null,"height",`${A}px`),D.setAttributeNS(null,"width",`${F}px`),D.setAttributeNS(null,"viewBox",`0 0 ${F} ${A}`);const $=xe.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"stroke","none"),$.setAttributeNS(null,"stroke-width","1"),$.setAttributeNS(null,"fill","none"),$.setAttributeNS(null,"fill-rule","evenodd");const Z=xe.createNS("http://www.w3.org/2000/svg","g");Z.setAttributeNS(null,"fill-rule","nonzero");const ee=xe.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ee.setAttributeNS(null,"fill","#000000");const ie=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const fe of ie){const pe=xe.createNS("http://www.w3.org/2000/svg","ellipse");pe.setAttributeNS(null,"opacity","0.04"),pe.setAttributeNS(null,"cx","10.5"),pe.setAttributeNS(null,"cy","5.80029008"),pe.setAttributeNS(null,"rx",fe.rx),pe.setAttributeNS(null,"ry",fe.ry),ee.appendChild(pe)}const s=xe.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"fill",this._color);const l=xe.createNS("http://www.w3.org/2000/svg","path");l.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),s.appendChild(l);const m=xe.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"opacity","0.25"),m.setAttributeNS(null,"fill","#000000");const v=xe.createNS("http://www.w3.org/2000/svg","path");v.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),m.appendChild(v);const C=xe.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"transform","translate(6.0, 7.0)"),C.setAttributeNS(null,"fill","#FFFFFF");const k=xe.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"transform","translate(8.0, 8.0)");const G=xe.createNS("http://www.w3.org/2000/svg","circle");G.setAttributeNS(null,"fill","#000000"),G.setAttributeNS(null,"opacity","0.25"),G.setAttributeNS(null,"cx","5.5"),G.setAttributeNS(null,"cy","5.5"),G.setAttributeNS(null,"r","5.4999962");const J=xe.createNS("http://www.w3.org/2000/svg","circle");J.setAttributeNS(null,"fill","#FFFFFF"),J.setAttributeNS(null,"cx","5.5"),J.setAttributeNS(null,"cy","5.5"),J.setAttributeNS(null,"r","5.4999962"),k.appendChild(G),k.appendChild(J),Z.appendChild(ee),Z.appendChild(s),Z.appendChild(m),Z.appendChild(C),Z.appendChild(k),D.appendChild(Z),D.setAttributeNS(null,"height",A*this._scale+"px"),D.setAttributeNS(null,"width",F*this._scale+"px"),this._element.appendChild(D),this._offset=E.pointGeometry.convert(u&&u.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",D=>{D.preventDefault()}),this._element.addEventListener("mousedown",D=>{D.preventDefault()}),Ui(this._element,this._anchor,"marker"),this._popup=null}addTo(u){return this.remove(),this._map=u,u.getCanvasContainer().appendChild(this._element),u.on("move",this._update),u.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),xe.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(u){return this._lngLat=E.LngLat.convert(u),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(u){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),u){if(!("offset"in u.options)){const A=Math.sqrt(Math.pow(13.5,2)/2);u.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[A,-1*(24.6+A)],"bottom-right":[-A,-1*(24.6+A)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=u,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(u){const y=u.code,D=u.charCode||u.keyCode;"Space"!==y&&"Enter"!==y&&32!==D&&13!==D||this.togglePopup()}_onMapClick(u){const y=u.originalEvent.target,D=this._element;this._popup&&(y===D||D.contains(y))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const u=this._popup;return u?(u.isOpen()?u.remove():u.addTo(this._map),this):this}_update(u){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=hu(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let y="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?y=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(y=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let D="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?D="rotateX(0deg)":"map"===this._pitchAlignment&&(D=`rotateX(${this._map.getPitch()}deg)`),u&&"moveend"!==u.type||(this._pos=this._pos.round()),xe.setTransform(this._element,`${Jn[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${D} ${y}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const A=this._map.unproject(this._pos),F=40075016.686*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=A.distanceTo(this._lngLat)>20*F?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(u){return this._offset=E.pointGeometry.convert(u),this._update(),this}_onMove(u){if(!this._isDragging){const y=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=y}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new E.Event("dragstart"))),this.fire(new E.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new E.Event("dragend")),this._state="inactive"}_addDragHandler(u){this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(u){return this._draggable=!!u,this._map&&(u?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(u){return this._rotation=u||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(u){return this._rotationAlignment=u||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(u){return this._pitchAlignment=u&&"auto"!==u?u:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Pl={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Yc,yo=0,tl=!1;const Ma={maxWidth:100,unit:"metric"};function Du(T,u,y){const D=y&&y.maxWidth||100,A=T._container.clientHeight/2,F=T.unproject([0,A]),$=T.unproject([D,A]),Z=F.distanceTo($);if(y&&"imperial"===y.unit){const ee=3.2808*Z;ee>5280?nl(u,D,ee/5280,T._getUIString("ScaleControl.Miles")):nl(u,D,ee,T._getUIString("ScaleControl.Feet"))}else y&&"nautical"===y.unit?nl(u,D,Z/1852,T._getUIString("ScaleControl.NauticalMiles")):Z>=1e3?nl(u,D,Z/1e3,T._getUIString("ScaleControl.Kilometers")):nl(u,D,Z,T._getUIString("ScaleControl.Meters"))}function nl(T,u,y,D){const A=function(F){const $=Math.pow(10,`${Math.floor(F)}`.length-1);let Z=F/$;return Z=Z>=10?10:Z>=5?5:Z>=3?3:Z>=2?2:Z>=1?1:function(ee){const ie=Math.pow(10,Math.ceil(-Math.log(ee)/Math.LN10));return Math.round(ee*ie)/ie}(Z),$*Z}(y);T.style.width=u*(A/y)+"px",T.innerHTML=`${A}&nbsp;${D}`}const Eo={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},ls=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Zc(T){if(T){if("number"==typeof T){const u=Math.round(Math.sqrt(.5*Math.pow(T,2)));return{center:new E.pointGeometry(0,0),top:new E.pointGeometry(0,T),"top-left":new E.pointGeometry(u,u),"top-right":new E.pointGeometry(-u,u),bottom:new E.pointGeometry(0,-T),"bottom-left":new E.pointGeometry(u,-u),"bottom-right":new E.pointGeometry(-u,-u),left:new E.pointGeometry(T,0),right:new E.pointGeometry(-T,0)}}if(T instanceof E.pointGeometry||Array.isArray(T)){const u=E.pointGeometry.convert(T);return{center:u,top:u,"top-left":u,"top-right":u,bottom:u,"bottom-left":u,"bottom-right":u,left:u,right:u}}return{center:E.pointGeometry.convert(T.center||[0,0]),top:E.pointGeometry.convert(T.top||[0,0]),"top-left":E.pointGeometry.convert(T["top-left"]||[0,0]),"top-right":E.pointGeometry.convert(T["top-right"]||[0,0]),bottom:E.pointGeometry.convert(T.bottom||[0,0]),"bottom-left":E.pointGeometry.convert(T["bottom-left"]||[0,0]),"bottom-right":E.pointGeometry.convert(T["bottom-right"]||[0,0]),left:E.pointGeometry.convert(T.left||[0,0]),right:E.pointGeometry.convert(T.right||[0,0])}}return Zc(new E.pointGeometry(0,0))}const gl={supported:Se,setRTLTextPlugin:E.setRTLTextPlugin,getRTLTextPluginStatus:E.getRTLTextPluginStatus,Map:class extends Gr{constructor(T){var u;if(E.PerformanceUtils.mark(E.PerformanceMarkers.create),null!=(T=E.extend({},Ac,T)).minZoom&&null!=T.maxZoom&&T.minZoom>T.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=T.minPitch&&null!=T.maxPitch&&T.minPitch>T.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=T.minPitch&&T.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=T.maxPitch&&T.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Qo(T.minZoom,T.maxZoom,T.minPitch,T.maxPitch,T.renderWorldCopies),{bearingSnap:T.bearingSnap}),this._interactive=T.interactive,this._cooperativeGestures=T.cooperativeGestures,this._maxTileCacheSize=T.maxTileCacheSize,this._failIfMajorPerformanceCaveat=T.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=T.preserveDrawingBuffer,this._antialias=T.antialias,this._trackResize=T.trackResize,this._bearingSnap=T.bearingSnap,this._refreshExpiredTiles=T.refreshExpiredTiles,this._fadeDuration=T.fadeDuration,this._crossSourceCollisions=T.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=T.collectResourceTiming,this._renderTaskQueue=new Tc,this._controls=[],this._mapId=E.uniqueId(),this._locale=E.extend({},Da,T.locale),this._clickTolerance=T.clickTolerance,this._pixelRatio=null!==(u=T.pixelRatio)&&void 0!==u?u:devicePixelRatio,this._requestManager=new ct(T.transformRequest),"string"==typeof T.container){if(this._container=document.getElementById(T.container),!this._container)throw new Error(`Container '${T.container}' not found.`)}else{if(!(T.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=T.container}if(T.maxBounds&&this.setMaxBounds(T.maxBounds),E.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new uu(this,T),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=T.hash&&new Vd("string"==typeof T.hash&&T.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:T.center,zoom:T.zoom,bearing:T.bearing,pitch:T.pitch}),T.bounds&&(this.resize(),this.fitBounds(T.bounds,E.extend({},T.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=T.localIdeographFontFamily,T.style&&this.setStyle(T.style,{localIdeographFontFamily:T.localIdeographFontFamily}),T.attributionControl&&this.addControl(new hs({customAttribution:T.customAttribution})),T.maplibreLogo&&this.addControl(new Ls,T.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",y=>{this._update("style"===y.dataType),this.fire(new E.Event(`${y.dataType}data`,y))}),this.on("dataloading",y=>{this.fire(new E.Event(`${y.dataType}dataloading`,y))}),this.on("dataabort",y=>{this.fire(new E.Event("sourcedataabort",y))})}_getMapId(){return this._mapId}addControl(T,u){if(void 0===u&&(u=T.getDefaultPosition?T.getDefaultPosition():"top-right"),!T||!T.onAdd)return this.fire(new E.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const y=T.onAdd(this);this._controls.push(T);const D=this._controlPositions[u];return-1!==u.indexOf("bottom")?D.insertBefore(y,D.firstChild):D.appendChild(y),this}removeControl(T){if(!T||!T.onRemove)return this.fire(new E.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const u=this._controls.indexOf(T);return u>-1&&this._controls.splice(u,1),T.onRemove(this),this}hasControl(T){return this._controls.indexOf(T)>-1}calculateCameraOptionsFromTo(T,u,y,D){return null==D&&this.style.terrain&&(D=this.transform.getElevation(y,this.style.terrain)),super.calculateCameraOptionsFromTo(T,u,y,D)}resize(T){const u=this._containerDimensions(),y=u[0],D=u[1];this._resizeCanvas(y,D,this.getPixelRatio()),this.transform.resize(y,D),this.painter.resize(y,D,this.getPixelRatio());const A=!this._moving;return A&&(this.stop(),this.fire(new E.Event("movestart",T)).fire(new E.Event("move",T))),this.fire(new E.Event("resize",T)),A&&this.fire(new E.Event("moveend",T)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(T){const[u,y]=this._containerDimensions();this._pixelRatio=T,this._resizeCanvas(u,y,T),this.painter.resize(u,y,T)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(T){return this.transform.setMaxBounds(E.LngLatBounds.convert(T)),this._update()}setMinZoom(T){if((T=T??-2)>=-2&&T<=this.transform.maxZoom)return this.transform.minZoom=T,this._update(),this.getZoom()<T&&this.setZoom(T),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(T){if((T=T??22)>=this.transform.minZoom)return this.transform.maxZoom=T,this._update(),this.getZoom()>T&&this.setZoom(T),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(T){if((T=T??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(T>=0&&T<=this.transform.maxPitch)return this.transform.minPitch=T,this._update(),this.getPitch()<T&&this.setPitch(T),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(T){if((T=T??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(T>=this.transform.minPitch)return this.transform.maxPitch=T,this._update(),this.getPitch()>T&&this.setPitch(T),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(T){return this.transform.renderWorldCopies=T,this._update()}project(T){return this.transform.locationPoint(E.LngLat.convert(T),this.style&&this.style.terrain)}unproject(T){return this.transform.pointLocation(E.pointGeometry.convert(T),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(T,u,y){if("mouseenter"===T||"mouseover"===T){let D=!1;return{layer:u,listener:y,delegates:{mousemove:F=>{const $=this.getLayer(u)?this.queryRenderedFeatures(F.point,{layers:[u]}):[];$.length?D||(D=!0,y.call(this,new _o(T,this,F.originalEvent,{features:$}))):D=!1},mouseout:()=>{D=!1}}}}if("mouseleave"===T||"mouseout"===T){let D=!1;return{layer:u,listener:y,delegates:{mousemove:$=>{(this.getLayer(u)?this.queryRenderedFeatures($.point,{layers:[u]}):[]).length?D=!0:D&&(D=!1,y.call(this,new _o(T,this,$.originalEvent)))},mouseout:$=>{D&&(D=!1,y.call(this,new _o(T,this,$.originalEvent)))}}}}{const D=A=>{const F=this.getLayer(u)?this.queryRenderedFeatures(A.point,{layers:[u]}):[];F.length&&(A.features=F,y.call(this,A),delete A.features)};return{layer:u,listener:y,delegates:{[T]:D}}}}on(T,u,y){if(void 0===y)return super.on(T,u);const D=this._createDelegatedListener(T,u,y);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[T]=this._delegatedListeners[T]||[],this._delegatedListeners[T].push(D);for(const A in D.delegates)this.on(A,D.delegates[A]);return this}once(T,u,y){if(void 0===y)return super.once(T,u);const D=this._createDelegatedListener(T,u,y);for(const A in D.delegates)this.once(A,D.delegates[A]);return this}off(T,u,y){return void 0===y?super.off(T,u):(this._delegatedListeners&&this._delegatedListeners[T]&&(D=>{const A=this._delegatedListeners[T];for(let F=0;F<A.length;F++){const $=A[F];if($.layer===u&&$.listener===y){for(const Z in $.delegates)this.off(Z,$.delegates[Z]);return A.splice(F,1),this}}})(),this)}queryRenderedFeatures(T,u){if(!this.style)return[];let y;if(void 0!==u||void 0===T||T instanceof E.pointGeometry||Array.isArray(T)||(u=T,T=void 0),u=u||{},(T=T||[[0,0],[this.transform.width,this.transform.height]])instanceof E.pointGeometry||"number"==typeof T[0])y=[E.pointGeometry.convert(T)];else{const D=E.pointGeometry.convert(T[0]),A=E.pointGeometry.convert(T[1]);y=[D,new E.pointGeometry(A.x,D.y),A,new E.pointGeometry(D.x,A.y),D]}return this.style.queryRenderedFeatures(y,u,this.transform)}querySourceFeatures(T,u){return this.style.querySourceFeatures(T,u)}setStyle(T,u){return!1!==(u=E.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},u)).diff&&u.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&T?(this._diffStyle(T,u),this):(this._localIdeographFontFamily=u.localIdeographFontFamily,this._updateStyle(T,u))}setTransformRequest(T){return this._requestManager.setTransformRequest(T),this}_getUIString(T){const u=this._locale[T];if(null==u)throw new Error(`Missing UI string '${T}'`);return u}_updateStyle(T,u){return this.style&&(this.style.setEventedParent(null),this.style._remove()),T?(this.style=new eo(this,u||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof T?this.style.loadURL(T):this.style.loadJSON(T),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new eo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(T,u){if("string"==typeof T){const y=this._requestManager.transformRequest(T,E.ResourceType.Style);E.getJSON(y,(D,A)=>{D?this.fire(new E.ErrorEvent(D)):A&&this._updateDiff(A,u)})}else"object"==typeof T&&this._updateDiff(T,u)}_updateDiff(T,u){try{this.style.setState(T)&&this._update(!0)}catch(y){E.warnOnce(`Unable to perform style diff: ${y.message||y.error||y}.  Rebuilding the style from scratch.`),this._updateStyle(T,u)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():E.warnOnce("There is no style added to the map.")}addSource(T,u){return this._lazyInitEmptyStyle(),this.style.addSource(T,u),this._update(!0)}isSourceLoaded(T){const u=this.style&&this.style.sourceCaches[T];if(void 0!==u)return u.loaded();this.fire(new E.ErrorEvent(new Error(`There is no source with ID '${T}'`)))}setTerrain(T){return this.style.setTerrain(T),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const T=this.style&&this.style.sourceCaches;for(const u in T){const y=T[u]._tiles;for(const D in y){const A=y[D];if("loaded"!==A.state&&"errored"!==A.state)return!1}}return!0}addSourceType(T,u,y){return this._lazyInitEmptyStyle(),this.style.addSourceType(T,u,y)}removeSource(T){return this.style.removeSource(T),this._update(!0)}getSource(T){return this.style.getSource(T)}addImage(T,u,{pixelRatio:y=1,sdf:D=!1,stretchX:A,stretchY:F,content:$}={}){if(this._lazyInitEmptyStyle(),u instanceof HTMLImageElement||E.isImageBitmap(u)){const{width:Z,height:ee,data:ie}=E.exported.getImageData(u);this.style.addImage(T,{data:new E.RGBAImage({width:Z,height:ee},ie),pixelRatio:y,stretchX:A,stretchY:F,content:$,sdf:D,version:0})}else{if(void 0===u.width||void 0===u.height)return this.fire(new E.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:Z,height:ee,data:ie}=u,s=u;this.style.addImage(T,{data:new E.RGBAImage({width:Z,height:ee},new Uint8Array(ie)),pixelRatio:y,stretchX:A,stretchY:F,content:$,sdf:D,version:0,userImage:s}),s.onAdd&&s.onAdd(this,T)}}}updateImage(T,u){const y=this.style.getImage(T);if(!y)return this.fire(new E.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const D=u instanceof HTMLImageElement||E.isImageBitmap(u)?E.exported.getImageData(u):u,{width:A,height:F,data:$}=D;if(void 0===A||void 0===F)return this.fire(new E.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(A!==y.data.width||F!==y.data.height)return this.fire(new E.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const Z=!(u instanceof HTMLImageElement||E.isImageBitmap(u));y.data.replace($,Z),this.style.updateImage(T,y)}hasImage(T){return T?!!this.style.getImage(T):(this.fire(new E.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(T){this.style.removeImage(T)}loadImage(T,u){E.getImage(this._requestManager.transformRequest(T,E.ResourceType.Image),u)}listImages(){return this.style.listImages()}addLayer(T,u){return this._lazyInitEmptyStyle(),this.style.addLayer(T,u),this._update(!0)}moveLayer(T,u){return this.style.moveLayer(T,u),this._update(!0)}removeLayer(T){return this.style.removeLayer(T),this._update(!0)}getLayer(T){return this.style.getLayer(T)}setLayerZoomRange(T,u,y){return this.style.setLayerZoomRange(T,u,y),this._update(!0)}setFilter(T,u,y={}){return this.style.setFilter(T,u,y),this._update(!0)}getFilter(T){return this.style.getFilter(T)}setPaintProperty(T,u,y,D={}){return this.style.setPaintProperty(T,u,y,D),this._update(!0)}getPaintProperty(T,u){return this.style.getPaintProperty(T,u)}setLayoutProperty(T,u,y,D={}){return this.style.setLayoutProperty(T,u,y,D),this._update(!0)}getLayoutProperty(T,u){return this.style.getLayoutProperty(T,u)}setLight(T,u={}){return this._lazyInitEmptyStyle(),this.style.setLight(T,u),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(T,u){return this.style.setFeatureState(T,u),this._update()}removeFeatureState(T,u){return this.style.removeFeatureState(T,u),this._update()}getFeatureState(T){return this.style.getFeatureState(T)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let T=0,u=0;return this._container&&(T=this._container.clientWidth||400,u=this._container.clientHeight||300),[T,u]}_setupContainer(){const T=this._container;T.classList.add("maplibregl-map","mapboxgl-map");const u=this._canvasContainer=xe.create("div","maplibregl-canvas-container mapboxgl-canvas-container",T);this._interactive&&u.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=xe.create("canvas","maplibregl-canvas mapboxgl-canvas",u),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const y=this._containerDimensions();this._resizeCanvas(y[0],y[1],this.getPixelRatio());const D=this._controlContainer=xe.create("div","maplibregl-control-container mapboxgl-control-container",T),A=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(F=>{A[F]=xe.create("div",`maplibregl-ctrl-${F} mapboxgl-ctrl-${F}`,D)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const T=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=xe.create("div","maplibregl-cooperative-gesture-screen",T);let u="Control",y="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";0===navigator.platform.indexOf("Mac")&&(y="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use \u2318 + scroll to zoom the map",u="Meta"),this._cooperativeGesturesScreen.innerHTML=`\n            <div class="maplibregl-desktop-message">${y}</div>\n            <div class="maplibregl-mobile-message">${"boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>\n        `,document.addEventListener("keydown",D=>{D.key===u&&(this._metaPress=!0)}),document.addEventListener("keyup",D=>{D.key===u&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",D=>{this._onCooperativeGesture(D,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(T,u,y){this._canvas.width=y*T,this._canvas.height=y*u,this._canvas.style.width=`${T}px`,this._canvas.style.height=`${u}px`}_setupPainter(){const T=E.extend({},Se.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),u=this._canvas.getContext("webgl",T)||this._canvas.getContext("experimental-webgl",T);u?(this.painter=new Xs(u,this.transform),E.exported$1.testSupport(u)):this.fire(new E.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(T){T.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new E.Event("webglcontextlost",{originalEvent:T}))}_contextRestored(T){this._setupPainter(),this.resize(),this._update(),this.fire(new E.Event("webglcontextrestored",{originalEvent:T}))}_onMapScroll(T){if(T.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(T,u,y){return!u&&y<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(T){return this.style?(this._styleDirty=this._styleDirty||T,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(T){return this._update(),this._renderTaskQueue.add(T)}_cancelRenderFrame(T){this._renderTaskQueue.remove(T)}_render(T){let u,y=0;const D=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(u=D.createQueryEXT(),D.beginQueryEXT(D.TIME_ELAPSED_EXT,u),y=E.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(T),this._removed)return;let A=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const $=this.transform.zoom,Z=E.exported.now();this.style.zoomHistory.update($,Z);const ee=new E.EvaluationParameters($,{now:Z,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ie=ee.crossFadingFactor();1===ie&&ie===this._crossFadingFactor||(A=!0,this._crossFadingFactor=ie),this.style.update(ee)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new E.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,E.PerformanceUtils.mark(E.PerformanceMarkers.load),this.fire(new E.Event("load"))),this.style&&(this.style.hasTransitions()||A)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const $=E.exported.now()-y;D.endQueryEXT(D.TIME_ELAPSED_EXT,u),setTimeout(()=>{const Z=D.getQueryObjectEXT(u,D.QUERY_RESULT_EXT)/1e6;D.deleteQueryEXT(u),this.fire(new E.Event("gpu-timing-frame",{cpuTime:$,gpuTime:Z}))},50)}if(this.listens("gpu-timing-layer")){const $=this.painter.collectGpuTimers();setTimeout(()=>{const Z=this.painter.queryGpuTimers($);this.fire(new E.Event("gpu-timing-layer",{layerTimes:Z}))},50)}const F=this._sourcesDirty||this._styleDirty||this._placementDirty;return F||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new E.Event("idle")),!this._loaded||this._fullyLoaded||F||(this._fullyLoaded=!0,E.PerformanceUtils.mark(E.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const T=this.painter.context.gl.getExtension("WEBGL_lose_context");T&&T.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),xe.remove(this._canvasContainer),xe.remove(this._controlContainer),this._cooperativeGestures&&xe.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),E.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new E.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=E.exported.frame(T=>{E.PerformanceUtils.frame(T),this._frame=null,this._render(T)}))}_onWindowOnline(){this._update()}_onWindowResize(T){this._trackResize&&this.resize({originalEvent:T})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(T){this._showTileBoundaries!==T&&(this._showTileBoundaries=T,this._update())}get showPadding(){return!!this._showPadding}set showPadding(T){this._showPadding!==T&&(this._showPadding=T,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(T){this._showCollisionBoxes!==T&&(this._showCollisionBoxes=T,T?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(T){this._showOverdrawInspector!==T&&(this._showOverdrawInspector=T,this._update())}get repaint(){return!!this._repaint}set repaint(T){this._repaint!==T&&(this._repaint=T,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(T){this._vertices=T,this._update()}_setCacheLimits(T,u){E.setCacheLimits(T,u)}get version(){return"2.4.0"}},NavigationControl:class{constructor(T){this.options=E.extend({},du,T),this._container=xe.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",u=>u.preventDefault()),this.options.showZoom&&(E.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",u=>this._map.zoomIn({},{originalEvent:u})),xe.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",u=>this._map.zoomOut({},{originalEvent:u})),xe.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(E.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",u=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:u}):this._map.resetNorth({},{originalEvent:u})}),this._compassIcon=xe.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const T=this._map.getZoom(),u=T===this._map.getMaxZoom(),y=T===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=y,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",y.toString())}_rotateCompassArrow(){const T=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=T}onAdd(T){return this._map=T,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new lo(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){xe.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(T,u){const y=xe.create("button",T,this._container);return y.type="button",y.addEventListener("click",u),y}_setButtonTitle(T,u){const y=this._map._getUIString(`NavigationControl.${u}`);T.title=y,T.setAttribute("aria-label",y)}},GeolocateControl:class extends E.Evented{constructor(T){super(),this.options=E.extend({},Pl,T),E.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(T){var u;return this._map=T,this._container=xe.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),u=this._setupUI,void 0!==Yc?u(Yc):void 0!==window.navigator.permissions?window.navigator.permissions.query({name:"geolocation"}).then(y=>{Yc="denied"!==y.state,u(Yc)}):(Yc=!!window.navigator.geolocation,u(Yc)),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),xe.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,yo=0,tl=!1}_isOutOfMapMaxBounds(T){const u=this._map.getMaxBounds(),y=T.coords;return u&&(y.longitude<u.getWest()||y.longitude>u.getEast()||y.latitude<u.getSouth()||y.latitude>u.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(T){if(this._map){if(this._isOutOfMapMaxBounds(T))return this._setErrorState(),this.fire(new E.Event("outofmaxbounds",T)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=T,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(T),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(T),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new E.Event("geolocate",T)),this._finish()}}_updateCamera(T){const u=new E.LngLat(T.coords.longitude,T.coords.latitude),y=T.coords.accuracy,D=this._map.getBearing(),A=E.extend({bearing:D},this.options.fitBoundsOptions);this._map.fitBounds(u.toBounds(y),A,{geolocateSource:!0})}_updateMarker(T){if(T){const u=new E.LngLat(T.coords.longitude,T.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=T.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const T=this._map._container.clientHeight/2,u=this._map.unproject([0,T]),y=this._map.unproject([1,T]),D=u.distanceTo(y),A=Math.ceil(2*this._accuracy/D);this._circleElement.style.width=`${A}px`,this._circleElement.style.height=`${A}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(T){if(this._map){if(this.options.trackUserLocation)if(1===T.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===T.code&&tl)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new E.Event("error",T)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(T){if(this._container.addEventListener("contextmenu",u=>u.preventDefault()),this._geolocateButton=xe.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),xe.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===T){E.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=xe.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new oc(this._dotElement),this._circleElement=xe.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new oc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{u.geolocateSource||"ACTIVE_LOCK"!==this._watchState||u.originalEvent&&"resize"===u.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new E.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return E.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new E.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":yo--,tl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new E.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new E.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let T;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),yo++,yo>1?(T={maximumAge:6e5,timeout:0},tl=!0):(T=this.options.positionOptions,tl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,T)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:hs,LogoControl:Ls,ScaleControl:class{constructor(T){this.options=E.extend({},Ma,T),E.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){Du(this._map,this._container,this.options)}onAdd(T){return this._map=T,this._container=xe.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",T.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){xe.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(T){this.options.unit=T,Du(this._map,this._container,this.options)}},FullscreenControl:class{constructor(T){this._fullscreen=!1,T&&T.container&&(T.container instanceof HTMLElement?this._container=T.container:E.warnOnce("Full screen control 'container' must be a DOM element.")),E.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(T){return this._map=T,this._container||(this._container=this._map.getContainer()),this._controlContainer=xe.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",E.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){xe.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const T=this._fullscreenButton=xe.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);xe.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",T).setAttribute("aria-hidden","true"),T.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const T=this._getTitle();this._fullscreenButton.setAttribute("aria-label",T),this._fullscreenButton.title=T}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(T){this.options=T,E.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(T){return this._map=T,this._container=xe.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=xe.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),xe.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){xe.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends E.Evented{constructor(T){super(),this.options=E.extend(Object.create(Eo),T),E.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(T){return this._map&&this.remove(),this._map=T,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new E.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&xe.remove(this._content),this._container&&(xe.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new E.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(T){return this._lngLat=E.LngLat.convert(T),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(T){return this.setDOMContent(document.createTextNode(T))}setHTML(T){const u=document.createDocumentFragment(),y=document.createElement("body");let D;for(y.innerHTML=T;D=y.firstChild,D;)u.appendChild(D);return this.setDOMContent(u)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(T){return this.options.maxWidth=T,this._update(),this}setDOMContent(T){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=xe.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(T),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(T){this._container&&this._container.classList.add(T)}removeClassName(T){this._container&&this._container.classList.remove(T)}setOffset(T){return this.options.offset=T,this._update(),this}toggleClassName(T){if(this._container)return this._container.classList.toggle(T)}_createCloseButton(){this.options.closeButton&&(this._closeButton=xe.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(T){this._update(T.point)}_onMouseMove(T){this._update(T.point)}_onDrag(T){this._update(T.point)}_update(T){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=xe.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=xe.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(F=>this._container.classList.add(F)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=hu(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!T))return;const u=this._pos=this._trackPointer&&T?T:this._map.project(this._lngLat);let y=this.options.anchor;const D=Zc(this.options.offset);if(!y){const F=this._container.offsetWidth,$=this._container.offsetHeight;let Z;Z=u.y+D.bottom.y<$?["top"]:u.y>this._map.transform.height-$?["bottom"]:[],u.x<F/2?Z.push("left"):u.x>this._map.transform.width-F/2&&Z.push("right"),y=0===Z.length?"bottom":Z.join("-")}const A=u.add(D[y]).round();xe.setTransform(this._container,`${Jn[y]} translate(${A.x}px,${A.y}px)`),Ui(this._container,y,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const T=this._container.querySelector(ls);T&&T.focus()}_onClose(){this.remove()}},Marker:oc,Style:eo,LngLat:E.LngLat,LngLatBounds:E.LngLatBounds,Point:E.pointGeometry,MercatorCoordinate:E.MercatorCoordinate,Evented:E.Evented,AJAXError:E.AJAXError,config:E.config,CanvasSource:gt,GeoJSONSource:dt,ImageSource:ut,RasterDEMTileSource:Qe,RasterTileSource:st,VectorTileSource:Xe,VideoSource:$e,prewarm:function(){Fr().acquire($n)},clearPrewarmedResources:function(){const T=sr;T&&(T.isPreloaded()&&1===T.numActive()?(T.release($n),sr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return hn.workerCount},set workerCount(T){hn.workerCount=T},get maxParallelImageRequests(){return E.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(T){E.config.MAX_PARALLEL_IMAGE_REQUESTS=T},clearStorage(T){E.clearTileCache(T)},workerUrl:"",addProtocol(T,u){E.config.REGISTERED_PROTOCOLS[T]=u},removeProtocol(T){delete E.config.REGISTERED_PROTOCOLS[T]}};return Js.extend(gl,{isSafari:E.isSafari,getPerformanceMetrics:E.PerformanceUtils.getPerformanceMetrics}),gl}),o}()},4650:(lt,Pe,W)=>{"use strict";W.d(Pe,{$8M:()=>v,$Z:()=>Ou,AFp:()=>gx,ALo:()=>Gw,AaK:()=>Ne,AsE:()=>kb,BQk:()=>xr,CHM:()=>$s,CRH:()=>ax,CZH:()=>qh,CqO:()=>Za,D6c:()=>kM,DdM:()=>kw,EEQ:()=>Zl,EJc:()=>l0,EiD:()=>rg,EpF:()=>Ur,F$t:()=>Of,F4k:()=>ya,FYo:()=>ap,FiY:()=>kn,G48:()=>EM,Gf:()=>$D,GfV:()=>xf,Gpc:()=>Ke,Gre:()=>iw,GuJ:()=>Ot,Hsn:()=>$h,Ikx:()=>Vb,JOm:()=>gu,JVY:()=>Md,JZr:()=>De,KtG:()=>Na,L6k:()=>bf,LAX:()=>Zy,LFG:()=>nr,LSH:()=>Wp,Lbi:()=>oM,Lck:()=>ZA,MAs:()=>sd,MMx:()=>nx,MR2:()=>O_,NdJ:()=>Ar,O4$:()=>Tl,OlP:()=>wt,Oqu:()=>kv,P3R:()=>sg,PXZ:()=>yM,Q6J:()=>ad,QGY:()=>ho,QP$:()=>qr,QbO:()=>aM,Qsj:()=>nh,R0b:()=>Bu,RDi:()=>Yy,Rgc:()=>Ep,SBq:()=>th,Sil:()=>dE,Suo:()=>HD,TTD:()=>Sl,TgZ:()=>ld,Tol:()=>J1,Udp:()=>Ab,W1O:()=>Xw,WFA:()=>cl,X6Q:()=>wM,XFs:()=>Je,Xpm:()=>mn,Xts:()=>Xp,Y36:()=>Ru,YKP:()=>mD,YNc:()=>qs,Yjl:()=>ii,Yz7:()=>Sn,Z0I:()=>jr,ZZ4:()=>Gg,_Bn:()=>pD,_UZ:()=>fn,_Vd:()=>Nh,_c5:()=>xy,_uU:()=>Ob,aQg:()=>Hg,c2e:()=>Em,cJS:()=>$n,cg1:()=>sy,d8E:()=>oy,dDg:()=>_M,dqk:()=>jt,eBb:()=>S_,eFA:()=>Mm,ekj:()=>ey,eoX:()=>gE,f3M:()=>wa,g9A:()=>uE,h0i:()=>cy,hGG:()=>PE,hYB:()=>q_,hij:()=>Lb,iGM:()=>Zw,ifc:()=>le,ip1:()=>cE,jDz:()=>Ow,kL8:()=>Gb,kcU:()=>yc,lG2:()=>lr,lcZ:()=>$w,lnq:()=>Fv,lqb:()=>eu,lri:()=>pE,mCW:()=>Gp,n5z:()=>ie,n_E:()=>Kv,oAB:()=>xn,oJD:()=>T_,oxw:()=>ud,pB0:()=>Wy,q3G:()=>xa,qLn:()=>zh,qOj:()=>$_,qZA:()=>yu,qzn:()=>Oh,rWj:()=>mE,s9C:()=>dh,sBO:()=>CM,sIi:()=>Sg,s_b:()=>rx,soG:()=>Cm,tBr:()=>cn,tb:()=>sM,tp0:()=>fu,uIk:()=>H_,vHH:()=>oe,vpe:()=>vu,wAp:()=>Sr,xi3:()=>ND,xp6:()=>pn,ynx:()=>Gi,z2F:()=>d0,z3N:()=>Tu,zSh:()=>Qu,zs3:()=>Do});var o=W(7579),me=W(727),Ae=W(9751),E=W(6451),Se=W(3099);function he(d){for(let h in d)if(d[h]===he)return h;throw Error("Could not find renamed property on target object.")}function Oe(d,h){for(const g in h)h.hasOwnProperty(g)&&!d.hasOwnProperty(g)&&(d[g]=h[g])}function Ne(d){if("string"==typeof d)return d;if(Array.isArray(d))return"["+d.map(Ne).join(", ")+"]";if(null==d)return""+d;if(d.overriddenName)return`${d.overriddenName}`;if(d.name)return`${d.name}`;const h=d.toString();if(null==h)return""+h;const g=h.indexOf("\n");return-1===g?h:h.substring(0,g)}function xe(d,h){return null==d||""===d?null===h?"":h:null==h||""===h?d:d+" "+h}const ct=he({__forward_ref__:he});function Ke(d){return d.__forward_ref__=Ke,d.toString=function(){return Ne(this())},d}function Te(d){return at(d)?d():d}function at(d){return"function"==typeof d&&d.hasOwnProperty(ct)&&d.__forward_ref__===Ke}function Ct(d){return d&&!!d.\u0275providers}const De="https://g.co/ng/security#xss";class oe extends Error{constructor(h,g){super(function ye(d,h){return`NG0${Math.abs(d)}${h?": "+h.trim():""}`}(h,g)),this.code=h}}function ce(d){return"string"==typeof d?d:null==d?"":String(d)}function se(d,h){throw new oe(-201,!1)}function Vt(d,h){null==d&&function rn(d,h,g,x){throw new Error(`ASSERTION ERROR: ${d}`+(null==x?"":` [Expected=> ${g} ${x} ${h} <=Actual]`))}(h,d,null,"!=")}function Sn(d){return{token:d.token,providedIn:d.providedIn||null,factory:d.factory,value:void 0}}function $n(d){return{providers:d.providers||[],imports:d.imports||[]}}function hn(d){return sr(d,It)||sr(d,Le)}function jr(d){return null!==hn(d)}function sr(d,h){return d.hasOwnProperty(h)?d[h]:null}function Ri(d){return d&&(d.hasOwnProperty(je)||d.hasOwnProperty(ke))?d[je]:null}const It=he({\u0275prov:he}),je=he({\u0275inj:he}),Le=he({ngInjectableDef:he}),ke=he({ngInjectorDef:he});var Je=(()=>((Je=Je||{})[Je.Default=0]="Default",Je[Je.Host=1]="Host",Je[Je.Self=2]="Self",Je[Je.SkipSelf=4]="SkipSelf",Je[Je.Optional=8]="Optional",Je))();let Tt;function ln(d){const h=Tt;return Tt=d,h}function un(d,h,g){const x=hn(d);return x&&"root"==x.providedIn?void 0===x.value?x.value=x.factory():x.value:g&Je.Optional?null:void 0!==h?h:void se(Ne(d))}const jt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),hr={},Ti="__NG_DI_FLAG__",Bi="ngTempTokenPath",Cn=/\n/gm,hi="__source";let Di;function Mr(d){const h=Di;return Di=d,h}function wi(d,h=Je.Default){if(void 0===Di)throw new oe(-203,!1);return null===Di?un(d,void 0,h):Di.get(d,h&Je.Optional?null:void 0,h)}function nr(d,h=Je.Default){return(function Yt(){return Tt}()||wi)(Te(d),h)}function wa(d,h=Je.Default){return nr(d,Lr(h))}function Lr(d){return typeof d>"u"||"number"==typeof d?d:0|(d.optional&&8)|(d.host&&1)|(d.self&&2)|(d.skipSelf&&4)}function fi(d){const h=[];for(let g=0;g<d.length;g++){const x=Te(d[g]);if(Array.isArray(x)){if(0===x.length)throw new oe(900,!1);let I,R=Je.Default;for(let V=0;V<x.length;V++){const Y=x[V],Q=Zs(Y);"number"==typeof Q?-1===Q?I=Y.token:R|=Q:I=Y}h.push(nr(I,R))}else h.push(nr(x))}return h}function ar(d,h){return d[Ti]=h,d.prototype[Ti]=h,d}function Zs(d){return d[Ti]}function ia(d){return{toString:d}.toString()}var zs=(()=>((zs=zs||{})[zs.OnPush=0]="OnPush",zs[zs.Default=1]="Default",zs))(),le=(()=>{return(d=le||(le={}))[d.Emulated=0]="Emulated",d[d.None=2]="None",d[d.ShadowDom=3]="ShadowDom",le;var d})();const Ee={},Ge=[],qe=he({\u0275cmp:he}),bt=he({\u0275dir:he}),Ot=he({\u0275pipe:he}),Dt=he({\u0275mod:he}),vt=he({\u0275fac:he}),Lt=he({__NG_ELEMENT_ID__:he});let Qt=0;function mn(d){return ia(()=>{const g=!0===d.standalone,x={},I={type:d.type,providersResolver:null,decls:d.decls,vars:d.vars,factory:null,template:d.template||null,consts:d.consts||null,ngContentSelectors:d.ngContentSelectors,hostBindings:d.hostBindings||null,hostVars:d.hostVars||0,hostAttrs:d.hostAttrs||null,contentQueries:d.contentQueries||null,declaredInputs:x,inputs:null,outputs:null,exportAs:d.exportAs||null,onPush:d.changeDetection===zs.OnPush,directiveDefs:null,pipeDefs:null,standalone:g,dependencies:g&&d.dependencies||null,getStandaloneInjector:null,selectors:d.selectors||Ge,viewQuery:d.viewQuery||null,features:d.features||null,data:d.data||{},encapsulation:d.encapsulation||le.Emulated,id:"c"+Qt++,styles:d.styles||Ge,_:null,setInput:null,schemas:d.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},R=d.dependencies,V=d.features;return I.inputs=mi(d.inputs,x),I.outputs=mi(d.outputs),V&&V.forEach(Y=>Y(I)),I.directiveDefs=R?()=>("function"==typeof R?R():R).map(li).filter(Pn):null,I.pipeDefs=R?()=>("function"==typeof R?R():R).map(Wi).filter(Pn):null,I})}function li(d){return Xn(d)||Mi(d)}function Pn(d){return null!==d}function xn(d){return ia(()=>({type:d.type,bootstrap:d.bootstrap||Ge,declarations:d.declarations||Ge,imports:d.imports||Ge,exports:d.exports||Ge,transitiveCompileScopes:null,schemas:d.schemas||null,id:d.id||null}))}function mi(d,h){if(null==d)return Ee;const g={};for(const x in d)if(d.hasOwnProperty(x)){let I=d[x],R=I;Array.isArray(I)&&(R=I[1],I=I[0]),g[I]=x,h&&(h[I]=R)}return g}const lr=mn;function ii(d){return{type:d.type,name:d.name,factory:null,pure:!1!==d.pure,standalone:!0===d.standalone,onDestroy:d.type.prototype.ngOnDestroy||null}}function Xn(d){return d[qe]||null}function Mi(d){return d[bt]||null}function Wi(d){return d[Ot]||null}function qr(d){const h=Xn(d)||Mi(d)||Wi(d);return null!==h&&h.standalone}function yr(d,h){const g=d[Dt]||null;if(!g&&!0===h)throw new Error(`Type ${Ne(d)} does not have '\u0275mod' property.`);return g}function po(d){return Array.isArray(d)&&"object"==typeof d[1]}function Ea(d){return Array.isArray(d)&&!0===d[1]}function ka(d){return 0!=(4&d.flags)}function Nr(d){return d.componentOffset>-1}function fc(d){return 1==(1&d.flags)}function so(d){return null!==d.template}function Xr(d){return 0!=(256&d[2])}function Ds(d,h){return d.hasOwnProperty(vt)?d[vt]:null}class su{constructor(h,g,x){this.previousValue=h,this.currentValue=g,this.firstChange=x}isFirstChange(){return this.firstChange}}function Sl(){return au}function au(d){return d.type.prototype.ngOnChanges&&(d.setInput=Ci),as}function as(){const d=lu(this),h=d?.current;if(h){const g=d.previous;if(g===Ee)d.previous=h;else for(let x in h)g[x]=h[x];d.current=null,this.ngOnChanges(h)}}function Ci(d,h,g,x){const I=this.declaredInputs[g],R=lu(d)||function Ms(d,h){return d[Su]=h}(d,{previous:Ee,current:null}),V=R.current||(R.current={}),Y=R.previous,Q=Y[I];V[I]=new su(Q&&Q.currentValue,h,Y===Ee),d[x]=h}Sl.ngInherit=!0;const Su="__ngSimpleChanges__";function lu(d){return d[Su]||null}function ji(d){for(;Array.isArray(d);)d=d[0];return d}function mo(d,h){return ji(h[d])}function Ki(d,h){return ji(h[d.index])}function bo(d,h){return d.data[h]}function vi(d,h){return d[h]}function Is(d,h){const g=h[d];return po(g)?g:g[0]}function cu(d){return 64==(64&d[2])}function Ja(d,h){return null==h?null:d[h]}function Ud(d){d[18]=0}function Dl(d,h){d[5]+=h;let g=d,x=d[3];for(;null!==x&&(1===h&&1===g[5]||-1===h&&0===g[5]);)x[5]+=h,g=x,x=x[3]}const Yn={lFrame:va(null),bindingsEnabled:!0};function $u(){return Yn.bindingsEnabled}function _n(){return Yn.lFrame.lView}function Pr(){return Yn.lFrame.tView}function $s(d){return Yn.lFrame.contextLView=d,d[8]}function Na(d){return Yn.lFrame.contextLView=null,d}function ao(){let d=Ic();for(;null!==d&&64===d.type;)d=d.parent;return d}function Ic(){return Yn.lFrame.currentTNode}function xo(d,h){const g=Yn.lFrame;g.currentTNode=d,g.isParent=h}function xd(){return Yn.lFrame.isParent}function nc(){Yn.lFrame.isParent=!1}function gs(){const d=Yn.lFrame;let h=d.bindingRootIndex;return-1===h&&(h=d.bindingRootIndex=d.tView.bindingStartIndex),h}function Qo(){return Yn.lFrame.bindingIndex}function Qa(){return Yn.lFrame.bindingIndex++}function za(d){const h=Yn.lFrame,g=h.bindingIndex;return h.bindingIndex=h.bindingIndex+d,g}function $l(d,h){const g=Yn.lFrame;g.bindingIndex=g.bindingRootIndex=d,_s(h)}function _s(d){Yn.lFrame.currentDirectiveIndex=d}function rc(d){const h=Yn.lFrame.currentDirectiveIndex;return-1===h?null:d[h]}function _o(){return Yn.lFrame.currentQueryIndex}function Ua(d){Yn.lFrame.currentQueryIndex=d}function aa(d){const h=d[1];return 2===h.type?h.declTNode:1===h.type?d[6]:null}function $d(d,h,g){if(g&Je.SkipSelf){let I=h,R=d;for(;!(I=I.parent,null!==I||g&Je.Host||(I=aa(R),null===I||(R=R[15],10&I.type))););if(null===I)return!1;h=I,d=R}const x=Yn.lFrame=_c();return x.currentTNode=h,x.lView=d,!0}function el(d){const h=_c(),g=d[1];Yn.lFrame=h,h.currentTNode=g.firstChild,h.lView=d,h.tView=g,h.contextLView=d,h.bindingIndex=g.bindingStartIndex,h.inI18n=!1}function _c(){const d=Yn.lFrame,h=null===d?null:d.child;return null===h?va(d):h}function va(d){const h={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:d,child:null,inI18n:!1};return null!==d&&(d.child=h),h}function vs(){const d=Yn.lFrame;return Yn.lFrame=d.parent,d.currentTNode=null,d.lView=null,d}const Va=vs;function la(){const d=vs();d.isParent=!0,d.tView=null,d.selectedIndex=-1,d.contextLView=null,d.elementDepthCount=0,d.currentDirectiveIndex=-1,d.currentNamespace=null,d.bindingRootIndex=-1,d.bindingIndex=-1,d.currentQueryIndex=0}function bs(){return Yn.lFrame.selectedIndex}function io(d){Yn.lFrame.selectedIndex=d}function wn(){const d=Yn.lFrame;return bo(d.tView,d.selectedIndex)}function Tl(){Yn.lFrame.currentNamespace="svg"}function yc(){!function $c(){Yn.lFrame.currentNamespace=null}()}function Hc(d,h){for(let g=h.directiveStart,x=h.directiveEnd;g<x;g++){const R=d.data[g].type.prototype,{ngAfterContentInit:V,ngAfterContentChecked:Y,ngAfterViewInit:Q,ngAfterViewChecked:_e,ngOnDestroy:He}=R;V&&(d.contentHooks||(d.contentHooks=[])).push(-g,V),Y&&((d.contentHooks||(d.contentHooks=[])).push(g,Y),(d.contentCheckHooks||(d.contentCheckHooks=[])).push(g,Y)),Q&&(d.viewHooks||(d.viewHooks=[])).push(-g,Q),_e&&((d.viewHooks||(d.viewHooks=[])).push(g,_e),(d.viewCheckHooks||(d.viewCheckHooks=[])).push(g,_e)),null!=He&&(d.destroyHooks||(d.destroyHooks=[])).push(g,He)}}function wo(d,h,g){Ts(d,h,3,g)}function jc(d,h,g,x){(3&d[2])===g&&Ts(d,h,g,x)}function ba(d,h){let g=d[2];(3&g)===h&&(g&=2047,g+=1,d[2]=g)}function Ts(d,h,g,x){const R=x??-1,V=h.length-1;let Y=0;for(let Q=void 0!==x?65535&d[18]:0;Q<V;Q++)if("number"==typeof h[Q+1]){if(Y=h[Q],null!=x&&Y>=x)break}else h[Q]<0&&(d[18]+=65536),(Y<R||-1==R)&&(fl(d,g,h,Q),d[18]=(4294901760&d[18])+Q+2),Q++}function fl(d,h,g,x){const I=g[x]<0,R=g[x+1],Y=d[I?-g[x]:g[x]];if(I){if(d[2]>>11<d[18]>>16&&(3&d[2])===h){d[2]+=2048;try{R.call(Y)}finally{}}}else try{R.call(Y)}finally{}}class Al{constructor(h,g,x){this.factory=h,this.resolving=!1,this.canSeeViewProviders=g,this.injectImpl=x}}function Sa(d,h,g){let x=0;for(;x<g.length;){const I=g[x];if("number"==typeof I){if(0!==I)break;x++;const R=g[x++],V=g[x++],Y=g[x++];d.setAttribute(h,V,Y,R)}else{const R=I,V=g[++x];Js(R)?d.setProperty(h,R,V):d.setAttribute(h,R,V),x++}}return x}function uu(d){return 3===d||4===d||6===d}function Js(d){return 64===d.charCodeAt(0)}function Gr(d,h){if(null!==h&&0!==h.length)if(null===d||0===d.length)d=h.slice();else{let g=-1;for(let x=0;x<h.length;x++){const I=h[x];"number"==typeof I?g=I:0===g||hs(d,g,I,null,-1===g||2===g?h[++x]:null)}}return d}function hs(d,h,g,x,I){let R=0,V=d.length;if(-1===h)V=-1;else for(;R<d.length;){const Y=d[R++];if("number"==typeof Y){if(Y===h){V=-1;break}if(Y>h){V=R-1;break}}}for(;R<d.length;){const Y=d[R];if("number"==typeof Y)break;if(Y===g){if(null===x)return void(null!==I&&(d[R+1]=I));if(x===d[R+1])return void(d[R+2]=I)}R++,null!==x&&R++,null!==I&&R++}-1!==V&&(d.splice(V,0,h),R=V+1),d.splice(R++,0,g),null!==x&&d.splice(R++,0,x),null!==I&&d.splice(R++,0,I)}function Ls(d){return-1!==d}function Tc(d){return 32767&d}function Ac(d,h){let g=function Da(d){return d>>16}(d),x=h;for(;g>0;)x=x[15],g--;return x}let du=!0;function lo(d){const h=du;return du=d,h}let oc=0;const Pl={};function yo(d,h){const g=Ma(d,h);if(-1!==g)return g;const x=h[1];x.firstCreatePass&&(d.injectorIndex=h.length,tl(x.data,d),tl(h,null),tl(x.blueprint,null));const I=Du(d,h),R=d.injectorIndex;if(Ls(I)){const V=Tc(I),Y=Ac(I,h),Q=Y[1].data;for(let _e=0;_e<8;_e++)h[R+_e]=Y[V+_e]|Q[V+_e]}return h[R+8]=I,R}function tl(d,h){d.push(0,0,0,0,0,0,0,0,h)}function Ma(d,h){return-1===d.injectorIndex||d.parent&&d.parent.injectorIndex===d.injectorIndex||null===h[d.injectorIndex+8]?-1:d.injectorIndex}function Du(d,h){if(d.parent&&-1!==d.parent.injectorIndex)return d.parent.injectorIndex;let g=0,x=null,I=h;for(;null!==I;){if(x=m(I),null===x)return-1;if(g++,I=I[15],-1!==x.injectorIndex)return x.injectorIndex|g<<16}return-1}function nl(d,h,g){!function Yc(d,h,g){let x;"string"==typeof g?x=g.charCodeAt(0)||0:g.hasOwnProperty(Lt)&&(x=g[Lt]),null==x&&(x=g[Lt]=oc++);const I=255&x;h.data[d+(I>>5)]|=1<<I}(d,h,g)}function ls(d,h,g){if(g&Je.Optional||void 0!==d)return d;se()}function Zc(d,h,g,x){if(g&Je.Optional&&void 0===x&&(x=null),0==(g&(Je.Self|Je.Host))){const I=d[9],R=ln(void 0);try{return I?I.get(h,x,g&Je.Optional):un(h,x,g&Je.Optional)}finally{ln(R)}}return ls(x,0,g)}function gl(d,h,g,x=Je.Default,I){if(null!==d){if(1024&h[2]){const V=function l(d,h,g,x,I){let R=d,V=h;for(;null!==R&&null!==V&&1024&V[2]&&!(256&V[2]);){const Y=T(R,V,g,x|Je.Self,Pl);if(Y!==Pl)return Y;let Q=R.parent;if(!Q){const _e=V[21];if(_e){const He=_e.get(g,Pl,x);if(He!==Pl)return He}Q=m(V),V=V[15]}R=Q}return I}(d,h,g,x,Pl);if(V!==Pl)return V}const R=T(d,h,g,x,Pl);if(R!==Pl)return R}return Zc(h,g,x,I)}function T(d,h,g,x,I){const R=function A(d){if("string"==typeof d)return d.charCodeAt(0)||0;const h=d.hasOwnProperty(Lt)?d[Lt]:void 0;return"number"==typeof h?h>=0?255&h:ee:h}(g);if("function"==typeof R){if(!$d(h,d,x))return x&Je.Host?ls(I,0,x):Zc(h,g,x,I);try{const V=R(x);if(null!=V||x&Je.Optional)return V;se()}finally{Va()}}else if("number"==typeof R){let V=null,Y=Ma(d,h),Q=-1,_e=x&Je.Host?h[16][6]:null;for((-1===Y||x&Je.SkipSelf)&&(Q=-1===Y?Du(d,h):h[Y+8],-1!==Q&&$(x,!1)?(V=h[1],Y=Tc(Q),h=Ac(Q,h)):Y=-1);-1!==Y;){const He=h[1];if(F(R,Y,He.data)){const yt=u(Y,h,g,V,x,_e);if(yt!==Pl)return yt}Q=h[Y+8],-1!==Q&&$(x,h[1].data[Y+8]===_e)&&F(R,Y,h)?(V=He,Y=Tc(Q),h=Ac(Q,h)):Y=-1}}return I}function u(d,h,g,x,I,R){const V=h[1],Y=V.data[d+8],He=y(Y,V,g,null==x?Nr(Y)&&du:x!=V&&0!=(3&Y.type),I&Je.Host&&R===Y);return null!==He?D(h,V,He,Y):Pl}function y(d,h,g,x,I){const R=d.providerIndexes,V=h.data,Y=1048575&R,Q=d.directiveStart,He=R>>20,Nt=I?Y+He:d.directiveEnd;for(let en=x?Y:Y+He;en<Nt;en++){const bn=V[en];if(en<Q&&g===bn||en>=Q&&bn.type===g)return en}if(I){const en=V[Q];if(en&&so(en)&&en.type===g)return Q}return null}function D(d,h,g,x){let I=d[g];const R=h.data;if(function ml(d){return d instanceof Al}(I)){const V=I;V.resolving&&function ve(d,h){const g=h?`. Dependency path: ${h.join(" > ")} > ${d}`:"";throw new oe(-200,`Circular dependency in DI detected for ${d}${g}`)}(function Re(d){return"function"==typeof d?d.name||d.toString():"object"==typeof d&&null!=d&&"function"==typeof d.type?d.type.name||d.type.toString():ce(d)}(R[g]));const Y=lo(V.canSeeViewProviders);V.resolving=!0;const Q=V.injectImpl?ln(V.injectImpl):null;$d(d,x,Je.Default);try{I=d[g]=V.factory(void 0,R,d,x),h.firstCreatePass&&g>=x.directiveStart&&function ua(d,h,g){const{ngOnChanges:x,ngOnInit:I,ngDoCheck:R}=h.type.prototype;if(x){const V=au(h);(g.preOrderHooks||(g.preOrderHooks=[])).push(d,V),(g.preOrderCheckHooks||(g.preOrderCheckHooks=[])).push(d,V)}I&&(g.preOrderHooks||(g.preOrderHooks=[])).push(0-d,I),R&&((g.preOrderHooks||(g.preOrderHooks=[])).push(d,R),(g.preOrderCheckHooks||(g.preOrderCheckHooks=[])).push(d,R))}(g,R[g],h)}finally{null!==Q&&ln(Q),lo(Y),V.resolving=!1,Va()}}return I}function F(d,h,g){return!!(g[h+(d>>5)]&1<<d)}function $(d,h){return!(d&Je.Self||d&Je.Host&&h)}class Z{constructor(h,g){this._tNode=h,this._lView=g}get(h,g,x){return gl(this._tNode,this._lView,h,Lr(x),g)}}function ee(){return new Z(ao(),_n())}function ie(d){return ia(()=>{const h=d.prototype.constructor,g=h[vt]||s(h),x=Object.prototype;let I=Object.getPrototypeOf(d.prototype).constructor;for(;I&&I!==x;){const R=I[vt]||s(I);if(R&&R!==g)return R;I=Object.getPrototypeOf(I)}return R=>new R})}function s(d){return at(d)?()=>{const h=s(Te(d));return h&&h()}:Ds(d)}function m(d){const h=d[1],g=h.type;return 2===g?h.declTNode:1===g?d[6]:null}function v(d){return function Eo(d,h){if("class"===h)return d.classes;if("style"===h)return d.styles;const g=d.attrs;if(g){const x=g.length;let I=0;for(;I<x;){const R=g[I];if(uu(R))break;if(0===R)I+=2;else if("number"==typeof R)for(I++;I<x&&"string"==typeof g[I];)I++;else{if(R===h)return g[I+1];I+=2}}}return null}(ao(),d)}const k="__parameters__";function pe(d,h,g){return ia(()=>{const x=function fe(d){return function(...g){if(d){const x=d(...g);for(const I in x)this[I]=x[I]}}}(h);function I(...R){if(this instanceof I)return x.apply(this,R),this;const V=new I(...R);return Y.annotation=V,Y;function Y(Q,_e,He){const yt=Q.hasOwnProperty(k)?Q[k]:Object.defineProperty(Q,k,{value:[]})[k];for(;yt.length<=He;)yt.push(null);return(yt[He]=yt[He]||[]).push(V),Q}}return g&&(I.prototype=Object.create(g.prototype)),I.prototype.ngMetadataName=d,I.annotationCls=I,I})}class wt{constructor(h,g){this._desc=h,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof g?this.__NG_ELEMENT_ID__=g:void 0!==g&&(this.\u0275prov=Sn({token:this,providedIn:g.providedIn||"root",factory:g.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Rl(d,h){d.forEach(g=>Array.isArray(g)?Rl(g,h):h(g))}function Pc(d,h,g){h>=d.length?d.push(g):d.splice(h,0,g)}function bc(d,h){return h>=d.length-1?d.pop():d.splice(h,1)[0]}function Rc(d,h){const g=[];for(let x=0;x<d;x++)g.push(h);return g}function Ei(d,h,g){let x=Jr(d,h);return x>=0?d[1|x]=g:(x=~x,function Wc(d,h,g,x){let I=d.length;if(I==h)d.push(g,x);else if(1===I)d.push(x,d[0]),d[0]=g;else{for(I--,d.push(d[I-1],d[I]);I>h;)d[I]=d[I-2],I--;d[h]=g,d[h+1]=x}}(d,x,h,g)),x}function Fi(d,h){const g=Jr(d,h);if(g>=0)return d[1|g]}function Jr(d,h){return function Wr(d,h,g){let x=0,I=d.length>>g;for(;I!==x;){const R=x+(I-x>>1),V=d[R<<g];if(h===V)return R<<g;V>h?I=R:x=R+1}return~(I<<g)}(d,h,1)}const cn=ar(pe("Inject",d=>({token:d})),-1),kn=ar(pe("Optional"),8),fu=ar(pe("SkipSelf"),4);var gu=(()=>((gu=gu||{})[gu.Important=1]="Important",gu[gu.DashCase=2]="DashCase",gu))();const Ih=new Map;let Ga=0;function sf(d){return Ih.get(d)||null}class Ol{constructor(h,g,x){this.lViewId=h,this.nodeIndex=g,this.native=x}get lView(){return sf(this.lViewId)}}function Zl(d){let h=Kc(d);if(h){if(po(h)){const g=h;let x,I,R;if(Sd(d)){if(x=function jf(d,h){const g=d[1].components;if(g)for(let x=0;x<g.length;x++){const I=g[x];if(Is(I,d)[8]===h)return I}else if(Is(22,d)[8]===h)return 22;return-1}(g,d),-1==x)throw new Error("The provided component was not found in the application");I=d}else if(function Wd(d){return d&&d.constructor&&d.constructor.\u0275dir}(d)){if(x=function r_(d,h){let g=d[1].firstChild;for(;g;){const I=g.directiveEnd;for(let R=g.directiveStart;R<I;R++)if(d[R]===h)return g.index;g=Jc(g)}return-1}(g,d),-1==x)throw new Error("The provided directive was not found in the application");R=function jm(d,h){const g=h[1].data[d];if(0===g.directiveStart)return Ge;const x=[];for(let I=g.directiveStart;I<g.directiveEnd;I++){const R=h[I];Sd(R)||x.push(R)}return x}(x,g)}else if(x=Hf(g,d),-1==x)return null;const V=ji(g[x]),Y=Kc(V),Q=Y&&!Array.isArray(Y)?Y:_u(g,x,V);if(I&&void 0===Q.component&&(Q.component=I,$a(Q.component,Q)),R&&void 0===Q.directives){Q.directives=R;for(let _e=0;_e<R.length;_e++)$a(R[_e],Q)}$a(Q.native,Q),h=Q}}else{const g=d;let x=g;for(;x=x.parentNode;){const I=Kc(x);if(I){const R=Array.isArray(I)?I:I.lView;if(!R)return null;const V=Hf(R,g);if(V>=0){const Y=ji(R[V]),Q=_u(R,V,Y);$a(Y,Q),h=Q;break}}}}return h||null}function _u(d,h,g){return new Ol(d[20],h,g)}const qu="__ngContext__";function $a(d,h){po(h)?(d[qu]=h[20],function Zd(d){Ih.set(d[20],d)}(h)):d[qu]=h}function Kc(d){const h=d[qu];return"number"==typeof h?sf(h):h||null}function Sd(d){return d&&d.constructor&&d.constructor.\u0275cmp}function Hf(d,h){const g=d[1];for(let x=22;x<g.bindingStartIndex;x++)if(ji(d[x])===h)return x;return-1}function Jc(d){if(d.child)return d.child;if(d.next)return d.next;for(;d.parent&&!d.parent.next;)d=d.parent;return d.parent&&d.parent.next}function qm(d,h){return undefined(d,h)}function cf(d){const h=d[3];return Ea(h)?h[3]:h}function Fp(d){return Yf(d[13])}function uf(d){return Yf(d[4])}function Yf(d){for(;null!==d&&!Ea(d);)d=d[4];return d}function Iu(d,h,g,x,I){if(null!=x){let R,V=!1;Ea(x)?R=x:po(x)&&(V=!0,x=x[0]);const Y=ji(x);0===d&&null!==g?null==I?Dd(h,g,Y):Xd(h,g,Y,I||null,!0):1===d&&null!==g?Xd(h,g,Y,I||null,!0):2===d?function Rh(d,h,g){const x=Kf(d,h);x&&function Xm(d,h,g,x){d.removeChild(h,g,x)}(d,x,h,g)}(h,Y,V):3===d&&h.destroyNode(Y),null!=R&&function f_(d,h,g,x,I){const R=g[7];R!==ji(g)&&Iu(h,d,x,R,I);for(let Y=10;Y<g.length;Y++){const Q=g[Y];ep(Q[1],Q,d,h,x,R)}}(h,d,R,g,I)}}function Zu(d,h,g){return d.createElement(h,g)}function c_(d,h){const g=d[9],x=g.indexOf(h),I=h[3];512&h[2]&&(h[2]&=-513,Dl(I,-1)),g.splice(x,1)}function Xf(d,h){if(d.length<=10)return;const g=10+h,x=d[g];if(x){const I=x[17];null!==I&&I!==d&&c_(I,x),h>0&&(d[g-1][4]=x[4]);const R=bc(d,10+h);!function Wf(d,h){ep(d,h,h[11],2,null,null),h[0]=null,h[6]=null}(x[1],x);const V=R[19];null!==V&&V.detachView(R[1]),x[3]=null,x[4]=null,x[2]&=-65}return x}function Np(d,h){if(!(128&h[2])){const g=h[11];g.destroyNode&&ep(d,h,g,3,null,null),function hf(d){let h=d[13];if(!h)return Wu(d[1],d);for(;h;){let g=null;if(po(h))g=h[13];else{const x=h[10];x&&(g=x)}if(!g){for(;h&&!h[4]&&h!==d;)po(h)&&Wu(h[1],h),h=h[3];null===h&&(h=d),po(h)&&Wu(h[1],h),g=h&&h[4]}h=g}}(h)}}function Wu(d,h){if(!(128&h[2])){h[2]&=-65,h[2]|=128,function rl(d,h){let g;if(null!=d&&null!=(g=d.destroyHooks))for(let x=0;x<g.length;x+=2){const I=h[g[x]];if(!(I instanceof Al)){const R=g[x+1];if(Array.isArray(R))for(let V=0;V<R.length;V+=2){const Y=I[R[V]],Q=R[V+1];try{Q.call(Y)}finally{}}else try{R.call(I)}finally{}}}}(d,h),function Wm(d,h){const g=d.cleanup,x=h[7];let I=-1;if(null!==g)for(let R=0;R<g.length-1;R+=2)if("string"==typeof g[R]){const V=g[R+3];V>=0?x[I=V]():x[I=-V].unsubscribe(),R+=2}else{const V=x[I=g[R+1]];g[R].call(V)}if(null!==x){for(let R=I+1;R<x.length;R++)(0,x[R])();h[7]=null}}(d,h),1===h[1].type&&h[11].destroy();const g=h[17];if(null!==g&&Ea(h[3])){g!==h[3]&&c_(g,h);const x=h[19];null!==x&&x.detachView(d)}!function Th(d){Ih.delete(d[20])}(h)}}function u_(d,h,g){return function d_(d,h,g){let x=h;for(;null!==x&&40&x.type;)x=(h=x).parent;if(null===x)return g[0];{const{componentOffset:I}=x;if(I>-1){const{encapsulation:R}=d.data[x.directiveStart+I];if(R===le.None||R===le.Emulated)return null}return Ki(x,g)}}(d,h.parent,g)}function Xd(d,h,g,x,I){d.insertBefore(h,g,x,I)}function Dd(d,h,g){d.appendChild(h,g)}function ff(d,h,g,x,I){null!==x?Xd(d,h,g,x,I):Dd(d,h,g)}function Kf(d,h){return d.parentNode(h)}function h_(d,h,g){return Ph(d,h,g)}let zp,Up,yf,Ph=function Ah(d,h,g){return 40&d.type?Ki(d,g):null};function Jf(d,h,g,x){const I=u_(d,x,h),R=h[11],Y=h_(x.parent||h[6],x,h);if(null!=I)if(Array.isArray(g))for(let Q=0;Q<g.length;Q++)ff(R,I,g[Q],Y,!1);else ff(R,I,g,Y,!1)}function Qf(d,h){if(null!==h){const g=h.type;if(3&g)return Ki(h,d);if(4&g)return Xu(-1,d[h.index]);if(8&g){const x=h.child;if(null!==x)return Qf(d,x);{const I=d[h.index];return Ea(I)?Xu(-1,I):ji(I)}}if(32&g)return qm(h,d)()||ji(d[h.index]);{const x=mf(d,h);return null!==x?Array.isArray(x)?x[0]:Qf(cf(d[16]),x):Qf(d,h.next)}}return null}function mf(d,h){return null!==h?d[16][6].projection[h.projection]:null}function Xu(d,h){const g=10+d+1;if(g<h.length){const x=h[g],I=x[1].firstChild;if(null!==I)return Qf(x,I)}return h[7]}function gf(d,h,g,x,I,R,V){for(;null!=g;){const Y=x[g.index],Q=g.type;if(V&&0===h&&(Y&&$a(ji(Y),x),g.flags|=2),32!=(32&g.flags))if(8&Q)gf(d,h,g.child,x,I,R,!1),Iu(h,d,I,Y,R);else if(32&Q){const _e=qm(g,x);let He;for(;He=_e();)Iu(h,d,I,He,R);Iu(h,d,I,Y,R)}else 16&Q?_f(d,h,x,g,I,R):Iu(h,d,I,Y,R);g=V?g.projectionNext:g.next}}function ep(d,h,g,x,I,R){gf(g,x,d.firstChild,h,I,R,!1)}function _f(d,h,g,x,I,R){const V=g[16],Q=V[6].projection[x.projection];if(Array.isArray(Q))for(let _e=0;_e<Q.length;_e++)Iu(h,d,I,Q[_e],R);else gf(d,h,Q,V[3],I,R,!0)}function m_(d,h,g){""===g?d.removeAttribute(h,"class"):d.setAttribute(h,"class",g)}function g_(d,h,g){const{mergedAttrs:x,classes:I,styles:R}=g;null!==x&&Sa(d,h,x),null!==I&&m_(d,h,I),null!==R&&function jy(d,h,g){d.setAttribute(h,"style",g)}(d,h,R)}function Kd(d){return function Jm(){if(void 0===zp&&(zp=null,jt.trustedTypes))try{zp=jt.trustedTypes.createPolicy("angular",{createHTML:d=>d,createScript:d=>d,createScriptURL:d=>d})}catch{}return zp}()?.createHTML(d)||d}function Yy(d){Up=d}function Vp(){if(void 0===yf&&(yf=null,jt.trustedTypes))try{yf=jt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:d=>d,createScript:d=>d,createScriptURL:d=>d})}catch{}return yf}function b_(d){return Vp()?.createHTML(d)||d}function vf(d){return Vp()?.createScriptURL(d)||d}class Qs{constructor(h){this.changingThisBreaksApplicationSecurity=h}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${De})`}}class eg extends Qs{getTypeName(){return"HTML"}}class w_ extends Qs{getTypeName(){return"Style"}}class E_ extends Qs{getTypeName(){return"Script"}}class ps extends Qs{getTypeName(){return"URL"}}class Jd extends Qs{getTypeName(){return"ResourceURL"}}function Tu(d){return d instanceof Qs?d.changingThisBreaksApplicationSecurity:d}function Oh(d,h){const g=function C_(d){return d instanceof Qs&&d.getTypeName()||null}(d);if(null!=g&&g!==h){if("ResourceURL"===g&&"URL"===h)return!0;throw new Error(`Required a safe ${h}, got a ${g} (see ${De})`)}return g===h}function Md(d){return new eg(d)}function bf(d){return new w_(d)}function S_(d){return new E_(d)}function Zy(d){return new ps(d)}function Wy(d){return new Jd(d)}class Xy{constructor(h){this.inertDocumentHelper=h}getInertBodyElement(h){h="<body><remove></remove>"+h;try{const g=(new window.DOMParser).parseFromString(Kd(h),"text/html").body;return null===g?this.inertDocumentHelper.getInertBodyElement(h):(g.removeChild(g.firstChild),g)}catch{return null}}}class Ky{constructor(h){if(this.defaultDoc=h,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const g=this.inertDocument.createElement("html");this.inertDocument.appendChild(g);const x=this.inertDocument.createElement("body");g.appendChild(x)}}getInertBodyElement(h){const g=this.inertDocument.createElement("template");if("content"in g)return g.innerHTML=Kd(h),g;const x=this.inertDocument.createElement("body");return x.innerHTML=Kd(h),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(x),x}stripCustomNsAttrs(h){const g=h.attributes;for(let I=g.length-1;0<I;I--){const V=g.item(I).name;("xmlns:ns1"===V||0===V.indexOf("ns1:"))&&h.removeAttribute(V)}let x=h.firstChild;for(;x;)x.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(x),x=x.nextSibling}}const Qy=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Gp(d){return(d=String(d)).match(Qy)?d:"unsafe:"+d}function Ku(d){const h={};for(const g of d.split(","))h[g]=!0;return h}function Id(...d){const h={};for(const g of d)for(const x in g)g.hasOwnProperty(x)&&(h[x]=!0);return h}const Lh=Ku("area,br,col,hr,img,wbr"),tg=Ku("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),M_=Ku("rp,rt"),tp=Id(Lh,Id(tg,Ku("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Id(M_,Ku("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Id(M_,tg)),$p=Ku("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),kh=Id($p,Ku("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ku("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),jp=Ku("script,style,template");class qp{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(h){let g=h.firstChild,x=!0;for(;g;)if(g.nodeType===Node.ELEMENT_NODE?x=this.startElement(g):g.nodeType===Node.TEXT_NODE?this.chars(g.nodeValue):this.sanitizedSomething=!0,x&&g.firstChild)g=g.firstChild;else for(;g;){g.nodeType===Node.ELEMENT_NODE&&this.endElement(g);let I=this.checkClobberedElement(g,g.nextSibling);if(I){g=I;break}g=this.checkClobberedElement(g,g.parentNode)}return this.buf.join("")}startElement(h){const g=h.nodeName.toLowerCase();if(!tp.hasOwnProperty(g))return this.sanitizedSomething=!0,!jp.hasOwnProperty(g);this.buf.push("<"),this.buf.push(g);const x=h.attributes;for(let I=0;I<x.length;I++){const R=x.item(I),V=R.name,Y=V.toLowerCase();if(!kh.hasOwnProperty(Y)){this.sanitizedSomething=!0;continue}let Q=R.value;$p[Y]&&(Q=Gp(Q)),this.buf.push(" ",V,'="',ig(Q),'"')}return this.buf.push(">"),!0}endElement(h){const g=h.nodeName.toLowerCase();tp.hasOwnProperty(g)&&!Lh.hasOwnProperty(g)&&(this.buf.push("</"),this.buf.push(g),this.buf.push(">"))}chars(h){this.buf.push(ig(h))}checkClobberedElement(h,g){if(g&&(h.compareDocumentPosition(g)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${h.outerHTML}`);return g}}const tv=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,I_=/([^\#-~ |!])/g;function ig(d){return d.replace(/&/g,"&amp;").replace(tv,function(h){return"&#"+(1024*(h.charCodeAt(0)-55296)+(h.charCodeAt(1)-56320)+65536)+";"}).replace(I_,function(h){return"&#"+h.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Yp;function rg(d,h){let g=null;try{Yp=Yp||function D_(d){const h=new Ky(d);return function Jy(){try{return!!(new window.DOMParser).parseFromString(Kd(""),"text/html")}catch{return!1}}()?new Xy(h):h}(d);let x=h?String(h):"";g=Yp.getInertBodyElement(x);let I=5,R=x;do{if(0===I)throw new Error("Failed to sanitize html because the input is unstable");I--,x=R,R=g.innerHTML,g=Yp.getInertBodyElement(x)}while(x!==R);return Kd((new qp).sanitizeChildren(Zp(g)||g))}finally{if(g){const x=Zp(g)||g;for(;x.firstChild;)x.removeChild(x.firstChild)}}}function Zp(d){return"content"in d&&function og(d){return d.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===d.nodeName}(d)?d.content:null}var xa=(()=>((xa=xa||{})[xa.NONE=0]="NONE",xa[xa.HTML=1]="HTML",xa[xa.STYLE=2]="STYLE",xa[xa.SCRIPT=3]="SCRIPT",xa[xa.URL=4]="URL",xa[xa.RESOURCE_URL=5]="RESOURCE_URL",xa))();function T_(d){const h=np();return h?b_(h.sanitize(xa.HTML,d)||""):Oh(d,"HTML")?b_(Tu(d)):rg(function v_(){return void 0!==Up?Up:typeof document<"u"?document:void 0}(),ce(d))}function Wp(d){const h=np();return h?h.sanitize(xa.URL,d)||"":Oh(d,"URL")?Tu(d):Gp(ce(d))}function Ju(d){const h=np();if(h)return vf(h.sanitize(xa.RESOURCE_URL,d)||"");if(Oh(d,"ResourceURL"))return vf(Tu(d));throw new oe(904,!1)}function sg(d,h,g){return function R_(d,h){return"src"===h&&("embed"===d||"frame"===d||"iframe"===d||"media"===d||"script"===d)||"href"===h&&("base"===d||"link"===d)?Ju:Wp}(h,g)(d)}function np(){const d=_n();return d&&d[12]}const Xp=new wt("ENVIRONMENT_INITIALIZER"),ag=new wt("INJECTOR",-1),lg=new wt("INJECTOR_DEF_TYPES");class ip{get(h,g=hr){if(g===hr){const x=new Error(`NullInjectorError: No provider for ${Ne(h)}!`);throw x.name="NullInjectorError",x}return g}}function O_(d){return{\u0275providers:d}}function Kp(...d){return{\u0275providers:rp(0,d),\u0275fromNgModule:!0}}function rp(d,...h){const g=[],x=new Set;let I;return Rl(h,R=>{const V=R;cg(V,g,[],x)&&(I||(I=[]),I.push(V))}),void 0!==I&&op(I,g),g}function op(d,h){for(let g=0;g<d.length;g++){const{providers:I}=d[g];ug(I,R=>{h.push(R)})}}function cg(d,h,g,x){if(!(d=Te(d)))return!1;let I=null,R=Ri(d);const V=!R&&Xn(d);if(R||V){if(V&&!V.standalone)return!1;I=d}else{const Q=d.ngModule;if(R=Ri(Q),!R)return!1;I=Q}const Y=x.has(I);if(V){if(Y)return!1;if(x.add(I),V.dependencies){const Q="function"==typeof V.dependencies?V.dependencies():V.dependencies;for(const _e of Q)cg(_e,h,g,x)}}else{if(!R)return!1;{if(null!=R.imports&&!Y){let _e;x.add(I);try{Rl(R.imports,He=>{cg(He,h,g,x)&&(_e||(_e=[]),_e.push(He))})}finally{}void 0!==_e&&op(_e,h)}if(!Y){const _e=Ds(I)||(()=>new I);h.push({provide:I,useFactory:_e,deps:Ge},{provide:lg,useValue:I,multi:!0},{provide:Xp,useValue:()=>nr(I),multi:!0})}const Q=R.providers;null==Q||Y||ug(Q,He=>{h.push(He)})}}return I!==d&&void 0!==d.providers}function ug(d,h){for(let g of d)Ct(g)&&(g=g.\u0275providers),Array.isArray(g)?ug(g,h):h(g)}const rv=he({provide:String,useValue:he});function eh(d){return null!==d&&"object"==typeof d&&rv in d}function Td(d){return"function"==typeof d}const Qu=new wt("Set Injector scope."),sp={},L_={};let Qp;function Qc(){return void 0===Qp&&(Qp=new ip),Qp}class eu{}class no extends eu{constructor(h,g,x,I){super(),this.parent=g,this.source=x,this.scopes=I,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Fh(h,V=>this.processProvider(V)),this.records.set(ag,Hr(void 0,this)),I.has("environment")&&this.records.set(eu,Hr(void 0,this));const R=this.records.get(Qu);null!=R&&"string"==typeof R.value&&this.scopes.add(R.value),this.injectorDefTypes=new Set(this.get(lg.multi,Ge,Je.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const h of this._ngOnDestroyHooks)h.ngOnDestroy();for(const h of this._onDestroyHooks)h()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(h){this._onDestroyHooks.push(h)}runInContext(h){this.assertNotDestroyed();const g=Mr(this),x=ln(void 0);try{return h()}finally{Mr(g),ln(x)}}get(h,g=hr,x=Je.Default){this.assertNotDestroyed(),x=Lr(x);const I=Mr(this),R=ln(void 0);try{if(!(x&Je.SkipSelf)){let Y=this.records.get(h);if(void 0===Y){const Q=function tm(d){return"function"==typeof d||"object"==typeof d&&d instanceof wt}(h)&&hn(h);Y=Q&&this.injectableDefInScope(Q)?Hr(Wn(h),sp):null,this.records.set(h,Y)}if(null!=Y)return this.hydrate(h,Y)}return(x&Je.Self?Qc():this.parent).get(h,g=x&Je.Optional&&g===hr?null:g)}catch(V){if("NullInjectorError"===V.name){if((V[Bi]=V[Bi]||[]).unshift(Ne(h)),I)throw V;return function Os(d,h,g,x){const I=d[Bi];throw h[hi]&&I.unshift(h[hi]),d.message=function na(d,h,g,x=null){d=d&&"\n"===d.charAt(0)&&"\u0275"==d.charAt(1)?d.slice(2):d;let I=Ne(h);if(Array.isArray(h))I=h.map(Ne).join(" -> ");else if("object"==typeof h){let R=[];for(let V in h)if(h.hasOwnProperty(V)){let Y=h[V];R.push(V+":"+("string"==typeof Y?JSON.stringify(Y):Ne(Y)))}I=`{${R.join(", ")}}`}return`${g}${x?"("+x+")":""}[${I}]: ${d.replace(Cn,"\n  ")}`}("\n"+d.message,I,g,x),d.ngTokenPath=I,d[Bi]=null,d}(V,h,"R3InjectorError",this.source)}throw V}finally{ln(R),Mr(I)}}resolveInjectorInitializers(){const h=Mr(this),g=ln(void 0);try{const x=this.get(Xp.multi,Ge,Je.Self);for(const I of x)I()}finally{Mr(h),ln(g)}}toString(){const h=[],g=this.records;for(const x of g.keys())h.push(Ne(x));return`R3Injector[${h.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new oe(205,!1)}processProvider(h){let g=Td(h=Te(h))?h:Te(h&&h.provide);const x=function ed(d){return eh(d)?Hr(void 0,d.useValue):Hr(fa(d),sp)}(h);if(Td(h)||!0!==h.multi)this.records.get(g);else{let I=this.records.get(g);I||(I=Hr(void 0,sp,!0),I.factory=()=>fi(I.multi),this.records.set(g,I)),g=h,I.multi.push(h)}this.records.set(g,x)}hydrate(h,g){return g.value===sp&&(g.value=L_,g.value=g.factory()),"object"==typeof g.value&&g.value&&function em(d){return null!==d&&"object"==typeof d&&"function"==typeof d.ngOnDestroy}(g.value)&&this._ngOnDestroyHooks.add(g.value),g.value}injectableDefInScope(h){if(!h.providedIn)return!1;const g=Te(h.providedIn);return"string"==typeof g?"any"===g||this.scopes.has(g):this.injectorDefTypes.has(g)}}function Wn(d){const h=hn(d),g=null!==h?h.factory:Ds(d);if(null!==g)return g;if(d instanceof wt)throw new oe(204,!1);if(d instanceof Function)return function uo(d){const h=d.length;if(h>0)throw Rc(h,"?"),new oe(204,!1);const g=function Fr(d){const h=d&&(d[It]||d[Le]);if(h){const g=function yi(d){if(d.hasOwnProperty("name"))return d.name;const h=(""+d).match(/^function\s*([^\s(]+)/);return null===h?"":h[1]}(d);return console.warn(`DEPRECATED: DI is instantiating a token "${g}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${g}" class.`),h}return null}(d);return null!==g?()=>g.factory(d):()=>new d}(d);throw new oe(204,!1)}function fa(d,h,g){let x;if(Td(d)){const I=Te(d);return Ds(I)||Wn(I)}if(eh(d))x=()=>Te(d.useValue);else if(function dg(d){return!(!d||!d.useFactory)}(d))x=()=>d.useFactory(...fi(d.deps||[]));else if(function Jp(d){return!(!d||!d.useExisting)}(d))x=()=>nr(Te(d.useExisting));else{const I=Te(d&&(d.useClass||d.provide));if(!function td(d){return!!d.deps}(d))return Ds(I)||Wn(I);x=()=>new I(...fi(d.deps))}return x}function Hr(d,h,g=!1){return{factory:d,value:h,multi:g?[]:void 0}}function Fh(d,h){for(const g of d)Array.isArray(g)?Fh(g,h):g&&Ct(g)?Fh(g.\u0275providers,h):h(g)}class nm{}class hg{}class fg{resolveComponentFactory(h){throw function k_(d){const h=Error(`No component factory found for ${Ne(d)}. Did you add it to @NgModule.entryComponents?`);return h.ngComponent=d,h}(h)}}let Nh=(()=>{class d{}return d.NULL=new fg,d})();function So(){return tu(ao(),_n())}function tu(d,h){return new th(Ki(d,h))}let th=(()=>{class d{constructor(g){this.nativeElement=g}}return d.__NG_ELEMENT_ID__=So,d})();function F_(d){return d instanceof th?d.nativeElement:d}class ap{}let nh=(()=>{class d{}return d.__NG_ELEMENT_ID__=()=>function pg(){const d=_n(),g=Is(ao().index,d);return(po(g)?g:d)[11]}(),d})(),rm=(()=>{class d{}return d.\u0275prov=Sn({token:d,providedIn:"root",factory:()=>null}),d})();class xf{constructor(h){this.full=h,this.major=h.split(".")[0],this.minor=h.split(".")[1],this.patch=h.split(".").slice(2).join(".")}}const lp=new xf("15.0.4"),Bh={};function ih(d){return d.ngOriginalError}class zh{constructor(){this._console=console}handleError(h){const g=this._findOriginalError(h);this._console.error("ERROR",h),g&&this._console.error("ORIGINAL ERROR",g)}_findOriginalError(h){let g=h&&ih(h);for(;g&&ih(g);)g=ih(g);return g||null}}function wc(d){return d instanceof Function?d():d}function P(d,h,g){let x=d.length;for(;;){const I=d.indexOf(h,g);if(-1===I)return I;if(0===I||d.charCodeAt(I-1)<=32){const R=h.length;if(I+R===x||d.charCodeAt(I+R)<=32)return I}g=I+1}}const L="ng-template";function B(d,h,g){let x=0;for(;x<d.length;){let I=d[x++];if(g&&"class"===I){if(I=d[x],-1!==P(I.toLowerCase(),h,0))return!0}else if(1===I){for(;x<d.length&&"string"==typeof(I=d[x++]);)if(I.toLowerCase()===h)return!0;return!1}}return!1}function H(d){return 4===d.type&&d.value!==L}function X(d,h,g){return h===(4!==d.type||g?d.value:L)}function ne(d,h,g){let x=4;const I=d.attrs||[],R=function We(d){for(let h=0;h<d.length;h++)if(uu(d[h]))return h;return d.length}(I);let V=!1;for(let Y=0;Y<h.length;Y++){const Q=h[Y];if("number"!=typeof Q){if(!V)if(4&x){if(x=2|1&x,""!==Q&&!X(d,Q,g)||""===Q&&1===h.length){if(ge(x))return!1;V=!0}}else{const _e=8&x?Q:h[++Y];if(8&x&&null!==d.attrs){if(!B(d.attrs,_e,g)){if(ge(x))return!1;V=!0}continue}const yt=Ie(8&x?"class":Q,I,H(d),g);if(-1===yt){if(ge(x))return!1;V=!0;continue}if(""!==_e){let Nt;Nt=yt>R?"":I[yt+1].toLowerCase();const en=8&x?Nt:null;if(en&&-1!==P(en,_e,0)||2&x&&_e!==Nt){if(ge(x))return!1;V=!0}}}}else{if(!V&&!ge(x)&&!ge(Q))return!1;if(V&&ge(Q))continue;V=!1,x=Q|1&x}}return ge(x)||V}function ge(d){return 0==(1&d)}function Ie(d,h,g,x){if(null===h)return-1;let I=0;if(x||!g){let R=!1;for(;I<h.length;){const V=h[I];if(V===d)return I;if(3===V||6===V)R=!0;else{if(1===V||2===V){let Y=h[++I];for(;"string"==typeof Y;)Y=h[++I];continue}if(4===V)break;if(0===V){I+=4;continue}}I+=R?1:2}return-1}return function St(d,h){let g=d.indexOf(4);if(g>-1)for(g++;g<d.length;){const x=d[g];if("number"==typeof x)return-1;if(x===h)return g;g++}return-1}(h,d)}function ze(d,h,g=!1){for(let x=0;x<h.length;x++)if(ne(d,h[x],g))return!0;return!1}function Et(d,h){e:for(let g=0;g<h.length;g++){const x=h[g];if(d.length===x.length){for(let I=0;I<d.length;I++)if(d[I]!==x[I])continue e;return!0}}return!1}function Ht(d,h){return d?":not("+h.trim()+")":h}function nn(d){let h=d[0],g=1,x=2,I="",R=!1;for(;g<d.length;){let V=d[g];if("string"==typeof V)if(2&x){const Y=d[++g];I+="["+V+(Y.length>0?'="'+Y+'"':"")+"]"}else 8&x?I+="."+V:4&x&&(I+=" "+V);else""!==I&&!ge(V)&&(h+=Ht(R,I),I=""),x=V,R=R||!ge(x);g++}return""!==I&&(h+=Ht(R,I)),h}const Zt={};function pn(d){oi(Pr(),_n(),bs()+d,!1)}function oi(d,h,g,x){if(!x)if(3==(3&h[2])){const R=d.preOrderCheckHooks;null!==R&&wo(h,R,g)}else{const R=d.preOrderHooks;null!==R&&jc(h,R,0,g)}io(g)}function Er(d,h=null,g=null,x){const I=ws(d,h,g,x);return I.resolveInjectorInitializers(),I}function ws(d,h=null,g=null,x,I=new Set){const R=[g||Ge,Kp(d)];return x=x||("object"==typeof d?void 0:Ne(d)),new no(R,h||Qc(),x||null,I)}let Do=(()=>{class d{static create(g,x){if(Array.isArray(g))return Er({name:""},x,g,"");{const I=g.name??"";return Er({name:I},g.parent,g.providers,I)}}}return d.THROW_IF_NOT_FOUND=hr,d.NULL=new ip,d.\u0275prov=Sn({token:d,providedIn:"any",factory:()=>nr(ag)}),d.__NG_ELEMENT_ID__=-1,d})();function Ru(d,h=Je.Default){const g=_n();return null===g?nr(d,h):gl(ao(),g,Te(d),h)}function Ou(){throw new Error("invalid")}function Mf(d,h){const g=d.contentQueries;if(null!==g)for(let x=0;x<g.length;x+=2){const I=g[x],R=g[x+1];if(-1!==R){const V=d.data[R];Ua(I),V.contentQueries(2,h[R],R)}}}function If(d,h,g,x,I,R,V,Y,Q,_e,He){const yt=h.blueprint.slice();return yt[0]=I,yt[2]=76|x,(null!==He||d&&1024&d[2])&&(yt[2]|=1024),Ud(yt),yt[3]=yt[15]=d,yt[8]=g,yt[10]=V||d&&d[10],yt[11]=Y||d&&d[11],yt[12]=Q||d&&d[12]||null,yt[9]=_e||d&&d[9]||null,yt[6]=R,yt[20]=function Hm(){return Ga++}(),yt[21]=He,yt[16]=2==h.type?d[16]:yt,yt}function Uh(d,h,g,x,I){let R=d.data[h];if(null===R)R=function gg(d,h,g,x,I){const R=Ic(),V=xd(),Q=d.data[h]=function mp(d,h,g,x,I,R){return{type:g,index:x,insertBeforeIndex:null,injectorIndex:h?h.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:I,attrs:R,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:h,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,V?R:R&&R.parent,g,h,x,I);return null===d.firstChild&&(d.firstChild=Q),null!==R&&(V?null==R.child&&null!==Q.parent&&(R.child=Q):null===R.next&&(R.next=Q)),Q}(d,h,g,x,I),function wh(){return Yn.lFrame.inI18n}()&&(R.flags|=32);else if(64&R.type){R.type=g,R.value=x,R.attrs=I;const V=function Ba(){const d=Yn.lFrame,h=d.currentTNode;return d.isParent?h:h.parent}();R.injectorIndex=null===V?-1:V.injectorIndex}return xo(R,!0),R}function dp(d,h,g,x){if(0===g)return-1;const I=h.length;for(let R=0;R<g;R++)h.push(x),d.blueprint.push(x),d.data.push(null);return I}function oh(d,h,g){el(h);try{const x=d.viewQuery;null!==x&&Af(1,x,g);const I=d.template;null!==I&&lm(d,h,I,1,g),d.firstCreatePass&&(d.firstCreatePass=!1),d.staticContentQueries&&Mf(d,h),d.staticViewQueries&&Af(2,d.viewQuery,g);const R=d.components;null!==R&&function am(d,h){for(let g=0;g<h.length;g++)pb(d,h[g])}(h,R)}catch(x){throw d.firstCreatePass&&(d.incompleteFirstPass=!0,d.firstCreatePass=!1),x}finally{h[2]&=-5,la()}}function hp(d,h,g,x){const I=h[2];if(128!=(128&I)){el(h);try{Ud(h),function Vd(d){return Yn.lFrame.bindingIndex=d}(d.bindingStartIndex),null!==g&&lm(d,h,g,2,x);const V=3==(3&I);if(V){const _e=d.preOrderCheckHooks;null!==_e&&wo(h,_e,null)}else{const _e=d.preOrderHooks;null!==_e&&jc(h,_e,0,null),ba(h,0)}if(function vg(d){for(let h=Fp(d);null!==h;h=uf(h)){if(!h[2])continue;const g=h[9];for(let x=0;x<g.length;x++){const I=g[x],R=I[3];0==(512&I[2])&&Dl(R,1),I[2]|=512}}}(h),function _v(d){for(let h=Fp(d);null!==h;h=uf(h))for(let g=10;g<h.length;g++){const x=h[g],I=x[1];cu(x)&&hp(I,x,I.template,x[8])}}(h),null!==d.contentQueries&&Mf(d,h),V){const _e=d.contentCheckHooks;null!==_e&&wo(h,_e)}else{const _e=d.contentHooks;null!==_e&&jc(h,_e,1),ba(h,1)}!function Df(d,h){const g=d.hostBindingOpCodes;if(null!==g)try{for(let x=0;x<g.length;x++){const I=g[x];if(I<0)io(~I);else{const R=I,V=g[++x],Y=g[++x];$l(V,R),Y(2,h[R])}}}finally{io(-1)}}(d,h);const Y=d.components;null!==Y&&function rh(d,h){for(let g=0;g<h.length;g++)Gh(d,h[g])}(h,Y);const Q=d.viewQuery;if(null!==Q&&Af(2,Q,x),V){const _e=d.viewCheckHooks;null!==_e&&wo(h,_e)}else{const _e=d.viewHooks;null!==_e&&jc(h,_e,2),ba(h,2)}!0===d.firstUpdatePass&&(d.firstUpdatePass=!1),h[2]&=-41,512&h[2]&&(h[2]&=-513,Dl(h[3],-1))}finally{la()}}}function lm(d,h,g,x,I){const R=bs(),V=2&x;try{io(-1),V&&h.length>22&&oi(d,h,22,!1),g(x,I)}finally{io(R)}}function fp(d,h,g){if(ka(h)){const I=h.directiveEnd;for(let R=h.directiveStart;R<I;R++){const V=d.data[R];V.contentQueries&&V.contentQueries(1,g[R],R)}}}function kc(d,h,g){!$u()||(function hv(d,h,g,x){const I=g.directiveStart,R=g.directiveEnd;Nr(g)&&function id(d,h,g){const x=Ki(h,d),I=pp(g),R=d[10],V=um(d,If(d,I,null,g.onPush?32:16,x,h,R,R.createRenderer(x,g),null,null,null));d[h.index]=V}(h,g,d.data[I+g.componentOffset]),d.firstCreatePass||yo(g,h),$a(x,h);const V=g.initialInputs;for(let Y=I;Y<R;Y++){const Q=d.data[Y],_e=D(h,d,Y,g);$a(_e,h),null!==V&&hb(0,Y-I,_e,Q,0,V),so(Q)&&(Is(g.index,h)[8]=D(h,d,Y,g))}}(d,h,g,Ki(g,h)),64==(64&g.flags)&&fv(d,h,g))}function sh(d,h,g=Ki){const x=h.localNames;if(null!==x){let I=h.index+1;for(let R=0;R<x.length;R+=2){const V=x[R+1],Y=-1===V?g(h,d):d[V];d[I++]=Y}}}function pp(d){const h=d.tView;return null===h||h.incompleteFirstPass?d.tView=Nl(1,null,d.template,d.decls,d.vars,d.directiveDefs,d.pipeDefs,d.viewQuery,d.schemas,d.consts):h}function Nl(d,h,g,x,I,R,V,Y,Q,_e){const He=22+x,yt=He+I,Nt=function Fc(d,h){const g=[];for(let x=0;x<h;x++)g.push(x<d?null:Zt);return g}(He,yt),en="function"==typeof _e?_e():_e;return Nt[1]={type:d,blueprint:Nt,template:g,queries:null,viewQuery:Y,declTNode:h,data:Nt.slice().fill(null,He),bindingStartIndex:He,expandoStartIndex:yt,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof R?R():R,pipeRegistry:"function"==typeof V?V():V,firstChild:null,schemas:Q,consts:en,incompleteFirstPass:!1}}function Vh(d,h,g,x){const I=xg(h);null===g?I.push(x):(I.push(g),d.firstCreatePass&&wg(d).push(x,I.length-1))}function Lu(d,h,g,x){for(let I in d)if(d.hasOwnProperty(I)){g=null===g?{}:g;const R=d[I];null===x?_g(g,h,I,R):x.hasOwnProperty(I)&&_g(g,h,x[I],R)}return g}function _g(d,h,g,x){d.hasOwnProperty(g)?d[g].push(h,x):d[g]=[h,x]}function ku(d,h,g,x,I,R,V,Y){const Q=Ki(h,g);let He,_e=h.inputs;!Y&&null!=_e&&(He=_e[x])?(fm(d,g,He,x,I),Nr(h)&&lv(g,h.index)):3&h.type&&(x=function av(d){return"class"===d?"className":"for"===d?"htmlFor":"formaction"===d?"formAction":"innerHtml"===d?"innerHTML":"readonly"===d?"readOnly":"tabindex"===d?"tabIndex":d}(x),I=null!=V?V(I,h.value||"",x):I,R.setProperty(Q,x,I))}function lv(d,h){const g=Is(h,d);16&g[2]||(g[2]|=32)}function cm(d,h,g,x){let I=!1;if($u()){const R=null===x?null:{"":-1},V=function pv(d,h){const g=d.directiveRegistry;let x=null,I=null;if(g)for(let R=0;R<g.length;R++){const V=g[R];if(ze(h,V.selectors,!1))if(x||(x=[]),so(V))if(null!==V.findHostDirectiveDefs){const Y=[];I=I||new Map,V.findHostDirectiveDefs(V,Y,I),x.unshift(...Y,V),mv(d,h,Y.length)}else x.unshift(V),mv(d,h,0);else I=I||new Map,V.findHostDirectiveDefs?.(V,x,I),x.push(V)}return null===x?null:[x,I]}(d,g);let Y,Q;null===V?Y=Q=null:[Y,Q]=V,null!==Y&&(I=!0,uv(d,h,g,Y,R,Q)),R&&function db(d,h,g){if(h){const x=d.localNames=[];for(let I=0;I<h.length;I+=2){const R=g[h[I+1]];if(null==R)throw new oe(-301,!1);x.push(h[I],R)}}}(g,x,R)}return g.mergedAttrs=Gr(g.mergedAttrs,g.attrs),I}function uv(d,h,g,x,I,R){for(let _e=0;_e<x.length;_e++)nl(yo(g,h),d,x[_e].type);!function yg(d,h,g){d.flags|=1,d.directiveStart=h,d.directiveEnd=h+g,d.providerIndexes=h}(g,d.data.length,x.length);for(let _e=0;_e<x.length;_e++){const He=x[_e];He.providersResolver&&He.providersResolver(He)}let V=!1,Y=!1,Q=dp(d,h,x.length,null);for(let _e=0;_e<x.length;_e++){const He=x[_e];g.mergedAttrs=Gr(g.mergedAttrs,He.hostAttrs),U_(d,g,h,Q,He),ah(Q,He,I),null!==He.contentQueries&&(g.flags|=4),(null!==He.hostBindings||null!==He.hostAttrs||0!==He.hostVars)&&(g.flags|=64);const yt=He.type.prototype;!V&&(yt.ngOnChanges||yt.ngOnInit||yt.ngDoCheck)&&((d.preOrderHooks||(d.preOrderHooks=[])).push(g.index),V=!0),!Y&&(yt.ngOnChanges||yt.ngDoCheck)&&((d.preOrderCheckHooks||(d.preOrderCheckHooks=[])).push(g.index),Y=!0),Q++}!function lb(d,h,g){const I=h.directiveEnd,R=d.data,V=h.attrs,Y=[];let Q=null,_e=null;for(let He=h.directiveStart;He<I;He++){const yt=R[He],Nt=g?g.get(yt):null,bn=Nt?Nt.outputs:null;Q=Lu(yt.inputs,He,Q,Nt?Nt.inputs:null),_e=Lu(yt.outputs,He,_e,bn);const jn=null===Q||null===V||H(h)?null:fb(Q,He,V);Y.push(jn)}null!==Q&&(Q.hasOwnProperty("class")&&(h.flags|=8),Q.hasOwnProperty("style")&&(h.flags|=16)),h.initialInputs=Y,h.inputs=Q,h.outputs=_e}(d,g,R)}function fv(d,h,g){const x=g.directiveStart,I=g.directiveEnd,R=g.index,V=function Il(){return Yn.lFrame.currentDirectiveIndex}();try{io(R);for(let Y=x;Y<I;Y++){const Q=d.data[Y],_e=h[Y];_s(Y),(null!==Q.hostBindings||0!==Q.hostVars||null!==Q.hostAttrs)&&ub(Q,_e)}}finally{io(-1),_s(V)}}function ub(d,h){null!==d.hostBindings&&d.hostBindings(1,h)}function mv(d,h,g){h.componentOffset=g,(d.components||(d.components=[])).push(h.index)}function ah(d,h,g){if(g){if(h.exportAs)for(let x=0;x<h.exportAs.length;x++)g[h.exportAs[x]]=d;so(h)&&(g[""]=d)}}function U_(d,h,g,x,I){d.data[x]=I;const R=I.factory||(I.factory=Ds(I.type)),V=new Al(R,so(I),Ru);d.blueprint[x]=V,g[x]=V,function dv(d,h,g,x,I){const R=I.hostBindings;if(R){let V=d.hostBindingOpCodes;null===V&&(V=d.hostBindingOpCodes=[]);const Y=~h.index;(function cb(d){let h=d.length;for(;h>0;){const g=d[--h];if("number"==typeof g&&g<0)return g}return 0})(V)!=Y&&V.push(Y),V.push(g,x,R)}}(d,h,x,dp(d,g,I.hostVars,Zt),I)}function lh(d,h,g,x,I,R){const V=Ki(d,h);!function V_(d,h,g,x,I,R,V){if(null==R)d.removeAttribute(h,I,g);else{const Y=null==V?ce(R):V(R,x||"",I);d.setAttribute(h,I,Y,g)}}(h[11],V,R,d.value,g,x,I)}function hb(d,h,g,x,I,R){const V=R[h];if(null!==V){const Y=x.setInput;for(let Q=0;Q<V.length;){const _e=V[Q++],He=V[Q++],yt=V[Q++];null!==Y?x.setInput(g,yt,_e,He):g[He]=yt}}}function fb(d,h,g){let x=null,I=0;for(;I<g.length;){const R=g[I];if(0!==R)if(5!==R){if("number"==typeof R)break;if(d.hasOwnProperty(R)){null===x&&(x=[]);const V=d[R];for(let Y=0;Y<V.length;Y+=2)if(V[Y]===h){x.push(R,V[Y+1],g[I+1]);break}}I+=2}else I+=2;else I+=4}return x}function gv(d,h,g,x){return[d,!0,!1,h,null,0,x,g,null,null]}function Gh(d,h){const g=Is(h,d);if(cu(g)){const x=g[1];48&g[2]?hp(x,g,x.template,g[8]):g[5]>0&&yv(g)}}function yv(d){for(let x=Fp(d);null!==x;x=uf(x))for(let I=10;I<x.length;I++){const R=x[I];if(cu(R))if(512&R[2]){const V=R[1];hp(V,R,V.template,R[8])}else R[5]>0&&yv(R)}const g=d[1].components;if(null!==g)for(let x=0;x<g.length;x++){const I=Is(g[x],d);cu(I)&&I[5]>0&&yv(I)}}function pb(d,h){const g=Is(h,d),x=g[1];(function mb(d,h){for(let g=h.length;g<d.blueprint.length;g++)h.push(d.blueprint[g])})(x,g),oh(x,g,g[8])}function um(d,h){return d[13]?d[14][4]=h:d[13]=h,d[14]=h,h}function bg(d){for(;d;){d[2]|=32;const h=cf(d);if(Xr(d)&&!h)return d;d=h}return null}function dm(d,h,g,x=!0){const I=h[10];I.begin&&I.begin();try{hp(d,h,d.template,g)}catch(V){throw x&&G_(h,V),V}finally{I.end&&I.end()}}function Af(d,h,g){Ua(0),h(d,g)}function xg(d){return d[7]||(d[7]=[])}function wg(d){return d.cleanup||(d.cleanup=[])}function hm(d,h,g){return(null===d||so(d))&&(g=function Vr(d){for(;Array.isArray(d);){if("object"==typeof d[1])return d;d=d[0]}return null}(g[h.index])),g[11]}function G_(d,h){const g=d[9],x=g?g.get(zh,null):null;x&&x.handleError(h)}function fm(d,h,g,x,I){for(let R=0;R<g.length;){const V=g[R++],Y=g[R++],Q=h[V],_e=d.data[V];null!==_e.setInput?_e.setInput(Q,I,x,Y):Q[Y]=I}}function Nc(d,h,g){const x=mo(h,d);!function Zf(d,h,g){d.setValue(h,g)}(d[11],x,g)}function pm(d,h,g){let x=g?d.styles:null,I=g?d.classes:null,R=0;if(null!==h)for(let V=0;V<h.length;V++){const Y=h[V];"number"==typeof Y?R=Y:1==R?I=xe(I,Y):2==R&&(x=xe(x,Y+": "+h[++V]+";"))}g?d.styles=x:d.stylesWithoutHost=x,g?d.classes=I:d.classesWithoutHost=I}function Eg(d,h,g,x,I=!1){for(;null!==g;){const R=h[g.index];if(null!==R&&x.push(ji(R)),Ea(R))for(let Y=10;Y<R.length;Y++){const Q=R[Y],_e=Q[1].firstChild;null!==_e&&Eg(Q[1],Q,_e,x)}const V=g.type;if(8&V)Eg(d,h,g.child,x);else if(32&V){const Y=qm(g,h);let Q;for(;Q=Y();)x.push(Q)}else if(16&V){const Y=mf(h,g);if(Array.isArray(Y))x.push(...Y);else{const Q=cf(h[16]);Eg(Q[1],Q,Y,x,!0)}}g=I?g.projectionNext:g.next}return x}class mm{constructor(h,g){this._lView=h,this._cdRefInjectingView=g,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const h=this._lView,g=h[1];return Eg(g,h,g.firstChild,[])}get context(){return this._lView[8]}set context(h){this._lView[8]=h}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const h=this._lView[3];if(Ea(h)){const g=h[8],x=g?g.indexOf(this):-1;x>-1&&(Xf(h,x),bc(g,x))}this._attachedToViewContainer=!1}Np(this._lView[1],this._lView)}onDestroy(h){Vh(this._lView[1],this._lView,null,h)}markForCheck(){bg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){dm(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new oe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Ym(d,h){ep(d,h,h[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(h){if(this._attachedToViewContainer)throw new oe(902,!1);this._appRef=h}}class gb extends mm{constructor(h){super(h),this._view=h}detectChanges(){const h=this._view;dm(h[1],h,h[8],!1)}checkNoChanges(){}get context(){return null}}class gp extends Nh{constructor(h){super(),this.ngModule=h}resolveComponentFactory(h){const g=Xn(h);return new Cg(g,this.ngModule)}}function vv(d){const h=[];for(let g in d)d.hasOwnProperty(g)&&h.push({propName:d[g],templateName:g});return h}class B1{constructor(h,g){this.injector=h,this.parentInjector=g}get(h,g,x){x=Lr(x);const I=this.injector.get(h,Bh,x);return I!==Bh||g===Bh?I:this.parentInjector.get(h,g,x)}}class Cg extends hg{constructor(h,g){super(),this.componentDef=h,this.ngModule=g,this.componentType=h.type,this.selector=function Ut(d){return d.map(nn).join(",")}(h.selectors),this.ngContentSelectors=h.ngContentSelectors?h.ngContentSelectors:[],this.isBoundToModule=!!g}get inputs(){return vv(this.componentDef.inputs)}get outputs(){return vv(this.componentDef.outputs)}create(h,g,x,I){let R=(I=I||this.ngModule)instanceof eu?I:I?.injector;R&&null!==this.componentDef.getStandaloneInjector&&(R=this.componentDef.getStandaloneInjector(R)||R);const V=R?new B1(h,R):h,Y=V.get(ap,null);if(null===Y)throw new oe(407,!1);const Q=V.get(rm,null),_e=Y.createRenderer(null,this.componentDef),He=this.componentDef.selectors[0][0]||"div",yt=x?function Tf(d,h,g){return d.selectRootElement(h,g===le.ShadowDom)}(_e,x,this.componentDef.encapsulation):Zu(_e,He,function bv(d){const h=d.toLowerCase();return"svg"===h?"svg":"math"===h?"math":null}(He)),Nt=this.componentDef.onPush?288:272,en=Nl(0,null,null,1,0,null,null,null,null,null),bn=If(null,en,null,Nt,null,null,Y,_e,Q,V,null);let jn,gi;el(bn);try{const Yi=this.componentDef;let Ir,Rn=null;Yi.findHostDirectiveDefs?(Ir=[],Rn=new Map,Yi.findHostDirectiveDefs(Yi,Ir,Rn),Ir.push(Yi)):Ir=[Yi];const Yr=function U1(d,h){const g=d[1];return d[22]=h,Uh(g,22,2,"#host",null)}(bn,yt),Wa=function V1(d,h,g,x,I,R,V,Y){const Q=I[1];!function _b(d,h,g,x){for(const I of d)h.mergedAttrs=Gr(h.mergedAttrs,I.hostAttrs);null!==h.mergedAttrs&&(pm(h,h.mergedAttrs,!0),null!==g&&g_(x,g,h))}(x,d,h,V);const _e=R.createRenderer(h,g),He=If(I,pp(g),null,g.onPush?32:16,I[d.index],d,R,_e,Y||null,null,null);return Q.firstCreatePass&&mv(Q,d,x.length-1),um(I,He),I[d.index]=He}(Yr,yt,Yi,Ir,bn,Y,_e);gi=bo(en,22),yt&&function xv(d,h,g,x){if(x)Sa(d,g,["ng-version",lp.full]);else{const{attrs:I,classes:R}=function Xt(d){const h=[],g=[];let x=1,I=2;for(;x<d.length;){let R=d[x];if("string"==typeof R)2===I?""!==R&&h.push(R,d[++x]):8===I&&g.push(R);else{if(!ge(I))break;I=R}x++}return{attrs:h,classes:g}}(h.selectors[0]);I&&Sa(d,g,I),R&&R.length>0&&m_(d,g,R.join(" "))}}(_e,Yi,yt,x),void 0!==g&&function vb(d,h,g){const x=d.projection=[];for(let I=0;I<h.length;I++){const R=g[I];x.push(null!=R?Array.from(R):null)}}(gi,this.ngContentSelectors,g),jn=function yb(d,h,g,x,I,R){const V=ao(),Y=I[1],Q=Ki(V,I);uv(Y,I,V,g,null,x);for(let He=0;He<g.length;He++)$a(D(I,Y,V.directiveStart+He,V),I);fv(Y,I,V),Q&&$a(Q,I);const _e=D(I,Y,V.directiveStart+V.componentOffset,V);if(d[8]=I[8]=_e,null!==R)for(const He of R)He(_e,h);return fp(Y,V,d),_e}(Wa,Yi,Ir,Rn,bn,[G1]),oh(en,bn,null)}finally{la()}return new z1(this.componentType,jn,tu(gi,bn),bn,gi)}}class z1 extends nm{constructor(h,g,x,I,R){super(),this.location=x,this._rootLView=I,this._tNode=R,this.instance=g,this.hostView=this.changeDetectorRef=new gb(I),this.componentType=h}setInput(h,g){const x=this._tNode.inputs;let I;if(null!==x&&(I=x[h])){const R=this._rootLView;fm(R[1],R,I,h,g),lv(R,this._tNode.index)}}get injector(){return new Z(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(h){this.hostView.onDestroy(h)}}function G1(){const d=ao();Hc(_n()[1],d)}function $_(d){let h=function wv(d){return Object.getPrototypeOf(d.prototype).constructor}(d.type),g=!0;const x=[d];for(;h;){let I;if(so(d))I=h.\u0275cmp||h.\u0275dir;else{if(h.\u0275cmp)throw new oe(903,!1);I=h.\u0275dir}if(I){if(g){x.push(I);const V=d;V.inputs=gm(d.inputs),V.declaredInputs=gm(d.declaredInputs),V.outputs=gm(d.outputs);const Y=I.hostBindings;Y&&Dv(d,Y);const Q=I.viewQuery,_e=I.contentQueries;if(Q&&Cv(d,Q),_e&&Sv(d,_e),Oe(d.inputs,I.inputs),Oe(d.declaredInputs,I.declaredInputs),Oe(d.outputs,I.outputs),so(I)&&I.data.animation){const He=d.data;He.animation=(He.animation||[]).concat(I.data.animation)}}const R=I.features;if(R)for(let V=0;V<R.length;V++){const Y=R[V];Y&&Y.ngInherit&&Y(d),Y===$_&&(g=!1)}}h=Object.getPrototypeOf(h)}!function Ev(d){let h=0,g=null;for(let x=d.length-1;x>=0;x--){const I=d[x];I.hostVars=h+=I.hostVars,I.hostAttrs=Gr(I.hostAttrs,g=Gr(g,I.hostAttrs))}}(x)}function gm(d){return d===Ee?{}:d===Ge?[]:d}function Cv(d,h){const g=d.viewQuery;d.viewQuery=g?(x,I)=>{h(x,I),g(x,I)}:h}function Sv(d,h){const g=d.contentQueries;d.contentQueries=g?(x,I,R)=>{h(x,I,R),g(x,I,R)}:h}function Dv(d,h){const g=d.hostBindings;d.hostBindings=g?(x,I)=>{h(x,I),g(x,I)}:h}let _m=null;function Pf(){if(!_m){const d=jt.Symbol;if(d&&d.iterator)_m=d.iterator;else{const h=Object.getOwnPropertyNames(Map.prototype);for(let g=0;g<h.length;++g){const x=h[g];"entries"!==x&&"size"!==x&&Map.prototype[x]===Map.prototype.entries&&(_m=x)}}}return _m}function Sg(d){return!!Tv(d)&&(Array.isArray(d)||!(d instanceof Map)&&Pf()in d)}function Tv(d){return null!==d&&("function"==typeof d||"object"==typeof d)}function ch(d,h,g){return d[h]=g}function ll(d,h,g){return!Object.is(d[h],g)&&(d[h]=g,!0)}function rd(d,h,g,x){const I=ll(d,h,g);return ll(d,h+1,x)||I}function H_(d,h,g,x){const I=_n();return ll(I,Qa(),h)&&(Pr(),lh(wn(),I,d,h,g,x)),H_}function yp(d,h,g,x){return ll(d,Qa(),g)?h+ce(g)+x:Zt}function vp(d,h,g,x,I,R){const Y=rd(d,Qo(),g,I);return za(2),Y?h+ce(g)+x+ce(I)+R:Zt}function ae(d,h,g,x,I,R,V,Y){const _e=function Fu(d,h,g,x,I){const R=rd(d,h,g,x);return ll(d,h+2,I)||R}(d,Qo(),g,I,V);return za(3),_e?h+ce(g)+x+ce(I)+R+ce(V)+Y:Zt}function qs(d,h,g,x,I,R,V,Y){const Q=_n(),_e=Pr(),He=d+22,yt=_e.firstCreatePass?function Es(d,h,g,x,I,R,V,Y,Q){const _e=h.consts,He=Uh(h,d,4,V||null,Ja(_e,Y));cm(h,g,He,Ja(_e,Q)),Hc(h,He);const yt=He.tViews=Nl(2,He,x,I,R,h.directiveRegistry,h.pipeRegistry,null,h.schemas,_e);return null!==h.queries&&(h.queries.template(h,He),yt.queries=h.queries.embeddedTView(He)),He}(He,_e,Q,h,g,x,I,R,V):_e.data[He];xo(yt,!1);const Nt=Q[11].createComment("");Jf(_e,Q,Nt,yt),$a(Nt,Q),um(Q,Q[He]=gv(Nt,Q,Nt,yt)),fc(yt)&&kc(_e,Q,yt),null!=V&&sh(Q,yt,Y)}function sd(d){return vi(function Xs(){return Yn.lFrame.contextLView}(),22+d)}function ad(d,h,g){const x=_n();return ll(x,Qa(),h)&&ku(Pr(),wn(),x,d,h,x[11],g,!1),ad}function _a(d,h,g,x,I){const V=I?"class":"style";fm(d,g,h.inputs[V],V,x)}function ld(d,h,g,x){const I=_n(),R=Pr(),V=22+d,Y=I[11],Q=I[V]=Zu(Y,h,function Un(){return Yn.lFrame.currentNamespace}()),_e=R.firstCreatePass?function Pd(d,h,g,x,I,R,V){const Y=h.consts,_e=Uh(h,d,2,I,Ja(Y,R));return cm(h,g,_e,Ja(Y,V)),null!==_e.attrs&&pm(_e,_e.attrs,!1),null!==_e.mergedAttrs&&pm(_e,_e.mergedAttrs,!0),null!==h.queries&&h.queries.elementStart(h,_e),_e}(V,R,I,0,h,g,x):R.data[V];return xo(_e,!0),g_(Y,Q,_e),32!=(32&_e.flags)&&Jf(R,I,Q,_e),0===function Ml(){return Yn.lFrame.elementDepthCount}()&&$a(Q,I),function Fa(){Yn.lFrame.elementDepthCount++}(),fc(_e)&&(kc(R,I,_e),fp(R,_e,I)),null!==x&&sh(I,_e),ld}function yu(){let d=ao();xd()?nc():(d=d.parent,xo(d,!1));const h=d;!function Gs(){Yn.lFrame.elementDepthCount--}();const g=Pr();return g.firstCreatePass&&(Hc(g,d),ka(d)&&g.queries.elementEnd(d)),null!=h.classesWithoutHost&&function ro(d){return 0!=(8&d.flags)}(h)&&_a(g,h,_n(),h.classesWithoutHost,!0),null!=h.stylesWithoutHost&&function wd(d){return 0!=(16&d.flags)}(h)&&_a(g,h,_n(),h.stylesWithoutHost,!1),yu}function fn(d,h,g,x){return ld(d,h,g,x),yu(),fn}function Gi(d,h,g){const x=_n(),I=Pr(),R=d+22,V=I.firstCreatePass?function Kn(d,h,g,x,I){const R=h.consts,V=Ja(R,x),Y=Uh(h,d,8,"ng-container",V);return null!==V&&pm(Y,V,!0),cm(h,g,Y,Ja(R,I)),null!==h.queries&&h.queries.elementStart(h,Y),Y}(R,I,x,h,g):I.data[R];xo(V,!0);const Y=x[R]=x[11].createComment("");return Jf(I,x,Y,V),$a(Y,x),fc(V)&&(kc(I,x,V),fp(I,V,x)),null!=g&&sh(x,V),Gi}function xr(){let d=ao();const h=Pr();return xd()?nc():(d=d.parent,xo(d,!1)),h.firstCreatePass&&(Hc(h,d),ka(d)&&h.queries.elementEnd(d)),xr}function Ur(){return _n()}function ho(d){return!!d&&"function"==typeof d.then}function ya(d){return!!d&&"function"==typeof d.subscribe}const Za=ya;function Ar(d,h,g,x){const I=_n(),R=Pr(),V=ao();return Fs(R,I,I[11],V,d,h,x),Ar}function cl(d,h){const g=ao(),x=_n(),I=Pr();return Fs(I,x,hm(rc(I.data),g,x),g,d,h),cl}function Fs(d,h,g,x,I,R,V){const Y=fc(x),_e=d.firstCreatePass&&wg(d),He=h[8],yt=xg(h);let Nt=!0;if(3&x.type||V){const jn=Ki(x,h),gi=V?V(jn):jn,Yi=yt.length,Ir=V?Yr=>V(ji(Yr[x.index])):x.index;let Rn=null;if(!V&&Y&&(Rn=function vl(d,h,g,x){const I=d.cleanup;if(null!=I)for(let R=0;R<I.length-1;R+=2){const V=I[R];if(V===g&&I[R+1]===x){const Y=h[7],Q=I[R+2];return Y.length>Q?Y[Q]:null}"string"==typeof V&&(R+=2)}return null}(d,h,I,x.index)),null!==Rn)(Rn.__ngLastListenerFn__||Rn).__ngNextListenerFn__=R,Rn.__ngLastListenerFn__=R,Nt=!1;else{R=bp(x,h,He,R,!1);const Yr=g.listen(gi,I,R);yt.push(R,Yr),_e&&_e.push(I,Ir,Yi,Yi+1)}}else R=bp(x,h,He,R,!1);const en=x.outputs;let bn;if(Nt&&null!==en&&(bn=en[I])){const jn=bn.length;if(jn)for(let gi=0;gi<jn;gi+=2){const Wa=h[bn[gi]][bn[gi+1]].subscribe(R),Ul=yt.length;yt.push(R,Wa),_e&&_e.push(I,x.index,Ul,-(Ul+1))}}}function cd(d,h,g,x){try{return!1!==g(x)}catch(I){return G_(d,I),!1}}function bp(d,h,g,x,I){return function R(V){if(V===Function)return x;bg(d.componentOffset>-1?Is(d.index,h):h);let Q=cd(h,0,x,V),_e=R.__ngNextListenerFn__;for(;_e;)Q=cd(h,0,_e,V)&&Q,_e=_e.__ngNextListenerFn__;return I&&!1===Q&&(V.preventDefault(),V.returnValue=!1),Q}}function ud(d=1){return function Eh(d){return(Yn.lFrame.contextLView=function Hl(d,h){for(;d>0;)h=h[15],d--;return h}(d,Yn.lFrame.contextLView))[8]}(d)}function uh(d,h){let g=null;const x=function Ze(d){const h=d.attrs;if(null!=h){const g=h.indexOf(5);if(0==(1&g))return h[g+1]}return null}(d);for(let I=0;I<h.length;I++){const R=h[I];if("*"!==R){if(null===x?ze(d,R,!0):Et(x,R))return I}else g=I}return g}function Of(d){const h=_n()[16][6];if(!h.projection){const x=h.projection=Rc(d?d.length:1,null),I=x.slice();let R=h.child;for(;null!==R;){const V=d?uh(R,d):0;null!==V&&(I[V]?I[V].projectionNext=R:x[V]=R,I[V]=R),R=R.next}}}function $h(d,h=0,g){const x=_n(),I=Pr(),R=Uh(I,22+d,16,null,g||null);null===R.projection&&(R.projection=h),nc(),32!=(32&R.flags)&&function Hy(d,h,g){_f(h[11],0,h,g,u_(d,g,h),h_(g.parent||h[6],g,h))}(I,x,R)}function dh(d,h,g){return j_(d,"",h,"",g),dh}function j_(d,h,g,x,I){const R=_n(),V=yp(R,h,g,x);return V!==Zt&&ku(Pr(),wn(),R,d,V,R[11],I,!1),j_}function q_(d,h,g,x,I,R,V){const Y=_n(),Q=vp(Y,h,g,x,I,R);return Q!==Zt&&ku(Pr(),wn(),Y,d,Q,Y[11],V,!1),q_}function Sb(d,h){return d<<17|h<<2}function xp(d){return d>>17&32767}function Db(d){return 2|d}function ym(d){return(131068&d)>>2}function Y_(d,h){return-131069&d|h<<2}function Mg(d){return 1|d}function Pv(d,h,g,x,I){const R=d[g+1],V=null===h;let Y=x?xp(R):ym(R),Q=!1;for(;0!==Y&&(!1===Q||V);){const He=d[Y+1];SS(d[Y],h)&&(Q=!0,d[Y+1]=x?Mg(He):Db(He)),Y=x?xp(He):ym(He)}Q&&(d[g+1]=x?Db(R):Mg(R))}function SS(d,h){return null===d||null==h||(Array.isArray(d)?d[1]:d)===h||!(!Array.isArray(d)||"string"!=typeof h)&&Jr(d,h)>=0}const bl={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Ib(d){return d.substring(bl.key,bl.keyEnd)}function Rv(d,h){const g=bl.textEnd;return g===h?-1:(h=bl.keyEnd=function Ig(d,h,g){for(;h<g&&d.charCodeAt(h)>32;)h++;return h}(d,bl.key=h,g),X_(d,h,g))}function X_(d,h,g){for(;h<g&&d.charCodeAt(h)<=32;)h++;return h}function Ab(d,h,g){return fh(d,h,g,!1),Ab}function ey(d,h){return fh(d,h,null,!0),ey}function J1(d){Rd(Ei,hh,d,!0)}function hh(d,h){for(let g=function X1(d){return function K1(d){bl.key=0,bl.keyEnd=0,bl.value=0,bl.valueEnd=0,bl.textEnd=d.length}(d),Rv(d,X_(d,0,bl.textEnd))}(h);g>=0;g=Rv(h,g))Ei(d,Ib(h),!0)}function fh(d,h,g,x){const I=_n(),R=Pr(),V=za(2);R.firstUpdatePass&&IS(R,d,V,x),h!==Zt&&ll(I,V,h)&&PS(R,R.data[bs()],I,I[11],d,I[V+1]=function iy(d,h){return null==d||("string"==typeof h?d+=h:"object"==typeof d&&(d=Ne(Tu(d)))),d}(h,g),x,V)}function Rd(d,h,g,x){const I=Pr(),R=za(2);I.firstUpdatePass&&IS(I,null,R,x);const V=_n();if(g!==Zt&&ll(V,R,g)){const Y=I.data[bs()];if(Rb(Y,x)&&!Q1(I,R)){let Q=x?Y.classesWithoutHost:Y.stylesWithoutHost;null!==Q&&(g=xe(Q,g||"")),_a(I,Y,V,g,x)}else!function AS(d,h,g,x,I,R,V,Y){I===Zt&&(I=Ge);let Q=0,_e=0,He=0<I.length?I[0]:null,yt=0<R.length?R[0]:null;for(;null!==He||null!==yt;){const Nt=Q<I.length?I[Q+1]:void 0,en=_e<R.length?R[_e+1]:void 0;let jn,bn=null;He===yt?(Q+=2,_e+=2,Nt!==en&&(bn=yt,jn=en)):null===yt||null!==He&&He<yt?(Q+=2,bn=He):(_e+=2,bn=yt,jn=en),null!==bn&&PS(d,h,g,x,bn,jn,V,Y),He=Q<I.length?I[Q]:null,yt=_e<R.length?R[_e]:null}}(I,Y,V,V[11],V[R+1],V[R+1]=function ew(d,h,g){if(null==g||""===g)return Ge;const x=[],I=Tu(g);if(Array.isArray(I))for(let R=0;R<I.length;R++)d(x,I[R],!0);else if("object"==typeof I)for(const R in I)I.hasOwnProperty(R)&&d(x,R,I[R]);else"string"==typeof I&&h(x,I);return x}(d,h,g),x,R)}}function Q1(d,h){return h>=d.expandoStartIndex}function IS(d,h,g,x){const I=d.data;if(null===I[g+1]){const R=I[bs()],V=Q1(d,g);Rb(R,x)&&null===h&&!V&&(h=!1),h=function TS(d,h,g,x){const I=rc(d);let R=x?h.residualClasses:h.residualStyles;if(null===I)0===(x?h.classBindings:h.styleBindings)&&(g=ny(g=ty(null,d,h,g,x),h.attrs,x),R=null);else{const V=h.directiveStylingLast;if(-1===V||d[V]!==I)if(g=ty(I,d,h,g,x),null===R){let Q=function Pb(d,h,g){const x=g?h.classBindings:h.styleBindings;if(0!==ym(x))return d[xp(x)]}(d,h,x);void 0!==Q&&Array.isArray(Q)&&(Q=ty(null,d,h,Q[1],x),Q=ny(Q,h.attrs,x),function bA(d,h,g,x){d[xp(g?h.classBindings:h.styleBindings)]=x}(d,h,x,Q))}else R=function xA(d,h,g){let x;const I=h.directiveEnd;for(let R=1+h.directiveStylingLast;R<I;R++)x=ny(x,d[R].hostAttrs,g);return ny(x,h.attrs,g)}(d,h,x)}return void 0!==R&&(x?h.residualClasses=R:h.residualStyles=R),g}(I,R,h,x),function Mb(d,h,g,x,I,R){let V=R?h.classBindings:h.styleBindings,Y=xp(V),Q=ym(V);d[x]=g;let He,_e=!1;if(Array.isArray(g)){const yt=g;He=yt[1],(null===He||Jr(yt,He)>0)&&(_e=!0)}else He=g;if(I)if(0!==Q){const Nt=xp(d[Y+1]);d[x+1]=Sb(Nt,Y),0!==Nt&&(d[Nt+1]=Y_(d[Nt+1],x)),d[Y+1]=function ES(d,h){return 131071&d|h<<17}(d[Y+1],x)}else d[x+1]=Sb(Y,0),0!==Y&&(d[Y+1]=Y_(d[Y+1],x)),Y=x;else d[x+1]=Sb(Q,0),0===Y?Y=x:d[Q+1]=Y_(d[Q+1],x),Q=x;_e&&(d[x+1]=Db(d[x+1])),Pv(d,He,x,!0),Pv(d,He,x,!1),function CS(d,h,g,x,I){const R=I?d.residualClasses:d.residualStyles;null!=R&&"string"==typeof h&&Jr(R,h)>=0&&(g[x+1]=Mg(g[x+1]))}(h,He,d,x,R),V=Sb(Y,Q),R?h.classBindings=V:h.styleBindings=V}(I,R,h,g,V,x)}}function ty(d,h,g,x,I){let R=null;const V=g.directiveEnd;let Y=g.directiveStylingLast;for(-1===Y?Y=g.directiveStart:Y++;Y<V&&(R=h[Y],x=ny(x,R.hostAttrs,I),R!==d);)Y++;return null!==d&&(g.directiveStylingLast=Y),x}function ny(d,h,g){const x=g?1:2;let I=-1;if(null!==h)for(let R=0;R<h.length;R++){const V=h[R];"number"==typeof V?I=V:I===x&&(Array.isArray(d)||(d=void 0===d?[]:["",d]),Ei(d,V,!!g||h[++R]))}return void 0===d?null:d}function PS(d,h,g,x,I,R,V,Y){if(!(3&h.type))return;const Q=d.data,_e=Q[Y+1],He=function Z_(d){return 1==(1&d)}(_e)?tw(Q,h,g,I,ym(_e),V):void 0;wp(He)||(wp(R)||function Z1(d){return 2==(2&d)}(_e)&&(R=tw(Q,null,g,I,Y,V)),function p_(d,h,g,x,I){if(h)I?d.addClass(g,x):d.removeClass(g,x);else{let R=-1===x.indexOf("-")?void 0:gu.DashCase;null==I?d.removeStyle(g,x,R):("string"==typeof I&&I.endsWith("!important")&&(I=I.slice(0,-10),R|=gu.Important),d.setStyle(g,x,I,R))}}(x,V,mo(bs(),g),I,R))}function tw(d,h,g,x,I,R){const V=null===h;let Y;for(;I>0;){const Q=d[I],_e=Array.isArray(Q),He=_e?Q[1]:Q,yt=null===He;let Nt=g[I+1];Nt===Zt&&(Nt=yt?Ge:void 0);let en=yt?Fi(Nt,x):He===x?Nt:void 0;if(_e&&!wp(en)&&(en=Fi(Q,x)),wp(en)&&(Y=en,V))return Y;const bn=d[I+1];I=V?xp(bn):ym(bn)}if(null!==h){let Q=R?h.residualClasses:h.residualStyles;null!=Q&&(Y=Fi(Q,x))}return Y}function wp(d){return void 0!==d}function Rb(d,h){return 0!=(d.flags&(h?8:16))}function Ob(d,h=""){const g=_n(),x=Pr(),I=d+22,R=x.firstCreatePass?Uh(x,I,1,h,null):x.data[I],V=g[I]=function Yu(d,h){return d.createText(h)}(g[11],h);Jf(x,g,V,R),xo(R,!1)}function kv(d){return Lb("",d,""),kv}function Lb(d,h,g){const x=_n(),I=yp(x,d,h,g);return I!==Zt&&Nc(x,bs(),I),Lb}function kb(d,h,g,x,I){const R=_n(),V=vp(R,d,h,g,x,I);return V!==Zt&&Nc(R,bs(),V),kb}function Fv(d,h,g,x,I,R,V){const Y=_n(),Q=ae(Y,d,h,g,x,I,R,V);return Q!==Zt&&Nc(Y,bs(),Q),Fv}function iw(d,h,g){Rd(Ei,hh,yp(_n(),d,h,g),!0)}function Vb(d,h,g){const x=_n();return ll(x,Qa(),h)&&ku(Pr(),wn(),x,d,h,x[11],g,!0),Vb}function oy(d,h,g){const x=_n();if(ll(x,Qa(),h)){const R=Pr(),V=wn();ku(R,V,x,d,h,hm(rc(R.data),V,x),g,!0)}return oy}const vm=void 0;var fw=["en",[["a","p"],["AM","PM"],vm],[["AM","PM"],vm,vm],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],vm,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],vm,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",vm,"{1} 'at' {0}",vm],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function $S(d){const g=Math.floor(Math.abs(d)),x=d.toString().replace(/^[^.]*\.?/,"").length;return 1===g&&0===x?1:5}];let Ag={};function sy(d){const h=function Uv(d){return d.toLowerCase().replace(/_/g,"-")}(d);let g=$b(h);if(g)return g;const x=h.split("-")[0];if(g=$b(x),g)return g;if("en"===x)return fw;throw new oe(701,!1)}function Gb(d){return sy(d)[Sr.PluralCase]}function $b(d){return d in Ag||(Ag[d]=jt.ng&&jt.ng.common&&jt.ng.common.locales&&jt.ng.common.locales[d]),Ag[d]}var Sr=(()=>((Sr=Sr||{})[Sr.LocaleId=0]="LocaleId",Sr[Sr.DayPeriodsFormat=1]="DayPeriodsFormat",Sr[Sr.DayPeriodsStandalone=2]="DayPeriodsStandalone",Sr[Sr.DaysFormat=3]="DaysFormat",Sr[Sr.DaysStandalone=4]="DaysStandalone",Sr[Sr.MonthsFormat=5]="MonthsFormat",Sr[Sr.MonthsStandalone=6]="MonthsStandalone",Sr[Sr.Eras=7]="Eras",Sr[Sr.FirstDayOfWeek=8]="FirstDayOfWeek",Sr[Sr.WeekendRange=9]="WeekendRange",Sr[Sr.DateFormat=10]="DateFormat",Sr[Sr.TimeFormat=11]="TimeFormat",Sr[Sr.DateTimeFormat=12]="DateTimeFormat",Sr[Sr.NumberSymbols=13]="NumberSymbols",Sr[Sr.NumberFormats=14]="NumberFormats",Sr[Sr.CurrencyCode=15]="CurrencyCode",Sr[Sr.CurrencySymbol=16]="CurrencySymbol",Sr[Sr.CurrencyName=17]="CurrencyName",Sr[Sr.Currencies=18]="Currencies",Sr[Sr.Directionality=19]="Directionality",Sr[Sr.PluralCase=20]="PluralCase",Sr[Sr.ExtraData=21]="ExtraData",Sr))();const Rg="en-US";let pw=Rg;function ex(d,h,g,x,I){if(d=Te(d),Array.isArray(d))for(let R=0;R<d.length;R++)ex(d[R],h,g,x,I);else{const R=Pr(),V=_n();let Y=Td(d)?d:Te(d.provide),Q=fa(d);const _e=ao(),He=1048575&_e.providerIndexes,yt=_e.directiveStart,Nt=_e.providerIndexes>>20;if(Td(d)||!d.multi){const en=new Al(Q,I,Ru),bn=tx(Y,h,I?He:He+Nt,yt);-1===bn?(nl(yo(_e,V),R,Y),Wv(R,d,h.length),h.push(Y),_e.directiveStart++,_e.directiveEnd++,I&&(_e.providerIndexes+=1048576),g.push(en),V.push(en)):(g[bn]=en,V[bn]=en)}else{const en=tx(Y,h,He+Nt,yt),bn=tx(Y,h,He,He+Nt),jn=en>=0&&g[en],gi=bn>=0&&g[bn];if(I&&!gi||!I&&!jn){nl(yo(_e,V),R,Y);const Yi=function YA(d,h,g,x,I){const R=new Al(d,g,Ru);return R.multi=[],R.index=h,R.componentProviders=0,Aw(R,I,x&&!g),R}(I?qA:fD,g.length,I,x,Q);!I&&gi&&(g[bn].providerFactory=Yi),Wv(R,d,h.length,0),h.push(Y),_e.directiveStart++,_e.directiveEnd++,I&&(_e.providerIndexes+=1048576),g.push(Yi),V.push(Yi)}else Wv(R,d,en>-1?en:bn,Aw(g[I?bn:en],Q,!I&&x));!I&&x&&gi&&g[bn].componentProviders++}}}function Wv(d,h,g,x){const I=Td(h),R=function ov(d){return!!d.useClass}(h);if(I||R){const Q=(R?Te(h.useClass):h).prototype.ngOnDestroy;if(Q){const _e=d.destroyHooks||(d.destroyHooks=[]);if(!I&&h.multi){const He=_e.indexOf(g);-1===He?_e.push(g,[x,Q]):_e[He+1].push(x,Q)}else _e.push(g,Q)}}}function Aw(d,h,g){return g&&d.componentProviders++,d.multi.push(h)-1}function tx(d,h,g,x){for(let I=g;I<x;I++)if(h[I]===d)return I;return-1}function fD(d,h,g,x){return Pw(this.multi,[])}function qA(d,h,g,x){const I=this.multi;let R;if(this.providerFactory){const V=this.providerFactory.componentProviders,Y=D(g,g[1],this.providerFactory.index,x);R=Y.slice(0,V),Pw(I,R);for(let Q=V;Q<Y.length;Q++)R.push(Y[Q])}else R=[],Pw(I,R);return R}function Pw(d,h){for(let g=0;g<d.length;g++)h.push((0,d[g])());return h}function pD(d,h=[]){return g=>{g.providersResolver=(x,I)=>function hD(d,h,g){const x=Pr();if(x.firstCreatePass){const I=so(d);ex(g,x.data,x.blueprint,I,!0),ex(h,x.data,x.blueprint,I,!1)}}(x,I?I(d):d,h)}}class cy{}class mD{}function ZA(d,h){return new gD(d,h??null)}class gD extends cy{constructor(h,g){super(),this._parent=g,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new gp(this);const x=yr(h);this._bootstrapComponents=wc(x.bootstrap),this._r3Injector=ws(h,g,[{provide:cy,useValue:this},{provide:Nh,useValue:this.componentFactoryResolver}],Ne(h),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(h)}get injector(){return this._r3Injector}destroy(){const h=this._r3Injector;!h.destroyed&&h.destroy(),this.destroyCbs.forEach(g=>g()),this.destroyCbs=null}onDestroy(h){this.destroyCbs.push(h)}}class Rw extends mD{constructor(h){super(),this.moduleType=h}create(h){return new gD(this.moduleType,h)}}class _D extends cy{constructor(h,g,x){super(),this.componentFactoryResolver=new gp(this),this.instance=null;const I=new no([...h,{provide:cy,useValue:this},{provide:Nh,useValue:this.componentFactoryResolver}],g||Qc(),x,new Set(["environment"]));this.injector=I,I.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(h){this.injector.onDestroy(h)}}function nx(d,h,g=null){return new _D(d,h,g).injector}let yD=(()=>{class d{constructor(g){this._injector=g,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(g){if(!g.standalone)return null;if(!this.cachedInjectors.has(g.id)){const x=rp(0,g.type),I=x.length>0?nx([x],this._injector,`Standalone[${g.type.name}]`):null;this.cachedInjectors.set(g.id,I)}return this.cachedInjectors.get(g.id)}ngOnDestroy(){try{for(const g of this.cachedInjectors.values())null!==g&&g.destroy()}finally{this.cachedInjectors.clear()}}}return d.\u0275prov=Sn({token:d,providedIn:"environment",factory:()=>new d(nr(eu))}),d})();function Ow(d){d.getStandaloneInjector=h=>h.get(yD).getOrCreateStandaloneInjector(d)}function kw(d,h,g){const x=gs()+d,I=_n();return I[x]===Zt?ch(I,x,g?h.call(g):h()):function Dg(d,h){return d[h]}(I,x)}function uy(d,h){const g=d[h];return g===Zt?void 0:g}function Gw(d,h){const g=Pr();let x;const I=d+22;g.firstCreatePass?(x=function FD(d,h){if(h)for(let g=h.length-1;g>=0;g--){const x=h[g];if(d===x.name)return x}}(h,g.pipeRegistry),g.data[I]=x,x.onDestroy&&(g.destroyHooks||(g.destroyHooks=[])).push(I,x.onDestroy)):x=g.data[I];const R=x.factory||(x.factory=Ds(x.type)),V=ln(Ru);try{const Y=lo(!1),Q=R();return lo(Y),function od(d,h,g,x){g>=d.data.length&&(d.data[g]=null,d.blueprint[g]=null),h[g]=x}(g,_n(),I,Q),Q}finally{ln(V)}}function $w(d,h,g){const x=d+22,I=_n(),R=vi(I,x);return Xv(I,x)?function Nw(d,h,g,x,I,R){const V=h+g;return ll(d,V,I)?ch(d,V+1,R?x.call(R,I):x(I)):uy(d,V+1)}(I,gs(),h,R.transform,g,R):R.transform(g)}function ND(d,h,g,x){const I=d+22,R=_n(),V=vi(R,I);return Xv(R,I)?function Bw(d,h,g,x,I,R,V){const Y=h+g;return rd(d,Y,I,R)?ch(d,Y+2,V?x.call(V,I,R):x(I,R)):uy(d,Y+2)}(R,gs(),h,V.transform,g,x,V):V.transform(g,x)}function Xv(d,h){return d[1].data[h].pure}function dy(d){return h=>{setTimeout(d,void 0,h)}}const vu=class iP extends o.x{constructor(h=!1){super(),this.__isAsync=h}emit(h){super.next(h)}subscribe(h,g,x){let I=h,R=g||(()=>null),V=x;if(h&&"object"==typeof h){const Q=h;I=Q.next?.bind(Q),R=Q.error?.bind(Q),V=Q.complete?.bind(Q)}this.__isAsync&&(R=dy(R),I&&(I=dy(I)),V&&(V=dy(V)));const Y=super.subscribe({next:I,error:R,complete:V});return h instanceof me.w0&&h.add(Y),Y}};function hy(){return this._results[Pf()]()}class Kv{constructor(h=!1){this._emitDistinctChangesOnly=h,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const g=Pf(),x=Kv.prototype;x[g]||(x[g]=hy)}get changes(){return this._changes||(this._changes=new vu)}get(h){return this._results[h]}map(h){return this._results.map(h)}filter(h){return this._results.filter(h)}find(h){return this._results.find(h)}reduce(h,g){return this._results.reduce(h,g)}forEach(h){this._results.forEach(h)}some(h){return this._results.some(h)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(h,g){const x=this;x.dirty=!1;const I=function fs(d){return d.flat(Number.POSITIVE_INFINITY)}(h);(this._changesDetected=!function us(d,h,g){if(d.length!==h.length)return!1;for(let x=0;x<d.length;x++){let I=d[x],R=h[x];if(g&&(I=g(I),R=g(R)),R!==I)return!1}return!0}(x._results,I,g))&&(x._results=I,x.length=I.length,x.last=I[this.length-1],x.first=I[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ep=(()=>{class d{}return d.__NG_ELEMENT_ID__=oP,d})();const rP=Ep,BD=class extends rP{constructor(h,g,x){super(),this._declarationLView=h,this._declarationTContainer=g,this.elementRef=x}createEmbeddedView(h,g){const x=this._declarationTContainer.tViews,I=If(this._declarationLView,x,h,16,null,x.declTNode,null,null,null,null,g||null);I[17]=this._declarationLView[this._declarationTContainer.index];const V=this._declarationLView[19];return null!==V&&(I[19]=V.createEmbeddedView(x)),oh(x,I,h),new mm(I)}};function oP(){return ix(ao(),_n())}function ix(d,h){return 4&d.type?new BD(h,d,tu(d,h)):null}let rx=(()=>{class d{}return d.__NG_ELEMENT_ID__=zg,d})();function zg(){return ox(ao(),_n())}const sP=rx,xm=class extends sP{constructor(h,g,x){super(),this._lContainer=h,this._hostTNode=g,this._hostLView=x}get element(){return tu(this._hostTNode,this._hostLView)}get injector(){return new Z(this._hostTNode,this._hostLView)}get parentInjector(){const h=Du(this._hostTNode,this._hostLView);if(Ls(h)){const g=Ac(h,this._hostLView),x=Tc(h);return new Z(g[1].data[x+8],g)}return new Z(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(h){const g=zD(this._lContainer);return null!==g&&g[h]||null}get length(){return this._lContainer.length-10}createEmbeddedView(h,g,x){let I,R;"number"==typeof x?I=x:null!=x&&(I=x.index,R=x.injector);const V=h.createEmbeddedView(g||{},R);return this.insert(V,I),V}createComponent(h,g,x,I,R){const V=h&&!function $r(d){return"function"==typeof d}(h);let Y;if(V)Y=g;else{const yt=g||{};Y=yt.index,x=yt.injector,I=yt.projectableNodes,R=yt.environmentInjector||yt.ngModuleRef}const Q=V?h:new Cg(Xn(h)),_e=x||this.parentInjector;if(!R&&null==Q.ngModule){const Nt=(V?_e:this.parentInjector).get(eu,null);Nt&&(R=Nt)}const He=Q.create(_e,I,void 0,R);return this.insert(He.hostView,Y),He}insert(h,g){const x=h._lView,I=x[1];if(function Ca(d){return Ea(d[3])}(x)){const He=this.indexOf(h);if(-1!==He)this.detach(He);else{const yt=x[3],Nt=new xm(yt,yt[6],yt[3]);Nt.detach(Nt.indexOf(h))}}const R=this._adjustIndex(g),V=this._lContainer;!function l_(d,h,g,x){const I=10+x,R=g.length;x>0&&(g[I-1][4]=h),x<R-10?(h[4]=g[I],Pc(g,10+x,h)):(g.push(h),h[4]=null),h[3]=g;const V=h[17];null!==V&&g!==V&&function Zm(d,h){const g=d[9];h[16]!==h[3][3][16]&&(d[2]=!0),null===g?d[9]=[h]:g.push(h)}(V,h);const Y=h[19];null!==Y&&Y.insertView(d),h[2]|=64}(I,x,V,R);const Y=Xu(R,V),Q=x[11],_e=Kf(Q,V[7]);return null!==_e&&function a_(d,h,g,x,I,R){x[0]=I,x[6]=h,ep(d,x,g,1,I,R)}(I,V[6],Q,x,_e,Y),h.attachToViewContainerRef(),Pc(Jv(V),R,h),h}move(h,g){return this.insert(h,g)}indexOf(h){const g=zD(this._lContainer);return null!==g?g.indexOf(h):-1}remove(h){const g=this._adjustIndex(h,-1),x=Xf(this._lContainer,g);x&&(bc(Jv(this._lContainer),g),Np(x[1],x))}detach(h){const g=this._adjustIndex(h,-1),x=Xf(this._lContainer,g);return x&&null!=bc(Jv(this._lContainer),g)?new mm(x):null}_adjustIndex(h,g=0){return h??this.length+g}};function zD(d){return d[8]}function Jv(d){return d[8]||(d[8]=[])}function ox(d,h){let g;const x=h[d.index];if(Ea(x))g=x;else{let I;if(8&d.type)I=ji(x);else{const R=h[11];I=R.createComment("");const V=Ki(d,h);Xd(R,Kf(R,V),I,function $y(d,h){return d.nextSibling(h)}(R,V),!1)}h[d.index]=g=gv(x,h,I,d),um(h,g)}return new xm(g,d,h)}class sx{constructor(h){this.queryList=h,this.matches=null}clone(){return new sx(this.queryList)}setDirty(){this.queryList.setDirty()}}class Hw{constructor(h=[]){this.queries=h}createEmbeddedView(h){const g=h.queries;if(null!==g){const x=null!==h.contentQueries?h.contentQueries[0]:g.length,I=[];for(let R=0;R<x;R++){const V=g.getByIndex(R);I.push(this.queries[V.indexInDeclarationView].clone())}return new Hw(I)}return null}insertView(h){this.dirtyQueriesWithMatches(h)}detachView(h){this.dirtyQueriesWithMatches(h)}dirtyQueriesWithMatches(h){for(let g=0;g<this.queries.length;g++)null!==lx(h,g).matches&&this.queries[g].setDirty()}}class jw{constructor(h,g,x=null){this.predicate=h,this.flags=g,this.read=x}}class Qv{constructor(h=[]){this.queries=h}elementStart(h,g){for(let x=0;x<this.queries.length;x++)this.queries[x].elementStart(h,g)}elementEnd(h){for(let g=0;g<this.queries.length;g++)this.queries[g].elementEnd(h)}embeddedTView(h){let g=null;for(let x=0;x<this.length;x++){const I=null!==g?g.length:0,R=this.getByIndex(x).embeddedTView(h,I);R&&(R.indexInDeclarationView=x,null!==g?g.push(R):g=[R])}return null!==g?new Qv(g):null}template(h,g){for(let x=0;x<this.queries.length;x++)this.queries[x].template(h,g)}getByIndex(h){return this.queries[h]}get length(){return this.queries.length}track(h){this.queries.push(h)}}class fy{constructor(h,g=-1){this.metadata=h,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=g}elementStart(h,g){this.isApplyingToNode(g)&&this.matchTNode(h,g)}elementEnd(h){this._declarationNodeIndex===h.index&&(this._appliesToNextNode=!1)}template(h,g){this.elementStart(h,g)}embeddedTView(h,g){return this.isApplyingToNode(h)?(this.crossesNgTemplate=!0,this.addMatch(-h.index,g),new fy(this.metadata)):null}isApplyingToNode(h){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const g=this._declarationNodeIndex;let x=h.parent;for(;null!==x&&8&x.type&&x.index!==g;)x=x.parent;return g===(null!==x?x.index:-1)}return this._appliesToNextNode}matchTNode(h,g){const x=this.metadata.predicate;if(Array.isArray(x))for(let I=0;I<x.length;I++){const R=x[I];this.matchTNodeWithReadOption(h,g,qw(g,R)),this.matchTNodeWithReadOption(h,g,y(g,h,R,!1,!1))}else x===Ep?4&g.type&&this.matchTNodeWithReadOption(h,g,-1):this.matchTNodeWithReadOption(h,g,y(g,h,x,!1,!1))}matchTNodeWithReadOption(h,g,x){if(null!==x){const I=this.metadata.read;if(null!==I)if(I===th||I===rx||I===Ep&&4&g.type)this.addMatch(g.index,-2);else{const R=y(g,h,I,!1,!1);null!==R&&this.addMatch(g.index,R)}else this.addMatch(g.index,x)}}addMatch(h,g){null===this.matches?this.matches=[h,g]:this.matches.push(h,g)}}function qw(d,h){const g=d.localNames;if(null!==g)for(let x=0;x<g.length;x+=2)if(g[x]===h)return g[x+1];return null}function VD(d,h,g,x){return-1===g?function UD(d,h){return 11&d.type?tu(d,h):4&d.type?ix(d,h):null}(h,d):-2===g?function e0(d,h,g){return g===th?tu(h,d):g===Ep?ix(h,d):g===rx?ox(h,d):void 0}(d,h,x):D(d,d[1],g,h)}function GD(d,h,g,x){const I=h[19].queries[x];if(null===I.matches){const R=d.data,V=g.matches,Y=[];for(let Q=0;Q<V.length;Q+=2){const _e=V[Q];Y.push(_e<0?null:VD(h,R[_e],V[Q+1],g.metadata.read))}I.matches=Y}return I.matches}function Yw(d,h,g,x){const I=d.queries.getByIndex(g),R=I.matches;if(null!==R){const V=GD(d,h,I,g);for(let Y=0;Y<R.length;Y+=2){const Q=R[Y];if(Q>0)x.push(V[Y/2]);else{const _e=R[Y+1],He=h[-Q];for(let yt=10;yt<He.length;yt++){const Nt=He[yt];Nt[17]===Nt[3]&&Yw(Nt[1],Nt,_e,x)}if(null!==He[9]){const yt=He[9];for(let Nt=0;Nt<yt.length;Nt++){const en=yt[Nt];Yw(en[1],en,_e,x)}}}}}return x}function Zw(d){const h=_n(),g=Pr(),x=_o();Ua(x+1);const I=lx(g,x);if(d.dirty&&function to(d){return 4==(4&d[2])}(h)===(2==(2&I.metadata.flags))){if(null===I.matches)d.reset([]);else{const R=I.crossesNgTemplate?Yw(g,h,x,[]):GD(g,h,I,x);d.reset(R,F_),d.notifyOnChanges()}return!0}return!1}function $D(d,h,g){const x=Pr();x.firstCreatePass&&(py(x,new jw(d,h,g),-1),2==(2&h)&&(x.staticViewQueries=!0)),Ww(x,_n(),h)}function HD(d,h,g,x){const I=Pr();if(I.firstCreatePass){const R=ao();py(I,new jw(h,g,x),R.index),function my(d,h){const g=d.contentQueries||(d.contentQueries=[]);h!==(g.length?g[g.length-1]:-1)&&g.push(d.queries.length-1,h)}(I,d),2==(2&g)&&(I.staticContentQueries=!0)}Ww(I,_n(),g)}function ax(){return function jD(d,h){return d[19].queries[h].queryList}(_n(),_o())}function Ww(d,h,g){const x=new Kv(4==(4&g));Vh(d,h,x,x.destroy),null===h[19]&&(h[19]=new Hw),h[19].queries.push(new sx(x))}function py(d,h,g){null===d.queries&&(d.queries=new Qv),d.queries.track(new fy(h,g))}function lx(d,h){return d.queries.getByIndex(h)}function Xw(d,h){return ix(d,h)}function vy(...d){}const cE=new wt("Application Initializer");let qh=(()=>{class d{constructor(g){this.appInits=g,this.resolve=vy,this.reject=vy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((x,I)=>{this.resolve=x,this.reject=I})}runInitializers(){if(this.initialized)return;const g=[],x=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let I=0;I<this.appInits.length;I++){const R=this.appInits[I]();if(ho(R))g.push(R);else if(Za(R)){const V=new Promise((Y,Q)=>{R.subscribe({complete:Y,error:Q})});g.push(V)}}Promise.all(g).then(()=>{x()}).catch(I=>{this.reject(I)}),0===g.length&&x(),this.initialized=!0}}return d.\u0275fac=function(g){return new(g||d)(nr(cE,8))},d.\u0275prov=Sn({token:d,factory:d.\u0275fac,providedIn:"root"}),d})();const gx=new wt("AppId",{providedIn:"root",factory:function by(){return`${a0()}${a0()}${a0()}`}});function a0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const uE=new wt("Platform Initializer"),oM=new wt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),sM=new wt("appBootstrapListener"),aM=new wt("AnimationModuleType");let Em=(()=>{class d{log(g){console.log(g)}warn(g){console.warn(g)}}return d.\u0275fac=function(g){return new(g||d)},d.\u0275prov=Sn({token:d,factory:d.\u0275fac,providedIn:"platform"}),d})();const Cm=new wt("LocaleId",{providedIn:"root",factory:()=>wa(Cm,Je.Optional|Je.SkipSelf)||function lM(){return typeof $localize<"u"&&$localize.locale||Rg}()}),l0=new wt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class uM{constructor(h,g){this.ngModuleFactory=h,this.componentFactories=g}}let dE=(()=>{class d{compileModuleSync(g){return new Rw(g)}compileModuleAsync(g){return Promise.resolve(this.compileModuleSync(g))}compileModuleAndAllComponentsSync(g){const x=this.compileModuleSync(g),R=wc(yr(g).declarations).reduce((V,Y)=>{const Q=Xn(Y);return Q&&V.push(new Cg(Q)),V},[]);return new uM(x,R)}compileModuleAndAllComponentsAsync(g){return Promise.resolve(this.compileModuleAndAllComponentsSync(g))}clearCache(){}clearCacheFor(g){}getModuleId(g){}}return d.\u0275fac=function(g){return new(g||d)},d.\u0275prov=Sn({token:d,factory:d.\u0275fac,providedIn:"root"}),d})();const gP=(()=>Promise.resolve(0))();function c0(d){typeof Zone>"u"?gP.then(()=>{d&&d.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",d)}class Bu{constructor({enableLongStackTrace:h=!1,shouldCoalesceEventChangeDetection:g=!1,shouldCoalesceRunChangeDetection:x=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new vu(!1),this.onMicrotaskEmpty=new vu(!1),this.onStable=new vu(!1),this.onError=new vu(!1),typeof Zone>"u")throw new oe(908,!1);Zone.assertZonePatched();const I=this;I._nesting=0,I._outer=I._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(I._inner=I._inner.fork(new Zone.TaskTrackingZoneSpec)),h&&Zone.longStackTraceZoneSpec&&(I._inner=I._inner.fork(Zone.longStackTraceZoneSpec)),I.shouldCoalesceEventChangeDetection=!x&&g,I.shouldCoalesceRunChangeDetection=x,I.lastRequestAnimationFrameId=-1,I.nativeRequestAnimationFrame=function _P(){let d=jt.requestAnimationFrame,h=jt.cancelAnimationFrame;if(typeof Zone<"u"&&d&&h){const g=d[Zone.__symbol__("OriginalDelegate")];g&&(d=g);const x=h[Zone.__symbol__("OriginalDelegate")];x&&(h=x)}return{nativeRequestAnimationFrame:d,nativeCancelAnimationFrame:h}}().nativeRequestAnimationFrame,function mM(d){const h=()=>{!function pM(d){d.isCheckStableRunning||-1!==d.lastRequestAnimationFrameId||(d.lastRequestAnimationFrameId=d.nativeRequestAnimationFrame.call(jt,()=>{d.fakeTopEventTask||(d.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{d.lastRequestAnimationFrameId=-1,pd(d),d.isCheckStableRunning=!0,vx(d),d.isCheckStableRunning=!1},void 0,()=>{},()=>{})),d.fakeTopEventTask.invoke()}),pd(d))}(d)};d._inner=d._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(g,x,I,R,V,Y)=>{try{return hE(d),g.invokeTask(I,R,V,Y)}finally{(d.shouldCoalesceEventChangeDetection&&"eventTask"===R.type||d.shouldCoalesceRunChangeDetection)&&h(),fE(d)}},onInvoke:(g,x,I,R,V,Y,Q)=>{try{return hE(d),g.invoke(I,R,V,Y,Q)}finally{d.shouldCoalesceRunChangeDetection&&h(),fE(d)}},onHasTask:(g,x,I,R)=>{g.hasTask(I,R),x===I&&("microTask"==R.change?(d._hasPendingMicrotasks=R.microTask,pd(d),vx(d)):"macroTask"==R.change&&(d.hasPendingMacrotasks=R.macroTask))},onHandleError:(g,x,I,R)=>(g.handleError(I,R),d.runOutsideAngular(()=>d.onError.emit(R)),!1)})}(I)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Bu.isInAngularZone())throw new oe(909,!1)}static assertNotInAngularZone(){if(Bu.isInAngularZone())throw new oe(909,!1)}run(h,g,x){return this._inner.run(h,g,x)}runTask(h,g,x,I){const R=this._inner,V=R.scheduleEventTask("NgZoneEvent: "+I,h,fM,vy,vy);try{return R.runTask(V,g,x)}finally{R.cancelTask(V)}}runGuarded(h,g,x){return this._inner.runGuarded(h,g,x)}runOutsideAngular(h){return this._outer.run(h)}}const fM={};function vx(d){if(0==d._nesting&&!d.hasPendingMicrotasks&&!d.isStable)try{d._nesting++,d.onMicrotaskEmpty.emit(null)}finally{if(d._nesting--,!d.hasPendingMicrotasks)try{d.runOutsideAngular(()=>d.onStable.emit(null))}finally{d.isStable=!0}}}function pd(d){d.hasPendingMicrotasks=!!(d._hasPendingMicrotasks||(d.shouldCoalesceEventChangeDetection||d.shouldCoalesceRunChangeDetection)&&-1!==d.lastRequestAnimationFrameId)}function hE(d){d._nesting++,d.isStable&&(d.isStable=!1,d.onUnstable.emit(null))}function fE(d){d._nesting--,vx(d)}class gM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new vu,this.onMicrotaskEmpty=new vu,this.onStable=new vu,this.onError=new vu}run(h,g,x){return h.apply(g,x)}runGuarded(h,g,x){return h.apply(g,x)}runOutsideAngular(h){return h()}runTask(h,g,x,I){return h.apply(g,x)}}const pE=new wt(""),mE=new wt("");let u0,_M=(()=>{class d{constructor(g,x,I){this._ngZone=g,this.registry=x,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,u0||(function bx(d){u0=d}(I),I.addToWindow(x)),this._watchAngularEvents(),g.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Bu.assertNotInAngularZone(),c0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())c0(()=>{for(;0!==this._callbacks.length;){let g=this._callbacks.pop();clearTimeout(g.timeoutId),g.doneCb(this._didWork)}this._didWork=!1});else{let g=this.getPendingTasks();this._callbacks=this._callbacks.filter(x=>!x.updateCb||!x.updateCb(g)||(clearTimeout(x.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(g=>({source:g.source,creationLocation:g.creationLocation,data:g.data})):[]}addCallback(g,x,I){let R=-1;x&&x>0&&(R=setTimeout(()=>{this._callbacks=this._callbacks.filter(V=>V.timeoutId!==R),g(this._didWork,this.getPendingTasks())},x)),this._callbacks.push({doneCb:g,timeoutId:R,updateCb:I})}whenStable(g,x,I){if(I&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(g,x,I),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(g){this.registry.registerApplication(g,this)}unregisterApplication(g){this.registry.unregisterApplication(g)}findProviders(g,x,I){return[]}}return d.\u0275fac=function(g){return new(g||d)(nr(Bu),nr(gE),nr(mE))},d.\u0275prov=Sn({token:d,factory:d.\u0275fac}),d})(),gE=(()=>{class d{constructor(){this._applications=new Map}registerApplication(g,x){this._applications.set(g,x)}unregisterApplication(g){this._applications.delete(g)}unregisterAllApplications(){this._applications.clear()}getTestability(g){return this._applications.get(g)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(g,x=!0){return u0?.findTestabilityInTree(this,g,x)??null}}return d.\u0275fac=function(g){return new(g||d)},d.\u0275prov=Sn({token:d,factory:d.\u0275fac,providedIn:"platform"}),d})(),Lf=null;const xx=new wt("AllowMultipleToken"),wx=new wt("PlatformDestroyListeners");class yM{constructor(h,g){this.name=h,this.token=g}}function Mm(d,h,g=[]){const x=`Platform: ${h}`,I=new wt(x);return(R=[])=>{let V=Ex();if(!V||V.injector.get(xx,!1)){const Y=[...g,...R,{provide:I,useValue:!0}];d?d(Y):function vM(d){if(Lf&&!Lf.get(xx,!1))throw new oe(400,!1);Lf=d;const h=d.get(vE);(function Dm(d){const h=d.get(uE,null);h&&h.forEach(g=>g())})(d)}(function yE(d=[],h){return Do.create({name:h,providers:[{provide:Qu,useValue:"platform"},{provide:wx,useValue:new Set([()=>Lf=null])},...d]})}(Y,x))}return function bM(d){const h=Ex();if(!h)throw new oe(401,!1);return h}()}}function Ex(){return Lf?.get(vE)??null}let vE=(()=>{class d{constructor(g){this._injector=g,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(g,x){const I=function xE(d,h){let g;return g="noop"===d?new gM:("zone.js"===d?void 0:d)||new Bu(h),g}(x?.ngZone,function bE(d){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!d||!d.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!d||!d.ngZoneRunCoalescing)||!1}}(x)),R=[{provide:Bu,useValue:I}];return I.run(()=>{const V=Do.create({providers:R,parent:this.injector,name:g.moduleType.name}),Y=g.create(V),Q=Y.injector.get(zh,null);if(!Q)throw new oe(402,!1);return I.runOutsideAngular(()=>{const _e=I.onError.subscribe({next:He=>{Q.handleError(He)}});Y.onDestroy(()=>{h0(this._modules,Y),_e.unsubscribe()})}),function wE(d,h,g){try{const x=g();return ho(x)?x.catch(I=>{throw h.runOutsideAngular(()=>d.handleError(I)),I}):x}catch(x){throw h.runOutsideAngular(()=>d.handleError(x)),x}}(Q,I,()=>{const _e=Y.injector.get(qh);return _e.runInitializers(),_e.donePromise.then(()=>(function Hb(d){Vt(d,"Expected localeId to be defined"),"string"==typeof d&&(pw=d.toLowerCase().replace(/_/g,"-"))}(Y.injector.get(Cm,Rg)||Rg),this._moduleDoBootstrap(Y),Y))})})}bootstrapModule(g,x=[]){const I=EE({},x);return function _E(d,h,g){const x=new Rw(g);return Promise.resolve(x)}(0,0,g).then(R=>this.bootstrapModuleFactory(R,I))}_moduleDoBootstrap(g){const x=g.injector.get(d0);if(g._bootstrapComponents.length>0)g._bootstrapComponents.forEach(I=>x.bootstrap(I));else{if(!g.instance.ngDoBootstrap)throw new oe(403,!1);g.instance.ngDoBootstrap(x)}this._modules.push(g)}onDestroy(g){this._destroyListeners.push(g)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new oe(404,!1);this._modules.slice().forEach(x=>x.destroy()),this._destroyListeners.forEach(x=>x());const g=this._injector.get(wx,null);g&&(g.forEach(x=>x()),g.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return d.\u0275fac=function(g){return new(g||d)(nr(Do))},d.\u0275prov=Sn({token:d,factory:d.\u0275fac,providedIn:"platform"}),d})();function EE(d,h){return Array.isArray(h)?h.reduce(EE,d):{...d,...h}}let d0=(()=>{class d{constructor(g,x,I){this._zone=g,this._injector=x,this._exceptionHandler=I,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const R=new Ae.y(Y=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{Y.next(this._stable),Y.complete()})}),V=new Ae.y(Y=>{let Q;this._zone.runOutsideAngular(()=>{Q=this._zone.onStable.subscribe(()=>{Bu.assertNotInAngularZone(),c0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,Y.next(!0))})})});const _e=this._zone.onUnstable.subscribe(()=>{Bu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{Y.next(!1)}))});return()=>{Q.unsubscribe(),_e.unsubscribe()}});this.isStable=(0,E.T)(R,V.pipe((0,Se.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(g,x){const I=g instanceof hg;if(!this._injector.get(qh).done)throw!I&&qr(g),new oe(405,false);let V;V=I?g:this._injector.get(Nh).resolveComponentFactory(g),this.componentTypes.push(V.componentType);const Y=function vP(d){return d.isBoundToModule}(V)?void 0:this._injector.get(cy),_e=V.create(Do.NULL,[],x||V.selector,Y),He=_e.location.nativeElement,yt=_e.injector.get(pE,null);return yt?.registerApplication(He),_e.onDestroy(()=>{this.detachView(_e.hostView),h0(this.components,_e),yt?.unregisterApplication(He)}),this._loadComponent(_e),_e}tick(){if(this._runningTick)throw new oe(101,!1);try{this._runningTick=!0;for(let g of this._views)g.detectChanges()}catch(g){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(g))}finally{this._runningTick=!1}}attachView(g){const x=g;this._views.push(x),x.attachToAppRef(this)}detachView(g){const x=g;h0(this._views,x),x.detachFromAppRef()}_loadComponent(g){this.attachView(g.hostView),this.tick(),this.components.push(g);const x=this._injector.get(sM,[]);x.push(...this._bootstrapListeners),x.forEach(I=>I(g))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(g=>g()),this._views.slice().forEach(g=>g.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(g){return this._destroyListeners.push(g),()=>h0(this._destroyListeners,g)}destroy(){if(this._destroyed)throw new oe(406,!1);const g=this._injector;g.destroy&&!g.destroyed&&g.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return d.\u0275fac=function(g){return new(g||d)(nr(Bu),nr(eu),nr(zh))},d.\u0275prov=Sn({token:d,factory:d.\u0275fac,providedIn:"root"}),d})();function h0(d,h){const g=d.indexOf(h);g>-1&&d.splice(g,1)}function wM(){return!1}function EM(){}let CM=(()=>{class d{}return d.__NG_ELEMENT_ID__=SM,d})();function SM(d){return function DM(d,h,g){if(Nr(d)&&!g){const x=Is(d.index,h);return new mm(x,x)}return 47&d.type?new mm(h[16],h):null}(ao(),_n(),16==(16&d))}class PM{constructor(){}supports(h){return Sg(h)}create(h){return new PP(h)}}const AP=(d,h)=>h;class PP{constructor(h){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=h||AP}forEachItem(h){let g;for(g=this._itHead;null!==g;g=g._next)h(g)}forEachOperation(h){let g=this._itHead,x=this._removalsHead,I=0,R=null;for(;g||x;){const V=!x||g&&g.currentIndex<Tx(x,I,R)?g:x,Y=Tx(V,I,R),Q=V.currentIndex;if(V===x)I--,x=x._nextRemoved;else if(g=g._next,null==V.previousIndex)I++;else{R||(R=[]);const _e=Y-I,He=Q-I;if(_e!=He){for(let Nt=0;Nt<_e;Nt++){const en=Nt<R.length?R[Nt]:R[Nt]=0,bn=en+Nt;He<=bn&&bn<_e&&(R[Nt]=en+1)}R[V.previousIndex]=He-_e}}Y!==Q&&h(V,Y,Q)}}forEachPreviousItem(h){let g;for(g=this._previousItHead;null!==g;g=g._nextPrevious)h(g)}forEachAddedItem(h){let g;for(g=this._additionsHead;null!==g;g=g._nextAdded)h(g)}forEachMovedItem(h){let g;for(g=this._movesHead;null!==g;g=g._nextMoved)h(g)}forEachRemovedItem(h){let g;for(g=this._removalsHead;null!==g;g=g._nextRemoved)h(g)}forEachIdentityChange(h){let g;for(g=this._identityChangesHead;null!==g;g=g._nextIdentityChange)h(g)}diff(h){if(null==h&&(h=[]),!Sg(h))throw new oe(900,!1);return this.check(h)?this:null}onDestroy(){}check(h){this._reset();let I,R,V,g=this._itHead,x=!1;if(Array.isArray(h)){this.length=h.length;for(let Y=0;Y<this.length;Y++)R=h[Y],V=this._trackByFn(Y,R),null!==g&&Object.is(g.trackById,V)?(x&&(g=this._verifyReinsertion(g,R,V,Y)),Object.is(g.item,R)||this._addIdentityChange(g,R)):(g=this._mismatch(g,R,V,Y),x=!0),g=g._next}else I=0,function q1(d,h){if(Array.isArray(d))for(let g=0;g<d.length;g++)h(d[g]);else{const g=d[Pf()]();let x;for(;!(x=g.next()).done;)h(x.value)}}(h,Y=>{V=this._trackByFn(I,Y),null!==g&&Object.is(g.trackById,V)?(x&&(g=this._verifyReinsertion(g,Y,V,I)),Object.is(g.item,Y)||this._addIdentityChange(g,Y)):(g=this._mismatch(g,Y,V,I),x=!0),g=g._next,I++}),this.length=I;return this._truncate(g),this.collection=h,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let h;for(h=this._previousItHead=this._itHead;null!==h;h=h._next)h._nextPrevious=h._next;for(h=this._additionsHead;null!==h;h=h._nextAdded)h.previousIndex=h.currentIndex;for(this._additionsHead=this._additionsTail=null,h=this._movesHead;null!==h;h=h._nextMoved)h.previousIndex=h.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(h,g,x,I){let R;return null===h?R=this._itTail:(R=h._prev,this._remove(h)),null!==(h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(x,null))?(Object.is(h.item,g)||this._addIdentityChange(h,g),this._reinsertAfter(h,R,I)):null!==(h=null===this._linkedRecords?null:this._linkedRecords.get(x,I))?(Object.is(h.item,g)||this._addIdentityChange(h,g),this._moveAfter(h,R,I)):h=this._addAfter(new Mx(g,x),R,I),h}_verifyReinsertion(h,g,x,I){let R=null===this._unlinkedRecords?null:this._unlinkedRecords.get(x,null);return null!==R?h=this._reinsertAfter(R,h._prev,I):h.currentIndex!=I&&(h.currentIndex=I,this._addToMoves(h,I)),h}_truncate(h){for(;null!==h;){const g=h._next;this._addToRemovals(this._unlink(h)),h=g}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(h,g,x){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(h);const I=h._prevRemoved,R=h._nextRemoved;return null===I?this._removalsHead=R:I._nextRemoved=R,null===R?this._removalsTail=I:R._prevRemoved=I,this._insertAfter(h,g,x),this._addToMoves(h,x),h}_moveAfter(h,g,x){return this._unlink(h),this._insertAfter(h,g,x),this._addToMoves(h,x),h}_addAfter(h,g,x){return this._insertAfter(h,g,x),this._additionsTail=null===this._additionsTail?this._additionsHead=h:this._additionsTail._nextAdded=h,h}_insertAfter(h,g,x){const I=null===g?this._itHead:g._next;return h._next=I,h._prev=g,null===I?this._itTail=h:I._prev=h,null===g?this._itHead=h:g._next=h,null===this._linkedRecords&&(this._linkedRecords=new Ix),this._linkedRecords.put(h),h.currentIndex=x,h}_remove(h){return this._addToRemovals(this._unlink(h))}_unlink(h){null!==this._linkedRecords&&this._linkedRecords.remove(h);const g=h._prev,x=h._next;return null===g?this._itHead=x:g._next=x,null===x?this._itTail=g:x._prev=g,h}_addToMoves(h,g){return h.previousIndex===g||(this._movesTail=null===this._movesTail?this._movesHead=h:this._movesTail._nextMoved=h),h}_addToRemovals(h){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ix),this._unlinkedRecords.put(h),h.currentIndex=null,h._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=h,h._prevRemoved=null):(h._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=h),h}_addIdentityChange(h,g){return h.item=g,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=h:this._identityChangesTail._nextIdentityChange=h,h}}class Mx{constructor(h,g){this.item=h,this.trackById=g,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class RM{constructor(){this._head=null,this._tail=null}add(h){null===this._head?(this._head=this._tail=h,h._nextDup=null,h._prevDup=null):(this._tail._nextDup=h,h._prevDup=this._tail,h._nextDup=null,this._tail=h)}get(h,g){let x;for(x=this._head;null!==x;x=x._nextDup)if((null===g||g<=x.currentIndex)&&Object.is(x.trackById,h))return x;return null}remove(h){const g=h._prevDup,x=h._nextDup;return null===g?this._head=x:g._nextDup=x,null===x?this._tail=g:x._prevDup=g,null===this._head}}class Ix{constructor(){this.map=new Map}put(h){const g=h.trackById;let x=this.map.get(g);x||(x=new RM,this.map.set(g,x)),x.add(h)}get(h,g){const I=this.map.get(h);return I?I.get(h,g):null}remove(h){const g=h.trackById;return this.map.get(g).remove(h)&&this.map.delete(g),h}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Tx(d,h,g){const x=d.previousIndex;if(null===x)return x;let I=0;return g&&x<g.length&&(I=g[x]),x+h+I}class TE{constructor(){}supports(h){return h instanceof Map||Tv(h)}create(){return new AE}}class AE{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(h){let g;for(g=this._mapHead;null!==g;g=g._next)h(g)}forEachPreviousItem(h){let g;for(g=this._previousMapHead;null!==g;g=g._nextPrevious)h(g)}forEachChangedItem(h){let g;for(g=this._changesHead;null!==g;g=g._nextChanged)h(g)}forEachAddedItem(h){let g;for(g=this._additionsHead;null!==g;g=g._nextAdded)h(g)}forEachRemovedItem(h){let g;for(g=this._removalsHead;null!==g;g=g._nextRemoved)h(g)}diff(h){if(h){if(!(h instanceof Map||Tv(h)))throw new oe(900,!1)}else h=new Map;return this.check(h)?this:null}onDestroy(){}check(h){this._reset();let g=this._mapHead;if(this._appendAfter=null,this._forEach(h,(x,I)=>{if(g&&g.key===I)this._maybeAddToChanges(g,x),this._appendAfter=g,g=g._next;else{const R=this._getOrCreateRecordForKey(I,x);g=this._insertBeforeOrAppend(g,R)}}),g){g._prev&&(g._prev._next=null),this._removalsHead=g;for(let x=g;null!==x;x=x._nextRemoved)x===this._mapHead&&(this._mapHead=null),this._records.delete(x.key),x._nextRemoved=x._next,x.previousValue=x.currentValue,x.currentValue=null,x._prev=null,x._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(h,g){if(h){const x=h._prev;return g._next=h,g._prev=x,h._prev=g,x&&(x._next=g),h===this._mapHead&&(this._mapHead=g),this._appendAfter=h,h}return this._appendAfter?(this._appendAfter._next=g,g._prev=this._appendAfter):this._mapHead=g,this._appendAfter=g,null}_getOrCreateRecordForKey(h,g){if(this._records.has(h)){const I=this._records.get(h);this._maybeAddToChanges(I,g);const R=I._prev,V=I._next;return R&&(R._next=V),V&&(V._prev=R),I._next=null,I._prev=null,I}const x=new OM(h);return this._records.set(h,x),x.currentValue=g,this._addToAdditions(x),x}_reset(){if(this.isDirty){let h;for(this._previousMapHead=this._mapHead,h=this._previousMapHead;null!==h;h=h._next)h._nextPrevious=h._next;for(h=this._changesHead;null!==h;h=h._nextChanged)h.previousValue=h.currentValue;for(h=this._additionsHead;null!=h;h=h._nextAdded)h.previousValue=h.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(h,g){Object.is(g,h.currentValue)||(h.previousValue=h.currentValue,h.currentValue=g,this._addToChanges(h))}_addToAdditions(h){null===this._additionsHead?this._additionsHead=this._additionsTail=h:(this._additionsTail._nextAdded=h,this._additionsTail=h)}_addToChanges(h){null===this._changesHead?this._changesHead=this._changesTail=h:(this._changesTail._nextChanged=h,this._changesTail=h)}_forEach(h,g){h instanceof Map?h.forEach(g):Object.keys(h).forEach(x=>g(h[x],x))}}class OM{constructor(h){this.key=h,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function g0(){return new Gg([new PM])}let Gg=(()=>{class d{constructor(g){this.factories=g}static create(g,x){if(null!=x){const I=x.factories.slice();g=g.concat(I)}return new d(g)}static extend(g){return{provide:d,useFactory:x=>d.create(g,x||g0()),deps:[[d,new fu,new kn]]}}find(g){const x=this.factories.find(I=>I.supports(g));if(null!=x)return x;throw new oe(901,!1)}}return d.\u0275prov=Sn({token:d,providedIn:"root",factory:g0}),d})();function gh(){return new Hg([new TE])}let Hg=(()=>{class d{constructor(g){this.factories=g}static create(g,x){if(x){const I=x.factories.slice();g=g.concat(I)}return new d(g)}static extend(g){return{provide:d,useFactory:x=>d.create(g,x||gh()),deps:[[d,new fu,new kn]]}}find(g){const x=this.factories.find(I=>I.supports(g));if(x)return x;throw new oe(901,!1)}}return d.\u0275prov=Sn({token:d,providedIn:"root",factory:gh}),d})();const xy=Mm(null,"core",[]);let PE=(()=>{class d{constructor(g){}}return d.\u0275fac=function(g){return new(g||d)(nr(d0))},d.\u0275mod=xn({type:d}),d.\u0275inj=$n({}),d})();function kM(d){return"boolean"==typeof d?d:null!=d&&"false"!==d}},825:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{FT:()=>StoreDevtoolsModule});var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4650),_ngrx_store__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9653),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(515),rxjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9751),rxjs__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(9646),rxjs__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(6451),rxjs__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(233),rxjs__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(4707),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3099),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(9300),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(4004),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(4351),rxjs_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(7414),rxjs_operators__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(8372),rxjs_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(262),rxjs_operators__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(5698),rxjs_operators__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(2722),rxjs_operators__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(3900),rxjs_operators__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(5684),rxjs_operators__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(5363),rxjs_operators__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(1365),rxjs_operators__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(5026);const PERFORM_ACTION="PERFORM_ACTION",REFRESH="REFRESH",RESET="RESET",ROLLBACK="ROLLBACK",COMMIT="COMMIT",SWEEP="SWEEP",TOGGLE_ACTION="TOGGLE_ACTION",SET_ACTIONS_ACTIVE="SET_ACTIONS_ACTIVE",JUMP_TO_STATE="JUMP_TO_STATE",JUMP_TO_ACTION="JUMP_TO_ACTION",IMPORT_STATE="IMPORT_STATE",LOCK_CHANGES="LOCK_CHANGES",PAUSE_RECORDING="PAUSE_RECORDING";class PerformAction{constructor(Pe,W){if(this.action=Pe,this.timestamp=W,this.type=PERFORM_ACTION,typeof Pe.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}}class Refresh{constructor(){this.type=REFRESH}}class Reset{constructor(Pe){this.timestamp=Pe,this.type=RESET}}class Rollback{constructor(Pe){this.timestamp=Pe,this.type=ROLLBACK}}class Commit{constructor(Pe){this.timestamp=Pe,this.type=COMMIT}}class Sweep{constructor(){this.type=SWEEP}}class ToggleAction{constructor(Pe){this.id=Pe,this.type=TOGGLE_ACTION}}class SetActionsActive{constructor(Pe,W,o=!0){this.start=Pe,this.end=W,this.active=o,this.type=SET_ACTIONS_ACTIVE}}class JumpToState{constructor(Pe){this.index=Pe,this.type=JUMP_TO_STATE}}class JumpToAction{constructor(Pe){this.actionId=Pe,this.type=JUMP_TO_ACTION}}class ImportState{constructor(Pe){this.nextLiftedState=Pe,this.type=IMPORT_STATE}}class LockChanges{constructor(Pe){this.status=Pe,this.type=LOCK_CHANGES}}class PauseRecording{constructor(Pe){this.status=Pe,this.type=PAUSE_RECORDING}}class StoreDevtoolsConfig{constructor(){this.maxAge=!1}}const STORE_DEVTOOLS_CONFIG=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Options"),INITIAL_OPTIONS=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Initial Config");function noMonitor(){return null}const DEFAULT_NAME="NgRx Store DevTools";function createConfig(lt){const Pe={maxAge:!1,monitor:noMonitor,actionSanitizer:void 0,stateSanitizer:void 0,name:DEFAULT_NAME,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0}},W="function"==typeof lt?lt():lt,Ae=Object.assign({},Pe,{features:W.features||!!W.logOnly&&{pause:!0,export:!0,test:!0}||Pe.features},W);if(Ae.maxAge&&Ae.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${Ae.maxAge}`);return Ae}function difference(lt,Pe){return lt.filter(W=>Pe.indexOf(W)<0)}function unliftState(lt){const{computedStates:Pe,currentStateIndex:W}=lt;if(W>=Pe.length){const{state:me}=Pe[Pe.length-1];return me}const{state:o}=Pe[W];return o}function unliftAction(lt){return lt.actionsById[lt.nextActionId-1]}function liftAction(lt){return new PerformAction(lt,+Date.now())}function sanitizeActions(lt,Pe){return Object.keys(Pe).reduce((W,o)=>{const me=Number(o);return W[me]=sanitizeAction(lt,Pe[me],me),W},{})}function sanitizeAction(lt,Pe,W){return{...Pe,action:lt(Pe.action,W)}}function sanitizeStates(lt,Pe){return Pe.map((W,o)=>({state:sanitizeState(lt,W.state,o),error:W.error}))}function sanitizeState(lt,Pe,W){return lt(Pe,W)}function shouldFilterActions(lt){return lt.predicate||lt.actionsSafelist||lt.actionsBlocklist}function filterLiftedState(lt,Pe,W,o){const me=[],Ae={},E=[];return lt.stagedActionIds.forEach((Se,he)=>{const Oe=lt.actionsById[Se];!Oe||he&&isActionFiltered(lt.computedStates[he],Oe,Pe,W,o)||(Ae[Se]=Oe,me.push(Se),E.push(lt.computedStates[he]))}),{...lt,stagedActionIds:me,actionsById:Ae,computedStates:E}}function isActionFiltered(lt,Pe,W,o,me){const Ae=W&&!W(lt,Pe.action),E=o&&!Pe.action.type.match(o.map(he=>escapeRegExp(he)).join("|")),Se=me&&Pe.action.type.match(me.map(he=>escapeRegExp(he)).join("|"));return Ae||E||Se}function escapeRegExp(lt){return lt.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}let DevtoolsDispatcher=(()=>{class lt extends _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.UO{}return lt.\u0275fac=function(){let Pe;return function(o){return(Pe||(Pe=_angular_core__WEBPACK_IMPORTED_MODULE_0__.n5z(lt)))(o||lt)}}(),lt.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:lt,factory:lt.\u0275fac}),lt})();const ExtensionActionTypes={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},REDUX_DEVTOOLS_EXTENSION=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Redux Devtools Extension");let DevtoolsExtension=(()=>{class DevtoolsExtension{constructor(lt,Pe,W){this.config=Pe,this.dispatcher=W,this.devtoolsExtension=lt,this.createActionStreams()}notify(lt,Pe){if(this.devtoolsExtension)if(lt.type===PERFORM_ACTION){if(Pe.isLocked||Pe.isPaused)return;const W=unliftState(Pe);if(shouldFilterActions(this.config)&&isActionFiltered(W,lt,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;const o=this.config.stateSanitizer?sanitizeState(this.config.stateSanitizer,W,Pe.currentStateIndex):W,me=this.config.actionSanitizer?sanitizeAction(this.config.actionSanitizer,lt,Pe.nextActionId):lt;this.sendToReduxDevtools(()=>this.extensionConnection.send(me,o))}else{const W={...Pe,stagedActionIds:Pe.stagedActionIds,actionsById:this.config.actionSanitizer?sanitizeActions(this.config.actionSanitizer,Pe.actionsById):Pe.actionsById,computedStates:this.config.stateSanitizer?sanitizeStates(this.config.stateSanitizer,Pe.computedStates):Pe.computedStates};this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,W,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new rxjs__WEBPACK_IMPORTED_MODULE_3__.y(lt=>{const Pe=this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=Pe,Pe.init(),Pe.subscribe(W=>lt.next(W)),Pe.unsubscribe}):rxjs__WEBPACK_IMPORTED_MODULE_2__.E}createActionStreams(){const lt=this.createChangesObservable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.B)()),Pe=lt.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(Se=>Se.type===ExtensionActionTypes.START)),W=lt.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(Se=>Se.type===ExtensionActionTypes.STOP)),o=lt.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(Se=>Se.type===ExtensionActionTypes.DISPATCH),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(Se=>this.unwrapAction(Se.payload)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.b)(Se=>Se.type===IMPORT_STATE?this.dispatcher.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(he=>he.type===_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.wb),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.V)(1e3),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.b)(1e3),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(()=>Se),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.K)(()=>(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)(Se)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.q)(1)):(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)(Se))),Ae=lt.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(Se=>Se.type===ExtensionActionTypes.ACTION),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(Se=>this.unwrapAction(Se.payload))).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(W)),E=o.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(W));this.start$=Pe.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(W)),this.actions$=this.start$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.w)(()=>Ae)),this.liftedActions$=this.start$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.w)(()=>E))}unwrapAction(action){return"string"==typeof action?eval(`(${action})`):action}getExtensionConfig(lt){const Pe={name:lt.name,features:lt.features,serialize:lt.serialize,autoPause:lt.autoPause??!1,trace:lt.trace??!1,traceLimit:lt.traceLimit??75};return!1!==lt.maxAge&&(Pe.maxAge=lt.maxAge),Pe}sendToReduxDevtools(lt){try{lt()}catch(Pe){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",Pe)}}}return DevtoolsExtension.\u0275fac=function lt(Pe){return new(Pe||DevtoolsExtension)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(REDUX_DEVTOOLS_EXTENSION),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(STORE_DEVTOOLS_CONFIG),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(DevtoolsDispatcher))},DevtoolsExtension.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:DevtoolsExtension,factory:DevtoolsExtension.\u0275fac}),DevtoolsExtension})();const INIT_ACTION={type:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.qg},RECOMPUTE="@ngrx/store-devtools/recompute",RECOMPUTE_ACTION={type:RECOMPUTE};function computeNextEntry(lt,Pe,W,o,me){if(o)return{state:W,error:"Interrupted by an error up the chain"};let E,Ae=W;try{Ae=lt(W,Pe)}catch(Se){E=Se.toString(),me.handleError(Se)}return{state:Ae,error:E}}function recomputeStates(lt,Pe,W,o,me,Ae,E,Se,he){if(Pe>=lt.length&&lt.length===Ae.length)return lt;const Oe=lt.slice(0,Pe),Ne=Ae.length-(he?1:0);for(let xe=Pe;xe<Ne;xe++){const ct=Ae[xe],Ke=me[ct].action,Te=Oe[xe-1],at=Te?Te.state:o,Ct=Te?Te.error:void 0,De=E.indexOf(ct)>-1?Te:computeNextEntry(W,Ke,at,Ct,Se);Oe.push(De)}return he&&Oe.push(lt[lt.length-1]),Oe}function liftInitialState(lt,Pe){return{monitorState:Pe(void 0,{}),nextActionId:1,actionsById:{0:liftAction(INIT_ACTION)},stagedActionIds:[0],skippedActionIds:[],committedState:lt,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function liftReducerWith(lt,Pe,W,o,me={}){return Ae=>(E,Se)=>{let{monitorState:he,actionsById:Oe,nextActionId:Ne,stagedActionIds:xe,skippedActionIds:ct,committedState:Ke,currentStateIndex:Te,computedStates:at,isLocked:Ct,isPaused:ue}=E||Pe;function De(ce){let Re=ce,ve=xe.slice(1,Re+1);for(let we=0;we<ve.length;we++){if(at[we+1].error){Re=we,ve=xe.slice(1,Re+1);break}delete Oe[ve[we]]}ct=ct.filter(we=>-1===ve.indexOf(we)),xe=[0,...xe.slice(Re+1)],Ke=at[Re].state,at=at.slice(Re),Te=Te>Re?Te-Re:0}function oe(){Oe={0:liftAction(INIT_ACTION)},Ne=1,xe=[0],ct=[],Ke=at[Te].state,Te=0,at=[]}E||(Oe=Object.create(Oe));let ye=0;switch(Se.type){case LOCK_CHANGES:Ct=Se.status,ye=1/0;break;case PAUSE_RECORDING:ue=Se.status,ue?(xe=[...xe,Ne],Oe[Ne]=new PerformAction({type:"@ngrx/devtools/pause"},+Date.now()),Ne++,ye=xe.length-1,at=at.concat(at[at.length-1]),Te===xe.length-2&&Te++,ye=1/0):oe();break;case RESET:Oe={0:liftAction(INIT_ACTION)},Ne=1,xe=[0],ct=[],Ke=lt,Te=0,at=[];break;case COMMIT:oe();break;case ROLLBACK:Oe={0:liftAction(INIT_ACTION)},Ne=1,xe=[0],ct=[],Te=0,at=[];break;case TOGGLE_ACTION:{const{id:ce}=Se;ct=-1===ct.indexOf(ce)?[ce,...ct]:ct.filter(ve=>ve!==ce),ye=xe.indexOf(ce);break}case SET_ACTIONS_ACTIVE:{const{start:ce,end:Re,active:ve}=Se,we=[];for(let Fe=ce;Fe<Re;Fe++)we.push(Fe);ct=ve?difference(ct,we):[...ct,...we],ye=xe.indexOf(ce);break}case JUMP_TO_STATE:Te=Se.index,ye=1/0;break;case JUMP_TO_ACTION:{const ce=xe.indexOf(Se.actionId);-1!==ce&&(Te=ce),ye=1/0;break}case SWEEP:xe=difference(xe,ct),ct=[],Te=Math.min(Te,xe.length-1);break;case PERFORM_ACTION:{if(Ct)return E||Pe;if(ue||E&&isActionFiltered(E.computedStates[Te],Se,me.predicate,me.actionsSafelist,me.actionsBlocklist)){const Re=at[at.length-1];at=[...at.slice(0,-1),computeNextEntry(Ae,Se.action,Re.state,Re.error,W)],ye=1/0;break}me.maxAge&&xe.length===me.maxAge&&De(1),Te===xe.length-1&&Te++;const ce=Ne++;Oe[ce]=Se,xe=[...xe,ce],ye=xe.length-1;break}case IMPORT_STATE:({monitorState:he,actionsById:Oe,nextActionId:Ne,stagedActionIds:xe,skippedActionIds:ct,committedState:Ke,currentStateIndex:Te,computedStates:at,isLocked:Ct,isPaused:ue}=Se.nextLiftedState);break;case _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.qg:ye=0,me.maxAge&&xe.length>me.maxAge&&(at=recomputeStates(at,ye,Ae,Ke,Oe,xe,ct,W,ue),De(xe.length-me.maxAge),ye=1/0);break;case _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.wb:if(at.filter(Re=>Re.error).length>0)ye=0,me.maxAge&&xe.length>me.maxAge&&(at=recomputeStates(at,ye,Ae,Ke,Oe,xe,ct,W,ue),De(xe.length-me.maxAge),ye=1/0);else{if(!ue&&!Ct){Te===xe.length-1&&Te++;const Re=Ne++;Oe[Re]=new PerformAction(Se,+Date.now()),xe=[...xe,Re],ye=xe.length-1,at=recomputeStates(at,ye,Ae,Ke,Oe,xe,ct,W,ue)}at=at.map(Re=>({...Re,state:Ae(Re.state,RECOMPUTE_ACTION)})),Te=xe.length-1,me.maxAge&&xe.length>me.maxAge&&De(xe.length-me.maxAge),ye=1/0}break;default:ye=1/0}return at=recomputeStates(at,ye,Ae,Ke,Oe,xe,ct,W,ue),he=o(he,Se),{monitorState:he,actionsById:Oe,nextActionId:Ne,stagedActionIds:xe,skippedActionIds:ct,committedState:Ke,currentStateIndex:Te,computedStates:at,isLocked:Ct,isPaused:ue}}}let StoreDevtools=(()=>{class lt{constructor(W,o,me,Ae,E,Se,he,Oe){const Ne=liftInitialState(he,Oe.monitor),xe=liftReducerWith(he,Ne,Se,Oe.monitor,Oe),ct=(0,rxjs__WEBPACK_IMPORTED_MODULE_15__.T)((0,rxjs__WEBPACK_IMPORTED_MODULE_15__.T)(o.asObservable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.T)(1)),Ae.actions$).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(liftAction)),W,Ae.liftedActions$).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.Q)(rxjs__WEBPACK_IMPORTED_MODULE_18__.N)),Ke=me.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(xe)),Te=new rxjs__WEBPACK_IMPORTED_MODULE_19__.t(1),at=ct.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.M)(Ke),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.R)(({state:oe},[ye,ce])=>{let Re=ce(oe,ye);return ye.type!==PERFORM_ACTION&&shouldFilterActions(Oe)&&(Re=filterLiftedState(Re,Oe.predicate,Oe.actionsSafelist,Oe.actionsBlocklist)),Ae.notify(ye,Re),{state:Re,action:ye}},{state:Ne,action:null})).subscribe(({state:oe,action:ye})=>{Te.next(oe),ye.type===PERFORM_ACTION&&E.next(ye.action)}),Ct=Ae.start$.subscribe(()=>{this.refresh()}),ue=Te.asObservable(),De=ue.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(unliftState));this.extensionStartSubscription=Ct,this.stateSubscription=at,this.dispatcher=W,this.liftedState=ue,this.state=De}dispatch(W){this.dispatcher.next(W)}next(W){this.dispatcher.next(W)}error(W){}complete(){}performAction(W){this.dispatch(new PerformAction(W,+Date.now()))}refresh(){this.dispatch(new Refresh)}reset(){this.dispatch(new Reset(+Date.now()))}rollback(){this.dispatch(new Rollback(+Date.now()))}commit(){this.dispatch(new Commit(+Date.now()))}sweep(){this.dispatch(new Sweep)}toggleAction(W){this.dispatch(new ToggleAction(W))}jumpToAction(W){this.dispatch(new JumpToAction(W))}jumpToState(W){this.dispatch(new JumpToState(W))}importState(W){this.dispatch(new ImportState(W))}lockChanges(W){this.dispatch(new LockChanges(W))}pauseRecording(W){this.dispatch(new PauseRecording(W))}}return lt.\u0275fac=function(W){return new(W||lt)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(DevtoolsDispatcher),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.UO),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.n$),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(DevtoolsExtension),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.Y$),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_angular_core__WEBPACK_IMPORTED_MODULE_0__.qLn),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.Y6),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(STORE_DEVTOOLS_CONFIG))},lt.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:lt,factory:lt.\u0275fac}),lt})();const IS_EXTENSION_OR_MONITOR_PRESENT=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function createIsExtensionOrMonitorPresent(lt,Pe){return Boolean(lt)||Pe.monitor!==noMonitor}function createReduxDevtoolsExtension(){const lt="__REDUX_DEVTOOLS_EXTENSION__";return"object"==typeof window&&typeof window[lt]<"u"?window[lt]:null}function provideStoreDevtools(lt={}){return(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.MR2)([DevtoolsExtension,DevtoolsDispatcher,StoreDevtools,{provide:INITIAL_OPTIONS,useValue:lt},{provide:IS_EXTENSION_OR_MONITOR_PRESENT,deps:[REDUX_DEVTOOLS_EXTENSION,STORE_DEVTOOLS_CONFIG],useFactory:createIsExtensionOrMonitorPresent},{provide:REDUX_DEVTOOLS_EXTENSION,useFactory:createReduxDevtoolsExtension},{provide:STORE_DEVTOOLS_CONFIG,deps:[INITIAL_OPTIONS],useFactory:createConfig},{provide:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.FR,deps:[StoreDevtools],useFactory:createStateObservable},{provide:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.mK,useExisting:DevtoolsDispatcher}])}function createStateObservable(lt){return lt.state}let StoreDevtoolsModule=(()=>{class lt{static instrument(W={}){return{ngModule:lt,providers:[provideStoreDevtools(W)]}}}return lt.\u0275fac=function(W){return new(W||lt)},lt.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_0__.oAB({type:lt}),lt.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_0__.cJS({}),lt})()},9653:(lt,Pe,W)=>{"use strict";W.d(Pe,{UO:()=>se,qg:()=>Fe,Y6:()=>de,mK:()=>ke,n$:()=>Le,Y$:()=>ln,FR:()=>mt,yh:()=>Fn,CK:()=>Xa,Aw:()=>ms,cr:()=>An,wb:()=>Je,PH:()=>Ct,R7:()=>ce,Lq:()=>Ji,P1:()=>rt,on:()=>ir,Ky:()=>ue});var o=W(4650),me=W(1135),Ae=W(9751),E=W(7579),Se=W(233),he=W(5363),Oe=W(1365),Ne=W(5026),xe=W(4004),Ke=W(1884);const Te={};function Ct(ht,Jt){if(Te[ht]=(Te[ht]||0)+1,"function"==typeof Jt)return oe(ht,(...on)=>({...Jt(...on),type:ht}));switch(Jt?Jt._as:"empty"){case"empty":return oe(ht,()=>({type:ht}));case"props":return oe(ht,on=>({...on,type:ht}));default:throw new Error("Unexpected config.")}}function ue(){return{_as:"props",_p:void 0}}function oe(ht,Jt){return Object.defineProperty(Jt,"type",{value:ht,writable:!1})}function ce(ht){const{source:Jt,events:ft}=ht;return Object.keys(ft).reduce((on,gn)=>({...on,[ve(gn)]:Ct(we(Jt,gn),ft[gn])}),{})}function ve(ht){return ht.trim().toLowerCase().split(" ").map((Jt,ft)=>0===ft?Jt:function ye(ht){return ht.charAt(0).toUpperCase()+ht.substring(1)}(Jt)).join("")}function we(ht,Jt){return`[${ht}] ${Jt}`}const Fe="@ngrx/store/init";let se=(()=>{class ht extends me.X{constructor(){super({type:Fe})}next(ft){if("function"==typeof ft)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(typeof ft>"u")throw new TypeError("Actions must be objects");if(typeof ft.type>"u")throw new TypeError("Actions must have a type property");super.next(ft)}complete(){}ngOnDestroy(){super.complete()}}return ht.\u0275fac=function(ft){return new(ft||ht)},ht.\u0275prov=o.Yz7({token:ht,factory:ht.\u0275fac}),ht})();const _t=[se],Xe=new o.OlP("@ngrx/store Internal Root Guard"),st=new o.OlP("@ngrx/store Internal Initial State"),de=new o.OlP("@ngrx/store Initial State"),Qe=new o.OlP("@ngrx/store Reducer Factory"),dt=new o.OlP("@ngrx/store Internal Reducer Factory Provider"),Me=new o.OlP("@ngrx/store Initial Reducers"),ut=new o.OlP("@ngrx/store Internal Initial Reducers"),$e=new o.OlP("@ngrx/store Store Features"),gt=new o.OlP("@ngrx/store Internal Store Reducers"),Mt=new o.OlP("@ngrx/store Internal Feature Reducers"),tt=new o.OlP("@ngrx/store Internal Feature Configs"),Bt=new o.OlP("@ngrx/store Internal Store Features"),Vt=new o.OlP("@ngrx/store Internal Feature Reducers Token"),rn=new o.OlP("@ngrx/store Feature Reducers"),Gt=new o.OlP("@ngrx/store User Provided Meta Reducers"),Vn=new o.OlP("@ngrx/store Meta Reducers"),Bn=new o.OlP("@ngrx/store Internal Resolved Meta Reducers"),Sn=new o.OlP("@ngrx/store User Runtime Checks Config"),si=new o.OlP("@ngrx/store Internal User Runtime Checks Config"),$n=new o.OlP("@ngrx/store Internal Runtime Checks"),hn=new o.OlP("@ngrx/store Check if Action types are unique");function Fr(ht,Jt={}){const ft=Object.keys(ht),on={};for(let zn=0;zn<ft.length;zn++){const Ai=ft[zn];"function"==typeof ht[Ai]&&(on[Ai]=ht[Ai])}const gn=Object.keys(on);return function(Ai,vr){Ai=void 0===Ai?Jt:Ai;let Hi=!1;const tr={};for(let qi=0;qi<gn.length;qi++){const fo=gn[qi],po=Ai[fo],Ea=(0,on[fo])(po,vr);tr[fo]=Ea,Hi=Hi||Ea!==po}return Hi?tr:Ai}}function Ri(...ht){return function(Jt){if(0===ht.length)return Jt;const ft=ht[ht.length-1];return ht.slice(0,-1).reduceRight((gn,zn)=>zn(gn),ft(Jt))}}function It(ht,Jt){return Array.isArray(Jt)&&Jt.length>0&&(ht=Ri.apply(null,[...Jt,ht])),(ft,on)=>{const gn=ht(ft);return(zn,Ai)=>gn(zn=void 0===zn?on:zn,Ai)}}new o.OlP("@ngrx/store Root Store Provider"),new o.OlP("@ngrx/store Feature State Provider");class Le extends Ae.y{}class ke extends se{}const Je="@ngrx/store/update-reducers";let Tt=(()=>{class ht extends me.X{constructor(ft,on,gn,zn){super(zn(gn,on)),this.dispatcher=ft,this.initialState=on,this.reducers=gn,this.reducerFactory=zn}get currentReducers(){return this.reducers}addFeature(ft){this.addFeatures([ft])}addFeatures(ft){const on=ft.reduce((gn,{reducers:zn,reducerFactory:Ai,metaReducers:vr,initialState:Hi,key:tr})=>{const qi="function"==typeof zn?function je(ht){const Jt=Array.isArray(ht)&&ht.length>0?Ri(...ht):ft=>ft;return(ft,on)=>(ft=Jt(ft),(gn,zn)=>ft(gn=void 0===gn?on:gn,zn))}(vr)(zn,Hi):It(Ai,vr)(zn,Hi);return gn[tr]=qi,gn},{});this.addReducers(on)}removeFeature(ft){this.removeFeatures([ft])}removeFeatures(ft){this.removeReducers(ft.map(on=>on.key))}addReducer(ft,on){this.addReducers({[ft]:on})}addReducers(ft){this.reducers={...this.reducers,...ft},this.updateReducers(Object.keys(ft))}removeReducer(ft){this.removeReducers([ft])}removeReducers(ft){ft.forEach(on=>{this.reducers=function yi(ht,Jt){return Object.keys(ht).filter(ft=>ft!==Jt).reduce((ft,on)=>Object.assign(ft,{[on]:ht[on]}),{})}(this.reducers,on)}),this.updateReducers(ft)}updateReducers(ft){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:Je,features:ft})}ngOnDestroy(){this.complete()}}return ht.\u0275fac=function(ft){return new(ft||ht)(o.LFG(ke),o.LFG(de),o.LFG(Me),o.LFG(Qe))},ht.\u0275prov=o.Yz7({token:ht,factory:ht.\u0275fac}),ht})();const Yt=[Tt,{provide:Le,useExisting:Tt},{provide:ke,useExisting:se}];let ln=(()=>{class ht extends E.x{ngOnDestroy(){this.complete()}}return ht.\u0275fac=function(){let Jt;return function(on){return(Jt||(Jt=o.n5z(ht)))(on||ht)}}(),ht.\u0275prov=o.Yz7({token:ht,factory:ht.\u0275fac}),ht})();const un=[ln];class mt extends Ae.y{}let jt=(()=>{class ht extends me.X{constructor(ft,on,gn,zn){super(zn);const tr=ft.pipe((0,he.Q)(Se.N)).pipe((0,Oe.M)(on)).pipe((0,Ne.R)(In,{state:zn}));this.stateSubscription=tr.subscribe(({state:qi,action:fo})=>{this.next(qi),gn.next(fo)})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}}return ht.INIT=Fe,ht.\u0275fac=function(ft){return new(ft||ht)(o.LFG(se),o.LFG(Le),o.LFG(ln),o.LFG(de))},ht.\u0275prov=o.Yz7({token:ht,factory:ht.\u0275fac}),ht})();function In(ht={state:void 0},[Jt,ft]){const{state:on}=ht;return{state:ft(on,Jt),action:Jt}}const sn=[jt,{provide:mt,useExisting:jt}];let Fn=(()=>{class ht extends Ae.y{constructor(ft,on,gn){super(),this.actionsObserver=on,this.reducerManager=gn,this.source=ft}select(ft,...on){return Ti.call(null,ft,...on)(this)}lift(ft){const on=new ht(this,this.actionsObserver,this.reducerManager);return on.operator=ft,on}dispatch(ft){this.actionsObserver.next(ft)}next(ft){this.actionsObserver.next(ft)}error(ft){this.actionsObserver.error(ft)}complete(){this.actionsObserver.complete()}addReducer(ft,on){this.reducerManager.addReducer(ft,on)}removeReducer(ft){this.reducerManager.removeReducer(ft)}}return ht.\u0275fac=function(ft){return new(ft||ht)(o.LFG(mt),o.LFG(se),o.LFG(Tt))},ht.\u0275prov=o.Yz7({token:ht,factory:ht.\u0275fac}),ht})();const hr=[Fn];function Ti(ht,Jt,...ft){return function(gn){let zn;if("string"==typeof ht){const Ai=[Jt,...ft].filter(Boolean);zn=gn.pipe(function ct(...ht){const Jt=ht.length;if(0===Jt)throw new Error("list of properties cannot be empty.");return(0,xe.U)(ft=>{let on=ft;for(let gn=0;gn<Jt;gn++){const zn=on?.[ht[gn]];if(!(typeof zn<"u"))return;on=zn}return on})}(ht,...Ai))}else{if("function"!=typeof ht)throw new TypeError(`Unexpected type '${typeof ht}' in select operator, expected 'string' or 'function'`);zn=gn.pipe((0,xe.U)(Ai=>ht(Ai,Jt)))}return zn.pipe((0,Ke.x)())}}const Bi="https://ngrx.io/guide/store/configuration/runtime-checks";function fr(ht){return void 0===ht}function Cn(ht){return null===ht}function qn(ht){return Array.isArray(ht)}function wi(ht){return"object"==typeof ht&&null!==ht}function wa(ht){return"function"==typeof ht}function na(ht,Jt){return ht===Jt}function ia(ht,Jt,ft){for(let on=0;on<ht.length;on++)if(!ft(ht[on],Jt[on]))return!0;return!1}function dc(ht,Jt=na,ft=na){let zn,on=null,gn=null;return{memoized:function tr(){if(void 0!==zn)return zn.result;if(!on)return gn=ht.apply(null,arguments),on=arguments,gn;if(!ia(arguments,on,Jt))return gn;const qi=ht.apply(null,arguments);return on=arguments,ft(gn,qi)?gn:(gn=qi,qi)},reset:function Ai(){on=null,gn=null},setResult:function vr(qi){zn={result:qi}},clearResult:function Hi(){zn=void 0}}}function rt(...ht){return function Ee(ht,Jt={stateFn:le}){return function(...ft){let on=ft;if(Array.isArray(on[0])){const[qi,...fo]=on;on=[...qi,...fo]}else 1===on.length&&function qe(ht){return!!ht&&"object"==typeof ht&&Object.values(ht).every(Jt=>"function"==typeof Jt)}(on[0])&&(on=function bt(ht){const Jt=Object.values(ht),ft=Object.keys(ht);return[...Jt,(...gn)=>ft.reduce((zn,Ai,vr)=>({...zn,[Ai]:gn[vr]}),{})]}(on[0]));const gn=on.slice(0,on.length-1),zn=on[on.length-1],Ai=gn.filter(qi=>qi.release&&"function"==typeof qi.release),vr=ht(function(...qi){return zn.apply(null,qi)}),Hi=dc(function(qi,fo){return Jt.stateFn.apply(null,[qi,gn,fo,vr])});return Object.assign(Hi.memoized,{release:function tr(){Hi.reset(),vr.reset(),Ai.forEach(qi=>qi.release())},projector:vr.memoized,setResult:Hi.setResult,clearResult:Hi.clearResult})}}(dc)(...ht)}function le(ht,Jt,ft,on){if(void 0===ft){const zn=Jt.map(Ai=>Ai(ht));return on.memoized.apply(null,zn)}const gn=Jt.map(zn=>zn(ht,ft));return on.memoized.apply(null,[...gn,ft])}function Lt(ht){return ht instanceof o.OlP?(0,o.f3M)(ht):ht}function Qt(ht,Jt){return Jt.map((ft,on)=>{if(ht[on]instanceof o.OlP){const gn=(0,o.f3M)(ht[on]);return{key:ft.key,reducerFactory:gn.reducerFactory?gn.reducerFactory:Fr,metaReducers:gn.metaReducers?gn.metaReducers:[],initialState:gn.initialState}}return ft})}function mn(ht){return ht.map(Jt=>Jt instanceof o.OlP?(0,o.f3M)(Jt):Jt)}function Wt(ht){return"function"==typeof ht?ht():ht}function li(ht,Jt){return ht.concat(Jt)}function Pn(){if((0,o.f3M)(Fn,{optional:!0,skipSelf:!0}))throw new TypeError("The root Store has been provided more than once. Feature modules should provide feature states instead.");return"guarded"}function Ii(ht){Object.freeze(ht);const Jt=wa(ht);return Object.getOwnPropertyNames(ht).forEach(ft=>{if(!ft.startsWith("\u0275")&&function fi(ht,Jt){return Object.prototype.hasOwnProperty.call(ht,Jt)}(ht,ft)&&(!Jt||"caller"!==ft&&"callee"!==ft&&"arguments"!==ft)){const on=ht[ft];(wi(on)||wa(on))&&!Object.isFrozen(on)&&Ii(on)}}),ht}function lr(ht,Jt=[]){return(fr(ht)||Cn(ht))&&0===Jt.length?{path:["root"],value:ht}:Object.keys(ht).reduce((on,gn)=>{if(on)return on;const zn=ht[gn];return function Lr(ht){return wa(ht)&&ht.hasOwnProperty("\u0275cmp")}(zn)?on:!(fr(zn)||Cn(zn)||function Mr(ht){return"number"==typeof ht}(zn)||function Di(ht){return"boolean"==typeof ht}(zn)||function hi(ht){return"string"==typeof ht}(zn)||qn(zn))&&(function dn(ht){if(!function nr(ht){return wi(ht)&&!qn(ht)}(ht))return!1;const Jt=Object.getPrototypeOf(ht);return Jt===Object.prototype||null===Jt}(zn)?lr(zn,[...Jt,gn]):{path:[...Jt,gn],value:zn})},!1)}function ii(ht,Jt){if(!1===ht)return;const ft=ht.path.join("."),on=new Error(`Detected unserializable ${Jt} at "${ft}". ${Bi}#strict${Jt}serializability`);throw on.value=ht.value,on.unserializablePath=ft,on}function Mi(ht){return(0,o.X6Q)()?{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1,...ht}:{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function Wi({strictActionSerializability:ht,strictStateSerializability:Jt}){return ft=>ht||Jt?function mi(ht,Jt){return function(ft,on){Jt.action(on)&&ii(lr(on),"action");const gn=ht(ft,on);return Jt.state()&&ii(lr(gn),"state"),gn}}(ft,{action:on=>ht&&!yr(on),state:()=>Jt}):ft}function qr({strictActionImmutability:ht,strictStateImmutability:Jt}){return ft=>ht||Jt?function xn(ht,Jt){return function(ft,on){const gn=Jt.action(on)?Ii(on):on,zn=ht(ft,gn);return Jt.state()?Ii(zn):zn}}(ft,{action:on=>ht&&!yr(on),state:()=>Jt}):ft}function yr(ht){return ht.type.startsWith("@ngrx")}function eo({strictActionWithinNgZone:ht}){return Jt=>ht?function Xn(ht,Jt){return function(ft,on){if(Jt.action(on)&&!o.R0b.isInAngularZone())throw new Error(`Action '${on.type}' running outside NgZone. ${Bi}#strictactionwithinngzone`);return ht(ft,on)}}(Jt,{action:ft=>ht&&!yr(ft)}):Jt}function Qn(ht){return[{provide:si,useValue:ht},{provide:Sn,useFactory:ei,deps:[si]},{provide:$n,deps:[Sn],useFactory:Mi},{provide:Vn,multi:!0,deps:[$n],useFactory:qr},{provide:Vn,multi:!0,deps:[$n],useFactory:Wi},{provide:Vn,multi:!0,deps:[$n],useFactory:eo}]}function zi(){return[{provide:hn,multi:!0,deps:[$n],useFactory:La}]}function ei(ht){return ht}function La(ht){if(!ht.strictActionTypeUniqueness)return;const Jt=Object.entries(Te).filter(([,ft])=>ft>1).map(([ft])=>ft);if(Jt.length)throw new Error(`Action types are registered more than once, ${Jt.map(ft=>`"${ft}"`).join(", ")}. ${Bi}#strictactiontypeuniqueness`)}function Cs(ht={},Jt={}){return[{provide:Xe,useFactory:Pn},{provide:st,useValue:Jt.initialState},{provide:de,useFactory:Wt,deps:[st]},{provide:ut,useValue:ht},{provide:gt,useExisting:ht instanceof o.OlP?ht:ut},{provide:Me,deps:[ut,[new o.tBr(gt)]],useFactory:Lt},{provide:Gt,useValue:Jt.metaReducers?Jt.metaReducers:[]},{provide:Bn,deps:[Vn,Gt],useFactory:li},{provide:dt,useValue:Jt.reducerFactory?Jt.reducerFactory:Fr},{provide:Qe,deps:[dt,Bn],useFactory:It},_t,Yt,un,sn,hr,Qn(Jt.runtimeChecks),zi()]}function Xi(ht,Jt,ft={}){return[{provide:tt,multi:!0,useValue:ht instanceof Object?{}:ft},{provide:$e,multi:!0,useValue:{key:ht instanceof Object?ht.name:ht,reducerFactory:ft instanceof o.OlP||!ft.reducerFactory?Fr:ft.reducerFactory,metaReducers:ft instanceof o.OlP||!ft.metaReducers?[]:ft.metaReducers,initialState:ft instanceof o.OlP||!ft.initialState?void 0:ft.initialState}},{provide:Bt,deps:[tt,$e],useFactory:Qt},{provide:Mt,multi:!0,useValue:ht instanceof Object?ht.reducer:Jt},{provide:Vt,multi:!0,useExisting:Jt instanceof o.OlP?Jt:Mt},{provide:rn,multi:!0,deps:[Mt,[new o.tBr(Vt)]],useFactory:mn},zi()]}let An=(()=>{class ht{constructor(ft,on,gn,zn,Ai,vr){}}return ht.\u0275fac=function(ft){return new(ft||ht)(o.LFG(se),o.LFG(Le),o.LFG(ln),o.LFG(Fn),o.LFG(Xe,8),o.LFG(hn,8))},ht.\u0275mod=o.oAB({type:ht}),ht.\u0275inj=o.cJS({}),ht})(),Xa=(()=>{class ht{constructor(ft,on,gn,zn,Ai){this.features=ft,this.featureReducers=on,this.reducerManager=gn;const vr=ft.map((Hi,tr)=>{const fo=on.shift()[tr];return{...Hi,reducers:fo,initialState:Wt(Hi.initialState)}});gn.addFeatures(vr)}ngOnDestroy(){this.reducerManager.removeFeatures(this.features)}}return ht.\u0275fac=function(ft){return new(ft||ht)(o.LFG(Bt),o.LFG(rn),o.LFG(Tt),o.LFG(An),o.LFG(hn,8))},ht.\u0275mod=o.oAB({type:ht}),ht.\u0275inj=o.cJS({}),ht})(),ms=(()=>{class ht{static forRoot(ft,on){return{ngModule:An,providers:[...Cs(ft,on)]}}static forFeature(ft,on,gn={}){return{ngModule:Xa,providers:[...Xi(ft,on,gn)]}}}return ht.\u0275fac=function(ft){return new(ft||ht)},ht.\u0275mod=o.oAB({type:ht}),ht.\u0275inj=o.cJS({}),ht})();function ir(...ht){return{reducer:ht.pop(),types:ht.map(on=>on.type)}}function Ji(ht,...Jt){const ft=new Map;for(const on of Jt)for(const gn of on.types){const zn=ft.get(gn);ft.set(gn,zn?(vr,Hi)=>on.reducer(zn(vr,Hi),Hi):on.reducer)}return function(on=ht,gn){const zn=ft.get(gn.type);return zn?zn(on,gn):on}}}},lt=>{lt(lt.s=2089)}]);